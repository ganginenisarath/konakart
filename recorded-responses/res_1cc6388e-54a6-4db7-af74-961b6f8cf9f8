var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},RouteControllerBase=function(_super){function RouteControllerBase($scope,$rootScope,flashService,$location,$route,resourceManager,navigationService,masterService,injectorService){_super.call(this,$scope,resourceManager,NotificationService.instance(),SharedInjectorService.instance()),this.$scope=$scope,this.$rootScope=$rootScope,this.flashService=flashService,this.$location=$location,this.resourceManager=resourceManager,this.navigationService=navigationService,this.masterService=masterService,this.injectorService=injectorService,this.isMouseBlockerEnabled=!1,masterService.initialLocation=this.getInitialLocation();var thisObject=this;flashService.routeController=this,masterService.routeController=this;var params=new URLParams($location.path());$scope.resourceManager=resourceManager,params.location()||(params.setParam("location",this.getInitialLocation()),URLUtil.setLocationHashNoHistory(params.toString())),$rootScope.$on(NavigationService.UEV_NAVIGATE_TO_FRAGMENT,this.on_UEV_NAVIGATE_TO_FRAGMENT.bind(this)),$scope.loggedIn=!1,$scope.visibleItems={loginVisible:!1,appVisible:!1,loaderVisible:!0},$scope.showLogin=function(){$scope.loggedIn=!1,$scope.visibleItems.loginVisible=!0,$scope.visibleItems.appVisible=!1,$scope.visibleItems.loaderVisible=!1},$scope.showApp=function(){$scope.visibleItems.appVisible||($scope.loggedIn=!0,$scope.visibleItems.loginVisible=!1,$scope.visibleItems.loaderVisible=!1,$scope.visibleItems.appVisible=!0,thisObject.showMouseBlocker())},$rootScope.$on(MasterService.UEV_LOGOUT_EVENT,function(){}),masterService.initData?thisObject.gotoInitialRoute(params):($rootScope.$on(MasterService.UEV_INIT_DATA_FETCHED,function(){thisObject.gotoInitialRoute(params)}),this.flashService.hideFlash(),this.$scope.loadingContent=!0),masterService.setRoutesTable(this.getRoutesTable())}return __extends(RouteControllerBase,_super),RouteControllerBase.prototype.on_UEV_NAVIGATE_TO_FRAGMENT=function(event,fragment){var _this=this;if(ADLoggerService.log("on UEV_NAVIGATE_TO_FRAGMENT fragment: "+fragment),this.masterService.initData){var params=new URLParams(fragment),nextRoute=this.getHTMLRoute(params.location());this.cleanupDialogs(nextRoute,params).then(function(){if(_this.isFlashRoute(params)){if(!params.location())return;if(!_this.flashService.flashInstalled)return void NotificationService.instance().displayMessage("Please install Flash to use this feature","");var currentLocationParams=_this.injectorService.navigationHistoryService().getCurrentNavHistoryUrlParams(),currentlyInHtml=currentLocationParams&&_this.isHTMLEnabledLocation(currentLocationParams);if(currentlyInHtml&&_this.navigationService.isFlexModalLocation(params.location()))try{_this.flashService.gotoFlexModal(params.toString())}catch(e){ADLoggerService.error("Error when calling flashService.gotoFlexModal"+fragment+" "+e)}else{try{_this.flashService.gotoView(fragment)}catch(e){ADLoggerService.error("Error when calling flashService.gotoView()"+fragment+" "+e)}_this.beginShowingFlash(),_this.showFlashRoute()}}else{var loc=params.location();loc&&0!=loc.length||(loc=_this.getInitialLocation());var routeDependencies=RouteControllerBase.RouteDependencies[loc];if(routeDependencies&&routeDependencies.length>=1){var resultHandler=function(){_this.loadHtmlView(loc,nextRoute,params,fragment)};_this.injectorService.$ocLazyLoad().load({serie:!0,files:routeDependencies}).then(resultHandler)}else _this.loadHtmlView(loc,nextRoute,params,fragment)}})}},RouteControllerBase.prototype.loadHtmlView=function(loc,nextRoute,params,fragment){this.$scope.currentRoute;this.$scope.currentRoute===nextRoute?this.$rootScope.$broadcast(NavigationService.UEV_FORCE_CONTROLLER_RELOAD):this.$scope.currentRoute=nextRoute,nextRoute instanceof DialogRoute?nextRoute.openDialog():(this.flashService.clearFlexViewstack(),this.flashService.hideFlash()),this.$scope.loadingContent=!1,this.detectTimeRangeChange(params),this.$rootScope.$emit(NavigationService.UEV_NAV_ACTION_HTML,fragment)},RouteControllerBase.prototype.showFlashRoute=function(){this.$scope.currentRoute=this.getRoutesTable().FLASH_ROUTE_ID},RouteControllerBase.prototype.getCurrentRoute=function(){return this.$scope.currentRoute},RouteControllerBase.prototype.isCurrentRouteFlash=function(){return this.getCurrentRoute()&&this.getCurrentRoute().controllerUrl==RouteControllerBase.FLASH_ROUTE_URL},RouteControllerBase.prototype.htmlDialogsOpen=function(){return DialogService.instance().htmlDialogsOpen()},RouteControllerBase.prototype.cleanupDialogs=function(nextRoute,params){var deferred=InjectorService.instance().$q().defer();if(nextRoute instanceof DialogRoute||params.getBooleanParam(FlashService.LOADING_FLEX_MODAL_FROM_HTML,!1)||!this.htmlDialogsOpen())deferred.resolve();else{for(var dialogService=DialogService.instance(),minimizationPromises=[];this.htmlDialogsOpen();){var topDialogKeyValuePair=this.sharedInjectorService.$modalStack().getTop(),topDialogValue=topDialogKeyValuePair.value;if(topDialogValue.modalScope&&topDialogValue.modalScope.modalSettings&&topDialogValue.modalScope.modalSettings.minimizable){var dialogSpecificMinimizeMethod=topDialogValue.modalScope.controller&&topDialogValue.modalScope.controller.minimizeDialog;minimizationPromises.push(dialogSpecificMinimizeMethod?dialogSpecificMinimizeMethod.call(topDialogValue.modalScope.controller):dialogService.minimizeDialog(topDialogKeyValuePair.key))}else topDialogKeyValuePair.key.dismiss(DialogService.DISMISS_NAVIGATION)}Util.isDefAndNotEmptyArray(minimizationPromises)?this.sharedInjectorService.$q().all(minimizationPromises).then(function(){ViewUtil.doAfterDigest(function(){URLUtil.setLocationHashWithHistory(params),deferred.resolve()})}):deferred.resolve()}return deferred.promise},RouteControllerBase.prototype.detectTimeRangeChange=function(params){var timeRangeStringFromURL=params.timeRange();if(timeRangeStringFromURL&&timeRangeStringFromURL.length>0){var timeRangeStringFromService=this.injectorService.timeRangeService().getCurrentTimeRangeStringForUrl();timeRangeStringFromService!==timeRangeStringFromURL&&this.injectorService.timeRangeService().changeTimeRange(this.injectorService.timeRangeService().createTimeRange(timeRangeStringFromURL,"."))}},RouteControllerBase.prototype.getInitialLocation=function(){return NavigationDataConstants.AD_HOME_OVERVIEW},RouteControllerBase.prototype.gotoInitialRoute=function(params){this.isFlashRoute(params)?this.beginShowingFlash():(this.masterService.isLoggedIn?this.navigationService.navigateTo(params.toString()):this.$rootScope.$on(MasterService.UEV_LOGIN_EVENT,function(){this.navigationService.navigateTo(params.toString())}),this.isMouseBlockerEnabled&&$(this.$scope.mouseBlocker).remove())},RouteControllerBase.prototype.showMouseBlocker=function(){if(this.isMouseBlockerEnabled){this.$scope.mouseBlocker=$(document.createElement("div")),this.$scope.mouseBlocker.attr("id","mouseBlocker"),this.$scope.mouseBlocker.attr("style","z-index:2000;position:absolute;left:0px;right:0px;top:0px;bottom:0px;"),$(document.body).append(this.$scope.mouseBlocker);var preventMouse=function(event){var evt=event?event:window.event;return evt.preventDefault&&evt.preventDefault(),evt.returnValue=!1,!1};this.$scope.mouseBlocker.mousemove(preventMouse).mousedown(preventMouse).mouseover(preventMouse),this.$scope.mouseBlocker.mouseout(preventMouse).mouseup(preventMouse).click(preventMouse)}},RouteControllerBase.prototype.beginShowingFlash=function(){this.flashService.flashInstalled||NotificationService.instance().displayMessage("Please install Flash to use this feature",""),this.flashService.flexApplicationReady?(this.$scope.loadingContent=!1,this.flashService.showFlash(),this.isMouseBlockerEnabled&&$(this.$scope.mouseBlocker).remove()):(this.flashService.hideFlash(),this.$scope.loadingContent=!0,this.$scope.$on(App.UEV_FLASH_LOADED,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var params=new URLParams(this.$location.path());this.isFlashRoute(params)&&(this.$scope.loadingContent=!1,this.flashService.showFlash(),this.isMouseBlockerEnabled&&this.$scope.mouseBlocker.remove())}.bind(this)))},RouteControllerBase.prototype.isFlashRoute=function(params){var isHTMLRoute=!1,route=this.getHTMLRoute(params.location());return route&&this.masterService.isHTMLEnabledLocation(params)&&(isHTMLRoute=!0),!isHTMLRoute},RouteControllerBase.prototype.isHTMLEnabledLocation=function(params){return this.masterService.isHTMLEnabledLocation(params)},RouteControllerBase.prototype.getHTMLRoute=function(location){var route=this.getRoutesTable()[location];return route},RouteControllerBase.prototype.getRoutesTable=function(){return{}},RouteControllerBase.RouteDependencies={ALERT_RESPOND_EMAIL_ACTION_PLAN_DETAIL:["lib/textAngular/textAngular-rangy.min.js","lib/textAngular/textAngular-sanitize.min.js","lib/textAngular/textAngular.min.js","lib/textAngular/textAngularSetup.min.js"],SETTINGS_USER_PREFERENCES:["lib/angular-qrcodejs/qrcode.min.js"]},RouteControllerBase.$inject=["$scope","$rootScope","flashService","$location","$route","resourceManager","navigationService","masterService","injectorService"],RouteControllerBase.FLASH_ROUTE_URL="app/view/flashPlaceholder/FlashPlaceholder.html",RouteControllerBase}(ControllerBase);define("app/pages/RouteControllerBase",function(){});var ViewServiceBase=function(){function ViewServiceBase($location,navigationService,notificationService,resourceManager){var _this=this;this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,MasterService.instance().onInitDataFetch().then(function(){_this.initData=MasterService.instance().initData})}return ViewServiceBase.prototype.getCurrentUrlParams=function(){return new URLParams(this.$location.path())},ViewServiceBase.prototype.createUrlParamsWithCurrentTimeRange=function(){return URLParams.createUrlParamsWithCurrentTimeRange()},ViewServiceBase.prototype.createUrlParamsForLocation=function(location){var urlParams=URLParams.createUrlParamsWithCurrentTimeRange();return urlParams.setParam(UrlConstants.LOCATION,location),urlParams},ViewServiceBase.prototype.getString=function(key,replaceVals){return this.resourceManager?this.resourceManager.getString("ui",key,replaceVals):""},ViewServiceBase.prototype.viewLocation=function(location){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,location),this.navigationService.navigateTo(params.toString())},ViewServiceBase.prototype.viewApplicationLocation=function(location,applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,location),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),location===NavigationDataConstants.METRIC_BROWSER?MetricBrowserViewService.instance().gotoMetricBrowserLocation(params):this.navigationService.navigateTo(params.toString())},ViewServiceBase.$inject=["$location","navigationService","notificationService","resourceManager"],ViewServiceBase}();define("app/view/services/ViewServiceBase",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MainViewControllerBase=function(_super){function MainViewControllerBase($scope,$rootScope,$location,resourceManager,notificationService,injectorService){void 0===$rootScope&&($rootScope=null),void 0===$location&&($location=null),void 0===resourceManager&&(resourceManager=null),void 0===notificationService&&(notificationService=null),void 0===injectorService&&(injectorService=null),_super.call(this,$scope),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.enableLogDebug=!1,this.resourceManager=ResourceManager.instance(),this.notificationService=NotificationService.instance(),this.injectorService=InjectorService.instance(),this.$rootScope=InjectorService.instance().$rootScope(),this.$location=InjectorService.instance().$location()}return __extends(MainViewControllerBase,_super),MainViewControllerBase.prototype.init=function(){this.logDebug("MainViewControllerBase.init"),this._setup(),this.fetchInitViewData()},MainViewControllerBase.prototype.getTimeRangeString=function(){return this.injectorService.timeRangeService().getCurrentTimeRangeStringForUrl()},MainViewControllerBase.prototype.setup=function(){ADLoggerService.warn("MainViewControllerBase.setup was called. This is pseudo-abstract and should be overriden")},MainViewControllerBase.prototype.setupEventListeners=function(){ADLoggerService.warn("MainViewControllerBase.setupEventListeners was called. This is pseudo-abstract and should be overridden")},MainViewControllerBase.prototype.fetchInitViewData=function(){ADLoggerService.warn("MainViewControllerBase.fetchInitViewData was called. This is pseudo-abstract and should be overridden")},MainViewControllerBase.prototype.fetchData=function(autoRefresh){void 0===autoRefresh&&(autoRefresh=!1),ADLoggerService.warn("MainViewControllerBase.fetchData was called. This is pseudo-abstract and should be overridden")},MainViewControllerBase.prototype.setupLocationBar=function(){var config=this.createLocationBarConfigData(this.createLocationBarEntryConfigs());config.onRefreshFunction=this.onLocationBarRefresh.bind(this),config.helpLink=this.helpLink,config.videoLink=this.videoLink,this.setLocationBarConfig(config)},MainViewControllerBase.prototype.createLocationBarEntryConfigs=function(){return ADLoggerService.error("MainViewControllerBase.createLocationBarEntryConfigs was called. This is pseudo-abstract and should be overridden"),null},MainViewControllerBase.prototype.onLocationBarRefresh=function(){this.logDebug("MainViewControllerBase.onLocationBarRefresh"),this.fetchData()},MainViewControllerBase.prototype.on_UEV_TIME_RANGE_CHANGE_TR_SERVICE=function(){this.logDebug("MainViewControllerBase.on_UEV_TIME_RANGE_CHANGE_TR_SERVICE"),this.fetchData()},MainViewControllerBase.prototype.on_TIMERANGE_AUTOREFRESH_EVENT=function(){this.logDebug("MainViewControllerBase.on_TIMERANGE_AUTOREFRESH_EVENT"),this.fetchData(!0)},MainViewControllerBase.prototype.on_FLOWMAP_CHANGED_EVENT=function(){this.logDebug("MainViewControllerBase.on_FLOWMAP_CHANGED_EVENT"),this.fetchData(!0)},MainViewControllerBase.prototype.logDebug=function(message){this.enableLogDebug&&ADLoggerService.warn(message)},MainViewControllerBase.prototype._setup=function(){this._setupEventListeners(),this.setup()},MainViewControllerBase.prototype._setupEventListeners=function(){var _this=this;this.$scope.$on(TimeRangeService.UEV_TIME_RANGE_CHANGE_TR_SERVICE,function(){_this.on_UEV_TIME_RANGE_CHANGE_TR_SERVICE()}),this.$scope.$on(TimeRangeService.TIMERANGE_AUTOREFRESH_EVENT,function(){_this.on_TIMERANGE_AUTOREFRESH_EVENT()}),this.$scope.$on("UEV_COMPONENT_DELETED",function(){_this.on_FLOWMAP_CHANGED_EVENT()}),this.setupEventListeners()},MainViewControllerBase}(ControllerBase);define("app/controller/MainViewControllerBase",function(){});var EntityCache=function(){function EntityCache(applicationId){this.applicationId=applicationId,this.entityType=null,this.entityMap={},this.entities=null,this.guid=null,this.guid=Util.generateId()}return EntityCache.prototype.getEntities=function(forceRefresh){if(void 0===forceRefresh&&(forceRefresh=!1),!this.entities||forceRefresh)return this.fetchEntities();var deferred=InjectorService.instance().$q().defer();return deferred.resolve(),deferred.promise},EntityCache.prototype.getEntityById=function(id){return this.entityMap[id]},EntityCache.prototype.processEntitiesFetched=function(entities){this.entities=Util.sortByName(entities),this.entityMap={};for(var i=0;i<entities.length;i++)this.entityMap[entities[i].id]=entities[i],this.processEntityFetchedFromServer(entities[i]);EventBusService.instance().dispatchEvent(EntityCache.UEV_ENTITIES_FETCHED_BY_APP_CACHE,this.entities)},EntityCache.prototype.fetchEntities=function(){return null},EntityCache.prototype.processEntityFetchedFromServer=function(){return null},EntityCache.UEV_ENTITIES_FETCHED_BY_APP_CACHE="UEV_ENTITIES_FETCHED_BY_APP_CACHE",EntityCache}();define("app/model/EntityCache",function(){});var UiConfig=function(){function UiConfig(){}return UiConfig.getColor=function(colorName){var color,cssRule=Ext.util.CSS.getRule(".adsJS_"+colorName);return cssRule&&(color=cssRule.style.color),color},UiConfig.getFont=function(fontName){var fontFamily,cssRule=Ext.util.CSS.getRule(".adsJS_"+fontName);return cssRule&&(fontFamily=cssRule.style.fontFamily),fontFamily},UiConfig.getHeight=function(heightName){var heightDimension,cssRule=Ext.util.CSS.getRule(".adsJS_"+heightName);return cssRule&&(heightDimension=cssRule.style.height),heightDimension},UiConfig.CREATE_MODE="CREATE_MODE",UiConfig.EDIT_MODE="EDIT_MODE",UiConfig.VIEW_MODE="VIEW_MODE",UiConfig.DEFAULT_ACCOUNT_NAME="customer1",UiConfig.SYSTEM_ACCOUNT_NAME="system",UiConfig.ROOT_USER_NAME="root",UiConfig.VALIDATE_USERNAME_REG_EX="^[a-zA-Z0-9_.-]+$",UiConfig.VALIDATE_TIME_REG_EX="(^([0-9]|[0-1][0-9]|[2][0-3]):([0-5][0-9])(s{0,1})(AM|PM|am|pm|aM|Am|pM|Pm{2,2})$)|(^([0-9]|[1][0-9]|[2][0-3])(s{0,1})(AM|PM|am|pm|aM|Am|pM|Pm{2,2})$)",UiConfig.SINGULARITY_AGENT="singularity-agent",UiConfig.DOUBLE_CLICK_INTERVAL=300,UiConfig}();define("app/config/UiConfig",function(){});var EventConstants=function(){function EventConstants(){}return EventConstants.UEV_VIEW_EVENTS_ALL="UEV_VIEW_EVENTS_ALL",EventConstants.UEV_VIEW_EVENTS_POLICY="UEV_VIEW_EVENTS_POLICY",EventConstants.UEV_VIEW_EVENTS_POLICY_BT="UEV_VIEW_EVENTS_POLICY_BT",EventConstants.UEV_VIEW_EVENTS_POLICY_NODE="UEV_VIEW_EVENTS_POLICY_NODE",EventConstants.UEV_VIEW_EVENTS_POLICY_OVERALL_APP="UEV_VIEW_EVENTS_POLICY_OVERALL_APP",EventConstants.UEV_VIEW_EVENTS_POLICY_ERROR="UEV_VIEW_EVENTS_POLICY_ERROR",EventConstants.UEV_VIEW_EVENTS_POLICY_BACKENDS="UEV_VIEW_EVENTS_POLICY_BACKENDS",EventConstants.UEV_VIEW_EVENTS_POLICY_INFORMATION_POINTS="UEV_VIEW_EVENTS_POLICY_INFORMATION_POINTS",EventConstants.UEV_VIEW_EVENTS_POLICY_CUSTOM="UEV_VIEW_EVENTS_POLICY_CUSTOM",EventConstants.UEV_VIEW_EVENTS_CODE_PROBLEMS="UEV_VIEW_EVENTS_CODE_PROBLEMS",EventConstants.UEV_VIEW_EVENTS_APP_CHANGES="UEV_VIEW_EVENTS_APP_CHANGES",EventConstants.UEV_VIEW_EVENTS_INFRA_CHANGES="UEV_VIEW_EVENTS_INFRA_CHANGES",EventConstants.UEV_VIEW_EVENTS_AD_CONFIG="UEV_VIEW_EVENTS_AD_CONFIG",EventConstants.UEV_VIEW_EVENTS_AD_DIAG="UEV_VIEW_EVENTS_AD_DIAG",EventConstants.UEV_VIEW_EVENTS_CUSTOM="UEV_VIEW_EVENTS_CUSTOM",EventConstants.UEV_APPLICATION_EDITED="UEV_APPLICATION_EDITED",EventConstants.UEV_LOCATION_BAR_DATA_SET_BY_FLEX="UEV_LOCATION_BAR_DATA_SET_BY_FLEX",EventConstants.UEV_LOCATION_BAR_CONFIG_SET_BY_HTML="UEV_LOCATION_BAR_CONFIG_SET_BY_HTML",EventConstants.UEV_FILTER_BAR_CHANGE="UEV_FILTER_BAR_CHANGE",EventConstants.UEV_FILTER_BAR_REMOVE_CRITERIA="UEV_FILTER_BAR_REMOVE_CRITERIA",EventConstants.UEV_PROCESS_FILTERS="UEV_PROCESS_FILTERS",EventConstants.UEV_SET_CURRENT_LOCATION_AS_DEFAULT_LANDING_SCREEN="UEV_SET_CURRENT_LOCATION_AS_DEFAULT_LANDING_SCREEN",EventConstants.UEV_DISABLE_HELP_POPUPS="UEV_DISABLE_HELP_POPUPS",EventConstants.UEV_RERUN_HELP_POPUPS="UEV_RERUN_HELP_POPUPS",EventConstants.ALL_UEV_EVENT_COUNTS_CONTROLLER_EVENTS=[EventConstants.UEV_VIEW_EVENTS_ALL,EventConstants.UEV_VIEW_EVENTS_POLICY,EventConstants.UEV_VIEW_EVENTS_POLICY_BT,EventConstants.UEV_VIEW_EVENTS_POLICY_NODE,EventConstants.UEV_VIEW_EVENTS_POLICY_OVERALL_APP,EventConstants.UEV_VIEW_EVENTS_POLICY_ERROR,EventConstants.UEV_VIEW_EVENTS_POLICY_BACKENDS,EventConstants.UEV_VIEW_EVENTS_POLICY_INFORMATION_POINTS,EventConstants.UEV_VIEW_EVENTS_POLICY_CUSTOM,EventConstants.UEV_VIEW_EVENTS_CODE_PROBLEMS,EventConstants.UEV_VIEW_EVENTS_APP_CHANGES,EventConstants.UEV_VIEW_EVENTS_INFRA_CHANGES,EventConstants.UEV_VIEW_EVENTS_AD_CONFIG,EventConstants.UEV_VIEW_EVENTS_AD_DIAG,EventConstants.UEV_VIEW_EVENTS_CUSTOM],EventConstants.UEV_VIEW_ALL_SNAPSHOTS="UEV_VIEW_ALL_SNAPSHOTS",EventConstants.UEV_VIEW_SLOW_SNAPSHOTS="UEV_VIEW_SLOW_SNAPSHOTS",EventConstants.UEV_VIEW_VERY_SLOW_SNAPSHOTS="UEV_VIEW_VERY_SLOW_SNAPSHOTS",EventConstants.UEV_VIEW_STALL_SNAPSHOTS="UEV_VIEW_STALL_SNAPSHOTS",EventConstants.UEV_VIEW_ERROR_SNAPSHOTS="UEV_VIEW_ERROR_SNAPSHOTS",EventConstants.UEV_VIEW_SNAPSHOTS_ANALYSIS="UEV_VIEW_TRANSACTION_ANALYSIS",EventConstants.ALL_UEV_VIEW_SNAPSHOT_EVENTS=[EventConstants.UEV_VIEW_ALL_SNAPSHOTS,EventConstants.UEV_VIEW_SLOW_SNAPSHOTS,EventConstants.UEV_VIEW_VERY_SLOW_SNAPSHOTS,EventConstants.UEV_VIEW_STALL_SNAPSHOTS,EventConstants.UEV_VIEW_ERROR_SNAPSHOTS,EventConstants.UEV_VIEW_SNAPSHOTS_ANALYSIS],EventConstants.UEV_VIEW_EXCEPTIONS_ALL="UEV_VIEW_EXCEPTIONS_ALL",EventConstants.ALL_UEV_VIEW_EXCEPTION_EVENTS=[EventConstants.UEV_VIEW_EXCEPTIONS_ALL],EventConstants.UEV_VIEW_SERVICE_ENDPOINTS_ALL="UEV_VIEW_SERVICE_ENDPOINTS_ALL",EventConstants.ALL_UEV_VIEW_SERVICE_ENDPOINTS_EVENTS=[EventConstants.UEV_VIEW_SERVICE_ENDPOINTS_ALL],EventConstants.UEV_CLOSE="close",EventConstants.UEV_CLOSE_DIALOG="closeDialog",EventConstants.UEV_LAYOUT_CHANGED="layoutChanged",EventConstants.UEV_SHOW_CLOUD_AUTOMATION_CHANGED="showAutomationFeaturesChanged",EventConstants.UEV_NODE_CREATED="UEV_NODE_CREATED",EventConstants.UEV_NODE_DELETED="UEV_NODE_DELETED",EventConstants.UEV_NODES_DELETED="UEV_NODES_DELETED",EventConstants.UEV_NODE_UPDATED="UEV_NODE_UPDATED",EventConstants.UEV_NODES_FETCHED_FOR_COMPONENT="UEV_NODES_FETCHED_FOR_COMPONENT",EventConstants.UEV_COMPONENT_CREATED="UEV_COMPONENT_CREATED",EventConstants.UEV_COMPONENT_DELETED="UEV_COMPONENT_DELETED",EventConstants.UEV_COMPONENTS_DELETED="UEV_COMPONENTS_DELETED",EventConstants.UEV_COMPONENT_UPDATED="UEV_COMPONENT_UPDATED",EventConstants.UEV_COMPONENTS_FETCHED_FOR_APPLICATION="UEV_COMPONENTS_FETCHED_FOR_APPLICATION",EventConstants.UEV_ALL_APPLICATIONS_FETCHED="UEV_ALL_APPLICATIONS_FETCHED",EventConstants.UEV_APPLICATION_UPDATED="UEV_APPLICATION_UPDATED",EventConstants.UEV_APPLICATION_DELETED="UEV_APPLICATION_DELETED",EventConstants.UEV_APPLICATION_CREATED="UEV_APPLICATION_CREATED",EventConstants.UEV_BACKEND_DELETED="UEV_BACKEND_DELETED",EventConstants.UEV_BACKEND_UPDATED="UEV_BACKEND_UPDATED",EventConstants.UEV_BACKEND_CALL_RESOLVED="UEV_BACKEND_CALL_RESOLVED",EventConstants.UEV_DEPLOYER_CONFIG_CREATED="UEV_DEPLOYER_CONFIG_CREATED",EventConstants.UEV_DEPLOYER_CONFIG_UPDATED="UEV_DEPLOYER_CONFIG_UPDATED",EventConstants.UEV_DEPLOYER_CONFIG_DELETED="UEV_DEPLOYER_CONFIG_DELETED",EventConstants.UEV_DEPLOYER_CONFIG_ASSIGNED="UEV_DEPLOYER_CONFIG_ASSIGNED",EventConstants.UEV_EUM_ENABLED_CHANGE="UEV_EUM_ENABLED_CHANGE",EventConstants.UEV_INFO_POINT_UPDATED="UEV_INFO_POINT_UPDATED",EventConstants.UEV_INFO_POINT_CREATED="UEV_INFO_POINT_CREATED",EventConstants.UEV_EMAIL_CONFIG_UPDATE="UEV_EMAIL_CONFIG_UPDATE",EventConstants.UEV_APM_SNAPSHOT_VIEW="UEV_APM_SNAPSHOT_VIEW",EventConstants.UEV_CUSTOM_DASHBOARD_CREATE="UEV_CUSTOM_DASHBOARD_CREATE",EventConstants.UEV_APM_APP_ALERT="UEV_APM_APP_ALERT",EventConstants.UEV_EUM_MOBILE_REQUEST_SNAPSHOT="UEV_EUM_MOBILE_REQUEST_SNAPSHOT",EventConstants.UEV_EUM_MOBILE_SETUP_DSYM="UEV_EUM_MOBILE_SETUP_DSYM",EventConstants}();define("app/events/EventConstants",function(){});var FilterType=function(){function FilterType(){}return FilterType.APPLICATION="APPLICATION",FilterType.APPLICATION_COMPONENT="APPLICATION_COMPONENT",FilterType.APPLICATION_COMPONENT_NODE="APPLICATION_COMPONENT_NODE",FilterType.BUSINESS_TRANSCATION="BUSINESS_TRANSACTION",FilterType.USER_EXPERIENCE="USER_EXPERIENCE",FilterType.NUMERIC="NUMERIC",FilterType.RANGE="RANGE",FilterType.INFRASTRUCTURE="INFRASTRUCTURE",FilterType.ERROR="ERROR",FilterType.HTTP="HTTP",FilterType.SEARCH_INPUT_TEXT="SEARCH_INPUT_TEXT",FilterType.TEXT="TEXT",FilterType.NAME_VALUE_PAIR="NAME_VALUE_PAIR",FilterType.LOCATION="LOCATION",FilterType.SUPER_SELECT="SUPER_SELECT",FilterType.DEVICE_TYPE="DEVICE_TYPE",FilterType.SYNTHETIC_JOB="SYNTHETIC_JOB",FilterType.BOOLEAN="BOOLEAN",FilterType.PERFORMANCE="PERFORMANCE",FilterType.PAGE="PAGE",FilterType.DIAG_SESSION_TYPE="DIAG_SESSION_TYPE",FilterType.ERROR_TYPE="ERROR_TYPE",FilterType.HEALTH="HEALTH",FilterType.DB_SERVER_TYPE="DB_SERVER_TYPE",FilterType}(),FilterBase=function(){function FilterBase(autoFetchOptions){void 0===autoFetchOptions&&(autoFetchOptions=!0),this.autoFetchOptions=autoFetchOptions}return FilterBase.prototype.unmarshallFilterFromJson=function(filterData){for(var attr in filterData)filterData.hasOwnProperty(attr)&&(this[attr]=filterData[attr])},FilterBase}();define("app/view/components/filterBar/filters/FilterBase",function(){});var MultipleInheritanceUtil=function(){function MultipleInheritanceUtil(){}return MultipleInheritanceUtil.applyMixins=function(derivedCtor,baseCtors){baseCtors.forEach(function(baseCtor){Object.getOwnPropertyNames(baseCtor.prototype).forEach(function(name){"constructor"!==name&&void 0===derivedCtor.prototype[name]&&(derivedCtor.prototype[name]=baseCtor.prototype[name])})})},MultipleInheritanceUtil}();define("app/view/common/multipleInheritance/MultipleInheritanceUtil",function(){});var FilterSetBase=function(){function FilterSetBase(filters){this.duplicateFilterMessage=null,this.textSearchInput=null,Util.isDefAndNotNull(filters)&&(this.filters=filters),this.duplicateFilterMessage=ResourceManager.instance().getString("ui","ms_duplicateFilterMessage")}return FilterSetBase.prototype.addFilter=function(){},FilterSetBase.prototype.addFilterToContext=function(filterType,analyticsField,value,wrapQueryInQuotes){return void 0===wrapQueryInQuotes&&(wrapQueryInQuotes=!0),null},FilterSetBase.prototype.getBrowserFilter=function(fieldCategory,browser,autoFetchOptions){return void 0===browser&&(browser=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),null},FilterSetBase.prototype.getInfrastructureFilter=function(entityType,selectedEntities){return void 0===entityType&&(entityType=""),void 0===selectedEntities&&(selectedEntities=[]),null},FilterSetBase.prototype.getDeviceTypeFilter=function(fieldCategory,device,deviceOS,autoFetchOptions){return void 0===device&&(device=null),void 0===deviceOS&&(deviceOS=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),null},FilterSetBase.prototype.getLocationFilter=function(fieldCategory,geoCountryFilter,geoRegionFilter,geoCityFilter,autoFetchOptions){return void 0===geoCountryFilter&&(geoCountryFilter=null),void 0===geoRegionFilter&&(geoRegionFilter=null),void 0===geoCityFilter&&(geoCityFilter=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),null},FilterSetBase.prototype.getSyntheticJobFilter=function(fieldCategory,syntheticJob,autoFetchOptions){return void 0===syntheticJob&&(syntheticJob=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),null},FilterSetBase.prototype.getBooleanFilter=function(){return null},FilterSetBase}();define("app/view/components/filterBar/filters/FilterSetBase",function(){});var PopoverDirective=function(){function PopoverDirective(){return{restrict:"EA",replace:!1,scope:{adContent:"@",adTitle:"@",adTarget:"=",adPlacement:"=",adContentTemplate:"=",adTrigger:"=",adAppendToBody:"@",adCloseOnTargetClick:"@",adPopupEnabled:"="},controller:PopoverController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs),controller.init()}}}return PopoverDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-popover"),PopoverDirective).config(function($popoverProvider){angular.extend($popoverProvider.defaults,{html:!0})}),define("app/view/components/popover/PopoverDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},PopoverController=function(_super){function PopoverController($scope,$popover){var _this=this;_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.$popover=$popover,this.runInitOnEvalAsync=!1,this.initRunOnce=!1,this.isShowing=!1,this.targetClickListenerSetup=!1,this.$scope.$watch("adPopupEnabled",function(newValue,oldValue){newValue!==oldValue&&_this.onPopupEnabledChange()})}return __extends(PopoverController,_super),PopoverController.prototype.link=function(scope,iElement,iAttrs){this.element=iElement,this.attrs=iAttrs},PopoverController.prototype.initLater=function(){var _this=this;this.runInitOnEvalAsync||(this.runInitOnEvalAsync=!0,this.$scope.$evalAsync(function(){_this.runInitOnEvalAsync&&(_this.init(),_this.runInitOnEvalAsync=!1)}))},PopoverController.prototype.init=function(){this.initRunOnce=!0,this.targetElement=this.getTargetElement(),this.setupTargetClickListener()},PopoverController.prototype.setTemplate=function(template){this.template=template},PopoverController.prototype.showLater=function(delayMillis){var _this=this;if(void 0===delayMillis&&(delayMillis=-1),this.isEnabled()){var delayMillisToUse=delayMillis;-1==delayMillis&&(delayMillisToUse=PopoverController.SHOW_LATER_DELAY_MS),InjectorService.instance().$timeout()(function(){_this.show()},delayMillisToUse)}},PopoverController.prototype.show=function(){this.popover||(this.popover=this.buildPopover()),this.popover&&this.isEnabled()&&(this.popover.$promise.then(this.popover.show),this.isShowing=!0)},PopoverController.prototype.hide=function(){this.popover&&this.isShowing&&(this.popover.$promise.then(this.popover.hide),this.isShowing=!1)},PopoverController.prototype.isEnabled=function(){return _.isUndefined(this.$scope.adPopupEnabled)?!0:this.$scope.adPopupEnabled},PopoverController.prototype.onPopupEnabledChange=function(){!this.isEnabled()&&this.isShowing&&this.hide(),this.initRunOnce&&this.initLater()},PopoverController.prototype.getTargetElement=function(){var element=null;if(this.$scope.adTarget)if("2above"==this.$scope.adTarget){var prev=this.element.prev();prev&&(element=prev.prev())}else this.isTargetById()&&(element=$(document.querySelector(this.$scope.adTarget)));else element=this.element.prev();return element},PopoverController.prototype.buildPopoverOptions=function(){var options={};return options.title=this.$scope.adTitle,options.content=this.$scope.adContent,options.placement=this.$scope.adPlacement?this.$scope.adPlacement:"bottom",options.trigger=this.$scope.adTrigger?this.$scope.adTrigger:"manual",options.template=this.template||"app/view/components/popover/popover.tpl.html","true"==this.$scope.adAppendToBody&&(options.container="body"),options.id=this.element.attr("id"),this.isTargetById()&&(options.target=this.$scope.adTarget),options},PopoverController.prototype.buildPopover=function(){this.popoverOptions||(this.popoverOptions=this.buildPopoverOptions());var popover=this.$popover(angular.element(this.targetElement),this.popoverOptions);return popover.$scope.adContentTemplate=this.$scope.adContentTemplate,popover},PopoverController.prototype.closeOnTargetClick=function(){return"true"==this.$scope.adCloseOnTargetClick},PopoverController.prototype.setupTargetClickListener=function(){this.closeOnTargetClick()&&this.targetElement&&!this.targetClickListenerSetup&&(this.targetElement.one(MouseEvents.CLICK,this.onTargetClick.bind(this)),this.targetClickListenerSetup=!0)},PopoverController.prototype.onTargetClick=function(){this.isShowing&&this.hide()},PopoverController.prototype.isTargetById=function(){return this.$scope.adTarget&&0==this.$scope.adTarget.indexOf("#")},PopoverController.SHOW_LATER_DELAY_MS=1e3,PopoverController.$inject=["$scope","$popover"],PopoverController}(ControllerBase);appdynamicsModule.controller("PopoverController",PopoverController),define("app/view/components/popover/PopoverController",function(){}),define("app/view/common/progressIndicator/ProgressIndicatorDirective",["require","exports"],function(){var ProgressIndicatorDirective=function(){function ProgressIndicatorDirective(){return{restrict:"E",scope:{adProgressIndicatorVisible:"@",adMessage:"@",adTopOffsetPixels:"@",adSmallSize:"@"},templateUrl:"app/view/common/progressIndicator/ProgressIndicatorView.html",controller:"ProgressIndicatorController",link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)
}}}return ProgressIndicatorDirective}();return appdynamicsModule.directive(StringUtils.toCamelCase("ad-progress-indicator"),ProgressIndicatorDirective),ProgressIndicatorDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/progressIndicator/ProgressIndicatorController",["require","exports"],function(require,exports){var ProgressIndicatorController=function(_super){function ProgressIndicatorController($scope,$element,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$element=$element,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.isVisible=!1,this.message="Loading...",this.element=null,this.topOffsetPixes=-1,this.useSmallSize=!1,this.$scope.controller=this,this.init()}return __extends(ProgressIndicatorController,_super),ProgressIndicatorController.prototype.link=function(scope,iElement){this.element=iElement,this.setTargetElement()},ProgressIndicatorController.prototype.init=function(){var _this=this;this.$scope.adMessage&&(this.message=this.$scope.adMessage),this.$scope.$watch("adMessage",function(){_this.$scope.adMessage&&(_this.message=_this.$scope.adMessage)}),this.$scope.$watch("adProgressIndicatorVisible",function(){_this.isVisible="true"===_this.$scope.adProgressIndicatorVisible?!0:!1}),this.$scope.$watch("adSmallSize",function(){_this.useSmallSize="true"===_this.$scope.adSmallSize}),this.$scope.$watch("adTopOffsetPixels",function(){if(_this.$scope.adTopOffsetPixels)try{_this.topOffsetPixes=parseInt(_this.$scope.adTopOffsetPixels)}catch(error){_this.topOffsetPixes=-1}})},ProgressIndicatorController.prototype.getProgressIndicatorContentStyle=function(){if(this.targetElement&&this.element){var thisWidth,targetHeight=this.targetElement.outerHeight(!0),targeWidth=this.targetElement.outerWidth(!0),iconDivWidth=(Math.max(this.element.outerHeight(!0),84),this.element.find(".ads-progress-indicator-icon").outerWidth(!0)),messageDivWidth=this.element.find(".ads-progress-indicator-message").outerWidth(!0);if(this.useSmallSize)thisWidth=BrowserUtils.isBrowserInternetExplorer9()?50:Math.max(iconDivWidth,50);else{var totalWidthForIconAndMessage=iconDivWidth+messageDivWidth+25+25;thisWidth=BrowserUtils.isBrowserInternetExplorer9()?220:Math.max(totalWidthForIconAndMessage,220)}this.element.find(".ads-progress-mask-container").width(thisWidth);var top;top=-1!=this.topOffsetPixes?this.topOffsetPixes:-1*(targetHeight/2);var left=targeWidth/2-thisWidth/2;return{top:top,left:left}}return null},ProgressIndicatorController.prototype.onClose=function(){this.isVisible=!1},ProgressIndicatorController.prototype.setTargetElement=function(){this.targetElement||this.element&&(this.targetElement=$(this.element).parent())},ProgressIndicatorController.$inject=["$scope","$element","resourceManager","notificationService","injectorService"],ProgressIndicatorController}(ControllerBase);exports.ProgressIndicatorController=ProgressIndicatorController,appdynamicsModule.controller("ProgressIndicatorController",ProgressIndicatorController)}),define("app/view/apm/APMRoutes",["require","exports"],function(){var APMRoutes=function(){function APMRoutes(){}return APMRoutes.APPS_ALL_DASHBOARD=new Route("AllApplicationsController","app/view/apm/allApplications/AllApplicationsController","app/view/apm/allApplications/AllApplicationsView.html"),APMRoutes.APP_DASHBOARD=new Route("AppDashboardController","app/view/apm/appDashboard/AppDashboardController","app/view/apm/appDashboard/AppDashboard.html"),APMRoutes.APP_BT_DETAIL=new Route("BusinessTransactionDashboardController","app/view/apm/businessTransactions/btDashboard/BusinessTransactionDashboardController","app/view/apm/businessTransactions/btDashboard/BusinessTransactionDashboardView.html"),APMRoutes.APP_COMPONENT_MANAGER=new Route("ComponentDashboardController","app/view/apm/componentDashboard/ComponentDashboardController","app/view/apm/componentDashboard/ComponentDashboardView.html"),APMRoutes.APP_NODE_MANAGER=new Route("NodeDashboardController","app/view/apm/nodeDashboard/NodeDashboardController","app/view/apm/nodeDashboard/NodeDashboardView.html"),APMRoutes.APP_BACKEND_DASHBOARD=new Route("BackendDashboardController","app/view/apm/backendDashboard/BackendDashboardController","app/view/apm/backendDashboard/BackendDashboardView.html"),APMRoutes.APP_SNAPSHOT_VIEWER=new DialogRoute({controllerPath:"app/view/apm/snapshot/SnapshotDialog",templateUrl:"app/view/apm/snapshot/SnapshotDialog.html",minimizable:!0}),APMRoutes.routeMap={APPS_ALL_DASHBOARD:APMRoutes.APPS_ALL_DASHBOARD,ALL_APPS_FLOW_MAP:new Route("AllAppsFlowMapController","app/view/apm/allAppsFlowMap/AllAppsFlowMapController","app/view/apm/allAppsFlowMap/AllAppsFlowMap.html"),APP_DASH:APMRoutes.APP_DASHBOARD,APP_DASHBOARD:APMRoutes.APP_DASHBOARD,APP_BT_LIST:new Route("BTListController","app/view/apm/businessTransactions/btList/BTListController","app/view/apm/businessTransactions/btList/BTListView.html"),APP_BT_DASHBOARD:APMRoutes.APP_BT_DETAIL,APP_BT_DETAIL:APMRoutes.APP_BT_DETAIL,APP_COMPONENT:APMRoutes.APP_COMPONENT_MANAGER,APP_COMPONENT_MANAGER:APMRoutes.APP_COMPONENT_MANAGER,APP_NODE:APMRoutes.APP_NODE_MANAGER,APP_NODE_MANAGER:APMRoutes.APP_NODE_MANAGER,APP_BACKEND_DASHBOARD:APMRoutes.APP_BACKEND_DASHBOARD,APP_SERVER_HOME:new Route("ServerHomeController","app/view/apm/ServerHome/ServerHomeController","app/view/apm/ServerHome/ServerHome.html"),APP_TROUBLESHOOT_HOME:new Route("TroubleShootHomeController","app/view/apm/troubleshoot/troubleshootHome/TroubleShootHomeController","app/view/apm/troubleshoot/troubleshootHome/TroubleShootHome.html"),APP_MORE_HOME:new Route("MoreHomeController","app/view/apm/moreHome/MoreHomeController","app/view/apm/moreHome/MoreHomeView.html"),APP_INFO_POINT_LIST:new Route("InformationPointsListController","app/view/apm/informationPoints/list/InformationPointsListController","app/view/apm/informationPoints/list/InformationPointsList.html"),APP_INFOPOINT_DASHBOARD:new Route("InformationPointDashboardController","app/view/apm/informationPoints/dashboard/InformationPointDashboardController","app/view/apm/informationPoints/dashboard/InformationPointDashboardView.html"),APP_INCIDENT_LIST:new Route("IncidentListViewController","app/view/apm/troubleshoot/incidentList/IncidentListViewController","app/view/apm/troubleshoot/incidentList/IncidentListView.html"),APP_WARROOM_DASH1:new Route("WarRoomController","app/view/customDashboard/warRoom/WarRoomController","app/view/customDashboard/warRoom/WarRoom.html"),APP_WARROOM_LIST1:new Route("WarRoomController","app/view/customDashboard/warRoom/WarRoomController","app/view/customDashboard/warRoom/WarRoom.html"),APP_WARROOM_DASH:new Route("ManageWarRoomsController","app/view/customDashboard2/warRoom/ManageWarRoomsController","app/view/customDashboard2/warRoom/ManageWarRooms.html"),APP_WARROOM_LIST:new Route("ManageWarRoomsController","app/view/customDashboard2/warRoom/ManageWarRoomsController","app/view/customDashboard2/warRoom/ManageWarRooms.html"),APP_WARROOM_TEMPLATES:new Route("ManageWarRoomTemplateController","app/view/customDashboard2/warRoom/template/ManageWarRoomTemplateController","app/view/customDashboard2/warRoom/template/ManageWarRoomTemplate.html"),APP_CONFIGURATION_HOME:new Route("ConfigureHomeController","app/view/apm/configuration/ConfigureHome/ConfigureHomeController","app/view/apm/configuration/ConfigureHome/ConfigureHome.html"),APP_DATABASE_LIST:new Route("BackendListController","app/view/apm/backend/BackendListController","app/view/apm/backend/BackendListView.html"),APP_BT_DISCOVERY_CONFIGURATOR:new Route("BTDiscoveryConfiguratorController","app/view/apm/businessTransactions/btDiscoveryTools/configurator/start/BTDiscoveryConfiguratorController","app/view/apm/businessTransactions/btDiscoveryTools/configurator/start/BTDiscoveryConfiguratorHome.html"),APP_NODE_CUSTOM_DASH1:new Route("NodeDashboardTemplateController","app/view/customDashboard/templates/node/NodeDashboardTemplateController","app/view/customDashboard/templates/node/NodeDashboardTemplate.html"),APP_NODE_CUSTOM_DASH:new Route("NodeCustomDashboardController","app/view/customDashboard2/templates/node/NodeCustomDashboardController","app/view/customDashboard2/templates/node/NodeCustomDashboard.html"),APP_COMPONENT_CUSTOM_DASH1:new Route("TierDashboardTemplateController","app/view/customDashboard/templates/tier/TierDashboardTemplateController","app/view/customDashboard/templates/tier/TierDashboardTemplate.html"),APP_COMPONENT_CUSTOM_DASH:new Route("ComponentCustomDashboardController","app/view/customDashboard2/templates/component/ComponentCustomDashboardController","app/view/customDashboard2/templates/component/ComponentCustomDashboard.html"),APP_CUSTOM_DASH_MANAGE1:new Route("CDTemplateManageController","app/view/customDashboard/templates/manage/CDTemplateManageController","app/view/customDashboard/templates/manage/CDTemplateManage.html"),APP_CUSTOM_DASH_MANAGE:new Route("CustomDashboardTemplateListController","app/view/customDashboard2/templates/manage/CustomDashboardTemplateListController","app/view/customDashboard2/templates/manage/CustomDashboardTemplateList.html"),APP_SERVICE_ENDPOINT_LIST:new Route("ServiceEndpointListController","app/view/apm/ServiceEndpoint/ServiceEndpointListController","app/view/apm/ServiceEndpoint/ServiceEndpointListView.html"),APP_ALL_SNAPSHOT_LIST:new Route("TransactionSnapshotListController","app/view/apm/snapshot/list/transactionSnapshots/TransactionSnapshotListController","app/view/apm/snapshot/list/transactionSnapshots/TransactionSnapshotList.html"),APP_BT_ALL_SNAPSHOT_LIST:new Route("TransactionSnapshotListController","app/view/apm/snapshot/list/transactionSnapshots/TransactionSnapshotListController","app/view/apm/snapshot/list/transactionSnapshots/TransactionSnapshotList.html"),APP_COMPONENT_ALL_SNAPSHOT_LIST:new Route("TransactionSnapshotListController","app/view/apm/snapshot/list/transactionSnapshots/TransactionSnapshotListController","app/view/apm/snapshot/list/transactionSnapshots/TransactionSnapshotList.html"),APP_COMPONENT_PROCESS_SNAPSHOTS:new Route("ProcessSnapshotDashboardTab","app/view/apm/snapshot/list/processSnapshots/ProcessSnapshotDashboardTab","app/view/apm/snapshot/list/processSnapshots/ProcessSnapshotDashboardTab.html"),APP_NODE_ALL_SNAPSHOT_LIST:new Route("TransactionSnapshotListController","app/view/apm/snapshot/list/transactionSnapshots/TransactionSnapshotListController","app/view/apm/snapshot/list/transactionSnapshots/TransactionSnapshotList.html"),APP_NODE_PROCESS_SNAPSHOTS:new Route("ProcessSnapshotDashboardTab","app/view/apm/snapshot/list/processSnapshots/ProcessSnapshotDashboardTab","app/view/apm/snapshot/list/processSnapshots/ProcessSnapshotDashboardTab.html"),APP_MACHINE_SNAPSHOTS:new Route("MachineSnapshotsController","app/view/apm/machineSnapshots/MachineSnapshotsController","app/view/apm/machineSnapshots/MachineSnapshots.html"),APP_ANALYZE_HOME:new Route("AnalyzeHomeController","app/view/apm/analyzeHome/AnalyzeHomeController","app/view/apm/analyzeHome/AnalyzeHome.html"),APP_EVENTSTREAM_LIST:new Route("EventListController","app/view/common/Events/EventListController","app/view/common/Events/EventListView.html"),APP_TOP_BT_LIST:new Route("AppTopBtsController","app/view/apm/businessTransactions/topBts/AppTopBtsController","app/view/apm/businessTransactions/topBts/AppTopBtsView.html"),APP_BT_EVENTSTREAM_LIST:new Route("EventListController","app/view/common/Events/EventListController","app/view/common/Events/EventListView.html"),APP_COMPONENT_EVENTSTREAM_LIST:new Route("EventListController","app/view/common/Events/EventListController","app/view/common/Events/EventListView.html"),APP_NODE_EVENTSTREAM_LIST:new Route("EventListController","app/view/common/Events/EventListController","app/view/common/Events/EventListView.html"),APP_SNAPSHOT_VIEWER:APMRoutes.APP_SNAPSHOT_VIEWER,APP_EVENT_VIEWER_MODAL:new DialogRoute({controllerName:"EventDetailViewerController",controllerPath:"app/view/common/Events/eventDetails/EventDetailViewerController",templateUrl:"app/view/common/Events/eventDetails/EventDetailViewer.html"}),APP_BACKEND_DASHBOARD_SLOWEST_CALLS:new Route("BackendSlowestCallsController","app/view/apm/backendDashboard/slowestCalls/BackendSlowestCallsController","app/view/apm/backendDashboard/slowestCalls/BackendSlowestCallsView.html"),APP_INFRASTRUCTURE:new Route("AppInfraListController","app/view/apm/infrastructure/AppInfraListController","app/view/apm/infrastructure/AppInfraListView.html"),APP_DATABASE_COMPONENT_LIST:new Route("AppInfraListController","app/view/apm/infrastructure/AppInfraListController","app/view/apm/infrastructure/AppInfraListView.html"),APP_COMPONENT_INFRASTRUCTURE:new Route("AppInfraListController","app/view/apm/infrastructure/AppInfraListController","app/view/apm/infrastructure/AppInfraListView.html"),APP_CONFIG_SERVICE_ENDPOINT_DETECTION:new Route("ServiceEndpointDetectionConfigController","app/view/apm/configuration/serviceEndpoint/ServiceEndpointDetectionConfigController","app/view/apm/configuration/serviceEndpoint/ServiceEndpointDetectionConfigView.html"),APP_CONFIG_ASYNC:new Route("ASyncConfigController","app/view/apm/configuration/async/ASyncConfigController","app/view/apm/configuration/async/ASyncConfigView.html"),APP_CONFIGURATION:new Route("TransactionDetectionConfigRulesController","app/view/apm/configuration/transactionDetection/rules/TransactionDetectionConfigRulesController","app/view/apm/configuration/transactionDetection/rules/TransactionDetectionRules.html"),APP_TX_CONFIG_RULES:new Route("TransactionDetectionConfigRulesController","app/view/apm/configuration/transactionDetection/rules/TransactionDetectionConfigRulesController","app/view/apm/configuration/transactionDetection/rules/TransactionDetectionRules.html"),APP_TX_CONFIG_SCOPES:new Route("TransactionDetectionConfigScopesController","app/view/apm/configuration/transactionDetection/scopes/TransactionDetectionConfigScopesController","app/view/apm/configuration/transactionDetection/scopes/TransactionDetectionScopes.html"),APP_TX_CONFIG_TIERS:new Route("TransactionDetectionConfigTiersController","app/view/apm/configuration/transactionDetection/tiers/TransactionDetectionConfigTiersController","app/view/apm/configuration/transactionDetection/tiers/TransactionDetectionTiers.html"),APP_AUTOMATION_HOME:new Route("AutomationHomeController","app/view/apm/automation/home/AutomationHomeController","app/view/apm/automation/home/AutomationHomeView.html"),APP_BACKEND_LIST:new Route("BackendListController","app/view/apm/backend/BackendListController","app/view/apm/backend/BackendListView.html"),APP_DIAGNOSTIC_SESSION_LIST:new Route("DiagnosticSessionListController","app/view/apm/diagnosticSession/DiagnosticSessionListController","app/view/apm/diagnosticSession/DiagnosticSessionList.html"),APP_BT_DIAGNOSTIC_SESSION_LIST:new Route("DiagnosticSessionListController","app/view/apm/diagnosticSession/DiagnosticSessionListController","app/view/apm/diagnosticSession/DiagnosticSessionList.html"),APP_COMPONENT_DIAGNOSTIC_SESSION_LIST:new Route("DiagnosticSessionListController","app/view/apm/diagnosticSession/DiagnosticSessionListController","app/view/apm/diagnosticSession/DiagnosticSessionList.html"),APP_NODE_DIAGNOSTIC_SESSION_LIST:new Route("DiagnosticSessionListController","app/view/apm/diagnosticSession/DiagnosticSessionListController","app/view/apm/diagnosticSession/DiagnosticSessionList.html"),APP_SNAPSHOT_RSD_VIEWER:APMRoutes.APP_SNAPSHOT_VIEWER},APMRoutes}();return APMRoutes}),define("app/view/eum/EUMRoutes",["require","exports"],function(){var EUMRoutes=function(){function EUMRoutes(){}return EUMRoutes.routeMap={EUM_WEB_ALL_APPS:new Route("EUMWebAllAppsController","app/view/eum/allApplications/EUMWebAllAppsController","app/view/eum/allApplications/EUMWebAllAppsView.html"),EUM_MOBILE_ALL_APPS:new Route("EUMMobileAllAppsController","app/view/eum/allApplications/EUMMobileAllAppsController","app/view/eum/allApplications/EUMMobileAllAppsView.html"),EUM_WEB_HOME:new Route("EUMWebHomeController","app/view/eum/web/home/EUMWebHomeController","app/view/eum/web/home/EUMWebHomeView.html"),EUM_MOBILE_HOME:new Route("EUMMobileHomeController","app/view/eum/mobile/home/EUMMobileHomeController","app/view/eum/mobile/home/EUMMobileHomeView.html"),EUM_WEB_SESSION_DETAILS:new DialogRoute({controllerName:"EUMWebSessionDetailsController",controllerPath:"app/view/eum/web/sessions/EUMWebSessionDetailsController",templateUrl:"app/view/eum/web/sessions/EUMWebSessionDetails.html"}),EUM_MOBILE_SESSION_DETAILS:new DialogRoute({controllerName:"EUMMobileSessionDetailsController",controllerPath:"app/view/eum/web/sessions/EUMMobileSessionDetailsController",templateUrl:"app/view/eum/web/sessions/EUMMobileSessionDetails.html"}),EUM_SYNTHETIC_SESSION_DETAILS:new DialogRoute({controllerName:"EUMSyntheticSessionDetailsController",controllerPath:"app/view/eum/web/sessions/EUMSyntheticSessionDetailsController",templateUrl:"app/view/eum/web/sessions/EUMSyntheticSessionDetails.html"}),EUM_WEB_MAIN_DASHBOARD:new Route("EUMWebMainDashboardController","app/view/eum/web/mainDashboard/EUMWebMainDashboardController","app/view/eum/web/mainDashboard/EUMWebMainDashboard.html"),EUM_MOBILE_MAIN_DASHBOARD:new Route("EUMMobileMainDashboardController","app/view/eum/mobile/mainDashboard/EUMMobileMainDashboardController","app/view/eum/mobile/mainDashboard/EUMMobileMainDashboard.html"),EUM_CRASH_DASHBOARD:new Route("CrashDashboardController","app/view/eum/mobile/crashes/dashboard/CrashDashboardController","app/view/eum/mobile/crashes/dashboard/CrashDashboard.html"),EUM_CRASH_GROUP_DASHBOARD:new Route("CrashGroupDashboardController","app/view/eum/mobile/crashes/dashboard/CrashGroupDashboardController","app/view/eum/mobile/crashes/dashboard/CrashGroupDashboard.html"),EUM_ANALYTICS_CRASH_DASHBOARD:new Route("AnalyticsCrashDashboardController","app/view/eum/mobile/crashes/dashboard/AnalyticsCrashDashboardController","app/view/eum/mobile/crashes/dashboard/AnalyticsCrashDashboard.html"),EUM_CRASH_LIST:new Route("CrashListController","app/view/eum/mobile/crashes/list/CrashListController","app/view/eum/mobile/crashes/list/CrashList.html"),EUM_CRASH_DETAILS:new DialogRoute({controllerName:"CrashDetailsController",controllerPath:"app/view/eum/mobile/crashes/details/CrashDetailsController",templateUrl:"app/view/eum/mobile/crashes/details/CrashDetails.html"}),EUM_REQUEST_SNAPSHOT_LIST:new Route("MobileSnapshotListController","app/view/eum/mobile/mobileSnapshots/list/MobileSnapshotListController","app/view/eum/mobile/mobileSnapshots/list/MobileSnapshotList.html"),EUM_DEVICES_CARRRIERS:new Route("MobileUsageStatisticsController","app/view/eum/mobile/usageStatistics/MobileUsageStatisticsController","app/view/eum/mobile/usageStatistics/MobileUsageStatistics.html"),EUM_BROWSERS_AND_DEVICES:new Route("WebUsageStatisticsController","app/view/eum/web/usageStatistics/WebUsageStatisticsController","app/view/eum/web/usageStatistics/WebUsageStatistics.html"),EUM_REQUEST_SNAPSHOT_DETAILS:new DialogRoute({controllerName:"MobileSnapshotDetailsController",controllerPath:"app/view/eum/mobile/mobileSnapshots/details/MobileSnapshotDetailsController",templateUrl:"app/view/eum/mobile/mobileSnapshots/details/MobileSnapshotDetails.html"}),EUM_REQUESTS_EPISODES:new Route("MobileRequestListController","app/view/eum/mobile/networkRequests/list/MobileRequestListController","app/view/eum/mobile/networkRequests/list/MobileRequestList.html"),EUM_PAGE_DASHBOARD:new Route("PageDashboardController","app/view/eum/web/pageDashboard/PageDashboardController","app/view/eum/web/pageDashboard/PageDashboard.html"),EUM_PAGE_BROWSER_SNAPSHOTS:new Route("BrowserSnapshotListController","app/view/eum/web/browserSnapshot/list/BrowserSnapshotListController","app/view/eum/web/browserSnapshot/list/BrowserSnapshotList.html"),EUM_REQUEST_DASHBOARD:new Route("MobileRequestDashboardController","app/view/eum/mobile/networkRequests/MobileRequestDashboardController","app/view/eum/mobile/networkRequests/MobileRequestDashboard.html"),EUM_RESOURCE_SNAPSHOT:new Route("ResourceTimingController","app/view/eum/web/resourceTiming/ResourceTimingController","app/view/eum/web/resourceTiming/ResourceTiming.html"),EUM_BROWSER_SNAPSHOTS:new Route("BrowserSnapshotListController","app/view/eum/web/browserSnapshot/list/BrowserSnapshotListController","app/view/eum/web/browserSnapshot/list/BrowserSnapshotList.html"),EUM_SNAPSHOT_DATA:new DialogRoute({controllerName:"BrowserSnapshotDetailsController",controllerPath:"app/view/eum/web/browserSnapshot/details/BrowserSnapshotDetailsController",templateUrl:"app/view/eum/web/browserSnapshot/details/BrowserSnapshotDetailsView.html"}),EUM_WEB_SESSION_ANALYTICS:new Route("WebSessionAnalyticsDashboardController","app/view/analytics/dashboard/WebSessionAnalyticsDashboardController","app/view/analytics/dashboard/AnalyticsMainDashboardView.html"),EUM_MOBILE_SESSION_ANALYTICS:new Route("MobileSessionAnalyticsDashboardController","app/view/analytics/dashboard/MobileSessionAnalyticsDashboardController","app/view/analytics/dashboard/AnalyticsMainDashboardView.html"),EUM_NETWORK_REQUEST_ANALYTICS:new Route("EUMMobileNetworkRequestDashboardController","app/view/analytics/dashboard/EUMMobileNetworkRequestDashboardController","app/view/analytics/dashboard/AnalyticsMainDashboardView.html"),EUM_NETWORK_REQUEST_ANALYTICS_DETAILS:new DialogRoute({controllerName:"EUMMobileNetworkRequestDetailsController",controllerPath:"app/view/eum/mobile/networkRequests/details/EUMMobileNetworkRequestDetailsController",templateUrl:"app/view/eum/mobile/networkRequests/details/EUMMobileNetworkRequestDetails.html"}),EUM_SYNTHETIC_LAUNCH:new DialogRoute({controllerName:"SyntheticLaunchController",controllerPath:"app/view/eum/web/synthetic/SyntheticLaunchController",templateUrl:"app/view/eum/web/synthetic/SyntheticLaunch.html"}),EUM_SYNTHETIC_ON_DEMAND:new Route("SyntheticOnDemandController","app/view/eum/web/synthetic/onDemand/SyntheticOnDemandController","app/view/eum/web/synthetic/onDemand/SyntheticOnDemandView.html"),EUM_WEB_ANALYZE:new Route("EUMWebAnalyzeDashboardController","app/view/analytics/dashboard/EUMWebAnalyzeDashboardController","app/view/analytics/dashboard/AnalyticsMainDashboardView.html"),EUM_WEB_ANALYZE_DETAILS:new DialogRoute({controllerName:"WebAnalyzeDetailsController",controllerPath:"app/view/eum/web/analyze/WebAnalyzeDetailsController",templateUrl:"app/view/eum/web/analyze/WebAnalyzeDetails.html"}),EUM_RUM_SYNTH_PAGE_DASHBOARD_COMPARISON:new DialogRoute({controllerName:"RumSynthPDCompController",controllerPath:"app/view/eum/web/pageDashboard/RumSynthPDCompController",templateUrl:"app/view/eum/web/pageDashboard/RumSynthPDComp.html"}),EUM_DASHBOARD:new Route("GeoDashboardController","app/view/eum/web/geoDashboard/GeoDashboardController","app/view/eum/web/geoDashboard/GeoDashboard.html"),EUM_MOBILE_INFO_POINT_LIST:new Route("MobileTimersAndMetricsController","app/view/eum/mobile/infoPoints/MobileTimersAndMetricsController","app/view/eum/mobile/infoPoints/MobileTimersAndMetrics.html"),EUM_MOBILE_INFO_POINTS:new Route("MobileInfoPointsController","app/view/eum/mobile/infoPoints/MobileInfoPointsController","app/view/eum/mobile/infoPoints/MobileInfoPoints.html"),EUM_MOBILE_CUSTOM_METRIC_LIST:new Route("MobileCustomMetricListController","app/view/eum/mobile/customMetrics/MobileCustomMetricListController","app/view/eum/mobile/customMetrics/MobileCustomMetricList.html"),EUM_SYNTHETIC_SCHEDULE:new DialogRoute({controllerName:"SyntheticScheduleEditorController",controllerPath:"app/view/eum/web/synthetic/scheduleEditor/SyntheticScheduleEditorController",templateUrl:"app/view/eum/web/synthetic/scheduleEditor/SyntheticScheduleEditor.html"}),EUM_SYNTHETIC_SCHEDULE_LIST:new Route("SyntheticScheduleListController","app/view/eum/web/synthetic/scheduleList/SyntheticScheduleListController","app/view/eum/web/synthetic/scheduleList/SyntheticScheduleList.html"),EUM_SYNTHETIC_PAGE_DASHBOARD:new Route("SyntheticPageDashboardController","app/view/eum/web/synthetic/syntheticPageDashboard/syntheticPageDashboardController","app/view/eum/web/synthetic/syntheticPageDashboard/syntheticPageDashboard.html"),EUM_SYNTHETIC_SESSION_ANALYTICS:new Route("SyntheticAnalyticsDashboardController","app/view/analytics/dashboard/SyntheticAnalyticsDashboardController","app/view/analytics/dashboard/AnalyticsMainDashboardView.html"),EUM_PAGES_LIST:new Route("RUMPageListController","app/view/eum/web/pageList/RUMPageListController","app/view/eum/web/pageList/PageList.html"),EUM_SYNTHETIC_PAGES_LIST:new Route("SyntheticPageListController","app/view/eum/web/pageList/SyntheticPageListController","app/view/eum/web/pageList/PageList.html"),EUM_WEB_EVENTS_LIST:new Route("EventListController","app/view/common/Events/EventListController","app/view/common/Events/EventListView.html"),EUM_WEB_HEALTH_RULE_VIOLATIONS:new Route("IncidentListViewController","app/view/apm/troubleshoot/incidentList/IncidentListViewController","app/view/apm/troubleshoot/incidentList/IncidentListView.html"),EUM_MOBILE_EVENTS_LIST:new Route("EventListController","app/view/common/Events/EventListController","app/view/common/Events/EventListView.html"),EUM_MOBILE_HEALTH_RULE_VIOLATIONS:new Route("IncidentListViewController","app/view/apm/troubleshoot/incidentList/IncidentListViewController","app/view/apm/troubleshoot/incidentList/IncidentListView.html")},EUMRoutes}();return EUMRoutes}),define("app/view/customDashboard2/DashboardsReportsRoutes",["require","exports"],function(){var DashboardsReportsRoutes=function(){function DashboardsReportsRoutes(){}return DashboardsReportsRoutes.routeMap={DASHBOARDS_REPORTS_HOME:new Route("DashboardsReportsHomeController","app/view/customDashboard/dashboardsReportsHome/DashboardsReportsHomeController","app/view/customDashboard/dashboardsReportsHome/DashboardsReportsHomeView.html"),DASHBOARD_LIST1:new Route("CDListController","app/view/customDashboard/listView/CDListController","app/view/customDashboard/listView/CDList.html"),CDASHBOARD_DETAIL1:new Route("CustomDashboardEditorController","app/view/customDashboard/editor/CustomDashboardEditorController","app/view/customDashboard/editor/CustomDashboardEditor.html"),DASHBOARD_LIST:new Route("CustomDashboardListController","app/view/customDashboard2/listView/CustomDashboardListController","app/view/customDashboard2/listView/CustomDashboardListView.html"),CDASHBOARD_DETAIL:new Route("CustomDashboardEditorController2","app/view/customDashboard2/editor/CustomDashboardEditorController2","app/view/customDashboard2/editor/CustomDashboardEditor.html"),APP_WARROOM_DASH1:new Route("WarRoomController","app/view/customDashboard/warRoom/WarRoomController","app/view/customDashboard/warRoom/WarRoom.html"),APP_WARROOM_LIST1:new Route("WarRoomController","app/view/customDashboard/warRoom/WarRoomController","app/view/customDashboard/warRoom/WarRoom.html"),APP_WARROOM_DASH:new Route("ManageWarRoomsController","app/view/customDashboard2/warRoom/ManageWarRoomsController","app/view/customDashboard2/warRoom/ManageWarRooms.html"),APP_WARROOM_LIST:new Route("ManageWarRoomsController","app/view/customDashboard2/warRoom/ManageWarRoomsController","app/view/customDashboard2/warRoom/ManageWarRooms.html"),APP_WARROOM_TEMPLATES:new Route("ManageWarRoomTemplateController","app/view/customDashboard2/warRoom/template/ManageWarRoomTemplateController","app/view/customDashboard2/warRoom/template/ManageWarRoomTemplate.html"),REPORTS_HOME:new Route("ReportsManageController","app/view/reports/manage/ReportsManageController","app/view/reports/manage/ReportsManageView.html")},DashboardsReportsRoutes}();return DashboardsReportsRoutes}),define("app/view/alertRespond/AlertRespondRoutes",["require","exports"],function(){var AlertRespondRoutes=function(){function AlertRespondRoutes(){}return AlertRespondRoutes.routeMap={ALERT_RESPOND_HOME:new Route("AlertRespondHomeController","app/view/alertRespond/home/AlertRespondHomeController","app/view/alertRespond/home/AlertRespondHomeView.html"),ALERT_RESPOND_APP_HOME:new Route("AlertRespondHomeController","app/view/alertRespond/home/AlertRespondHomeController","app/view/alertRespond/home/AlertRespondHomeView.html"),ALERT_RESPOND_POLICIES:new Route("PoliciesListController","app/view/alertRespond/policies/PoliciesListController","app/view/alertRespond/policies/PoliciesListView.html"),ALERT_RESPOND_ACTIONS:new Route("ActionsListController","app/view/alertRespond/actions/list/ActionsListController","app/view/alertRespond/actions/list/ActionsListView.html"),ALERT_RESPOND_ACTION_SUPPRESSION:new Route("ActionSuppressionListController","app/view/alertRespond/actions/list/ActionSuppressionListController","app/view/alertRespond/actions/list/ActionSuppressionListView.html"),ALERT_RESPOND_HEALTH_RULES:new Route("HealthRulesListController","app/view/alertRespond/healthRules/HealthRulesListController","app/view/alertRespond/healthRules/HealthRulesListView.html"),ALERT_RESPOND_HTTP_ACTION_PLAN_LIST:new Route("HttpActionPlanListViewController","app/view/alertRespond/actions/http/template/list/HttpActionPlanListViewController","app/view/alertRespond/actions/http/template/list/HttpActionPlanListView.html"),ALERT_RESPOND_HTTP_ACTION_PLAN_DETAIL:new Route("HttpActionPlanDetailController","app/view/alertRespond/actions/http/template/detail/HttpActionPlanDetailController","app/view/alertRespond/actions/http/template/detail/HttpActionPlanDetail.html"),ALERT_RESPOND_EMAIL_ACTION_PLAN_DETAIL:new Route("EmailActionPlanDetailController","app/view/alertRespond/actions/email/template/detail/EmailActionPlanDetailController","app/view/alertRespond/actions/email/template/detail/EmailActionPlanDetailView.html"),ALERT_RESPOND_EMAIL_ACTION_PLAN_LIST:new Route("EmailActionPlanListViewController","app/view/alertRespond/actions/email/template/list/EmailActionPlanListViewController","app/view/alertRespond/actions/email/template/list/EmailActionPlanListView.html"),ALERT_RESPOND_EMAIL_DIGESTS:new Route("EmailDigestViewController","app/view/alertRespond/actions/email/digest/EmailDigestViewController","app/view/alertRespond/actions/email/digest/EmailDigestView.html")},AlertRespondRoutes}();return AlertRespondRoutes}),define("app/view/serverMonitoring/ServerMonitoringRoutes",["require","exports"],function(){var serverMonitoringRoutes={SERVER_MONITORING_HOME:new Route("SIMHomeController","app/view/serverMonitoring/SIMHomeController","app/view/serverMonitoring/SIMHomeView.html"),SERVER_MONITORING_MACHINE_LIST:new Route("SIMMachinesListController","app/view/serverMonitoring/machines/list/SIMMachinesListController","app/view/serverMonitoring/machines/list/SIMMachinesListView.html"),SERVER_MONITORING_MACHINE_OVERVIEW:new Route("SIMMachineDashController","app/view/serverMonitoring/machines/machine/dash/SIMMachineDashController","app/view/serverMonitoring/machines/machine/dash/SIMMachineDashView.html"),SERVER_MONITORING_MACHINE_NETWORK:new Route("SIMMachineDashController","app/view/serverMonitoring/machines/machine/dash/SIMMachineDashController","app/view/serverMonitoring/machines/machine/dash/SIMMachineDashView.html"),SERVER_MONITORING_MACHINE_DISKS:new Route("SIMMachineDashController","app/view/serverMonitoring/machines/machine/dash/SIMMachineDashController","app/view/serverMonitoring/machines/machine/dash/SIMMachineDashView.html"),SERVER_MONITORING_MACHINE_PROCESSES:new Route("SIMMachineDashController","app/view/serverMonitoring/machines/machine/dash/SIMMachineDashController","app/view/serverMonitoring/machines/machine/dash/SIMMachineDashView.html"),SERVER_MONITORING_EVENTS:new Route("EventListController","app/view/common/Events/EventListController","app/view/common/Events/EventListView.html"),SERVER_MONITORING_CONFIGURATION_HOME:new Route("SIMConfigurationHomeController","app/view/serverMonitoring/config/SIMConfigurationHomeController","app/view/serverMonitoring/config/SIMConfigurationHomeView.html"),SERVER_MONITORING_SERVICE_LIST:new Route("SAMConfigsListController","app/view/serverMonitoring/sam/configs/SAMConfigsListController","app/view/serverMonitoring/sam/configs/SAMConfigsListView.html"),SERVER_MONITORING_SAM_TARGET_DETAILS:new Route("SAMConfigDetailsController","app/view/serverMonitoring/sam/config/details/SAMConfigDetailsController","app/view/serverMonitoring/sam/config/details/SAMConfigDetailsView.html"),APP_MACHINE_LIST:new Route("SIMMachinesListController","app/view/serverMonitoring/machines/list/SIMMachinesListController","app/view/serverMonitoring/machines/list/SIMMachinesListView.html"),APP_COMPONENT_MACHINE_LIST:new Route("SIMMachinesListController","app/view/serverMonitoring/machines/list/SIMMachinesListController","app/view/serverMonitoring/machines/list/SIMMachinesListView.html"),APP_NODE_MACHINE_OVERVIEW:new Route("APMMachineDashController","app/view/serverMonitoring/machines/machine/dash/APMMachineDashController","app/view/serverMonitoring/machines/machine/dash/SIMMachineDashView.html"),APP_NODE_MACHINE_NETWORK:new Route("APMMachineDashController","app/view/serverMonitoring/machines/machine/dash/APMMachineDashController","app/view/serverMonitoring/machines/machine/dash/SIMMachineDashView.html"),APP_NODE_MACHINE_DISKS:new Route("APMMachineDashController","app/view/serverMonitoring/machines/machine/dash/APMMachineDashController","app/view/serverMonitoring/machines/machine/dash/SIMMachineDashView.html"),APP_NODE_MACHINE_PROCESSES:new Route("APMMachineDashController","app/view/serverMonitoring/machines/machine/dash/APMMachineDashController","app/view/serverMonitoring/machines/machine/dash/SIMMachineDashView.html")};
return serverMonitoringRoutes}),define("app/view/dbMonitoring/DBMonitoringRoutes",["require","exports"],function(){var dbMonitoringRoutes={DB_MONITORING_SERVER_LIST:new Route("AllDatabasesController","app/view/dbMonitoring/allDatabases/AllDatabasesController","app/view/dbMonitoring/allDatabases/AllDatabases.html"),DB_MONITORING_CONFIGURATION_HOME:new Route("ConfigurationHomeController","app/view/dbMonitoring/configuration/ConfigurationHomeController","app/view/dbMonitoring/configuration/ConfigurationHome.html"),DB_MONITORING_COLLECTOR_LIST:new Route("CollectorListController","app/view/dbMonitoring/configuration/CollectorListController","app/view/dbMonitoring/configuration/CollectorList.html"),DB_MONITORING_COLLECTOR_DETAIL:new Route("CollectorDetailController","app/view/dbMonitoring/configuration/CollectorDetailController","app/view/dbMonitoring/configuration/CollectorDetailDialog.html"),DB_MONITORING_SERVER_DASHBOARD:new Route("DBDashboardController","app/view/dbMonitoring/dashboard/DBDashboardController","app/view/dbMonitoring/dashboard/DBDashboard.html"),DB_MONITORING_QUERY_LIST:new Route("QueryListController","app/view/dbMonitoring/infoGrid/query/QueryListController","app/view/dbMonitoring/infoGrid/query/QueryList.html"),DB_MONITORING_CLIENT_LIST:new Route("ClientListController","app/view/dbMonitoring/infoGrid/client/ClientListController","app/view/dbMonitoring/infoGrid/client/ClientList.html"),DB_MONITORING_SESSION_LIST:new Route("SessionListController","app/view/dbMonitoring/infoGrid/session/SessionListController","app/view/dbMonitoring/infoGrid/session/SessionList.html"),DB_MONITORING_NAMESPACE_LIST:new Route("NamespaceListController","app/view/dbMonitoring/infoGrid/namespace/NamespaceListController","app/view/dbMonitoring/infoGrid/namespace/NamespaceList.html"),DB_MONITORING_DATABASES_LIST:new Route("DatabaseListController","app/view/dbMonitoring/infoGrid/database/DatabaseListController","app/view/dbMonitoring/infoGrid/database/DatabaseList.html"),DB_MONITORING_SCHEMA_LIST:new Route("SchemaListController","app/view/dbMonitoring/infoGrid/schema/SchemaListController","app/view/dbMonitoring/infoGrid/schema/SchemaList.html"),DB_MONITORING_MODULE_LIST:new Route("ModuleListController","app/view/dbMonitoring/infoGrid/module/ModuleListController","app/view/dbMonitoring/infoGrid/module/ModuleList.html"),DB_MONITORING_PROGRAM_LIST:new Route("ProgramListController","app/view/dbMonitoring/infoGrid/program/ProgramListController","app/view/dbMonitoring/infoGrid/program/ProgramList.html"),DB_MONITORING_CLUSTER_TOPOLOGY:new Route("DBClusterTopologyController","app/view/dbMonitoring/clusterTopology/DBClusterTopologyController","app/view/dbMonitoring/clusterTopology/DBClusterTopology.html"),DB_MONITORING_WAIT_REPORT:new Route("WaitReportController","app/view/dbMonitoring/report/waitReport/WaitReportController","app/view/dbMonitoring/report/waitReport/WaitReport.html"),DB_MONITORING_TOP_ACTIVITY_REPORT:new Route("ActivityReportController","app/view/dbMonitoring/report/activityReport/ActivityReportController","app/view/dbMonitoring/report/activityReport/ActivityReport.html"),DB_MONITORING_TOP_SQL_REPORT:new Route("TopSQLReportController","app/view/dbMonitoring/report/topSQLReport/TopSQLReportController","app/view/dbMonitoring/report/topSQLReport/TopSQLReport.html"),DB_MONITORING_COMPARISON_REPORT:new Route("ComparisonReportController","app/view/dbMonitoring/report/comparisonReport/ComparisonReportController","app/view/dbMonitoring/report/comparisonReport/ComparisonReport.html"),DB_MONITORING_IO_REPORT:new Route("IOReportController","app/view/dbMonitoring/report/ioReport/IOReportController","app/view/dbMonitoring/report/ioReport/IOReport.html"),DB_MONITORING_QUERY_DETAILS:new Route("DBQueryDetailsController","app/view/dbMonitoring/queries/DBQueryDetailsController","app/view/dbMonitoring/queries/DBQueryDetails.html"),DB_MONITORING_OBJECT_BROWSER:new Route("DBObjectBrowserController","app/view/dbMonitoring/objectBrowser/DBObjectBrowserController","app/view/dbMonitoring/objectBrowser/DBObjectBrowser.html"),DB_MONITORING_LIVE_VIEW:new Route("DBLiveViewController","app/view/dbMonitoring/liveView/DBLiveViewController","app/view/dbMonitoring/liveView/DBLiveView.html"),DB_MONITORING_EVENTS:new Route("EventListController","app/view/common/Events/EventListController","app/view/common/Events/EventListView.html"),DB_MONITORING_WAIT_STATE_FILTERING:new Route("DBWaitStateFilteringConfigController","app/view/dbMonitoring/waitStateFiltering/configure/DBWaitStateFilteringConfigController","app/view/dbMonitoring/waitStateFiltering/configure/DBWaitStateFilteringConfig.html"),DB_MONITORING_CUSTOM_SQL_METRICS_LIST:new Route("CustomSqlMetricsListController","app/view/dbMonitoring/customSqlMetrics/CustomSqlMetricsListController","app/view/dbMonitoring/customSqlMetrics/CustomSqlMetricsListView.html")};return dbMonitoringRoutes}),define("app/view/analytics/AnalyticsRoutes",["require","exports"],function(){var analyticsRoutes={ANALYTICS_SEARCH_LIST:new Route("AnalyticsSearchListController","app/view/analytics/adql/searchList/AnalyticsSearchListController","app/view/analytics/adql/searchList/AnalyticsSearchListView.html"),ANALYTICS_ADQL_SEARCH:new Route("AnalyticsSearchController","app/view/analytics/adql/search/AnalyticsSearchController","app/view/analytics/adql/search/AnalyticsSearch.html"),ANALYTICS_HOME:new Route("AnalyticsHomeController","app/view/analytics/AnalyticsHomeController","app/view/analytics/AnalyticsHome.html"),ANALYTICS_TRANSACTIONS:new Route("TransactionAnalyticsDashboardController","app/view/analytics/dashboard/TransactionAnalyticsDashboardController","app/view/analytics/dashboard/AnalyticsMainDashboardView.html"),ANALYTICS_LOGS:new Route("LogAnalyticsDashboardController","app/view/analytics/dashboard/LogAnalyticsDashboardController","app/view/analytics/dashboard/AnalyticsMainDashboardView.html"),ANALYTICS_USER_WEB_ACTIVITY:new Route("UserActivityAnalyticsDashboardController","app/view/analytics/dashboard/UserActivityAnalyticsDashboardController","app/view/analytics/dashboard/AnalyticsMainDashboardView.html"),ANALYTICS_USER_MOBILE_ACTIVITY:new Route("AnalyticsMobileNetworkRequestDashboardController","app/view/analytics/dashboard/AnalyticsMobileNetworkRequestDashboardController","app/view/analytics/dashboard/AnalyticsMainDashboardView.html"),ANALYTICS_METRICS:new Route("AnalyticsMetricsController","app/view/analytics/metrics/AnalyticsMetricsController","app/view/analytics/metrics/AnalyticsMetricsView.html"),ANALYTICS_FILTER_TEST:new Route("FilterTestController","app/view/analytics/filterTest/FilterTestController","app/view/analytics/filterTest/FilterTest.html"),ANALYTICS_METRICS_CONFIG:new Route("AnalyticsMetricsConfigController","app/view/analytics/configuration/AnalyticsMetricsConfigController","app/view/analytics/configuration/AnalyticsMetricsConfigView.html"),ANALYTICS_EXTRACTED_FIELDS_CONFIG:new Route("AnalyticsExtractedFieldsConfigController","app/view/analytics/configuration/AnalyticsExtractedFieldsConfigController","app/view/analytics/configuration/AnalyticsExtractedFieldsConfigView.html"),ANALYTICS_METRIC_CORRELATION:new Route("AnalyticsMetricCorrelationController","app/view/analytics/metricCorrelation/AnalyticsMetricCorrelationController","app/view/analytics/metricCorrelation/AnalyticsMetricCorrelationView.html"),ANALYTICS_METRIC_CORRELATION_DIALOG:new DialogRoute({controllerName:"AnalyticsMetricCorrelationDialogController",controllerPath:"app/view/analytics/metricCorrelation/AnalyticsMetricCorrelationDialogController",templateUrl:"app/view/analytics/metricCorrelation/AnalyticsMetricCorrelationDialogView.html"}),ANALYTICS_CONFIG_API_KEYS:new Route("AnalyticsConfigApiKeysController","app/view/analytics/configuration/apiKeys/AnalyticsConfigApiKeysController","app/view/analytics/configuration/apiKeys/AnalyticsConfigApiKeysView.html")};return analyticsRoutes}),define("app/view/networkMonitoring/NetworkMonitoringRoutes",["require","exports"],function(){var networkMonitoringRoutes={APP_NETWORK_DASHBOARD:new Route("NPMAppDashboardController","app/view/networkMonitoring/dashboard/appDashboard/NPMAppDashboardController","app/view/networkMonitoring/dashboard/appDashboard/NPMAppDashboard.html"),APP_NETWORK_COMPONENT_DASHBOARD:new Route("NPMComponentDashboardController","app/view/networkMonitoring/dashboard/componentDashboard/NPMComponentDashboardController","app/view/networkMonitoring/dashboard/componentDashboard/NPMComponentDashboard.html"),APP_NETWORK_NODE_DASH:new Route("NPMNodeDashboardController","app/view/networkMonitoring/dashboard/nodeDashboard/NPMNodeDashboardController","app/view/networkMonitoring/dashboard/nodeDashboard/NPMNodeDashboardView.html")};return networkMonitoringRoutes});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/pages/main/RouteController",["require","exports","../../view/apm/APMRoutes","../../view/eum/EUMRoutes","../../view/customDashboard2/DashboardsReportsRoutes","../../view/alertRespond/AlertRespondRoutes","../../view/serverMonitoring/ServerMonitoringRoutes","../../view/dbMonitoring/DBMonitoringRoutes","../../view/analytics/AnalyticsRoutes","../../view/networkMonitoring/NetworkMonitoringRoutes"],function(require,exports,APMRoutes,EUMRoutes,DashboardsReportsRoutes,AlertRespondRoutes,serverMonitoringRoutes,dbMonitoringRoutes,analyticsRoutes,networkMonitoringRoutes){var RouteController=function(_super){function RouteController($scope,$rootScope,flashService,$location,$route,resourceManager,navigationService,masterService,injectorService){_super.call(this,$scope,$rootScope,flashService,$location,$route,resourceManager,navigationService,masterService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.flashService=flashService,this.$location=$location,this.resourceManager=resourceManager,this.navigationService=navigationService,this.masterService=masterService,this.injectorService=injectorService,_.extend(RouteController.ROUTES_TABLE,APMRoutes.routeMap),_.extend(RouteController.ROUTES_TABLE,EUMRoutes.routeMap),_.extend(RouteController.ROUTES_TABLE,DashboardsReportsRoutes.routeMap),_.extend(RouteController.ROUTES_TABLE,AlertRespondRoutes.routeMap),_.extend(RouteController.ROUTES_TABLE,serverMonitoringRoutes),_.extend(RouteController.ROUTES_TABLE,dbMonitoringRoutes),_.extend(RouteController.ROUTES_TABLE,analyticsRoutes),_.extend(RouteController.ROUTES_TABLE,networkMonitoringRoutes),masterService.logoutURL=RouteController.LOGOUT_URL,this.$scope.navigationState=NavigationService.instance().navigationState,this.$scope.controller=this}return __extends(RouteController,_super),RouteController.prototype.getRoutesTable=function(){return RouteController.ROUTES_TABLE},RouteController.LOGOUT_URL="index.html",RouteController.$inject=["$scope","$rootScope","flashService","$location","$route","resourceManager","navigationService","masterService","injectorService"],RouteController.ROUTES_TABLE={FLASH_ROUTE_ID:new Route("","",RouteControllerBase.FLASH_ROUTE_URL),AD_HOME:new Route("HomeController","app/view/home/HomeController","app/view/home/Home.html"),AD_HOME_OVERVIEW:new Route("HomeController","app/view/home/HomeController","app/view/home/Home.html"),AD_PLATFORM_HOME:new Route("PlatformHomeController","app/view/home/platformHome/PlatformHomeController","app/view/home/platformHome/PlatformHomeView.html"),AD_GETTING_STARTED_HOME:new Route("GettingStartedHomeController","app/view/home/gettingStartedHome/GettingStartedHomeController","app/view/home/gettingStartedHome/GettingStartedHomeView.html"),AD_GETTING_STARTED:new Route("GettingStartedController","app/view/home/GettingStartedController","app/view/home/GettingStartedView.html"),GETTING_STARTED_ANDROID:new Route("AndroidGettingStartedController","app/view/home/agentInstallWizard/agents/eum/AndroidGettingStartedController","app/view/home/agentInstallWizard/agents/eum/EUMGettingStartedView.html"),GETTING_STARTED_IOS:new Route("IOSGettingStartedController","app/view/home/agentInstallWizard/agents/eum/IOSGettingStartedController","app/view/home/agentInstallWizard/agents/eum/EUMGettingStartedView.html"),GETTING_STARTED_SYNTHETIC:new Route("SyntheticGettingStartedController","app/view/home/agentInstallWizard/agents/eum/SyntheticGettingStartedController","app/view/home/agentInstallWizard/agents/eum/EUMGettingStartedView.html"),GETTING_STARTED_NODEJS:new Route("NodeJsGettingStartedController","app/view/home/agentInstallWizard/agents/apm/NodeJsGettingStartedController","app/view/home/agentInstallWizard/agents/apm/NodeJsGettingStartedView.html"),GETTING_STARTED_PHP:new Route("PHPGettingStartedController","app/view/home/agentInstallWizard/agents/apm/PHPGettingStartedController","app/view/home/agentInstallWizard/agents/apm/PHPGettingStartedView.html"),GETTING_STARTED_JAVA:new Route("JavaGettingStartedController","app/view/home/agentInstallWizard/agents/apm/JavaGettingStartedController","app/view/home/agentInstallWizard/agents/apm/JavaGettingStartedView.html"),GETTING_STARTED_DOTNET:new Route("DotNetGettingStartedController","app/view/home/agentInstallWizard/agents/apm/DotNetGettingStartedController","app/view/home/agentInstallWizard/agents/apm/DotNetGettingStartedView.html"),GETTING_STARTED_PYTHON:new Route("PythonGettingStartedController","app/view/home/agentInstallWizard/agents/apm/PythonGettingStartedController","app/view/home/agentInstallWizard/agents/apm/PythonGettingStartedView.html"),GETTING_STARTED_DB:new Route("DBGettingStartedController","app/view/home/agentInstallWizard/agents/db/DBGettingStartedController","app/view/home/agentInstallWizard/agents/db/DBGettingStartedView.html"),GETTING_STARTED_SERVER:new Route("ServerGettingStartedController","app/view/home/agentInstallWizard/agents/server/ServerGettingStartedController","app/view/home/agentInstallWizard/agents/server/ServerGettingStartedView.html"),AD_PRODUCT_TOUR:new Route("ProductTourController","app/view/home/productTour/ProductTourController","app/view/home/productTour/ProductTourView.html"),SETTINGS_AUTHENTICATION:new Route("AuthenticationController","app/view/admin/authSettings/authentication/AuthenticationController","app/view/admin/authSettings/authentication/Authentication.html"),METRIC_BROWSER:new DialogRoute({controllerPath:"app/view/common/metricBrowser/MetricBrowserController",templateUrl:"app/view/common/metricBrowser/MetricBrowserView.html",minimizable:!0}),SETTINGS_HOME:new Route("SettingsHomeController","app/view/settings/home/SettingsHomeController","app/view/settings/home/SettingsHomeView.html"),SETTINGS_USER_PREFERENCES:new Route("UserPreferencesController","app/view/settings/userPreferences/UserPreferencesController","app/view/settings/userPreferences/UserPreferences.html"),SETTINGS_LICENSE:new Route("LicenseController","app/view/settings/license/LicenseController","app/view/settings/license/License.html"),SETTINGS_DEPLOYER_AGENT_CONFIG:new Route("MachineAgentConfigController","app/view/settings/machineAgentConfig/MachineAgentConfigController","app/view/settings/machineAgentConfig/MachineAgentConfig.html"),SETTINGS_DB_AGENTS:new Route("DBAgentSettingsController","app/view/settings/agents/db/DBAgentSettingsController","app/view/settings/agents/db/DBAgentSettings.html"),AGENT_INSTALL_WIZARD:new Route("AgentInstallWizardController","app/view/home/agentInstallWizard/AgentInstallWizardController","app/view/home/agentInstallWizard/AgentInstallWizard.html")},RouteController}(RouteControllerBase);appdynamicsModule.controller("RouteController",RouteController)});var MasterService=function(){function MasterService($rootScope,$http,adLogger,timeRangeService,$location,userService,dialogService,injectorService){var _this=this;this.$rootScope=$rootScope,this.$http=$http,this.adLogger=adLogger,this.timeRangeService=timeRangeService,this.$location=$location,this.userService=userService,this.dialogService=dialogService,this.injectorService=injectorService,this.logoutURL="",this.initialLocation="",this.userPreferences={},this.accountProperties={},this.accountConfiguration={},this.isLoggedIn=!1,this.isMultiTenantController=!1,this.enableAllHtmlUrlParamSet=!1,this.enableFlexCustomDashParamSet=!1,this._isSessionTimeoutDialogShowing=!1;var locationSearch=location.search.substring(1),url=new URLParams(locationSearch);this.enableAllHtmlUrlParamSet="true"===url.getParam("enableAllHtml"),this.enableFlexCustomDashParamSet="true"===url.getParam("enableFlexCustomDash"),this._initialUrlParams=new URLParams($location.path()),$rootScope.$on(EventConstants.UEV_SET_CURRENT_LOCATION_AS_DEFAULT_LANDING_SCREEN,function(){_this.setCurrentLocationAsDefaultLandingScreen()}),EventBusService.instance().registerEventListener(SessionTimeoutInterceptor.UEV_SESSION_TIMEOUT_OCCURRED,function(event){void 0===event&&(event=null),_this.handleSessionTimeoutEvent()},$rootScope)}return MasterService.instance=function(){return AngularUtil.getADInjector().get(MasterService.SERVICE_NAME)},MasterService.prototype.setRoutesTable=function(routesTable){this._routesTable=routesTable},MasterService.prototype.isPermissionEnabled=function(permission){for(var itr=0;itr<this.initData.permissionActions.length;itr++)if(permission==this.initData.permissionActions[itr])return!0;return!1},MasterService.prototype.onAuthenticateSuccess=function(username,password){void 0===username&&(username=null),void 0===password&&(password=null),ADLoggerService.log("MasterService.onAuthenticateSuccess"),this.isLoggedIn=!0,this.$rootScope.$broadcast(MasterService.UEV_LOGIN_EVENT),this.fetchInitData(),this.displayAdminWarningIfNeeded()},MasterService.prototype.logout=function(showTimeoutMessage){var _this=this;void 0===showTimeoutMessage&&(showTimeoutMessage=!1);var logoutURLChanged=!1,getLogoutURLHandler=function(){_this.$rootScope.$broadcast(MasterService.UEV_LOGOUT_EVENT),!logoutURLChanged&&showTimeoutMessage&&(_this.logoutURL=_this.logoutURL+"#?"+MasterService.URL_PARAM_SHOW_TIMEOUT_POPUP+"=true"),_this.isLoggedIn=!1,_this.$http.get("auth?action=logout").success(function(){_this.$http.defaults.headers.common.Authorization=null,window.location.href=_this.logoutURL}).error(function(){_this.$http.defaults.headers.common.Authorization=null,window.location.href=_this.logoutURL})};AccountUiService.instance().getLogoutURL().then(function(response){var responseURL=AccountUiService.instance().getLogoutURL_response(response),newLogoutURL=responseURL?responseURL:_this.logoutURL;logoutURLChanged=newLogoutURL!=_this.logoutURL,_this.logoutURL=newLogoutURL,getLogoutURLHandler()},function(error){_this.adLogger.error(error),getLogoutURLHandler()})},MasterService.prototype.routeExists=function(location){var route=this._routesTable[location];return route?!0:!1},MasterService.prototype.isSharedDashboardPageRequestWithToken=function(){var url=new URLParams(this.$location.path()),token=url.getParam("token"),location=url.getParam("location");return!_.isEmpty(token)&&(location===NavigationDataConstants.DASHBOARD_VIEWER||location===NavigationDataConstants.DASHBOARD_VIEWER1||location===NavigationDataConstants.WARROOM_VIEWER||location===NavigationDataConstants.WARROOM_VIEWER1)},MasterService.prototype.isDashboardViewerApp=function(){return/dashboards\.jsp/.test(this.$location.absUrl())},MasterService.prototype.isReportsApp=function(){return/reports\.html/.test(this.$location.absUrl())},MasterService.prototype.getGeneralUserPreference=function(preferenceName,defaultValue){if(void 0===defaultValue&&(defaultValue=""),!(this.initData&&this.initData.generalUserPreferences&&this.initData.generalUserPreferences&&this.initData.generalUserPreferences.preferences))return defaultValue;for(var i=0;i<this.initData.generalUserPreferences.preferences.length;i++){var nvp=this.initData.generalUserPreferences.preferences[i];if(nvp.name==preferenceName)return nvp.value}return defaultValue},MasterService.prototype.getBooleanGeneralUserPreference=function(preferenceName,defaultValue){void 0===defaultValue&&(defaultValue=!1);var pref=this.getGeneralUserPreference(preferenceName);return pref?(pref=pref.toLowerCase(),"true"===pref):defaultValue},MasterService.prototype.setGeneralPreference=function(preferenceName,preferenceValue){this.setTemporaryGeneralPreference(preferenceName,preferenceValue),UserPreferenceUiService.instance().setGeneralUserPreference(preferenceName,preferenceValue)},MasterService.prototype.setTemporaryGeneralPreference=function(preferenceName,preferenceValue){if(this.initData){this.initData.generalUserPreferences||(this.initData.generalUserPreferences={}),this.initData.generalUserPreferences.preferences||(this.initData.generalUserPreferences.preferences=new Array);for(var wasSet=!1,i=0;i<this.initData.generalUserPreferences.preferences.length;i++){var nvp=this.initData.generalUserPreferences.preferences[i];nvp.name==preferenceName&&(nvp.value=preferenceValue,wasSet=!0)}if(!wasSet){var nvp={};nvp.name=preferenceName,nvp.value=preferenceValue,this.initData.generalUserPreferences.preferences.push(nvp)}}},MasterService.prototype.isHTMLEnabledLocation=function(params){var location=params.location();if(!this.initData)throw new Error("isHTMLEnabledLocation called before initData is downloaded.  Wait for UEV_INIT_DATA_FETCHED before calling this method.");if(location==NavigationDataConstants.ANALYTICS_FILTER_TEST)return!0;if(location==NavigationDataConstants.APP_SNAPSHOT_VIEWER&&-1==window.location.toString().indexOf("htmlSnapshotEnabled=false")&&"false"!=this.getAccountProperty("HTML_SNAPSHOT_ENABLED"))return!0;if(location==NavigationDataConstants.METRIC_BROWSER&&!MetricBrowserViewService.instance().isHtmlMetricBrowserEnabled())return!1;if((location===NavigationDataConstants.APP_ALL_SNAPSHOT_LIST||location===NavigationDataConstants.APP_BT_ALL_SNAPSHOT_LIST||location===NavigationDataConstants.APP_COMPONENT_ALL_SNAPSHOT_LIST||location===NavigationDataConstants.APP_NODE_ALL_SNAPSHOT_LIST||location===NavigationDataConstants.APP_DIAGNOSTIC_SESSION_LIST||location===NavigationDataConstants.APP_BT_DIAGNOSTIC_SESSION_LIST||location===NavigationDataConstants.APP_COMPONENT_DIAGNOSTIC_SESSION_LIST||location===NavigationDataConstants.APP_NODE_DIAGNOSTIC_SESSION_LIST)&&-1!=window.location.toString().indexOf("viewFlexSnapshotList=true"))return!1;if(location==NavigationDataConstants.APP_DASHBOARD&&!this.enableAllHtmlUrlParamSet){var tab=params.getNumberParam(UrlConstants.TAB_ID,DashboardUtil.APP_DASH_TAB_OVERVIEW);if(tab==DashboardUtil.APP_DASH_TAB_OVERVIEW&&this.getBooleanGeneralUserPreference(UserPreferenceConstants.SHOW_OLD_APP_FLOW,!1))return!1;if(tab>-1&&tab!=DashboardUtil.APP_DASH_TAB_OVERVIEW)return!1}if(location==NavigationDataConstants.APP_BT_DETAIL&&!this.enableAllHtmlUrlParamSet){var tab=params.getNumberParam(UrlConstants.TAB_ID,DashboardUtil.BTDASH_TAB_OVERVIEW);if(tab==DashboardUtil.BTDASH_TAB_OVERVIEW&&this.getBooleanGeneralUserPreference(UserPreferenceConstants.SHOW_OLD_BT_FLOW,!1))return!1;if(tab>-1&&tab!=DashboardUtil.BTDASH_TAB_OVERVIEW)return!1}if(location==NavigationDataConstants.APP_COMPONENT_MANAGER&&!this.enableAllHtmlUrlParamSet){var tab=params.getNumberParam(UrlConstants.TAB_ID,DashboardUtil.COMPONENT_DASH_TAB_OVERVIEW);if(tab==DashboardUtil.COMPONENT_DASH_TAB_OVERVIEW&&this.getBooleanGeneralUserPreference(UserPreferenceConstants.SHOW_OLD_COMPONENT_FLOW,!1))return!1;if(tab>-1&&tab!=DashboardUtil.COMPONENT_DASH_TAB_OVERVIEW)return!1}if(location==NavigationDataConstants.APP_NODE_MANAGER&&!this.enableAllHtmlUrlParamSet){var tab=params.getNumberParam(UrlConstants.TAB_ID,DashboardUtil.NODE_DASH_TAB_OVERVIEW);if(tab==DashboardUtil.NODE_DASH_TAB_OVERVIEW&&this.getBooleanGeneralUserPreference(UserPreferenceConstants.SHOW_OLD_NODE_FLOW,!1))return!1;if(tab>-1&&tab!=DashboardUtil.NODE_DASH_TAB_OVERVIEW)return!1}if(location==NavigationDataConstants.APP_BACKEND_DASHBOARD&&!this.enableAllHtmlUrlParamSet){var tab=params.getNumberParam(UrlConstants.TAB_ID,DashboardUtil.BACKEND_DASH_TAB_OVERVIEW);if(tab==DashboardUtil.BACKEND_DASH_TAB_OVERVIEW&&this.getBooleanGeneralUserPreference(UserPreferenceConstants.SHOW_OLD_BACKEND_FLOW,!1))return!1}if(location===NavigationDataConstants.APP_SNAPSHOT_RSD_VIEWER&&!this.enableAllHtmlUrlParamSet&&this.getBooleanGeneralUserPreference(UserPreferenceConstants.SHOW_OLD_RSD_VIEWER,!1))return!1;if(location==NavigationDataConstants.APP_CONFIGURATION&&-1!=window.location.toString().indexOf("viewHTMLTxConfig=true"))return!0;var isHtmlLocation=!1;return!this.enableFlexCustomDashParamSet||location!==NavigationDataConstants.CDASHBOARD_DETAIL&&location!==NavigationDataConstants.DASHBOARD_LIST?this.enableAllHtmlUrlParamSet?isHtmlLocation=!0:CollectionUtils.isStringInArray(location,MasterService.HTML_ENABLED_NAV_LOCATIONS)?isHtmlLocation=!0:this.initData&&this.initData.htmlEnabledLocations&&CollectionUtils.isStringInArray(location,this.initData.htmlEnabledLocations)&&(isHtmlLocation=!0):isHtmlLocation=!1,isHtmlLocation},MasterService.prototype.displayAdminWarningIfNeeded=function(){var _this=this,token=this.$location.search().showAdminWarning;token&&"true"==token&&InjectorService.instance().$timeout()(function(){NotificationService.instance().displayError("You do not have permission to view the AppDynamics Administration console.","Access Denied"),_this.$location.search("showAdminWarning",null)},1e3)},MasterService.prototype.fetchInitData=function(){var _this=this;if(this.isSharedDashboardPageRequestWithToken())return this.initData={},this.$rootScope.$broadcast(MasterService.UEV_INIT_DATA_FETCHED),void this.routeController.$scope.showApp();var resultHandler=function(response){var initData=UserUiService.instance().getInitData_response(response),thisService=_this;if(_this.initData=initData,ADLoggerService.log("MasterService.fetchInitData - htmlEnabledLocations: "+initData.htmlEnabledLocations),initData&&initData.userPreferences&&initData.userPreferences.properties&&angular.forEach(initData.userPreferences.properties,function(prop){thisService.userPreferences[prop.name]=prop.value}),initData&&initData.accountUI&&initData.accountUI.configurationProperties&&angular.forEach(initData.accountUI.configurationProperties,function(prop){thisService.accountProperties[prop.name]=prop.value}),initData&&initData.accountConfiguration)for(var itr=0;itr<initData.accountConfiguration.length;itr++){var prop=initData.accountConfiguration[itr];thisService.accountConfiguration[prop.name]=prop.value}FeatureService.setEUMWebLicenseType(_this.initData.eumWebLicenseType),FeatureService.setEUMMobileLicenseType(_this.initData.eumMobileLicenseType),FeatureService.setEUMSyntheticLicenseType(_this.initData.eumSyntheticLicenseType),FeatureService.setSyntheticVisible(_this.initData.syntheticEnabled),FeatureService.setSessionsVisible(_this.initData.sessionsEnabled),InterstitialMessageService.instance().showInterstitialMessage(function(){_this.loadPostLoginDisplay()}),InactivityTimeoutService.instance().start()},promise=UserUiService.instance().getInitData();promise.then(resultHandler)},MasterService.prototype.getAccountPropertyBoolean=function(key){return"true"==this.accountProperties[key]?!0:!1},MasterService.prototype.getAccountProperty=function(key){return this.accountProperties[key]},MasterService.prototype.getControllerConfigurationItemValue=function(key){return this.accountConfiguration[key]},MasterService.prototype.getProductMode=function(accountEdition){var mode=MasterService.PRODUCT_PRO_MODE;return accountEdition&&accountEdition.length>0&&(accountEdition==AccountEdition.AZURE_LITE||accountEdition==AccountEdition.LITE?mode=MasterService.PRODUCT_LITE_MODE:accountEdition==AccountEdition.ENTERPRISE_TRIAL||accountEdition==AccountEdition.AZURE_PRO_TRIAL?mode=MasterService.PRODUCT_PRO_TRIAL_MODE:(accountEdition==AccountEdition.ENTERPRISE||accountEdition==AccountEdition.AZURE_PRO||accountEdition==AccountEdition.STANDARD)&&(mode=MasterService.PRODUCT_PRO_MODE)),mode},MasterService.prototype.getProductModeFromCurrentAccount=function(){return this.initData?this.getProductMode(this.initData.accountEdition):null},MasterService.prototype.setupExternalUrlsFromAccountProps=function(){if(this.initData&&this.initData.accountUI&&this.initData.accountUI.configurationProperties&&this.initData.accountUI.configurationProperties.length>0){var externalUrlOverrides=CollectionUtils.getValueFromNameValuePairs(ExternalUrls.EXTERNAL_URLS_OVERRIDE,this.initData.accountUI.configurationProperties);if("true"==externalUrlOverrides)for(var accountProp,i=0;i<this.initData.accountUI.configurationProperties.length;i++)accountProp=this.initData.accountUI.configurationProperties[i],ExternalUrls[accountProp.name]=accountProp.value}},MasterService.prototype.viewDefaultLandingScreen=function(){if(!(this.injectorService.appConfig().admin||""!=this._initialUrlParams.location()&&this._initialUrlParams.location())){var defaultLandingScreenLocation=this.userService.getGeneralUserPreferenceValue(GeneralUserPreferenceConstants.DEFAULT_LANDING_SCREEN_URL_PATH);defaultLandingScreenLocation&&""!=defaultLandingScreenLocation||(defaultLandingScreenLocation=CollectionUtils.getValueFromNameValuePairs(GeneralUserPreferenceConstants.DEFAULT_LANDING_SCREEN_URL_PATH,this.initData.accountUI.configurationProperties)),defaultLandingScreenLocation&&this.injectorService.navigationService().navigateTo(defaultLandingScreenLocation)}},MasterService.prototype.setCurrentLocationAsDefaultLandingScreen=function(){var _this=this,currentUrlParams=URLParams.getCurrentUrlParams();currentUrlParams.removeParam(UrlConstants.TIME_RANGE);var pathToLoadOnStartup=currentUrlParams.toStringNoForwardSlash(),onOK=function(){_this.injectorService.userService().userPreferenceUiService.setGeneralUserPreference(GeneralUserPreferenceConstants.DEFAULT_LANDING_SCREEN_URL_PATH,pathToLoadOnStartup),_this.injectorService.notificationService().displayMessage(_this.injectorService.resourceManager().getString("ui","ms_setLocationAsDefaultLandingSuccess",[pathToLoadOnStartup]),"")};this.injectorService.dialogService().showConfirmation(resourceManager.getString("ui","ms_setLocationAsDefaultLandingConfirmTitle"),resourceManager.getString("ui","ms_setLocationAsDefaultLandingConfirmMessage"),onOK)},MasterService.prototype.onInitDataFetch=function(){var deferred=InjectorService.instance().$q().defer();return this.initData?deferred.resolve():this.$rootScope.$on(MasterService.UEV_INIT_DATA_FETCHED,function(){deferred.resolve()}),deferred.promise},MasterService.prototype.hasAccountPermission=function(permission){return this.initData?_.contains(this.initData.permissionActions,permission):!1},MasterService.prototype.loadPostLoginDisplay=function(){this.routeController.$scope.showApp(),this.$rootScope.$broadcast(MasterService.UEV_INIT_DATA_FETCHED),this.timeRangeService.initData(this.initData.accountEdition),this.setupExternalUrlsFromAccountProps(),this.userService.onInitDataFetched(),this.viewDefaultLandingScreen(),this.showImportantNotifications()},MasterService.prototype.showImportantNotifications=function(){var showWelcomeTo42Message=!1;if(showWelcomeTo42Message){var disablePopups=AppConfig.instance().disablePopups,hasDismissedWelcomeModal=UserService.instance().getGeneralUserPreferenceBooleanValue(UserService.DONT_SHOW_WELCOME_TO_UI),isHtmlLocation=this.isHTMLEnabledLocation(URLParams.getCurrentUrlParams());if(disablePopups)return void(HelpBubblePopoverController.disableHelpBubbles=!0);if(!AppConfig.instance().admin&&!hasDismissedWelcomeModal&&isHtmlLocation){HelpBubblePopoverController.disableHelpBubbles=!0;var modal,scope={};scope.onClose=function(){modal.close(),HelpBubblePopoverController.disableHelpBubbles=!1,EventBusService.instance().dispatchEvent(EventConstants.UEV_RERUN_HELP_POPUPS,{})},scope.onViewWhatsNew=function(){ExternalUrls.open(ExternalUrls.HELP_URL_WHATS_NEW_IN_UI),scope.onClose()},scope.onDontShowAgainChange=function(selected){UserService.instance().setGeneralUserPreferenceBooleanValue(UserService.DONT_SHOW_WELCOME_TO_UI,selected)},ControllerBase.addGetStringToScope(scope),modal=DialogService.instance().showSimpleDialog("app/view/home/welcomeToNewRelease/WelcomeToNewReleaseModal.html",scope)
}}},MasterService.prototype.isSaas=function(){return-1!=InjectorService.instance().$location().absUrl().indexOf("saas.appdynamics.com")},MasterService.prototype.isNewCustomDashEnabled=function(){return-1==window.location.toString().indexOf("useCDVersion=1")},MasterService.prototype.handleSessionTimeoutEvent=function(event){void 0===event&&(event=null),this.logout(!0)},MasterService.SERVICE_NAME="masterService",MasterService.UEV_LOGIN_EVENT="loginEvent",MasterService.UEV_LOGOUT_EVENT="UEV_LOGOUT_EVENT",MasterService.UEV_INIT_DATA_FETCHED="UEV_INIT_DATA_FETCHED",MasterService.UEV_EUM_ENABLED_CHANGE="UEV_EUM_ENABLED_CHANGE",MasterService.UEV_EUM_MOBILE_APP_CHANGE="UEV_EUM_MOBILE_APP_CHANGE",MasterService.PRODUCT_LITE_MODE="PRODUCT_LITE_MODE",MasterService.PRODUCT_PRO_TRIAL_MODE="PRODUCT_PRO_TRIAL_MODE",MasterService.PRODUCT_PRO_MODE="PRODUCT_PRO_MODE",MasterService.URL_PARAM_SHOW_TIMEOUT_POPUP="showTimeoutPopup",MasterService.ENABLE_NOTIFICATIONS_POLLING=!0,MasterService.$inject=["$rootScope","$http","adLogger","timeRangeService","$location","userService","dialogService","injectorService"],MasterService.HTML_ENABLED_NAV_LOCATIONS=[NavigationDataConstants.AD_HOME,NavigationDataConstants.AD_HOME_OVERVIEW,NavigationDataConstants.AD_GETTING_STARTED,NavigationDataConstants.AD_GETTING_STARTED_HOME,NavigationDataConstants.GETTING_STARTED_ANDROID,NavigationDataConstants.GETTING_STARTED_IOS,NavigationDataConstants.GETTING_STARTED_SYNTHETIC,NavigationDataConstants.GETTING_STARTED_DB,NavigationDataConstants.GETTING_STARTED_NODEJS,NavigationDataConstants.GETTING_STARTED_JAVA,NavigationDataConstants.GETTING_STARTED_PHP,NavigationDataConstants.GETTING_STARTED_DOTNET,NavigationDataConstants.GETTING_STARTED_PYTHON,NavigationDataConstants.GETTING_STARTED_SERVER,NavigationDataConstants.AD_PLATFORM_HOME,NavigationDataConstants.AD_PRODUCT_TOUR,NavigationDataConstants.ALERT_RESPOND_APP_HOME,NavigationDataConstants.ALERT_RESPOND_HOME,NavigationDataConstants.ALERT_RESPOND_POLICIES,NavigationDataConstants.ALERT_RESPOND_ACTIONS,NavigationDataConstants.ALERT_RESPOND_ACTION_SUPPRESSION,NavigationDataConstants.ALERT_RESPOND_HEALTH_RULES,NavigationDataConstants.ALERT_RESPOND_HTTP_ACTION_PLAN_LIST,NavigationDataConstants.ALERT_RESPOND_HTTP_ACTION_PLAN_DETAIL,NavigationDataConstants.ALERT_RESPOND_EMAIL_ACTION_PLAN_LIST,NavigationDataConstants.ALERT_RESPOND_EMAIL_ACTION_PLAN_DETAIL,NavigationDataConstants.ALERT_RESPOND_EMAIL_DIGESTS,NavigationDataConstants.SETTINGS_HOME,NavigationDataConstants.SETTINGS_LICENSE,NavigationDataConstants.SETTINGS_DB_AGENTS,NavigationDataConstants.SETTINGS_DEPLOYER_AGENT_CONFIG,NavigationDataConstants.APPS_ALL_DASHBOARD,NavigationDataConstants.APP_DASH,NavigationDataConstants.APP_DASHBOARD,NavigationDataConstants.APP_BT_LIST,NavigationDataConstants.APP_BT_DETAIL,NavigationDataConstants.APP_BT_DASHBOARD,NavigationDataConstants.APP_COMPONENT,NavigationDataConstants.APP_COMPONENT_MANAGER,NavigationDataConstants.APP_CONFIGURATION_HOME,NavigationDataConstants.APP_NODE,NavigationDataConstants.APP_NODE_MANAGER,NavigationDataConstants.APP_BACKEND_DASHBOARD,NavigationDataConstants.EUM_WEB_HOME,NavigationDataConstants.EUM_MOBILE_HOME,NavigationDataConstants.EUM_WEB_MAIN_DASHBOARD,NavigationDataConstants.EUM_MOBILE_MAIN_DASHBOARD,NavigationDataConstants.EUM_WEB_SESSION_DETAILS,NavigationDataConstants.EUM_SYNTHETIC_SESSION_DETAILS,NavigationDataConstants.EUM_MOBILE_SESSION_DETAILS,NavigationDataConstants.EUM_CRASH_DASHBOARD,NavigationDataConstants.EUM_CRASH_LIST,NavigationDataConstants.EUM_CRASH_DETAILS,NavigationDataConstants.EUM_MOBILE_INFO_POINT_LIST,NavigationDataConstants.EUM_MOBILE_INFO_POINTS,NavigationDataConstants.EUM_MOBILE_CUSTOM_METRIC_LIST,NavigationDataConstants.EUM_REQUEST_SNAPSHOT_LIST,NavigationDataConstants.EUM_REQUEST_SNAPSHOT_DETAILS,NavigationDataConstants.EUM_REQUESTS_EPISODES,NavigationDataConstants.EUM_CRASH_GROUP_DASHBOARD,NavigationDataConstants.EUM_ANALYTICS_CRASH_DASHBOARD,NavigationDataConstants.EUM_DEVICES_CARRRIERS,NavigationDataConstants.EUM_BROWSERS_AND_DEVICES,NavigationDataConstants.EUM_WEB_SESSION_ANALYTICS,NavigationDataConstants.EUM_MOBILE_SESSION_ANALYTICS,NavigationDataConstants.EUM_NETWORK_REQUEST_ANALYTICS,NavigationDataConstants.EUM_NETWORK_REQUEST_ANALYTICS_DETAILS,NavigationDataConstants.APP_NETWORK_DASHBOARD,NavigationDataConstants.ANALYTICS_ADQL_HOME,NavigationDataConstants.ANALYTICS_SEARCH_LIST,NavigationDataConstants.ANALYTICS_ADQL_SEARCH,NavigationDataConstants.ANALYTICS_HOME,NavigationDataConstants.ANALYTICS_TRANSACTIONS,NavigationDataConstants.ANALYTICS_LOGS,NavigationDataConstants.ANALYTICS_USER_WEB_ACTIVITY,NavigationDataConstants.ANALYTICS_USER_MOBILE_ACTIVITY,NavigationDataConstants.ANALYTICS_METRICS,NavigationDataConstants.ANALYTICS_CONFIG_API_KEYS,NavigationDataConstants.ANALYTICS_METRICS_CONFIG,NavigationDataConstants.ANALYTICS_EXTRACTED_FIELDS_CONFIG,NavigationDataConstants.ANALYTICS_METRIC_CORRELATION,NavigationDataConstants.ANALYTICS_METRIC_CORRELATION_DIALOG,NavigationDataConstants.EUM_PAGE_DASHBOARD,NavigationDataConstants.EUM_PAGE_BROWSER_SNAPSHOTS,NavigationDataConstants.AGENT_INSTALL_WIZARD,NavigationDataConstants.EUM_REQUEST_DASHBOARD,NavigationDataConstants.CDASHBOARD_DETAIL,NavigationDataConstants.APP_NODE_CUSTOM_DASH,NavigationDataConstants.APP_COMPONENT_CUSTOM_DASH,NavigationDataConstants.DASHBOARDS_REPORTS_HOME,NavigationDataConstants.DASHBOARD_LIST,NavigationDataConstants.APP_CUSTOM_DASH_MANAGE,NavigationDataConstants.APP_SERVICE_ENDPOINT_LIST,NavigationDataConstants.DASHBOARD_VIEWER_LIST,NavigationDataConstants.DASHBOARD_VIEWER_LIST1,NavigationDataConstants.DASHBOARD_VIEWER_ERROR,NavigationDataConstants.DASHBOARD_VIEWER_ERROR1,NavigationDataConstants.DASHBOARD_VIEWER,NavigationDataConstants.DASHBOARD_VIEWER1,NavigationDataConstants.WARROOM_VIEWER,NavigationDataConstants.WARROOM_VIEWER_ERROR,NavigationDataConstants.WARROOM_VIEWER1,NavigationDataConstants.DASHBOARD_LIST1,NavigationDataConstants.CDASHBOARD_DETAIL1,NavigationDataConstants.DASHBOARD_VIEWER1,NavigationDataConstants.DASHBOARD_VIEWER_LIST1,NavigationDataConstants.DASHBOARD_VIEWER_ERROR1,NavigationDataConstants.APP_WARROOM_DASH1,NavigationDataConstants.APP_WARROOM_LIST1,NavigationDataConstants.APP_NODE_CUSTOM_DASH1,NavigationDataConstants.APP_COMPONENT_CUSTOM_DASH1,NavigationDataConstants.ADMIN_HOME,NavigationDataConstants.ADMIN_ACCOUNT_LIST,NavigationDataConstants.ADMIN_ACCOUNT_DETAIL,NavigationDataConstants.ADMIN_CONTROLLER_ADMIN,NavigationDataConstants.EUM_RESOURCE_SNAPSHOT,NavigationDataConstants.DB_MONITORING_CONFIGURATION_HOME,NavigationDataConstants.DB_MONITORING_COLLECTOR_LIST,NavigationDataConstants.DB_MONITORING_CUSTOM_METRICS,NavigationDataConstants.DB_MONITORING_SERVER_DASHBOARD,NavigationDataConstants.DB_MONITORING_SERVER_LIST,NavigationDataConstants.DB_MONITORING_QUERY_LIST,NavigationDataConstants.DB_MONITORING_CLIENT_LIST,NavigationDataConstants.DB_MONITORING_SESSION_LIST,NavigationDataConstants.DB_MONITORING_NAMESPACE_LIST,NavigationDataConstants.DB_MONITORING_DATABASES_LIST,NavigationDataConstants.DB_MONITORING_SCHEMA_LIST,NavigationDataConstants.DB_MONITORING_MODULE_LIST,NavigationDataConstants.DB_MONITORING_PROGRAM_LIST,NavigationDataConstants.DB_MONITORING_CLUSTER_TOPOLOGY,NavigationDataConstants.DB_MONITORING_OBJECT_BROWSER,NavigationDataConstants.DB_MONITORING_WAIT_REPORT,NavigationDataConstants.DB_MONITORING_TOP_ACTIVITY_REPORT,NavigationDataConstants.DB_MONITORING_TOP_SQL_REPORT,NavigationDataConstants.DB_MONITORING_COMPARISON_REPORT,NavigationDataConstants.DB_MONITORING_IO_REPORT,NavigationDataConstants.DB_MONITORING_QUERY_DETAILS,NavigationDataConstants.DB_MONITORING_LIVE_VIEW,NavigationDataConstants.DB_MONITORING_WAIT_STATE_FILTERING,NavigationDataConstants.DB_MONITORING_CUSTOM_DASHBOARD,NavigationDataConstants.DB_MONITORING_CUSTOM_SQL_METRICS_LIST,NavigationDataConstants.EUM_SNAPSHOT_DATA,NavigationDataConstants.EUM_BROWSER_SNAPSHOTS,NavigationDataConstants.EUM_SYNTHETIC_LAUNCH,NavigationDataConstants.EUM_SYNTHETIC_ON_DEMAND,NavigationDataConstants.EUM_SYNTHETIC_SESSION_ANALYTICS,NavigationDataConstants.EUM_WEB_ANALYZE,NavigationDataConstants.EUM_WEB_ANALYZE_DETAILS,NavigationDataConstants.ALL_APPS_FLOW_MAP,NavigationDataConstants.APP_BT_DISCOVERY_CONFIGURATOR,NavigationDataConstants.APP_MACHINE_SNAPSHOTS,NavigationDataConstants.APP_SERVER_HOME,NavigationDataConstants.APP_ANALYZE_HOME,NavigationDataConstants.APP_TROUBLESHOOT_HOME,NavigationDataConstants.APP_MORE_HOME,NavigationDataConstants.REPORTS_HOME,NavigationDataConstants.EUM_SYNTHETIC_SCHEDULE,NavigationDataConstants.EUM_SYNTHETIC_SCHEDULE_LIST,NavigationDataConstants.APP_WARROOM_DASH,NavigationDataConstants.APP_WARROOM_LIST,NavigationDataConstants.APP_WARROOM_TEMPLATES,NavigationDataConstants.SETTINGS_USER_PREFERENCES,NavigationDataConstants.APP_EVENTSTREAM_LIST,NavigationDataConstants.APP_TOP_BT_LIST,NavigationDataConstants.APP_BT_EVENTSTREAM_LIST,NavigationDataConstants.APP_COMPONENT_EVENTSTREAM_LIST,NavigationDataConstants.APP_NODE_EVENTSTREAM_LIST,NavigationDataConstants.APP_EVENT_VIEWER_MODAL,NavigationDataConstants.DB_MONITORING_EVENTS,NavigationDataConstants.EUM_PAGES_LIST,NavigationDataConstants.EUM_SYNTHETIC_PAGES_LIST,NavigationDataConstants.APP_INFO_POINT_LIST,NavigationDataConstants.APP_INFOPOINT_DASHBOARD,NavigationDataConstants.EUM_HOME,NavigationDataConstants.EUM_WEB_ALL_APPS,NavigationDataConstants.EUM_MOBILE_ALL_APPS,NavigationDataConstants.SERVER_MONITORING_HOME,NavigationDataConstants.SERVER_MONITORING_MACHINE_LIST,NavigationDataConstants.SERVER_MONITORING_MACHINE_OVERVIEW,NavigationDataConstants.SERVER_MONITORING_MACHINE_MEMORY,NavigationDataConstants.SERVER_MONITORING_MACHINE_CPU,NavigationDataConstants.SERVER_MONITORING_MACHINE_DISKS,NavigationDataConstants.SERVER_MONITORING_MACHINE_NETWORK,NavigationDataConstants.SERVER_MONITORING_MACHINE_PROCESSES,NavigationDataConstants.SERVER_MONITORING_CONFIGURATION_HOME,NavigationDataConstants.SERVER_MONITORING_EVENTS,NavigationDataConstants.SERVER_MONITORING_SERVICE_LIST,NavigationDataConstants.SERVER_MONITORING_SAM_TARGET_DETAILS,NavigationDataConstants.APP_MACHINE_LIST,NavigationDataConstants.APP_COMPONENT_MACHINE_LIST,NavigationDataConstants.APP_NODE_MACHINE_OVERVIEW,NavigationDataConstants.APP_NODE_MACHINE_NETWORK,NavigationDataConstants.APP_NODE_MACHINE_DISKS,NavigationDataConstants.APP_NODE_MACHINE_PROCESSES,NavigationDataConstants.APP_BACKEND_DASHBOARD_SLOWEST_CALLS,NavigationDataConstants.APP_INFRASTRUCTURE,NavigationDataConstants.APP_COMPONENT_INFRASTRUCTURE,NavigationDataConstants.APP_DATABASE_COMPONENT_LIST,NavigationDataConstants.APP_DATABASE_LIST,NavigationDataConstants.APP_TX_CONFIG_RULES,NavigationDataConstants.APP_TX_CONFIG_SCOPES,NavigationDataConstants.APP_TX_CONFIG_TIERS,NavigationDataConstants.APP_CONFIG_SERVICE_ENDPOINT_DETECTION,NavigationDataConstants.APP_CONFIG_ASYNC,NavigationDataConstants.APP_AUTOMATION_HOME,NavigationDataConstants.APP_BACKEND_LIST,NavigationDataConstants.APP_NETWORK_NODE_DASH,NavigationDataConstants.APP_INCIDENT_LIST,NavigationDataConstants.APP_ALL_SNAPSHOT_LIST,NavigationDataConstants.APP_BT_ALL_SNAPSHOT_LIST,NavigationDataConstants.APP_COMPONENT_ALL_SNAPSHOT_LIST,NavigationDataConstants.APP_COMPONENT_PROCESS_SNAPSHOTS,NavigationDataConstants.APP_NODE_ALL_SNAPSHOT_LIST,NavigationDataConstants.APP_NODE_PROCESS_SNAPSHOTS,NavigationDataConstants.APP_DIAGNOSTIC_SESSION_LIST,NavigationDataConstants.APP_BT_DIAGNOSTIC_SESSION_LIST,NavigationDataConstants.APP_COMPONENT_DIAGNOSTIC_SESSION_LIST,NavigationDataConstants.APP_NODE_DIAGNOSTIC_SESSION_LIST,NavigationDataConstants.EUM_SYNTHETIC_PAGE_DASHBOARD,NavigationDataConstants.EUM_RUM_SYNTH_PAGE_DASHBOARD_COMPARISON,NavigationDataConstants.APP_NETWORK_COMPONENT_DASHBOARD,NavigationDataConstants.APP_SNAPSHOT_RSD_VIEWER,NavigationDataConstants.METRIC_BROWSER,NavigationDataConstants.SETTINGS_AUTHENTICATION,NavigationDataConstants.EUM_WEB_EVENTS_LIST,NavigationDataConstants.EUM_MOBILE_EVENTS_LIST,NavigationDataConstants.EUM_WEB_HEALTH_RULE_VIOLATIONS,NavigationDataConstants.EUM_MOBILE_HEALTH_RULE_VIOLATIONS],MasterService}();appdynamicsModule.service("masterService",MasterService),define("app/services/MasterService",function(){});var InactivityTimeoutService=function(){function InactivityTimeoutService($interval){this.$interval=$interval,this._started=!1,this._lastActionTimestamp=-1,this._intervalPromise=null,this._jQuery=$(document.body)}return InactivityTimeoutService.instance=function(){return AngularUtil.getADInjector().get(InactivityTimeoutService.SERVICE_NAME)},InactivityTimeoutService.prototype.start=function(){if(!this._started){var timeoutProperty=MasterService.instance().accountConfiguration[InactivityTimeoutService.UI_INACTIVITY_TIMEOUT_PROPERTY],timeoutDurationInSeconds=Util.parseInt(timeoutProperty);0>=timeoutDurationInSeconds||(this._sessionTimeoutDurationInMilliseconds=timeoutDurationInSeconds*DateTimeUtil.MILLISEC_PER_SEC,this.setupEventListeners(),this.startTimer(),this._lastActionTimestamp=(new Date).getTime(),this._started=!0)}},InactivityTimeoutService.prototype.stop=function(){this._started&&(this.stopEventListeners(),this.stopTimer(),this._lastActionTimestamp=-1,this._started=!1)},InactivityTimeoutService.prototype.isUserInactive=function(){if(this._lastActionTimestamp<=0)return!1;var delta=(new Date).getTime()-this._lastActionTimestamp;return delta>=this._sessionTimeoutDurationInMilliseconds?!0:!1},InactivityTimeoutService.prototype.doSessionTimeout=function(){this.stop(),MasterService.instance().logout(!0)},InactivityTimeoutService.prototype.onMouseMove=function(event){void 0===event&&(event=null),this.recordAction()},InactivityTimeoutService.prototype.onKeydown=function(event){void 0===event&&(event=null),this.recordAction()},InactivityTimeoutService.prototype.onInterval=function(evetn){void 0===evetn&&(evetn=null),this.isUserInactive()&&this.doSessionTimeout()},InactivityTimeoutService.prototype.setupEventListeners=function(){var _this=this;this._jQuery.on("mousemove",function(event){void 0===event&&(event=null),_this.onMouseMove(event)}),this._jQuery.on("keydown",function(event){void 0===event&&(event=null),_this.onKeydown(event)})},InactivityTimeoutService.prototype.stopEventListeners=function(){this._jQuery.off("mousemove"),this._jQuery.off("keydown")},InactivityTimeoutService.prototype.startTimer=function(){var _this=this;this.stopTimer(),this._intervalPromise=this.$interval(function(){_this.onInterval()},InactivityTimeoutService.POLLING_INTERVAL_IN_MILLISECONDS)},InactivityTimeoutService.prototype.stopTimer=function(){this._intervalPromise&&(this.$interval.cancel(this._intervalPromise),this._intervalPromise=null)},InactivityTimeoutService.prototype.recordAction=function(){this._lastActionTimestamp=(new Date).getTime()},InactivityTimeoutService.SERVICE_NAME="inactivityTimeoutService",InactivityTimeoutService.POLLING_INTERVAL_IN_MILLISECONDS=3e4,InactivityTimeoutService.UI_INACTIVITY_TIMEOUT_PROPERTY="ui.inactivity.timeout",InactivityTimeoutService.$inject=["$interval"],InactivityTimeoutService}();appdynamicsModule.service(InactivityTimeoutService.SERVICE_NAME,InactivityTimeoutService),define("app/services/InactivityTimeoutService",function(){});var InterstitialMessageService=function(){function InterstitialMessageService(){}return InterstitialMessageService.instance=function(){return AngularUtil.getADInjector().get(InterstitialMessageService.SERVICE_NAME)},InterstitialMessageService.prototype.showInterstitialMessage=function(callback){return this.isInterstitialMessageRequired()?void DialogService.instance().showSimpleDialog("app/view/interstitial/InterstitialMessageDialog.html",this.getInterstitialMessage()).result.then(function(){callback()},function(){MasterService.instance().logout()}):void callback()},InterstitialMessageService.prototype.isInterstitialMessageRequired=function(){if(AppConfig.instance().admin)return!1;var message=this.getInterstitialMessage();return Util.isDefAndNotNull(message)&&Util.isDefAndNotNull(message.text)},InterstitialMessageService.prototype.getInterstitialMessage=function(){var prop=null;MasterService.instance().accountConfiguration&&(prop=MasterService.instance().accountConfiguration[InterstitialMessageService.SYSTEM_USE_NOTIFICATION_MESSAGE_PROPERTY]);var dialogText=null,dialogTitle=null,closeLabel=null;try{var propJSON=JSON.parse(prop);dialogText=propJSON.text,dialogTitle=propJSON.title,closeLabel=propJSON.closeLabel}catch(err){dialogText=Util.isDefAndNotNull(prop)&&prop.trim().length>0?prop:null}return Util.isDefAndNotNull(closeLabel)||(closeLabel=ResourceManager.instance().getString("ui","ms_close")),{text:dialogText,title:dialogTitle,closeLabel:closeLabel}},InterstitialMessageService.SERVICE_NAME="interstitialMessageService",InterstitialMessageService.SYSTEM_USE_NOTIFICATION_MESSAGE_PROPERTY="system.use.notification.message",InterstitialMessageService.$inject=[],InterstitialMessageService}();appdynamicsModule.service(InterstitialMessageService.SERVICE_NAME,InterstitialMessageService),define("app/services/InterstitialMessageService",function(){});var EntityService=function(){function EntityService($q,entityUiService){this.$q=$q,this.entityUiService=entityUiService}return EntityService.instance=function(){return AngularUtil.getADInjector().get(EntityService.SERVICE_NAME)},EntityService.prototype.fetchEntities=function(definitions,callback){var _this=this,rtn=new EntityMap,resultHandler=function(response){for(var entities=_this.entityUiService.getEntities_response(response),i=0;i<definitions.length;i++){var entityDefinition=definitions[i],entity=entities[i];rtn.addEntity(entityDefinition,entity)}callback&&callback()},promise=this.entityUiService.getEntities(definitions);return promise.then(resultHandler),rtn},EntityService.getEntityTypeDisplay=function(entityType){if(!entityType)return"";var formattedString=ResourceManager.instance().getString("ui","ms_entityType_"+entityType);return formattedString?formattedString:StringUtils.formatDelimitedString(entityType,"_",!0)},EntityService.SERVICE_NAME="entityService",EntityService.$inject=["$q","entityUiService"],EntityService}();appdynamicsModule.service("entityService",EntityService);var EntityMap=function(){function EntityMap(){this._entities={}}return EntityMap.prototype.addEntity=function(entityDefinition,entity){null!=entityDefinition&&null!=entity&&(this._entities[this.getKey(entityDefinition)]=entity)},EntityMap.prototype.getEntity=function(entityDefinition){return null==entityDefinition||null==entityDefinition.entityType||isNaN(entityDefinition.entityId)?null:this._entities[this.getKey(entityDefinition)]},EntityMap.prototype.getKey=function(entityDefinition){return entityDefinition.entityType+"."+entityDefinition.entityId},EntityMap}();define("app/services/EntityService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},WidgetBaseController=function(_super){function WidgetBaseController($scope,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.setupEventListeners()}return __extends(WidgetBaseController,_super),WidgetBaseController.prototype.getContainerElement=function(){return this.isAnalyticsWidget()?$("[panel-id='"+this.$scope.adWidgetProperties.id+"']"):this.$scope.adWidgetController.widgetElement},WidgetBaseController.prototype.isAnalyticsWidget=function(){return this.$scope.adWidgetProperties.analytics===!0},WidgetBaseController.prototype.getContainerWidth=function(){return this.getContainerElement().width()},WidgetBaseController.prototype.getContainerHeight=function(){return this.getContainerElement().height()},WidgetBaseController.prototype.isCompactView=function(){return this.getContainerWidth()<ViewUtil.MOBILE_BREAKPOINT},WidgetBaseController.prototype.emit=function(eventName,data){this.$scope.$emit(eventName,data)},WidgetBaseController.prototype.broadcast=function(eventName,data){this.$scope.$broadcast(eventName,data)},WidgetBaseController.prototype.getNewWidgetDataQuery=function(){var widgetDataQuery={},urlParams=this.getCurrentUrlParams();return this.$scope.adWidgetController.isTemplate&&(widgetDataQuery.context=!0),this.injectorService.masterService().isSharedDashboardPageRequestWithToken()&&(widgetDataQuery.token=urlParams.getSharedDashboardToken(),this.$scope.adCurrentDashboard.dashboardUIState.isWarRoom?(widgetDataQuery.dashboardId=0,widgetDataQuery.warRoomKey=this.$scope.adWarRoomKey):widgetDataQuery.dashboardId=this.$scope.adCurrentDashboard.id),widgetDataQuery},WidgetBaseController.prototype.setupEventListeners=function(){var _this=this;this.$scope.$on(CustomDashboardViewService.DASHBOARD_SAVE_EVENT,function(e,data){_this.refreshWidget(e,data)}),this.$scope.$on(AdWidgetController.REFRESH_WIDGET,function(e,data){_this.refreshWidget(e,data)}),this.$scope.$on("$destroy",function(){_this.destroy()}),AngularUtil.watchScopeVariable(this.$scope,"adWidgetProperties",function(){_this.update()})},WidgetBaseController.prototype.refreshWidget=function(e,data){WidgetHelper.isRefreshTargetEqualsCurrentWidget(this.$scope.adWidgetProperties,this.$scope.adCurrentDashboard,data.refreshTarget)&&!this.$scope.adWidgetController.hasWarnings&&this.update()},WidgetBaseController.prototype.update=function(){},WidgetBaseController.prototype.destroy=function(){},WidgetBaseController}(ControllerBase);define("app/view/customDashboard/widgets/WidgetBaseController",function(){});var CustomDashboardUtil=function(){function CustomDashboardUtil(){}return CustomDashboardUtil.getMetricLabelFromWidgetMetricMatchCriteria=function(wmmc){var label=null;if(wmmc){var metricMatchCriteria=wmmc.metricMatchCriteria;if(metricMatchCriteria&&metricMatchCriteria.metricExpression){var metricExpression=metricMatchCriteria.metricExpression;metricExpression&&metricExpression.metricDefinition&&(label=metricExpression.metricDefinition.logicalMetricName),label||(label=metricMatchCriteria.expressionString)}}return label||(label="",ADLoggerService.warn("CustomDashboardUtil.getMetricLabelFromWidgetMetricMatchCriteria - Unable to get metric label for WidgetMetricMatchCriteriaV2 "+JSON.stringify(wmmc))),label},CustomDashboardUtil}();define("app/view/customDashboard2/common/CustomDashboardUtil",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},WidgetControllerBase=function(_super){function WidgetControllerBase($scope,$element){_super.call(this,$scope),this.$scope=$scope,this.$element=$element,this.warnings=[],this.timeRangeDisplay="",this.hasTouch=!1,this.loading=!1,this.templateWidgetMetricsInfo=[],this.$scope.controller=this,this.widget=this.$scope.adWidget,this.setupEventListeners(),this.setupContextMenus(),this.gridStackElement=$(".grid-stack-item-"+this.$scope.adWidget.guid),this.warnings=CustomDashboardViewService.instance().getWarnings(this.widget)}return __extends(WidgetControllerBase,_super),WidgetControllerBase.getWidgetTagForType=function(type){return"ad-widget-"+type.toLocaleLowerCase().replace("_","-")},WidgetControllerBase.setupStyles=function(styles,widget,isAbsolute){if(styles.width="100%",styles.height="100%",styles.color=Util.getColorString(widget.color),styles.cursor=WidgetControllerBase.isMetricBrowserOpenable(widget)||WidgetControllerBase.isUrlOpenable(widget)?"pointer":"",isAbsolute&&widget.type==WidgetType.IMAGE&&(widget.backgroundAlpha=0),styles.border=widget.borderEnabled&&isAbsolute?""+widget.borderThickness+"px solid "+Util.getColorString(widget.borderColor):"",!isNaN(widget.backgroundAlpha)&&widget.backgroundColor){var b=255&widget.backgroundColor,g=widget.backgroundColor>>8&255,r=widget.backgroundColor>>16&255;styles.background="rgba("+r+", "+g+", "+b+", "+widget.backgroundAlpha+")"}else widget.type!=WidgetTypes.IMAGE&&(styles.background=Util.getColorString(widget.backgroundColor))},WidgetControllerBase.isMetricBrowserOpenable=function(widget){if(widget.type===WidgetType.METRIC_LABEL&&widget.useMetricBrowserAsDrillDown)return!0;var hasMetrics=Util.isDefAndNotEmptyArray(widget.widgetsMetricMatchCriterias),isMetricBrowserWidget=_.contains([WidgetType.TIMESERIES_GRAPH,WidgetType.PIE,WidgetType.GAUGE],widget.type);return isMetricBrowserWidget&&widget.useMetricBrowserAsDrillDown&&hasMetrics?!0:!1},WidgetControllerBase.isUrlOpenable=function(widget){var isMetricBrowserWidget=_.contains([WidgetType.TIMESERIES_GRAPH,WidgetType.PIE,WidgetType.GAUGE,WidgetType.METRIC_LABEL],widget.type),isDrilldownUrlOnlyWidget=widget.type===WidgetType.LABEL||widget.type===WidgetType.STATUS_LIGHT;if(isDrilldownUrlOnlyWidget||isMetricBrowserWidget&&!widget.useMetricBrowserAsDrillDown){var drillDownUrl=widget.drillDownUrl;if(null!=drillDownUrl&&drillDownUrl.length>0)return!0}return!1},WidgetControllerBase.prototype.isCompactView=function(){return this.$element.width()<ViewUtil.MOBILE_BREAKPOINT},WidgetControllerBase.prototype.isOverlayShown=function(){return this.hasOverlayMessage()},WidgetControllerBase.prototype.isTitleEmpty=function(){return _.isEmpty(this.$scope.adWidget.title)},WidgetControllerBase.prototype.hasOverlayMessage=function(){return Util.isDefAndNotNull(this.overlayMessage)&&""!==this.overlayMessage},WidgetControllerBase.prototype.getCanvasType=function(){return this.$scope.adDashboard?this.$scope.adDashboard.canvasType:CustomDashBoardCanvasType.CANVAS_TYPE_GRID},WidgetControllerBase.prototype.formatDate=function(timestamp){return DateTimeUtil.getDateTimeString(new Date(timestamp))},WidgetControllerBase.prototype.titleLoaded=function(){return this.$scope.$broadcast(EventConstants.UEV_LAYOUT_CHANGED),!0},WidgetControllerBase.prototype.onEditWidget=function(){var modalSettings={};modalSettings.controllerPath="app/view/customDashboard2/widgetEditor/WidgetEditorDialogController",modalSettings.templateUrl="app/view/customDashboard2/widgetEditor/WidgetEditorDialogView.html",modalSettings.data={widget:this.$scope.adWidget,dashboard:this.$scope.adDashboard,addMode:!1,context:this.$scope.adContext},DialogService.instance().openDialogAsync(modalSettings)},WidgetControllerBase.prototype.onResize=function(){},WidgetControllerBase.prototype.getWarningsStyle=function(){var styles={};return styles["max-height"]=this.gridStackElement.height()-100+"px",styles},WidgetControllerBase.prototype.getQueries=function(){var widget=this.$scope.adWidget,dashboard=this.$scope.adDashboard,context=this.$scope.adContext,trs=CustomDashboardViewService.instance().getComputedTimeRangeForWidget(widget,dashboard),isTemplate=Util.isDefAndNotNull(context),wmmcs=widget.widgetsMetricMatchCriterias;return WidgetControllerBase.DEBUG&&(ADLoggerService.warn("WidgetControllerBase.getQueries Debug: widget\n"+Util.stringifyWithIndent(widget)),ADLoggerService.warn("WidgetControllerBase.getQueries Debug: context\n"+Util.stringifyWithIndent(context)),ADLoggerService.warn("WidgetControllerBase.getQueries Debug: dashboard\n"+Util.stringifyWithIndent(dashboard))),_.map(wmmcs,function(wmmc){var mmc;if(isTemplate?(mmc=angular.copy(wmmc.metricMatchCriteria),mmc.applicationId=context.appId):mmc=wmmc.metricMatchCriteria,isTemplate&&mmc.affectedEntityMatchCriteria){var cmc=mmc.affectedEntityMatchCriteria.componentMatchCriteria;cmc&&(cmc.componentIds=[context.componentId]);var nmc=mmc.affectedEntityMatchCriteria.nodeMatchCriteria;nmc&&(nmc.componentIds=[context.componentId],context.nodeId&&nmc.type!=NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS&&(nmc.nodeIds=[context.nodeId]));var affectedEntityMatchCriteria=mmc.affectedEntityMatchCriteria;affectedEntityMatchCriteria.type===BTAffectedEntityMatchCriteriaType.BTS_OF_SPFICIC_TIERS||affectedEntityMatchCriteria.type===InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS?affectedEntityMatchCriteria.componentIds=[context.componentId]:affectedEntityMatchCriteria.type===ErrorsAffectedEntityMatchCriteriaType.ERRORS_OF_SPECIFIC_TIERS&&(affectedEntityMatchCriteria.componentIds=[context.componentId])}var metricQuery={};return metricQuery.metricMatchCriteria=mmc,metricQuery.timeRangeSpecifier=trs,metricQuery.showRawMetricName=wmmc.showRawMetricName?!0:!1,metricQuery.name=mmc.expressionString,metricQuery})},WidgetControllerBase.prototype.getQueries1=function(){var trs=CustomDashboardViewService.instance().getComputedTimeRangeForWidget(this.$scope.adWidget,this.$scope.adDashboard);return _.map(this.$scope.adWidget.widgetsMetricMatchCriterias,function(widgetMetricCriteria){var metricQuery={};return metricQuery.metricMatchCriteria=widgetMetricCriteria.metricMatchCriteria,metricQuery.timeRangeSpecifier=trs,metricQuery.showRawMetricName=widgetMetricCriteria.showRawMetricName?!0:!1,metricQuery})},WidgetControllerBase.prototype.getNewWidgetDataQuery=function(){var widgetDataQuery={},urlParams=this.getCurrentUrlParams();return this.$scope.adContext&&(widgetDataQuery.context=!0),widgetDataQuery.timeRangeSpecifier=this.getTimeRange(),MasterService.instance().isSharedDashboardPageRequestWithToken()&&(widgetDataQuery.token=urlParams.getSharedDashboardToken(),this.$scope.adDashboard.warRoom?(widgetDataQuery.dashboardId=0,widgetDataQuery.warRoomKey=this.$scope.adDashboard.name):widgetDataQuery.dashboardId=this.$scope.adDashboard.id),widgetDataQuery},WidgetControllerBase.prototype.getTimeRange=function(){return CustomDashboardViewService.instance().getComputedTimeRangeForWidget(this.$scope.adWidget,this.$scope.adDashboard)},WidgetControllerBase.prototype.refreshWidget=function(){var trs=this.getTimeRange();if(this.$scope.adWidget.showTimeRange){var trStr=DateTimeUtil.getTimeRangeString(trs);this.timeRangeDisplay=trStr}else this.timeRangeDisplay=""},WidgetControllerBase.prototype.onTouch=function(){this.hasTouch=!0,this.$element.off("touchstart",this.touchListenerBound)},WidgetControllerBase.prototype.destroy=function(){this.$element.off(MouseEvents.DOUBLE_CLICK,this.doubleClickListener),this.$element.off(MouseEvents.CLICK,this.clickListener),this.$element.off(MouseEvents.TOUCH_START,this.touchListenerBound)},WidgetControllerBase.prototype.setOverlayMessage=function(){return this.isDataSeriesAdded()?void(this.overlayMessage=""):void(this.overlayMessage=this.getString("ms_noSeriesMessage"))},WidgetControllerBase.prototype.onClick=function(){this.hasTouch&&this.onDoubleClick()},WidgetControllerBase.prototype.onDoubleClick=function(){if(Util.isDefAndNotNull(this.$scope.adViewMode)){if(this.$scope.adViewMode===!1)return void this.onEditWidget();if(this.isMetricBrowserDrillDown())this.openMetricBrowserUrl();else{var drillDownUrl=this.$scope.adWidget.drillDownUrl;if(drillDownUrl&&drillDownUrl.length>0){var win=window.open(WebUtil.formatURL(drillDownUrl,!0),"_blank");win&&win.focus()}}}},WidgetControllerBase.prototype.isMetricBrowserDrillDown=function(){var isDrilldownUrlOnlyWidget=this.$scope.adWidget.type===WidgetType.LABEL||this.$scope.adWidget.type===WidgetType.STATUS_LIGHT;return this.$scope.adWidget.useMetricBrowserAsDrillDown&&!isDrilldownUrlOnlyWidget},WidgetControllerBase.prototype.storeMetricDefinitions=function(chartData){var metricsInfo=[];return _.each(chartData,function(seriesData){_.each(seriesData,function(metricData){if(Util.isDefAndNotNull(metricData.metricDefinition)){var metricsData=_.findWhere(metricsInfo,{appId:metricData.applicationId});metricsData?metricsData.metricDefinitions.push(metricData.metricDefinition):(metricsData={appId:metricData.applicationId},metricsData.metricDefinitions=[metricData.metricDefinition],metricsInfo.push(metricsData))}})}),metricsInfo},WidgetControllerBase.prototype.openMetricBrowserUrl=function(){var widgetGuid=this.$scope.adWidget.guid,currentDashboard=this.$scope.adDashboard,dashboardId=currentDashboard.id;if(this.$scope.adWidget.useMetricBrowserAsDrillDown){var trs=CustomDashboardViewService.instance().getComputedTimeRangeForWidget(this.widget,this.$scope.adDashboard);
if(currentDashboard.template||currentDashboard.warRoom)_.isEmpty(this.templateWidgetMetricsInfo)||_.isEmpty(this.templateWidgetMetricsInfo[0].metricDefinitions)?this.notificationService.displayError(this.getString("ms_noWidgetMetrics"),""):this.templateWidgetMetricsInfo.map(function(metricData){CustomDashboardViewService.instance().openMetricBrowser(metricData.appId,metricData.metricDefinitions,trs,currentDashboard)});else{var appIds=[];this.$scope.adWidget.widgetsMetricMatchCriterias.map(function(wmmc){null!=wmmc.metricMatchCriteria&&$.inArray(wmmc.metricMatchCriteria.applicationId,appIds)<0&&widgetGuid==wmmc.widgetGuid&&appIds.push(wmmc.metricMatchCriteria.applicationId)}),appIds.map(function(appId){MetricBrowserHelper.instance().getMetricDefinitionsAndOpenMetricBrowser(appId,dashboardId,trs,widgetGuid,currentDashboard)})}}},WidgetControllerBase.prototype.isDataSeriesAdded=function(){var wmmcList=this.$scope.adWidget.widgetsMetricMatchCriterias;return!_.isArray(wmmcList)||_.isArray(wmmcList)&&0===wmmcList.length?!1:!0},WidgetControllerBase.prototype.hasMetricMatchCriterias=function(){return this.$scope.adWidget.widgetsMetricMatchCriterias&&this.$scope.adWidget.widgetsMetricMatchCriterias.length>0},WidgetControllerBase.prototype.setupEventListeners=function(){this.$scope.$on("$destroy",this.destroy.bind(this)),this.$scope.$on(WidgetControllerBase.REFRESH_WIDGET_DATA,this.refreshWidget.bind(this)),this.doubleClickListener=this.onDoubleClick.bind(this),this.clickListener=this.onClick.bind(this),this.touchListenerBound=this.onTouch.bind(this),this.$element.on(MouseEvents.DOUBLE_CLICK,this.doubleClickListener),this.$element.on(MouseEvents.CLICK,this.clickListener),this.$element.on(MouseEvents.TOUCH_START,this.touchListenerBound)},WidgetControllerBase.prototype.setupContextMenus=function(){var _this=this;this.$element.on(MouseEvents.CONTEXT_MENU,function(event){_this.$scope.$emit(WidgetControllerBase.WIDGET_CONTEXT_MENU,event,_this.$element)})},WidgetControllerBase.DEBUG=!1,WidgetControllerBase.WIDGET_ICON="",WidgetControllerBase.WIDGET_ICON_HOVER="",WidgetControllerBase.WIDGET_NAME="Base Widget",WidgetControllerBase.WIDGET_TYPE=null,WidgetControllerBase.WIDGET_GRID_SIZE=new Size(4,2),WidgetControllerBase.WIDGET_ABSOLUTE_SIZE=new Size(300,200),WidgetControllerBase.REFRESH_WIDGET_DATA="REFRESH_WIDGET_DATA",WidgetControllerBase.WIDGET_CONTEXT_MENU="WIDGET_CONTEXT_MENU",WidgetControllerBase.$inject=["$scope","$element"],WidgetControllerBase}(ControllerBase);define("app/view/customDashboard2/widgets/WidgetControllerBase",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},WidgetEditorControllerBase=function(_super){function WidgetEditorControllerBase($scope,$element){var _this=this;_super.call(this,$scope),this.$scope=$scope,this.$element=$element,this.$scope.controller=this,this.updateWidgetThrottled=Util.getThrottledFunction(function(){_this.$scope.adWidgetUpdated()},2e3)}return __extends(WidgetEditorControllerBase,_super),WidgetEditorControllerBase.getWidgetEditorTagForType=function(type){return"ad-widget-editor-"+type.toLocaleLowerCase().replace("_","-")},WidgetEditorControllerBase.widgetEditorDirectiveExists=function(directiveName){var camelName=StringUtils.toCamelCase(directiveName+AngularUtil.DIRECTIVE_SUFFIX);return AngularUtil.getADInjector().has(camelName)},WidgetEditorControllerBase.prototype.isGridCanvas=function(){return this.$scope.adDashboard&&this.$scope.adDashboard.canvasType==CustomDashBoardCanvasType.CANVAS_TYPE_GRID},WidgetEditorControllerBase.prototype.onPropertyUpdate=function(){this.updateWidgetThrottled()},WidgetEditorControllerBase}(ControllerBase);define("app/view/customDashboard2/widgetEditor/WidgetEditorControllerBase",function(){}),define("app/view/customDashboard2/widgets/IWidgetScope",function(){}),function(factory){factory(jQuery,_)}(function($,_){var scope=window,Utils={is_intercepted:function(a,b){return!(a.x+a.width<=b.x||b.x+b.width<=a.x||a.y+a.height<=b.y||b.y+b.height<=a.y)},sort:function(nodes,dir,width){return width=width||_.chain(nodes).map(function(node){return node.x+node.width}).max().value(),dir=-1!=dir?1:-1,_.sortBy(nodes,function(n){return dir*(n.x+n.y*width)})},create_stylesheet:function(id){var style=document.createElement("style");return style.setAttribute("type","text/css"),style.setAttribute("data-gs-id",id),style.styleSheet?style.styleSheet.cssText="":style.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(style),style.sheet},insert_css_rule:function(sheet,selector,rules,index){"function"==typeof sheet.insertRule?sheet.insertRule(selector+"{"+rules+"}",index):"function"==typeof sheet.addRule&&sheet.addRule(selector,rules,index)},toBool:function(v){return"boolean"==typeof v?v:"string"==typeof v?(v=v.toLowerCase(),!(""==v||"no"==v||"false"==v||"0"==v)):Boolean(v)}},id_seq=0,GridStackEngine=function(width,onchange,float,height,items){this.width=width,this.float=float||!1,this.height=height||0,this.nodes=items||[],this.onchange=onchange||function(){},this._update_counter=0,this._float=this.float};GridStackEngine.prototype.batch_update=function(){this._update_counter=1,this.float=!0},GridStackEngine.prototype.commit=function(){this._update_counter=0,0==this._update_counter&&(this.float=this._float,this._pack_nodes(),this._notify())},GridStackEngine.prototype._fix_collisions=function(node){this._sort_nodes(-1);var nn=node,has_locked=Boolean(_.find(this.nodes,function(n){return n.locked}));for(this.float||has_locked||(nn={x:0,y:node.y,width:this.width,height:node.height});;){var collision_node=_.find(this.nodes,function(n){return n!=node&&Utils.is_intercepted(n,nn)},this);if("undefined"==typeof collision_node)return;this.move_node(collision_node,collision_node.x,node.y+node.height,collision_node.width,collision_node.height,!0)}},GridStackEngine.prototype.is_area_empty=function(x,y,width,height){var nn={x:x||0,y:y||0,width:width||1,height:height||1},collision_node=_.find(this.nodes,function(n){return Utils.is_intercepted(n,nn)},this);return null==collision_node},GridStackEngine.prototype._sort_nodes=function(dir){this.nodes=Utils.sort(this.nodes,dir,this.width)},GridStackEngine.prototype._pack_nodes=function(){this._sort_nodes(),this.float?_.each(this.nodes,function(n){if(!n._updating&&"undefined"!=typeof n._orig_y&&n.y!=n._orig_y)for(var new_y=n.y;new_y>=n._orig_y;){var collision_node=_.chain(this.nodes).find(function(bn){return n!=bn&&Utils.is_intercepted({x:n.x,y:new_y,width:n.width,height:n.height},bn)}).value();collision_node||(n._dirty=!0,n.y=new_y),--new_y}},this):_.each(this.nodes,function(n,i){if(!n.locked)for(;n.y>0;){var new_y=n.y-1,can_be_moved=0==i;if(i>0){var collision_node=_.chain(this.nodes).take(i).find(function(bn){return Utils.is_intercepted({x:n.x,y:new_y,width:n.width,height:n.height},bn)}).value();can_be_moved="undefined"==typeof collision_node}if(!can_be_moved)break;n._dirty=n.y!=new_y,n.y=new_y}},this)},GridStackEngine.prototype._prepare_node=function(node,resizing){return node=_.defaults(node||{},{width:1,height:1,x:0,y:0}),node.x=parseInt(""+node.x),node.y=parseInt(""+node.y),node.width=parseInt(""+node.width),node.height=parseInt(""+node.height),node.auto_position=node.auto_position||!1,node.no_resize=node.no_resize||!1,node.no_move=node.no_move||!1,node.width>this.width?node.width=this.width:node.width<1&&(node.width=1),node.height<1&&(node.height=1),node.x<0&&(node.x=0),node.x+node.width>this.width&&(resizing?node.width=this.width-node.x:node.x=this.width-node.width),node.y<0&&(node.y=0),node},GridStackEngine.prototype._notify=function(){if(!this._update_counter){var deleted_nodes=Array.prototype.slice.call(arguments,1).concat(this.get_dirty_nodes());deleted_nodes=deleted_nodes.concat(this.get_dirty_nodes()),this.onchange(deleted_nodes)}},GridStackEngine.prototype.clean_nodes=function(){_.each(this.nodes,function(n){n._dirty=!1})},GridStackEngine.prototype.get_dirty_nodes=function(){return _.filter(this.nodes,function(n){return n._dirty})},GridStackEngine.prototype.add_node=function(node){if(node=this._prepare_node(node),"undefined"!=typeof node.max_width&&(node.width=Math.min(node.width,node.max_width)),"undefined"!=typeof node.max_height&&(node.height=Math.min(node.height,node.max_height)),"undefined"!=typeof node.min_width&&(node.width=Math.max(node.width,node.min_width)),"undefined"!=typeof node.min_height&&(node.height=Math.max(node.height,node.min_height)),node._id=++id_seq,node._dirty=!0,node.auto_position){this._sort_nodes();for(var i=0;;++i){var x=i%this.width,y=Math.floor(i/this.width);if(!(x+node.width>this.width||_.find(this.nodes,function(n){return Utils.is_intercepted({x:x,y:y,width:node.width,height:node.height},n)}))){node.x=x,node.y=y;break}}}return this.nodes.push(node),this._fix_collisions(node),this._pack_nodes(),this._notify(),node},GridStackEngine.prototype.remove_node=function(node){node._id=null,this.nodes=_.without(this.nodes,node),this._pack_nodes(),this._notify(node)},GridStackEngine.prototype.can_move_node=function(node,x,y,width,height){var has_locked=Boolean(_.find(this.nodes,function(n){return n.locked}));if(!this.height&&!has_locked)return!0;var cloned_node,clone=new GridStackEngine(this.width,null,this.float,0,_.map(this.nodes,function(n){return n==node?cloned_node=$.extend({},n):$.extend({},n)}));clone.move_node(cloned_node,x,y,width,height);var res=!0;return has_locked&&(res&=!Boolean(_.find(clone.nodes,function(n){return n!=cloned_node&&Boolean(n.locked)&&Boolean(n._dirty)}))),this.height&&(res&=clone.get_grid_height()<=this.height),res},GridStackEngine.prototype.can_be_placed_with_respect_to_height=function(node){if(!this.height)return!0;var clone=new GridStackEngine(this.width,null,this.float,0,_.map(this.nodes,function(n){return $.extend({},n)}));return clone.add_node(node),clone.get_grid_height()<=this.height},GridStackEngine.prototype.move_node=function(node,x,y,width,height,no_pack){if("number"!=typeof x&&(x=node.x),"number"!=typeof y&&(y=node.y),"number"!=typeof width&&(width=node.width),"number"!=typeof height&&(height=node.height),"undefined"!=typeof node.max_width&&(width=Math.min(width,node.max_width)),"undefined"!=typeof node.max_height&&(height=Math.min(height,node.max_height)),"undefined"!=typeof node.min_width&&(width=Math.max(width,node.min_width)),"undefined"!=typeof node.min_height&&(height=Math.max(height,node.min_height)),node.x==x&&node.y==y&&node.width==width&&node.height==height)return node;var resizing=node.width!=width;return node._dirty=!0,node.x=x,node.y=y,node.width=width,node.height=height,node=this._prepare_node(node,resizing),this._fix_collisions(node),no_pack||(this._pack_nodes(),this._notify()),node},GridStackEngine.prototype.get_grid_height=function(){return _.reduce(this.nodes,function(memo,n){return Math.max(memo,n.y+n.height)},0)},GridStackEngine.prototype.begin_update=function(node){_.each(this.nodes,function(n){n._orig_y=n.y}),node._updating=!0},GridStackEngine.prototype.end_update=function(){_.each(this.nodes,function(n){n._orig_y=n.y});var n=_.find(this.nodes,function(n){return n._updating});n&&(n._updating=!1)};var GridStack=function(el,opts){var one_column_mode,self=this;this.container=$(el),opts.item_class=opts.item_class||"grid-stack-item";var is_nested=this.container.closest("."+opts.item_class).size()>0;if(this.opts=_.defaults(opts||{},{width:parseInt(this.container.attr("data-gs-width"))||12,height:parseInt(this.container.attr("data-gs-height"))||0,item_class:"grid-stack-item",placeholder_class:"grid-stack-placeholder",handle:".grid-stack-item-content",cell_height:60,vertical_margin:20,auto:!0,min_width:768,"float":!1,_class:"grid-stack-"+(1e4*Math.random()).toFixed(0),animate:Boolean(this.container.attr("data-gs-animate"))||!1,always_show_resize_handle:opts.always_show_resize_handle||!1,resizable:_.defaults(opts.resizable||{},{autoHide:!opts.always_show_resize_handle,handles:"se"}),draggable:_.defaults(opts.draggable||{},{handle:".grid-stack-item-content",scroll:!1,appendTo:"body"})}),this.opts.is_nested=is_nested,this.container.addClass(this.opts._class),is_nested&&this.container.addClass("grid-stack-nested"),this._init_styles(),this.grid=new GridStackEngine(this.opts.width,function(nodes){var max_height=0;_.each(nodes,function(n){null==n._id?n.el.remove():(n.el.attr("data-gs-x",n.x).attr("data-gs-y",n.y).attr("data-gs-width",n.width).attr("data-gs-height",n.height),max_height=Math.max(max_height,n.y+n.height))}),self._update_styles(max_height+10)},this.opts.float,this.opts.height),this.opts.auto){var elements=[],_this=this;this.container.children("."+this.opts.item_class).each(function(index,el){el=$(el),elements.push({el:el,i:parseInt(el.attr("data-gs-x"))+parseInt(el.attr("data-gs-y"))*_this.opts.width})}),_.chain(elements).sortBy(function(x){return x.i}).each(function(i){self._prepare_element(i.el)}).value()}this.set_animation(this.opts.animate),this.placeholder=$('<div class="'+this.opts.placeholder_class+" "+this.opts.item_class+'"><div class="placeholder-content" /></div>').hide(),this.container.height(this.grid.get_grid_height()*(this.opts.cell_height+this.opts.vertical_margin)-this.opts.vertical_margin);var on_resize_handler=function(){if(self._is_one_column_mode()){if(one_column_mode)return;one_column_mode=!0,self.grid._sort_nodes(),_.each(self.grid.nodes,function(node){self.container.append(node.el),node.no_move||node.el.draggable("disable"),node.no_resize||node.el.resizable("disable")})}else{if(!one_column_mode)return;one_column_mode=!1,_.each(self.grid.nodes,function(node){node.no_move||node.el.draggable("enable"),node.no_resize||node.el.resizable("enable")})}};$(window).resize(on_resize_handler),on_resize_handler()};return GridStack.prototype._init_styles=function(){this._styles_id&&$('[data-gs-id="'+this._styles_id+'"]').remove(),this._styles_id="gridstack-style-"+(1e5*Math.random()).toFixed(),this._styles=Utils.create_stylesheet(this._styles_id),null!=this._styles&&(this._styles._max=0)},GridStack.prototype._update_styles=function(max_height){if(null!=this._styles){var prefix="."+this.opts._class+" ."+this.opts.item_class;if("undefined"==typeof max_height&&(max_height=this._styles._max,this._init_styles(),this._update_container_height()),0==this._styles._max&&Utils.insert_css_rule(this._styles,prefix,"min-height: "+this.opts.cell_height+"px;",0),max_height>this._styles._max){for(var i=this._styles._max;max_height>i;++i)Utils.insert_css_rule(this._styles,prefix+'[data-gs-height="'+(i+1)+'"]',"height: "+(this.opts.cell_height*(i+1)+this.opts.vertical_margin*i)+"px;",i),Utils.insert_css_rule(this._styles,prefix+'[data-gs-min-height="'+(i+1)+'"]',"min-height: "+(this.opts.cell_height*(i+1)+this.opts.vertical_margin*i)+"px;",i),Utils.insert_css_rule(this._styles,prefix+'[data-gs-max-height="'+(i+1)+'"]',"max-height: "+(this.opts.cell_height*(i+1)+this.opts.vertical_margin*i)+"px;",i),Utils.insert_css_rule(this._styles,prefix+'[data-gs-y="'+i+'"]',"top: "+(this.opts.cell_height*i+this.opts.vertical_margin*i)+"px;",i);this._styles._max=max_height}}},GridStack.prototype._update_container_height=function(){this.grid._update_counter||this.container.height(this.grid.get_grid_height()*(this.opts.cell_height+this.opts.vertical_margin)-this.opts.vertical_margin)},GridStack.prototype._is_one_column_mode=function(){return(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=this.opts.min_width},GridStack.prototype._prepare_element=function(el){var self=this;el=$(el),el.addClass(this.opts.item_class);var node=self.grid.add_node({x:el.attr("data-gs-x"),y:el.attr("data-gs-y"),width:el.attr("data-gs-width"),height:el.attr("data-gs-height"),max_width:el.attr("data-gs-max-width"),min_width:el.attr("data-gs-min-width"),max_height:el.attr("data-gs-max-height"),min_height:el.attr("data-gs-min-height"),auto_position:Utils.toBool(el.attr("data-gs-auto-position")),no_resize:Utils.toBool(el.attr("data-gs-no-resize")),no_move:Utils.toBool(el.attr("data-gs-no-move")),locked:Utils.toBool(el.attr("data-gs-locked")),el:el});el.data("_gridstack_node",node);var cell_width,cell_height,on_start_moving=function(){self.container.append(self.placeholder);var o=$(this);self.grid.clean_nodes(),self.grid.begin_update(node),cell_width=Math.ceil(o.outerWidth()/o.attr("data-gs-width")),cell_height=self.opts.cell_height+self.opts.vertical_margin,self.placeholder.attr("data-gs-x",o.attr("data-gs-x")).attr("data-gs-y",o.attr("data-gs-y")).attr("data-gs-width",o.attr("data-gs-width")).attr("data-gs-height",o.attr("data-gs-height")).show(),node.el=self.placeholder,el.resizable("option","minWidth",cell_width*(node.min_width||1)),el.resizable("option","minHeight",self.opts.cell_height*(node.min_height||1))},on_end_moving=function(){self.placeholder.detach();var o=$(this);node.el=o,self.placeholder.hide(),o.attr("data-gs-x",node.x).attr("data-gs-y",node.y).attr("data-gs-width",node.width).attr("data-gs-height",node.height).removeAttr("style"),self._update_container_height();var elements=self.grid.get_dirty_nodes();elements&&elements.length&&self.container.trigger("change",[elements]),self.grid.end_update()};el.draggable(_.extend(this.opts.draggable,{start:on_start_moving,stop:on_end_moving,drag:function(event,ui){var x=Math.round(ui.position.left/cell_width),y=Math.floor((ui.position.top+cell_height/2)/cell_height);self.grid.can_move_node(node,x,y,node.width,node.height)&&(self.grid.move_node(node,x,y),self._update_container_height())},containment:this.opts.is_nested?this.container.parent():null})).resizable(_.extend(this.opts.resizable,{start:on_start_moving,stop:on_end_moving,resize:function(event,ui){var x=Math.round(ui.position.left/cell_width),y=Math.floor((ui.position.top+cell_height/2)/cell_height),width=Math.round(ui.size.width/cell_width),height=Math.round(ui.size.height/cell_height);self.grid.can_move_node(node,x,y,width,height)&&(self.grid.move_node(node,x,y,width,height),self._update_container_height())}})),(node.no_move||this._is_one_column_mode())&&el.draggable("disable"),(node.no_resize||this._is_one_column_mode())&&el.resizable("disable"),el.attr("data-gs-locked",node.locked?"yes":null)},GridStack.prototype.set_animation=function(enable){enable?this.container.addClass("grid-stack-animate"):this.container.removeClass("grid-stack-animate")},GridStack.prototype.add_widget=function(el,x,y,width,height,auto_position){return el=$(el),"undefined"!=typeof x&&el.attr("data-gs-x",x),"undefined"!=typeof y&&el.attr("data-gs-y",y),"undefined"!=typeof width&&el.attr("data-gs-width",width),"undefined"!=typeof height&&el.attr("data-gs-height",height),"undefined"!=typeof auto_position&&el.attr("data-gs-auto-position",auto_position?"yes":null),this.container.append(el),this._prepare_element(el),this._update_container_height(),el},GridStack.prototype.will_it_fit=function(x,y,width,height,auto_position){var node={x:x,y:y,width:width,height:height,auto_position:auto_position};return this.grid.can_be_placed_with_respect_to_height(node)},GridStack.prototype.remove_widget=function(el,detach_node){detach_node="undefined"==typeof detach_node?!0:detach_node,el=$(el);var node=el.data("_gridstack_node");this.grid.remove_node(node),el.removeData("_gridstack_node"),this._update_container_height(),detach_node&&el.remove()},GridStack.prototype.remove_all=function(detach_node){_.each(this.grid.nodes,function(node){this.remove_widget(node.el,detach_node)},this),this.grid.nodes=[],this._update_container_height()},GridStack.prototype.resizable=function(el,val){return el=$(el),el.each(function(index,el){el=$(el);var node=el.data("_gridstack_node");"undefined"!=typeof node&&null!=node&&(node.no_resize=!val,el.resizable(node.no_resize?"disable":"enable"))}),this},GridStack.prototype.movable=function(el,val){return el=$(el),el.each(function(index,el){el=$(el);var node=el.data("_gridstack_node");"undefined"!=typeof node&&null!=node&&(node.no_move=!val,el.draggable(node.no_move?"disable":"enable"))}),this},GridStack.prototype.disable=function(){this.movable(this.container.children("."+this.opts.item_class),!1),this.resizable(this.container.children("."+this.opts.item_class),!1)},GridStack.prototype.enable=function(){this.movable(this.container.children("."+this.opts.item_class),!0),this.resizable(this.container.children("."+this.opts.item_class),!0)},GridStack.prototype.locked=function(el,val){return el=$(el),el.each(function(index,el){el=$(el);var node=el.data("_gridstack_node");"undefined"!=typeof node&&null!=node&&(node.locked=val||!1,el.attr("data-gs-locked",node.locked?"yes":null))}),this},GridStack.prototype._update_element=function(el,callback){el=$(el).first();var node=el.data("_gridstack_node");if("undefined"!=typeof node&&null!=node){var self=this;self.grid.clean_nodes(),self.grid.begin_update(node),callback.call(this,el,node),self._update_container_height();var elements=self.grid.get_dirty_nodes();elements&&elements.length&&self.container.trigger("change",[elements]),self.grid.end_update()}},GridStack.prototype.resize=function(el,width,height){this._update_element(el,function(el,node){width=null!=width&&"undefined"!=typeof width?width:node.width,height=null!=height&&"undefined"!=typeof height?height:node.height,this.grid.move_node(node,node.x,node.y,width,height)})},GridStack.prototype.move=function(el,x,y){this._update_element(el,function(el,node){x=null!=x&&"undefined"!=typeof x?x:node.x,y=null!=y&&"undefined"!=typeof y?y:node.y,this.grid.move_node(node,x,y,node.width,node.height)})},GridStack.prototype.update=function(el,x,y,width,height){this._update_element(el,function(el,node){x=null!=x&&"undefined"!=typeof x?x:node.x,y=null!=y&&"undefined"!=typeof y?y:node.y,width=null!=width&&"undefined"!=typeof width?width:node.width,height=null!=height&&"undefined"!=typeof height?height:node.height,this.grid.move_node(node,x,y,width,height)})},GridStack.prototype.cell_height=function(val){return"undefined"==typeof val?this.opts.cell_height:(val=parseInt(val),void(val!=this.opts.cell_height&&(this.opts.cell_height=val||this.opts.cell_height,this._update_styles())))},GridStack.prototype.cell_width=function(){var o=this.container.children("."+this.opts.item_class).first();return Math.ceil(o.outerWidth()/o.attr("data-gs-width"))},GridStack.prototype.get_cell_from_pixel=function(position){var containerPos=this.container.position(),relativeLeft=position.left-containerPos.left,relativeTop=position.top-containerPos.top,column_width=Math.floor(this.container.width()/this.opts.width),row_height=this.opts.cell_height+this.opts.vertical_margin;return{x:Math.floor(relativeLeft/column_width),y:Math.floor(relativeTop/row_height)}},GridStack.prototype.batch_update=function(){this.grid.batch_update()},GridStack.prototype.commit=function(){this.grid.commit(),this._update_container_height()},GridStack.prototype.is_area_empty=function(x,y,width,height){return this.grid.is_area_empty(x,y,width,height)},scope.GridStackUI=GridStack,scope.GridStackUI.Utils=Utils,$.fn.gridstack=function(opts){return this.each(function(){$(this).data("gridstack")||$(this).data("gridstack",new GridStack(this,opts))})},scope.GridStackUI}),define("lib/gridstack/gridstack",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},CustomDashboardEditorController=function(_super){function CustomDashboardEditorController($scope,$rootScope,$location,resourceManager,$dialog,notificationService,dashboardService,dashboardHelper,userUiService,$window,$timeout,uiData,userPreferenceUiService,userService,customDashboardViewService,dashboardLiveUpdateService,dashboardShareService){function hidePropertiesPanel(){dashboardHelper.rescaleHighcharts(300)}function selectWidgets(widgetGuids){_.forEach(widgetGuids,function(widgetGuid){var widget=$("[ad-widget-guid="+widgetGuid+"]");tempSelf.selectWidget(widget)})}function refreshWidgetSave(widgetGuid){tempSelf.save(!0,widgetGuid)}function updateUrlLocation(mode){var params=new URLParams($location.path());params.setParam(UrlConstants.CUSTOM_DASHBOARD_MODE,mode),URLUtil.setLocationHashNoHistory(params.toString())}function hasDashboardUIState(){return null!=$scope.currentDashboard&&null!=$scope.currentDashboard.dashboardUIState}var _this=this;_super.call(this,$scope,$rootScope,$location,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.$dialog=$dialog,this.notificationService=notificationService,this.dashboardService=dashboardService,this.dashboardHelper=dashboardHelper,this.userUiService=userUiService,this.$window=$window,this.$timeout=$timeout,this.uiData=uiData,this.userPreferenceUiService=userPreferenceUiService,this.userService=userService,this.customDashboardViewService=customDashboardViewService,this.dashboardLiveUpdateService=dashboardLiveUpdateService,this.dashboardShareService=dashboardShareService,this.savedDrillDownType=null,this.pageX=-1,this.pageY=-1,this.ignorePropertyChanges=!1,this.widgetDefaults={LABEL:{text:"Dashboard label",width:200,height:50},METRIC_LABEL:{minutesBeforeAnchorTime:15,width:200,height:100,useAutomaticFontSize:!0,isGlobal:!0},LIST:{minutesBeforeAnchorTime:15,useTimeline:!1,backgroundColor:16777215,isGlobal:!0},LOG_TAIL:{path:""},PIE:{minutesBeforeAnchorTime:15,isGlobal:!0,backgroundColors:[16777215,16777215],compactMode:!1,showLegend:!0,legendPosition:LegendPosition.POSITION_RIGHT,showLabels:!0,showValues:!0,showTimeRange:!1,renderIn3D:!1,legendColumnCount:1},GAUGE:{useMinMaxValues:!1,minValue:0,maxValue:1e3,minutesBeforeAnchorTime:15,isGlobal:!0,backgroundColors:[16777215,16777215],showLabels:!0,showValues:!0,showTimeRange:!1,renderIn3D:!1},STATUS_LIGHT:{width:200,height:200,isGlobal:!0},IMAGE:{width:150,height:50},TIMESERIES_GRAPH:{minutesBeforeAnchorTime:15,isGlobal:!0,backgroundColors:[16777215,16777215],compactMode:!1,showLegend:!0,legendPosition:LegendPosition.POSITION_BOTTOM,axisType:GraphAxisType.LINEAR,showTimeRange:!1,renderIn3D:!1,legendColumnCount:1},STREAMING_GRAPH:{minutesBeforeAnchorTime:15,isGlobal:!0,backgroundColors:[16777215,16777215],compactMode:!1,showLegend:!0,legendPosition:LegendPosition.POSITION_BOTTOM,axisType:GraphAxisType.LINEAR,showTimeRange:!1,renderIn3D:!1,legendColumnCount:1}},this.isSaving=!1,this.debouncedCursorReset=_.debounce(function(){0===$(".ui-resizable-resizing").length&&$("body").css({cursor:""})},400),this.gridsterOpts={floating:this.$scope.editMode,margins:[10,10],columns:12,minRows:0,mobileModeEnabled:!1,draggable:{enabled:this.$scope.editMode,start:function(event){_this.pageX=event.pageX,_this.pageY=event.pageY},stop:function(event){(event.pageX!==_this.pageX||event.pageY!==_this.pageY)&&_this.autosave()}},resizable:{enabled:this.$scope.editMode,resize:function(){_this.onGridsterResize()}}},this.gridsterDataMap={sizeX:"widget.width",sizeY:"widget.height",col:"widget.x",row:"widget.y"},this.customDashboardMobilePreviewIcon=ImageUtil.customDashboardMobilePreview,this.addWidgetThrottle=_.throttle(this.addWidget,500,{trailing:!1}),this._onResizeThrottled=null;var tempSelf=this;$scope.controller=this,$scope.uiData=uiData.getData(this.isTemplate(),this.isNodeTemplate());var cmOptions={};if(cmOptions.disableDefaultContextMenu=!0,cmOptions.items=[],$scope.contextMenuOptions=cmOptions,$scope.showGridWidgetProperties=this.isAbsoluteCanvas()||this.isWarRoom()?!1:!0,$scope.displayType=CustomDashBoardDisplayType.DESKTOP,$scope.CustomDashBoardDisplayType=CustomDashBoardDisplayType,$scope.editMode=!1,$scope.selectedWidgetProperties={},$scope.propertiesPanel={},$scope.selectedWidgetType="NONE",$scope.autoSaving=!1,$scope.widgetSelected=!1,$scope.gridstackEnabled=!1,$scope.gridstackNewWidgets={},this.setGridSettings(),$scope.isGridWidgetPropertiesShown=function(){return $scope.showGridWidgetProperties},$scope.$on(ADPropertiesPanel.HIDE_PROPERTIES_PANEL,hidePropertiesPanel),$scope.$on(EventConstants.UEV_LAYOUT_CHANGED,this.gridCanvasUpdater.bind(this)),$scope.onHandleRefresh=function(){customDashboardViewService.refreshAllWidgets()},$scope.isWidgetSelected=function(){return tempSelf.getSelectedWidgets().length>0},$scope.deleteWidget=function(widgetGuid){dashboardHelper.deleteWidget($scope.currentDashboard,widgetGuid),$scope.autoSave(),ViewUtil.safeApply($scope)},this.boundDelete=this.handleDelete.bind(this),this.boundMove=this.handleDelete.bind(this),$("html").on("keydown",this.boundDelete),$("html").on("keydown",this.boundMove),this.boundShiftSelect=function(e){$scope.editMode&&16==e.keyCode&&!tempSelf.isTargetExcludedFromKeydownEventListener(e)&&("keydown"==e.type&&(_this.shiftSelect=!0),"keyup"==e.type&&(_this.shiftSelect=!1))},$("html").on("keydown",this.boundShiftSelect),$("html").on("keyup",this.boundShiftSelect),$scope.gridstackEnabled)var widgetWatcherOnce=$scope.$watch("currentDashboard.dashboardUIState.widgets",function(newVal){newVal&&(newVal.push=function(manuallyPushedWidget){return tempSelf.$scope.gridstackNewWidgets[manuallyPushedWidget.widgetGuid]=!0,Array.prototype.push.apply(this,arguments)},widgetWatcherOnce())});$scope.$watch("editorSettings.snapToGrid",function(curVal,prevVal){var selectedWidgetGuids;curVal!=prevVal&&(selectedWidgetGuids=tempSelf.getSelectedWidgetGuids(),tempSelf.unselectAllWidgets(),selectWidgets(selectedWidgetGuids))}),$scope.deselectWidget=function(evt){0===$(evt.target).parents(".selected-widget").length&&(tempSelf.unselectAllWidgets(),$scope.selectedWidgetType="NONE")},$scope.getString=function(str){return resourceManager.getString("ui",str)},$scope.handleExport=function(){dashboardHelper.handleExport($scope.dashboardId)},$scope.handleSave=function(){_this.save()},$scope.setupAutoSave=function(interval){_this.throttler=_.throttle(refreshWidgetSave,interval,{leading:!1})},$scope.setupAutoSave(DashboardHelper.AUTO_SAVE_TROTTLE_MILIS),$scope.autoSave=function(widgetGuid){void 0===widgetGuid&&(widgetGuid=null),$scope.isAutoSaveScheduled=!0,widgetGuid&&$rootScope.$broadcast(CustomDashboardViewService.DASHBOARD_SAVE_EVENT,{refreshTarget:widgetGuid});var args=arguments;_.defer(function(){_this.throttler.apply(_this,args)})},$scope.getDashboardName=function(){var dashboardName=Util.get($scope.currentDashboard,"name")||"";return $scope.isAutoSaveScheduled?"* "+dashboardName:dashboardName},$scope.hasMetricLabel=function(){return $scope.currentDashboard?dashboardHelper.hasMetricLabel($scope.currentDashboard,$scope.selectedWidgetProperties.widgetGuid):!1},$scope.getMetricLabel=function(){return $scope.currentDashboard?dashboardHelper.getMetricLabel($scope.currentDashboard,$scope.selectedWidgetProperties.widgetGuid):""},$scope.handleEditDashboard=function(){if($scope.gridstackEnabled){var grid=$(".gridster-container").data("gridstack");grid&&grid.enable()}return $scope.showGridWidgetProperties=_this.isWarRoom()?!1:!0,_this.isGridCanvas()&&$scope.displayType===CustomDashBoardDisplayType.MOBILE?($scope.displayType=CustomDashBoardDisplayType.DESKTOP,void $timeout(function(){$scope.handleEditDashboard()},100)):($scope.editMode=!0,dashboardHelper.rescaleHighcharts(300),_this.gridsterOpts.floating=!0,_this.setGridEditable(!0),$scope.selectedWidgetType="NONE",_this.enableMultiSelect(!0),void updateUrlLocation(CustomDashboardEditorController.MODE_EDIT))},$scope.handleEditProperties=function(){var opts={mode:CDPropertiesDialogController.EDIT_MODE,backdrop:!0,keyboard:!0,controller:CDPropertiesDialogController,templateUrl:"app/view/customDashboard/editor/dialogs/CDPropertiesDialog.html",dialogClass:"modal",dashboard:$scope.currentDashboard},dlg=$dialog.dialog(opts);dlg.open()},$scope.handleViewDashboard=function(){if($scope.gridstackEnabled){var grid=$(".gridster-container").data("gridstack");grid&&grid.disable()}$scope.showGridWidgetProperties=!1,$scope.handleSave(),_this.unselectAllWidgets(),$scope.editMode=!1,_this.gridsterOpts.floating=!1,_this.setGridEditable(!1),_this.enableMultiSelect(!1),updateUrlLocation(CustomDashboardEditorController.MODE_VIEW),_this.isGridCanvas()&&hidePropertiesPanel()
},$scope.handleShareDashboard=function(){null!=$scope.currentDashboard&&dashboardShareService.handleShareDashboard($scope.currentDashboard)},$scope.handleStopSharingDashboard=function(){null!=$scope.currentDashboard&&dashboardShareService.revokeDashboardShare($scope.currentDashboard)},$scope.copyShareLinkToDashboard=function(){null!=$scope.currentDashboard&&dashboardShareService.copyShareLinkToDashboard($scope.currentDashboard)},$scope.openCustomDashboardSharedURL=function(){null!=$scope.currentDashboard&&dashboardShareService.openCustomDashboardSharedURL($scope.currentDashboard)},$scope.sharedStatus={isShared:!1,hasSharedToken:!1},$scope.currentDashboard=null,$scope.$on("layoutChanged",this.updateCustomDashboardLayout.bind(this)),$scope.getStyle=function(){var dashboardUIState;return hasDashboardUIState()?(dashboardUIState=$scope.currentDashboard.dashboardUIState,{width:dashboardUIState.width,height:dashboardUIState.height,overflow:"hidden","background-color":Util.getColorString(dashboardUIState.backgroundColor)}):null},$scope.handleSnapToGridChange=function(value){userPreferenceUiService.setGeneralUserPreferenceBoolean(GeneralUserPreferenceConstants.CUSTOM_DASHBOARD_SNAP_TO_GRID,value)},$scope.handleShowGridChange=function(value){userPreferenceUiService.setGeneralUserPreferenceBoolean(GeneralUserPreferenceConstants.CUSTOM_DASHBOARD_SHOW_GRID,value)},$scope.$on(TimeRangeSelectorController.UEV_TIME_RANGE_CHANGE,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(args&&args.length>=2){var trs=args[0],isDashboardTimeRange=args[1];if(!isDashboardTimeRange)return;$scope.selectTimeRange(trs)}}),$scope.selectTimeRange=function(selectedTimeRange){if(selectedTimeRange.type===TimeRangeSpecifierType.BETWEEN_TIMES){if(selectedTimeRange.startTime.getTime()>=selectedTimeRange.endTime.getTime())return void notificationService.displayError("End Time must be later than start time","");$scope.showCustomRange=!0,$scope.dashboardTimeRange=selectedTimeRange,$scope.currentDashboard.dashboardUIState.startTime=selectedTimeRange.startTime.getTime(),$scope.currentDashboard.dashboardUIState.endTime=selectedTimeRange.endTime.getTime(),$scope.currentDashboard.dashboardUIState.minutesBeforeAnchorTime=0}else $scope.showCustomRange=!1,$scope.currentDashboard.dashboardUIState.startTime=0,$scope.currentDashboard.dashboardUIState.endTime=0,$scope.currentDashboard.dashboardUIState.minutesBeforeAnchorTime=selectedTimeRange.durationInMinutes;$scope.currentDashboard.dashboardUIState.widgets.forEach($scope.updateWidgetTimeRange),$scope.autoSave("*")},$scope.updateWidgetTimeRange=function(element){1==element.isGlobal&&(element.minutesBeforeAnchorTime=$scope.currentDashboard.dashboardUIState.minutesBeforeAnchorTime,element.startTime=$scope.currentDashboard.dashboardUIState.startTime,element.endTime=$scope.currentDashboard.dashboardUIState.endTime)},$scope.onApplyDashboardCustomTimeRange=function(){var trs={};trs.type=TimeRangeSpecifierType.BETWEEN_TIMES,trs.durationInMinutes=0,trs.startTime=$scope.dashboardTimeRange.startTime,trs.endTime=$scope.dashboardTimeRange.endTime,trs.startTime.getTime()>trs.endTime.getTime()?notificationService.displayError(resourceManager.getString("ui","ms_startTimeCannotBeLaterThanEndTime"),""):$scope.selectTimeRange(trs)},$scope.saveDashboardCustomTimeRange=function(){var dialogData={dateFrom:this.dashboardTimeRange.startTime,dateTo:this.dashboardTimeRange.endTime};DialogService.instance().showDialog(SaveCustomTimeRangeDialogController,"","app/view/common/dialogs/CustomTimeRange/SaveCustomTimeRangeDialog.html",dialogData),ViewUtil.safeApply($scope)},$scope.getDashboardId=function(){return tempSelf.isTemplate()?Number($scope.adDashboardId):dashboardHelper.getDashboardId()},this.isTemplate()&&$scope.$watch("adDashboardId",function(dashboardId){if(_this.$scope.isAutoSaveScheduled&&(_this.$scope.isAutoSaveScheduled=!1,_this.save(!1)),_this.$scope.refreshDashboardView(),Util.isDefAndNotNull(dashboardId)){var params=new URLParams(_this.$location.path());params.setNumberParam(UrlConstants.CUSTOM_DASHBOARD_ID,dashboardId),URLUtil.setLocationHashNoHistory(params.toString())}}),this.isTemplate()&&($scope.$on(TimeRangeService.UEV_TIME_RANGE_CHANGE_TR_SERVICE,function(){customDashboardViewService.refreshAllWidgets()}),$scope.$on(TimeRangeService.TIMERANGE_AUTOREFRESH_EVENT,function(){customDashboardViewService.refreshAllWidgets()})),$scope.initialize=function(){_this.dashboardHelper.rescaleHighcharts(300);var container;_this.isGridCanvas()?container=".canvas-column":(_this.setupMultiSelect(),_this.setupWidgetListeners(),container="#mainView"),$(container).draggable({drag:function(){return!1}}).droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",accept:".draggable-widget-action",drop:function(event,ui){var widgetType=$(ui.draggable).data("widget-type"),x=event.offsetX,y=event.offsetY;if(!Util.isDefAndNotNull(x)&&this.isAbsoluteCanvas()){var container=$(".container");x=event.pageX-container.offset().left,y=event.pageY-container.offset().top}tempSelf.addWidgetThrottle(widgetType,x,y),ViewUtil.safeApply($scope)}})},$scope.initializeDragDropMenu=function(){$(".add-widget-container:last").delegate(".toolbarButton","mouseover",function(){$(this).draggable({helper:"clone",cursorAt:{left:5,top:-5},appendTo:"body",cursor:"move",zIndex:1e3})})},$scope.getDashboard=function(){return $scope.dashboardId=$scope.getDashboardId(),_.isNumber($scope.dashboardId)?void dashboardService.getDashboard($scope.dashboardId).then(_this.updateDashboard.bind(_this)):void _this.redirectToDashboardList()},$scope.isSelected=function(dashboard){return $scope.currentDashboard&&$scope.currentDashboard.id==dashboard.id?!0:!1},$scope.$on(HealthRuleSelectorController.HEALTH_RULE_SELECTION_EVENT,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(args&&args.length>=1){var data=args[0];$scope.selectedWidgetProperties.applicationId=data.appId,$scope.selectedWidgetProperties.policyTemplateId=data.policyId,$scope.autoSave(data.widgetGuid)}}),$scope.$on(MetricSelectorController.METRIC_SELECTION_EVENT,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(args&&args.length>=2){var type=args[0],data=args[1];"metric-label"===type&&($scope.selectedWidgetProperties.title=_.last(data.metricName.split("|")),dashboardHelper.setMetric($scope.currentDashboard,data))}}),$scope.$on(DashboardShareService.DASHBOARD_SHARE_EVENT,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(args&&args.length>=1){var updatedDashboard=args[0],dashboard=$scope.currentDashboard;dashboard.id===updatedDashboard.id&&_this.hasSharedToken===!1&&($scope.currentDashboard.version+=1,_this.hasSharedToken=$scope.sharedStatus.hasSharedToken)}}),$scope.$on(CDPropertiesDialogController.CD_PROPERTIES_CHANGE_EVENT,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(args&&args.length>=1){var data=args[0];$scope.currentDashboard.name=data.name,$scope.currentDashboard.dashboardUIState.height=data.height,$scope.currentDashboard.dashboardUIState.width=data.width,$scope.currentDashboard.dashboardUIState.refreshInterval=1e3*data.refreshIntervalInSecs,$scope.currentDashboard.dashboardUIState.backgroundColor=data.backgroundColor,_this.save(!1,null,data.hasCDNameChanged)}}),$scope.$on(MetricSelectorController.METRIC_SELECTION_EVENT,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(args&&args.length>=2){{var type=args[0];args[1]}"metric-label"===type&&$scope.autoSave($scope.selectedWidgetProperties.widgetGuid)}}),$scope.$on(SeriesSelectorController.SERIES_SELECTION_EVENT,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(args&&args.length>=1){var data=args[0];if("add"==data.mode)$scope.currentDashboard.widgetsMetricMatchCriterias.push(data.wmmc),$scope.currentDashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates.push(data.wmmcUIS);else{var oldWmmc=_.findWhere($scope.currentDashboard.widgetsMetricMatchCriterias,{widgetGuid:data.widgetGuid,name:data.oldName});oldWmmc&&(data.wmmc.version=oldWmmc.version,data.wmmc.id=oldWmmc.id),Util.removeWhere($scope.currentDashboard.widgetsMetricMatchCriterias,{widgetGuid:data.widgetGuid,name:data.oldName}),Util.removeWhere($scope.currentDashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates,{widgetGuid:data.widgetGuid,widgetMetricMatchCriteriaName:data.oldName}),$scope.currentDashboard.widgetsMetricMatchCriterias.push(data.wmmc),$scope.currentDashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates.push(data.wmmcUIS)}$scope.autoSave(data.widgetGuid)}}),$scope.$on("$destroy",function(){_this.onDestroyCleanup()}),$scope.$on("$locationChangeSuccess",function(e,newUrl,oldUrl){_this.onLocationChange(e,newUrl,oldUrl)}),$scope.$on("gridster-mobile-changed",function(e,gridster){if(gridster.isMobile){var scope=e.currentScope,widgets=scope.currentDashboard.dashboardUIState.widgets;_.forEach(widgets,function(widget){widget.order=widget.y+DashboardHelper.GRID_POSITION_MULTIPLIER*widget.x})}}),$scope.refreshDashboardView=function(){var dashboardUIState={};hasDashboardUIState()&&(dashboardUIState=$.extend({},$scope.currentDashboard.dashboardUIState),delete dashboardUIState.widgets,delete dashboardUIState.widgetMetricMatchCriteriaUIStates),$scope.selectedWidgetProperties={},$scope.selectedWidgetType="NONE",$scope.currentDashboard={name:"Loading.. ",dashboardUIState:dashboardUIState};var dashboardId=$scope.getDashboardId();return _this.isWarRoom()||Util.isValidId(dashboardId)?void $scope.getDashboard():void ADLoggerService.warn("CustomDashboardEditorController.refreshDashboardView Warning: Invalid dashboardId "+dashboardId+"; exiting.")};var urlParams=new URLParams($location.path());urlParams.getParam(UrlConstants.LOCATION)!==NavigationDataConstants.APP_WARROOM_DASH&&$scope.getDashboard(),$scope.onViewCustomDashboardList=function(){customDashboardViewService.viewCustomDashboardList()},urlParams.getParam(UrlConstants.CUSTOM_DASHBOARD_MODE)==CustomDashboardEditorController.MODE_EDIT&&$scope.handleEditDashboard()}return __extends(CustomDashboardEditorController,_super),CustomDashboardEditorController.prototype.saveDashboardToServer=function(){return this.dashboardService.updateDashboard(this.marshall(this.$scope.currentDashboard))},CustomDashboardEditorController.prototype.isAbsoluteCanvas=function(){var canvasType=this.getCanvasType();return canvasType===CustomDashBoardCanvasType.CANVAS_TYPE_ABSOLUTE||null==canvasType},CustomDashboardEditorController.prototype.isGridCanvas=function(){return this.getCanvasType()===CustomDashBoardCanvasType.CANVAS_TYPE_GRID},CustomDashboardEditorController.prototype.isDashboardEmpty=function(){var length=Util.get(this.$scope.currentDashboard,["dashboardUIState","widgets","length"]);return 0===length},CustomDashboardEditorController.prototype.handleGridWidgetClick=function(evt){if(this.$scope.editMode){var widget=$(evt.target).closest(".cd-widget");if(evt.stopPropagation(),widget&&!widget.hasClass("selected-widget"))if(this.shiftSelect){var selectedWidgets=this.getSelectedWidgetGuids();selectedWidgets.length>0?(this.selectGridWidget(widget,!1),this.$scope.selectedWidgetType="MULTIPLE"):(this.unselectAllGridWidgets(),this.selectGridWidget(widget,!0))}else this.unselectAllGridWidgets(),this.selectGridWidget(widget,!0),ViewUtil.safeApply(this.$scope)}},CustomDashboardEditorController.prototype.getDisplayStyle=function(){return this.$scope.displayType===CustomDashBoardDisplayType.MOBILE?{width:"488px",height:"100%"}:this.$scope.displayType===CustomDashBoardDisplayType.TABLET?{width:"768px"}:{width:"100%"}},CustomDashboardEditorController.prototype.getGridCanvasColumnStyle=function(){var viewEditModeWidthOffset="";if(this.$scope.editMode||this.isWarRoom())if(this.isWarRoom()){var maxSidePanelWidth=Math.max($(".ads-widget-properties-bar").width(),$(".ads-war-room-side-bar").width());viewEditModeWidthOffset="calc(100% - "+maxSidePanelWidth+"px)"}else viewEditModeWidthOffset="calc(100% - "+$(".properties-side-bar").width()+"px)";else viewEditModeWidthOffset="100%";return{width:viewEditModeWidthOffset,height:this.dashboardHelper.getCanvasHeight(this.isTemplate())+"px","background-color":this.dashboardHelper.getBackgroundColor(this.$scope.currentDashboard),"overflow-x":"hidden","overflow-y":"auto"}},CustomDashboardEditorController.prototype.toggleMobile=function(){this.setDisplay(this.$scope.displayType===CustomDashBoardDisplayType.DESKTOP?CustomDashBoardDisplayType.MOBILE:CustomDashBoardDisplayType.DESKTOP)},CustomDashboardEditorController.prototype.gridCanvasUpdater=function(){this.isGridCanvas()&&ViewUtil.safeApply(this.$scope)},CustomDashboardEditorController.prototype.handleDelete=function(e){!this.$scope.editMode||8!==e.keyCode&&46!==e.keyCode||this.isTargetExcludedFromKeydownEventListener(e)||("NONE"!==this.$scope.selectedWidgetType&&(this.isAbsoluteCanvas()?this.deleteSelectedWidgets():this.deleteSelectedGridWidgets()),e.preventDefault())},CustomDashboardEditorController.prototype.onLocationChange=function(e,newUrl,oldUrl){if(!this.isTemplate()){var oldUrlParams=new URLParams(WebUtil.getPath(oldUrl)),newUrlParams=new URLParams(WebUtil.getPath(newUrl));(oldUrlParams.getParam(UrlConstants.LOCATION)!=NavigationDataConstants.CDASHBOARD_DETAIL||oldUrlParams.getParam(UrlConstants.CUSTOM_DASHBOARD_ID)!=newUrlParams.getParam(UrlConstants.CUSTOM_DASHBOARD_ID))&&newUrlParams.getParam(UrlConstants.LOCATION)!=NavigationDataConstants.METRIC_BROWSER&&newUrlParams.getParam(UrlConstants.LOCATION)!=NavigationDataConstants.DASHBOARD_LIST&&this.$scope.refreshDashboardView()}},CustomDashboardEditorController.prototype.onDestroyCleanup=function(){this.$scope.isDashboardDestroyed=!0,this.dashboardLiveUpdateService.stopLiveUpdateDashboardWidgets(),$("#mainView").draggable("destroy"),$("#mainView").droppable("destroy"),$("html").off("keydown",this.boundDelete),$("html").off("keydown",this.boundMove),$("html").off("keydown",this.boundShiftSelect),$("html").off("keyup",this.boundShiftSelect),this.isGridCanvas()&&$(".custom-dashboard-container .grid-container").undelegate("div.selectable-area","mousedown"),this.$scope.isAutoSaveScheduled&&(this.$scope.isAutoSaveScheduled=!1,this.save(!1))},CustomDashboardEditorController.prototype.addWidget=function(name,x,y){var _this=this;void 0===x&&(x=0),void 0===y&&(y=0);var extendedConfig=_.extend({widgetGuid:Util.generateId(),x:x,y:y,color:CustomDashboardEditorController.DEFAULT_COLOR,width:300,height:200,backgroundAlpha:1,backgroundColor:16777215,borderColor:14408667,borderEnabled:!1,borderThickness:0,fontSize:12,showValues:!1,useMetricBrowserAsDrillDown:!0},angular.copy(this.widgetDefaults[name])||{});if(extendedConfig.widgetType=name,this.isAbsoluteCanvas()&&(extendedConfig.x=Math.min(extendedConfig.x,this.$scope.currentDashboard.dashboardUIState.width-extendedConfig.width),extendedConfig.y=Math.min(extendedConfig.y,this.$scope.currentDashboard.dashboardUIState.height-extendedConfig.height)),this.isGridCanvas()){var heightUnits=2,widthUnits=4;name===WidgetTypes.METRIC_LABEL?(extendedConfig.fontSize=30,widthUnits=3):name===WidgetTypes.LABEL?(extendedConfig.fontSize=30,heightUnits=1):name===WidgetTypes.STATUS_LIGHT?widthUnits=2:(name===WidgetTypes.PIE||name===WidgetTypes.GAUGE||name===WidgetTypes.TIMESERIES_GRAPH||name==WidgetTypes.LIST||name==WidgetTypes.STREAMING_GRAPH||name==WidgetTypes.LOG_TAIL)&&(heightUnits=3,widthUnits=6),extendedConfig=_.chain(extendedConfig).extend({width:widthUnits,height:heightUnits}).omit("x","y").value()}this.isWarRoom()&&extendedConfig.isGlobal&&(extendedConfig.isGlobal=!1),this.$scope.currentDashboard.dashboardUIState.widgets.push(extendedConfig),this.autosave(extendedConfig.widgetGuid),_.defer(function(){_this.selectNewlyCreatedWidget(extendedConfig.widgetGuid)})},CustomDashboardEditorController.prototype.selectNewlyCreatedWidget=function(widgetGuid){var widget=$("div").find("[ad-widget-guid='"+widgetGuid+"']");widget&&(this.isGridCanvas()?(this.unselectAllGridWidgets(),this.selectGridWidget(widget,!0),this.$scope.showGridWidgetProperties=!0):(this.unselectAllWidgets(),this.selectWidget(widget)))},CustomDashboardEditorController.prototype.save=function(isAutoSave,refreshTarget,hasCDNameChanged){var _this=this;if(void 0===isAutoSave&&(isAutoSave=!1),void 0===refreshTarget&&(refreshTarget=null),void 0===hasCDNameChanged&&(hasCDNameChanged=!1),this.$scope.editMode){if(this.isSaving)return void this.$scope.autoSave();if(isAutoSave){if(this.$scope.isAutoSaveScheduled===!1)return;this.$scope.autoSaving=!0,ADLoggerService.warn("Autosaving.."),ViewUtil.safeApply(this.$scope)}this.isSaving=!0;var promise=this.saveDashboardToServer().then(function(updatedDashboard){_this.isSaving=!1,_this.$scope.isAutoSaveScheduled=!1,!_this.$scope.isDashboardDestroyed&&updatedDashboard&&(Util.parseInt(_this.$scope.getDashboardId())===updatedDashboard.id?(_this.$scope.currentDashboard=_this.dashboardHelper.unmarshall(updatedDashboard,_this.$scope.currentDashboard,_this.$scope.editMode),_this.$scope.selectedWidgetProperties.drillDownType=_this.savedDrillDownType,_this.$scope.selectedWidgetProperties.widgetGuid&&(_this.$scope.selectedWidgetProperties=_this.getWidgetData(_this.$scope.selectedWidgetProperties.widgetGuid))):_this.isWarRoom()||ADLoggerService.error("Attempting to load wrong dashboard with id("+updatedDashboard.id+")"),isAutoSave?_this.$scope.autoSaving=!1:_this.notificationService.displayUpdatedSuccessfullyMessage())});promise["catch"](function(){_this.isSaving=!1,_this.$scope.autoSaving=!1})}},CustomDashboardEditorController.prototype.autosave=function(widgetGuid){this.$scope.autoSave(widgetGuid||Util.get(this.$scope.selectedWidgetProperties,"widgetGuid"))},CustomDashboardEditorController.prototype.isWarRoom=function(){return Util.isDefAndNotNull(this.$scope.adWarRoom)&&"true"===this.$scope.adWarRoom},CustomDashboardEditorController.prototype.isTemplate=function(){return Util.isDefAndNotNull(this.$scope.adTemplate)&&"true"===this.$scope.adTemplate},CustomDashboardEditorController.prototype.isNodeTemplate=function(){return Util.isDefAndNotNull(this.$scope.adContext)&&Util.isDefAndNotNull(this.$scope.adContext.nodeId)},CustomDashboardEditorController.prototype.bringWidgetsToFront=function(){this.dashboardHelper.bringWidgetsToFront(this.$scope.currentDashboard,this.getSelectedWidgetGuids()),this.autosave()},CustomDashboardEditorController.prototype.getSelectedWidgetGuids=function(){return _.map(this.getSelectedWidgets(),function(el){return $(el).attr("ad-widget-guid")})},CustomDashboardEditorController.prototype.getSelectedWidgets=function(){return $(this.isAbsoluteCanvas()?".custom-dashboard-container .content .selected-widget":".custom-dashboard-container .gridster-container .selected-widget")},CustomDashboardEditorController.prototype.sendWidgetsToBack=function(){this.dashboardHelper.bringWidgetsToBack(this.$scope.currentDashboard,this.getSelectedWidgetGuids()),this.autosave()},CustomDashboardEditorController.prototype.duplicateWidgets=function(){var widgetGuids=this.dashboardHelper.duplicateWidgets(this.$scope.currentDashboard,this.getSelectedWidgetGuids());this.autosave(widgetGuids)},CustomDashboardEditorController.prototype.setupContextMenu=function(){var _this=this;if(this.isAbsoluteCanvas()){var cmOptions={};cmOptions.disableDefaultContextMenu=!0,cmOptions.items=[];var cmItem={};cmItem.text="Delete Item(s)",cmItem.handler=function(){_this.deleteSelectedWidgets()},cmOptions.items.push(cmItem),cmItem={},cmItem.text="Duplicate Item(s)",cmItem.handler=function(){_this.duplicateWidgets(),ViewUtil.safeApply(_this.$scope)},cmOptions.items.push(cmItem),cmItem={},cmItem.text="Bring Item(s) to Front",cmItem.handler=function(){_this.bringWidgetsToFront(),ViewUtil.safeApply(_this.$scope)},cmOptions.items.push(cmItem),cmItem={},cmItem.text="Send Item(s) to Back",cmItem.handler=function(){_this.sendWidgetsToBack(),ViewUtil.safeApply(_this.$scope)},cmOptions.items.push(cmItem),this.$scope.contextMenuOptions=cmOptions}else{var cmOptions={};cmOptions.disableDefaultContextMenu=!0,cmOptions.items=[];var cmItem={};cmItem.text="Delete Widget(s)",cmItem.handler=function(){_this.deleteSelectedGridWidgets()},cmOptions.items.push(cmItem),cmItem={},cmItem.text="Duplicate Widget(s)",cmItem.handler=function(){_this.duplicateWidgets(),ViewUtil.safeApply(_this.$scope)},cmOptions.items.push(cmItem),this.$scope.contextMenuOptions=cmOptions}},CustomDashboardEditorController.prototype.deleteSelectedWidgets=function(){var _this=this;this.getSelectedWidgets().each(function(i,el){_this.dashboardHelper.deleteWidget(_this.$scope.currentDashboard,$(el).attr("ad-widget-guid"))}),this.unselectAllWidgets(),ViewUtil.safeApply(this.$scope),this.$scope.autoSave()},CustomDashboardEditorController.prototype.unselectAllWidgets=function(){this.$scope.widgetSelected=!1;var selectedWidgets;this.$scope.selectedWidgetProperties={},this.$scope.selectedWidgetType="NONE",selectedWidgets=this.getSelectedWidgets(),selectedWidgets.removeClass("selected-widget"),this.isGridCanvas()||(selectedWidgets.draggable("disable"),selectedWidgets.resizable("destroy")),$(".widget-container .ui-selected").removeClass("ui-selected")},CustomDashboardEditorController.prototype.deleteSelectedGridWidgets=function(){var _this=this;this.getSelectedWidgets().each(function(i,el){_this.$scope.deleteWidget($(el).attr("ad-widget-guid"))}),this.$scope.selectedWidgetProperties={},this.$scope.selectedWidgetType="NONE",ViewUtil.safeApply(this.$scope)},CustomDashboardEditorController.prototype.updateDashboard=function(dashboardData){if(_.isEmpty(dashboardData))return void this.redirectToDashboardList();this.$scope.currentDashboard=this.dashboardHelper.unmarshall(dashboardData,this.$scope.currentDashboard,this.$scope.editMode),this.$scope.title=this.$scope.currentDashboard.name,window.document.title=this.$scope.currentDashboard.name;var dashboardUIState=this.$scope.currentDashboard.dashboardUIState;this.dashboardLiveUpdateService.startLiveUpdateDashboardWidgets(dashboardUIState.refreshInterval);var timeRangeSpecifier={};0==dashboardUIState.minutesBeforeAnchorTime?(timeRangeSpecifier.durationInMinutes=0,timeRangeSpecifier.startTime=new Date(dashboardUIState.startTime),timeRangeSpecifier.endTime=new Date(dashboardUIState.endTime),timeRangeSpecifier.type=TimeRangeSpecifierType.BETWEEN_TIMES,this.$scope.showCustomRange=!0):(timeRangeSpecifier.durationInMinutes=dashboardUIState.minutesBeforeAnchorTime,timeRangeSpecifier.type=TimeRangeSpecifierType.BEFORE_NOW,this.$scope.showCustomRange=!1),this.$scope.dashboardTimeRange=timeRangeSpecifier,this.dashboardShareService.setShareMenuVisibility(this.$scope.currentDashboard,this.$scope.sharedStatus),this.hasSharedToken=this.$scope.sharedStatus.hasSharedToken,this.updateCustomDashboardLayout(),this.setupContextMenu(),this.setupLocationBar(),this.checkForMetricBrowserDrillDown()},CustomDashboardEditorController.prototype.marshall=function(dashboardJson){var _this=this;this.savedDrillDownType=this.$scope.selectedWidgetProperties.drillDownType,_.forEach(dashboardJson.dashboardUIState.widgets,function(widget){delete widget.drillDownType,delete widget.order});var marshalledDashboard=jQuery.extend(!0,{},dashboardJson);return marshalledDashboard.dashboardUIState.widgets=_.map(dashboardJson.dashboardUIState.widgets,function(widget){var marshalledWidget={};return marshalledWidget[widget.widgetType]=widget,marshalledWidget}),_.forEach(marshalledDashboard.widgetsMetricMatchCriterias,function(wmmc){_this.dashboardHelper.marshalWMMC(wmmc)}),marshalledDashboard},CustomDashboardEditorController.prototype.redirectToDashboardList=function(){var dashboardId=this.$scope.dashboardId;this.isTemplate()||this.isWarRoom()||(_.isEmpty(dashboardId)?this.notificationService.displayError("Dashboard not found!",""):this.notificationService.displayError("Dashboard "+dashboardId+" not found!",""),this.customDashboardViewService.viewCustomDashboardList())},CustomDashboardEditorController.prototype.getWidgetData=function(widgetGuid){return _.filter(this.$scope.currentDashboard.dashboardUIState.widgets,function(widget){return widget.widgetGuid===widgetGuid})[0]},CustomDashboardEditorController.prototype.updateCustomDashboardLayout=function(){var containerWidth=$(".custom-dashboard-container").width(),containerHeight=$(".appContainer").height()-$(".ads-top-menu-bar-container-row").height()-$("#mainTitleBarContainerId").height()-$(".action-bar").height();this.isTemplate()&&(containerHeight-=$(".adsTabRowLevel1").height()),$(".container").width(containerWidth),$(".container").height(containerHeight)},CustomDashboardEditorController.prototype.setupMultiSelect=function(){var self=this;$(".widget-container").selectable({filter:" > .cd-widget",distance:30,stop:function(){var selection=$(".edit-mode .widget-container .ui-selected");self.unselectAllWidgets(),selection.length>1?(selection.each(function(i,el){self.selectWidget($(el)),$(el).draggable(self.getDraggableSettings())}),self.$scope.selectedWidgetType="MULTIPLE"):1===selection.length&&self.selectWidget(selection),ViewUtil.safeApply(self.$scope)}}),this.enableMultiSelect(self.$scope.editMode)},CustomDashboardEditorController.prototype.enableMultiSelect=function(enable){$(".widget-container").selectable(enable?"enable":"disable")},CustomDashboardEditorController.prototype.getDraggableSettings=function(){var startX,startY,self=this,positionUpdater=function(event,ui){var widget=$(this),offsetLeft=ui.position.left-ui.originalPosition.left,offsetTop=ui.position.top-ui.originalPosition.top;self.getSelectedWidgets().each(function(i,el){var pos,selWidget=$(el);el!==widget[0]&&(pos=selWidget.data("pos"),_.isUndefined(selWidget.data("pos"))&&(pos=selWidget.position(),selWidget.data("pos",pos)),selWidget.css({left:pos.left+offsetLeft,top:pos.top+offsetTop}))}),self.getSelectedWidgets().each(function(i,el){self.updateCurrentPosition($(el))}),ViewUtil.safeApply(self.$scope)},draggableSettings={disabled:!1,containment:"parent",drag:positionUpdater,start:function(){startX=parseInt($(this).css("left")),startY=parseInt($(this).css("top"))},stop:function(){var curX=parseInt($(this).css("left")),curY=parseInt($(this).css("top"));positionUpdater.apply(this,arguments),self.getSelectedWidgets().removeData("pos"),(curX!=startX||curY!=startY)&&self.$scope.autoSave()},cursor:"move"};return draggableSettings.grid=this.$scope.editorSettings.snapToGrid?[25,25]:!1,draggableSettings},CustomDashboardEditorController.prototype.getResizableSettings=function(){var _this=this,resizableSettings={containment:"parent",handles:"n, e, s, w, se, sw, nw, ne",resize:this.sizeUpdater.bind(this),stop:function(evt){_this.sizeUpdater(evt),_this.$scope.autoSave(),_this.$rootScope.$broadcast(AdWidgetController.REFRESH_WIDGET,{refreshTarget:"*"})}};return resizableSettings.grid=this.$scope.editorSettings.snapToGrid?[25,25]:!1,resizableSettings},CustomDashboardEditorController.prototype.updateCurrentPosition=function(widget){var position=widget.position(),widgetGuid=widget.attr("ad-widget-guid"),widgetProperties=_.findWhere(this.$scope.currentDashboard.dashboardUIState.widgets,{widgetGuid:widgetGuid});widgetProperties.x=position.left,widgetProperties.y=position.top},CustomDashboardEditorController.prototype.selectWidget=function(widget){this.$scope.widgetSelected=!0;var resizableSettings=this.getResizableSettings(),draggableSettings=this.getDraggableSettings(),widgetData=this.getWidgetData(widget.attr("ad-widget-guid"));this.disablePropertyChangesForDigestCycle(),widget.draggable(draggableSettings),widget.resizable(resizableSettings).addClass("selected-widget"),this.$scope.selectedWidgetProperties=widgetData,this.updateCurrentPosition(widget),this.$scope.selectedWidgetType=widgetData.widgetType,this.$scope.selectedWidgetProperties.width=widget.outerWidth(!0),this.$scope.selectedWidgetProperties.height=widget.outerHeight(!0),this.updateSelectedWidgetProperties(widgetData)},CustomDashboardEditorController.prototype.sizeUpdater=function(evt){var widget=$(evt.target);this.$scope.selectedWidgetProperties.width=widget.outerWidth(!0),this.$scope.selectedWidgetProperties.height=widget.outerHeight(!0),this.$scope.selectedWidgetProperties.x=parseInt(widget.css("left"),10),this.$scope.selectedWidgetProperties.y=parseInt(widget.css("top"),10),this.debouncedCursorReset(),ViewUtil.safeApply(this.$scope)},CustomDashboardEditorController.prototype.updateSelectedWidgetProperties=function(widgetData){var wmmc=this.dashboardHelper.getWidgetsMetricMatchCriterias(this.$scope.currentDashboard,{widgetGuid:widgetData.widgetGuid});this.$scope.selectedWidgetMetricFunction={},this.$scope.selectedWidgetMetricFunction.type=_.findWhere(this.$scope.uiData.functionTypes,{value:Util.get(wmmc,["metricMatchCriteria","metricExpression","functionType"])})||this.$scope.uiData.functionTypes[2],this.$scope.selectedWidgetProperties.drillDownType=_.findWhere(this.$scope.uiData.drillDownActionTypes,{value:widgetData.useMetricBrowserAsDrillDown})},CustomDashboardEditorController.prototype.handleMove=function(e){if(this.$scope.editMode&&"NONE"!==this.$scope.selectedWidgetType&&!this.isTargetExcludedFromKeydownEventListener(e)){switch(e.keyCode){case 37:this.moveWidgets("LEFT");break;case 38:this.moveWidgets("UP");break;case 39:this.moveWidgets("RIGHT");break;case 40:this.moveWidgets("DOWN")}e.preventDefault()}},CustomDashboardEditorController.prototype.moveWidgets=function(direction){var _this=this,selectedWidgetGuids=this.getSelectedWidgetGuids();_.each(selectedWidgetGuids,function(widgetGuid){_this.moveWidget(widgetGuid,direction)}),this.$scope.autoSave(),ViewUtil.safeApply(this.$scope)},CustomDashboardEditorController.prototype.moveWidget=function(widgetGuid,direction){var widgetProperties=_.findWhere(this.$scope.currentDashboard.dashboardUIState.widgets,{widgetGuid:widgetGuid}),snap=this.$scope.editorSettings.snapToGrid;switch(direction){case"LEFT":widgetProperties.x-=snap?25:5;break;case"UP":widgetProperties.y-=snap?25:5;break;case"RIGHT":widgetProperties.x+=snap?25:5;break;case"DOWN":widgetProperties.y+=snap?25:5}},CustomDashboardEditorController.prototype.isTargetExcludedFromKeydownEventListener=function(e){var targetExcluded=!1;return _.forEach(CustomDashboardEditorController.EXCLUDED_KEYDOWN_EVENT_LISTENER_TARGETS,function(excludedClass){targetExcluded=targetExcluded||$(e.target).parents("."+excludedClass).length>0}),targetExcluded},CustomDashboardEditorController.prototype.setupWidgetListeners=function(){var self=this;$(".custom-dashboard-container .content").delegate("div.selectable-area","mousedown",function(){if(self.$scope.editMode){var widget=$(this).parent();if(!widget.hasClass("selected-widget")){if(self.shiftSelect){var selectedWidgets=self.getSelectedWidgetGuids();selectedWidgets.length>0?(self.selectWidget(widget),self.$scope.selectedWidgetType="MULTIPLE"):(self.unselectAllWidgets(),self.selectWidget(widget))}else self.unselectAllWidgets(),self.selectWidget(widget);ViewUtil.safeApply(self.$scope)}}}),$(".custom-dashboard-container .content").delegate("div.selectable-area","mouseover",function(){if(self.$scope.editMode){var parent=$(this).parent(),draggableSettings=self.getDraggableSettings(),resizableSettings=self.getResizableSettings();parent.hasClass("selected-widget")||parent.draggable(draggableSettings).resizable(resizableSettings)}}),$(".custom-dashboard-container .content").delegate("div.selectable-area","mouseout",function(){if(self.$scope.editMode){var parent=$(this).parent();parent.hasClass("selected-widget")||(parent.draggable("destroy"),parent.resizable("destroy"))}})},CustomDashboardEditorController.prototype.setGridEditable=function(editable){this.gridsterOpts.draggable.enabled=editable,this.gridsterOpts.resizable.enabled=editable},CustomDashboardEditorController.prototype.unselectAllGridWidgets=function(){this.$scope.widgetSelected=!1,this.$scope.showGridWidgetProperties=this.isAbsoluteCanvas()||this.isWarRoom()?!1:!0,this.$scope.selectedWidgetProperties={},this.$scope.selectedWidgetType="NONE",$(".cd-widget.selected-widget").removeClass("selected-widget"),this.dashboardHelper.rescaleHighcharts(300)
},CustomDashboardEditorController.prototype.selectGridWidget=function(widget,openPropertiesPanel){if(this.$scope.widgetSelected=!0,this.$scope.showGridWidgetProperties=!0,widget.addClass("selected-widget"),openPropertiesPanel){var widgetData=this.getWidgetData(widget.attr("ad-widget-guid"));this.$scope.showGridWidgetProperties=!0,this.disablePropertyChangesForDigestCycle(),this.$scope.selectedWidgetProperties=widgetData,this.$scope.selectedWidgetType=widgetData.widgetType,this.dashboardHelper.rescaleHighcharts(300),this.updateSelectedWidgetProperties(widgetData)}},CustomDashboardEditorController.prototype.scheduleReport=function(){var opts={backdrop:!0,keyboard:!0,report:null,controller:ReportsCreateController,templateUrl:"app/view/reports/create/ReportsCreateView.html",dialogClass:"modal",mode:ReportsCreateController.ModalModes.CREATE,customDashboardId:this.$scope.dashboardId},dlg=this.$dialog.dialog(opts);dlg.open()},CustomDashboardEditorController.prototype.setupLocationBar=function(){if(!this.isWarRoom()&&!this.isTemplate()){this.locationEntries=this.createLocationBarEntryConfigs();var config=this.createLocationBarConfigData(this.locationEntries,!1);config.hideTimeRange=!0,this.setLocationBarConfig(config)}},CustomDashboardEditorController.prototype.createLocationBarEntryConfigs=function(){var configs=[];return configs.push(CustomDashboardViewService.instance().getDashboardsReportsLocationBarEntryConfig()),configs.push(CustomDashboardViewService.instance().getCustomDashboardsListLocationBarEntryConfig()),configs.push({label:this.$scope.currentDashboard.name}),configs},CustomDashboardEditorController.prototype.onGridsterResize=function(){var _this=this;this._onResizeThrottled||(this._onResizeThrottled=Util.getThrottledFunction(function(){_this.dashboardHelper.rescaleHighcharts(),_this.autosave()},DashboardHelper.GRID_RESIZE_TROTTLE_MILIS,!1)),this._onResizeThrottled()},CustomDashboardEditorController.prototype.getCanvasType=function(){return Util.get(this.$scope.currentDashboard,["dashboardUIState","canvasType"])},CustomDashboardEditorController.prototype.setGridSettings=function(){this.$scope.editorSettings={showGrid:!1,snapToGrid:!1},this.$scope.editorSettings.showGrid=this.userService.getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.CUSTOM_DASHBOARD_SHOW_GRID),this.$scope.editorSettings.snapToGrid=this.userService.getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.CUSTOM_DASHBOARD_SNAP_TO_GRID)},CustomDashboardEditorController.prototype.disablePropertyChangesForDigestCycle=function(){var _this=this;this.ignorePropertyChanges=!0,_.defer(function(){_this.ignorePropertyChanges=!1})},CustomDashboardEditorController.prototype.setDisplay=function(displayType){this.isGridCanvas()&&(this.$scope.displayType=displayType,this.gridsterOpts.mobileModeEnabled=displayType===CustomDashBoardDisplayType.MOBILE?!0:!1,this.dashboardHelper.rescaleHighcharts())},CustomDashboardEditorController.prototype.checkForMetricBrowserDrillDown=function(){var _this=this,urlParams=URLParams.getCurrentUrlParams(),widgetGuid=urlParams.getParam(MetricBrowserHelper.URL_PARAM_DRILL_DOWN_INTO_METRIC_BROWSER_FOR_WIDGET_GUID);widgetGuid&&widgetGuid.length>0&&(NotificationService.instance().displayMessage("Loading Metric Browser.  Please wait a moment...",""),InjectorService.instance().$timeout()(function(){urlParams.removeParam(MetricBrowserHelper.URL_PARAM_DRILL_DOWN_INTO_METRIC_BROWSER_FOR_WIDGET_GUID),URLUtil.setLocationHashNoHistory(urlParams.toString());var paramsAlreadySetInHistory=NavigationHistoryService.instance().getCurrentNavHistoryUrlParams();paramsAlreadySetInHistory&&paramsAlreadySetInHistory.removeParam(MetricBrowserHelper.URL_PARAM_DRILL_DOWN_INTO_METRIC_BROWSER_FOR_WIDGET_GUID);var appId=urlParams.getNumberParam(UrlConstants.APPLICATION_ID),customDashId=urlParams.getNumberParam(UrlConstants.CUSTOM_DASHBOARD_ID);_this.$scope.currentDashboard&&Util.isValidId(appId)&&_this.$scope.dashboardTimeRange&&MetricBrowserHelper.instance().getMetricDefinitionsAndOpenMetricBrowser(appId,customDashId,_this.$scope.dashboardTimeRange,widgetGuid,_this.$scope.currentDashboard)},4e3))},CustomDashboardEditorController.prototype.loadCSS=function(href,before,media){function toggleMedia(){for(var defined,i=0;i<sheets.length;i++)sheets[i].href&&sheets[i].href.indexOf(href)>-1&&(defined=!0);defined?ss.media=media||"all":setTimeout(toggleMedia)}var ss=window.document.createElement("link"),ref=before||window.document.getElementsByTagName("script")[0],sheets=window.document.styleSheets;return ss.rel="stylesheet",ss.href=href,ss.media="only x",ref.parentNode.insertBefore(ss,ref),toggleMedia(),ss},CustomDashboardEditorController.prototype.downloadGridstack=function(){this.loadCSS("https://troolee.github.io/gridstack.js/gridstack.css",null,null);var self=this;require(["lib/gridstack/gridstack"],function(){var gridCanvas=$(".gridster-container");if(gridCanvas){gridCanvas.gridstack({width:12,always_show_resize_handle:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),resizable:{handles:"e, se, s, sw, w"}}),self.setupMovementHandlers();var grid=$(".gridster-container").data("gridstack");grid&&(self.$scope.editMode?grid.enable():grid.disable())}})},CustomDashboardEditorController.prototype.renderWidgetGS=function(wGuid,x,y,newWidth,newHeight){var self=this;InjectorService.instance().$timeout()(function(){var gridStackWidgetContent=$(".grid-stack-item").find("[data-gs-guid='"+wGuid+"']"),gridStackWidget=gridStackWidgetContent.parent(),grid=$(".gridster-container").data("gridstack");grid?self.$scope.gridstackNewWidgets[wGuid]?grid.add_widget(gridStackWidget,0,0,parseInt(newWidth),parseInt(newHeight),!1):grid.add_widget(gridStackWidget,x,y,parseInt(newWidth),parseInt(newHeight),!0):self.renderWidgetGS(wGuid,x,y,newWidth,newHeight)},750)},CustomDashboardEditorController.prototype.setupMovementHandlers=function(){$(".gridster-container").on("dragstop",function(event){var self=this,element=event.target,node=$(element).data("_gridstack_node"),wGuid=$(element).find(".grid-stack-item-content").attr("data-gs-guid");self.updateWidgetStyle(wGuid,node.x,node.y,node.width,node.height),self.autosave(wGuid)}.bind(this)),$(".gridster-container").on("resizestop",function(event){var self=this,element=event.target,node=$(element).data("_gridstack_node"),wGuid=$(element).find(".grid-stack-item-content").attr("data-gs-guid");self.updateWidgetStyle(wGuid,node.x,node.y,node.width,node.height),self.autosave(wGuid)}.bind(this))},CustomDashboardEditorController.prototype.updateWidgetStyle=function(wGuid,x,y,newWidth,newHeight){$.each(this.$scope.currentDashboard.dashboardUIState.widgets,function(index,widget){widget.widgetGuid===wGuid&&(widget.x=parseInt(x),widget.y=parseInt(y),widget.width=parseInt(newWidth),widget.height=parseInt(newHeight))})},CustomDashboardEditorController.MODE_EDIT=UrlConstants.CUSTOM_DASHBOARD_MODE_EDIT,CustomDashboardEditorController.MODE_VIEW=UrlConstants.CUSTOM_DASHBOARD_MODE_VAL,CustomDashboardEditorController.DEFAULT_COLOR=4210752,CustomDashboardEditorController.EXCLUDED_KEYDOWN_EVENT_LISTENER_TARGETS=["dialogTransclude","ads-select-flyout-container"],CustomDashboardEditorController.$inject=["$scope","$rootScope","$location","resourceManager","$dialog","notificationService","dashboardService","dashboardHelper","userUiService","$window","$timeout","uiData","userPreferenceUiService","userService","customDashboardViewService","dashboardLiveUpdateService","dashboardShareService"],CustomDashboardEditorController}(MainViewControllerBase);define("app/view/customDashboard/editor/CustomDashboardEditorController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},DashboardService=function(_super){function DashboardService($q,$http,$location,masterService,notificationService,userUiService,customDashboardUiService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$q=$q,this.$http=$http,this.$location=$location,this.masterService=masterService,this.notificationService=notificationService,this.userUiService=userUiService,this.customDashboardUiService=customDashboardUiService,this.apiLoggerService=apiLoggerService}return __extends(DashboardService,_super),DashboardService.instance=function(){return AngularUtil.getADInjector().get(DashboardService.NAME)},DashboardService.prototype.getSharedDashboardByToken=function(token){return this.customDashboardUiService.getSharedDashboardByToken(token)},DashboardService.prototype.getPolicies=function(id){return this.userUiService.getPolicies(id)},DashboardService.prototype.getMetricList=function(appId,path){return MetricUiService.instance().getMetricTree(appId,path||"root")},DashboardService.prototype.getAllDashboards=function(){return this.customDashboardUiService.getAllDashboardsByType(!1)},DashboardService.prototype.getDashboard=function(dashboardId){return this.customDashboardUiService.getDashboard(dashboardId)},DashboardService.prototype.updateDashboard=function(dashboard){return this.customDashboardUiService.updateDashboard(dashboard)},DashboardService.prototype.createDashboard=function(dashboard){return this.customDashboardUiService.createDashboard(dashboard)},DashboardService.prototype.copyDashboard=function(dashboard){return this.customDashboardUiService.copyDashboard(dashboard)},DashboardService.prototype.getApplicationMetricDefinitionsForWidget=function(dashboardId,widgetGuid,applicationId){return this.customDashboardUiService.getApplicationMetricDefinitionsForWidget(dashboardId,widgetGuid,applicationId)},DashboardService.prototype.getAllDashboards2=function(){return this.customDashboardUiService.getAllDashboardsByType2(!1)},DashboardService.prototype.getDashboard2=function(dashboardId){return this.customDashboardUiService.getDashboard2(dashboardId)},DashboardService.prototype.updateDashboard2=function(dashboard){return this.customDashboardUiService.updateDashboard2(dashboard)},DashboardService.prototype.updateWidget=function(widget){return this.customDashboardUiService.updateWidget(widget)},DashboardService.prototype.deleteWidget=function(widget){this.customDashboardUiService.deleteWidget(widget)},DashboardService.prototype.createDashboard2=function(dashboard){return this.customDashboardUiService.createDashboard2(dashboard)},DashboardService.prototype.copyDashboard2=function(dashboard){return this.customDashboardUiService.copyDashboard2(dashboard)},DashboardService.prototype.getSharedDashboardByToken2=function(token){return this.customDashboardUiService.getSharedDashboardByToken2(token)},DashboardService.NAME="dashboardService",DashboardService.$inject=["$q","$http","$location","masterService","notificationService","userUiService","customDashboardUiService","resourceManager","apiLoggerService"],DashboardService}(ControllerUiServiceBase);appdynamicsModule.service(DashboardService.NAME,DashboardService),define("app/view/customDashboard2/services/DashboardService",function(){});var DashboardShareService=function(){function DashboardShareService($rootScope,$q,notificationService,userUiService,customDashboardUiService){this.$rootScope=$rootScope,this.$q=$q,this.notificationService=notificationService,this.userUiService=userUiService,this.customDashboardUiService=customDashboardUiService}return DashboardShareService.instance=function(){return AngularUtil.getADInjector().get(DashboardShareService.NAME)},DashboardShareService.prototype.handleShareDashboard=function(dashboard){var _this=this,promise=this.userUiService.getCurrentUsername();promise.then(function(response){response&&_this.shareDashboard(dashboard)},function(){})},DashboardShareService.prototype.shareDashboard=function(dashboard){var _this=this,successMessage="Dashboard successfully shared.",resultHandler=function(state){if(state&&null!=state.securityToken)if(state.sharingRevoked){state.sharingRevoked=!1;var promise=_this.customDashboardUiService.updateDashboardSharedEntityState(state,dashboard.id);promise.then(_this.updateDashboardSharedEntityStateCallback(successMessage,dashboard))}else _this.notificationService.displayMessage("Dashboard already shared.","");else{var promise=_this.customDashboardUiService.shareDashboard(dashboard.id);promise.then(_this.updateDashboardSharedEntityStateCallback(successMessage,dashboard))}},promise=this.customDashboardUiService.getDashboardSharedEntityState(dashboard.id);promise.then(resultHandler,function(){this.notificationService.displayError("Dashboard share failed!","")})},DashboardShareService.prototype.updateDashboardSharedEntityStateCallback=function(msg,dashboard){var _this=this;return function(response){var state=_this.customDashboardUiService.shareDashboard_response(response);dashboard.securityToken=state.securityToken,dashboard.sharingRevoked=state.sharingRevoked,_this.notificationService.displayMessage(msg,""),_this.setShareMenuVisibility(dashboard,_this.getSharedStatus(dashboard)),_this.$rootScope.$broadcast(DashboardShareService.DASHBOARD_SHARE_EVENT,dashboard)}},DashboardShareService.prototype.handleStopSharingDashboard=function(dashboard){var promise=this.userUiService.getCurrentUsername();promise.then(function(response){response&&this.revokeDashboardShare(dashboard)},function(){this.notificationService.displayError("Revoke dashboard share failed!","")})},DashboardShareService.prototype.revokeDashboardShare=function(dashboard){var _this=this,successMessage="Dashboard no longer shared.",resultHandler=function(response){var state=_this.customDashboardUiService.getDashboardSharedEntityState_response(response);if(state&&state.securityToken)if(state.sharingRevoked)_this.notificationService.displayMessage("Dashboard already not shared.","");else{state.sharingRevoked=!0;var promise=_this.customDashboardUiService.updateDashboardSharedEntityState(state,dashboard.id);promise.then(_this.updateDashboardSharedEntityStateCallback(successMessage,dashboard))}else _this.notificationService.displayMessage("Dashboard already not shared.","")},promise=this.customDashboardUiService.getDashboardSharedEntityState(dashboard.id);promise.then(resultHandler,function(){this.notificationService.displayError("Revoke dashboard share failed!","")})},DashboardShareService.prototype.isAbsoluteCanvas=function(dashboard){var canvasType=dashboard.dashboardUIState.canvasType;return canvasType===CustomDashBoardCanvasType.CANVAS_TYPE_ABSOLUTE||null==canvasType},DashboardShareService.prototype.isAbsoluteCanvasDashboard=function(dashboard){var _this=this,deferred=this.$q.defer();return Util.isDefAndNotNull(dashboard.dashboardUIState)?deferred.resolve(this.isAbsoluteCanvas(dashboard)):this.customDashboardUiService.getDashboard(dashboard.id).then(function(dashboard){deferred.resolve(_this.isAbsoluteCanvas(dashboard))},function(){deferred.reject()}),deferred.promise},DashboardShareService.prototype.copyShareLinkToDashboard=function(dashboard){this.isAbsoluteCanvasDashboard(dashboard).then(function(isAbsoluteCanvas){var location=WebUtil.getSharedCustomDashboardServletURL(dashboard.securityToken,isAbsoluteCanvas);WebUtil.copyToClipboard(location.toString())})},DashboardShareService.prototype.openCustomDashboardSharedURL=function(dashboard){this.isAbsoluteCanvasDashboard(dashboard).then(function(isAbsoluteCanvas){var location=WebUtil.getSharedCustomDashboardServletURL(dashboard.securityToken,isAbsoluteCanvas);WebUtil.loadURL(location)})},DashboardShareService.prototype.copyShareLinkToDashboard2=function(dashboard){var isAbsoluteCanvas=dashboard.canvasType==CustomDashBoardCanvasType.CANVAS_TYPE_ABSOLUTE,location=WebUtil.getSharedCustomDashboardServletURL(dashboard.securityToken,isAbsoluteCanvas);WebUtil.copyToClipboard(location.toString())},DashboardShareService.prototype.openCustomDashboardSharedURL2=function(dashboard){var isAbsoluteCanvas=dashboard.canvasType==CustomDashBoardCanvasType.CANVAS_TYPE_ABSOLUTE,location=WebUtil.getSharedCustomDashboardServletURL(dashboard.securityToken,isAbsoluteCanvas);WebUtil.loadURL(location)},DashboardShareService.prototype.openReportViewer=function(dashboardId){var location=WebUtil.getReportURL(dashboardId);WebUtil.loadURL(location)},DashboardShareService.prototype.setShareMenuVisibility=function(dashboard,sharedStatus){void 0==dashboard||null==dashboard?(sharedStatus.isShared=!1,sharedStatus.hasSharedToken=!1):(sharedStatus.isShared=this.isShared(dashboard),sharedStatus.hasSharedToken=this.hasSharedToken(dashboard))},DashboardShareService.prototype.getSharedStatus=function(dashboard){return{isShared:this.isShared(dashboard),hasSharedToken:this.hasSharedToken(dashboard)}},DashboardShareService.prototype.isShared=function(dashboard){return dashboard&&dashboard.securityToken&&dashboard.securityToken.length>0&&0==dashboard.sharingRevoked?!0:!1},DashboardShareService.prototype.hasSharedToken=function(dashboard){return dashboard&&dashboard.securityToken&&dashboard.securityToken.length>0?!0:!1},DashboardShareService.NAME="dashboardShareService",DashboardShareService.$inject=["$rootScope","$q","notificationService","userUiService","customDashboardUiService"],DashboardShareService.DASHBOARD_SHARE_EVENT="dashboard-share",DashboardShareService}();appdynamicsModule.service(DashboardShareService.NAME,DashboardShareService),define("app/view/customDashboard2/services/DashboardShareService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},CustomDashboardPropertiesMode;!function(CustomDashboardPropertiesMode){CustomDashboardPropertiesMode[CustomDashboardPropertiesMode.CREATE=0]="CREATE",CustomDashboardPropertiesMode[CustomDashboardPropertiesMode.EDIT=1]="EDIT",CustomDashboardPropertiesMode[CustomDashboardPropertiesMode.CREATE_ASSOCIATE=2]="CREATE_ASSOCIATE",CustomDashboardPropertiesMode[CustomDashboardPropertiesMode.EDIT_ASSOCIATE=3]="EDIT_ASSOCIATE"}(CustomDashboardPropertiesMode||(CustomDashboardPropertiesMode={}));var CustomDashboardViewService=function(_super){function CustomDashboardViewService($rootScope,$location,navigationService,notificationService,resourceManager,$dialog){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$rootScope=$rootScope,this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.$dialog=$dialog}return __extends(CustomDashboardViewService,_super),CustomDashboardViewService.instance=function(){return AngularUtil.getADInjector().get(CustomDashboardViewService.SERVICE_NAME)},CustomDashboardViewService.prototype.isChromeHidden=function(){var hideChromeParam=this.getCurrentUrlParams().getParam("hideChrome");return _.isString(hideChromeParam)&&"true"===hideChromeParam.toLowerCase()?!0:!1},CustomDashboardViewService.prototype.viewDashboardsReportsHome=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DASHBOARDS_REPORTS_HOME),this.navigationService.navigateTo(params.toString())},CustomDashboardViewService.prototype.viewReportsList=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.REPORTS_HOME),this.navigationService.navigateTo(params.toString())},CustomDashboardViewService.prototype.viewOnDemandReports=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.REPORTS_APP_ON_DEMAND);var appId=applicationId;Util.isValidId(appId)||(appId=AlertRespondViewService.instance().lastVisitedApplicationId),Util.isValidId(appId)&&params.setNumberParam(UrlConstants.APPLICATION_ID,appId),this.navigationService.navigateTo(params.toString())},CustomDashboardViewService.prototype.viewCreateReportModal=function(){this.viewReportsDetailModal(ReportsCreateController.ModalModes.CREATE)},CustomDashboardViewService.prototype.viewEditReportModal=function(report){this.viewReportsDetailModal(ReportsCreateController.ModalModes.UPDATE,report)},CustomDashboardViewService.prototype.viewReportsDetailModal=function(mode,report){void 0===report&&(report=null);var opts={backdrop:!0,backdropClass:"ads-standard-backdrop modal-backdrop fade in",keyboard:!0,report:report,controller:ReportsCreateController,templateUrl:"app/view/reports/create/ReportsCreateView.html",mode:mode},dlg=this.$dialog.dialog(opts);dlg.open()},CustomDashboardViewService.prototype.viewCustomDashboardList=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,this.getCustomDashLocation(NavigationDataConstants.DASHBOARD_LIST)),this.navigationService.navigateTo(params.toString())},CustomDashboardViewService.prototype.viewCustomDashboardViewerList=function(){var params=this.createUrlParamsWithCurrentTimeRange();this.isNewCustomDashEnabled()?params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DASHBOARD_VIEWER_LIST):params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DASHBOARD_VIEWER_LIST1),this.navigationService.navigateTo(params.toString())},CustomDashboardViewService.prototype.viewCustomDashboardImportDialog=function(){DialogService.instance().showDialog("CustomDashboardImportDialogController","app/view/customDashboard2/import/CustomDashboardImportDialogController","app/view/customDashboard2/import/CustomDashboardImportDialog.html",null)},CustomDashboardViewService.prototype.viewCustomDashboard=function(customDashboardId,editMode){void 0===editMode&&(editMode=!1);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,this.getCustomDashLocation(NavigationDataConstants.CDASHBOARD_DETAIL)),params.setParam(UrlConstants.CUSTOM_DASHBOARD_MODE,UrlConstants.CUSTOM_DASHBOARD_MODE_VAL),params.setNumberParam(UrlConstants.CUSTOM_DASHBOARD_ID,customDashboardId),editMode&&params.setParam(UrlConstants.CUSTOM_DASHBOARD_MODE,UrlConstants.CUSTOM_DASHBOARD_MODE_EDIT),this.navigationService.navigateTo(params.toString())},CustomDashboardViewService.prototype.viewCustomDashboardOld=function(customDashboardId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DASHBOARD_DETAIL),params.setParam(UrlConstants.CUSTOM_DASHBOARD_MODE,UrlConstants.CUSTOM_DASHBOARD_MODE_VAL),params.setNumberParam(UrlConstants.CUSTOM_DASHBOARD_ID,customDashboardId),this.navigationService.navigateTo(params.toString())},CustomDashboardViewService.prototype.viewCreateCustomDashboard2=function(){var opts={mode:0};DialogService.instance().showDialog("CustomDashboardPropertiesController","app/view/customDashboard2/editor/properties/CustomDashboardPropertiesController","app/view/customDashboard2/editor/properties/CustomDashboardPropertiesView.html",opts).then(function($modalInstance){$modalInstance.result.then(function(dashboard){CustomDashboardViewService.instance().viewCustomDashboard(dashboard.id,!0)})})},CustomDashboardViewService.prototype.viewCreateCustomDashboard=function(){var opts={mode:CDPropertiesDialogController.CREATE_MODE,backdrop:!0,keyboard:!0,controller:CDPropertiesDialogController,templateUrl:"app/view/customDashboard/editor/dialogs/CDPropertiesDialog.html",dialogClass:"modal",dashboard:null},dlg=this.$dialog.dialog(opts);dlg.open()},CustomDashboardViewService.prototype.viewCustomDashboardViewerError=function(){var params=this.createUrlParamsWithCurrentTimeRange();this.isNewCustomDashEnabled()?params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DASHBOARD_VIEWER_ERROR):params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DASHBOARD_VIEWER_ERROR1),this.navigationService.navigateTo(params.toString())},CustomDashboardViewService.prototype.refreshDashboardList=function(){this.$rootScope.$broadcast(CustomDashboardViewService.REFRESH_DASHBOARD_LIST)},CustomDashboardViewService.prototype.refreshAllWidgets=function(){this.$rootScope.$broadcast(AdWidgetController.REFRESH_WIDGET,{refreshTarget:"*"})},CustomDashboardViewService.prototype.viewLegacyDashboardList=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,"DASHBOARD_LIST_LEGACY"),this.navigationService.navigateTo(params.toString())},CustomDashboardViewService.prototype.getDashboardsReportsLocationBarEntryConfig=function(){var _this=this,config={};return config.clickFn=function(){_this.viewDashboardsReportsHome()},config.label=this.getString("ms_dashboardsAndRepordsTopLevelNavZone"),config},CustomDashboardViewService.prototype.getCustomDashboardsListLocationBarEntryConfig=function(){var _this=this,config={};return config.clickFn=function(){_this.viewCustomDashboardList()},config.label=this.getString("ms_customDashboardsListNavItemLabel"),config},CustomDashboardViewService.prototype.getComputedTimeRangeForWidget=function(widget,dashboard){var timeRangeService=TimeRangeService.instance(),sharedDashboardElements=$(".ad-custom-dashboard-viewer");return widget&&widget.isGlobal&&!window.AD_REPORTS&&(dashboard.template||sharedDashboardElements.length>0)?timeRangeService.getTimeRange():widget&&widget.isGlobal?this.getDashboardTimeRange(dashboard):this.getWidgetSpecificTimeRange(widget)},CustomDashboardViewService.prototype.getWidgetSpecificTimeRange=function(widget){var timeRangeSpecifier={};return 0==widget.minutesBeforeAnchorTime?(timeRangeSpecifier.durationInMinutes=0,timeRangeSpecifier.startTime=new Date(widget.startTime),timeRangeSpecifier.endTime=new Date(widget.endTime),timeRangeSpecifier.type=TimeRangeSpecifierType.BETWEEN_TIMES):(timeRangeSpecifier.durationInMinutes=widget.minutesBeforeAnchorTime,timeRangeSpecifier.type=TimeRangeSpecifierType.BEFORE_NOW),timeRangeSpecifier},CustomDashboardViewService.prototype.getDashboardTimeRange=function(dashboard){var timeRangeSpecifier={};return 0==dashboard.minutesBeforeAnchorTime?(timeRangeSpecifier.durationInMinutes=0,timeRangeSpecifier.startTime=new Date(dashboard.startTime),timeRangeSpecifier.endTime=new Date(dashboard.endTime),timeRangeSpecifier.type=TimeRangeSpecifierType.BETWEEN_TIMES):(timeRangeSpecifier.durationInMinutes=dashboard.minutesBeforeAnchorTime,timeRangeSpecifier.type=TimeRangeSpecifierType.BEFORE_NOW),timeRangeSpecifier},CustomDashboardViewService.prototype.setTimeRangeOnDashboard=function(dashboard,timeRange){timeRange.type==TimeRangeSpecifierType.BEFORE_NOW?dashboard.minutesBeforeAnchorTime=timeRange.durationInMinutes:(dashboard.minutesBeforeAnchorTime=0,dashboard.startTime=timeRange.startTime.getTime(),dashboard.endTime=timeRange.endTime.getTime())},CustomDashboardViewService.prototype.setTimeRangeOnWidget=function(widget,timeRange){timeRange.type==TimeRangeSpecifierType.BEFORE_NOW?widget.minutesBeforeAnchorTime=timeRange.durationInMinutes:(widget.minutesBeforeAnchorTime=0,widget.startTime=timeRange.startTime.getTime(),widget.endTime=timeRange.endTime.getTime())},CustomDashboardViewService.prototype.getEntity=function(customDashboard){var entity=EntityUtils.getEntity(customDashboard);return entity.type=this.getEntityTypeDisplayString(customDashboard.templateEntityType),entity},CustomDashboardViewService.prototype.getEntities=function(customDashboards){for(var entities=[],i=0;i<customDashboards.length;i++)entities.push(this.getEntity(customDashboards[i]));return entities},CustomDashboardViewService.prototype.getEntityTypeDisplayString=function(entityType){return entityType===EntityType.APPLICATION_COMPONENT?ResourceManager.instance().getString("ui","ms_tier"):entityType===EntityType.APPLICATION_COMPONENT_NODE?ResourceManager.instance().getString("ui","ms_node"):""},CustomDashboardViewService.prototype.getDefaultCustomDashboard=function(){var customDashboard={};customDashboard.name="",customDashboard.width=1024,customDashboard.height=768,customDashboard.canvasType=CustomDashBoardCanvasType.CANVAS_TYPE_GRID,customDashboard.templateEntityType=EntityType.APPLICATION_COMPONENT_NODE,customDashboard.refreshInterval=12e4,customDashboard.backgroundColor=CustomDashboardViewService.DASHBOARD_BG_COLOR,customDashboard.warRoom=!1,customDashboard.template=!1,customDashboard.widgets=[];var timeRange=TimeRangeService.instance().getTimeRange();return this.setTimeRangeOnDashboard(customDashboard,timeRange),customDashboard},CustomDashboardViewService.prototype.openMetricBrowser=function(appId,metricDefinitions,trs,currentDashboard){var location=NavigationDataConstants.METRIC_BROWSER;if(metricDefinitions.length>0){var params="";_.map(metricDefinitions,function(metricDefinition){params+=metricDefinition.entityDefinition.entityType+"."+metricDefinition.entityDefinition.entityId+"."+metricDefinition.metricId,params+=","}),""!=params&&(params=params.substring(0,params.length-1));var additionalParameters={};additionalParameters.metrics=params,additionalParameters.axis="linear",additionalParameters.showPoints=!0,additionalParameters.timeRange=TimeRangeService.instance().convertToPreferenceString(trs,"."),additionalParameters.viewTree=!0;var urlParams=NavigationService.instance().getUrlParams(appId,location,currentDashboard,null,additionalParameters,!0);if(MasterService.instance().isSharedDashboardPageRequestWithToken()){var newUrl=WebUtil.getCurrentURLIncludingController()+window.location.search+"#"+urlParams.toStringNoForwardSlash();WebUtil.loadURL(newUrl)}else MetricBrowserViewService.instance().gotoMetricBrowserLocation(urlParams)}},CustomDashboardViewService.prototype.getDashboardId=function(){var url=new URLParams;return url.getNumberParam(UrlConstants.DATABASE_ID)},CustomDashboardViewService.prototype.getDashboardToken=function(){var url=new URLParams;return url.getParam(UrlConstants.DASHBOARD_SHARED_TOKEN)},CustomDashboardViewService.prototype.getCanvasHeightForViewer=function(){var height=$(window).height();return height-=$(".ads-dashboard-viewer-main-title-bar-container").height()},CustomDashboardViewService.prototype.getCustomDashLocation=function(location){return location+(this.isNewCustomDashEnabled()?"":"1")},CustomDashboardViewService.prototype.isNewCustomDashEnabled=function(){return MasterService.instance().isNewCustomDashEnabled()},CustomDashboardViewService.prototype.getWarnings=function(widget){var warningStrings=[],missingEntities=[],wmmcs=widget.widgetsMetricMatchCriterias;if(_.isArray(wmmcs))for(var i=0;i<wmmcs.length;i++)Util.isDefAndNotNull(wmmcs[i].metricMatchCriteria.affectedEntityMatchCriteria)&&_.isArray(wmmcs[i].metricMatchCriteria.affectedEntityMatchCriteria.missingEntities)&&(missingEntities=missingEntities.concat(wmmcs[i].metricMatchCriteria.affectedEntityMatchCriteria.missingEntities)),_.isArray(wmmcs[i].metricMatchCriteria.missingEntities)&&(missingEntities=missingEntities.concat(wmmcs[i].metricMatchCriteria.missingEntities));if(_.isArray(widget.missingEntities)&&(missingEntities=missingEntities.concat(widget.missingEntities)),widget.type===WidgetType.LIST){var listWidget=widget;listWidget.eventFilter&&_.isArray(listWidget.eventFilter.missingEntities)&&(missingEntities=missingEntities.concat(listWidget.eventFilter.missingEntities))}for(var i=0;i<missingEntities.length;i++){var missingEntity=missingEntities[i],warningMessage=this.getMissingEntityMessage(missingEntity);_.indexOf(warningStrings,warningMessage)<0&&warningStrings.push(warningMessage)}return warningStrings},CustomDashboardViewService.prototype.deleteErrorsFromWidget=function(widget){var wmmcs=widget.widgetsMetricMatchCriterias;if(_.isArray(wmmcs))for(var i=0;i<wmmcs.length;i++)Util.isDefAndNotNull(wmmcs[i].metricMatchCriteria.affectedEntityMatchCriteria)&&_.isArray(wmmcs[i].metricMatchCriteria.affectedEntityMatchCriteria.missingEntities)&&(wmmcs[i].metricMatchCriteria.affectedEntityMatchCriteria.missingEntities=null),_.isArray(wmmcs[i].metricMatchCriteria.missingEntities)&&(wmmcs[i].metricMatchCriteria.missingEntities=null);
if(_.isArray(widget.missingEntities)&&(widget.missingEntities=null),widget.type===WidgetType.LIST){var listWidget=widget;listWidget.eventFilter&&_.isArray(listWidget.eventFilter.missingEntities)&&(listWidget.eventFilter.missingEntities=null)}},CustomDashboardViewService.prototype.getSelectedApplicationForDashboard=function(applicationId,dashboard){return this.getSelectedApplication(applicationId,dashboard?dashboard.template||dashboard.warRoom:!1)},CustomDashboardViewService.prototype.getSelectedApplication=function(applicationId,useApplicationIdInUrlIfNeeded){var appIdToUse;return Util.isValidId(applicationId)?appIdToUse=applicationId:useApplicationIdInUrlIfNeeded&&(appIdToUse=URLParams.getCurrentUrlParams().applicationId()),ApplicationsCache.instance().findApplicationById(appIdToUse)},CustomDashboardViewService.prototype.hasDashboardChanged=function(oldDashboard,newDashboard){if(newDashboard&&!oldDashboard||!newDashboard&&oldDashboard||newDashboard.version>oldDashboard.version)return!0;if(!oldDashboard&&!newDashboard)return!1;if(newDashboard.widgets&&!oldDashboard.widgets||!newDashboard.widgets&&oldDashboard.widgets||newDashboard.widgets.length!==oldDashboard.widgets.length)return!0;for(var i=0;i<newDashboard.widgets.length;i++){var newWidget=newDashboard.widgets[i],oldWidget=_.findWhere(oldDashboard.widgets,{guid:newWidget.guid});if(!oldWidget||newWidget.version>oldWidget.version)return!0}return!1},CustomDashboardViewService.prototype.isCustomDashboardEditable=function(dashboardId){return PermissionManagerUiService.instance().checkPermission(EntityType.DASHBOARD,dashboardId,PermissionAction.EDIT,!1)},CustomDashboardViewService.prototype.getMissingEntityMessage=function(entityIdentifier){if(entityIdentifier.entityType){if(!entityIdentifier.entityId&&!entityIdentifier.entityName)return this.getString("ms_invalidEntityRelatedError");if(entityIdentifier.entityName&&!entityIdentifier.entityId)return this.getString("ms_entityNameNotFound",[entityIdentifier.entityName]);if(entityIdentifier.entityId&&!entityIdentifier.entityName)return this.getString("ms_entityIdNotFound",[entityIdentifier.scopedEntityId])}if(entityIdentifier.scopedEntityType){if(!entityIdentifier.scopedEntityId&&!entityIdentifier.scopedEntityName)return this.getString("ms_invalidScopedEntityRelatedError");if(entityIdentifier.scopedEntityName&&!entityIdentifier.scopedEntityId)return this.getString("ms_scopedEntityNameNotFound",[entityIdentifier.scopedEntityName]);if(entityIdentifier.scopedEntityId&&!entityIdentifier.scopedEntityName)return this.getString("ms_scopedEntityIdNotFound",[entityIdentifier.scopedEntityId])}return entityIdentifier.applicationId||entityIdentifier.applicationName?entityIdentifier.applicationName&&!entityIdentifier.applicationId?this.getString("ms_applicationNameNotFound",[entityIdentifier.applicationName]):entityIdentifier.applicationId&&!entityIdentifier.applicationName?this.getString("ms_applicationIdNotFound",[entityIdentifier.applicationId]):this.getString("ms_uknownError"):this.getString("ms_invalidApplicationRelatedError")},CustomDashboardViewService.SERVICE_NAME="customDashboardViewService",CustomDashboardViewService.DASHBOARD_BG_COLOR=ColorUtil.rgbWithWrapper2hex(UiConfig.getColor("DASHBOARD_DEFAULT_BG_COLOR")),CustomDashboardViewService.DASHBOARD_SAVE_EVENT="dashboard-save",CustomDashboardViewService.REFRESH_DASHBOARD_LIST="refresh-dashboard-list",CustomDashboardViewService.$inject=["$rootScope","$location","navigationService","notificationService","resourceManager","$dialog"],CustomDashboardViewService}(ViewServiceBase);adComponentsModule.service(CustomDashboardViewService.SERVICE_NAME,CustomDashboardViewService),define("app/view/customDashboard2/services/CustomDashboardViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/customDashboard/templates/manage/dialogs/AssociateDashboardsDialogController",["require","exports"],function(require,exports){var AssociateDashboardsDialogController=function(_super){function AssociateDashboardsDialogController($scope,$rootScope,resourceManager,injectorService,notificationService,dialog,dashboardTemplateUiService,dashboardHelper){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.resourceManager=resourceManager,this.injectorService=injectorService,this.notificationService=notificationService,this.dialog=dialog,this.dashboardTemplateUiService=dashboardTemplateUiService,this.dashboardHelper=dashboardHelper,this.$scope.controller=this,this.componentId=dialog.options.componentId,this.isTierDashboard=dialog.options.isTierDashboard,this.dialogType=this.isTierDashboard?"Tier":"Node",this.fetchAllDashboards()}return __extends(AssociateDashboardsDialogController,_super),AssociateDashboardsDialogController.prototype.close=function(){this.dialog.close()},AssociateDashboardsDialogController.prototype.submit=function(){this.$rootScope.$broadcast(AssociateDashboardsDialogController.DASHBOARD_ASSOCIATIONS_CHANGE_EVENT,{selectedDashboardIds:MultiSelect.getSelectedEntityIdsFromSelecteData(this.selectedDashboardOptions)}),this.dialog.close()},AssociateDashboardsDialogController.prototype.fetchAllDashboards=function(){var _this=this,promise=this.dashboardTemplateUiService.getAllDashboardTemplatesByType(this.isTierDashboard);promise.then(function(response){var customDashboardsFetched=_this.dashboardTemplateUiService.getAllDashboardTemplatesByType_response(response),dataCopy=angular.copy(customDashboardsFetched),entityData={};entityData.dataProvider=DashboardHelper.getEntities(dataCopy),_this.allDashboardOptions=entityData,_this.fetchAssociatedDashboards()})},AssociateDashboardsDialogController.prototype.fetchAssociatedDashboards=function(){var _this=this,promise=this.dashboardTemplateUiService.getAllDashboardTemplatesByTier(this.componentId,this.isTierDashboard);promise.then(function(response){var customDashboardsByTier=_this.dashboardTemplateUiService.getAllDashboardTemplatesByTier_response(response);_this.selectedDashboardOptions=MultiSelect.getSelectedDataFromPersistentObjects(customDashboardsByTier)})},AssociateDashboardsDialogController.DASHBOARD_ASSOCIATIONS_CHANGE_EVENT="DASHBOARD_ASSOCIATIONS_CHANGE_EVENT",AssociateDashboardsDialogController.$inject=["$scope","$rootScope","resourceManager","injectorService","notificationService","dialog","dashboardTemplateUiService","dashboardHelper"],AssociateDashboardsDialogController}(ControllerBase);exports.AssociateDashboardsDialogController=AssociateDashboardsDialogController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/customDashboard2/templates/manage/dialogs/AssociateDashboardsDialogController",["require","exports"],function(require,exports){var AssociateDashboardsDialogController=function(_super){function AssociateDashboardsDialogController($scope,$rootScope,resourceManager,injectorService,notificationService,$modalInstance,dialogData){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.resourceManager=resourceManager,this.injectorService=injectorService,this.notificationService=notificationService,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.$scope.controller=this,this.componentId=this.dialogData.componentId,this.isTierDashboard=this.dialogData.isTierDashboard,this.dialogType=this.getString(this.isTierDashboard?"ms_tier":"ms_node"),this.fetchAllDashboards()}return __extends(AssociateDashboardsDialogController,_super),AssociateDashboardsDialogController.prototype.close=function(){this.$modalInstance.close()},AssociateDashboardsDialogController.prototype.submit=function(){this.$rootScope.$broadcast(AssociateDashboardsDialogController.DASHBOARD_ASSOCIATIONS_CHANGE_EVENT,{selectedDashboardIds:MultiSelect.getSelectedEntityIdsFromSelecteData(this.selectedDashboardOptions)}),this.$modalInstance.close()},AssociateDashboardsDialogController.prototype.fetchAllDashboards=function(){var _this=this;DashboardTemplateUiService.instance().getAllDashboardTemplatesByType2(this.isTierDashboard).then(function(response){var customDashboardsFetched=response,dataCopy=angular.copy(customDashboardsFetched),entityData={};entityData.dataProvider=CustomDashboardViewService.instance().getEntities(dataCopy),_this.allDashboardOptions=entityData,_this.fetchAssociatedDashboards()})},AssociateDashboardsDialogController.prototype.fetchAssociatedDashboards=function(){var _this=this;DashboardTemplateUiService.instance().getAllDashboardTemplatesByTier2(this.componentId,this.isTierDashboard).then(function(response){var customDashboardsByTier=response;_this.selectedDashboardOptions=MultiSelect.getSelectedDataFromPersistentObjects(customDashboardsByTier)})},AssociateDashboardsDialogController.DASHBOARD_ASSOCIATIONS_CHANGE_EVENT="DASHBOARD_ASSOCIATIONS_CHANGE_EVENT",AssociateDashboardsDialogController.$inject=["$scope","$rootScope","resourceManager","injectorService","notificationService","$modalInstance","dialogData"],AssociateDashboardsDialogController}(ControllerBase);exports.AssociateDashboardsDialogController=AssociateDashboardsDialogController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},DashboardTemplateViewService=function(_super){function DashboardTemplateViewService($rootScope,$location,navigationService,notificationService,$dialog){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$rootScope=$rootScope,this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.$dialog=$dialog}return __extends(DashboardTemplateViewService,_super),DashboardTemplateViewService.instance=function(){return AngularUtil.getADInjector().get(DashboardTemplateViewService.SERVICE_NAME)},DashboardTemplateViewService.prototype.viewDashboardTemplateManage=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,CustomDashboardViewService.instance().getCustomDashLocation(NavigationDataConstants.APP_CUSTOM_DASH_MANAGE)),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),NavigationService.instance().navigateTo(params.toString())},DashboardTemplateViewService.prototype.viewDashboardTemplateTier=function(applicationId,componentId,dashboardId,editMode){void 0===dashboardId&&(dashboardId=0);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,CustomDashboardViewService.instance().getCustomDashLocation(NavigationDataConstants.APP_COMPONENT_CUSTOM_DASH)),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.COMPONENT_ID,componentId),Util.isValidId(dashboardId)&&params.setNumberParam(UrlConstants.CUSTOM_DASHBOARD_ID,dashboardId),editMode&&params.setParam(UrlConstants.CUSTOM_DASHBOARD_MODE,UrlConstants.CUSTOM_DASHBOARD_MODE_EDIT),NavigationService.instance().navigateTo(params.toString())},DashboardTemplateViewService.prototype.viewDashboardTemplateNode=function(applicationId,nodeId,dashboardId,editMode){void 0===dashboardId&&(dashboardId=0);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,CustomDashboardViewService.instance().getCustomDashLocation(NavigationDataConstants.APP_NODE_CUSTOM_DASH)),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.NODE_ID,nodeId),Util.isValidId(dashboardId)&&params.setNumberParam(UrlConstants.CUSTOM_DASHBOARD_ID,dashboardId),editMode&&params.setParam(UrlConstants.CUSTOM_DASHBOARD_MODE,UrlConstants.CUSTOM_DASHBOARD_MODE_EDIT),NavigationService.instance().navigateTo(params.toString())},DashboardTemplateViewService.prototype.viewDashboardTemplateNodeInTier=function(applicationId,componentId,dashboardId){var _this=this;void 0===dashboardId&&(dashboardId=0),NodeUiService.instance().getApplicationComponentNodesByComponentId(componentId).then(function(response){var nodes=response;if(nodes&&nodes.length>0){var node=nodes[0];NotificationService.instance().displayMessage(ResourceManager.instance().getString("ui","ms_customDashViewEditTemplateOnNodeInTierMessage",[node.name]),""),_this.viewDashboardTemplateNode(applicationId,node.id,dashboardId)}else NotificationService.instance().displayError(ResourceManager.instance().getString("ui","ms_customDashViewEditTemplateOnNodeInTierErrorNoNodes"),"")})},DashboardTemplateViewService.prototype.viewDashboardTemplateTierOrNode=function(applicationId,componentId,nodeId,dashboardId,editMode){void 0===nodeId&&(nodeId=0),void 0===dashboardId&&(dashboardId=0),0!==nodeId?this.viewDashboardTemplateNode(applicationId,nodeId,dashboardId,editMode):this.viewDashboardTemplateTier(applicationId,componentId,dashboardId,editMode)},DashboardTemplateViewService.prototype.viewAssociateCustomDashboardDialog=function(scope,context,isTierDashboard){var _this=this;require(["app/view/customDashboard/templates/manage/dialogs/AssociateDashboardsDialogController"],function(associateDashDialog){scope.$on(associateDashDialog.AssociateDashboardsDialogController.DASHBOARD_ASSOCIATIONS_CHANGE_EVENT,function(e,data){DashboardTemplateUiService.instance().setAssociatedDashboards(data.selectedDashboardIds,context.componentId,isTierDashboard).then(function(){_this.viewDashboardTemplateTierOrNode(context.appId,context.componentId,context.nodeId,context.dashboardId)})});var opts={backdrop:!0,keyboard:!0,controller:associateDashDialog.AssociateDashboardsDialogController,templateUrl:"app/view/customDashboard/templates/manage/dialogs/AssociateDashboardsDialog.html",dialogClass:"modal",componentId:context.componentId,isTierDashboard:isTierDashboard},dlg=_this.$dialog.dialog(opts);dlg.open()})},DashboardTemplateViewService.prototype.viewAssociateCustomDashboardDialog2=function(scope,context,isTierDashboard){var _this=this;require(["app/view/customDashboard2/templates/manage/dialogs/AssociateDashboardsDialogController"],function(associateDashDialog){scope.$on(associateDashDialog.AssociateDashboardsDialogController.DASHBOARD_ASSOCIATIONS_CHANGE_EVENT,function(e,data){DashboardTemplateUiService.instance().setAssociatedDashboards2(data.selectedDashboardIds,context.componentId,isTierDashboard).then(function(){_this.viewDashboardTemplateTierOrNode(context.appId,context.componentId,context.nodeId,context.dashboardId)})});var opts={componentId:context.componentId,isTierDashboard:isTierDashboard};DialogService.instance().showDialog(associateDashDialog.AssociateDashboardsDialogController,"app/view/customDashboard2/templates/manage/dialogs/AssociateDashboardsDialogController","app/view/customDashboard2/templates/manage/dialogs/AssociateDashboardsDialog.html",opts)})},DashboardTemplateViewService.SERVICE_NAME="dashboardTemplateViewService",DashboardTemplateViewService.REFRESH_DASHBOARD_LIST="refresh-dashboard-list",DashboardTemplateViewService.$inject=["$rootScope","$location","navigationService","notificationService","$dialog"],DashboardTemplateViewService}(ViewServiceBase);adComponentsModule.service(DashboardTemplateViewService.SERVICE_NAME,DashboardTemplateViewService),define("app/view/customDashboard2/services/DashboardTemplateViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},WarRoomViewService=function(_super){function WarRoomViewService($location,$dialog,navigationService,notificationService,resourceManager){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.$dialog=$dialog,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager}return __extends(WarRoomViewService,_super),WarRoomViewService.instance=function(){return AngularUtil.getADInjector().get(WarRoomViewService.SERVICE_NAME)},WarRoomViewService.prototype.viewWarRoom=function(applicationId,warRoomKey,editMode){void 0===editMode&&(editMode=!1);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,this.getWarRoomLocation(NavigationDataConstants.APP_WARROOM_DASH)),Util.isDefAndNotNull(applicationId)&&params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),Util.isDefAndNotNull(warRoomKey)?(params.setParam(UrlConstants.WARROOM_KEY,warRoomKey),editMode?params.setParam(UrlConstants.CUSTOM_DASHBOARD_MODE,UrlConstants.CUSTOM_DASHBOARD_MODE_EDIT):params.setParam(UrlConstants.CUSTOM_DASHBOARD_MODE,UrlConstants.CUSTOM_DASHBOARD_MODE_VAL)):params.removeParam(UrlConstants.WARROOM_KEY),this.navigationService.navigateTo(params.toString())},WarRoomViewService.prototype.viewWarRoomList=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,this.getWarRoomLocation(NavigationDataConstants.APP_WARROOM_LIST)),params.removeParam(UrlConstants.WARROOM_JOIN),params.removeParam(UrlConstants.WARROOM_KEY),params.removeParam(UrlConstants.CUSTOM_DASHBOARD_MODE),Util.isDefAndNotNull(applicationId)&&params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},WarRoomViewService.prototype.getWarRoomKeyFromUrl=function(){var params=new URLParams;return params.getParam(UrlConstants.WARROOM_KEY)},WarRoomViewService.prototype.removeJoinParameter=function(){var params=new URLParams;params.removeParam(UrlConstants.WARROOM_JOIN),URLUtil.setLocationHashNoHistory(params.toString())},WarRoomViewService.prototype.getJoinWarRoomUrl=function(warRoom){var params=this.createUrlParamsWithCurrentTimeRange();return params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_WARROOM_DASH),params.setParam(UrlConstants.WARROOM_KEY,warRoom.warRoomKey),params.setParam(UrlConstants.CUSTOM_DASHBOARD_MODE,UrlConstants.CUSTOM_DASHBOARD_MODE_VAL),params.setParam(UrlConstants.WARROOM_JOIN,"true"),params.setNumberParam(UrlConstants.APPLICATION_ID,warRoom.applicationId),params.toString()},WarRoomViewService.prototype.viewWarRoomViewerError=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.WARROOM_VIEWER_ERROR),this.navigationService.navigateTo(params.toString())},WarRoomViewService.prototype.showWarRoomEndedError=function(appId){this.notificationService.displayError(this.getString("ms_warRoomSessionEnded"),""),this.viewWarRoomList(appId)},WarRoomViewService.prototype.viewCreateWarRoomSessionDialog=function(mode,template){DialogService.instance().showDialog("","app/view/customDashboard"+this.getVersionedCodePath()+"/warRoom/dialogs/CreateWarRoomSessionDialogController","app/view/customDashboard"+this.getVersionedCodePath()+"/warRoom/dialogs/CreateWarRoomSessionDialog.html",{mode:mode,template:template})},WarRoomViewService.prototype.viewWarRoomJoinURLDialog=function(warRoom){DialogService.instance().showDialog("","app/view/customDashboard"+this.getVersionedCodePath()+"/warRoom/dialogs/DisplayJoinURLDialogController","app/view/customDashboard"+this.getVersionedCodePath()+"/warRoom/dialogs/DisplayJoinURLDialog.html",{joinURL:WebUtil.getCurrentURLIncludingController()+"/#"+this.getJoinWarRoomUrl(warRoom)})},WarRoomViewService.prototype.viewEnterNotesDialog=function(warRoomKey,anonymousUser){DialogService.instance().showDialog("","app/view/customDashboard"+this.getVersionedCodePath()+"/warRoom/notesPanel/dialogs/EnterNotesDialogController","app/view/customDashboard"+this.getVersionedCodePath()+"/warRoom/notesPanel/dialogs/EnterNotesDialog.html",{warRoomKey:warRoomKey,anonymousUser:anonymousUser})},WarRoomViewService.prototype.viewManageWarRoomTemplates=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,this.getWarRoomLocation(NavigationDataConstants.APP_WARROOM_TEMPLATES)),Util.isDefAndNotNull(applicationId)&&params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},WarRoomViewService.prototype.openEndWarRoomDialog=function(warRoom){var dialogData={warRoom:warRoom};DialogService.instance().showDialog("","app/view/customDashboard2/warRoom/dialogs/EndWarRoomDialogController","app/view/customDashboard2/warRoom/dialogs/EndWarRoomDialog.html",dialogData)},WarRoomViewService.prototype.openCreateWarRoomTemplateDialog=function(warRoom,endWarRoom){var dialogData={warRoomKey:warRoom.warRoomKey,endWarRoom:endWarRoom};DialogService.instance().showDialog("","app/view/customDashboard2/warRoom/template/CreateWarRoomTemplateDialogController","app/view/customDashboard2/warRoom/template/CreateWarRoomTemplateDialog.html",dialogData)},WarRoomViewService.prototype.getWarRoomListNavigationTabs=function(applicationId){var _this=this,tabs=[];return tabs.push(NavigationTabUtil.create(this.getString("ms_myActiveWarRooms"),function(){_this.viewWarRoomList(applicationId)})),tabs.push(NavigationTabUtil.create(this.getString("ms_templates"),function(){_this.viewManageWarRoomTemplates(applicationId)})),tabs},WarRoomViewService.prototype.getWarRoomListAndTemplatesLocationBarEntries=function(applicationName,applicationId){var locationEntries=[{label:applicationName,clickFn:function(){ApplicationViewService.instance().viewApplicationDashboard(applicationId)}},{label:this.getString("ms_troubleshoot"),clickFn:function(){ApplicationViewService.instance().viewAppTroubleshoot(applicationId)}},{label:ResourceManager.instance().getString("ui","ms_warRoomNavItemLabel")}];return locationEntries},WarRoomViewService.prototype.getWarRoomLocationBarEntries=function(applicationName,applicationId,warRoomName){var _this=this,locationEntries=[{label:applicationName,clickFn:function(){ApplicationViewService.instance().viewApplicationDashboard(applicationId)}},{label:this.getString("ms_troubleshoot"),clickFn:function(){ApplicationViewService.instance().viewAppTroubleshoot(applicationId)}},{label:this.getString("ms_warRoomNavItemLabel"),clickFn:function(){_this.viewWarRoomList(applicationId)}},{label:warRoomName}];return locationEntries},WarRoomViewService.prototype.endWarRoomSession=function(warRoomKey){var _this=this;WarRoomUiService.instance().endWarRoom(warRoomKey).then(function(){_this.notificationService.displayMessage(_this.getString("ms_warRoomEndSuccessful"),""),WarRoomViewService.instance().viewWarRoomList(URLParams.getCurrentUrlParams().applicationId())})},WarRoomViewService.prototype.getVersionedCodePath=function(){return MasterService.instance().isNewCustomDashEnabled()?"2":""},WarRoomViewService.prototype.getWarRoomLocation=function(location){return location+(MasterService.instance().isNewCustomDashEnabled()?"":"1")},WarRoomViewService.SERVICE_NAME="warRoomViewService",WarRoomViewService.NEW_WARROOM_TOGGLE="newWarRoom",WarRoomViewService.$inject=["$location","$dialog","navigationService","notificationService","resourceManager"],WarRoomViewService}(ViewServiceBase);adComponentsModule.service("warRoomViewService",WarRoomViewService),define("app/view/customDashboard2/services/WarRoomViewService",function(){});var WidgetDataService=function(){function WidgetDataService($q,$rootScope,$timeout){this.$q=$q,this.$rootScope=$rootScope,this.$timeout=$timeout,this.timeRangeBuckets={}}return WidgetDataService.instance=function(){return AngularUtil.getADInjector().get(WidgetDataService.NAME)},WidgetDataService.prototype.getWidgetData=function(wdq){if(wdq.widgetType!=WidgetType.STATUS_LIGHT)throw new Error("Only STATUS_LIGHT supported for queueing widget data queries");var deferred=this.$q.defer(),deferredQuery={widgetDataQuery:wdq,widgetDataResult:deferred};return this.addQuery(wdq,deferredQuery),this.timeoutPromise||(this.timeoutPromise=this.$timeout(this.performRequests.bind(this),0,!0)),deferred.promise},WidgetDataService.prototype.performRequests=function(){for(var bucket in this.timeRangeBuckets){var queryMap=this.timeRangeBuckets[bucket],queries=[];for(var query in queryMap)queries.push(queryMap[query].widgetDataQuery);CustomDashboardUiService.instance().getAllHealthRuleWidgetData(queries).then(this.resolveQuery.bind(this,queryMap))}this.timeoutPromise=null,this.timeRangeBuckets={}},WidgetDataService.prototype.addQuery=function(wdq,deferredQuery){var trs=TimeRangeService.instance().convertToPreferenceString(wdq.timeRangeSpecifier);this.timeRangeBuckets[trs]||(this.timeRangeBuckets[trs]={}),this.timeRangeBuckets[trs][wdq.widgetGUID]=deferredQuery},WidgetDataService.prototype.resolveQuery=function(queryMap,resultsMap){for(var guid in resultsMap){var result=resultsMap[guid];queryMap[guid].widgetDataResult.resolve(result)}},WidgetDataService.NAME="widgetDataService",WidgetDataService.$inject=["$q","$rootScope","$timeout"],WidgetDataService}();appdynamicsModule.service(WidgetDataService.NAME,WidgetDataService),define("app/view/customDashboard2/services/WidgetDataService",function(){});var MetricLabelDirective=function(){function MetricLabelDirective(){return{restrict:"E",templateUrl:"app/view/customDashboard/widgets/metricLabel/MetricLabel.html",replace:!0,scope:{adWarRoomKey:"=",adWidgetProperties:"=",adCurrentDashboard:"=",adContext:"=",adWidgetController:"="},controller:"MetricLabelController"}}return MetricLabelDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-metric-label"),MetricLabelDirective),define("app/view/customDashboard/widgets/metricLabel/MetricLabelDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MetricLabelController=function(_super){function MetricLabelController($scope,resourceManager,notificationService,injectorService,timeRangeService,dashboardHelper,masterService,customDashboardUiService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.timeRangeService=timeRangeService,this.dashboardHelper=dashboardHelper,this.masterService=masterService,this.customDashboardUiService=customDashboardUiService,this.$scope.controller=this,this.init()}return __extends(MetricLabelController,_super),MetricLabelController.prototype.update=function(){this.updateMetricData()},MetricLabelController.prototype.init=function(){var _this=this;this.mainLabel=MetricLabelController.LOADING_MESSAGE,this.$scope.$watch("adWidgetProperties.label",function(){_this.formatMetricLabel()}),this.update()},MetricLabelController.prototype.metricLabelResponseHandler=function(data){this.metricLabelInfo=data,null==data?this.mainLabel=MetricLabelController.METRIC_VALUE_ERROR_MESSAGE:this.formatMetricLabel(),this.setOverlayMessage()},MetricLabelController.prototype.getReadableMetricValue=function(metricValue){var result=MetricLabelController.NO_DATA_METRIC_VALUE;return metricValue!==MetricLabelController.NO_DATA_AVAILABLE_CONSTANT&&StringUtils.isNumber(metricValue)&&(result=ViewUtil.formatNumber(parseInt(metricValue),1,1e6)),result},MetricLabelController.prototype.formatMetricLabel=function(){var formatString=this.$scope.adWidgetProperties.label,metricLabelInfo=this.metricLabelInfo,trs=WidgetHelper.getTRSFromWidgetProperties(this.$scope.adCurrentDashboard,this.$scope.adWidgetProperties,this.$scope.adWidgetController.isTemplate,this.timeRangeService);Util.isDefAndNotNull(metricLabelInfo)&&(_.isEmpty(formatString)?(this.mainLabel=this.getReadableMetricValue(metricLabelInfo.value),this.subLabel=metricLabelInfo.functionType):this.mainLabel=StringUtils.format(formatString,{v:this.getReadableMetricValue(metricLabelInfo.value),m:metricLabelInfo.metricDisplayName,f:metricLabelInfo.functionType,t:DateTimeUtil.getTimeRangeString(trs)}))},MetricLabelController.prototype.updateMetricData=function(){var _this=this;if(!Util.isDefAndNotNull(this.$scope.adWidgetProperties)||!Util.isDefAndNotNull(this.$scope.adCurrentDashboard)||this.$scope.adWidgetController.hasWarnings)return this.mainLabel="",void(this.$scope.adWidgetController.overlayMessage=MetricLabelController.NO_DATA_METRIC_VALUE);var widgetGuid=this.$scope.adWidgetProperties.widgetGuid;if(window.AD_REPORTS){var widgetKey="ID"+widgetGuid.replace(/-/g,"");return void this.metricLabelResponseHandler(window.widgetData[widgetKey])}var wmmc=_.findWhere(this.$scope.adCurrentDashboard.widgetsMetricMatchCriterias,{widgetGuid:widgetGuid});if(!wmmc)return this.mainLabel="",void this.setOverlayMessage();var metricLabelQuery={criteria:this.dashboardHelper.marshalWMMC(angular.copy(wmmc)),trs:WidgetHelper.getTimeRangeSpecifier(this.$scope.adCurrentDashboard,widgetGuid,WidgetHelper.isTemplate(this.$scope),this.timeRangeService)},widgetDataQuery=this.getNewWidgetDataQuery();widgetDataQuery.metricLabelQuery=metricLabelQuery,this.customDashboardUiService.getWidgetData(widgetDataQuery).then(function(response){var widgetData=_this.customDashboardUiService.getWidgetData_response(response),metricLabelInfo=widgetData.metricLabelInfo;_this.metricLabelResponseHandler(metricLabelInfo)})},MetricLabelController.prototype.setOverlayMessage=function(){var widgetGuid=this.$scope.adWidgetProperties.widgetGuid,wmmc=_.findWhere(this.$scope.adCurrentDashboard.widgetsMetricMatchCriterias,{widgetGuid:widgetGuid});this.$scope.adWidgetController.overlayMessage=Util.isDefAndNotNull(wmmc)?"":MetricLabelController.NO_METRIC_SET_MESSAGE},MetricLabelController.prototype.getResponsiveStyle=function(){var widgetFontSize,widgetProperties=this.$scope.adWidgetProperties,widgetElement=this.getContainerElement();return widgetProperties.useAutomaticFontSize?(widgetFontSize=WebUtil.getResponsiveFontSize(widgetElement.width(),widgetElement.height()),widgetElement.find(".sub-label").css("font-size",widgetFontSize/2),{"font-size":widgetFontSize}):(widgetElement.find(".sub-label").css("font-size",""),{})},MetricLabelController.NO_METRIC_SET_MESSAGE="No metric set.",MetricLabelController.LOADING_MESSAGE="Loading...",MetricLabelController.METRIC_VALUE_ERROR_MESSAGE="Metric not selected / invalid",MetricLabelController.NO_DATA_METRIC_VALUE="--",MetricLabelController.NO_DATA_AVAILABLE_CONSTANT="-1",MetricLabelController.$inject=["$scope","resourceManager","notificationService","injectorService","timeRangeService","dashboardHelper","masterService","customDashboardUiService"],MetricLabelController}(WidgetBaseController);appdynamicsModule.controller("MetricLabelController",MetricLabelController),define("app/view/customDashboard/widgets/metricLabel/MetricLabelController",function(){});var HealthStatusDirective=function(){function HealthStatusDirective(){return{restrict:"E",templateUrl:"app/view/customDashboard/widgets/healthStatus/HealthStatus.html",replace:!1,scope:{adWidgetProperties:"=",adCurrentDashboard:"=",adContext:"=",adWidgetController:"=",adWarRoomKey:"="},controller:"HealthStatusController"}}return HealthStatusDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-health-status"),HealthStatusDirective),define("app/view/customDashboard/widgets/healthStatus/HealthStatusDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},HealthStatusController=function(_super){function HealthStatusController($scope,resourceManager,notificationService,injectorService,timeRangeService,masterService,customDashboardUiService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.timeRangeService=timeRangeService,this.masterService=masterService,this.customDashboardUiService=customDashboardUiService,this.$scope.controller=this,this.init()
}return __extends(HealthStatusController,_super),HealthStatusController.prototype.init=function(){this.statusLightConfig={},this.statusLightConfig.status=PerformanceState.UNDEFINED,this.updateStatusLight()},HealthStatusController.prototype.updateStatusLightConfig=function(state){this.statusLightConfig.status=state.replace(/"/g,""),this.setOverlayMessage()},HealthStatusController.prototype.updateStatusLight=function(){var _this=this;if(!Util.isDefAndNotNull(this.$scope.adWidgetProperties)||!Util.isDefAndNotNull(this.$scope.adCurrentDashboard)||!Util.isDefAndNotNull(this.$scope.adWidgetProperties.applicationId))return void this.setOverlayMessage();var widgetGuid=(this.getCurrentUrlParams(),this.$scope.adWidgetProperties.widgetGuid);if(window.AD_REPORTS){var widgetKey="ID"+widgetGuid.replace(/-/g,"");return void this.updateStatusLightConfig(window.widgetData[widgetKey])}var widgetDataQuery=this.getNewWidgetDataQuery();widgetDataQuery.timeRangeSpecifier=WidgetHelper.getTimeRangeSpecifier(this.$scope.adCurrentDashboard,widgetGuid,WidgetHelper.isTemplate(this.$scope),this.timeRangeService),widgetDataQuery.templateId=this.$scope.adWidgetProperties.policyTemplateId,widgetDataQuery.appId=this.$scope.adWidgetProperties.applicationId,this.customDashboardUiService.getWidgetData(widgetDataQuery).then(function(response){var widgetData=_this.customDashboardUiService.getWidgetData_response(response),performanceState=widgetData.performanceState;_this.updateStatusLightConfig(performanceState)})},HealthStatusController.prototype.setOverlayMessage=function(){return!Util.isDefAndNotNull(this.$scope.adWidgetProperties.applicationId)&&!Util.isDefAndNotNull(this.$scope.adWidgetProperties.policyTemplateId)||0==this.$scope.adWidgetProperties.applicationId&&0==this.$scope.adWidgetProperties.policyTemplateId?void(this.$scope.adWidgetController.overlayMessage=HealthStatusController.NO_HEALTH_RULE_SET_MESSAGE):void(this.$scope.adWidgetController.overlayMessage="")},HealthStatusController.prototype.refreshWidget=function(e,data){WidgetHelper.isRefreshTargetEqualsCurrentWidget(this.$scope.adWidgetProperties,this.$scope.adCurrentDashboard,data.refreshTarget)&&!this.$scope.adWidgetController.hasWarnings&&this.updateStatusLight()},HealthStatusController.prototype.update=function(){this.updateStatusLight()},HealthStatusController.NO_HEALTH_RULE_SET_MESSAGE="No health rule set.",HealthStatusController.$inject=["$scope","resourceManager","notificationService","injectorService","timeRangeService","masterService","customDashboardUiService"],HealthStatusController}(WidgetBaseController);appdynamicsModule.controller("HealthStatusController",HealthStatusController),define("app/view/customDashboard/widgets/healthStatus/HealthStatusController",function(){});var StreamingGraphDirective=function(){function StreamingGraphDirective(){return{restrict:"E",templateUrl:"app/view/customDashboard/widgets/streamingGraph/StreamingGraph.html",replace:!1,scope:{adWarRoomKey:"=",adIsPresenter:"=",adWidgetProperties:"=",adCurrentDashboard:"=",adContext:"=",adWidgetController:"="},controller:"StreamingGraphController"}}return StreamingGraphDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-streaming-graph"),StreamingGraphDirective),define("app/view/customDashboard/widgets/streamingGraph/StreamingGraphDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},StreamingGraphController=function(_super){function StreamingGraphController($scope,$rootScope,$q,$interval,resourceManager,notificationService,injectorService,timeRangeService,warRoomUiService,listQueryService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$q=$q,this.$interval=$interval,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.timeRangeService=timeRangeService,this.warRoomUiService=warRoomUiService,this.listQueryService=listQueryService,this.eventsData=null,this.widgetUpdater=null,this.hasGraphData=!1,this.chart=null,this.seriesTypes=[],this.chartSeriesMetaData=[],this.$scope.controller=this,this.init()}return __extends(StreamingGraphController,_super),StreamingGraphController.prototype.init=function(){var _this=this;this.widgetUpdater=this.$interval(function(){_this.refreshWidget({},{refreshTarget:"*",isDataRefresh:!0})},2e3),WidgetHelper.setReflowHandler(this.$scope,this.$scope.adWidgetController.widgetElement,function(){_this.reflowStreamingGraph()})},StreamingGraphController.prototype.initStreamingMetric=function(metricId,nodeId){MasterService.instance().isSharedDashboardPageRequestWithToken()||this.warRoomUiService.startStreamingMetrics([metricId],this.$scope.adWarRoomKey,nodeId)},StreamingGraphController.prototype.reflowStreamingGraph=function(){Util.isDefAndNotNull(this.chart)?this.isNoSeriesAdded()||this.chart.reflow():this.redrawStreamingGraph()},StreamingGraphController.prototype.redrawStreamingGraph=function(){var _this=this;this.updateGraphConfig(),this.chartSeriesMetaData=[],this.chart=HighChartsHelper.updateHighcharts(this.$scope.adWidgetController.containerId,this.chart,this.graphConfig),_.delay(function(){Util.isDefAndNotNull(_this.chart)&&_this.chart.reflow()},2e3)},StreamingGraphController.prototype.diffEvents=function(currentData,newData){void 0===currentData&&(currentData=[]),void 0===newData&&(newData=[]);var drawnPoints=_.map(currentData,function(pt){return pt.x});return _.filter(newData,function(pt){return-1===_.indexOf(drawnPoints,pt.x)})},StreamingGraphController.prototype.updateStreamingSeries=function(){var _this=this;if(!Util.isDefAndNotNull(this.graphConfig)||!Util.isDefAndNotNull(this.chart))return void this.setOverlayMessage();this.listQueryService.exec({eventStreamItemFilter:this.getWarRoomEventsFilter()},{durationInMinutes:10080,type:TimeRangeSpecifierType.BEFORE_NOW}).then(function(events){events&&events.data&&(_this.eventsData=events.data)});var widgetGuid=this.$scope.adWidgetProperties.widgetGuid,queries=WidgetHelper.getQueries(widgetGuid,this.$scope.adCurrentDashboard,this.$scope.adContext,this.timeRangeService);this.seriesTypes=WidgetHelper.getSeriesTypes(widgetGuid,this.$scope.adCurrentDashboard);for(var index=0;index<queries.length;index++){var leafMetricExpression=queries[index].metricMatchCriteria.metricExpression,metricId=leafMetricExpression.metricDefinition.metricId,metricName=leafMetricExpression.metricDefinition.logicalMetricName,nodeId=leafMetricExpression.metricDefinition.scope.entityId,chartSeriesMetaDataObj=_.findWhere(this.chartSeriesMetaData,{metricId:metricId,nodeId:nodeId}),chartType=this.seriesTypes[index];if(!Util.isDefAndNotNull(chartSeriesMetaDataObj)){queries[index].sequenceId=0;var seriesObject={id:metricId.toString(),name:metricName,data:[],type:HighChartsHelper.getHighChartsChartType(chartType)};return this.chart.addSeries(seriesObject),this.chartSeriesMetaData.push({metricId:metricId,nodeId:nodeId,nextSequenceId:0,highChartSeriesObject:this.chart.get(metricId.toString()),chartType:chartType}),void this.initStreamingMetric(metricId,nodeId)}if(queries[index].sequenceId=chartSeriesMetaDataObj.nextSequenceId,chartType!==chartSeriesMetaDataObj.chartType)return chartSeriesMetaDataObj.chartType=chartType,void this.redrawStreamingGraph();0===chartSeriesMetaDataObj.nextSequenceId&&this.reflowStreamingGraph()}if(this.eventsData){var eventData=[];_.each(this.eventsData,function(event){eventData.push({x:event[0],y:0,name:event[1],eventInfo:event[2],marker:{enabled:!0,symbol:"url("+_this.getEventImage(event[3])+")"}})});var eventSeries=_.find(this.chart.series,function(series){return series.name===StreamingGraphController.WARROOM_EVENTS_SERIES_NAME});eventSeries?_.forEach(this.diffEvents(eventSeries.data,eventData),function(point){eventSeries.addPoint(point,!1,!1,!0)}):this.chart.addSeries({id:StreamingGraphController.WARROOM_EVENTS_SERIES_NAME,name:StreamingGraphController.WARROOM_EVENTS_SERIES_NAME,type:"scatter",color:"yellow",data:eventData})}if(this.chartSeriesMetaData.length>0)for(var index=this.chartSeriesMetaData.length-1;index>=0;){var metricId=this.chartSeriesMetaData[index].metricId,metricIdExistsInQueries=_.some(queries,function(query){var leafMetricExpression=query.metricMatchCriteria.metricExpression;return leafMetricExpression.metricDefinition.metricId===metricId});metricIdExistsInQueries||(this.chartSeriesMetaData[index].highChartSeriesObject.remove(!1),this.chartSeriesMetaData.splice(index,1)),index--}return _.isEmpty(queries)?(this.graphConfig.series=[],void this.setOverlayMessage()):void(MasterService.instance().isSharedDashboardPageRequestWithToken()?this.warRoomUiService.getStreamingMetricDataUsingToken(queries,this.$scope.adWarRoomKey,this.getCurrentUrlParams().getSharedDashboardToken()).then(function(graphWidgetData){_this.updateGraphData(graphWidgetData)}):this.warRoomUiService.getStreamingMetricData(queries,this.$scope.adWarRoomKey).then(function(graphWidgetData){_this.updateGraphData(graphWidgetData)}))},StreamingGraphController.prototype.getEventImage=function(status){return status===Severity.WARNING?ImageUtil.iconEventOverlayNeutral:status===Severity.CRITICAL?ImageUtil.iconEventOverlayBad:ImageUtil.iconEventOverlayGood},StreamingGraphController.prototype.updateGraphConfig=function(){if(!_.isEmpty(this.$scope.adWidgetProperties)){var uiState=this.$scope.adWidgetProperties;this.graphConfig=HighChartsHelper.getDefaultGraphConfig(this.$scope.adWidgetController.containerId),this.graphConfig.chart.animation={duration:1e3,easing:"swing"},this.hasGraphData&&(this.graphConfig.lang.noData="Initializing..."),HighChartsHelper.setGraphPlotAreaBackgroundColors(this.graphConfig,uiState),HighChartsHelper.setGraphAxisTitleAndStyle(this.graphConfig,uiState),HighChartsHelper.setGraphAxisType(this.graphConfig,uiState),this.graphConfig.yAxis.title.text=uiState.verticalAxisLabel,uiState.compactMode&&HighChartsHelper.showGraphAxisLabels(this.graphConfig,!1),uiState.showLegend&&(this.graphConfig.legend.enabled=uiState.showLegend?!0:!1,this.graphConfig=HighChartsHelper.setLegendPropsAndGetNewHCConfig(this.$scope.adWidgetController.widgetElement,this.$scope.adWidgetProperties,this.graphConfig,!1));var wmmcUIStates=this.$scope.adCurrentDashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates,colors=[],usedDefaultColors=0;_.each(wmmcUIStates,function(wmmcUIState){colors.push(wmmcUIState.colorPalette.colors.length>0?Util.getColorString(wmmcUIState.colorPalette.colors[0]):AdColorPalette.DEFAULT_PALETTE_20[usedDefaultColors++])}),this.graphConfig.colors=colors,uiState.stackMode?(this.graphConfig.plotOptions.area.stacking="normal",this.graphConfig.plotOptions.column.stacking="normal"):(this.graphConfig.plotOptions.area.stacking=null,this.graphConfig.plotOptions.column.stacking=null)}},StreamingGraphController.prototype.addPointToChartSeries=function(chartSeriesMetaDataObj,datapoint){chartSeriesMetaDataObj.highChartSeriesObject.data.length<180?chartSeriesMetaDataObj.highChartSeriesObject.addPoint([datapoint.time,datapoint.value],!1,!1,!0):chartSeriesMetaDataObj.highChartSeriesObject.addPoint([datapoint.time,datapoint.value],!1,!0,!0)},StreamingGraphController.prototype.updateGraphData=function(data){{var _this=this,widgetGuid=this.$scope.adWidgetProperties.widgetGuid;WidgetHelper.getSeriesInfo(widgetGuid,this.$scope.adCurrentDashboard)}_.isEmpty(data.graphSeriesData)||(_.each(data.graphSeriesData,function(graphSeriesData){if(graphSeriesData.length>0){var metricId=graphSeriesData[0].metricDefinition.metricId,nodeId=graphSeriesData[0].metricDefinition.entityDefinition.entityId,nextSeqId=graphSeriesData[0].nextSequenceId,chartSeriesMetaDataObj=_.findWhere(_this.chartSeriesMetaData,{metricId:metricId,nodeId:nodeId});if(Util.isDefAndNotNull(chartSeriesMetaDataObj)){chartSeriesMetaDataObj.nextSequenceId=nextSeqId;var seriesData=graphSeriesData[0].data;_.each(seriesData,function(datapoint){null!==datapoint.value&&(_this.hasGraphData=!0,_this.addPointToChartSeries(chartSeriesMetaDataObj,datapoint))});var lastPointInSeries=_.last(seriesData),lastPointInRenderedChart=_.last(chartSeriesMetaDataObj.highChartSeriesObject.data);_.isObject(lastPointInSeries)&&_.isObject(lastPointInRenderedChart)&&null===lastPointInSeries.value&&null!==lastPointInRenderedChart.y&&lastPointInSeries.time-lastPointInRenderedChart.x>12e4&&_this.addPointToChartSeries(chartSeriesMetaDataObj,lastPointInSeries)}}}),this.chart.redraw()),this.setOverlayMessage()},StreamingGraphController.prototype.isNoSeriesAdded=function(){var mmcMap=this.$scope.adWidgetProperties.metricMatchCriteriaNameToMetricType;return _.isNull(mmcMap)||_.isUndefined(mmcMap)||_.isArray(mmcMap)&&0===mmcMap.length?!0:!1},StreamingGraphController.prototype.setOverlayMessage=function(){return this.isNoSeriesAdded()?void(this.$scope.adWidgetController.overlayMessage=StreamingGraphController.NO_SERIES_SET_MESSAGE):void(this.$scope.adWidgetController.overlayMessage="")},StreamingGraphController.prototype.getWarRoomEventsFilter=function(){var filter={};return filter.guid=this.$scope.adWarRoomKey,filter.timeRange={type:TimeRangeSpecifierType.BEFORE_NOW,durationInMinutes:15},filter.warRoomNote=!0,filter},StreamingGraphController.prototype.refreshWidget=function(e,data){WidgetHelper.isRefreshTargetEqualsCurrentWidget(this.$scope.adWidgetProperties,this.$scope.adCurrentDashboard,data.refreshTarget)&&(data.isDataRefresh&&!this.$scope.adWidgetController.hasWarnings?this.updateStreamingSeries():this.redrawStreamingGraph())},StreamingGraphController.prototype.update=function(){this.updateStreamingSeries()},StreamingGraphController.prototype.destroy=function(){if(this.widgetUpdater&&(this.$interval.cancel(this.widgetUpdater),this.widgetUpdater=null),_.isObject(this.chart))try{this.chart.destroy()}catch(err){ADLoggerService.error("destroy chart failed. "+err)}},StreamingGraphController.NO_SERIES_SET_MESSAGE="No series set.",StreamingGraphController.WARROOM_EVENTS_SERIES_NAME="warroom-events-series",StreamingGraphController.$inject=["$scope","$rootScope","$q","$interval","resourceManager","notificationService","injectorService","timeRangeService","warRoomUiService","listQueryService"],StreamingGraphController}(WidgetBaseController);appdynamicsModule.controller("StreamingGraphController",StreamingGraphController),define("app/view/customDashboard/widgets/streamingGraph/StreamingGraphController",function(){});var TimeseriesGraphDirective=function(){function TimeseriesGraphDirective(){return{restrict:"E",templateUrl:"app/view/customDashboard/widgets/timeseriesGraph/TimeseriesGraph.html",replace:!1,scope:{adWarRoomKey:"=",adWidgetProperties:"=",adCurrentDashboard:"=",adContext:"=",adWidgetController:"="},controller:"TimeseriesGraphController"}}return TimeseriesGraphDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-timeseries-graph"),TimeseriesGraphDirective),define("app/view/customDashboard/widgets/timeseriesGraph/TimeseriesGraphDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},TimeseriesGraphController=function(_super){function TimeseriesGraphController($scope,$q,resourceManager,notificationService,injectorService,timeRangeService,masterService,customDashboardUiService,listQueryService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$q=$q,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.timeRangeService=timeRangeService,this.masterService=masterService,this.customDashboardUiService=customDashboardUiService,this.listQueryService=listQueryService,this.chart=null,this.seriesTypes=[],this.eventY=0,this.$scope.controller=this,$scope.$on(EventSelectorController.EVENT_SELECTION_EVENT,function(e,data){WidgetHelper.isRefreshTargetEqualsCurrentWidget(_this.$scope.adWidgetProperties,_this.$scope.adCurrentDashboard,data.widgetGuid)&&_this.updateEventData(e,data)}),this.init()}return __extends(TimeseriesGraphController,_super),TimeseriesGraphController.prototype.init=function(){var _this=this;this.graphConfig=HighChartsHelper.getDefaultGraphConfig(this.$scope.adWidgetController.containerId),this.updateTimeSeries(),WidgetHelper.setReflowHandler(this.$scope,this.$scope.adWidgetController.widgetElement,function(){_this.reflowTimeSeries()}),this.reflowTimeSeries()},TimeseriesGraphController.prototype.setOverlayMessage=function(){var mmcMap=this.$scope.adWidgetProperties.metricMatchCriteriaNameToMetricType;return _.isNull(mmcMap)||_.isUndefined(mmcMap)||_.isArray(mmcMap)&&0===mmcMap.length?void(this.$scope.adWidgetController.overlayMessage=TimeseriesGraphController.NO_SERIES_SET_MESSAGE):void(this.$scope.adWidgetController.overlayMessage="")},TimeseriesGraphController.prototype.reflowTimeSeries=function(){this.graphConfig=HighChartsHelper.setLegendPropsAndGetNewHCConfig(this.$scope.adWidgetController.widgetElement,this.$scope.adWidgetProperties,this.graphConfig,!0),this.chart=HighChartsHelper.updateHighcharts(this.$scope.adWidgetController.containerId,this.chart,this.graphConfig)},TimeseriesGraphController.prototype.updateEventData=function(e,data){data.widgetGuid===this.$scope.adWidgetProperties.widgetGuid&&(this.$scope.adWidgetProperties.query={eventStreamItemFilter:data.eventStreamItemFilter},this.updateTimeSeries())},TimeseriesGraphController.prototype.updateTimeSeries=function(){var _this=this,widgetGuid=this.$scope.adWidgetProperties.widgetGuid,queries=WidgetHelper.getQueries(widgetGuid,this.$scope.adCurrentDashboard,this.$scope.adContext,this.timeRangeService);if(this.seriesTypes=WidgetHelper.getSeriesTypes(widgetGuid,this.$scope.adCurrentDashboard),window.AD_REPORTS){var widgetKey="ID"+widgetGuid.replace(/-/g,""),graphData=window.widgetData[widgetKey];return void this.updateGraphConfig(graphData,this.listQueryService.getListData(graphData.eventData,!1))}if(_.isEmpty(queries))return this.graphConfig.series=[],void this.setOverlayMessage();var uiState=this.$scope.adWidgetProperties,trs=WidgetHelper.getTRSFromWidgetProperties(this.$scope.adCurrentDashboard,uiState,this.$scope.adWidgetController.isTemplate,this.timeRangeService),showEvents=this.$scope.adWidgetProperties.showEvents===!0,eventQuery=this.$scope.adWidgetProperties.query,widgetDataQuery=this.getNewWidgetDataQuery();showEvents&&eventQuery&&eventQuery.eventStreamItemFilter&&(widgetDataQuery.eventStreamUiItemQuery=this.listQueryService.getEventsQuery(eventQuery,trs)),widgetDataQuery.metricQueries=queries,widgetDataQuery.widgetType=WidgetType.TIMESERIES_GRAPH,this.customDashboardUiService.getWidgetData(widgetDataQuery).then(function(response){var widgetData=_this.customDashboardUiService.getWidgetData_response(response),graphWidgetData=widgetData.graphWidgetData,eventStreamQueryItemData=widgetData.eventStreamUiItemQueryResult,eventListData=_this.listQueryService.getListData(eventStreamQueryItemData,!1);_this.updateGraphConfig(graphWidgetData,eventListData)})},TimeseriesGraphController.prototype.updateGraphConfig=function(data,events){var _this=this,widgetGuid=this.$scope.adWidgetProperties.widgetGuid,allSeriesInfo=WidgetHelper.getSeriesInfo(widgetGuid,this.$scope.adCurrentDashboard);if(this.graphConfig=HighChartsHelper.getDefaultGraphConfig(this.$scope.adWidgetController.containerId),!_.isEmpty(data.graphSeriesData)){(this.$scope.adWidgetController.isTemplate||this.$scope.adWidgetController.isWarRoom)&&(this.$scope.adWidgetController.chartMetricsMetaData=WidgetHelper.storeMetricDefinitionsOnScope(data.graphSeriesData));var newseries=[];if(_.each(data.graphSeriesData,function(graphSeriesData,index){var seriesInfo=allSeriesInfo[index],wmmcUIStates=_this.$scope.adCurrentDashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates,wmmcUIState=_.findWhere(wmmcUIStates,seriesInfo)||{},colorPalette=new AdColorPalette(wmmcUIState.colorPalette?wmmcUIState.colorPalette.colors:[]),series=_.map(graphSeriesData,function(gsData){return HighChartsHelper.getGraphPlottingData(gsData,_this.seriesTypes[index],colorPalette)});Array.prototype.push.apply(newseries,series)}),this.graphConfig.series=HighChartsHelper.getSortedDataSeries(newseries),events&&events.data){var minMax=this.getMinMax(newseries);this.minDataValue=minMax.min,this.maxDataValue=minMax.max;var eventData=[];_.each(events.data,function(event){eventData.push({x:event[0],y:_this.getEventY(),name:event[1],eventInfo:event[2],marker:{enabled:!0,symbol:"url("+_this.getEventImage(event[3])+")"}})},this),this.graphConfig.series.push({name:"Events",type:"scatter",color:"yellow",data:eventData})}this.graphConfig.colors=AdColorPalette.DEFAULT_PALETTE_20}if(!_.isEmpty(this.$scope.adWidgetProperties)){var uiState=this.$scope.adWidgetProperties,trs=WidgetHelper.getTRSFromWidgetProperties(this.$scope.adCurrentDashboard,uiState,this.$scope.adWidgetController.isTemplate,this.timeRangeService);if(HighChartsHelper.setGraphPlotAreaBackgroundColors(this.graphConfig,uiState),HighChartsHelper.setGraphAxisTitleAndStyle(this.graphConfig,uiState),HighChartsHelper.setGraphAxisType(this.graphConfig,uiState),uiState.showTimeRange){var trStr=DateTimeUtil.getTimeRangeString(trs);this.$scope.adWidgetController.timeRange=trStr}else this.$scope.adWidgetController.timeRange="";this.graphConfig.yAxis.title.text=uiState.verticalAxisLabel,uiState.compactMode&&HighChartsHelper.showGraphAxisLabels(this.graphConfig,!1),HighChartsHelper.setGraphXAxisMinMax(this.graphConfig,trs),uiState.showLegend&&(this.graphConfig.legend.enabled=uiState.showLegend?!0:!1,this.graphConfig=HighChartsHelper.setLegendPropsAndGetNewHCConfig(this.$scope.adWidgetController.widgetElement,this.$scope.adWidgetProperties,this.graphConfig,!1)),uiState.stackMode?(this.graphConfig.plotOptions.area.stacking="normal",this.graphConfig.plotOptions.column.stacking="normal"):(this.graphConfig.plotOptions.area.stacking=null,this.graphConfig.plotOptions.column.stacking=null)}this.setOverlayMessage(),_.defer(function(){_this.reflowTimeSeries()})},TimeseriesGraphController.prototype.getMinMax=function(allSeries){var values=[];_.each(allSeries,function(series){_.each(series.data,function(data){values.push(data[1])})});var minMax={min:_.min(values),max:_.max(values)};return null===minMax.min&&(minMax.min=0),null===minMax.max&&(minMax.max=0),minMax},TimeseriesGraphController.prototype.getEventY=function(){return this.minDataValue},TimeseriesGraphController.prototype.refreshWidget=function(e,data){WidgetHelper.isRefreshTargetEqualsCurrentWidget(this.$scope.adWidgetProperties,this.$scope.adCurrentDashboard,data.refreshTarget)&&!this.$scope.adWidgetController.hasWarnings&&this.updateTimeSeries()},TimeseriesGraphController.prototype.update=function(){this.updateTimeSeries()},TimeseriesGraphController.prototype.destroy=function(){_.isObject(this.chart)&&this.chart.destroy()},TimeseriesGraphController.prototype.getEventImage=function(status){return status===Severity.WARNING?ImageUtil.event_severity_warn:status===Severity.CRITICAL?ImageUtil.event_severity_critical:ImageUtil.event_severity_info},TimeseriesGraphController.NO_SERIES_SET_MESSAGE="No series set.",TimeseriesGraphController.$inject=["$scope","$q","resourceManager","notificationService","injectorService","timeRangeService","masterService","customDashboardUiService","listQueryService"],TimeseriesGraphController}(WidgetBaseController);appdynamicsModule.controller("TimeseriesGraphController",TimeseriesGraphController),define("app/view/customDashboard/widgets/timeseriesGraph/TimeseriesGraphController",function(){});var PieChartDirective=function(){function PieChartDirective(){return{restrict:"E",templateUrl:"app/view/customDashboard/widgets/pieChart/PieChart.html",replace:!1,scope:{adWarRoomKey:"=",adWidgetProperties:"=",adCurrentDashboard:"=",adContext:"=",adWidgetController:"="},controller:"PieChartController"}}return PieChartDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-pie-chart"),PieChartDirective),define("app/view/customDashboard/widgets/pieChart/PieChartDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},PieChartController=function(_super){function PieChartController($scope,resourceManager,notificationService,injectorService,timeRangeService,masterService,customDashboardUiService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.timeRangeService=timeRangeService,this.masterService=masterService,this.customDashboardUiService=customDashboardUiService,this.chart=null,this.$scope.controller=this,this.init()}return __extends(PieChartController,_super),PieChartController.prototype.init=function(){var _this=this;this.pieChartConfig=HighChartsHelper.getDefaultPieConfig(this.$scope.adWidgetController.containerId),this.updatePie(),WidgetHelper.setReflowHandler(this.$scope,this.$scope.adWidgetController.widgetElement,function(){_this.reflowPie()}),this.reflowPie()},PieChartController.prototype.setOverlayMessage=function(){var mmcMap=this.$scope.adWidgetProperties.metricMatchCriteriaNameToMetricType;return _.isNull(mmcMap)||_.isUndefined(mmcMap)||_.isArray(mmcMap)&&0===mmcMap.length?void(this.$scope.adWidgetController.overlayMessage=PieChartController.NO_SERIES_SET_MESSAGE):void(this.$scope.adWidgetController.overlayMessage="")},PieChartController.prototype.reflowPie=function(){this.pieChartConfig=HighChartsHelper.setLegendPropsAndGetNewHCConfig(this.$scope.adWidgetController.widgetElement,this.$scope.adWidgetProperties,this.pieChartConfig,!0),this.chart=HighChartsHelper.updateHighcharts(this.$scope.adWidgetController.containerId,this.chart,this.pieChartConfig)},PieChartController.prototype.updatePie=function(){var _this=this,widgetGuid=this.$scope.adWidgetProperties.widgetGuid;if(window.AD_REPORTS){var widgetKey="ID"+widgetGuid.replace(/-/g,"");return void this.updatePieChartConfig(window.widgetData[widgetKey])}var queries=WidgetHelper.getQueries(widgetGuid,this.$scope.adCurrentDashboard,this.$scope.adContext,this.timeRangeService);if(_.isEmpty(queries))return this.pieChartConfig.series=[],void this.setOverlayMessage();var widgetDataQuery=this.getNewWidgetDataQuery();widgetDataQuery.metricQueries=queries,widgetDataQuery.widgetType=WidgetType.PIE,this.customDashboardUiService.getWidgetData(widgetDataQuery).then(function(response){var widgetData=_this.customDashboardUiService.getWidgetData_response(response),pieWidgetData=widgetData.pieWidgetData;_this.updatePieChartConfig(pieWidgetData)})},PieChartController.prototype.updatePieChartConfig=function(data){var _this=this;if(!this.isDataEmptyAfterValidation(data)){var widgetGuid=this.$scope.adWidgetProperties.widgetGuid,allSeriesInfo=WidgetHelper.getSeriesInfo(widgetGuid,this.$scope.adCurrentDashboard);if(this.pieChartConfig=HighChartsHelper.getDefaultPieConfig(this.$scope.adWidgetController.containerId),!_.isEmpty(data.pieSeriesData)){(this.$scope.adWidgetController.isTemplate||this.$scope.adWidgetController.isWarRoom)&&(this.$scope.adWidgetController.chartMetricsMetaData=WidgetHelper.storeMetricDefinitionsOnScope(data.pieSeriesData));var newseries=[];this.removeInvalidData(data),_.each(data.pieSeriesData,function(pieSeriesData,index){var seriesInfo=allSeriesInfo[index],wmmcUIStates=_this.$scope.adCurrentDashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates,wmmcUIState=_.findWhere(wmmcUIStates,seriesInfo)||{},colorPalette=new AdColorPalette(wmmcUIState.colorPalette?wmmcUIState.colorPalette.colors:[]),series=_.map(pieSeriesData,function(psData){return _this.getPiePlottingData(psData,colorPalette)});Array.prototype.push.apply(newseries,series)}),this.pieChartConfig.series[0].data=HighChartsHelper.getSortedDataSeries(newseries),this.pieChartConfig.colors=AdColorPalette.DEFAULT_PALETTE_20}if(!_.isEmpty(this.$scope.adWidgetProperties)){var uiState=this.$scope.adWidgetProperties,widgetWidth=this.$scope.adWidgetController.widgetElement.width();if(uiState.showTimeRange){var trs=WidgetHelper.getTRSFromWidgetProperties(this.$scope.adCurrentDashboard,uiState,this.$scope.adWidgetController.isTemplate,this.timeRangeService),trStr=DateTimeUtil.getTimeRangeString(trs);this.$scope.adWidgetController.timeRange=trStr}else this.$scope.adWidgetController.timeRange="";HighChartsHelper.setPieLabels(this.pieChartConfig,uiState,widgetWidth),HighChartsHelper.setPieLabelStyle(this.pieChartConfig,uiState),HighChartsHelper.setPieToolTipWidth(this.pieChartConfig,widgetWidth),uiState.showLegend&&(this.pieChartConfig.legend.enabled=uiState.showLegend?!0:!1,this.pieChartConfig=HighChartsHelper.setLegendPropsAndGetNewHCConfig(this.$scope.adWidgetController.widgetElement,this.$scope.adWidgetProperties,this.pieChartConfig,!1))}this.setOverlayMessage(),_.defer(function(){_this.reflowPie()})}},PieChartController.prototype.getPiePlottingData=function(psData,colorPalette){var pieSlice={};return pieSlice.name=psData.name,pieSlice.y=psData.value,pieSlice.color=colorPalette.isEmpty()?null:colorPalette.getNextColor(),null==pieSlice.color&&delete pieSlice.color,pieSlice},PieChartController.prototype.isDataEmptyAfterValidation=function(data){var dataEmpty=!0;if(data.pieSeriesData.length>0)for(var i=0;i<data.pieSeriesData.length&&dataEmpty;i++)if(_.isArray(data.pieSeriesData[i])&&data.pieSeriesData[i].length>0)for(var slices=data.pieSeriesData[i],j=0;j<slices.length&&dataEmpty;j++)slices[j].value>=0&&(dataEmpty=!1);return dataEmpty&&(this.$scope.adWidgetController.overlayMessage=this.$scope.adWidgetController.getString("ms_noDataAvailable"),this.chart=null),dataEmpty},PieChartController.prototype.removeInvalidData=function(data){if(data.pieSeriesData.length>0)for(var i=data.pieSeriesData.length-1;i>=0;i--)if(_.isArray(data.pieSeriesData[i])&&data.pieSeriesData[i].length>0)for(var j=data.pieSeriesData[i].length-1;j>=0;j--)data.pieSeriesData[i][j].value<0&&data.pieSeriesData[i].splice(j,1)},PieChartController.prototype.refreshWidget=function(e,data){WidgetHelper.isRefreshTargetEqualsCurrentWidget(this.$scope.adWidgetProperties,this.$scope.adCurrentDashboard,data.refreshTarget)&&!this.$scope.adWidgetController.hasWarnings&&this.updatePie()},PieChartController.prototype.update=function(){this.updatePie()},PieChartController.prototype.destroy=function(){_.isObject(this.chart)&&this.chart.destroy()},PieChartController.NO_SERIES_SET_MESSAGE="No series set.",PieChartController.$inject=["$scope","resourceManager","notificationService","injectorService","timeRangeService","masterService","customDashboardUiService"],PieChartController}(WidgetBaseController);appdynamicsModule.controller("PieChartController",PieChartController),define("app/view/customDashboard/widgets/pieChart/PieChartController",function(){});var GaugeDirective=function(){function GaugeDirective(){return{restrict:"E",templateUrl:"app/view/customDashboard/widgets/gauge/Gauge.html",replace:!1,scope:{adWarRoomKey:"=",adWidgetProperties:"=",adCurrentDashboard:"=",adContext:"=",adWidgetController:"="},controller:"GaugeController"}}return GaugeDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-gauge"),GaugeDirective),define("app/view/customDashboard/widgets/gauge/GaugeDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},GaugeController=function(_super){function GaugeController($rootScope,$scope,resourceManager,notificationService,injectorService,timeRangeService,masterService,customDashboardUiService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$rootScope=$rootScope,this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.timeRangeService=timeRangeService,this.masterService=masterService,this.customDashboardUiService=customDashboardUiService,this.chart=null,this.validateMinMax=_.debounce(function(){var min=_this.$scope.adWidgetProperties.minValue,max=_this.$scope.adWidgetProperties.maxValue;
min<GaugeController.MIN_GAUGE_VALUE&&(_this.$scope.adWidgetProperties.minValue=GaugeController.MIN_GAUGE_VALUE),max>GaugeController.MAX_GAUGE_VALUE&&(_this.$scope.adWidgetProperties.maxValue=GaugeController.MAX_GAUGE_VALUE),min>=max&&(_this.$scope.adWidgetProperties.maxValue=min+1,min+1>GaugeController.MAX_GAUGE_VALUE&&(_this.$scope.adWidgetProperties.maxValue=GaugeController.MAX_GAUGE_VALUE,_this.$scope.adWidgetProperties.minValue=GaugeController.MAX_GAUGE_VALUE-1))},300),this.$scope.controller=this,this.init()}return __extends(GaugeController,_super),GaugeController.prototype.init=function(){var _this=this,uiState=this.$scope.adWidgetProperties;uiState.fontSize=GaugeController.DEFAULT_VALUE_FONT_SIZE,this.gaugeConfig=HighChartsHelper.getDefaultGaugeConfig(this.$scope.adWidgetController.containerId),this.updateGauge(),WidgetHelper.setReflowHandler(this.$scope,this.$scope.adWidgetController.widgetElement,function(){_this.reflowGauge()}),this.reflowGauge(),this.$scope.$watch("adWidgetProperties.minValue",this.validateMinMax.bind(this)),this.$scope.$watch("adWidgetProperties.maxValue",this.validateMinMax.bind(this))},GaugeController.prototype.setOverlayMessage=function(){var mmcMap=this.$scope.adWidgetProperties.metricMatchCriteriaNameToMetricType;return _.isNull(mmcMap)||_.isUndefined(mmcMap)||_.isArray(mmcMap)&&0===mmcMap.length?void(this.$scope.adWidgetController.overlayMessage=GaugeController.NO_SERIES_SET_MESSAGE):void(this.$scope.adWidgetController.overlayMessage="")},GaugeController.prototype.reflowGauge=function(){GaugeController.DEBUG&&(ADLoggerService.warn("GaugeController.reflowGauge Debug: this.gaugeConfig set to:"),ADLoggerService.warn(Util.stringifyWithIndent(this.gaugeConfig))),this.gaugeConfig=HighChartsHelper.setGaugeSizeAndGetNewHCConfig(this.$scope.adWidgetController.widgetElement,this.$scope.adWidgetProperties,this.gaugeConfig,!0),this.reflowGaugeLabels(),this.chart=HighChartsHelper.updateHighcharts(this.$scope.adWidgetController.containerId,this.chart,this.gaugeConfig)},GaugeController.prototype.reflowGaugeLabels=function(){var uiState=this.$scope.adWidgetProperties,widgetWidth=this.$scope.adWidgetController.widgetElement.width(),widgetHeight=this.$scope.adWidgetController.widgetElement.height();HighChartsHelper.setGaugeLabels(this.gaugeConfig,uiState,widgetWidth,widgetHeight)},GaugeController.prototype.updateGauge=function(){var _this=this,widgetGuid=this.$scope.adWidgetProperties.widgetGuid;if(window.AD_REPORTS){var widgetKey="ID"+widgetGuid.replace(/-/g,"");return void this.updateGaugeConfig(window.widgetData[widgetKey])}var queries=WidgetHelper.getQueries(widgetGuid,this.$scope.adCurrentDashboard,this.$scope.adContext,this.timeRangeService);if(_.isEmpty(queries))return this.gaugeConfig.series=[],void this.setOverlayMessage();var widgetDataQuery=this.getNewWidgetDataQuery();widgetDataQuery.metricQueries=queries,widgetDataQuery.widgetType=WidgetType.GAUGE,this.customDashboardUiService.getWidgetData(widgetDataQuery).then(function(response){var widgetData=_this.customDashboardUiService.getWidgetData_response(response),gaugeWidgetData=widgetData.gaugeWidgetData;_this.updateGaugeConfig(gaugeWidgetData)})},GaugeController.prototype.updateGaugeConfig=function(data){var _this=this;if(!this.isDataEmptyAfterValidation(data)){GaugeController.DEBUG&&ADLoggerService.warn("GaugeController.updateGaugeConfig Debug: Enter with GaugeWidgetData param "+Util.stringifyWithIndent(data));var uiState=this.$scope.adWidgetProperties,widgetGuid=this.$scope.adWidgetProperties.widgetGuid,allSeriesInfo=WidgetHelper.getSeriesInfo(widgetGuid,this.$scope.adCurrentDashboard);if(this.gaugeConfig=_.clone(HighChartsHelper.getDefaultGaugeConfig(this.$scope.adWidgetController.containerId)),!_.isEmpty(data.gaugeSeriesData)){(this.$scope.adWidgetController.isTemplate||this.$scope.adWidgetController.isWarRoom)&&(this.$scope.adWidgetController.chartMetricsMetaData=WidgetHelper.storeMetricDefinitionsOnScope(data.gaugeSeriesData));var newseries=[];_.each(data.gaugeSeriesData,function(gaugeSeriesData,index){var seriesInfo=allSeriesInfo[index],wmmcUIStates=_this.$scope.adCurrentDashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates,series=(_.findWhere(wmmcUIStates,seriesInfo)||{},_.map(gaugeSeriesData,function(psData){return _this.getGaugePlottingData(psData)}));Array.prototype.push.apply(newseries,series)});var dataSeries=HighChartsHelper.getSortedDataSeries(newseries);0==dataSeries.length?this.gaugeConfig.series[0].data=[]:(this.gaugeConfig.series[0].data=[],this.gaugeConfig.series[0].data[0]=dataSeries[0],dataSeries.length>1&&(ADLoggerService.warn("GaugeController.updateGaugeConfig Warning: Received multi-metric response: "),ADLoggerService.warn("GaugeController.updateGaugeConfig Warning: "+Util.stringifyWithIndent(dataSeries))))}if(!_.isEmpty(uiState)){if(uiState.showTimeRange){var trs=WidgetHelper.getTRSFromWidgetProperties(this.$scope.adCurrentDashboard,uiState,this.$scope.adWidgetController.isTemplate,this.timeRangeService),trStr=DateTimeUtil.getTimeRangeString(trs);this.$scope.adWidgetController.timeRange=trStr}else this.$scope.adWidgetController.timeRange="";data.gaugeSeriesData&&data.gaugeSeriesData[0]&&data.gaugeSeriesData[0][0]&&data.gaugeSeriesData[0][0].name?(uiState.dataMetricName=data.gaugeSeriesData[0][0].name,GaugeController.DEBUG&&ADLoggerService.warn("HighChartsHelper.setGaugeLabels Debug: Set uiState.dataMetricName to "+uiState.dataMetricName),this.$rootScope.$broadcast(SeriesSelectorController.SERIES_DATA_EVENT,{widgetGuid:this.$scope.adWidgetProperties.widgetGuid,name:uiState.dataMetricName})):uiState.dataMetricName=null,HighChartsHelper.setGaugeLabelStyle(this.gaugeConfig,uiState),GaugeController.setMinMax(this.gaugeConfig,uiState,data)}this.setOverlayMessage(),_.defer(function(){_this.reflowGauge()})}},GaugeController.setMinMax=function(config,uiState,data){var gaugeMin=uiState.minValue||0,gaugeMax=uiState.maxValue||100,dataMin=GaugeController.getGaugeSeriesDataMin(data),dataMax=GaugeController.getGaugeSeriesDataMax(data),dataValue=GaugeController.getGaugeSeriesDataValue(data);uiState.useMinMaxValues||(gaugeMin=0,GaugeController.isPercentileMetric(data)?(GaugeController.DEBUG&&ADLoggerService.warn("GaugeController.setMinMax Debug: Found percentile value, min and max set to 0, 100"),gaugeMax=100):0==dataMax&&0==dataMin?(ADLoggerService.warn("GaugeController.setMinMax Warning: dataMin and dataMax both 0. Setting max to 2x value."),gaugeMax=dataValue>0?2*dataValue:100):gaugeMax=dataMax),GaugeController.setGaugeConfigMinMax(config,gaugeMin,gaugeMax,dataValue),uiState.minValue!=gaugeMin&&(uiState.minValue=gaugeMin),uiState.maxValue!=gaugeMax&&(uiState.maxValue=gaugeMax)},GaugeController.isPercentileMetric=function(data){if(data.gaugeSeriesData&&data.gaugeSeriesData[0]&&data.gaugeSeriesData[0][0]&&data.gaugeSeriesData[0][0].name){var name=data.gaugeSeriesData[0][0].name;return StringUtils.containsString(name," %")||StringUtils.endsWith(name,"%")}return!1},GaugeController.setGaugeConfigMinMax=function(config,min,max,value){GaugeController.DEBUG&&ADLoggerService.warn("GaugeController.setGaugeConfigMinMax Debug: Enter with min, max, and value "+min+", "+max+", and "+value);var newMin,newMax;0==max&&0==min?(ADLoggerService.warn("GaugeController.setGaugeConfigMinMax Warning: Called with min and max both 0. Setting max to 2x value."),newMin=0,newMax=value>0?2*value:100):(newMin=min>value?value:min,newMax=value>max?value:max),config.yAxis.min=newMin,config.yAxis.max=newMax,GaugeController.DEBUG&&ADLoggerService.warn("GaugeController.setGaugeConfigMinMax Debug: Set config yAxis min, max, and tickInterval to "+config.yAxis.min+", "+config.yAxis.max+", and "+config.yAxis.tickInterval)},GaugeController.getGaugeSeriesDataMin=function(data){return data&&data.gaugeSeriesData&&data.gaugeSeriesData[0]&&data.gaugeSeriesData[0][0]&&data.gaugeSeriesData[0][0].min?data.gaugeSeriesData[0][0].min:0},GaugeController.getGaugeSeriesDataMax=function(data){return data&&data.gaugeSeriesData&&data.gaugeSeriesData[0]&&data.gaugeSeriesData[0][0]&&data.gaugeSeriesData[0][0].max?data.gaugeSeriesData[0][0].max:0},GaugeController.getGaugeSeriesDataValue=function(data){return data&&data.gaugeSeriesData&&data.gaugeSeriesData[0]&&data.gaugeSeriesData[0][0]&&data.gaugeSeriesData[0][0].value?data.gaugeSeriesData[0][0].value:0},GaugeController.prototype.getGaugePlottingData=function(psData){var gaugeSlice={};return gaugeSlice.name=psData.name,gaugeSlice.y=psData.value,gaugeSlice},GaugeController.prototype.isDataEmptyAfterValidation=function(data){return _.isArray(data.gaugeSeriesData)&&_.isArray(data.gaugeSeriesData[0])&&Util.isDefAndNotNull(data.gaugeSeriesData[0][0])&&Util.isDefAndNotNull(data.gaugeSeriesData[0][0].value)&&data.gaugeSeriesData[0][0].value>=0?!1:(this.$scope.adWidgetController.overlayMessage=this.$scope.adWidgetController.getString("ms_noDataAvailable"),this.chart=null,!0)},GaugeController.prototype.refreshWidget=function(e,data){GaugeController.DEBUG&&ADLoggerService.warn("GaugeController.refreshWidget: Enter,"),WidgetHelper.isRefreshTargetEqualsCurrentWidget(this.$scope.adWidgetProperties,this.$scope.adCurrentDashboard,data.refreshTarget)&&!this.$scope.adWidgetController.hasWarnings&&this.updateGauge()},GaugeController.prototype.update=function(){this.updateGauge()},GaugeController.prototype.destroy=function(){_.isObject(this.chart)&&this.chart.destroy()},GaugeController.DEBUG=!1,GaugeController.NO_SERIES_SET_MESSAGE="No source set.",GaugeController.DEFAULT_VALUE_FONT_SIZE=28,GaugeController.MAX_GAUGE_VALUE=1e20,GaugeController.MIN_GAUGE_VALUE=0,GaugeController.$inject=["$rootScope","$scope","resourceManager","notificationService","injectorService","timeRangeService","masterService","customDashboardUiService"],GaugeController}(WidgetBaseController);appdynamicsModule.controller("GaugeController",GaugeController),define("app/view/customDashboard/widgets/gauge/GaugeController",function(){});var ImageDirective=function(){function ImageDirective(){return{restrict:"E",templateUrl:"app/view/customDashboard/widgets/image/Image.html",replace:!1,scope:{adWidgetProperties:"=",adWidgetController:"="},controller:"ImageController"}}return ImageDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-image"),ImageDirective),define("app/view/customDashboard/widgets/image/ImageDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ImageController=function(_super){function ImageController($scope){var _this=this;_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.$scope.controller=this,this.$scope.$watch("adWidgetProperties.imageURL",function(){_this.setOverlayMessage()}),this.init()}return __extends(ImageController,_super),ImageController.prototype.init=function(){var _this=this;WidgetHelper.setReflowHandler(this.$scope,this.$scope.adWidgetController.widgetElement,function(){_this.reflowImage()}),this.setOverlayMessage(),this.reflowImage()},ImageController.prototype.setOverlayMessage=function(){return StringUtils.isNullOrEmptyString(this.$scope.adWidgetProperties.imageURL)?void(this.$scope.adWidgetController.overlayMessage=ImageController.NO_URL_SET_MESSAGE):void(this.$scope.adWidgetController.overlayMessage="")},ImageController.prototype.reflowImage=function(){this.$scope.adWidgetController.isGridCanvas&&this.$scope.adWidgetController.widgetElement.find(".ad-widget-image").attr({width:this.$scope.adWidgetController.widgetElement.width(),height:this.$scope.adWidgetController.widgetElement.height()})},ImageController.NO_URL_SET_MESSAGE="No url set.",ImageController.$inject=["$scope"],ImageController}(WidgetBaseController);appdynamicsModule.controller("ImageController",ImageController),define("app/view/customDashboard/widgets/image/ImageController",function(){});var IframeDirective=function(){function IframeDirective(){return{restrict:"E",templateUrl:"app/view/customDashboard/widgets/iframe/Iframe.html",replace:!1,scope:{adWidgetProperties:"=",adWidgetController:"="},controller:"IframeController"}}return IframeDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-iframe"),IframeDirective),define("app/view/customDashboard/widgets/iframe/IframeDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},IframeController=function(_super){function IframeController($scope,resourceManager,notificationService,injectorService,masterService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.masterService=masterService,this.$scope.controller=this,this.$scope.$watch("adWidgetProperties.sourceURL",function(url){_this.updateIframe(url)}),this.init()}return __extends(IframeController,_super),IframeController.prototype.init=function(){this.setOverlayMessage()},IframeController.prototype.updateIframe=function(url){this.$scope.adWidgetController.widgetElement.find(".ad-widget-iframe").attr("src",WebUtil.formatURL(url)),this.setOverlayMessage()},IframeController.prototype.setOverlayMessage=function(){return StringUtils.isNullOrEmptyString(this.$scope.adWidgetProperties.sourceURL)?void(this.$scope.adWidgetController.overlayMessage=IframeController.NO_URL_SET_MESSAGE):void(this.$scope.adWidgetController.overlayMessage="")},IframeController.prototype.formatURL=function(baseURL){var urlParams=this.getCurrentUrlParams();return this.masterService.isSharedDashboardPageRequestWithToken()&&(baseURL=baseURL.replace("dashboardServlet","publicDashboardServlet"),baseURL+="&"+UrlConstants.DASHBOARD_SHARED_TOKEN+"="+urlParams.getSharedDashboardToken()),baseURL},IframeController.NO_URL_SET_MESSAGE="No url set.",IframeController.$inject=["$scope","masterService"],IframeController}(WidgetBaseController);appdynamicsModule.controller("IframeController",IframeController),define("app/view/customDashboard/widgets/iframe/IframeController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ListQueryService=function(_super){function ListQueryService($location,$q,masterService,navigationService,notificationService,resourceManager,eventsUiService,warRoomUiService){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.$q=$q,this.masterService=masterService,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.eventsUiService=eventsUiService,this.warRoomUiService=warRoomUiService}return __extends(ListQueryService,_super),ListQueryService.instance=function(){return AngularUtil.getADInjector().get(ListQueryService.NAME)},ListQueryService.prototype.exec=function(query,trs,widgetGuid,showUserName,isWarRoom){var _this=this;void 0===widgetGuid&&(widgetGuid=null),void 0===showUserName&&(showUserName=!1),void 0===isWarRoom&&(isWarRoom=!1);var deferred=this.$q.defer(),resultHandler=function(response){var listData=_this.getListData(response,showUserName);deferred.resolve(listData)},errorHandler=function(errorResponse){deferred.reject(errorResponse)};if(window.AD_REPORTS){var widgetKey="ID"+widgetGuid.replace(/-/g,"");return resultHandler(window.widgetData[widgetKey]),deferred.promise}return query.eventStreamItemFilter.warRoomNote?this.masterService.isSharedDashboardPageRequestWithToken()?this.warRoomUiService.getNotesUsingToken(this.getEventsQuery(query,trs),this.getCurrentUrlParams().getSharedDashboardToken()).then(resultHandler,errorHandler):this.warRoomUiService.getNotes(this.getEventsQuery(query,trs)).then(resultHandler,errorHandler):this.masterService.isSharedDashboardPageRequestWithToken()?isWarRoom?this.eventsUiService.getEventsForSharedWarRoom(trs,widgetGuid,this.getCurrentUrlParams().getSharedDashboardToken()).then(resultHandler,errorHandler):this.eventsUiService.getEventsForSharedDashboard(trs,widgetGuid,this.getCurrentUrlParams().getSharedDashboardToken()).then(resultHandler,errorHandler):this.eventsUiService.getEvents(this.getEventsQuery(query,trs)).then(resultHandler,errorHandler),deferred.promise},ListQueryService.prototype.getListData=function(data,showUserName){var _this=this;if(Util.isUndefOrNull(data))return null;var result=this.eventsUiService.getEvents_response(data),items=result.eventStreamUiItems,listData={};return listData.headers=["Time","Type","Summary","Severity"],showUserName&&listData.headers.push("Username"),listData.data=_.map(items,function(item){var name="";if(item.type==EventStreamUiItemType.EVENT?name=_this.getString("ms_eventType_"+item.eventType):item.type==EventStreamUiItemType.REQUEST_SEGMENT_DATA&&(name=_this.getString("ms_requestUserExperience_"+item.experience)),showUserName){var username="",userProperty=_.findWhere(item.properties,{name:ListQueryService.USERNAME});return userProperty&&(username=userProperty.stringValue),[item.time,name,item.summary,item.severity,username]}return[item.time,name,item.summary,item.severity]}).sort(function(row1,row2){return row2[0]-row1[0]}),listData.config={timestampIndex:0,titleIndex:1,messageIndex:2,icoIndex:3,usernameIndex:4},listData},ListQueryService.prototype.getEventsQuery=function(query,trs){var eventStreamUiItemQuery={},queryCursor={};return queryCursor.timeRange=trs,eventStreamUiItemQuery.queryCursor=queryCursor,query.eventStreamItemFilter.timeRange=trs,eventStreamUiItemQuery.eventStreamItemFilter=query.eventStreamItemFilter,eventStreamUiItemQuery},ListQueryService.NAME="listQueryService",ListQueryService.USERNAME="USERNAME",ListQueryService.$inject=["$location","$q","masterService","navigationService","notificationService","resourceManager","eventsUiService","warRoomUiService"],ListQueryService}(ViewServiceBase);adComponentsModule.service("listQueryService",ListQueryService),define("app/view/customDashboard/query/ListQueryService",function(){});var ListDirective=function(){function ListDirective(){return{restrict:"E",templateUrl:"app/view/customDashboard/widgets/list/List.html",replace:!0,scope:{adWidgetProperties:"=",adCurrentDashboard:"=",adContext:"=",adShowUsername:"@",adWidgetController:"="},controller:"ListController"}}return ListDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-list"),ListDirective),define("app/view/customDashboard/widgets/list/ListDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ListController=function(_super){function ListController($scope,resourceManager,notificationService,injectorService,masterService,timeRangeService,listQueryService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.masterService=masterService,this.timeRangeService=timeRangeService,this.listQueryService=listQueryService,this.listData=null,this.listLimit=20,this.showUsername=!1,this.$scope.controller=this,this.init()}return __extends(ListController,_super),ListController.prototype.init=function(){var _this=this;this.masterService.isDashboardViewerApp()||this.masterService.isReportsApp()||this.$scope.$on(EventSelectorController.EVENT_SELECTION_EVENT,function(e,data){ListController.DEBUG&&ADLoggerService.warn("ListController.on.EVENT_SELECTION_EVENT Debug: Called with widgetGuid "+data.widgetGuid),WidgetHelper.isRefreshTargetEqualsCurrentWidget(_this.$scope.adWidgetProperties,_this.$scope.adCurrentDashboard,data.widgetGuid)?(ListController.DEBUG&&ADLoggerService.warn("ListController.on.EVENT_SELECTION_EVENT Debug: Updating settings."),_this.updateSettings(e,data)):ListController.DEBUG&&ADLoggerService.warn("ListController.on.EVENT_SELECTION_EVENT Debug: Did not match, settings untouched.")}),this.$scope.adWidgetProperties.widgetType===NotesController.NOTES_WIDGET_TYPE&&this.$scope.$on(NotesController.NOTES_REFRESH_EVENT,function(){_this.update()}),this.update()},ListController.prototype.hasData=function(){return Util.isDefAndNotNull(this.listData)&&!_.isEmpty(this.listData.data)},ListController.prototype.setOverlayMessage=function(){this.$scope.adWidgetController.overlayMessage=this.$scope.adWidgetProperties.query?"":ListController.NO_SOURCE_SET_MESSAGE},ListController.prototype.formatField=function(fieldVal,index){return index===this.listData.config.timestampIndex?DateTimeUtil.getDateTimeString(fieldVal):fieldVal},ListController.prototype.showOlder=function(){this.listLimit+=20},ListController.prototype.update=function(){var _this=this;if(this.setOverlayMessage(),!Util.isUndefOrNull(this.$scope.adWidgetProperties.query)&&!Util.isUndefOrNull(this.$scope.adWidgetProperties.query.eventStreamItemFilter)){Util.isDefAndNotNull(this.$scope.adShowUsername)&&"true"===this.$scope.adShowUsername&&(this.showUsername=!0);var trs=WidgetHelper.getTRSFromWidgetProperties(this.$scope.adCurrentDashboard,this.$scope.adWidgetProperties,this.$scope.adWidgetController.isTemplate,this.timeRangeService),promise=this.listQueryService.exec(this.$scope.adWidgetProperties.query,trs,this.$scope.adWidgetProperties.widgetGuid,this.showUsername,this.$scope.adWidgetController.isWarRoom);promise.then(function(listData){_this.listData=listData}),this.appId=this.$scope.adWidgetProperties.query.eventStreamItemFilter.applicationIds[0]}},ListController.prototype.updateSettings=function(e,data){if(data.widgetGuid===this.$scope.adWidgetProperties.widgetGuid){if(this.$scope.adWidgetProperties.query={eventStreamItemFilter:data.eventStreamItemFilter},data.selectedApp.id!==this.appId)if(this.$scope.adWidgetProperties.title){for(var i=0;i<data.apps.length;i++)if(this.$scope.adWidgetProperties.title.indexOf(data.apps[i].name)>=0){this.$scope.adWidgetProperties.title=this.$scope.adWidgetProperties.title.replace(data.apps[i].name,data.selectedApp.name);break}}else this.$scope.adWidgetProperties.title=data.selectedApp.name+" "+this.getString("ms_eventList");this.update()}},ListController.NO_SOURCE_SET_MESSAGE="No source set.",ListController.$inject=["$scope","resourceManager","notificationService","injectorService","masterService","timeRangeService","listQueryService"],ListController.DEBUG=!1,ListController}(WidgetBaseController);appdynamicsModule.controller("ListController",ListController),define("app/view/customDashboard/widgets/list/ListController",function(){});var LogTailDirective=function(){function LogTailDirective(){return{restrict:"E",templateUrl:"app/view/customDashboard/widgets/logtail/LogTail.html",replace:!0,scope:{adWarRoomKey:"=",adIsPresenter:"=",adWidgetProperties:"=",adCurrentDashboard:"=",adContext:"=",adWidgetController:"=",adIsViewMode:"="},controller:"LogTailController"}}return LogTailDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-log-tail"),LogTailDirective),define("app/view/customDashboard/widgets/logtail/LogTailDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},LogTailController=function(_super){function LogTailController($scope,resourceManager,notificationService,injectorService,warRoomUiService,$interval){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.warRoomUiService=warRoomUiService,this.$interval=$interval,this.interval=null,this.paused=!1,this.sequenceId=0,this.$scope.controller=this,this.$scope.$on(LogTailController.START_TAILING_LOG,function(event,guid){_this.startTailingLog(event,guid)}),this.init()}return __extends(LogTailController,_super),LogTailController.prototype.init=function(){var _this=this;this.log=[],this.$scope.adWidgetProperties.regex=this.$scope.adWidgetProperties.regex||"",this.setOverlayMessage(),this.$scope.adWidgetProperties.transientNodeId=this.$scope.adWidgetProperties.nodeId,this.$scope.adWidgetProperties.transientNodeName=this.$scope.adWidgetProperties.nodeName,this.$scope.adWidgetProperties.transientPath=this.$scope.adWidgetProperties.path,this.$scope.adWidgetProperties.transientRegex=this.$scope.adWidgetProperties.regex,this.$scope.adWidgetProperties.nodeId&&this.$scope.adWidgetProperties.path&&this.$scope.adWidgetProperties.path.length>0&&this.$scope.adIsPresenter?this.startTailingLog({},this.$scope.adWidgetProperties.widgetGuid):this.interval=this.$interval(function(){_this.getData()},LogTailController.LOG_TAIL_INTERVAL)},LogTailController.prototype.setOverlayMessage=function(){return this.$scope.adWidgetProperties.nodeId&&this.$scope.adWidgetProperties.path?this.log.length<1?void(this.$scope.adWidgetController.overlayMessage=this.getString("ms_logTailNoData",[this.$scope.adWidgetProperties.path,this.$scope.adWidgetProperties.nodeName])):void(this.$scope.adWidgetController.overlayMessage=""):void(this.$scope.adWidgetController.overlayMessage=this.getString("ms_logTailNotTailing"))},LogTailController.prototype.startTailingLog=function(event,guid){var _this=this;this.$scope.adWidgetProperties.widgetGuid===guid&&(this.$scope.adWidgetProperties.nodeId=this.$scope.adWidgetProperties.transientNodeId,this.$scope.adWidgetProperties.nodeName=this.$scope.adWidgetProperties.transientNodeName,this.$scope.adWidgetProperties.path=this.$scope.adWidgetProperties.transientPath,this.$scope.adWidgetProperties.regex=this.$scope.adWidgetProperties.transientRegex,this.$scope.adWidgetProperties.nodeId&&this.$scope.adWidgetProperties.path&&(this.destroy(),this.log=[],this.sequenceId=0,this.nodeId=this.$scope.adWidgetProperties.nodeId,this.path=this.$scope.adWidgetProperties.path,this.regex=this.$scope.adWidgetProperties.regex||"",this.$scope.adWidgetController.overlayMessage=this.getString("ms_initialzing"),MasterService.instance().isSharedDashboardPageRequestWithToken()?(this.destroy(),this.interval=this.$interval(function(){_this.getData()},LogTailController.LOG_TAIL_INTERVAL)):this.warRoomUiService.startTailingLogs(this.$scope.adWarRoomKey,this.nodeId,this.path,this.regex).then(function(){_this.destroy(),_this.interval=_this.$interval(function(){_this.getData()},LogTailController.LOG_TAIL_INTERVAL)})))},LogTailController.prototype.getData=function(){var _this=this;this.$scope.adWidgetProperties.nodeId&&this.$scope.adWidgetProperties.path&&(this.setOverlayMessage(),(this.nodeId!==this.$scope.adWidgetProperties.nodeId||this.path!==this.$scope.adWidgetProperties.path||this.regex!==this.$scope.adWidgetProperties.regex)&&(this.log=[],this.sequenceId=0),this.nodeId=this.$scope.adWidgetProperties.nodeId,this.path=this.$scope.adWidgetProperties.path,this.regex=this.$scope.adWidgetProperties.regex||"",this.paused||(MasterService.instance().isSharedDashboardPageRequestWithToken()?this.warRoomUiService.getLogDataUsingToken(this.$scope.adWarRoomKey,this.getCurrentUrlParams().getSharedDashboardToken(),this.nodeId,this.path,this.sequenceId).then(function(data){var sequencedLogData=_this.warRoomUiService.getLogDataUsingToken_response(data);_this.sequenceId=sequencedLogData.nextSeqId,_this.log=_this.log.concat(sequencedLogData.logMessages),_this.setOverlayMessage()}):this.warRoomUiService.getLogData(this.$scope.adWarRoomKey,this.nodeId,this.path,this.sequenceId).then(function(data){var sequencedLogData=_this.warRoomUiService.getLogData_response(data);_this.sequenceId=sequencedLogData.nextSeqId,_this.log=_this.log.concat(sequencedLogData.logMessages),_this.setOverlayMessage()})))},LogTailController.prototype.destroy=function(){this.interval&&(this.$interval.cancel(this.interval),this.interval=null)},LogTailController.START_TAILING_LOG="START_TAILING_LOG",LogTailController.LOG_TAIL_INTERVAL=5e3,LogTailController.$inject=["$scope","resourceManager","notificationService","injectorService","warRoomUiService","$interval"],LogTailController}(WidgetBaseController);define("app/view/customDashboard/widgets/logtail/LogTailController",function(){});var NotesDirective=function(){function NotesDirective(){return{restrict:"E",templateUrl:"app/view/customDashboard/warRoom/notesPanel/Notes.html",replace:!1,scope:{adWarRoomKey:"@",adAnonymousUser:"@",adHeight:"=",adApplicationId:"@"},controller:"NotesController",link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return NotesDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-notes"),NotesDirective),define("app/view/customDashboard/warRoom/notesPanel/NotesDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},NotesController=function(_super){function NotesController($scope,$rootScope,warRoomViewService,resourceManager,notificationService,injectorService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.warRoomViewService=warRoomViewService,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.isTemplate=!1,this.isWarRoom=!0,this.$scope.controller=this,this.init(),$scope.$watch("adWarRoomKey",function(warRoomKey){if(warRoomKey){var filter={};filter.guid=warRoomKey,filter.timeRange={type:TimeRangeSpecifierType.BEFORE_NOW,durationInMinutes:1440},filter.warRoomNote=!0,filter.applicationIds=[_this.$scope.adApplicationId],_this.notesWidget.query={eventStreamItemFilter:filter}}})}return __extends(NotesController,_super),NotesController.prototype.link=function(scope,iElement){this.$scope.controller.widgetElement=iElement},NotesController.prototype.showEnterNotesDialog=function(){this.warRoomViewService.viewEnterNotesDialog(this.$scope.adWarRoomKey,this.$scope.adAnonymousUser)},NotesController.prototype.getContainerStyle=function(){var height=this.$scope.adHeight;return _.isNumber(height)?{overflow:"scroll",height:height+"px"}:{}},NotesController.prototype.init=function(){this.notesWidget=this.createNotesWidget()},NotesController.prototype.createNotesWidget=function(){var config={};return config.title="War Room Notes",config.widgetType=NotesController.NOTES_WIDGET_TYPE,config.minutesBeforeAnchorTime=10080,config.useTimeline=!0,config.backgroundColor=111111,config.isGlobal=!1,config.widgetGuid=Util.generateId(),config.x=0,config.y=0,config.color=NotesController.DEFAULT_COLOR,config.width=3,config.height=3,config.backgroundAlpha=1,config.borderColor=14408667,config.borderEnabled=!1,config.borderThickness=0,config.fontSize=12,config.showValues=!1,config.useMetricBrowserAsDrillDown=!0,config},NotesController.DEFAULT_COLOR=4210752,NotesController.NOTES_REFRESH_EVENT="NOTES_REFRESH_EVENT",NotesController.NOTES_WIDGET_TYPE="NOTES_WIDGET_TYPE",NotesController.$inject=["$scope","$rootScope","warRoomViewService","resourceManager","notificationService","injectorService"],NotesController}(ControllerBase);appdynamicsModule.controller("NotesController",NotesController),define("app/view/customDashboard/warRoom/notesPanel/NotesController",function(){});var ParticipantsDirective=function(){function ParticipantsDirective(){return{restrict:"E",templateUrl:"app/view/customDashboard/warRoom/participantsPanel/Participants.html",replace:!1,scope:{adWarRoomSession:"=",isPresenter:"@",adIsAnonymous:"@"},controller:"ParticipantsController"}}return ParticipantsDirective
}();adComponentsModule.directive(StringUtils.toCamelCase("ad-participants"),ParticipantsDirective),define("app/view/customDashboard/warRoom/participantsPanel/ParticipantsDirective",function(){});var ParticipantsController=function(){function ParticipantsController($scope,$rootScope,$interval,notificationService,warRoomViewService,warRoomUiService){this.$scope=$scope,this.$rootScope=$rootScope,this.$interval=$interval,this.notificationService=notificationService,this.warRoomViewService=warRoomViewService,this.warRoomUiService=warRoomUiService,this.minimized=!0,this.$scope.controller=this,this.init()}return ParticipantsController.prototype.toggleMinimize=function(){this.minimized=!this.minimized,ViewUtil.layoutAfterDigest()},ParticipantsController.prototype.init=function(){this.minimized=!0,this.warRoomKey="",this.setupListeners(),this.setupParticipantsGrid()},ParticipantsController.prototype.setupListeners=function(){var _this=this;this.$scope.$watch("adWarRoomSession.warRoomKey",function(warRoomKey){_this.warRoomKey=warRoomKey,_this.updateParticipantGridItemsFromSession(!0)}),this.$scope.$watch("adWarRoomSession.presenterUserName",function(){_this.updateParticipantGridItemsFromSession()}),this.$scope.$watch("controller.selectedRow",function(selectedRow){_this.contextMenuOptions.items[0].disabled=Util.isUndefOrNull(selectedRow)||"true"!==_this.$scope.isPresenter||selectedRow.isAnonymousUser||selectedRow.userIconValue===ParticipantsController.LAST_SEEN_TIME_FOR_PRESENTER||selectedRow.userIconValue>=ParticipantsController.ONLINE_TO_OFFLINE_CUTOFF_SECS});var participantDisplayPromise=this.$interval(function(){_this.updateParticipantGridItemsFromSession()},ParticipantsController.DISPLAY_REFRESH_INTERVAL_MS);this.$scope.$on("$destroy",function(){_this.$interval.cancel(participantDisplayPromise)})},ParticipantsController.prototype.updateParticipantGridItemsFromSession=function(isNewSession){void 0===isNewSession&&(isNewSession=!1);var warRoomSession=this.$scope.adWarRoomSession;if(Util.isUndefOrNull(warRoomSession))return void(this.participantsGridOptions.dataProvider=[]);var currentTime=new Date,updatedGridList=_.map(warRoomSession.participants,function(participant){var participantGridItem={};return participantGridItem.displayName=participant.participantDisplayName,participantGridItem.username=participant.participantName,participantGridItem.unselectable=!0,participantGridItem.duration=(currentTime.getTime()-participant.lastPingTime)/1e3,participantGridItem.isAnonymousUser=participant.isAnonymousUser===!0,participantGridItem.userIconValue=warRoomSession.presenterUserName===participant.participantName?ParticipantsController.LAST_SEEN_TIME_FOR_PRESENTER:participantGridItem.duration,participantGridItem});isNewSession||this.displayUserListUpdateMessage(this.participantsGridOptions.dataProvider,updatedGridList),this.participantsGridOptions.dataProvider=updatedGridList},ParticipantsController.prototype.setupParticipantsGrid=function(){var _this=this;this.participantsGridOptions=new GridOptions;var columns=[GridColumn.createColumn(12,"userIconValue","",this.userTypeRenderer),GridColumn.createColumn(64,"displayName","Name",this.displayNameRenderer,!0),GridColumn.createColumn(24,"duration","Last Seen",this.durationRender.bind(this))];columns[0].align="center",this.participantsGridOptions.columnProvider=columns,this.participantsGridOptions.dataProvider=[],this.participantsGridOptions.sortFields=[{property:"userIconValue",direction:"ASC"}],this.contextMenuOptions={disableDefaultContextMenu:!0,items:[{text:"Make Presenter",handler:function(){_this.onHandleMakePresenter()}}]}},ParticipantsController.prototype.displayNameRenderer=function(displayNameValue,metadata,record){var userIconValue=record.raw.userIconValue;return userIconValue===ParticipantsController.LAST_SEEN_TIME_FOR_PRESENTER?"<div style='font-weight:bold'>"+displayNameValue+"</div>":displayNameValue},ParticipantsController.prototype.userTypeRenderer=function(userIconValue,metadata,record){var duration=record.raw.duration,isAnonymous=record.raw.isAnonymousUser;return userIconValue===ParticipantsController.LAST_SEEN_TIME_FOR_PRESENTER?duration<ParticipantsController.ONLINE_TO_OFFLINE_CUTOFF_SECS?"<img src='"+ImageUtil.getDot(ImageUtil.BLUE_USER_ONLINE)+"' width='14' height='14'/>":"<img src='"+ImageUtil.getDot(ImageUtil.BLUE_USER_OFFLINE)+"' width='14' height='14'/>":isAnonymous?duration<ParticipantsController.ONLINE_TO_OFFLINE_CUTOFF_SECS?"<img src='"+ImageUtil.getDot(ImageUtil.GREY_USER_ONLINE)+"' width='14' height='14'/>":"<img src='"+ImageUtil.getDot(ImageUtil.GREY_USER_OFFLINE)+"' width='14' height='14'/>":duration<ParticipantsController.ONLINE_TO_OFFLINE_CUTOFF_SECS?"<img src='"+ImageUtil.getDot(ImageUtil.GREEN_USER_ONLINE)+"' width='14' height='14'/>":"<img src='"+ImageUtil.getDot(ImageUtil.GREEN_USER_OFFLINE)+"' width='14' height='14'/>"},ParticipantsController.prototype.durationRender=function(timeDiffSecs){var hours=timeDiffSecs/3600,minutes=timeDiffSecs/60%60;return timeDiffSecs<ParticipantsController.ONLINE_TO_OFFLINE_CUTOFF_SECS?"online":this.pad(hours)+":"+this.pad(minutes)},ParticipantsController.prototype.pad=function(n){return n=Math.floor(n),10>n?"0"+n:""+n},ParticipantsController.prototype.displayUserListUpdateMessage=function(oldUserList,newUserList){if(oldUserList.length>0){var newUsers=this.usersJoined(oldUserList,newUserList),oldUsers=this.usersLeft(oldUserList,newUserList);if(newUsers.length>0)for(var i=0;i<newUsers.length;i++)this.notificationService.displayMessage(newUsers[i]+" joined.","");if(oldUsers.length>0)for(var i=0;i<oldUsers.length;i++)this.notificationService.displayError(oldUsers[i]+" left.","")}},ParticipantsController.prototype.usersJoined=function(oldList,newList){for(var newUsers=[],i=0;i<newList.length;i++){for(var found=!1,j=0;j<oldList.length;j++)if(newList[i].username===oldList[j].username){found=!0;break}found||newUsers.push(newList[i].displayName)}return newUsers},ParticipantsController.prototype.usersLeft=function(oldList,newList){for(var usersLeft=[],i=0;i<oldList.length;i++){for(var found=!1,j=0;j<newList.length;j++)if(oldList[i].username===newList[j].username){found=!0;break}found||usersLeft.push(oldList[i].displayName)}return usersLeft},ParticipantsController.prototype.showUrlDialog=function(){this.warRoomViewService.viewWarRoomJoinURLDialog(this.$scope.adWarRoomSession)},ParticipantsController.prototype.onGridClick=function(event){this.selectedRow=event.raw},ParticipantsController.prototype.onHandleMakePresenter=function(){var _this=this;Util.isDefAndNotNull(this.selectedRow)&&this.warRoomUiService.makePresenter(this.selectedRow.username,this.$scope.adWarRoomSession.warRoomKey).then(function(data){var warRoomSession=_this.warRoomUiService.makePresenter_response(data),eventType=ParticipantsController.UEV_WARROOM_PRESENTER_CHANGE;_this.$rootScope.$broadcast(eventType,{warRoomSession:warRoomSession})})},ParticipantsController.UEV_WARROOM_PRESENTER_CHANGE="UEV_WARROOM_PRESENTER_CHANGE",ParticipantsController.ONLINE_TO_OFFLINE_CUTOFF_SECS=60,ParticipantsController.LAST_SEEN_TIME_FOR_PRESENTER=-1,ParticipantsController.DISPLAY_REFRESH_INTERVAL_MS=5e3,ParticipantsController.$inject=["$scope","$rootScope","$interval","notificationService","warRoomViewService","warRoomUiService"],ParticipantsController}();appdynamicsModule.controller("ParticipantsController",ParticipantsController),define("app/view/customDashboard/warRoom/participantsPanel/ParticipantsController",function(){});var AdWidgetDirective=function(){function AdWidgetDirective(){return{restrict:"E",scope:{options:"=",dashboardId:"=",adWarRoomKey:"=",adContext:"=",currentDashboard:"=",onClick:"&",isViewMode:"=",isPresenter:"="},templateUrl:"app/view/customDashboard/widgets/Widget.html",replace:!0,transclude:!0,controller:"AdWidgetController",link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return AdWidgetDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-widget"),AdWidgetDirective),define("app/view/customDashboard/widgets/AdWidgetDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},WidgetTypes=function(){function WidgetTypes(){}return WidgetTypes.LABEL="LABEL",WidgetTypes.IFRAME="IFRAME",WidgetTypes.IMAGE="IMAGE",WidgetTypes.STATUS_LIGHT="STATUS_LIGHT",WidgetTypes.TIMESERIES_GRAPH="TIMESERIES_GRAPH",WidgetTypes.PIE="PIE",WidgetTypes.GAUGE="GAUGE",WidgetTypes.METRIC_LABEL="METRIC_LABEL",WidgetTypes.LIST="LIST",WidgetTypes.LOG_TAIL="LOG_TAIL",WidgetTypes.STREAMING_GRAPH="STREAMING_GRAPH",WidgetTypes}(),AdWidgetController=function(_super){function AdWidgetController($scope,resourceManager,notificationService,injectorService,timeRangeService,metricBrowserHelper){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.timeRangeService=timeRangeService,this.metricBrowserHelper=metricBrowserHelper,this.warnings=[],this.chartMetricsMetaData=[],this.hasTouch=!1,$scope.controller=this,this.containerId=this.getContainerId(),this.isTemplate=WidgetHelper.isTemplate(this.$scope),this.isWarRoom=$scope.currentDashboard.dashboardUIState.isWarRoom?!0:!1,this.isGridCanvas=WidgetHelper.isGridCanvas(this.$scope),this.timeRange="",this.overlayMessage="",this.showError=!1,this.getWarnings()}return __extends(AdWidgetController,_super),AdWidgetController.prototype.link=function(scope,iElement){var _this=this;this.$scope.controller.widgetElement=iElement;var id=Ext.create("Ext.data.UuidGenerator",{}).generate();$(iElement).find(".widget-body").attr("id",id),this.$scope.$on("$destroy",function(){iElement.data("uiResizable")&&iElement.resizable("destroy"),iElement.data("uiDraggable")&&iElement.draggable("destroy"),iElement.remove()});var touchListener=function(){_this.hasTouch=!0,window.removeEventListener("touchstart",touchListener)};window.addEventListener("touchstart",touchListener,!1)},AdWidgetController.prototype.getLabelStyle=function(){return WidgetHelper.isMetricBrowserOpenable(this.$scope)||WidgetHelper.isUrlOpenable(this.$scope)?this.widgetElement.addClass("cd-widget-hover"):this.widgetElement.removeClass("cd-widget-hover"),{color:Util.getColorString(this.$scope.options.color),"font-size":this.$scope.options.fontSize+"px"}},AdWidgetController.prototype.getStyle=function(){var _this=this,options=this.$scope.options,styles={left:options.x+"px",top:options.y+"px",color:Util.getColorString(options.color),"font-size":options.fontSize+"px"};return options.widgetType!==WidgetTypes.IMAGE&&(styles.background=Util.getColorString(options.backgroundColor)),styles.width=options.width,styles.height=options.height,0===options.backgroundAlpha&&(styles["background-color"]="transparent"),Util.get(this.$scope.currentDashboard,["dashboardUIState","canvasType"])===CustomDashBoardCanvasType.CANVAS_TYPE_GRID&&(styles=_.chain(styles).extend({width:"100%",height:"100%"}).omit("left","top").value()),(WidgetHelper.isMetricBrowserOpenable(this.$scope)||WidgetHelper.isUrlOpenable(this.$scope))&&(styles.cursor="pointer"),_.defer(function(){var titleHeight=$(_this.widgetElement).find(".adsWidgetTitle").height();_this.widgetElement.css(titleHeight>0?{"padding-bottom":titleHeight+44+"px"}:{"padding-bottom":"0px"}),ViewUtil.verticalCenter(_this.widgetElement.find(".label-container"))}),styles},AdWidgetController.prototype.getBorderStyle=function(){var options=this.$scope.options,styles={};return options.borderEnabled&&(styles["border-style"]="solid",styles["border-width"]=options.borderThickness+"px",styles["border-color"]=Util.getColorString(options.borderColor),styles.overflow="hidden"),options.widgetType===WidgetTypes.LIST&&(styles["overflow-y"]="scroll"),styles},AdWidgetController.prototype.isOverlayShown=function(){return this.$scope.isViewMode?this.$scope.options.widgetType===WidgetTypes.IFRAME?!1:this.showError||this.hasOverlayMessage()?!0:void 0:!0},AdWidgetController.prototype.hasOverlayMessage=function(){return Util.isDefAndNotNull(this.overlayMessage)&&""!==this.overlayMessage},AdWidgetController.prototype.getHeight=function(){return this.isGridCanvas?$(this.widgetElement).height().toString():this.$scope.options.height},AdWidgetController.prototype.getWidth=function(){return this.isGridCanvas?$(this.widgetElement).width().toString():this.$scope.options.width},AdWidgetController.prototype.getOverlayMessage=function(){return this.overlayMessage?this.overlayMessage:""},AdWidgetController.prototype.isShowTitle=function(){var widgetProperties=this.$scope.options,hasTitle=Util.isDefAndNotNull(widgetProperties.title)&&widgetProperties.title.length>0,hasTimeRange=Util.isDefAndNotNull(this.timeRange)&&this.timeRange.length>0,isLabelWidget=this.$scope.options.widgetType===WidgetTypes.LABEL;return isLabelWidget||!hasTitle&&!hasTimeRange?!1:!0},AdWidgetController.prototype.getFontColor=function(){return{color:Util.getColorString(this.$scope.options.color)}},AdWidgetController.prototype.onWidgetClick=function(){this.hasTouch&&this.handleDoubleClick()},AdWidgetController.prototype.handleDoubleClick=function(){if(Util.isDefAndNotNull(this.$scope.isViewMode)&&this.$scope.isViewMode!==!1)if(WidgetHelper.isUrlOpenable(this.$scope)){var drillDownUrl=this.$scope.options.drillDownUrl,win=window.open(WebUtil.formatURL(drillDownUrl,!0),"_blank");win&&win.focus()}else WidgetHelper.isMetricBrowserOpenable(this.$scope)&&this.openMetricBrowserUrl()},AdWidgetController.prototype.getWarnings=function(){var warningStrings=[],missingEntities=[],wmmcs=WidgetHelper.getAllWmmc(this.$scope.currentDashboard,this.$scope.options.widgetGuid);if(_.isArray(wmmcs))for(var i=0;i<wmmcs.length;i++)Util.isDefAndNotNull(wmmcs[i].metricMatchCriteria.affectedEntityMatchCriteria)&&_.isArray(wmmcs[i].metricMatchCriteria.affectedEntityMatchCriteria.missingEntities)&&(missingEntities=missingEntities.concat(wmmcs[i].metricMatchCriteria.affectedEntityMatchCriteria.missingEntities)),_.isArray(wmmcs[i].metricMatchCriteria.missingEntities)&&(missingEntities=missingEntities.concat(wmmcs[i].metricMatchCriteria.missingEntities));_.isArray(this.$scope.options.missingEntities)&&(missingEntities=missingEntities.concat(this.$scope.options.missingEntities)),this.$scope.options.widgetType===WidgetType.LIST&&this.$scope.options.query&&this.$scope.options.query.eventStreamItemFilter&&_.isArray(this.$scope.options.query.eventStreamItemFilter.missingEntities)&&(missingEntities=missingEntities.concat(this.$scope.options.query.eventStreamItemFilter.missingEntities));for(var i=0;i<missingEntities.length;i++){var missingEntity=missingEntities[i],warningMessage=this.getMissingEntityMessage(missingEntity);_.indexOf(warningStrings,warningMessage)<0&&warningStrings.push(warningMessage)}return missingEntities.length>0?(this.hasWarnings=!0,void(this.warnings=warningStrings)):(this.hasWarnings=!1,void(this.warnings=[]))},AdWidgetController.prototype.getWarningsStyle=function(){var styles={};return styles["max-height"]=parseInt(this.getHeight())-40+"px",styles},AdWidgetController.prototype.deleteErrorsFromWidget=function(){var wmmcs=WidgetHelper.getAllWmmc(this.$scope.currentDashboard,this.$scope.options.widgetGuid);if(_.isArray(wmmcs))for(var i=0;i<wmmcs.length;i++)Util.isDefAndNotNull(wmmcs[i].metricMatchCriteria.affectedEntityMatchCriteria)&&_.isArray(wmmcs[i].metricMatchCriteria.affectedEntityMatchCriteria.missingEntities)&&(wmmcs[i].metricMatchCriteria.affectedEntityMatchCriteria.missingEntities=null),_.isArray(wmmcs[i].metricMatchCriteria.missingEntities)&&(wmmcs[i].metricMatchCriteria.missingEntities=null);_.isArray(this.$scope.options.missingEntities)&&(this.$scope.options.missingEntities=null),this.$scope.options.widgetType===WidgetType.LIST&&this.$scope.options.query&&this.$scope.options.query.eventStreamItemFilter&&_.isArray(this.$scope.options.query.eventStreamItemFilter.missingEntities)&&(this.$scope.options.query.eventStreamItemFilter.missingEntities=null),this.warnings=[],this.hasWarnings=!1},AdWidgetController.prototype.onDismissErrors=function(){var _this=this,onOk=function(){_this.deleteErrorsFromWidget()};DialogService.instance().showConfirmation(this.getString("ms_removeErrorsDialogTitle"),this.getString("ms_removeErrorsDialogMessage"),onOk,void 0,this.getString("ms_removeErrorsDialogOkButtonLabel"))},AdWidgetController.prototype.getMissingEntityMessage=function(entityIdentifier){if(entityIdentifier.entityType){if(!entityIdentifier.entityId&&!entityIdentifier.entityName)return"Invalid entity related error";if(entityIdentifier.entityName&&!entityIdentifier.entityId)return"Entity name '"+entityIdentifier.entityName+"' not found";if(entityIdentifier.entityId&&!entityIdentifier.entityName)return"Entity id "+entityIdentifier.scopedEntityId+" not found"}if(entityIdentifier.scopedEntityType){if(!entityIdentifier.scopedEntityId&&!entityIdentifier.scopedEntityName)return"Invalid scoped entity related error";if(entityIdentifier.scopedEntityName&&!entityIdentifier.scopedEntityId)return"Scoped Entity name '"+entityIdentifier.scopedEntityName+"' not found";if(entityIdentifier.scopedEntityId&&!entityIdentifier.scopedEntityName)return"Scoped Entity id "+entityIdentifier.scopedEntityId+" not found"}return entityIdentifier.applicationId||entityIdentifier.applicationName?entityIdentifier.applicationName&&!entityIdentifier.applicationId?"Application name '"+entityIdentifier.applicationName+"' not found":entityIdentifier.applicationId&&!entityIdentifier.applicationName?"Application id "+entityIdentifier.applicationId+" not found":"Unknown error":"Invalid application related error"},AdWidgetController.prototype.getContainerId=function(){var widgetOptions=this.$scope.options;return widgetOptions.widgetType===WidgetTypes.TIMESERIES_GRAPH?"ad-line-"+widgetOptions.widgetGuid:widgetOptions.widgetType===WidgetTypes.PIE?"ad-pie-"+widgetOptions.widgetGuid:widgetOptions.widgetType===WidgetTypes.GAUGE?"ad-gauge-"+widgetOptions.widgetGuid:widgetOptions.widgetType===WidgetTypes.STREAMING_GRAPH?"ad-streaming-"+widgetOptions.widgetGuid:void 0},AdWidgetController.prototype.openMetricBrowserUrl=function(){var _this=this,widgetGuid=this.$scope.options.widgetGuid,currentDashboard=this.$scope.currentDashboard,dashboardId=this.$scope.dashboardId;if(this.$scope.options.useMetricBrowserAsDrillDown){var trs=WidgetHelper.getTimeRangeSpecifier(currentDashboard,widgetGuid,this.isTemplate,this.timeRangeService);if((this.isTemplate||this.isWarRoom)&&this.$scope.options.widgetType!==WidgetTypes.METRIC_LABEL)_.isEmpty(this.chartMetricsMetaData)||_.isEmpty(this.chartMetricsMetaData[0].metricDefinitions)?this.notificationService.displayError("Widget has no data",""):this.chartMetricsMetaData.map(function(metricData){_this.metricBrowserHelper.openMetricBrowser(metricData.appId,metricData.metricDefinitions,trs,currentDashboard)});else if(this.$scope.options.widgetType===WidgetTypes.METRIC_LABEL){var wmmc=WidgetHelper.getWmmc(this.$scope.currentDashboard,this.$scope.options.widgetGuid);if(wmmc&&Util.isDefAndNotNull(wmmc.metricMatchCriteria.metricExpression.metricDefinition)){var metricDefinition=angular.copy(wmmc.metricMatchCriteria.metricExpression.metricDefinition);Util.isDefAndNotNull(metricDefinition.entityDefinition)||(metricDefinition.entityDefinition=metricDefinition.scope),this.metricBrowserHelper.openMetricBrowser(wmmc.metricMatchCriteria.applicationId,[metricDefinition],trs,currentDashboard)}}else{var appIds=[];this.$scope.currentDashboard.widgetsMetricMatchCriterias.map(function(wmmc){null!=wmmc.metricMatchCriteria&&$.inArray(wmmc.metricMatchCriteria.applicationId,appIds)<0&&widgetGuid==wmmc.widgetGuid&&appIds.push(wmmc.metricMatchCriteria.applicationId)}),appIds.map(function(appId){_this.metricBrowserHelper.getMetricDefinitionsAndOpenMetricBrowser(appId,dashboardId,trs,widgetGuid,currentDashboard)})}}},AdWidgetController.REFRESH_WIDGET="refresh-widget",AdWidgetController.$inject=["$scope","resourceManager","injectorService","notificationService","timeRangeService","metricBrowserHelper"],AdWidgetController}(ControllerBase);appdynamicsModule.controller("AdWidgetController",AdWidgetController),define("app/view/customDashboard/widgets/AdWidgetController",function(){});var WidgetHelper=function(){function WidgetHelper(){}return WidgetHelper.isMetricBrowserOpenable=function($scope){var widgetType=$scope.options.widgetType;if("METRIC_LABEL"===widgetType&&$scope.options.useMetricBrowserAsDrillDown)return!0;var mmcMap=$scope.options.metricMatchCriteriaNameToMetricType,hasNoMetrics=_.isNull(mmcMap)||_.isUndefined(mmcMap)||_.isArray(mmcMap)&&0===mmcMap.length,isMetricBrowserWidget="TIMESERIES_GRAPH"===widgetType||"PIE"===widgetType||"GAUGE"===widgetType;return isMetricBrowserWidget&&$scope.options.useMetricBrowserAsDrillDown&&!hasNoMetrics?!0:!1},WidgetHelper.isUrlOpenable=function($scope){var widgetType=$scope.options.widgetType,isMetricBrowserWidget="TIMESERIES_GRAPH"===widgetType||"PIE"===widgetType||"GAUGE"===widgetType||"METRIC_LABEL"===widgetType,isDrilldownUrlOnlyWidget="LABEL"===widgetType||"STATUS_LIGHT"===widgetType;if(isDrilldownUrlOnlyWidget||isMetricBrowserWidget&&!$scope.options.useMetricBrowserAsDrillDown){var drillDownUrl=$scope.options.drillDownUrl;if(null!=drillDownUrl&&drillDownUrl.length>0)return!0}return!1},WidgetHelper.isGridCanvas=function($scope){return Util.get($scope.currentDashboard,["dashboardUIState","canvasType"])===CustomDashBoardCanvasType.CANVAS_TYPE_GRID},WidgetHelper.isTemplate=function($scope){return _.isObject($scope.adContext)},WidgetHelper.storeMetricDefinitionsOnScope=function(chartData){var chartMetricsMetaData=[];return _.each(chartData,function(seriesData){_.each(seriesData,function(metricData){if(Util.isDefAndNotNull(metricData.metricDefinition)){var metricsData=_.findWhere(chartMetricsMetaData,{appId:metricData.applicationId});metricsData?metricsData.metricDefinitions.push(metricData.metricDefinition):(metricsData={appId:metricData.applicationId},metricsData.metricDefinitions=[metricData.metricDefinition],chartMetricsMetaData.push(metricsData))}})}),chartMetricsMetaData},WidgetHelper.isRefreshTargetEqualsCurrentWidget=function(widgetProperties,currentDashboard,refreshTarget){!Util.isDefAndNotNull(widgetProperties)||!Util.isDefAndNotNull(currentDashboard);var widgetGuid=widgetProperties.widgetGuid,refreshTargets=Util.getArray(refreshTarget);return _.isEmpty(refreshTargets)?!1:_.contains(refreshTargets,"*")||_.contains(refreshTargets,widgetGuid)?!0:void 0},WidgetHelper.getTimeRangeSpecifier=function(dashboard,widgetGuid,isTemplate,timeRangeService){var widgetProperties=_.findWhere(dashboard.dashboardUIState.widgets,{widgetGuid:widgetGuid});return WidgetHelper.getTRSFromWidgetProperties(dashboard,widgetProperties,isTemplate,timeRangeService)},WidgetHelper.getTRSFromWidgetProperties=function(dashboard,widgetProperties,isTemplate,timeRangeService){var sharedDashboardElements=$(".custom-dashboard-viewer");if(widgetProperties.isGlobal&&(isTemplate||sharedDashboardElements.length>0)&&!window.AD_REPORTS)return timeRangeService.getTimeRange();if(widgetProperties.isGlobal){var dashProperties=dashboard.dashboardUIState;return timeRangeService.getTimeRangeSpecifier(dashProperties.minutesBeforeAnchorTime,dashProperties.startTime,dashProperties.endTime)}return timeRangeService.getTimeRangeSpecifier(widgetProperties.minutesBeforeAnchorTime,widgetProperties.startTime,widgetProperties.endTime)},WidgetHelper.getTimeRangeSpecifier2=function(widget){var timeRangeService=TimeRangeService.instance();return widget.isGlobal?timeRangeService.getTimeRange():timeRangeService.getTimeRangeSpecifier(widget.minutesBeforeAnchorTime,widget.startTime,widget.endTime)},WidgetHelper.getQueries2=function(widget){{var trs=WidgetHelper.getTimeRangeSpecifier2(widget);widget.widgetsMetricMatchCriterias}return _.map(widget.widgetsMetricMatchCriterias,function(widgetMetricCriteria){var metricQuery={};return metricQuery.metricMatchCriteria=widgetMetricCriteria.metricMatchCriteria,metricQuery.timeRangeSpecifier=trs,metricQuery.showRawMetricName=widgetMetricCriteria.showRawMetricName?!0:!1,metricQuery})},WidgetHelper.getQueries=function(widgetGuid,currentDashboard,context,timeRangeService){var isTemplate=_.isObject(context),trs=WidgetHelper.getTimeRangeSpecifier(currentDashboard,widgetGuid,isTemplate,timeRangeService);return _.chain(currentDashboard.widgetsMetricMatchCriterias).where({widgetGuid:widgetGuid}).map(function(wmmc){var wmmcUI=WidgetHelper.getWmmcUI(currentDashboard,widgetGuid,wmmc.name),mmc=angular.copy(wmmc.metricMatchCriteria),isTemplate=_.isObject(context);if(isTemplate&&(mmc.applicationId=context.appId),isTemplate&&Util.isDefAndNotNull(mmc.affectedEntityMatchCriteria)){var cmc=Util.get(mmc,["affectedEntityMatchCriteria","componentMatchCriteria"]);Util.isDefAndNotNull(cmc)&&(cmc.componentIds=[context.componentId]);var nmc=Util.get(mmc,["affectedEntityMatchCriteria","nodeMatchCriteria"]);Util.isDefAndNotNull(nmc)&&(nmc.componentIds=[context.componentId],Util.isDefAndNotNull(context.nodeId)&&nmc.type!=NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS&&(nmc.nodeIds=[context.nodeId]));var affectedEntityMatchCriteria=mmc.affectedEntityMatchCriteria;affectedEntityMatchCriteria.type===BTAffectedEntityMatchCriteriaType.BTS_OF_SPFICIC_TIERS||affectedEntityMatchCriteria.type===InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS?affectedEntityMatchCriteria.componentIds=[context.componentId]:affectedEntityMatchCriteria.type===ErrorsAffectedEntityMatchCriteriaType.ERRORS_OF_SPECIFIC_TIERS&&(affectedEntityMatchCriteria.componentIds=[context.componentId])}var metricQuery={};return metricQuery.metricMatchCriteria=DashboardHelper.instance().marshalMMC(mmc),metricQuery.timeRangeSpecifier=trs,metricQuery.showRawMetricName=wmmcUI.showRawMetricName?!0:!1,metricQuery}).value()},WidgetHelper.getSeriesTypes=function(widgetGuid,currentDashboard){var seriesTypes=[];return _.chain(currentDashboard.widgetsMetricMatchCriterias).where({widgetGuid:widgetGuid}).each(function(wmmc){var wmmcUI=WidgetHelper.getWmmcUI(currentDashboard,widgetGuid,wmmc.name);seriesTypes.push(wmmcUI.seriesType)}),seriesTypes},WidgetHelper.getWmmcUI=function(dashboard,widgetGuid,name){return _.findWhere(dashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates,{widgetGuid:widgetGuid,widgetMetricMatchCriteriaName:name})},WidgetHelper.getWmmc=function(dashboard,widgetGuid){return _.findWhere(dashboard.widgetsMetricMatchCriterias,{widgetGuid:widgetGuid})},WidgetHelper.getAllWmmc=function(dashboard,widgetGuid){return _.where(dashboard.widgetsMetricMatchCriterias,{widgetGuid:widgetGuid})},WidgetHelper.getSeriesInfo=function(widgetGuid,currentDashboard){return _.chain(currentDashboard.widgetsMetricMatchCriterias).where({widgetGuid:widgetGuid}).map(function(wmmc){return{widgetGuid:wmmc.widgetGuid,widgetMetricMatchCriteriaName:wmmc.name}}).value()},WidgetHelper.getApplicationSelectOptions=function(apps){return _.map(apps,function(d){return{id:d.id,name:d.name,value:d.name}})},WidgetHelper.getApplicationSelectOptionForWidget=function(apps,appIdFromWidget,isTemplate,isWarRoom,$modalInstance){var selectedApp;if(isTemplate||isWarRoom){var currentAppId,params=new URLParams,currentApp=null,appFromWidget=null;params.hasParam(UrlConstants.APPLICATION_ID)&&(currentAppId=params.getNumberParam(UrlConstants.APPLICATION_ID),currentApp=_.findWhere(apps,{id:currentAppId}),appFromWidget=_.findWhere(apps,{id:appIdFromWidget})),(!Util.isDefAndNotNull(currentApp)||appIdFromWidget&&!Util.isDefAndNotNull(appFromWidget))&&(NotificationService.instance().displayError("Application Id not found",""),$modalInstance.close()),selectedApp=appFromWidget?appFromWidget:currentApp}else selectedApp=_.findWhere(apps,{id:appIdFromWidget})||apps[0];return{id:selectedApp.id,name:selectedApp.name,value:selectedApp.name}},WidgetHelper.setReflowHandler=function($scope,iElement,reflowHandler){$scope.$watch("adWidgetProperties.showTimeRange",function(){throttledReflowHandler()}),$scope.$watch(function(){return iElement.width()},function(){throttledReflowHandler()}),$scope.$watch(function(){return iElement.height()},function(){throttledReflowHandler()}),$(iElement).parent("div").bind("transitionend webkitTransitionEnd",function(){throttledReflowHandler()});var throttledReflowHandler=_.throttle(function(){reflowHandler(),ViewUtil.safeApply($scope)},2e3)},WidgetHelper}();define("app/view/customDashboard/widgets/WidgetHelper",function(){});var ChartTypes=function(){function ChartTypes(){}return ChartTypes.SPLINE="spline",ChartTypes.AREA="area",ChartTypes.COLUMN="column",ChartTypes.SCATTER="scatter",ChartTypes}(),LineTypes=function(){function LineTypes(){}return LineTypes.DASH="Dash",LineTypes.SOLID="Solid",LineTypes}(),AxisTypes=function(){function AxisTypes(){}return AxisTypes.LOGARITHMIC="logarithmic",AxisTypes.LINEAR="linear",AxisTypes}(),HighChartsHelper=function(){function HighChartsHelper(){}return HighChartsHelper.setLegendPropsAndGetNewHCConfig=function(iElement,widgetProperties,currentConfig,redrawGraph){void 0===redrawGraph&&(redrawGraph=!1);var uiState=widgetProperties;if(!Util.isDefAndNotNull(currentConfig)||!Util.isDefAndNotNull(uiState)||!uiState.showLegend)return currentConfig;var widgetWidth=iElement.width(),widgetHeight=iElement.height();return uiState.legendPosition==LegendPosition.POSITION_RIGHT?this.setLegendPositionRight(widgetProperties,currentConfig,widgetHeight,widgetWidth):this.setLegendPositionBottom(widgetProperties,currentConfig,widgetHeight,widgetWidth,uiState.legendColumnCount),currentConfig.legend.itemStyle?currentConfig.legend.itemStyle.color=Util.getColorString(widgetProperties.color):currentConfig.legend.itemStyle={color:Util.getColorString(widgetProperties.color)},redrawGraph?_.clone(currentConfig):currentConfig},HighChartsHelper.setGaugeSizeAndGetNewHCConfig=function(iElement,widgetProperties,currentConfig,redrawGraph){void 0===redrawGraph&&(redrawGraph=!1);var uiState=widgetProperties;if(!Util.isDefAndNotNull(currentConfig)||!Util.isDefAndNotNull(uiState))return currentConfig;var widgetWidth=iElement.width(),widgetHeight=iElement.height();if(100*widgetWidth>140*widgetHeight)currentConfig.pane.size="140%",currentConfig.pane.center=["50%","85%"];else{var width2HeightRatio=Math.floor(widgetWidth/widgetHeight*100),verticalOffsetFromCenter=85-Math.floor(.35*(140-width2HeightRatio));50>verticalOffsetFromCenter&&(verticalOffsetFromCenter=50),100>width2HeightRatio&&(width2HeightRatio=100),currentConfig.pane.size=width2HeightRatio+"%",currentConfig.pane.center=["50%",verticalOffsetFromCenter+"%"]}return currentConfig.yAxis.title.y=widgetWidth>widgetHeight?widgetHeight/2-4:widgetWidth/2,redrawGraph?_.clone(currentConfig):currentConfig},HighChartsHelper.setLegendPositionRight=function(widgetProperties,newConfig,widgetHeight,widgetWidth){var legendWidth;legendWidth=widgetProperties.widgetType===WidgetTypes.PIE&&widgetWidth>widgetHeight?widgetProperties.showLabels?Math.floor(widgetWidth*HighChartsHelper.LEGEND_WIDGET_SIZE_RATIO*2):widgetWidth-widgetHeight:Math.floor(widgetWidth*HighChartsHelper.LEGEND_WIDGET_SIZE_RATIO),_.extend(newConfig.legend,{align:"right",verticalAlign:"middle",width:legendWidth,itemWidth:legendWidth,itemStyle:{width:legendWidth-HighChartsHelper.LEGEND_ITEM_SYMBOL_WIDTH,"word-break":"break-all"}})},HighChartsHelper.setLegendPositionBottom=function(widgetProperties,newConfig,widgetHeight,widgetWidth,legendColumnCount){var maxLegendHeight;if(maxLegendHeight=widgetProperties.widgetType===WidgetTypes.PIE&&widgetHeight>widgetWidth?widgetHeight-widgetWidth:Math.floor(widgetHeight*HighChartsHelper.LEGEND_WIDGET_SIZE_RATIO),newConfig.legend.verticalAlign="bottom",newConfig.legend.width=widgetWidth-2*HighChartsHelper.LEGEND_WIDGET_MARGIN,legendColumnCount>1){if(0==widgetWidth)return;var itemWidth=Math.floor(newConfig.legend.width/legendColumnCount);
newConfig.legend.itemWidth=itemWidth,newConfig.legend.itemStyle={width:itemWidth-HighChartsHelper.LEGEND_ITEM_SYMBOL_WIDTH,"word-break":"break-all"},newConfig.legend.maxHeight=maxLegendHeight,newConfig.legend.align="center",newConfig.legend.layout="horizontal"}else 0==legendColumnCount?(newConfig.legend.itemWidth=null,newConfig.legend.layout="horizontal"):newConfig.legend.maxHeight=maxLegendHeight},HighChartsHelper.getDefaultGraphConfig=function(containerId){return{chart:{renderTo:containerId,backgroundColor:"rgba(255,255,255,0.1)",plotBackgroundColor:null,plotShadow:!1,animation:!1,reflow:!1,events:{load:function(){}}},lang:{noData:"No Data Available"},xAxis:{type:"datetime",min:(new Date).getTime()-9e5,minTickInterval:6e4,title:{text:""},labels:{enabled:!0}},yAxis:{startOnTick:!1,title:{text:""},labels:{enabled:!0},type:AxisTypes.LINEAR},legend:{floating:!1,enabled:!1,adjustChartSize:!0,layout:"vertical"},tooltip:{crosshairs:[!0],shared:!0,useHTML:!0,valueDecimals:2,borderColor:"#6c6c6c",borderRadius:0,borderWidth:1,formatter:function(args){var chartHeight=args.chart.containerHeight,chartWidth=args.chart.containerWidth,tooltipMaxHeight=Math.floor(.8*chartHeight),tooltipMaxWidth=Math.floor(.8*chartWidth),headingStyle="background: gray; color: white; margin: 0px 0px 3px 0px; display: inline-block; width: 100%; text-align: center; font-size: 8pt",result='<span style="'+headingStyle+'">&nbsp;&nbsp;'+Highcharts.dateFormat("%A, %b %e %Y %H:%M",this.x)+"&nbsp;&nbsp;</span>",getTooltipLine=function(point){return point.eventInfo?'<br/><span style="display: inline-block; text-align: left; width: 80%; font-size: 8pt">'+point.eventInfo+"</span>":'<br/><span style="background: '+point.series.color+'; display: inline-block; width:8px; height: 8px; border-radius: 8px; margin: 0 7px 0 5px"></span><span style="display: inline-block; text-align: left; font-size: 8pt">'+point.series.name+" : <strong> "+point.y+"</strong></span>"};return this.point?result+=getTooltipLine(this.point):$.each(this.points,function(i,point){result+=getTooltipLine(point)}),'<div style="min-height: 50px; max-height: '+tooltipMaxHeight+"px; max-width: "+tooltipMaxWidth+'px;  overflow-y: auto; overflow-x: auto; ">'+result+"</div>"}},credits:{enabled:!1},title:{text:"",style:null},subtitle:{text:"",align:"right",x:-10},plotOptions:{series:{states:{hover:{lineWidth:2}},animation:!1,marker:{enabled:!0,states:{hover:{enabled:!0,lineWidth:2}},radius:1.5,symbol:"circle"}},area:{stacking:null},column:{stacking:null}},series:[]}},HighChartsHelper.getDefaultPieConfig=function(containerId){return{chart:{renderTo:containerId,backgroundColor:"rgba(255,255,255,0.1)",plotBackgroundColor:null,plotShadow:!1,reflow:!1,animation:!0},lang:{noData:"No Data Available"},colors:[],legend:{floating:!1,verticalAlign:"bottom",align:"center",enabled:!1,adjustChartSize:!0,layout:"vertical",navigation:{activeColor:"#3E576F",animation:!0,arrowSize:12,inactiveColor:"#CCC",style:{fontWeight:"bold",color:"#333",fontSize:"12px"}}},tooltip:{shared:!0,useHTML:!0,valueDecimals:2,borderColor:"#6c6c6c",borderRadius:0,borderWidth:1,headerFormat:"",pointFormat:'<span style="display: inline-block; text-align: left; font-size: 8pt; white-space: nowrap">{point.name}: {point.y} (<strong>{point.percentage:.2f}%</strong>)</span>',animation:!1},credits:{enabled:!1},title:{text:"",style:null},subtitle:{text:"",align:"right",x:-10},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,formatter:null,distance:10},showInLegend:!0,crop:!1,minSize:80}},series:[{animation:!1,type:"pie",innerSize:"55%",data:[]}]}},HighChartsHelper.getDefaultGaugeConfig=function(containerId){return{chart:{renderTo:containerId,backgroundColor:"rgba(255,255,255,0.1)",plotBackgroundColor:null,plotShadow:!1,reflow:!1,animation:!0,type:"solidgauge"},title:{text:"",style:null},colors:[],lang:{noData:"No Data Available"},pane:{center:["50%","85%"],size:"140%",startAngle:-90,endAngle:90,background:{backgroundColor:"rgba(255,255,255,0.1)",innerRadius:"60%",outerRadius:"100%",shape:"arc"}},tooltip:{enabled:!1},credits:{enabled:!1},plotOptions:{solidgauge:{dataLabels:{y:5,borderWidth:0,useHTML:!0}}},yAxis:{startOnTick:!1,endOnTick:!1,showLastLabel:!0,tickPositioner:function(min,max){return[min,max]},minorTickInterval:null,tickWidth:0,min:0,max:100,title:{text:"",y:0},stops:[[.1,UiConfig.getColor("GREEN")],[.5,UiConfig.getColor("YELLOW")],[.9,UiConfig.getColor("RED")]],lineWidth:0,labels:{y:16}},series:[{name:"Metric",data:[50],tooltip:{valueSuffix:""}}]}},HighChartsHelper.setGraphXAxisMinMax=function(config,trs){if(0==trs.durationInMinutes)config.xAxis.min=trs.startTime.getTime()-12e4,config.xAxis.max=trs.endTime.getTime();else{var currentTime=new Date;config.xAxis.min=currentTime.getTime()-60*trs.durationInMinutes*1e3-12e4,config.xAxis.max=currentTime.getTime()-12e4}},HighChartsHelper.showGraphAxisLabels=function(config,isShow){config.xAxis.labels.enabled=isShow,config.yAxis.labels.enabled=isShow},HighChartsHelper.setGraphAxisType=function(config,uiState){config.yAxis.type=uiState.axisType&&uiState.axisType==GraphAxisType.LOGARITHMIC?AxisTypes.LOGARITHMIC:AxisTypes.LINEAR},HighChartsHelper.setGraphAxisTitleAndStyle=function(config,uiState){var chartstyle={};chartstyle.fontSize=uiState.fontSize+"px",chartstyle.color=Util.getColorString(uiState.color),config.xAxis.labels.style=chartstyle,config.yAxis.labels.style=chartstyle,config.xAxis.title.style=chartstyle,config.yAxis.title.style=chartstyle,config.xAxis.title.text=uiState.horizontalAxisLabel},HighChartsHelper.setGraphPlotAreaBackgroundColors=function(config,uiState){var stops=[[0,Util.getColorString(uiState.backgroundColors[1])],[1,Util.getColorString(uiState.backgroundColors[0])]],plotAreaBackgroundColors={};plotAreaBackgroundColors.linearGradient={x0:0,x1:1,y0:0,y1:1},plotAreaBackgroundColors.stops=stops,config.chart.plotBackgroundColor=plotAreaBackgroundColors},HighChartsHelper.setChartTitleAndStyle=function(config,uiState){var titlestyle={};titlestyle.fontSize=uiState.fontSize+"px",titlestyle.color=Util.getColorString(uiState.color),titlestyle.fontWeight="bold",config.title.style=titlestyle,config.title.text=uiState.title},HighChartsHelper.setPieLabels=function(config,uiState,widgetWidth){var valueFormatterFunc,showLabels=uiState.showLabels?!0:!1,labelLength=Math.floor(widgetWidth*HighChartsHelper.PIE_LABEL_LENGTH_WIDGET_SIZE_RATIO/8);uiState.showValues?(valueFormatterFunc=uiState.showPercentValues?function(){var label="<b>"+this.percentage.toFixed(2)+"%</b>"+(showLabels?": "+this.point.name:"");return label.length>labelLength?label.substr(0,labelLength)+"...":label}:function(){var label="<b>"+this.point.y+"</b>"+(showLabels?": "+this.point.name:"");return label.length>labelLength?label.substr(0,labelLength)+"...":label},config.plotOptions.pie.dataLabels.enabled=!0,config.plotOptions.pie.dataLabels.formatter=valueFormatterFunc):showLabels?(valueFormatterFunc=function(){var label=this.point.name;return label.length>labelLength?label.substr(0,labelLength)+"...":label},config.plotOptions.pie.dataLabels.enabled=!0,config.plotOptions.pie.dataLabels.formatter=valueFormatterFunc):(config.plotOptions.pie.dataLabels.enabled=!1,delete config.plotOptions.pie.dataLabels.formatter)},HighChartsHelper.setPieLabelStyle=function(config,uiState){var chartstyle={};chartstyle.fontSize=uiState.fontSize+"px",chartstyle.color=Util.getColorString(uiState.color),config.plotOptions.pie.dataLabels.style=chartstyle},HighChartsHelper.setPieToolTipWidth=function(config,widgetWidth){var tooltipWidth=Math.floor(widgetWidth*HighChartsHelper.PIE_TOOLTIP_WIDGET_WIDTH_RATIO);config.tooltip.pointFormat=config.tooltip.pointFormat.replace("@WIDTH@",tooltipWidth+"px")},HighChartsHelper.setGaugeLabels=function(config,uiState,widgetWidth,widgetHeight){if(uiState.showValues){{var valueFormatterFunc;Math.floor(widgetWidth*HighChartsHelper.GAUGE_LABEL_LENGTH_WIDGET_SIZE_RATIO/8)}valueFormatterFunc=uiState.showPercentValues?function(){var label="<b>"+(this.y/config.yAxis.max*100).toFixed(0)+"%</b>";return label}:function(){var label="<b>"+this.y+"</b>";return label},config.plotOptions.solidgauge.dataLabels.enabled=!0,config.plotOptions.solidgauge.dataLabels.formatter=valueFormatterFunc}else config.plotOptions.solidgauge.dataLabels.enabled=!1,delete config.plotOptions.solidgauge.dataLabels.formatter;uiState.showLabels?(config.yAxis.title.text=uiState.dataMetricName,config.yAxis.title.y=widgetWidth>widgetHeight?widgetHeight/2-4:widgetWidth/2):(config.yAxis.title.text="",config.yAxis.title.y=0)},HighChartsHelper.setGaugeLabelStyle=function(config,uiState){var chartstyle={};chartstyle.fontSize=uiState.fontSize+"px",chartstyle.color=Util.getColorString(uiState.color),config.plotOptions.solidgauge.dataLabels.style=chartstyle},HighChartsHelper.setLabelStyleForWidget=function(config,widget){var chartstyle={};chartstyle.fontSize=widget.fontSize+"px",chartstyle.color=Util.getColorString(widget.color),config.plotOptions.solidgauge.dataLabels.style=chartstyle},HighChartsHelper.getSortedDataSeries=function(dataseries){var sortedSeries=_.sortBy(dataseries,function(data){return data.name});return sortedSeries},HighChartsHelper.updateHighcharts=function(containerId,chart,config){if(0!==$("#"+containerId).length){if(_.isObject(chart))try{chart.destroy()}catch(err){ADLoggerService.error("HighChartsHelper.updateHighcharts: destroy chart failed. "+err)}return new Highcharts.Chart(config)}},HighChartsHelper.getHighChartsChartType=function(chartType){return chartType!==GraphType.LINE&&chartType||(chartType=ChartTypes.SPLINE),chartType.toLowerCase()},HighChartsHelper.getGraphPlottingData=function(gsData,chartType,colorPalette){var newdata=_.map(gsData.data,function(gPoint){return[gPoint.time,gPoint.value]});chartType=HighChartsHelper.getHighChartsChartType(chartType);var dashStyle=LineTypes.SOLID;gsData.baseline&&(chartType=ChartTypes.SPLINE,dashStyle=LineTypes.DASH);var gPlottingData={};return gPlottingData.type=chartType,gPlottingData.animation=!1,gPlottingData.color=colorPalette.isEmpty()?null:colorPalette.getNextColor(),gPlottingData.name=gsData.name,gPlottingData.data=newdata,gPlottingData.dashStyle=dashStyle,gPlottingData.metricId=gsData.metricDefinition.metricId,gPlottingData},HighChartsHelper.LEGEND_WIDGET_SIZE_RATIO=.25,HighChartsHelper.LEGEND_ITEM_SYMBOL_WIDTH=20,HighChartsHelper.LEGEND_WIDGET_MARGIN=20,HighChartsHelper.PIE_LABEL_LENGTH_WIDGET_SIZE_RATIO=.5,HighChartsHelper.PIE_TOOLTIP_WIDGET_WIDTH_RATIO=.8,HighChartsHelper.GAUGE_LABEL_LENGTH_WIDGET_SIZE_RATIO=.5,HighChartsHelper}();define("app/view/customDashboard/widgets/HighChartsHelper",function(){});var DashboardLiveUpdateService=function(){function DashboardLiveUpdateService($rootScope,$interval){this.$rootScope=$rootScope,this.$interval=$interval,this.dashboardConfigUpdater=null,this.dashboardWidgetUpdater=null}return DashboardLiveUpdateService.prototype.startLiveUpdateDashboardConfig=function(updater,updateInterval){void 0===updateInterval&&(updateInterval=null);var interval;interval=updateInterval?updateInterval:DashboardLiveUpdateService.DASHBOARD_CONFIG_LIVE_UPDATE_INTERVAL,this.stopLiveUpdateDashboardConfig(),this.dashboardConfigUpdater=this.$interval(updater,interval)},DashboardLiveUpdateService.prototype.stopLiveUpdateDashboardConfig=function(){var dcu=this.dashboardConfigUpdater;dcu&&this.$interval.cancel(dcu)},DashboardLiveUpdateService.prototype.startLiveUpdateDashboardWidgets=function(refreshInterval){var $rootScope=this.$rootScope;this.stopLiveUpdateDashboardWidgets(),this.dashboardWidgetUpdater=this.$interval(function(){$rootScope.$broadcast(AdWidgetController.REFRESH_WIDGET,{refreshTarget:"*",isDataRefresh:!0})},refreshInterval)},DashboardLiveUpdateService.prototype.stopLiveUpdateDashboardWidgets=function(){var dwu=this.dashboardWidgetUpdater;dwu&&this.$interval.cancel(dwu)},DashboardLiveUpdateService.DASHBOARD_CONFIG_LIVE_UPDATE_INTERVAL=12e4,DashboardLiveUpdateService.$inject=["$rootScope","$interval"],DashboardLiveUpdateService}();appdynamicsModule.service("dashboardLiveUpdateService",DashboardLiveUpdateService),define("app/view/customDashboard/common/DashboardLiveUpdateService",function(){});var DashboardHelper=function(){function DashboardHelper($location,$http,notificationService){this.$location=$location,this.$http=$http,this.notificationService=notificationService,this.isResizeTriggerScheduled=!1}return DashboardHelper.instance=function(){return AngularUtil.getADInjector().get(DashboardHelper.NAME)},DashboardHelper.getDefaultCustomDashboard=function(){var customDashboard={};return customDashboard.name="",customDashboard.dashboardUIState={},customDashboard.dashboardUIState.width=1024,customDashboard.dashboardUIState.height=768,customDashboard.dashboardUIState.canvasType=CustomDashBoardCanvasType.CANVAS_TYPE_GRID,customDashboard.dashboardUIState.templateEntityType=EntityType.APPLICATION_COMPONENT_NODE,customDashboard.dashboardUIState.refreshInterval=12e4,customDashboard.dashboardUIState.backgroundColor=DashboardHelper.DASHBOARD_BG_COLOR,customDashboard},DashboardHelper.getEntity=function(customDashboard){var entity=EntityUtils.getEntity(customDashboard);return entity.type=DashboardHelper.getEntityTypeDisplayString(customDashboard.dashboardUIState.templateEntityType),entity},DashboardHelper.getEntities=function(customDashboards){for(var entities=[],i=0;i<customDashboards.length;i++)entities.push(DashboardHelper.getEntity(customDashboards[i]));return entities},DashboardHelper.getEntityTypeDisplayString=function(entityType){return entityType===EntityType.APPLICATION_COMPONENT?"Tier":entityType===EntityType.APPLICATION_COMPONENT_NODE?"Node":""},DashboardHelper.prototype.getCanvasHeight=function(isTemplate){var height=$(window).height();return NavigationService.instance().navigationState.isTopMenuBarMinimized||(height-=$("#topMenuBarContainerDivId").height()),height-=$("#mainTitleBarContainerId").height(),height-=$(".action-bar").height(),isTemplate&&(height-=$(".adsDashboardRowTabs").height()),height},DashboardHelper.prototype.getCanvasHeightForViewer=function(hideChrome){void 0===hideChrome&&(hideChrome=!1);var height=$(window).height();return height-=$(".ads-dashboard-viewer-main-title-bar-container").height()},DashboardHelper.prototype.getBackgroundColor=function(dashboard){var color=Util.get(dashboard,["dashboardUIState","backgroundColor"]);return Util.getColorString(color)},DashboardHelper.prototype.getWidgetsMetricMatchCriterias=function(dashboard,properties){return _.findWhere(dashboard.widgetsMetricMatchCriterias||[],properties)},DashboardHelper.prototype.getOrCreateWidgetsMetricMatchCriterias=function(dashboard,properties){var wmmc=this.getWidgetsMetricMatchCriterias(dashboard,properties);return wmmc?Util.deepClone(wmmc):this.createWidgetsMetricMatchCriterias(dashboard,properties)},DashboardHelper.prototype.getMMCMap=function(widgetProperties,name,template){void 0===template&&(template=!1);var mmcMap=_.findWhere(widgetProperties.metricMatchCriteriaNameToMetricType||[],{name:name});return Util.isDefAndNotNull(mmcMap)?Util.deepClone(mmcMap):{name:name,value:template?PolicyTemplateType.NODE_HEALTH_TRANSACTION_PERFORMANCE:PolicyTemplateType.OVERALL_APPLICATION}},DashboardHelper.prototype.unmarshall=function(dashboardJson,currentDashboard,isEditMode){return void 0===isEditMode&&(isEditMode=!1),dashboardJson.dashboardUIState.widgets=dashboardJson.dashboardUIState.widgets||[],_.forEach(dashboardJson.dashboardUIState.widgets,function(widget){widget.order=widget.y+DashboardHelper.GRID_POSITION_MULTIPLIER*widget.x}),dashboardJson.dashboardUIState.widgets=_.map(dashboardJson.dashboardUIState.widgets,function(widget){return _.first(_.values(widget))}),_.forEach(dashboardJson.widgetsMetricMatchCriterias,function(wmmc){this.unmarshalWMMC(wmmc)},this),dashboardJson.widgetsMetricMatchCriterias=dashboardJson.widgetsMetricMatchCriterias||[],dashboardJson.dashboardUIState.widgetMetricMatchCriteriaUIStates=dashboardJson.dashboardUIState.widgetMetricMatchCriteriaUIStates||[],dashboardJson.dashboardUIState.minutesBeforeAnchorTime=this.fixMinutesBeforeAnchorTime(dashboardJson.dashboardUIState.minutesBeforeAnchorTime,dashboardJson.dashboardUIState.startTime,dashboardJson.dashboardUIState.endTime),_.forEach(dashboardJson.dashboardUIState.widgets,function(widget){0==widget.minutesBeforeAnchorTime&&(widget.minutesBeforeAnchorTime=this.fixMinutesBeforeAnchorTime(widget.minutesBeforeAnchorTime,widget.startTime,widget.endTime))},this),isEditMode&&currentDashboard&&_.isNumber(currentDashboard.version)&&(dashboardJson.dashboardUIState.widgets=currentDashboard.dashboardUIState.widgets),dashboardJson},DashboardHelper.prototype.fixMinutesBeforeAnchorTime=function(minutesBeforeAnchorTime,startTime,endTime){return 0==minutesBeforeAnchorTime&&0==startTime&&0==endTime?DateTimeUtil.getDefaultTimeRange().durationInMinutes:minutesBeforeAnchorTime},DashboardHelper.prototype.marshalWMMC=function(wmmc){var mmc=wmmc.metricMatchCriteria,aemc=mmc.affectedEntityMatchCriteria,me=mmc.metricExpression;return aemc&&(aemc.aemcType=aemc._type,delete aemc._type),me&&(me.type=me._type,delete me._type),wmmc},DashboardHelper.prototype.marshalMMC=function(mmc){mmc=angular.copy(mmc);var aemc=mmc.affectedEntityMatchCriteria,me=mmc.metricExpression;return aemc&&(aemc.aemcType=aemc._type,delete aemc._type),me&&(me.type=me._type,delete me._type),mmc},DashboardHelper.prototype.getFirstKey=function(obj){return _.keys(obj)[0]},DashboardHelper.prototype.removeGeneratedFields=function(criteria){criteria&&(delete criteria.regexpValueMatch,delete criteria.emptyPattern)},DashboardHelper.prototype.unmarshalWMMC=function(wmmc){var mmc=wmmc.metricMatchCriteria,aemc=mmc.affectedEntityMatchCriteria,me=mmc.metricExpression;return aemc&&(aemc._type=aemc.aemcType,this.removeGeneratedFields(aemc.nameMatch),this.removeGeneratedFields(Util.get(aemc,["nodeMatchCriteria","nodeNameMatchCriteria"])),this.removeGeneratedFields(aemc.nameMatchCriteria)),me&&(me._type=me.type),wmmc},DashboardHelper.prototype.getOAEMC=function(aemc){return"OVERALL_AFFECTED_EMC"===Util.get(aemc,"_type")?aemc:{_type:"OVERALL_AFFECTED_EMC",type:"APPLICATION",componentIds:[],nodeMatchCriteria:null}},DashboardHelper.prototype.getInfrastructureAEMC=function(aemc){return"INFRASTRUCTURE_AFFECTED_EMC"===Util.get(aemc,"_type")?aemc:{_type:"INFRASTRUCTURE_AFFECTED_EMC",type:"APPLICATION",componentIds:[],nodeMatchCriteria:null}},DashboardHelper.prototype.getJmxAEMC=function(aemc){return"JMX_AFFECTED_EMC"===Util.get(aemc,"_type")?aemc:{_type:"JMX_AFFECTED_EMC",type:"NODES",componentIds:[],nodeMatchCriteria:null}},DashboardHelper.prototype.getErrorsAEMC=function(aemc){return"ERRORS_AFFECTED_EMC"===Util.get(aemc,"_type")?aemc:{_type:"ERRORS_AFFECTED_EMC",type:"APPLICATION",errorIds:[],componentIds:[]}},DashboardHelper.prototype.getBTAEMC=function(aemc){return"BT_AFFECTED_EMC"===Util.get(aemc,"_type")?aemc:{_type:"BT_AFFECTED_EMC",componentIds:[],businessTransactionIds:[],nameMatch:null}},DashboardHelper.prototype.getDBAMEC=function(aemc){return"BACKEND_AFFECTED_EMC"===Util.get(aemc,"_type")?aemc:{_type:"BACKEND_AFFECTED_EMC",backendIds:[],nameMatchCriteria:null}},DashboardHelper.prototype.getEUMAMEC=function(aemc){return"EUM_AFFECTED_EMC"===Util.get(aemc,"_type")?aemc:{_type:"EUM_AFFECTED_EMC",addIds:[],applicationDiagnosticDataTypes:[],nameMatchCriteria:null}},DashboardHelper.prototype.getDashboardId=function(){var url=new URLParams;return url.getNumberParam("dashboard")},DashboardHelper.prototype.getDashboardToken=function(){var url=new URLParams;return url.getParam("token")},DashboardHelper.prototype.handleExport=function(dashboardId){var _this=this,url="/controller/CustomDashboardImportExportServlet?dashboardId="+dashboardId;this.$http.get(url).success(function(data,status,headers){var nameRegex=/CustomDashboard.*json/,filename=nameRegex.exec(headers()["content-disposition"]);Util.downloadFile(filename[0],"application/json",JSON.stringify(data,null,4))}).error(function(){_this.notificationService.displayError(ResourceManager.instance().getString("ui","ms_dashboardExportErrorMsg"),ResourceManager.instance().getString("ui","ms_dashboardExportErrorTitle"))})},DashboardHelper.prototype.createWidgetsMetricMatchCriterias=function(dashboard,properties){return{widgetGuid:properties.widgetGuid,name:properties.name,metricMatchCriteria:this.createMetricMatchCriteria()}},DashboardHelper.prototype.createMetricMatchCriteria=function(){return{applicationId:null,affectedEntityMatchCriteria:this.getOAEMC(),evaluationScopeType:null,metricExpression:{_type:"LEAF_METRIC_EXPRESSION",metricDefinition:{type:"LOGICAL_METRIC",logicalMetricName:null,scope:null,metricId:0},functionType:"VALUE",displayName:"null",literalValue:0,literalValueExpression:!1,value:0},rollupMetricData:!1,metricDataFilter:{sortResultsAscending:!1,maxResults:20},useActiveBaseline:!1,baselineId:0}},DashboardHelper.prototype.getAllWidgetMetricMatchCriteriaUIStates=function(dashboard,widgetGuid){return _.filter(dashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates,function(wmmc){return null===wmmc.colorPalette&&(wmmc.colorPalette={colors:[]}),wmmc.widgetGuid===widgetGuid})},DashboardHelper.prototype.containsSeriesName=function(i,dashboard){var mmcMap=dashboard.widgetsMetricMatchCriterias;return _.isArray(mmcMap)?null!=_.findWhere(mmcMap,{name:"Series "+i}):!1},DashboardHelper.prototype.generateSeriesName=function(dashboard){for(var i=1;this.containsSeriesName(i,dashboard);)i++;return"Series "+i},DashboardHelper.prototype.getWidgetMetricMatchCriteriaUIStates=function(dashboard,widgetGuid,name){return _.findWhere(dashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates,{widgetGuid:widgetGuid,widgetMetricMatchCriteriaName:name})},DashboardHelper.prototype.getOrCreateWidgetMetricMatchCriteriaUIStates=function(dashboard,widgetGuid,name){var wmmc=this.getWidgetMetricMatchCriteriaUIStates(dashboard,widgetGuid,name);return wmmc?Util.deepClone(wmmc):this.createWidgetMetricMatchCriteriaUIStates(dashboard,widgetGuid,name)},DashboardHelper.prototype.removeWidgets=function(dashboard,widgetGuids){return _.map(widgetGuids,function(widgetGuid){return Util.removeWhere(dashboard.dashboardUIState.widgets,{widgetGuid:widgetGuid})})},DashboardHelper.prototype.bringWidgetsToFront=function(dashboard,widgetGuids){var removedWidgets=this.removeWidgets(dashboard,widgetGuids);_.forEach(removedWidgets,function(widget){dashboard.dashboardUIState.widgets.push(widget)})},DashboardHelper.prototype.bringWidgetsToBack=function(dashboard,widgetGuids){var removedWidgets=this.removeWidgets(dashboard,widgetGuids);_.forEach(removedWidgets,function(widget){dashboard.dashboardUIState.widgets.unshift(widget)})},DashboardHelper.prototype.deleteWidget=function(dashboard,widgetGuid){var filterOutWidgetGuid=function(wmmc){return wmmc.widgetGuid!==widgetGuid};Util.removeWhere(dashboard.dashboardUIState.widgets,{widgetGuid:widgetGuid}),dashboard.widgetsMetricMatchCriterias=_.filter(dashboard.widgetsMetricMatchCriterias,filterOutWidgetGuid),dashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates=_.filter(dashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates,filterOutWidgetGuid)},DashboardHelper.prototype.deleteSeries=function(dashboard,widgetProperties,seriesName){Util.removeWhere(dashboard.widgetsMetricMatchCriterias,{widgetGuid:widgetProperties.widgetGuid,name:seriesName}),Util.removeWhere(dashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates,{widgetGuid:widgetProperties.widgetGuid,widgetMetricMatchCriteriaName:seriesName}),Util.removeWhere(widgetProperties.metricMatchCriteriaNameToMetricType,{name:seriesName})},DashboardHelper.prototype.duplicateWidget=function(dashboard,widgetGuid){var duplicatedWidget,duplicatedWmmc,duplicatedUis,widget=_.findWhere(dashboard.dashboardUIState.widgets,{widgetGuid:widgetGuid}),wmmcList=_.where(dashboard.widgetsMetricMatchCriterias,{widgetGuid:widgetGuid}),uisList=_.where(dashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates,{widgetGuid:widgetGuid}),newWidgetGuid=Util.generateId();return widget&&(duplicatedWidget=angular.copy(widget),duplicatedWidget.widgetGuid=newWidgetGuid,dashboard.dashboardUIState.canvasType==CustomDashBoardCanvasType.CANVAS_TYPE_ABSOLUTE?(duplicatedWidget.x+=50,duplicatedWidget.y+=50):(delete duplicatedWidget.x,delete duplicatedWidget.y),delete duplicatedWidget.id,delete duplicatedWidget.version,dashboard.dashboardUIState.widgets.push(duplicatedWidget)),_.forEach(wmmcList,function(wmmc){duplicatedWmmc=angular.copy(wmmc),duplicatedWmmc.widgetGuid=newWidgetGuid,"METRIC_LABEL"===Util.get(widget,["widgetType"])&&(duplicatedWmmc.name=newWidgetGuid),delete duplicatedWmmc.id,delete duplicatedWmmc.version,duplicatedWidget.metricMatchCriteria&&(delete duplicatedWmmc.metricMatchCriteria.id,delete duplicatedWmmc.metricMatchCriteria.version,duplicatedWidget.metricMatchCriteria.affectedEntityMatchCriteria&&(delete duplicatedWmmc.metricMatchCriteria.affectedEntityMatchCriteria.id,delete duplicatedWmmc.metricMatchCriteria.affectedEntityMatchCriteria.version)),dashboard.widgetsMetricMatchCriterias.push(duplicatedWmmc)}),_.forEach(uisList,function(uis){duplicatedUis=angular.copy(uis),duplicatedUis.widgetGuid=newWidgetGuid,dashboard.dashboardUIState.widgetMetricMatchCriteriaUIStates.push(duplicatedUis)}),newWidgetGuid},DashboardHelper.prototype.duplicateWidgets=function(dashboard,widgetGuids){return _.map(widgetGuids,function(widgetGuid){return this.duplicateWidget(dashboard,widgetGuid)},this)},DashboardHelper.prototype.createWidgetMetricMatchCriteriaUIStates=function(dashboard,widgetGuid,name){return{widgetGuid:widgetGuid,widgetMetricMatchCriteriaName:name,seriesType:"LINE",colorPalette:{colors:[]},showRawMetricName:!1}},DashboardHelper.prototype.hasMetricLabel=function(dashboard,widgetGuid){return null!=this.getWidgetsMetricMatchCriterias(dashboard,{widgetGuid:widgetGuid})},DashboardHelper.prototype.getMetricLabel=function(dashboard,widgetGuid){var wmmc=this.getWidgetsMetricMatchCriterias(dashboard,{widgetGuid:widgetGuid});return Util.get(wmmc,["metricMatchCriteria","metricExpression","metricDefinition","logicalMetricName"])},DashboardHelper.prototype.setMetric=function(dashboard,data){var widgetGuid=data.widgetGuid,appId=data.appId,metricName=data.metricName,metricId=data.metricId,type=data.type,wmmc=this.getWidgetsMetricMatchCriterias(dashboard,{widgetGuid:widgetGuid}),newWmmc=wmmc||{metricMatchCriteria:{metricExpression:{_type:"LEAF_METRIC_EXPRESSION",metricDefinition:{type:"ABSOLUTE_METRIC_SCOPE",scope:{entityType:type}},functionType:"VALUE"},rollupMetricData:!0}};newWmmc.name=widgetGuid,newWmmc.widgetGuid=widgetGuid,newWmmc.metricMatchCriteria.applicationId=appId,newWmmc.metricMatchCriteria.metricExpression.metricDefinition.logicalMetricName=metricName,newWmmc.metricMatchCriteria.metricExpression.metricDefinition.metricId=metricId,newWmmc.metricMatchCriteria.metricExpression.metricDefinition.scope.entityType=type,newWmmc.metricMatchCriteria.metricExpression.metricDefinition.scope.entityId=data.entityId,wmmc||dashboard.widgetsMetricMatchCriterias.push(newWmmc)},DashboardHelper.prototype.setMetricFunctionType=function(dashboard,widgetGuid,functionType){var wmmc=_.findWhere(dashboard.widgetsMetricMatchCriterias,{widgetGuid:widgetGuid});wmmc&&(wmmc.metricMatchCriteria.metricExpression.functionType=functionType)},DashboardHelper.prototype.getReadableMetricName=function(name,decode){return null==name?null:(name=name.replace(Constants.DEFAULT_TRANSACTION_NAME,Constants.OVERFLOW_BT_NAME),_.map(name.split("|"),function(item){var result=item;if(decode)try{result=decodeURIComponent(item)}catch(error){ADLoggerService.warn("DashboardHelper.getReadableMetricName Skipped decode of "+name),result=item}return result}).join("|"))},DashboardHelper.prototype.rescaleHighcharts=function(delay){var _this=this;void 0===delay&&(delay=300),this.isResizeTriggerScheduled||(this.isResizeTriggerScheduled=!0,InjectorService.instance().$timeout()(function(){_this.isResizeTriggerScheduled=!1,$(window).trigger("resize")},delay))},DashboardHelper.NAME="dashboardHelper",DashboardHelper.DASHBOARD_BG_COLOR=13685977,DashboardHelper.AUTO_SAVE_TROTTLE_MILIS=3e4,DashboardHelper.GRID_RESIZE_TROTTLE_MILIS=3e3,DashboardHelper.GRID_POSITION_MULTIPLIER=1e3,DashboardHelper.$inject=["$location","$http","notificationService"],DashboardHelper}();appdynamicsModule.service(DashboardHelper.NAME,DashboardHelper),define("app/view/customDashboard/editor/DashboardHelper",function(){});var MetricBrowserHelper=function(){function MetricBrowserHelper(navigationService,timeRangeService,customDashboardUiService,injectorService){this.navigationService=navigationService,this.timeRangeService=timeRangeService,this.customDashboardUiService=customDashboardUiService,this.injectorService=injectorService}return MetricBrowserHelper.instance=function(){return AngularUtil.getADInjector().get(MetricBrowserHelper.SERVICE_NAME)},MetricBrowserHelper.prototype.getMetricDefinitionsAndOpenMetricBrowser=function(appId,dashboardId,trs,widgetGuid,currentDashboard){var _this=this;if(MasterService.instance().isSharedDashboardPageRequestWithToken()){var urlParams=URLParams.createEmptyUrlParams();urlParams.setParam(UrlConstants.LOCATION,NavigationDataConstants.CDASHBOARD_DETAIL),urlParams.setNumberParam(UrlConstants.CUSTOM_DASHBOARD_ID,dashboardId),urlParams.setNumberParam(UrlConstants.APPLICATION_ID,appId),urlParams.setParam(MetricBrowserHelper.URL_PARAM_DRILL_DOWN_INTO_METRIC_BROWSER_FOR_WIDGET_GUID,widgetGuid),urlParams.setParam(UrlConstants.TIME_RANGE,TimeRangeService.instance().convertForUrl(trs));var newUrl=WebUtil.getCurrentURLIncludingController()+window.location.search+"#"+urlParams.toStringNoForwardSlash();WebUtil.loadURL(newUrl)}else{var resultHandler=function(response){var metricDefinitions=_this.customDashboardUiService.getApplicationMetricDefinitionsForWidget_response(response);_this.openMetricBrowser(appId,metricDefinitions,trs,currentDashboard)},promise=this.customDashboardUiService.getApplicationMetricDefinitionsForWidget(dashboardId,widgetGuid,appId);promise.then(resultHandler)}},MetricBrowserHelper.prototype.openMetricBrowser=function(appId,metricDefinitions,trs,currentDashboard){var location=NavigationDataConstants.METRIC_BROWSER;if(metricDefinitions.length>0){var params="";_.map(metricDefinitions,function(metricDefinition){params+=metricDefinition.entityDefinition.entityType+"."+metricDefinition.entityDefinition.entityId+"."+metricDefinition.metricId,params+=","}),""!=params&&(params=params.substring(0,params.length-1));var additionalParameters={};additionalParameters[UrlConstants.METRICS]=params,additionalParameters[UrlConstants.AXIS]="linear",additionalParameters[UrlConstants.SHOW_POINTS]=!0,additionalParameters[UrlConstants.TIME_RANGE]=this.timeRangeService.convertToPreferenceString(trs,"."),additionalParameters[UrlConstants.VIEW_TREE]=!0;var urlParams=this.navigationService.getUrlParams(appId,location,currentDashboard,null,additionalParameters,!0);if(MasterService.instance().isSharedDashboardPageRequestWithToken()){var newUrl=WebUtil.getCurrentURLIncludingController()+window.location.search+"#"+urlParams.toStringNoForwardSlash();WebUtil.loadURL(newUrl)}else MetricBrowserViewService.instance().gotoMetricBrowserLocation(urlParams)}},MetricBrowserHelper.SERVICE_NAME="metricBrowserHelper",MetricBrowserHelper.URL_PARAM_DRILL_DOWN_INTO_METRIC_BROWSER_FOR_WIDGET_GUID="drillDownIntoMetricBrowserForWidgetGuid",MetricBrowserHelper.$inject=["navigationService","timeRangeService","customDashboardUiService","injectorService"],MetricBrowserHelper}();appdynamicsModule.service(MetricBrowserHelper.SERVICE_NAME,MetricBrowserHelper),define("app/view/customDashboard/editor/MetricBrowserHelper",function(){});var UIData=function(){function UIData(){this.nodeMetrics=[UIData.NODE_RS_AVERAGE_RESPONSE_TIME,UIData.NODE_RS_CALLS_PER_MIN,UIData.APP_ERROR_PAGE_REDIRECTS_PER_MIN,UIData.NODE_RS_ERRORS_PER_MIN,UIData.APP_HTTP_ERROR_CODES_PER_MIN,UIData.NODE_RS_INFRASTRUCTURE_ERRORS_PER_MIN,UIData.NODE_RS_NUM_SLOW_CALLS,UIData.NODE_RS_NUM_VERY_SLOW_CALLS,UIData.NODE_RS_NUM_STALLS],this.errorMetrics=[UIData.APP_ERRORS_PER_MIN],this.btMetrics=[UIData.BT_AVERAGE_CPU_USED,UIData.BT_AVERAGE_RESPONSE_TIME,UIData.BT_CALLS_PER_MIN,UIData.BT_ERRORS_PER_MIN,UIData.BT_NUM_SLOW_CALLS,UIData.BT_NUM_VERY_SLOW_CALLS,UIData.BT_NUM_STALLS],this.backendMetrics=[UIData.APP_AVERAGE_RESPONSE_TIME,UIData.APP_CALLS_PER_MIN,UIData.APP_ERRORS_PER_MIN],this.eumMetrics=[UIData.APP_SERVER_CALLS_PER_MIN,UIData.APP_SERVER_TIME,UIData.BROWSER_QUEUE_TIME,UIData.DOM_BUILDING_TIME,UIData.DOM_READY_TIME,UIData.DOM_READY_TIME_50,UIData.DOM_READY_TIME_90,UIData.DOM_READY_TIME_95,UIData.DOM_READY_TIME_99,UIData.DOMAIN_LOOKUP_TIME,UIData.END_USER_RESPONSE_TIME,UIData.END_USER_RESPONSE_TIME_50,UIData.END_USER_RESPONSE_TIME_90,UIData.END_USER_RESPONSE_TIME_95,UIData.END_USER_RESPONSE_TIME_99,UIData.FIRST_BYTE_TIME,UIData.FIRST_BYTE_TIME_50,UIData.FIRST_BYTE_TIME_90,UIData.FIRST_BYTE_TIME_95,UIData.FIRST_BYTE_TIME_99,UIData.FRONT_END_TIME,UIData.HTML_DOWNLOAD_AND_DOM_BUILDING_TIME,UIData.HTML_DOWNLOAD_TIME,UIData.IMAGES_LOADED_PER_PAGEVIEW,UIData.PAGE_VIEWS_WITH_JAVASCRIPT_ERRORS,UIData.REQUESTS_PER_MINUTE,UIData.RESOURCE_FETCH_TIME,UIData.RESOURCES_LOADED_PER_PAGEVIEW,UIData.RESOURCES_LOADED_PER_PAGEVIEW,UIData.RESPONSE_AVAILABLE_TIME,UIData.SCRIPTS_LOADED_PER_PAGEVIEW,UIData.SERVER_CONNECTION_TIME,UIData.SSL_HANDSHAKE_TIME,UIData.SYNTHETIC_REQUESTS,UIData.TCP_CONNECT_TIME,UIData.TOTAL_RESOURCE_REDIRECT_TIME],this.eumSynthJobMetrics=[UIData.JOB_EXECUTIONS,UIData.SESSION_DURATION,UIData.SESSION_VISUAL_TIME,UIData.BILLABLE_TIME,UIData.AVAILABILITY,UIData.SYNTH_PAGES_PER_SESSION],this.jvmMetrics=[UIData.CLASSES_CURRENT_LOADED,UIData.CLASSES_TOTAL_LOADED,UIData.GC_TIME_PER_MIN,UIData.GC_MAJOR_TIME_SPENT_PER_MIN,UIData.GC_MAJOR_PER_MIN,UIData.GC_MINOR_TIME_SPENT_PER_MIN,UIData.GC_MINOR_PER_MIN,UIData.MEMORY_HEAP_COMMITTED,UIData.MEMORY_HEAP_CURRENT,UIData.MEMORY_HEAP_MAX,UIData.MEMORY_HEAP_PERCENTAGE_USAGE,UIData.MEMORY_NONHEAP_COMMITTED,UIData.MEMORY_NONHEAP_CURRENT,UIData.MEMORY_NONHEAP_MAX,UIData.MEMORY_NONHEAP_PERCENTAGE_USAGE,UIData.THREADS_CURRENT_NUM,UIData.PROCESS_CPU_TIME],this.clrMetrics=[UIData.MEMORY_CURRENT,UIData.MEMORY_COMMITED,UIData.MEMORY_GEN_0_HEAP_SIZE,UIData.MEMORY_GEN_1_HEAP_SIZE,UIData.MEMORY_GEN_2_HEAP_SIZE,UIData.MEMORY_LARGE_OBJECT_CURRENT,UIData.GC_NUM_INDUCED,UIData.GC_TIME_SPENT,UIData.LOCKS_AND_THREADS_SINK_BLOCKS_IN_USE,UIData.LOCKS_AND_THREADS_CURRENT_PHYSICAL_THREADS,UIData.LOCKS_AND_THREADS_CURRENT_LOGICAL_THREADS,UIData.LOCKS_AND_THREADS_CONTENTION_RATE_PER_SEC,UIData.CLR_PROCESS_CPU_TIME,UIData.CLR_CLASSES_CURRENT_LOADED,UIData.CLR_CLASSES_TOTAL_LOADED],this.agentMetrics=[UIData.APP_AGENT_AVAIL_METRIC,UIData.BT_REGISTRATION_FAILED,UIData.BT_REGISTRATION_SUCCESSFUL,UIData.BT_UNMONITORED_CALLS_PER_MIN,UIData.CONFIG_CHANNEL_NUMBER_OF_APPLICATION_INFRASTRUCUTRE_CHANGES_SENT,UIData.DISCOVERED_BACKENDS_REGISTRATION_FAILED,UIData.DISCOVERED_BACKENDS_REGISTRATION_SUCCESSFUL,UIData.EVENT_EVENTS_EXCEEDING_LIMIT,UIData.EVENT_EVENTS_UPLOADED,UIData.EVENT_TIME_SKEW_ERRORS,UIData.MACHINE_AGENT_AVAIL_METRIC,UIData.METRICS_INVALID_METRICS,UIData.METRICS_METRICS_UPLOADED,UIData.METRICS_REQUEST_TIME_SKEW_ERRORS,UIData.METRICS_REQUESTS_EXCEEDING_LIMIT,UIData.METRICS_REQUESTS_LICENSE_ERRORS,UIData.SNAPSHOT_INVALID_SNAPSHOTS,UIData.SNAPSHOT_SNAPSHOTS_EXCEEDING_LIMIT,UIData.SNAPSHOT_SNAPSHOTS_UPLOADED,UIData.SNAPSHOT_TIME_SKEW_ERRORS,UIData.TSS_INVALID_TOPSUMMARYSTATS,UIData.TSS_TOPSUMMARYSTATS_EXCEEDING_LIMIT,UIData.TSS_TOPSUMMARYSTATS_TIME_SKEW_ERRORS,UIData.TSS_TOPSUMMARYSTATS_UPLOADED],this.hwMetrics=[UIData.CPU_PERCENT_BUSY,UIData.CPU_PERCENT_IDLE,UIData.DISKS_READS_KB_PER_SEC,UIData.DISKS_WRITES_KB_PER_SEC,UIData.DISKS_WRITES_PER_SEC,UIData.MEMORY_FREE_MB,UIData.MEMORY_FREE_PERCENT,UIData.MEMORY_TOTAL_MB,UIData.MEMORY_USED_PERCENT,UIData.MEMORY_USED_MB,UIData.NETWORK_INCOMING_KB_PER_SEC,UIData.NETWORK_INCOMING_PACKETS_PER_SEC,UIData.NETWORK_OUTGOING_KB_PER_SEC,UIData.NETWORK_OUTGOING_PACKETS_PER_SEC],this.infrastructureMetrics={expanded:!0,children:[{text:UIData.AGENT,id:UIData.AGENT,leaf:!1,expanded:!1,children:this.generateSubTree(this.agentMetrics)},{text:UIData.HARDWARE_RESOURCES,id:UIData.HARDWARE_RESOURCES,leaf:!1,expanded:!1,children:this.generateSubTree(this.hwMetrics)},{text:UIData.JVM,id:UIData.JVM,leaf:!1,expanded:!1,children:this.generateSubTree(this.jvmMetrics)},{text:UIData.CLR,id:UIData.CLR,leaf:!1,expanded:!1,children:this.generateSubTree(this.clrMetrics)}]},this.businessTransactionMetrics={expanded:!0,children:[{text:"Business Transaction Performance",id:"Business Transaction Performance",leaf:!1,expanded:!0,children:this.generateSubTree(this.btMetrics)}]},this.backendMetricsTree={expanded:!0,children:[{text:"Backends",id:"Backends",leaf:!1,expanded:!0,children:this.generateSubTree(this.backendMetrics)}]},this.eumMetricsTree={expanded:!0,children:[{text:"End User Experience",id:"End User Experience",leaf:!1,expanded:!0,children:this.generateSubTree(this.eumMetrics)}]},this.eumSynthJobMetricsTree={expanded:!0,children:[{text:"Synthetic Jobs",id:"Synthetic Jobs",leaf:!1,expanded:!0,children:this.generateSubTree(this.eumSynthJobMetrics)}]},this.nodeHealthTPMetrics={expanded:!0,children:[{text:"Overall Node Performance",id:"Overall Node Performance",leaf:!1,expanded:!0,children:this.generateSubTree(this.nodeMetrics)}]},this.errorRatesMetrics={expanded:!0,children:[{text:"Application Errors",id:"Application Errors",leaf:!1,expanded:!0,children:this.generateSubTree(this.errorMetrics)}]},this.seriesCategories=[{name:"Overall Application Performance (load, response time, num slow calls, etc)",value:PolicyTemplateType.OVERALL_APPLICATION,ico:ImageUtil.policyOverallAppPerformance},{name:"Business Transaction Performance (load, response time, slow calls, etc)",value:PolicyTemplateType.BUSINESS_TRANSACTION,ico:ImageUtil.policyBT},{name:"Databases & Remote Services",value:PolicyTemplateType.BACKEND,ico:ImageUtil.policyDatabase},{name:"End User Experience",value:PolicyTemplateType.APPLICATION_DIAGNOSTIC_DATA,ico:ImageUtil.policyEUM},{name:"Tier / Node Health - Transaction Performance (load, response time, slow calls, etc)",value:PolicyTemplateType.NODE_HEALTH_TRANSACTION_PERFORMANCE,ico:ImageUtil.policyNodeBT},{name:"Tier / Node Health - Hardware, JVM, CLR (cpu, heap, disk I/O, etc)",value:PolicyTemplateType.INFRASTRUCTURE,ico:ImageUtil.policyNodeHardware},{name:"Tier / Node Health - JMX (connection pools, thread pools, etc)",value:PolicyTemplateType.JMX,ico:ImageUtil.policyNodeHealth},{name:"Error Rates (exceptions, return codes, etc)",value:PolicyTemplateType.ERROR,ico:ImageUtil.policyErrorRate},{name:"Custom (use any metrics)",value:PolicyTemplateType.OTHER,ico:ImageUtil.policyCustom}],this.functionTypes=[{name:"Minimum",value:FunctionType.MIN},{name:"Maximum",value:FunctionType.MAX},{name:"Value",value:FunctionType.VALUE},{name:"Sum",value:FunctionType.SUM},{name:"Count",value:FunctionType.COUNT},{name:"Current",value:FunctionType.CURRENT}],this.nodeTypes=[{name:"All Nodes",value:EntityType.ALL},{name:"Java Nodes",value:AgentType.APP_AGENT},{name:".NET Nodes",value:AgentType.DOT_NET_APP_AGENT},{name:"PHP Nodes",value:AgentType.PHP_APP_AGENT}],this.tierOptions=[{name:"All Tiers in the Application",value:InfrastructureAffectedEntityMatchCriteriaType.ALL_TIERS},{name:"These specific Tiers",value:InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS}],this.displayTypes=[{name:"Line",value:GraphType.LINE,ico:ImageUtil.customDashboardLineSeries},{name:"Area",value:GraphType.AREA,ico:ImageUtil.customDashboardAreaSeries},{name:"Column",value:GraphType.COLUMN,ico:ImageUtil.customDashboardBarSeries},{name:"Scatter",value:GraphType.SCATTER,ico:ImageUtil.customDashboardScatterSeries}],this.operationTypes=[{name:"Equals",value:StringMatchType.EQUALS},{name:"Starts With",value:StringMatchType.STARTSWITH},{name:"Ends With",value:StringMatchType.ENDSWITH},{name:"Contains",value:StringMatchType.CONTAINS}],this.btOptions=[{name:"All Business Transactions in the Application",value:BTAffectedEntityMatchCriteriaType.ALL},{name:"Business Transactions within the specified Tiers:",value:BTAffectedEntityMatchCriteriaType.BTS_OF_SPFICIC_TIERS},{name:"These specified Business Transactions:",value:BTAffectedEntityMatchCriteriaType.SPECIFIC},{name:"Business Transactions matching the following criteria:",value:BTAffectedEntityMatchCriteriaType.CUSTOM}],this.btOptionsForTemplate=[{name:"All Business Transactions in the Application",value:BTAffectedEntityMatchCriteriaType.ALL},{name:"Business Transactions within this Tier",value:BTAffectedEntityMatchCriteriaType.BTS_OF_SPFICIC_TIERS}],this.dbOptions=[{name:"All Databases & Remote Services in the Application",value:BackendAffectedEntityMatchCriteriaType.ALL_BACKENDS},{name:"These specified Databases & Remote Services:",value:BackendAffectedEntityMatchCriteriaType.SPECIFIC_BACKENDS},{name:"Databases & Remote Services matching the following criteria:",value:BackendAffectedEntityMatchCriteriaType.NAME_MATCH}],this.eumOptions={BASE_PAGE:[{name:"All Pages in the Application",value:ApplicationDiagnosticDataMatchCriteriaType.ALL_ADDS},{name:"These specified Pages:",value:ApplicationDiagnosticDataMatchCriteriaType.SPECIFIC_ADDS},{name:"Pages matching the following criteria:",value:ApplicationDiagnosticDataMatchCriteriaType.NAME_MATCH}],IFRAME:[{name:"All iFrames in the Application",value:ApplicationDiagnosticDataMatchCriteriaType.ALL_ADDS},{name:"These specified iFrames:",value:ApplicationDiagnosticDataMatchCriteriaType.SPECIFIC_ADDS},{name:"iFrames matching the following criteria:",value:ApplicationDiagnosticDataMatchCriteriaType.NAME_MATCH}],AJAX_REQUEST:[{name:"All AJAX Requests in the Application",value:ApplicationDiagnosticDataMatchCriteriaType.ALL_ADDS},{name:"These specified AJAX Requests:",value:ApplicationDiagnosticDataMatchCriteriaType.SPECIFIC_ADDS},{name:"AJAX Requests matching the following criteria:",value:ApplicationDiagnosticDataMatchCriteriaType.NAME_MATCH}]},this.nodeOptions=[{name:"All Nodes in the Application",value:NodeMatchCriteriaType.ANY},{name:"Nodes within the specified Tiers:",value:NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS},{name:"These specified Nodes:",value:NodeMatchCriteriaType.SPECIFC},{name:"Nodes matching the following criteria:",value:NodeMatchCriteriaType.CUSTOM}],this.nodeOptionsForNodeTemplate=[{name:"This Node",value:NodeMatchCriteriaType.SPECIFC},{name:"This Node's Tier",value:InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS},{name:"All Nodes in this Tier",value:NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS}],this.nodeOptionsForTierTemplate=[{name:"This Tier",value:InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS},{name:"All Nodes in this Tier",value:NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS}],this.errorOptions=[{name:"All Errors in the Application",value:ErrorsAffectedEntityMatchCriteriaType.ALL},{name:"These specified Errors:",value:ErrorsAffectedEntityMatchCriteriaType.SPECIFIC},{name:"Errors within the specified Tiers:",value:ErrorsAffectedEntityMatchCriteriaType.ERRORS_OF_SPECIFIC_TIERS},{name:"Errors matching the following criteria:",value:ErrorsAffectedEntityMatchCriteriaType.CUSTOM}],this.errorOptionsForTemplate=[{name:"All Errors in the Application",value:ErrorsAffectedEntityMatchCriteriaType.ALL},{name:"Errors within this Tier",value:ErrorsAffectedEntityMatchCriteriaType.ERRORS_OF_SPECIFIC_TIERS}],this.sortOptions=[{name:"Descending",value:!1},{name:"Ascending",value:!0}],this.drillDownActionTypes=[{name:"Open Metric Browser",value:!0},{name:"Open Specific URL",value:!1}]
}return UIData.prototype.generateSubTree=function(metrics){return _.map(metrics,function(metric){return{text:metric,id:metric,leaf:!0}})},UIData.prototype.getData=function(isTemplate,isNodeTemplate){return void 0===isTemplate&&(isTemplate=!1),void 0===isNodeTemplate&&(isNodeTemplate=!1),{functionTypes:this.functionTypes,seriesCategories:this.seriesCategories,displayTypes:this.displayTypes,drillDownActionTypes:this.drillDownActionTypes,btOptions:isTemplate?this.btOptionsForTemplate:this.btOptions,dbOptions:this.dbOptions,eumOptions:this.eumOptions,tierOptions:this.tierOptions,operationTypes:this.operationTypes,nodeTypes:this.nodeTypes,nodeOptions:isTemplate?isNodeTemplate?this.nodeOptionsForNodeTemplate:this.nodeOptionsForTierTemplate:this.nodeOptions,errorOptions:isTemplate?this.errorOptionsForTemplate:this.errorOptions,sortOptions:this.sortOptions,businessTransactionMetrics:this.businessTransactionMetrics,nodeHealthTPMetrics:this.nodeHealthTPMetrics,errorRatesMetrics:this.errorRatesMetrics}},UIData.$inject=[],UIData.SERIES_TYPE_NODES="NODES",UIData.SERIES_TYPE_TIERS="TIERS",UIData.APP_AVERAGE_END_TO_END_LATENCY="Average End to End Latency (ms)",UIData.APP_AVERAGE_RESPONSE_TIME="Average Response Time (ms)",UIData.APP_ERROR_PAGE_REDIRECTS_PER_MIN="Error Page Redirects per Minute",UIData.APP_EXCEPTIONS_PER_MIN="Exceptions per Minute",UIData.APP_HTTP_ERROR_CODES_PER_MIN="HTTP Error Codes per Minute",UIData.APP_CALLS_PER_MIN="Calls per Minute",UIData.APP_END_TO_END_MESSAGES_PER_MIN="End to End Messages per Minute",UIData.APP_ERRORS_PER_MIN="Errors per Minute",UIData.APP_INFRASTRUCTURE_ERRORS_PER_MIN="Infrastructure Errors per Minute",UIData.APP_NORMAL_AVERAGE_RESOPNSE_TIME="Normal Average Response Time (ms)",UIData.APP_NUM_SLOW_CALLS="Number of Slow Calls",UIData.APP_NUM_SLOW_END_TO_END_MESSAGES="Number of Slow End to End Messages",UIData.APP_NUM_VERY_SLOW_CALLS="Number of Very Slow Calls",UIData.APP_NUM_STALLS="Stall Count",UIData.BT_AVERAGE_CPU_USED="Average CPU Used (ms)",UIData.BT_AVERAGE_RESPONSE_TIME="Average Response Time (ms)",UIData.BT_CALLS_PER_MIN="Calls per Minute",UIData.BT_ERRORS_PER_MIN="Errors per Minute",UIData.BT_NORMAL_AVERAGE_RESPONSE_TIME="Normal Average Response Time (ms)",UIData.BT_NUM_SLOW_CALLS="Number of Slow Calls",UIData.BT_NUM_VERY_SLOW_CALLS="Number of Very Slow Calls",UIData.BT_NUM_STALLS="Stall Count",UIData.NODE_RS_AVERAGE_RESPONSE_TIME="Average Response Time (ms)",UIData.NODE_RS_CALLS_PER_MIN="Calls per Minute",UIData.NODE_RS_ERRORS_PER_MIN="Errors per Minute",UIData.NODE_RS_INFRASTRUCTURE_ERRORS_PER_MIN="Infrastructure Errors per Minute",UIData.NODE_RS_NUM_SLOW_CALLS="Number of Slow Calls",UIData.NODE_RS_NUM_VERY_SLOW_CALLS="Number of Very Slow Calls",UIData.NODE_RS_NUM_STALLS="Stall Count",UIData.MONITOR_NAME="BTM",UIData.APPLICATION_SUMMARY_CATEGORY="Application Summary",UIData.CLR="CLR",UIData.MEMORY_CURRENT="CLR|Memory:Heap|Current Usage (bytes)",UIData.MEMORY_COMMITED="CLR|Memory:Heap|Committed (bytes)",UIData.MEMORY_GEN_0_HEAP_SIZE="CLR|Memory:Heap|Gen 0 Usage (bytes)",UIData.MEMORY_GEN_1_HEAP_SIZE="CLR|Memory:Heap|Gen 1 Usage (bytes)",UIData.MEMORY_GEN_2_HEAP_SIZE="CLR|Memory:Heap|Gen 2 Usage (bytes)",UIData.MEMORY_LARGE_OBJECT_CURRENT="CLR|Memory:Large Object Heap|Current Usage (bytes)",UIData.GC_NUM_INDUCED="CLR|Garbage Collection|Number of Induced GCs",UIData.GC_TIME_SPENT="CLR|Garbage Collection|GC Time Spent (%)",UIData.LOCKS_AND_THREADS_SINK_BLOCKS_IN_USE="CLR|Locks and Threads|Sink Blocks In Use",UIData.LOCKS_AND_THREADS_CURRENT_PHYSICAL_THREADS="CLR|Locks and Threads|Current Physical Threads",UIData.LOCKS_AND_THREADS_CURRENT_LOGICAL_THREADS="CLR|Locks and Threads|Current Logical Threads",UIData.LOCKS_AND_THREADS_CONTENTION_RATE_PER_SEC="CLR|Locks and Threads|Contention Rate Per Sec",UIData.CLR_PROCESS_CPU_TIME="CLR|Process CPU Burnt (%)",UIData.CLR_CLASSES_CURRENT_LOADED="CLR|Classes|Current Loaded Class Count",UIData.CLR_CLASSES_TOTAL_LOADED="CLR|Classes|Total Classes Loaded",UIData.JVM="JVM",UIData.THREADS_CURRENT_NUM="JVM|Threads|Current No. of Threads",UIData.CLASSES_CURRENT_LOADED="JVM|Classes|Current Loaded Class Count",UIData.CLASSES_TOTAL_LOADED="JVM|Classes|Total Classes Loaded",UIData.PROCESS_CPU_TIME="JVM|Process CPU Burnt (ms/min)",UIData.MEMORY_HEAP_CURRENT="JVM|Memory:Heap|Current Usage (MB)",UIData.MEMORY_HEAP_COMMITTED="JVM|Memory:Heap|Committed (MB)",UIData.MEMORY_HEAP_MAX="JVM|Memory:Heap|Max Available (MB)",UIData.MEMORY_HEAP_PERCENTAGE_USAGE="JVM|Memory:Heap|Used %",UIData.MEMORY_NONHEAP_CURRENT="JVM|Memory:Non-Heap|Current Usage (MB)",UIData.MEMORY_NONHEAP_COMMITTED="JVM|Memory:Non-Heap|Committed (MB)",UIData.MEMORY_NONHEAP_MAX="JVM|Memory:Non-Heap|Max Available (MB)",UIData.MEMORY_NONHEAP_PERCENTAGE_USAGE="JVM|Memory:Non-Heap|Used %",UIData.GC_TIME_PER_MIN="JVM|Garbage Collection|GC Time Spent Per Min (ms)",UIData.GC_MINOR_PER_MIN="JVM|Garbage Collection|Number of Minor Collections Per Min",UIData.GC_MINOR_TIME_SPENT_PER_MIN="JVM|Garbage Collection|Minor Collection Time Spent Per Min (ms)",UIData.GC_MAJOR_PER_MIN="JVM|Garbage Collection|Number of Major Collections Per Min",UIData.GC_MAJOR_TIME_SPENT_PER_MIN="JVM|Garbage Collection|Major Collection Time Spent Per Min (ms)",UIData.APP_SERVER_CALLS_PER_MIN="Application Server Calls per Minute",UIData.APP_SERVER_TIME="Application Server Time (ms)",UIData.BROWSER_QUEUE_TIME="Browser Queue Time (ms)",UIData.DOM_BUILDING_TIME="DOM Building Time (ms)",UIData.DOM_READY_TIME="DOM Ready Time (ms)",UIData.DOM_READY_TIME_50="DOM Ready Time 50th percentile (ms)",UIData.DOM_READY_TIME_90="DOM Ready Time 90th percentile (ms)",UIData.DOM_READY_TIME_95="DOM Ready Time 95th percentile (ms)",UIData.DOM_READY_TIME_99="DOM Ready Time 99th percentile (ms)",UIData.DOMAIN_LOOKUP_TIME="Domain Lookup Time (ms)",UIData.END_USER_RESPONSE_TIME="End User Response Time (ms)",UIData.END_USER_RESPONSE_TIME_50="End User Response Time 50th percentile (ms)",UIData.END_USER_RESPONSE_TIME_90="End User Response Time 90th percentile (ms)",UIData.END_USER_RESPONSE_TIME_95="End User Response Time 95th percentile (ms)",UIData.END_USER_RESPONSE_TIME_99="End User Response Time 99th percentile (ms)",UIData.FIRST_BYTE_TIME="First Byte Time (ms)",UIData.FIRST_BYTE_TIME_50="First Byte Time 50th percentile (ms)",UIData.FIRST_BYTE_TIME_90="First Byte Time 90th percentile (ms)",UIData.FIRST_BYTE_TIME_95="First Byte Time 95th percentile (ms)",UIData.FIRST_BYTE_TIME_99="First Byte Time 99th percentile (ms)",UIData.FRONT_END_TIME="Front End Time (ms)",UIData.HTML_DOWNLOAD_AND_DOM_BUILDING_TIME="HTML Download and DOM Building Time (ms)",UIData.HTML_DOWNLOAD_TIME="HTML Download Time (ms)",UIData.IMAGES_LOADED_PER_PAGEVIEW="Images Loaded per Pageview",UIData.PAGE_VIEWS_WITH_JAVASCRIPT_ERRORS="Page views with JavaScript Errors per Minute",UIData.REQUESTS_PER_MINUTE="Requests per Minute",UIData.RESOURCE_FETCH_TIME="Resource Fetch Time (ms)",UIData.RESOURCES_LOADED_PER_PAGEVIEW="Resources Loeaded per Pageview",UIData.RESPONSE_AVAILABLE_TIME="Response Available Time (ms)",UIData.SCRIPTS_LOADED_PER_PAGEVIEW="Scripts Loaded per Pageview",UIData.SERVER_CONNECTION_TIME="Server Connection Time (ms)",UIData.SSL_HANDSHAKE_TIME="SSL Handshake Time (ms)",UIData.SYNTHETIC_REQUESTS="Synthetic Requests",UIData.TCP_CONNECT_TIME="TCP Connect Time (ms)",UIData.TOTAL_RESOURCE_REDIRECT_TIME="Total Resource Redirect Time",UIData.JOB_EXECUTIONS="Job Executions",UIData.SESSION_DURATION="Session Duration (ms)",UIData.SESSION_VISUAL_TIME="Session Visual Time (ms)",UIData.BILLABLE_TIME="Billable Time (sec)",UIData.AVAILABILITY="Availability (ppm)",UIData.SYNTH_PAGES_PER_SESSION="Pages per Session",UIData.AGENT="Agent",UIData.MACHINE_AGENT_AVAIL_METRIC="Agent|Machine|Availability",UIData.APP_AGENT_AVAIL_METRIC="Agent|App|Availability",UIData.BT_REGISTRATION_SUCCESSFUL="Agent|Business Transactions|Registration Successful",UIData.BT_REGISTRATION_FAILED="Agent|Business Transactions|Registration Failed",UIData.BT_UNMONITORED_CALLS_PER_MIN="Agent|Business Transactions|Unmonitored Calls per Minute",UIData.DISCOVERED_BACKENDS_REGISTRATION_SUCCESSFUL="Agent|Discovered Backends|Registration Successful",UIData.DISCOVERED_BACKENDS_REGISTRATION_FAILED="Agent|Discovered Backends|Registration Failed",UIData.EXIT_UNMONITORED_CALLS_PER_MIN="Agent|Discovered Backends|Unmonitored Calls per Minute",UIData.METRICS_REQUEST_TIME_SKEW_ERRORS="Agent|Metric Upload|Requests Time skew Errors",UIData.METRICS_INVALID_METRICS="Agent|Metric Upload|Invalid Metrics",UIData.METRICS_METRICS_UPLOADED="Agent|Metric Upload|Metrics uploaded",UIData.METRICS_REQUESTS_EXCEEDING_LIMIT="Agent|Metric Upload|Requests Exceeding Limit",UIData.METRICS_REQUESTS_LICENSE_ERRORS="Agent|Metric Upload|Requests License Errors",UIData.SNAPSHOT_TIME_SKEW_ERRORS="Agent|Snapshot Upload|Time skew Errors",UIData.SNAPSHOT_INVALID_SNAPSHOTS="Agent|Snapshot Upload|Invalid Snapshots",UIData.SNAPSHOT_SNAPSHOTS_UPLOADED="Agent|Snapshot Upload|Snapshots uploaded",UIData.SNAPSHOT_SNAPSHOTS_EXCEEDING_LIMIT="Agent|Snapshot Upload|Snapshots Exceeding Limit",UIData.TSS_TOPSUMMARYSTATS_TIME_SKEW_ERRORS="Agent|TopSummaryStats Upload|TopSummaryStats Time skew Errors",UIData.TSS_INVALID_TOPSUMMARYSTATS="Agent|TopSummaryStats Upload|Invalid TopSummaryStats",UIData.TSS_TOPSUMMARYSTATS_UPLOADED="Agent|TopSummaryStats Upload|TopSummaryStats uploaded",UIData.TSS_TOPSUMMARYSTATS_EXCEEDING_LIMIT="Agent|TopSummaryStats Upload|TopSummaryStats Exceeding Limit",UIData.EVENT_TIME_SKEW_ERRORS="Agent|Event Upload|Time skews Errors",UIData.EVENT_EVENTS_UPLOADED="Agent|Event Upload|Events uploaded",UIData.EVENT_EVENTS_EXCEEDING_LIMIT="Agent|Event Upload|Events Exceeding Limit",UIData.CONFIG_CHANNEL_NUMBER_OF_APPLICATION_INFRASTRUCUTRE_CHANGES_SENT="Agent|ConfigChannel|Number Of Application Infrastructure Changes Sent",UIData.HARDWARE_RESOURCES="Hardware Resources",UIData.CPU_PERCENT_IDLE="Hardware Resources|CPU|%Idle",UIData.CPU_PERCENT_BUSY="Hardware Resources|CPU|%Busy",UIData.MEMORY_TOTAL_MB="Hardware Resources|Memory|Total (MB)",UIData.MEMORY_USED_MB="Hardware Resources|Memory|Used (MB)",UIData.MEMORY_FREE_MB="Hardware Resources|Memory|Free (MB)",UIData.MEMORY_USED_PERCENT="Hardware Resources|Memory|Used %",UIData.MEMORY_FREE_PERCENT="Hardware Resources|Memory|Free %",UIData.NETWORK_INCOMING_PACKETS_PER_SEC="Hardware Resources|Network|Incoming packets/sec",UIData.NETWORK_INCOMING_KB_PER_SEC="Hardware Resources|Network|Incoming KB/sec",UIData.NETWORK_OUTGOING_PACKETS_PER_SEC="Hardware Resources|Network|Outgoing packets/sec",UIData.NETWORK_OUTGOING_KB_PER_SEC="Hardware Resources|Network|Outgoing KB/sec",UIData.DISKS_READS_PER_SEC="Hardware Resources|Disks|Reads/sec",UIData.DISKS_READS_KB_PER_SEC="Hardware Resources|Disks|KB read/sec",UIData.DISKS_WRITES_PER_SEC="Hardware Resources|Disks|Writes/sec",UIData.DISKS_WRITES_KB_PER_SEC="Hardware Resources|Disks|KB written/sec",UIData.EUMTYPES=[{id:"BASE_PAGE",text:"Pages"},{id:"IFRAME",text:"iFrames"},{id:"AJAX_REQUEST",text:"Ajax Requests"}],UIData}();appdynamicsModule.service("uiData",UIData),define("app/view/customDashboard/editor/UIData",function(){});var HealthRuleSelectorController=function(){function HealthRuleSelectorController($scope,$location,$rootScope,resourceManager,$modalInstance,dialogData,notificationService,dashboardService,applicationUiService){var columns;$scope.widgetGuid=dialogData.widgetGuid,$scope.data=dialogData.data,$scope.isTemplate=dialogData.isTemplate,$scope.isWarRoom=dialogData.isWarRoom,$scope.appId=dialogData.appId,$scope.gridOptions=new GridOptions,columns=[GridColumn.createColumn(100,"name","Name")],$scope.gridOptions.columnProvider=columns,$scope.gridOptions.dataProvider={},applicationUiService.getApmApplications().then(function(data){var apps=applicationUiService.getApmApplications_response(data);$scope.apps=WidgetHelper.getApplicationSelectOptions(apps),$scope.selectedApp=WidgetHelper.getApplicationSelectOptionForWidget(apps,$scope.appId,$scope.isTemplate,$scope.isWarRoom,$modalInstance),$scope.handleAppSelect($scope.selectedApp)}),$scope.close=function(){$modalInstance.close()},$scope.selectedPolicy=null,$scope.isPolicySelected=function(){return null!==$scope.selectedPolicy},$scope.gridClick=function(event){$scope.selectedPolicy=event.data,ViewUtil.safeApply($scope)},$scope.gridDoubleClick=function(event){$scope.selectedPolicy=event.data,$scope.submit()},$scope.handleAppSelect=function(selectedApp){$scope.selectedApp=selectedApp,$scope.selectedApp&&dashboardService.getPolicies($scope.selectedApp.id).then(function(data){$scope.gridOptions.dataProvider=data})},$scope.submit=function(){$rootScope.$broadcast(HealthRuleSelectorController.HEALTH_RULE_SELECTION_EVENT,{widgetGuid:$scope.widgetGuid,appId:$scope.selectedApp.id,policyId:$scope.selectedPolicy.id}),$modalInstance.close()}}return HealthRuleSelectorController.HEALTH_RULE_SELECTION_EVENT="health-rule-selection",HealthRuleSelectorController.$inject=["$scope","$location","$rootScope","resourceManager","$modalInstance","dialogData","notificationService","dashboardService","applicationUiService"],HealthRuleSelectorController}();define("app/view/customDashboard/editor/dialogs/HealthRuleSelectorController",function(){});var MetricSelectorController=function(){function MetricSelectorController($scope,$location,$rootScope,resourceManager,$modalInstance,dialogData,notificationService,dashboardHelper,applicationUiService,sharedInjectorService){var _this=this;this.$scope=$scope,this.$location=$location,this.$rootScope=$rootScope,this.resourceManager=resourceManager,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.notificationService=notificationService,this.dashboardHelper=dashboardHelper,this.applicationUiService=applicationUiService,this.sharedInjectorService=sharedInjectorService,this.HELP_URL_RELATIVE_METRICS=ExternalUrls.HELP_URL_RELATIVE_METRICS,this.onTreeItemClick=function(e){this.selectedTreeItem=e.data,this.setupSelectedItemTree(),ViewUtil.safeApply(this.$scope)},this.on_metricInputTypeChange=function(){_this.metricInputType===MetricSelectorController.MetricInputTypes.TREE?(_this.textInputDisabled=!0,_this.treeInputDisabled=!1):(_this.treeInputDisabled=!0,_this.textInputDisabled=!1)},this.allApplicationsResponseHandler=function(data){var apps=_this.applicationUiService.getApmApplications_response(data);_this.apps=WidgetHelper.getApplicationSelectOptions(apps),_this.selectedApp=WidgetHelper.getApplicationSelectOptionForWidget(apps,_this.appId,_this.isTemplate,_this.isWarRoom,_this.$modalInstance)},$scope.controller=this,this.init()}return MetricSelectorController.prototype.isMetricPathInputShown=function(){return this.showRelativeMetricPath},MetricSelectorController.prototype.isMetricSelected=function(){return this.textInputDisabled?null!==this.selectedTreeItem&&this.selectedTreeItem.leaf:Util.isDefAndNotNull(this.metricTextInput)},MetricSelectorController.prototype.onTreeDoubleClick=function(e){this.selectedTreeItem=e.data,this.setupSelectedItemTree(),this.isMetricSelected()&&this.submit(),ViewUtil.safeApply(this.$scope)},MetricSelectorController.prototype.setupSelectedItemTree=function(){this.selectedMetric=this.selectedTreeItem&&this.selectedTreeItem.leaf?this.selectedTreeItem:null},MetricSelectorController.prototype.close=function(){this.$modalInstance.close()},MetricSelectorController.prototype.submit=function(){this.textInputDisabled||this.setupSelectedItemText();var featureService=this.sharedInjectorService.featureService(),readableMetricName=this.dashboardHelper.getReadableMetricName(this.selectedMetric.id,this.decode);return featureService.isWebEUMLiteEnabled()&&0==readableMetricName.indexOf(MetricSelectorController.EUM_WEB_ROOT_NAME)?void this.notificationService.displayMessage(this.resourceManager.getString("ui","ms_upgradeToWebProForCustomDashMetricSelector"),""):featureService.isMobileEUMLiteEnabled()&&0==readableMetricName.indexOf(MetricSelectorController.EUM_MOBILE_ROOT_NAME)?void this.notificationService.displayMessage(this.resourceManager.getString("ui","ms_upgradeToMobileProForCustomDashMetricSelector"),""):(this.$rootScope.$broadcast(MetricSelectorController.METRIC_SELECTION_EVENT,this.dialogData.type,{widgetGuid:this.widgetGuid,appId:this.selectedApp.id,componentId:this.selectedMetric.componentId,entityId:this.selectedMetric.entityId,hasMetricPathPrefix:this.selectedMetric.hasMetricPathPrefix,metricName:readableMetricName,metricId:this.selectedMetric.metricId,type:this.selectedMetric.type}),void this.$modalInstance.close())},MetricSelectorController.prototype.init=function(){this.widgetGuid=this.dialogData.widgetGuid,this.appId=this.dialogData.appId,this.isTemplate=this.dialogData.isTemplate,this.isWarRoom=this.dialogData.isWarRoom,this.data=this.dialogData.data||{},this.showRelativeMetricPath=this.dialogData.showRelativeMetricPath,this.getReadableMetricName=this.dashboardHelper.getReadableMetricName,this.selectedMetric=null,this.selectedTreeItem=null,this.MetricInputTypes=MetricSelectorController.MetricInputTypes,this.metricInputType=MetricSelectorController.MetricInputTypes.TREE,this.metricTextInput="",this.textInputDisabled=!0,this.treeInputDisabled=!1,null==this.data.showAppSelector&&(this.data.showAppSelector=!0),null==this.data.showMetricLabel&&(this.data.showMetricLabel=!0),null==this.showRelativeMetricPath&&(this.showRelativeMetricPath=!0),this.applicationUiService.getApmApplications().then(this.allApplicationsResponseHandler),this.decode=this.dialogData.category?this.dialogData.category.value===PolicyTemplateType.OVERALL_APPLICATION||this.dialogData.category.value===PolicyTemplateType.JMX||this.dialogData.category.value===PolicyTemplateType.OTHER:!0,this.$scope.$watch("controller.metricInputType",this.on_metricInputTypeChange)},MetricSelectorController.prototype.setupSelectedItemText=function(){this.selectedMetric={text:this.metricTextInput,id:this.metricTextInput,leaf:!0}},MetricSelectorController.METRIC_SELECTION_EVENT="metric-selection",MetricSelectorController.MetricInputTypes={TREE:"TREE",TEXT:"TEXT"},MetricSelectorController.$inject=["$scope","$location","$rootScope","resourceManager","$modalInstance","dialogData","notificationService","dashboardHelper","applicationUiService","sharedInjectorService"],MetricSelectorController.EUM_WEB_ROOT_NAME="End User Experience",MetricSelectorController.EUM_MOBILE_ROOT_NAME="Mobile",MetricSelectorController}();define("app/view/customDashboard/editor/dialogs/MetricSelectorController",function(){});var EventSelectorController=function(){function EventSelectorController($scope,$rootScope,$modalInstance,dialogData,applicationUiService){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.applicationUiService=applicationUiService,this.on_metricInputTypeChange=function(){},this.allApplicationsResponseHandler=function(data){var apps=_this.applicationUiService.getApmApplications_response(data);_this.apps=_.map(apps,function(d){return{id:d.id,name:d.name,value:d.name}}),_this.selectedApp=_.findWhere(_this.apps,{id:_this.dialogData.appId})||_this.apps[0]},EventSelectorController.DEBUG_SCOPE&&(ADLoggerService.warn("EventSelectorController.constructor Debug: created scope is "+$scope.$id),$scope.$on("$destroy",function(){ADLoggerService.warn("EventSelectorController.on.$destroy Debug: destroyed scope is "+$scope.$id)})),$scope.controller=this,$scope.$on(EventSelectorController.EVENT_FILTER_UPDATED,function(event,newFilter){EventSelectorController.DEBUG&&ADLoggerService.warn("EventSelectorController.on.EVENT_FILTER_UPDATED Debug: Sending out EVENT_SELECTION_EVENT for widgetGuid "+$scope.controller.widgetGuid),newFilter.applicationIds=[$scope.controller.selectedApp.id],$rootScope.$broadcast(EventSelectorController.EVENT_SELECTION_EVENT,{widgetGuid:$scope.controller.widgetGuid,eventStreamItemFilter:newFilter,selectedApp:$scope.controller.selectedApp,apps:_this.apps})}),this.init()}return EventSelectorController.prototype.close=function(){this.$modalInstance.close()},EventSelectorController.prototype.submit=function(){this.$rootScope.$broadcast(EventSelectorController.UPDATE_EVENT_FILTER),this.$modalInstance.close()},EventSelectorController.prototype.init=function(){this.widgetGuid=this.dialogData.widgetGuid,this.data=this.dialogData.data||{},this.eventStreamItemFilter=this.dialogData.eventStreamItemFilter||EventUtil.getDefaultEventsFilter(),this.applicationUiService.getApmApplications().then(this.allApplicationsResponseHandler),this.$scope.$watch("controller.metricInputType",this.on_metricInputTypeChange)},EventSelectorController.DEBUG=!1,EventSelectorController.DEBUG_SCOPE=!1,EventSelectorController.EVENT_SELECTION_EVENT="event-selection-event",EventSelectorController.UPDATE_EVENT_FILTER="UPDATE_EVENT_FILTER",EventSelectorController.EVENT_FILTER_UPDATED="EVENT_FILTER_UPDATED",EventSelectorController.$inject=["$scope","$rootScope","$modalInstance","dialogData","applicationUiService"],EventSelectorController}();define("app/view/customDashboard/editor/dialogs/eventSelector/EventSelectorController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SeriesSelectorController=function(_super){function SeriesSelectorController($scope,$location,$rootScope,dialogService,$modalInstance,dialogData,resourceManager,navigationService,notificationService,injectorService,userUiService,eumConfigurationUiService,dashboardHelper,uiData,applicationUiService){function save(){SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.save Debug: Enter");var oldName,nmc,category=$scope.selected.category.value,aemc=$scope.aemc;if(thisController.isAddMode()||(oldName=thisController.dialogData.seriesName,Util.removeWhere(widgetProperties.metricMatchCriteriaNameToMetricType,{name:oldName})),category===PolicyTemplateType.OVERALL_APPLICATION)$scope.aemc=dashboardHelper.getOAEMC(aemc),$scope.aemc.type=InfrastructureAffectedEntityMatchCriteriaType.APPLICATION,$scope.mmc.evaluationScopeType=null;else if(category===PolicyTemplateType.BUSINESS_TRANSACTION){if(SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.save Debug: Processing PolicyTemplateType.BUSINESS_TRANSACTION"),$scope.aemc=dashboardHelper.getBTAEMC(aemc),$scope.mmc.evaluationScopeType=EvaluationScopeType.TIER_AVERAGE,$scope.singleMetricSelect||$scope.selected.btOption.value===BTAffectedEntityMatchCriteriaType.SPECIFIC)SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.save Debug: Processing BTAffectedEntityMatchCriteriaType.SPECIFIC; btListSelected is "+Util.stringifyWithIndent($scope.btListSelected)),$scope.aemc.type=BTAffectedEntityMatchCriteriaType.SPECIFIC,$scope.aemc.businessTransactionIds=_.map($scope.btListSelected,thisController.getId);else if($scope.selected.btOption.value===BTAffectedEntityMatchCriteriaType.ALL)SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.save Debug: Processing BTAffectedEntityMatchCriteriaType.ALL"),$scope.aemc.type=BTAffectedEntityMatchCriteriaType.ALL,$scope.aemc.nameMatch=null;else if($scope.selected.btOption.value===BTAffectedEntityMatchCriteriaType.BTS_OF_SPFICIC_TIERS)SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.save Debug: Processing BTAffectedEntityMatchCriteriaType.BTS_OF_SPFICIC_TIERS"),$scope.aemc.type=BTAffectedEntityMatchCriteriaType.BTS_OF_SPFICIC_TIERS,$scope.aemc.componentIds=_.map($scope.appComponentsSelected,thisController.getId);else if($scope.selected.btOption.value===BTAffectedEntityMatchCriteriaType.CUSTOM){SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.save Debug: Processing BTAffectedEntityMatchCriteriaType.CUSTOM"),$scope.aemc.type=BTAffectedEntityMatchCriteriaType.CUSTOM;var matchType=$scope.selected.operationType.value||StringMatchType.EQUALS,matchPattern=Util.get(aemc,["nameMatch","matchPattern"])||"";$scope.aemc.nameMatch=thisController.createNameMatch(matchType,matchPattern)}}else if(category===PolicyTemplateType.BACKEND){if($scope.mmc.evaluationScopeType=null,$scope.aemc=dashboardHelper.getDBAMEC(aemc),$scope.singleMetricSelect||$scope.selected.dbOption.value===BackendAffectedEntityMatchCriteriaType.SPECIFIC_BACKENDS)$scope.aemc.type=BackendAffectedEntityMatchCriteriaType.SPECIFIC_BACKENDS,$scope.aemc.backendIds=_.map($scope.dbListSelected,thisController.getId);else if($scope.selected.dbOption.value===BackendAffectedEntityMatchCriteriaType.ALL_BACKENDS)$scope.aemc.type=BackendAffectedEntityMatchCriteriaType.ALL_BACKENDS,$scope.aemc.nameMatchCriteria=null;else if($scope.selected.dbOption.value===BackendAffectedEntityMatchCriteriaType.NAME_MATCH){$scope.aemc.type=BackendAffectedEntityMatchCriteriaType.NAME_MATCH;var matchType=$scope.selected.operationType.value||StringMatchType.EQUALS,matchPattern=Util.get(aemc,["nameMatchCriteria","matchPattern"])||"";$scope.aemc.nameMatchCriteria=thisController.createNameMatch(matchType,matchPattern)}}else if(category===PolicyTemplateType.APPLICATION_DIAGNOSTIC_DATA)if($scope.mmc.evaluationScopeType=null,$scope.aemc=dashboardHelper.getEUMAMEC(aemc),$scope.aemc.matchCriteriaType=$scope.selected.eumOption.value,$scope.aemc.applicationDiagnosticDataTypes=[$scope.options.eumType.id],$scope.singleMetricSelect||$scope.selected.eumOption.value===ApplicationDiagnosticDataMatchCriteriaType.SPECIFIC_ADDS)SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.save: if case with $scope.selected.eumOption.value of ApplicationDiagnosticDataMatchCriteriaType.SPECIFIC_ADDS"),$scope.aemc.nameMatchCriteria=null,$scope.aemc.matchCriteriaType=ApplicationDiagnosticDataMatchCriteriaType.SPECIFIC_ADDS,$scope.aemc.addIds=_.map($scope.eumListSelected,thisController.getId),SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.save Debug: Set scope.aemc.addIds to "+Util.stringifyWithIndent($scope.aemc.addIds));else if($scope.selected.eumOption.value===ApplicationDiagnosticDataMatchCriteriaType.NAME_MATCH){SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.save: else if case with $scope.selected.eumOption.value of ApplicationDiagnosticDataMatchCriteriaType.NAME_MATCH");var matchType=$scope.selected.operationType.value||StringMatchType.EQUALS,matchPattern=Util.get(aemc,["nameMatchCriteria","matchPattern"])||"";$scope.aemc.nameMatchCriteria=thisController.createNameMatch(matchType,matchPattern)}else $scope.aemc.nameMatchCriteria=null,SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.save: else case with $scope.selected.eumOption.value of "+$scope.selected.eumOption.value);else if(category===PolicyTemplateType.NODE_HEALTH_TRANSACTION_PERFORMANCE||category===PolicyTemplateType.INFRASTRUCTURE){if($scope.aemc=category===PolicyTemplateType.NODE_HEALTH_TRANSACTION_PERFORMANCE?dashboardHelper.getOAEMC(aemc):dashboardHelper.getInfrastructureAEMC(aemc),$scope.mmc.evaluationScopeType=null,$scope.options.seriesSubType===UIData.SERIES_TYPE_TIERS)$scope.aemc.nodeMatchCriteria=null,$scope.singleMetricSelect||$scope.selected.tierOption.value===InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS?(SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.save: InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS: Selected items "+$scope.appComponentsSelected.length),$scope.aemc.type=InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS,$scope.aemc.componentIds=_.map($scope.appComponentsSelected,thisController.getId)):$scope.selected.tierOption.value===InfrastructureAffectedEntityMatchCriteriaType.ALL_TIERS&&($scope.aemc.type=InfrastructureAffectedEntityMatchCriteriaType.ALL_TIERS);else if($scope.options.seriesSubType===UIData.SERIES_TYPE_NODES){if($scope.aemc.type=UIData.SERIES_TYPE_NODES,nmc=$scope.aemc.nodeMatchCriteria=$scope.aemc.nodeMatchCriteria||{},$scope.singleMetricSelect||$scope.selected.nodeOption.value===NodeMatchCriteriaType.SPECIFC)nmc.type=NodeMatchCriteriaType.SPECIFC,nmc.nodeIds=_.map($scope.appComponentNodesSelected,thisController.getId),nmc.nodeNameMatchCriteria=null;else if($scope.selected.nodeOption.value===NodeMatchCriteriaType.ANY)$scope.aemc.nodeMatchCriteria=nmc={type:NodeMatchCriteriaType.ANY};else if($scope.selected.nodeOption.value===NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS)nmc.type=NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS,nmc.componentIds=_.map($scope.appComponentsSelected,thisController.getId),nmc.nodeNameMatchCriteria=null;else if($scope.selected.nodeOption.value===NodeMatchCriteriaType.CUSTOM){var matchType=$scope.selected.operationType.value||StringMatchType.EQUALS,matchPattern=Util.get(aemc,["nodeMatchCriteria","nodeNameMatchCriteria","matchPattern"])||"";nmc.type=NodeMatchCriteriaType.CUSTOM,nmc.nodeNameMatchCriteria=thisController.createNameMatch(matchType,matchPattern)}var nodeType=$scope.selected.nodeType.value;nmc.nodeTypes=nodeType===EntityType.ALL?null:[nodeType]}}else if(category===PolicyTemplateType.ERROR){$scope.aemc=dashboardHelper.getErrorsAEMC(aemc),$scope.mmc.evaluationScopeType=EvaluationScopeType.TIER_AVERAGE;var errorOption=$scope.selected.errorOption.value;if($scope.singleMetricSelect||errorOption===ErrorsAffectedEntityMatchCriteriaType.SPECIFIC)$scope.aemc.type=ErrorsAffectedEntityMatchCriteriaType.SPECIFIC,$scope.aemc.errorIds=_.map($scope.errorListSelected,thisController.getId),$scope.aemc.nameMatchCriteria=null;else if(errorOption===ErrorsAffectedEntityMatchCriteriaType.ALL)$scope.aemc.type=ErrorsAffectedEntityMatchCriteriaType.ALL,$scope.aemc.nameMatchCriteria=null;else if(errorOption===ErrorsAffectedEntityMatchCriteriaType.ERRORS_OF_SPECIFIC_TIERS)$scope.aemc.type=ErrorsAffectedEntityMatchCriteriaType.ERRORS_OF_SPECIFIC_TIERS,$scope.aemc.componentIds=_.map($scope.appComponentsSelected,thisController.getId),$scope.aemc.nameMatchCriteria=null;else if(errorOption===ErrorsAffectedEntityMatchCriteriaType.CUSTOM){var matchType=$scope.selected.operationType.value||StringMatchType.EQUALS,matchPattern=Util.get($scope.aemc,["nameMatchCriteria","matchPattern"])||"";$scope.aemc.type=ErrorsAffectedEntityMatchCriteriaType.CUSTOM,$scope.aemc.nameMatchCriteria=thisController.createNameMatch(matchType,matchPattern)}}else if(category===PolicyTemplateType.JMX){if($scope.aemc=dashboardHelper.getJmxAEMC(aemc),$scope.aemc.type=UIData.SERIES_TYPE_NODES,$scope.mmc.evaluationScopeType=null,nmc=$scope.aemc.nodeMatchCriteria=$scope.aemc.nodeMatchCriteria||{},$scope.singleMetricSelect||$scope.selected.nodeOption.value===NodeMatchCriteriaType.SPECIFC)nmc.type=NodeMatchCriteriaType.SPECIFC,nmc.nodeIds=_.map($scope.appComponentNodesSelected,thisController.getId),nmc.nodeNameMatchCriteria=null;else if($scope.selected.nodeOption.value===NodeMatchCriteriaType.ANY)$scope.aemc.nodeMatchCriteria=nmc={type:NodeMatchCriteriaType.ANY};else if($scope.selected.nodeOption.value===NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS)nmc.type=NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS,nmc.componentIds=_.map($scope.appComponentsSelected,thisController.getId),nmc.nodeNameMatchCriteria=null;else if($scope.selected.nodeOption.value===NodeMatchCriteriaType.CUSTOM){var matchType=$scope.selected.operationType.value||StringMatchType.EQUALS,matchPattern=Util.get(aemc,["nodeMatchCriteria","nodeNameMatchCriteria","matchPattern"])||"";nmc.type=NodeMatchCriteriaType.CUSTOM,nmc.nodeNameMatchCriteria=thisController.createNameMatch(matchType,matchPattern)}var nodeType=$scope.selected.nodeType.value;nmc.nodeTypes="ALL"===nodeType?null:[nodeType]}else category===PolicyTemplateType.OTHER&&($scope.aemc=null,$scope.mmc.evaluationScopeType=null);$scope.mmc.metricExpression.metricDefinition.type=category===PolicyTemplateType.OTHER?AbstractMetricDefinitionType.ABSOLUTE_METRIC_SCOPE:AbstractMetricDefinitionType.LOGICAL_METRIC,$scope.mmc.affectedEntityMatchCriteria=$scope.aemc,$scope.mmc.metricDataFilter.sortResultsAscending=$scope.selected.sortOption.value,$scope.mmc.metricExpression.functionType=$scope.selectedFunctionType.value,$scope.selected.includeBaselineData?($scope.mmc.baselineId=$scope.selected.metricBaselineOption.value,$scope.mmc.useActiveBaseline=0===$scope.mmc.baselineId?!0:!1):($scope.mmc.useActiveBaseline=!1,$scope.mmc.baselineId=0),(widgetProperties.widgetType===WidgetTypes.PIE||widgetProperties.widgetType===WidgetTypes.GAUGE)&&($scope.wmmc.metricMatchCriteria.rollupMetricData=!0),$scope.wmmcUIS.widgetMetricMatchCriteriaName=$scope.wmmc.name,_.isUndefined(widgetProperties.metricMatchCriteriaNameToMetricType)&&(widgetProperties.metricMatchCriteriaNameToMetricType=[]),$scope.mmcMap.name=$scope.wmmc.name,$scope.mmcMap.value=category,widgetProperties.metricMatchCriteriaNameToMetricType=widgetProperties.metricMatchCriteriaNameToMetricType||[],widgetProperties.metricMatchCriteriaNameToMetricType.push($scope.mmcMap),$scope.wmmcUIS.seriesType=$scope.selected.displayType.value,$scope.wmmcUIS.colorPalette.colors=$scope.selected.autoGenerateColors?[]:_.map($scope.gridOptions.dataProvider,function(item){return item.color
})}var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$location=$location,this.$rootScope=$rootScope,this.dialogService=dialogService,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.resourceManager=resourceManager,this.navigationService=navigationService,this.notificationService=notificationService,this.injectorService=injectorService,this.userUiService=userUiService,this.eumConfigurationUiService=eumConfigurationUiService,this.dashboardHelper=dashboardHelper,this.uiData=uiData,this.applicationUiService=applicationUiService,this.openMetricSelector=function(){var settings={showAppSelector:!1};if(this.$scope.selected.category.value===PolicyTemplateType.OVERALL_APPLICATION)_.extend(settings,{path:"Overall Application Performance",treeOptions:{hideFolder:!0}});else if(this.$scope.selected.category.value===PolicyTemplateType.BUSINESS_TRANSACTION)_.extend(settings,{path:null,treeOptions:{dataProvider:Util.deepClone(this.uiData.businessTransactionMetrics)}});else if(this.$scope.selected.category.value===PolicyTemplateType.BACKEND)_.extend(settings,{path:null,treeOptions:{dataProvider:Util.deepClone(this.uiData.backendMetricsTree)}});else if(this.$scope.selected.category.value===PolicyTemplateType.APPLICATION_DIAGNOSTIC_DATA)_.extend(settings,{path:null,treeOptions:{dataProvider:Util.deepClone(this.uiData.eumMetricsTree)}});else if(this.$scope.selected.category.value===PolicyTemplateType.NODE_HEALTH_TRANSACTION_PERFORMANCE)_.extend(settings,{path:null,treeOptions:{dataProvider:Util.deepClone(this.uiData.nodeHealthTPMetrics)}});else if(this.$scope.selected.category.value===PolicyTemplateType.INFRASTRUCTURE)_.extend(settings,{path:null,treeOptions:{dataProvider:Util.deepClone(this.uiData.infrastructureMetrics)}});else if(this.$scope.selected.category.value===PolicyTemplateType.JMX){if(!Util.isDefAndNotNull(this.$scope.aemc.metricPathPrefix))return void this.notificationService.displayError(this.resourceManager.getString("ui","ms_mustSelectJXMObjectBeforeMetricsErrorMessage"),"Validation Error");_.extend(settings,{path:"Application Infrastructure Performance",treeOptions:{type:"JMX-DRILLDOWN",metricPathPrefix:this.$scope.aemc.metricPathPrefix,metricPathComponentId:this.$scope.aemc.componentIds[0]}})}else this.$scope.selected.category.value===PolicyTemplateType.ERROR&&_.extend(settings,{path:null,treeOptions:{dataProvider:Util.deepClone(this.uiData.errorRatesMetrics)}});this.openMetricDialog(settings)},this.navigateToApp=function(evt,appId){this.navigationService.navigateTo("/location=APP_DASHBOARD&application="+appId),evt.preventDefault()},SeriesSelectorController.DEBUG_SCOPE&&(ADLoggerService.warn("SeriesSelectorController.constructor Debug: created scope is "+$scope.$id),$scope.$on("$destroy",function(){ADLoggerService.warn("SeriesSelectorController.on.$destroy Debug: destroyed scope is "+$scope.$id)})),$scope.controller=this;var seriesName,thisController=this,widgetProperties=$scope.selectedWidgetProperties=this.dialogData.selectedWidgetProperties;this.widgetProperties=widgetProperties,$scope.isTemplate=this.dialogData.isTemplate,$scope.isWarRoom=this.dialogData.isWarRoom,$scope.isNodeTemplate=this.dialogData.isNodeTemplate,$scope.uiData=uiData.getData($scope.isTemplate,$scope.isNodeTemplate),$scope.appComponentOptions={},$scope.appComponentNodeOptions={},$scope.appComponentsSelected=[],$scope.appComponentNodesSelected=[],$scope.btListOptions={},$scope.dbListOptions={},$scope.eumListOptions={},$scope.mode=this.dialogData.mode||DashboardModes.ADD,$scope.errorListOptions={},$scope.errorListSelected=[],$scope.metricBaselineOptions=[];var dashboard=this.dialogData.dashboard;seriesName=this.isAddMode()||this.isSetMode()&&!this.dialogData.seriesName?dashboardHelper.generateSeriesName(dashboard):this.dialogData.seriesName,$scope.wmmc=dashboardHelper.getOrCreateWidgetsMetricMatchCriterias(dashboard,{widgetGuid:widgetProperties.widgetGuid,name:seriesName}),$scope.wmmcUIS=dashboardHelper.getOrCreateWidgetMetricMatchCriteriaUIStates(dashboard,widgetProperties.widgetGuid,$scope.wmmc.name),$scope.mmc=$scope.wmmc.metricMatchCriteria,$scope.aemc=$scope.mmc.affectedEntityMatchCriteria||{},$scope.singleMetricSelect=this.dialogData.singleMetricSelect,$scope.gridOptions=new GridOptions,$scope.newColor=Util.getReferenceableNumber(0),$scope.selectedColor=null;var columns=[new GridColumn({flex:1,align:"left",dataIndex:"color",sortable:!1,renderer:this.colorPaletteRenderer,header:"Color"})];if($scope.gridOptions.columnProvider=columns,$scope.gridOptions.dataProvider=_.map($scope.wmmcUIS.colorPalette.colors,function(color){return{color:color}}),$scope.gridOptions.draggable={},$scope.gridOptions.draggable.fn=this.draggableCallback.bind(this),$scope.mmcMap=dashboardHelper.getMMCMap(widgetProperties,$scope.wmmc.name,$scope.isTemplate),$scope.eumTypes=UIData.EUMTYPES,$scope.selectedFunctionType=_.findWhere($scope.uiData.functionTypes,{value:$scope.mmc.metricExpression.functionType})||$scope.uiData.functionTypes[2],$scope.options={seriesSubType:this.getGeneralType($scope.aemc.type)||UIData.SERIES_TYPE_TIERS,eumType:this.getEUMType($scope.aemc.applicationDiagnosticDataTypes)},$scope.selected={btOption:_.findWhere($scope.uiData.btOptions,{value:$scope.aemc.type})||$scope.uiData.btOptions[0],dbOption:_.findWhere($scope.uiData.dbOptions,{value:$scope.aemc.type})||$scope.uiData.dbOptions[0],eumOption:angular.isDefined($scope.aemc.matchCriteriaType)?_.findWhere($scope.uiData.eumOptions[$scope.options.eumType.id],{value:$scope.aemc.matchCriteriaType}):$scope.uiData.eumOptions[$scope.eumTypes[0].id][0],category:_.findWhere($scope.uiData.seriesCategories,{value:$scope.mmcMap.value}),errorOption:_.findWhere($scope.uiData.errorOptions,{value:$scope.aemc.type})||$scope.uiData.errorOptions[0],operationType:_.findWhere($scope.uiData.operationTypes,{value:this.getOperationType()})||$scope.uiData.operationTypes[0],tierOption:_.findWhere($scope.uiData.tierOptions,{value:$scope.aemc.type})||$scope.uiData.tierOptions[0],nodeOption:$scope.isTemplate?this.getTemplateNodeOptions()||$scope.uiData.nodeOptions[0]:this.getNodeOptions()||$scope.uiData.nodeOptions[0],sortOption:_.findWhere($scope.uiData.sortOptions,{value:$scope.mmc.metricDataFilter.sortResultsAscending})||$scope.uiData.sortOptions[0],includeBaselineData:this.includeBaselineData(),autoGenerateColors:this.isAutoGenerateColors(),displayType:_.findWhere($scope.uiData.displayTypes,{value:$scope.wmmcUIS.seriesType})||$scope.uiData.displayTypes[0]},$scope.selected.nodeType=this.getNodeType()||$scope.uiData.nodeTypes[0],$scope.$on(MetricSelectorController.METRIC_SELECTION_EVENT,this.on_METRIC_SELECTION_EVENT.bind(this)),$scope.isTemplate){var applicationId,params=new URLParams;params.hasParam(UrlConstants.APPLICATION_ID)?applicationId=params.getNumberParam(UrlConstants.APPLICATION_ID):(notificationService.displayError("Application Id not found",""),this.$modalInstance.close()),$scope.selected.app={id:applicationId,name:"This Application",value:"This Application"},$scope.apps=[$scope.selected.app],$scope.wmmc.metricMatchCriteria.applicationId=$scope.selected.app.id,this.loadAppData()}else applicationUiService.getApmApplications().then(function(data){var apps=applicationUiService.getApmApplications_response(data);if($scope.apps=_.map(apps,function(d){return{id:d.id,name:d.name,value:d.name}}),$scope.isWarRoom){var app=Util.isDefAndNotNull($scope.wmmc.metricMatchCriteria.applicationId)?_.findWhere($scope.apps,{id:$scope.wmmc.metricMatchCriteria.applicationId}):_.findWhere($scope.apps,{id:_this.getApplicationIdFromUrl()});Util.isDefAndNotNull(app)||(notificationService.displayError("Application Id not found",""),_this.$modalInstance.close()),$scope.selected.app=app}else $scope.selected.app=_.findWhere($scope.apps,{id:$scope.wmmc.metricMatchCriteria.applicationId})||$scope.apps[0];$scope.wmmc.metricMatchCriteria.applicationId=$scope.selected.app.id,thisController.loadAppData()});$scope.handleAppChange=function(){$scope.mmc=$scope.wmmc.metricMatchCriteria=dashboardHelper.createMetricMatchCriteria(),$scope.aemc=$scope.mmc.affectedEntityMatchCriteria,$scope.mmc.applicationId=$scope.selected.app.id,$scope.appComponentsSelected=[],$scope.appComponentNodesSelected=[],$scope.btListSelected=[],$scope.dbListSelected=[],thisController.loadAppData()},$scope.handleMetricCategoryChange=function(){var categoryVal=$scope.selected.category.value;$scope.mmc.metricExpression.metricDefinition.logicalMetricName=null,categoryVal===PolicyTemplateType.OVERALL_APPLICATION?$scope.aemc=dashboardHelper.getOAEMC():categoryVal===PolicyTemplateType.BUSINESS_TRANSACTION?$scope.aemc=dashboardHelper.getBTAEMC():categoryVal===PolicyTemplateType.NODE_HEALTH_TRANSACTION_PERFORMANCE?$scope.aemc=dashboardHelper.getOAEMC():categoryVal===PolicyTemplateType.INFRASTRUCTURE?$scope.aemc=dashboardHelper.getInfrastructureAEMC():categoryVal===PolicyTemplateType.ERROR?$scope.aemc=dashboardHelper.getErrorsAEMC():categoryVal===PolicyTemplateType.JMX&&($scope.aemc=dashboardHelper.getJmxAEMC(),$scope.selected.nodeType=uiData.nodeTypes[1]),_this.selectiveFetch($scope.selected.category)},$scope.submit=function(){$scope.isTemplate&&($scope.selected.category.value===PolicyTemplateType.JMX?$scope.selected.nodeOption=$scope.isNodeTemplate?_.findWhere($scope.uiData.nodeOptions,{value:NodeMatchCriteriaType.SPECIFC}):_.findWhere($scope.uiData.nodeOptions,{value:NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS}):$scope.selected.nodeOption.value===NodeMatchCriteriaType.SPECIFC||$scope.selected.nodeOption.value===NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS?$scope.options.seriesSubType=UIData.SERIES_TYPE_NODES:$scope.selected.nodeOption.value===InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS&&($scope.options.seriesSubType=UIData.SERIES_TYPE_TIERS,$scope.selected.tierOption=_.findWhere($scope.uiData.tierOptions,{value:InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS}))),thisController.validateInput()&&(save(),SeriesSelectorController.DEBUG&&(ADLoggerService.warn("SeriesSelectorController.submit Debug: About to broadcast SERIES_SELECTION_EVENT."),ADLoggerService.warn("SeriesSelectorController.submit Debug: wmmc is "+Util.stringifyWithIndent($scope.wmmc)),ADLoggerService.warn("SeriesSelectorController.submit Debug: wmmcUIS is "+Util.stringifyWithIndent($scope.wmmcUIS))),$rootScope.$broadcast(SeriesSelectorController.SERIES_SELECTION_EVENT,{widgetGuid:$scope.selectedWidgetProperties.widgetGuid,wmmc:$scope.wmmc,wmmcUIS:$scope.wmmcUIS,mode:$scope.mode,oldName:thisController.isAddMode()?"":thisController.dialogData.seriesName}),$modalInstance.close())},SeriesSelectorController.DEBUG&&$scope.$watch("btListSelected",function(){ADLoggerService.warn("Watch on btListSelected; value is "+Util.stringifyWithIndent($scope.btListSelected))})}return __extends(SeriesSelectorController,_super),SeriesSelectorController.prototype.isAddMode=function(){return this.$scope.mode===DashboardModes.ADD},SeriesSelectorController.prototype.isSetMode=function(){return this.$scope.mode===DashboardModes.SET},SeriesSelectorController.prototype.isPieGraph=function(){return this.widgetProperties.widgetType===WidgetTypes.PIE},SeriesSelectorController.prototype.isGaugeGraph=function(){return this.widgetProperties.widgetType===WidgetTypes.GAUGE},SeriesSelectorController.prototype.isColorSelected=function(){return null!=this.$scope.selectedColor},SeriesSelectorController.prototype.isValidSeries=function(){return!0},SeriesSelectorController.prototype.getDialogTitle=function(){return this.isSetMode()?"Set Metric":this.isAddMode()?"Add Series":"Edit Series"},SeriesSelectorController.prototype.handleAddColor=function(){this.$scope.gridOptions.dataProvider.push({color:this.$scope.newColor.value}),this.$scope.selected.autoGenerateColors=!1,this.refreshColorGrid()},SeriesSelectorController.prototype.handleDeleteColor=function(){Util.removeWhere(this.$scope.gridOptions.dataProvider,this.$scope.selectedColor),this.$scope.selectedColor=null,_.isEmpty(this.$scope.gridOptions.dataProvider)&&(this.$scope.selected.autoGenerateColors=!0),this.refreshColorGrid()},SeriesSelectorController.prototype.gridClick=function(event){this.$scope.selectedColor=event.data},SeriesSelectorController.prototype.openJMXDialog=function(){this.openMetricDialog({path:"Application Infrastructure Performance",treeOptions:{type:PolicyTemplateType.JMX},showMetricLabel:!1,showAppSelector:!1})},SeriesSelectorController.prototype.getMetricButtonLabel=function(){return this.$scope.mmc.metricExpression.metricDefinition.logicalMetricName||"Select a Metric"},SeriesSelectorController.prototype.close=function(){this.$modalInstance.close()},SeriesSelectorController.prototype.loadAppData=function(){var _this=this;this.eumConfigurationUiService.getAppKey(this.$scope.selected.app.id).then(function(response){var appKey=_this.eumConfigurationUiService.getAppKey_response(response);_this.toggleEumAvailable(!appKey||!appKey.appKey||appKey.appKey.length<1?!1:!0)}),this.fetchMetricBaselines(function(){_this.selectiveFetch()})},SeriesSelectorController.prototype.fetchMetricBaselines=function(onSuccessCallBack){var _this=this;this.userUiService.getAllMetricBaselines(this.$scope.selected.app.id).then(function(response){_this.$scope.metricBaselines=_this.userUiService.getAllMetricBaselines_response(response),_this.$scope.metricBaselineOptions=_.map(_this.$scope.metricBaselines,function(baseline){return{name:baseline.name,value:baseline.id}}),_this.$scope.metricBaselineOptions.unshift({name:"Default Baseline",value:0}),_this.$scope.selected.metricBaselineOption=_.findWhere(_this.$scope.metricBaselineOptions,{value:_this.$scope.mmc.baselineId}),onSuccessCallBack&&onSuccessCallBack()})},SeriesSelectorController.prototype.on_METRIC_SELECTION_EVENT=function(e,type,data){var metricName,category=this.$scope.selected.category.value;"series-metric"===type&&(category===PolicyTemplateType.OTHER||category===PolicyTemplateType.INFRASTRUCTURE?(metricName=data.metricName,this.$scope.mmc.metricExpression.metricDefinition.scope={entityId:data.entityId,entityType:data.type},this.$scope.mmc.metricExpression.metricDefinition.metricId=data.metricId):metricName=_.last(data.metricName.split("|")),category===PolicyTemplateType.JMX&&1!=data.hasMetricPathPrefix?(this.$scope.aemc.metricPathPrefix=this.getJMXObjectPath(data.metricName),this.$scope.aemc.componentIds=[data.componentId]):this.$scope.mmc.metricExpression.metricDefinition.logicalMetricName=metricName),ViewUtil.safeApply(this.$scope)},SeriesSelectorController.prototype.refreshColorGrid=function(){this.$scope.gridOptions.dataProvider=angular.copy(this.$scope.gridOptions.dataProvider)},SeriesSelectorController.prototype.moveColor=function(dragColor,dropColor,dropPosition){var dataProvider=this.$scope.gridOptions.dataProvider,dragIndex=dataProvider.indexOf(_.findWhere(dataProvider,dragColor));dataProvider.splice(dragIndex,1);var dropIndex=dataProvider.indexOf(_.findWhere(dataProvider,dropColor));dropIndex="before"===dropPosition?dropIndex:dropIndex+1,dataProvider.splice(dropIndex,0,dragColor),ViewUtil.safeApply(this.$scope)},SeriesSelectorController.prototype.draggableCallback=function(node,data,overModel,dropPosition){var dragColor=data.records[0].data,dropColor=overModel.data;this.moveColor(dragColor,dropColor,dropPosition)},SeriesSelectorController.prototype.colorPaletteRenderer=function(val){return["<div>",'<div style="width: 22px; height: 22px; margin-right: 5px; background: ',Util.getColorString(val),'; display: inline-block"></div>','<span style="display:inline-block; vertical-align:top; margin-top: 3px">',Util.getColorString(val),"</span></div>"].join("")},SeriesSelectorController.prototype.getOperationType=function(){return Util.get(this.$scope.aemc,["nameMatch","matchType"])||Util.get(this.$scope.aemc,["nodeMatchCriteria","nodeNameMatchCriteria","matchType"])||Util.get(this.$scope.aemc,["nameMatchCriteria","matchType"])},SeriesSelectorController.prototype.includeBaselineData=function(){return!(this.$scope.mmc.useActiveBaseline===!1&&0===this.$scope.mmc.baselineId)},SeriesSelectorController.prototype.isAutoGenerateColors=function(){var colors=Util.get(this.$scope.wmmcUIS,["colorPalette","colors"]);return Util.isDefAndNotNull(colors)?0===colors.length:!0},SeriesSelectorController.prototype.getNodeType=function(){var nodeType=Util.get(this.$scope.aemc,["nodeMatchCriteria","nodeTypes"]);return this.$scope.selected&&this.$scope.selected.category&&this.$scope.selected.category.value===PolicyTemplateType.JMX?this.$scope.uiData.nodeTypes[1]:nodeType?_.findWhere(this.$scope.uiData.nodeTypes,{value:nodeType[0]}):null},SeriesSelectorController.prototype.getNodeOptions=function(){return this.$scope.aemc.nodeMatchCriteria?_.findWhere(this.$scope.uiData.nodeOptions,{value:this.$scope.aemc.nodeMatchCriteria.type}):null},SeriesSelectorController.prototype.getTemplateNodeOptions=function(){return this.$scope.aemc.nodeMatchCriteria?_.findWhere(this.$scope.uiData.nodeOptions,{value:this.$scope.aemc.nodeMatchCriteria.type}):_.findWhere(this.$scope.uiData.nodeOptions,{value:this.$scope.aemc.type})},SeriesSelectorController.prototype.getGeneralType=function(type){return type===InfrastructureAffectedEntityMatchCriteriaType.ALL_TIERS||type===InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS?UIData.SERIES_TYPE_TIERS:type===InfrastructureAffectedEntityMatchCriteriaType.NODES?UIData.SERIES_TYPE_NODES:null},SeriesSelectorController.prototype.getEUMType=function(type){if(type&&type.length&&type.length>0){var eumType=_.findWhere(UIData.EUMTYPES,{id:type[0]});if(eumType)return eumType}return UIData.EUMTYPES[0]},SeriesSelectorController.prototype.eumTypeSelected=function(){this.$scope.selected.eumOption=this.$scope.uiData.eumOptions[this.$scope.options.eumType.id][0]},SeriesSelectorController.prototype.openMetricDialog=function(data){var opts={type:"series-metric",appId:this.$scope.selected.app.id,widgetGuid:this.$scope.selectedWidgetProperties.widgetGuid,data:data||{},showRelativeMetricPath:this.$scope.selected.category.value!==PolicyTemplateType.OTHER,category:this.$scope.selected.category};this.dialogService.showDialog(MetricSelectorController,"app/view/customDashboard/editor/dialogs/MetricSelectorController","app/view/customDashboard/editor/dialogs/MetricSelectorView.html",opts)},SeriesSelectorController.prototype.getJMXObjectPath=function(metricName){var path=metricName.split("|");return path=_.rest(path,_.indexOf(path,"JMX")),path.pop(),path.join("|")},SeriesSelectorController.prototype.clearMultiInputSelection=function(){this.$scope.appComponentOptions={},this.$scope.appComponentsSelected=[],this.$scope.appComponentNodeOptions={},this.$scope.appComponentNodesSelected=[],this.$scope.btListOptions={},this.$scope.dbListOptions={},this.$scope.eumListOptions={},this.$scope.btListSelected=[],this.$scope.dbListSelected=[],this.$scope.eumListSelected=[],this.$scope.errorListOptions={},this.$scope.errorListSelected=[]},SeriesSelectorController.prototype.getTierName=function(id){return _.findWhere(this.$scope.appComponents,{id:id}).name},SeriesSelectorController.prototype.createNameMatch=function(matchType,matchPattern){return{matchType:matchType,matchPattern:matchPattern,inverse:!1,inList:null,extendedMatchType:matchType,extendedMatchPattern:matchPattern,regexGroups:null}},SeriesSelectorController.prototype.validateInput=function(){var errorMessage="";Util.isSafeString(this.$scope.wmmc.name)||(errorMessage+=this.resourceManager.getString("ui","ms_safeStringValidationError")+"<br>");var category=this.$scope.selected.category.value;return category===PolicyTemplateType.BUSINESS_TRANSACTION?this.$scope.singleMetricSelect||this.$scope.selected.btOption.value===BTAffectedEntityMatchCriteriaType.SPECIFIC?this.$scope.btListSelected.length<1&&(errorMessage+=this.resourceManager.getString("ui","ms_mustSelectBTError")+"<br>"):this.$scope.isTemplate||this.$scope.selected.btOption.value!==BTAffectedEntityMatchCriteriaType.BTS_OF_SPFICIC_TIERS||this.$scope.appComponentsSelected.length<1&&(errorMessage+=this.resourceManager.getString("ui","ms_mustSelectTierError")+"<br>"):category===PolicyTemplateType.BACKEND?(this.$scope.singleMetricSelect||this.$scope.selected.backendOption.value===BackendAffectedEntityMatchCriteriaType.SPECIFIC_BACKENDS)&&this.$scope.dbListSelected.length<1&&(errorMessage+=this.resourceManager.getString("ui","ms_mustSelectDBError")+"<br>"):category!==PolicyTemplateType.NODE_HEALTH_TRANSACTION_PERFORMANCE&&category!==PolicyTemplateType.INFRASTRUCTURE||this.$scope.isTemplate?category===PolicyTemplateType.ERROR?this.$scope.singleMetricSelect||this.$scope.selected.errorOption.value===ErrorsAffectedEntityMatchCriteriaType.SPECIFIC?this.$scope.errorListSelected.length<1&&(errorMessage+=this.resourceManager.getString("ui","ms_mustSelectErrorError")+"<br>"):this.$scope.isTemplate||this.$scope.selected.errorOption.value!==ErrorsAffectedEntityMatchCriteriaType.ERRORS_OF_SPECIFIC_TIERS||this.$scope.appComponentsSelected.length<1&&(errorMessage+=this.resourceManager.getString("ui","ms_mustSelectTierError")+"<br>"):category!==PolicyTemplateType.JMX||this.$scope.isTemplate?category===PolicyTemplateType.APPLICATION_DIAGNOSTIC_DATA&&(this.$scope.singleMetricSelect||this.$scope.selected.eumOption.value===ApplicationDiagnosticDataMatchCriteriaType.SPECIFIC_ADDS)&&this.$scope.eumListSelected.length<1&&(errorMessage+=this.resourceManager.getString("ui","ms_mustSelectEUMError")+"<br>"):this.$scope.singleMetricSelect||this.$scope.selected.nodeOption.value===NodeMatchCriteriaType.SPECIFC?this.$scope.appComponentNodesSelected.length<1&&(errorMessage+=this.resourceManager.getString("ui","ms_mustSelectNodeError")+"<br>"):this.$scope.selected.nodeOption.value===NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS&&this.$scope.appComponentsSelected.length<1&&(errorMessage+=this.resourceManager.getString("ui","ms_mustSelectTierError")+"<br>"):this.$scope.options.seriesSubType===UIData.SERIES_TYPE_TIERS?(this.$scope.singleMetricSelect||this.$scope.selected.tierOption.value===InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS)&&this.$scope.appComponentsSelected.length<1&&(errorMessage+=this.resourceManager.getString("ui","ms_mustSelectTierError")+"<br>"):this.$scope.options.seriesSubType===UIData.SERIES_TYPE_NODES&&(this.$scope.singleMetricSelect||this.$scope.selected.nodeOption.value===NodeMatchCriteriaType.SPECIFC?this.$scope.appComponentNodesSelected.length<1&&(errorMessage+=this.resourceManager.getString("ui","ms_mustSelectNodeError")+"<br>"):this.$scope.selected.nodeOption.value===NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS&&this.$scope.appComponentsSelected.length<1&&(errorMessage+=this.resourceManager.getString("ui","ms_mustSelectTierError")+"<br>")),null==this.$scope.mmc.metricExpression.metricDefinition.logicalMetricName&&(errorMessage+=this.resourceManager.getString("ui","ms_mustSelectMetric")+"<br>"),errorMessage.length>0?(this.notificationService.displayError(errorMessage,""),!1):!0},SeriesSelectorController.prototype.getId=function(d){return d.id},SeriesSelectorController.prototype.selectiveFetch=function(category){var subCategory,seriesSubType,categoryVal=Util.get(category,"value")||this.$scope.selected.category.value;SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.selectiveFetch: Enter."),this.clearMultiInputSelection(),this.$scope.singleMetricSelect?(this.setSelectedAppCompsFromMatchCriteria(),this.setSelectedBTObjectsFromMatchCriteria(),this.setSelectedDBObjectsFromMatchCriteria(),this.setSelectedAppCompNodesFromMatchCriteria(),this.setSelectedEumObjectsFromMatchCriteria(),this.setSelectedErrorListFromMatchCriteria()):categoryVal===PolicyTemplateType.BUSINESS_TRANSACTION?(subCategory=this.$scope.selected.btOption.value,subCategory===BTAffectedEntityMatchCriteriaType.BTS_OF_SPFICIC_TIERS?this.fetchAppComps():subCategory===BTAffectedEntityMatchCriteriaType.SPECIFIC&&this.fetchBTObjects()):categoryVal===PolicyTemplateType.BACKEND&&this.$scope.selected.backendOption.value===BackendAffectedEntityMatchCriteriaType.SPECIFIC_BACKENDS?this.fetchDBObjects():categoryVal===PolicyTemplateType.APPLICATION_DIAGNOSTIC_DATA&&this.$scope.selected.eumOption.value===ApplicationDiagnosticDataMatchCriteriaType.SPECIFIC_ADDS?this.fetchEUMObjects():categoryVal===PolicyTemplateType.NODE_HEALTH_TRANSACTION_PERFORMANCE||categoryVal===PolicyTemplateType.INFRASTRUCTURE?(seriesSubType=this.$scope.options.seriesSubType,seriesSubType===UIData.SERIES_TYPE_TIERS&&this.$scope.selected.tierOption.value===InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS?this.fetchAppComps():seriesSubType===UIData.SERIES_TYPE_NODES&&(subCategory=this.$scope.selected.nodeOption.value,subCategory===NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS?this.fetchAppComps():subCategory===NodeMatchCriteriaType.SPECIFC&&this.fetchAppCompNodes())):categoryVal===PolicyTemplateType.ERROR?(subCategory=this.$scope.selected.errorOption.value,subCategory===ErrorsAffectedEntityMatchCriteriaType.ERRORS_OF_SPECIFIC_TIERS?this.fetchAppComps():subCategory===ErrorsAffectedEntityMatchCriteriaType.SPECIFIC&&this.fetchAppComps(!0)):categoryVal===PolicyTemplateType.JMX&&(subCategory=this.$scope.selected.nodeOption.value,subCategory===NodeMatchCriteriaType.NODES_OF_SPECIFC_TIERS?this.fetchAppComps():subCategory===NodeMatchCriteriaType.SPECIFC&&this.fetchAppCompNodes())},SeriesSelectorController.prototype.fetchAppComps=function(fetchError){var _this=this;void 0===fetchError&&(fetchError=!1),this.userUiService.getAllApplicationComponents(this.$scope.selected.app.id).then(function(data){_this.$scope.appComponents=data,_this.$scope.appComponentOptions=angular.copy(_this.$scope.appComponentOptions),_this.$scope.appComponentOptions.dataProvider=_.map(_this.$scope.appComponents,function(comp){return{name:comp.name,type:comp.componentType.name,id:comp.id}}),_this.setSelectedAppCompsFromMatchCriteria(),fetchError&&_this.fetchErrorList()})},SeriesSelectorController.prototype.setSelectedAppCompsFromMatchCriteria=function(){var ids;ids=this.$scope.aemc.type===UIData.SERIES_TYPE_NODES?Util.get(this.$scope.aemc.nodeMatchCriteria,"componentIds"):this.$scope.selected.category.value===PolicyTemplateType.ERROR&&this.$scope.aemc.type===ErrorsAffectedEntityMatchCriteriaType.ERRORS_OF_SPECIFIC_TIERS?this.$scope.aemc.componentIds:this.$scope.aemc.componentIds,this.$scope.appComponentsSelected=_.map(ids,function(cid){return{id:cid}})},SeriesSelectorController.prototype.fetchBTObjects=function(){var _this=this;SeriesSelectorController.DEBUG&&ADLoggerService.warn("SeriesSelectorController.fetchBTObjects Debug: Enter."),BusinessTransactionUiService.instance().getBusinessTransactions(this.$scope.selected.app.id).then(function(response){var bts=BusinessTransactionUiService.instance().getBusinessTransactions_response(response);_this.$scope.btList=bts,_this.$scope.btListOptions=angular.copy(_this.$scope.btListOptions),_this.$scope.btListOptions.dataProvider=_.map(bts,function(bt){return{name:bt.name,type:bt.applicationComponentName||MetricUtil.NO_DATA_DISPLAY_STRING,id:bt.id,icon:ImageUtil.getIconForBusinessTransactionType2(bt)}}),_this.setSelectedBTObjectsFromMatchCriteria()})},SeriesSelectorController.prototype.setSelectedBTObjectsFromMatchCriteria=function(){this.$scope.btListSelected=_.map(this.$scope.aemc.businessTransactionIds||[],function(bid){return{id:bid}})},SeriesSelectorController.prototype.fetchDBObjects=function(){var _this=this;this.userUiService.getAllUnresolvedBackendCallInfos(this.$scope.selected.app.id).then(function(data){_this.$scope.dbListOptions=angular.copy(_this.$scope.dbListOptions),_this.$scope.dbListOptions.dataProvider=_.map(data,function(db){return{name:db.displayName,type:db.id,id:db.id}}),_this.setSelectedDBObjectsFromMatchCriteria()})},SeriesSelectorController.prototype.setSelectedDBObjectsFromMatchCriteria=function(){this.$scope.dbListSelected=_.map(this.$scope.aemc.backendIds||[],function(dbId){return{id:dbId}})},SeriesSelectorController.prototype.fetchEUMObjects=function(){var _this=this,filter={types:[this.$scope.options.eumType.id],applicationId:this.$scope.selected.app.id,onlyReturnExcluded:!1};this.userUiService.getApplicationDiagnosticDatas(filter).then(function(data){_this.$scope.eumListOptions=angular.copy(_this.$scope.eumListOptions),_this.$scope.eumListOptions.dataProvider=_.map(data,function(item){return{name:item.name,id:item.id,type:item.id}}),_this.setSelectedEumObjectsFromMatchCriteria()})},SeriesSelectorController.prototype.setSelectedEumObjectsFromMatchCriteria=function(){this.$scope.eumListSelected=_.map(this.$scope.aemc.addIds||[],function(eumId){return{id:eumId}})},SeriesSelectorController.prototype.fetchAppCompNodes=function(){var _this=this;this.userUiService.getApplicationComponentNodesByApplicationId(this.$scope.selected.app.id).then(function(data){_this.$scope.appComponentNodes=data,_this.$scope.appComponentNodeOptions=angular.copy(_this.$scope.appComponentNodes),_this.$scope.appComponentNodeOptions.dataProvider=_.map(data,function(comp){return{name:comp.name,type:comp.applicationComponentName,id:comp.id}}),_this.setSelectedAppCompNodesFromMatchCriteria()})},SeriesSelectorController.prototype.setSelectedAppCompNodesFromMatchCriteria=function(){var ids=Util.get(this.$scope.aemc.nodeMatchCriteria,["nodeIds"])||[];this.$scope.appComponentNodesSelected=_.map(ids,function(nid){return{id:nid}})},SeriesSelectorController.prototype.fetchErrorList=function(){var _this=this;this.userUiService.getApplicationDiagnosticDatas({applicationId:this.$scope.selected.app.id,types:["ERROR"]}).then(function(data){_this.$scope.errorList=data,_this.$scope.errorListOptions=angular.copy(_this.$scope.errorListOptions),_this.$scope.errorListOptions.dataProvider=_.map(data,function(error){return{id:error.id,name:error.name,type:_this.getTierName(error.applicationComponentId)}}),_this.setSelectedErrorListFromMatchCriteria()})},SeriesSelectorController.prototype.setSelectedErrorListFromMatchCriteria=function(){this.$scope.errorListSelected=_.map(this.$scope.aemc.errorIds||[],function(id){return{id:id}})},SeriesSelectorController.prototype.toggleEumAvailable=function(show){var eumOption={name:"End User Experience",value:PolicyTemplateType.APPLICATION_DIAGNOSTIC_DATA,ico:ImageUtil.policyEUM},indexOfEum=-1;_.each(this.$scope.uiData.seriesCategories,function(category,idx){return category.name===eumOption.name?void(indexOfEum=idx):void 0}),show?-1===indexOfEum&&this.$scope.uiData.seriesCategories.splice(3,0,eumOption):indexOfEum>=0&&this.$scope.uiData.seriesCategories.splice(indexOfEum,1)},SeriesSelectorController.prototype.getComponentEntityType=function(){return EntityType.APPLICATION_COMPONENT},SeriesSelectorController.prototype.getNodeEntityType=function(){return EntityType.APPLICATION_COMPONENT_NODE},SeriesSelectorController.prototype.getBTEntityType=function(){return EntityType.BUSINESS_TRANSACTION},SeriesSelectorController.prototype.getEumEntityType=function(){return EntityType.APPLICATION_DIAGNOSTIC_DATA},SeriesSelectorController.prototype.getErrorEntityType=function(){return EntityType.ERROR},SeriesSelectorController.prototype.getBackendEntityType=function(){return EntityType.BACKEND},SeriesSelectorController.DEBUG=!1,SeriesSelectorController.DEBUG_SCOPE=!1,SeriesSelectorController.SERIES_SELECTION_EVENT="series-selection",SeriesSelectorController.SERIES_DATA_EVENT="series-data",SeriesSelectorController.$inject=["$scope","$location","$rootScope","dialogService","$modalInstance","dialogData","resourceManager","navigationService","notificationService","injectorService","userUiService","eumConfigurationUiService","dashboardHelper","uiData","applicationUiService"],SeriesSelectorController}(ControllerBase),DashboardModes=function(){function DashboardModes(){}return DashboardModes.ADD="add",DashboardModes.EDIT="edit",DashboardModes.SET="set",DashboardModes}();define("app/view/customDashboard/editor/dialogs/SeriesSelectorController",function(){});
var CDPropertiesDialogController=function(){function CDPropertiesDialogController($scope,$location,$rootScope,resourceManager,$dialog,dialog,notificationService,customDashboardUiService){function editMode(dashboard){$scope.CDPropertiesModalMode=CDPropertiesDialogController.EDIT_MODE,setupScopeVarsFromDashboard(dashboard)}function createMode(){$scope.CDPropertiesModalMode=CDPropertiesDialogController.CREATE_MODE,setupScopeVarsFromDashboard(DashboardHelper.getDefaultCustomDashboard())}function setupScopeVarsFromDashboard(dashboard){$scope.id=dashboard.id,$scope.inputName=dashboard.name,$scope.inputHeight=dashboard.dashboardUIState.height,$scope.inputWidth=dashboard.dashboardUIState.width,$scope.canvasType=dashboard.dashboardUIState.canvasType,$scope.inputRefreshIntervalInSecs=dashboard.dashboardUIState.refreshInterval/1e3,$scope.inputBackgroundColor=dashboard.dashboardUIState.backgroundColor}var dashboard=dialog.options.dashboard;$scope.isCreateMode=dialog.options.mode==CDPropertiesDialogController.CREATE_MODE,$scope.isGridMode=function(){return $scope.canvasType==CustomDashBoardCanvasType.CANVAS_TYPE_GRID},dialog.options.mode==CDPropertiesDialogController.EDIT_MODE?editMode(dashboard):dialog.options.mode==CDPropertiesDialogController.CREATE_MODE&&createMode(),$scope.close=function(){dialog.close()},$scope.submit=function(){var errorMessage="";if(_.isEmpty($scope.inputName)?errorMessage+=resourceManager.getString("ui","ms_dashboardNameRequired")+"<br>":($scope.inputName.length>100&&(errorMessage+=resourceManager.getString("ui","ms_dashboardNameTooLong")+"<br>"),Util.isSafeString($scope.inputName)||(errorMessage+=resourceManager.getString("ui","ms_dashboardNameInvalidChars")+"<br>")),$scope.canvasType===CustomDashBoardCanvasType.CANVAS_TYPE_GRID?StringUtils.containsInteger($scope.inputRefreshIntervalInSecs)||(errorMessage+=resourceManager.getString("ui","ms_gridDashboardEnterNumbersOnly")+"<br>"):StringUtils.containsInteger($scope.inputWidth)&&StringUtils.containsInteger($scope.inputHeight)&&StringUtils.containsInteger($scope.inputRefreshIntervalInSecs)||(errorMessage+=resourceManager.getString("ui","ms_absoluteDashboardEnterNumbersOnly")+"<br>"),($scope.inputRefreshIntervalInSecs<60||$scope.inputRefreshIntervalInSecs>TimeRangeService.SECONDS_IN_DAY)&&(errorMessage+=resourceManager.getString("ui","ms_dashboardIntervalInvalid",[TimeRangeService.SECONDS_IN_DAY])+"<br>"),($scope.inputWidth>5e3||$scope.inputWidth<100)&&(errorMessage+=resourceManager.getString("ui","ms_dashboardWidthInvalid")+"<br>"),($scope.inputHeight>5e3||$scope.inputHeight<100)&&(errorMessage+=resourceManager.getString("ui","ms_dashboardHeightInvalid")+"<br>"),errorMessage.length>0)return void notificationService.displayError(errorMessage,"");if("Edit"==$scope.CDPropertiesModalMode){var nameChangedFlag=$scope.inputName!=dashboard.name;if(!nameChangedFlag)return $rootScope.$broadcast(CDPropertiesDialogController.CD_PROPERTIES_CHANGE_EVENT,{id:$scope.id,name:$scope.inputName,canvasType:$scope.canvasType,hasCDNameChanged:nameChangedFlag,height:$scope.inputHeight,width:$scope.inputWidth,refreshIntervalInSecs:$scope.inputRefreshIntervalInSecs,backgroundColor:$scope.inputBackgroundColor}),void dialog.close()}var getAllDashboardsResultHandler=function(response){var dashboardlist=customDashboardUiService.getAllDashboards_response(response),isDuplicateName=_.some(dashboardlist,function(data){return data.name==$scope.inputName?!0:!1});if(isDuplicateName)return void notificationService.displayError("Name '"+$scope.inputName+"' already in use.","");var nameChangedFlag=!0,eventType="";$scope.CDPropertiesModalMode==CDPropertiesDialogController.EDIT_MODE?(nameChangedFlag=$scope.inputName!=dashboard.name,eventType=CDPropertiesDialogController.CD_PROPERTIES_CHANGE_EVENT):$scope.CDPropertiesModalMode==CDPropertiesDialogController.CREATE_MODE&&(eventType=CDPropertiesDialogController.CD_CREATE_EVENT),$rootScope.$broadcast(eventType,{id:$scope.id,name:$scope.inputName,canvasType:$scope.canvasType,hasCDNameChanged:nameChangedFlag,height:$scope.inputHeight,width:$scope.inputWidth,refreshIntervalInSecs:$scope.inputRefreshIntervalInSecs,backgroundColor:$scope.inputBackgroundColor}),dialog.close()},promise=customDashboardUiService.getAllDashboards();promise.then(getAllDashboardsResultHandler)}}return CDPropertiesDialogController.CD_PROPERTIES_CHANGE_EVENT="cd-properties-change-event",CDPropertiesDialogController.CD_CREATE_EVENT="cd-create-event",CDPropertiesDialogController.CREATE_MODE="Create",CDPropertiesDialogController.EDIT_MODE="Edit",CDPropertiesDialogController.$inject=["$scope","$location","$rootScope","resourceManager","$dialog","dialog","notificationService","customDashboardUiService","dashboardHelper","uiData"],CDPropertiesDialogController}();define("app/view/customDashboard/editor/dialogs/CDPropertiesDialogController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/customDashboard/editor/dialogs/nodeMetricSelector/NodeMetricSelectorController",["require","exports"],function(require,exports){var NodeMetricSelectorController=function(_super){function NodeMetricSelectorController($scope,$rootScope,$modalInstance,dialogData,resourceManager,notificationService,injectorService,metricBrowserUiService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.metricBrowserUiService=metricBrowserUiService,this.agentTypes=[{name:"Application",value:AgentType.APP_AGENT},{name:"Machine",value:AgentType.MACHINE_AGENT}],this.parsedMetricTreeRoots=[],this.$scope.controller=this,this.init()}return __extends(NodeMetricSelectorController,_super),NodeMetricSelectorController.prototype.isMetricSelected=function(){return Util.isDefAndNotNull(this.selectedMetric)},NodeMetricSelectorController.prototype.onSelect=function(selModel,selected){this.isLeaf(selected.raw)&&(this.selectedMetric={metricId:selected.raw.metricId,label:this.getFullName(selected)})},NodeMetricSelectorController.prototype.onDoubleClick=function(selModel,selected){this.isLeaf(selected.raw)&&(this.selectedMetric={metricId:selected.raw.metricId,label:this.getFullName(selected)},this.$rootScope.$broadcast(NodeMetricSelectorController.UEV_SPECIFIC_NODE_METRIC_EVENT,this.selectedMetric),this.$modalInstance.close())},NodeMetricSelectorController.prototype.close=function(){this.$modalInstance.close()},NodeMetricSelectorController.prototype.submit=function(){this.$rootScope.$broadcast(NodeMetricSelectorController.UEV_SPECIFIC_NODE_METRIC_EVENT,this.selectedMetric),this.$modalInstance.close()},NodeMetricSelectorController.prototype.onChangeAgentType=function(){this.getMetricTree()},NodeMetricSelectorController.prototype.init=function(){this.nodeId=this.dialogData.nodeId,this.selectedAgentType=_.findWhere(this.agentTypes,{value:AgentType.APP_AGENT}),this.getMetricTree(),this.dialogHeading=Util.isDefAndNotNull(this.dialogData.dialogHeading)?this.dialogData.dialogHeading:"",this.treeConfig={multiSelect:Util.isDefAndNotNull(this.dialogData.multiSelect)?this.dialogData.multiSelect:!0},this.isNpmEnabled=NetworkMonitoringViewService.instance().isNetworkMonitoringEnabled()},NodeMetricSelectorController.prototype.getMetricTree=function(){var _this=this;this.metricBrowserUiService.getExpandedMetricTreeForNode(this.nodeId,this.selectedAgentType.value).then(function(treeItems){if(!treeItems||0===treeItems.length)return void(_this.errorMsg="No metric items returned, agent may not be ready.");treeItems=_this.parseTree(treeItems);var root={};root.text="Metric Nodes",root.expanded=!1,root.children=[],_this.createNodeMetricObjectTree(root,treeItems),_this.treeData={root:root}})},NodeMetricSelectorController.prototype.parseTree=function(treeItems){this.parsedMetricTreeRoots=[];for(var itemsToVisit=treeItems;itemsToVisit.length>0;)this.processItem(itemsToVisit.pop(),itemsToVisit);for(var parsedTreeItems=[],treeItem=null,containerTreeItem=null,nodeContainerItem=null,n=0;n<this.parsedMetricTreeRoots.length;n++)if(treeItem=this.parsedMetricTreeRoots[n],containerTreeItem=this.isContainerMetricTreeItem(treeItem)?treeItem:null,nodeContainerItem=treeItem.nodeId==this.nodeId?treeItem:null)for(var c=0;c<nodeContainerItem.children.length;c++)parsedTreeItems.push(nodeContainerItem.children[c]);else containerTreeItem&&containerTreeItem.children&&containerTreeItem.children.length>0&&(parsedTreeItems=parsedTreeItems.concat(containerTreeItem));return parsedTreeItems},NodeMetricSelectorController.prototype.processItem=function(treeItem,itemsToVisit){if(this.isNodeMetricTreeRootItem(treeItem))this.parsedMetricTreeRoots.push(treeItem);else if(this.isContainerMetricTreeItem(treeItem))for(var i=0;i<treeItem.children.length;i++)itemsToVisit.push(treeItem.children[i])},NodeMetricSelectorController.prototype.isNodeMetricTreeRootItem=function(treeItem){return"Overall Application Performance"==treeItem.name||"Business Transaction Performance"==treeItem.name||"Backends"==treeItem.name||"Errors"==treeItem.name||"Service Endpoints"==treeItem.name?!0:this.isApplicationComponentNodeMetricTreeItem(treeItem)?!0:!1},NodeMetricSelectorController.prototype.isContainerMetricTreeItem=function(item){return Util.isDefAndNotNull(item.children)},NodeMetricSelectorController.prototype.isApplicationComponentNodeMetricTreeItem=function(item){return Util.isDefAndNotNull(item.nodeId)&&Util.isValidId(item.nodeId)},NodeMetricSelectorController.prototype.isLeaf=function(item){return Util.isDefAndNotNull(item.metricId)},NodeMetricSelectorController.prototype.compareNode=function(a,b){return this.isLeaf(a)&&!this.isLeaf(b)?1:!this.isLeaf(a)&&this.isLeaf(b)?-1:a.name.localeCompare(b.name)},NodeMetricSelectorController.prototype.createNodeMetricObjectTree=function(root,nodes){var _this=this;if(root&&nodes&&0!=nodes.length){nodes.sort(function(a,b){return _this.compareNode(a,b)});for(var i=0;i<nodes.length;++i){var treeNode={},name=nodes[i].name;nodes[i].name&&nodes[i].name.length>NodeMetricSelectorController.MAX_CHARACTERS_IN_TREE_NODE&&(name=nodes[i].name.substr(0,NodeMetricSelectorController.MAX_CHARACTERS_IN_TREE_NODE)+"...",treeNode.qtip=nodes[i].name),treeNode.leaf=!1,treeNode.text=name,treeNode.children=[],this.isLeaf(nodes[i])&&(treeNode.metricId=nodes[i].metricId,treeNode.leaf=!0),root.children.push(treeNode),!treeNode.leaf&&Util.isDefAndNotNull(nodes[i].children)&&this.createNodeMetricObjectTree(treeNode,nodes[i].children)}}},NodeMetricSelectorController.prototype.getFullName=function(selected){if(null==selected.parentNode)return"";var prevPath=this.getFullName(selected.parentNode);return""!=prevPath?prevPath+"|"+selected.raw.text:selected.raw.text},NodeMetricSelectorController.UEV_SPECIFIC_NODE_METRIC_EVENT="UEV_SPECIFIC_NODE_METRIC_EVENT",NodeMetricSelectorController.$inject=["$scope","$rootScope","$modalInstance","dialogData","resourceManager","notificationService","injectorService","metricBrowserUiService"],NodeMetricSelectorController.MAX_CHARACTERS_IN_TREE_NODE=50,NodeMetricSelectorController}(ControllerBase);exports.NodeMetricSelectorController=NodeMetricSelectorController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},StreamingSeriesSelectorController=function(_super){function StreamingSeriesSelectorController($scope,$location,$rootScope,dialogService,$modalInstance,dialogData,resourceManager,navigationService,notificationService,injectorService,userUiService,dashboardHelper,uiData,entityUiService){function save(){{var oldName;$scope.selected.category.value,$scope.aemc}thisController.isAddMode()||(oldName=thisController.dialogData.seriesName,Util.removeWhere(widgetProperties.metricMatchCriteriaNameToMetricType,{name:oldName})),$scope.aemc=null,$scope.mmc.evaluationScopeType=null,$scope.mmc.affectedEntityMatchCriteria=$scope.aemc,$scope.mmc.metricExpression.functionType=$scope.selectedFunctionType.value,$scope.mmc.metricExpression.metricDefinition.scope={entityId:$scope.appComponentNodesSelected[0].componentId,entityType:EntityType.APPLICATION_COMPONENT_NODE},$scope.mmc.metricExpression.metricDefinition.type=AbstractMetricDefinitionType.ABSOLUTE_METRIC_SCOPE,$scope.wmmcUIS.widgetMetricMatchCriteriaName=$scope.wmmc.name,$scope.mmcMap.name=$scope.wmmc.name,$scope.mmcMap.value=PolicyTemplateType.INFRASTRUCTURE,widgetProperties.metricMatchCriteriaNameToMetricType=widgetProperties.metricMatchCriteriaNameToMetricType||[],widgetProperties.metricMatchCriteriaNameToMetricType.push($scope.mmcMap),$scope.wmmcUIS.seriesType=$scope.selected.displayType.value,$scope.wmmcUIS.colorPalette.colors=$scope.selected.autoGenerateColors?[]:_.map($scope.gridOptions.dataProvider,function(item){return item.color})}var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$location=$location,this.$rootScope=$rootScope,this.dialogService=dialogService,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.resourceManager=resourceManager,this.navigationService=navigationService,this.notificationService=notificationService,this.injectorService=injectorService,this.userUiService=userUiService,this.dashboardHelper=dashboardHelper,this.uiData=uiData,this.entityUiService=entityUiService,$scope.controller=this;var seriesName,thisController=this,widgetProperties=$scope.selectedWidgetProperties=this.dialogData.selectedWidgetProperties;this.widgetProperties=widgetProperties,$scope.uiData=uiData.getData(!1,!1),$scope.mode=this.dialogData.mode||DashboardModes.ADD;var dashboard=this.dialogData.dashboard;seriesName=this.isAddMode()?dashboardHelper.generateSeriesName(dashboard):this.dialogData.seriesName,$scope.wmmc=dashboardHelper.getOrCreateWidgetsMetricMatchCriterias(dashboard,{widgetGuid:widgetProperties.widgetGuid,name:seriesName}),$scope.wmmcUIS=dashboardHelper.getOrCreateWidgetMetricMatchCriteriaUIStates(dashboard,widgetProperties.widgetGuid,$scope.wmmc.name),$scope.mmc=$scope.wmmc.metricMatchCriteria,$scope.aemc=$scope.mmc.affectedEntityMatchCriteria||{},$scope.gridOptions=new GridOptions,$scope.newColor=Util.getReferenceableNumber(0),$scope.selectedColor=null,this.isAddMode()||entityUiService.getEntity(EntityType.APPLICATION_COMPONENT_NODE,$scope.mmc.metricExpression.metricDefinition.scope.entityId).then(function(data){var entity=_this.entityUiService.getEntity_response(data),nodeVO={};nodeVO.componentId=entity.id,nodeVO.text=entity.name,_this.selectedNode=nodeVO,_this.$scope.appComponentNodesSelected=[_this.selectedNode],_this.selectedMetric={label:_this.$scope.mmc.metricExpression.metricDefinition.logicalMetricName,metricId:_this.$scope.mmc.metricExpression.metricDefinition.metricId}});var columns=[new GridColumn({flex:1,align:"left",dataIndex:"color",sortable:!1,renderer:this.colorPaletteRenderer,header:"Color"})];$scope.gridOptions.columnProvider=columns,$scope.gridOptions.dataProvider=_.map($scope.wmmcUIS.colorPalette.colors,function(color){return{color:color}}),$scope.gridOptions.draggable={},$scope.gridOptions.draggable.fn=this.draggableCallback,$scope.mmcMap=dashboardHelper.getMMCMap(widgetProperties,$scope.wmmc.name,$scope.isTemplate),$scope.selectedFunctionType=_.findWhere($scope.uiData.functionTypes,{value:$scope.mmc.metricExpression.functionType})||$scope.uiData.functionTypes[2],$scope.options={seriesSubType:this.getGeneralType($scope.aemc.type)||UIData.SERIES_TYPE_TIERS},$scope.selected={category:_.findWhere($scope.uiData.seriesCategories,{value:$scope.mmcMap.value}),operationType:_.findWhere($scope.uiData.operationTypes,{value:this.getOperationType()})||$scope.uiData.operationTypes[0],autoGenerateColors:this.isAutoGenerateColors(),displayType:_.findWhere($scope.uiData.displayTypes,{value:$scope.wmmcUIS.seriesType})||$scope.uiData.displayTypes[0]},$scope.selected.nodeType=$scope.uiData.nodeTypes[1];var applicationId,params=new URLParams;params.hasParam(UrlConstants.APPLICATION_ID)?applicationId=params.getNumberParam(UrlConstants.APPLICATION_ID):(notificationService.displayError("Application Id not found",""),this.$modalInstance.close()),$scope.selected.app={id:applicationId,name:"This Application",value:"This Application"},$scope.apps=[$scope.selected.app],$scope.wmmc.metricMatchCriteria.applicationId=$scope.selected.app.id,$scope.submit=function(){thisController.validateInput()&&(save(),$rootScope.$broadcast(SeriesSelectorController.SERIES_SELECTION_EVENT,{widgetGuid:$scope.selectedWidgetProperties.widgetGuid,wmmc:$scope.wmmc,wmmcUIS:$scope.wmmcUIS,mode:thisController.isAddMode()?DashboardModes.ADD:DashboardModes.EDIT,oldName:thisController.isAddMode()?"":thisController.dialogData.seriesName}),$modalInstance.close())}}return __extends(StreamingSeriesSelectorController,_super),StreamingSeriesSelectorController.prototype.selectApplicationNode=function(){var _this=this,opts={multiSelect:!1,dialogHeading:"Select a Node for streaming metric.",minAgentVersion:"4.0.0.0"};this.dialogService.showDialog("NodeSelectorController","app/view/apm/businessTransactions/btDiscoveryTools/configurator/nodeselector/NodeSelectorController","app/view/apm/businessTransactions/btDiscoveryTools/configurator/nodeselector/nodeselector.html",opts).then(function(instance){instance.result.then(function(data){_.isArray(data)&&1==data.length&&(_this.selectedNode=data[0],_this.$scope.appComponentNodesSelected=[data[0]])})})},StreamingSeriesSelectorController.prototype.openNodeMetricSelectorDialog=function(){var _this=this,opts={nodeId:this.$scope.appComponentNodesSelected[0].componentId,multiSelect:!1,dialogHeading:"Select a metric for node '"+this.selectedNode.text+"'"};this.dialogService.showDialog("NodeMetricSelectorController","app/view/customDashboard/editor/dialogs/nodeMetricSelector/NodeMetricSelectorController","app/view/customDashboard/editor/dialogs/nodeMetricSelector/NodeMetricSelector.html",opts),require(["app/view/customDashboard/editor/dialogs/nodeMetricSelector/NodeMetricSelectorController"],function(nodeMetricSelectorController){_this.$scope.$on(nodeMetricSelectorController.NodeMetricSelectorController.UEV_SPECIFIC_NODE_METRIC_EVENT,function(e,data){Util.isDefAndNotNull(data)&&(_this.selectedMetric=data,_this.$scope.mmc.metricExpression.metricDefinition.logicalMetricName=data.label,_this.$scope.mmc.metricExpression.metricDefinition.metricId=data.metricId)})})},StreamingSeriesSelectorController.prototype.isAddMode=function(){return this.$scope.mode===DashboardModes.ADD},StreamingSeriesSelectorController.prototype.isPieGraph=function(){return this.widgetProperties.widgetType===WidgetTypes.PIE},StreamingSeriesSelectorController.prototype.isGaugeGraph=function(){return this.widgetProperties.widgetType===WidgetTypes.GAUGE},StreamingSeriesSelectorController.prototype.isColorSelected=function(){return null!=this.$scope.selectedColor},StreamingSeriesSelectorController.prototype.isValidSeries=function(){return!0},StreamingSeriesSelectorController.prototype.getDialogTitle=function(){return this.isAddMode()?"Add Series":"Edit Series"},StreamingSeriesSelectorController.prototype.handleAddColor=function(){this.$scope.gridOptions.dataProvider.push({color:this.$scope.newColor.value}),this.$scope.selected.autoGenerateColors=!1,this.refreshColorGrid()},StreamingSeriesSelectorController.prototype.handleDeleteColor=function(){Util.removeWhere(this.$scope.gridOptions.dataProvider,this.$scope.selectedColor),this.$scope.selectedColor=null,_.isEmpty(this.$scope.gridOptions.dataProvider)&&(this.$scope.selected.autoGenerateColors=!0),this.refreshColorGrid()},StreamingSeriesSelectorController.prototype.gridClick=function(event){this.$scope.selectedColor=event.data},StreamingSeriesSelectorController.prototype.isNodeSelected=function(){return Util.isDefAndNotNull(this.selectedNode)},StreamingSeriesSelectorController.prototype.isMetricSelected=function(){return Util.isDefAndNotNull(this.selectedMetric)},StreamingSeriesSelectorController.prototype.getNodeButtonLabel=function(){return Util.isDefAndNotNull(this.selectedNode)?this.selectedNode.text:"Select a Node"},StreamingSeriesSelectorController.prototype.getMetricButtonLabel=function(){return Util.isDefAndNotNull(this.selectedMetric)?this.selectedMetric.label:"Select a Metric"},StreamingSeriesSelectorController.prototype.close=function(){this.$modalInstance.close()},StreamingSeriesSelectorController.prototype.refreshColorGrid=function(){this.$scope.gridOptions.dataProvider=angular.copy(this.$scope.gridOptions.dataProvider)},StreamingSeriesSelectorController.prototype.moveColor=function(dragColor,dropColor,dropPosition){var dataProvider=this.$scope.gridOptions.dataProvider,dragIndex=this.indexOfColorValue(dataProvider,dragColor);dataProvider.splice(dragIndex,1);var dropIndex=this.indexOfColorValue(dataProvider,dropColor);dropIndex="before"===dropPosition?dropIndex:dropIndex+1,dataProvider.splice(dropIndex,0,dragColor),ViewUtil.safeApply(this.$scope)},StreamingSeriesSelectorController.prototype.indexOfColorValue=function(colorArray,colorObj){for(var index=-1,i=0,size=colorArray.length;size>i;i++)colorArray[i].color===colorObj.color&&(index=i);return index},StreamingSeriesSelectorController.prototype.draggableCallback=function(node,data,overModel,dropPosition){var dragColor=data.records[0].data,dropColor=overModel.data;this.moveColor(dragColor,dropColor,dropPosition)},StreamingSeriesSelectorController.prototype.colorPaletteRenderer=function(val){return["<div>",'<div style="width: 22px; height: 22px; margin-right: 5px; background: ',Util.getColorString(val),'; display: inline-block"></div>','<span style="display:inline-block; vertical-align:top; margin-top: 3px">',Util.getColorString(val),"</span></div>"].join("")},StreamingSeriesSelectorController.prototype.getOperationType=function(){return Util.get(this.$scope.aemc,["nameMatch","matchType"])||Util.get(this.$scope.aemc,["nodeMatchCriteria","nodeNameMatchCriteria","matchType"])||Util.get(this.$scope.aemc,["nameMatchCriteria","matchType"])},StreamingSeriesSelectorController.prototype.isAutoGenerateColors=function(){var colors=Util.get(this.$scope.wmmcUIS,["colorPalette","colors"]);return Util.isDefAndNotNull(colors)?0===colors.length:!0},StreamingSeriesSelectorController.prototype.getNodeType=function(){var nodeType=Util.get(this.$scope.aemc,["nodeMatchCriteria","nodeTypes"]);return this.$scope.selected.category.value===PolicyTemplateType.JMX?this.$scope.uiData.nodeTypes[1]:nodeType?_.findWhere(this.$scope.uiData.nodeTypes,{value:nodeType[0]}):null},StreamingSeriesSelectorController.prototype.getGeneralType=function(type){return type===InfrastructureAffectedEntityMatchCriteriaType.ALL_TIERS||type===InfrastructureAffectedEntityMatchCriteriaType.SPECIFIC_TIERS?UIData.SERIES_TYPE_TIERS:type===InfrastructureAffectedEntityMatchCriteriaType.NODES?UIData.SERIES_TYPE_NODES:null},StreamingSeriesSelectorController.prototype.validateInput=function(){return null==this.$scope.mmc.metricExpression.metricDefinition.logicalMetricName?(this.notificationService.displayError("Select a Metric.","Validation Error"),!1):!0},StreamingSeriesSelectorController.prototype.getId=function(d){return d.componentId},StreamingSeriesSelectorController.$inject=["$scope","$location","$rootScope","dialogService","$modalInstance","dialogData","resourceManager","navigationService","notificationService","injectorService","userUiService","dashboardHelper","uiData","entityUiService"],StreamingSeriesSelectorController}(ControllerBase);define("app/view/customDashboard/editor/dialogs/streamingSeriesSelector/StreamingSeriesSelectorController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/apm/businessTransactions/btDiscoveryTools/configurator/nodeselector/NodeSelectorController",["require","exports"],function(require,exports){var NodeSelectorController=function(_super){function NodeSelectorController($scope,$modalInstance,dialogData,$location,$q,resourceManager,notificationService,injectorService,applicationUiService){var _this=this;if(_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.$location=$location,this.$q=$q,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.applicationUiService=applicationUiService,this.minAgentVersion="",this._appId=dialogData.appId&&dialogData.appId>1?dialogData.appId:parseInt(new URLParams($location.path()).application()),$scope.errorMsg="",$scope.valid=!1,$scope.close=function(){_this.$modalInstance.close([])},$scope.ok=function(){_this.$modalInstance.close($scope.selectedNodes)},$scope.selectedNodes=[],$scope.treeView=this.initTreeView(),$scope.dialogHeading=this.dialogData.dialogHeading,this.minAgentVersionNumber=0,Util.isDefAndNotNull(this.dialogData.minAgentVersion)){this.minAgentVersion=this.dialogData.minAgentVersion;var versionNumbers=this.dialogData.minAgentVersion.split("."),minMajorRelease=versionNumbers.length>0?parseInt(versionNumbers[0]):0,minMinorRelease=versionNumbers.length>1?parseInt(versionNumbers[1]):0,minPointRelease=versionNumbers.length>2?parseInt(versionNumbers[2]):0,agentPointRelease=versionNumbers.length>3?parseInt(versionNumbers[3]):0;this.minAgentVersionNumber=1e3*minMajorRelease+100*minMinorRelease+10*minPointRelease+agentPointRelease}applicationUiService.buildAppTreeJavaTiersOnly(this._appId).then(function(response){var configEntry=applicationUiService.buildAppTreeJavaTiersOnly_response(response),data=configEntry;data.expanded=!0,data.icon=data.iconSource,angular.forEach(data.children,function(child){child.icon=child.iconSource}),$scope.treeView.data={autoLoad:!1,root:{expanded:!0,children:angular.copy(data)},fields:["text","componentId"],sortOnLoad:!1,sorters:{sorterFn:function(o1,o2){return o1.data.text===o2.data.text?0:o1.data.text<o2.data.text?-1:1}}}})}return __extends(NodeSelectorController,_super),NodeSelectorController.prototype.initTreeView=function(){{var _this=this,$scope=this.$scope,$q=this.$q,treeView={};this.applicationUiService}return treeView.nodeUpdate=null,treeView.sortData=null,treeView.visible=!0,treeView.data=null,treeView.loadNodeData=function(id){var deferred=$q.defer();return NodeUiService.instance().getApplicationComponentNodesByComponentId(id).then(function(data){var nodes=NodeUiService.instance().getApplicationComponentNodesByComponentId_response(data),nodeData=[];angular.forEach(nodes,function(node){nodeData.push({text:node.name,leaf:!0,icon:ImageUtil.nodeIcon,componentId:node.id,appAgent:node.appAgent})}),deferred.resolve(nodeData)}),deferred.promise},treeView.onSelect=function(selModel){var selectedNodes=selModel.getSelection();$scope.selectedNodes=[],angular.forEach(selectedNodes,function(node){var nodeVO={};nodeVO.componentId=node.data.componentId,nodeVO.text=node.data.text,nodeVO.appAgent=node.raw.appAgent,$scope.selectedNodes.push(nodeVO)})},treeView.onDoubleClick=function(selModel,selected){if(selected.raw.leaf&&_this.isVersionSelectable(selected)){$scope.selectedNodes=[];var nodeVO={};nodeVO.componentId=selected.raw.componentId,nodeVO.text=selected.raw.text,nodeVO.appAgent=selected.raw.appAgent,$scope.selectedNodes.push(nodeVO),_this.$modalInstance.close($scope.selectedNodes)}},treeView.canBeSelected=function(selModel,record){var result=!1,valid=!1,numSelected=selModel.getSelection().length;return _this.$scope.errorMsg="",record.getData().componentId?0==numSelected?(result=!0,valid=!0):10==numSelected?(result=!1,_this.$scope.errorMsg="Cannot select more than 10 nodes."):selModel.getSelection()[0].getData().parentId===record.getData().parentId?result=!0:(result=!1,_this.$scope.errorMsg="Can only select nodes under one tier."):result=!1,_this.isVersionSelectable(record)||(result=!1,valid=!1),numSelected>0&&(valid=!0),_this.$scope.valid=valid,_this.$scope.$apply(),result},treeView.onDeselect=function(selModel){selModel.getSelection().length>0?(_this.$scope.valid=!0,_this.$scope.errorMsg=""):_this.$scope.valid=!1,_this.$scope.$apply()},treeView.config={hideHeaders:!0,multiSelect:Util.isDefAndNotNull(this.dialogData.multiSelect)?this.dialogData.multiSelect:!0,columns:{items:[{xtype:"treecolumn",dataIndex:"text"}]}},treeView},NodeSelectorController.prototype.isVersionSelectable=function(record){if(this.minAgentVersionNumber>0&&record.raw.appAgent){var appAgent=record.raw.appAgent,agentVersionNumber=1e3*appAgent.majorRelease+100*appAgent.minorRelease+10*appAgent.pointRelease+appAgent.agentPointRelease;if(agentVersionNumber<this.minAgentVersionNumber){var agentVersionStr=appAgent.majorRelease+"."+appAgent.minorRelease+"."+appAgent.pointRelease+"."+appAgent.agentPointRelease;return this.$scope.errorMsg="Agent version: v"+agentVersionStr+", minimum required version: v"+this.minAgentVersion,!1}}return!0},NodeSelectorController.$inject=["$scope","$modalInstance","dialogData","$location","$q","resourceManager","notificationService","injectorService","applicationUiService"],NodeSelectorController}(ControllerBase);exports.NodeSelectorController=NodeSelectorController,appdynamicsModule.controller("NodeSelectorController",NodeSelectorController)});var ADPropertiesPanel=function(){function ADPropertiesPanel($compile,$rootScope,$q,dialogService,uiData,dashboardService,dashboardHelper,notificationService,applicationUiService){return{restrict:"E",replace:!0,templateUrl:"app/view/customDashboard/editor/propertiesPanel/PropertiesPanel.html",link:function(scope,iElement){function colorPaletteRenderer(val){var totalColorPaletteWidth=70,totalColors=val.colors.length,split=Math.floor(totalColorPaletteWidth/totalColors),margin="1px",paletteHTML=['<div style="width: 100%; height: 100%">'],minimumColorBoxWidth=Math.floor(totalColorPaletteWidth/6);return split=split>minimumColorBoxWidth?minimumColorBoxWidth:split,_.forEach(val.colors,function(color){paletteHTML.push('<div style="width: '+split+"px; height: 20px; margin-left: "+margin+"; display: inline-block; background: "+Util.getColorString(color)+'" class="color-box"></div>')}),_.isEmpty(val.colors)&&paletteHTML.push("auto"),paletteHTML.push("</div>"),paletteHTML.join("")}function seriesTypeRenderer(val,meta,record){var id=Ext.id();return Ext.defer(renderComponent,10,this,[id,val,record.raw]),'<div id="'+id+'"></div>'}function renderComponent(id,value,wmmc){var el=angular.element('<div ad-select-input sv-model="selectedDisplayType" sv-change="handleTypeChange()" sv-options="displayTypes" style="width:82px;"></div>'),scope=$rootScope.$new();scope.handleTypeChange=function(){scope.selectedDisplayType!==scope.prevDisplayType&&(scope.prevDisplayType=scope.selectedDisplayType,$rootScope.$broadcast(ADPropertiesPanel.WIDGET_DISPLAY_TYPE_CHANGE,wmmc,scope.selectedDisplayType))},scope.displayTypes=uiData.getData(!1,!1).displayTypes,scope.selectedDisplayType=_.filter(scope.displayTypes,function(option){return option.value===value})[0],scope.prevDisplayType=scope.selectedDisplayType,$("#"+id).append(el),$compile(el)(scope),scope.$digest()}function getAccordionMaxHeight(){return dashboardHelper.getCanvasHeight(scope.controller.isTemplate())-$(".properties-panel .modal-header").outerHeight()-5}function setTimeRange(properties){var trs={};0==properties.minutesBeforeAnchorTime?(trs.durationInMinutes=0,trs.startTime=new Date(properties.startTime),trs.endTime=new Date(properties.endTime),trs.type=TimeRangeSpecifierType.BETWEEN_TIMES,scope.showWidgetCustomRange=!0):(trs.durationInMinutes=properties.minutesBeforeAnchorTime,trs.type=TimeRangeSpecifierType.BEFORE_NOW,scope.showWidgetCustomRange=!1),scope.widgetTimeRange=trs,scope.propertiesPanel.timeRangeType=properties.isGlobal?"globalTimeRange":"localTimeRange"
}function getAppName(apps,id){return _.filter(apps,function(item){return item.id===id})[0].name}function getPolicyTemplateName(policyTemplates,id){var policyTemplate=_.filter(policyTemplates,function(item){return item.id===id})[0];return policyTemplate.name}function updateWidgetState(isSelectionEvent){var appId,policyId;if(setTimeRange(scope.selectedWidgetProperties),scope.selectedWidgetProperties.widgetType===WidgetTypes.STATUS_LIGHT){if(appId=scope.selectedWidgetProperties.applicationId,policyId=scope.selectedWidgetProperties.policyTemplateId,!(0!==appId&&null!=appId||0!==policyId&&null!=policyId))return scope.labels.applicationName="",void(scope.labels.policyTemplateName="");$q.all([applicationUiService.getApmApplications(),dashboardService.getPolicies(scope.selectedWidgetProperties.applicationId)]).then(function(responses){scope.labels.applicationName=getAppName(responses[0],appId),scope.labels.policyTemplateName=getPolicyTemplateName(responses[1],policyId);var doesTitleMatchAnyPolicyNames=_.where(responses[1],{name:scope.selectedWidgetProperties.title});isSelectionEvent&&(doesTitleMatchAnyPolicyNames.length>0||StringUtils.isNullOrEmptyString(scope.selectedWidgetProperties.title))&&(scope.selectedWidgetProperties.title=scope.labels.policyTemplateName)})}else scope.selectedWidgetProperties.widgetType===WidgetTypes.TIMESERIES_GRAPH||scope.selectedWidgetProperties.widgetType===WidgetTypes.STREAMING_GRAPH?(scope.gridOptions.columnProvider[1].hidden=!1,updateSeriesGridData()):scope.selectedWidgetProperties.widgetType===WidgetTypes.PIE?(scope.gridOptions.columnProvider[1].hidden=!0,updateSeriesGridData()):scope.selectedWidgetProperties.widgetType===WidgetTypes.GAUGE&&updateDataMetric();scope.selectedWidgetProperties&&(scope.additionalStyles.transparent=scope.selectedWidgetProperties.backgroundAlpha?!1:!0)}function updateDataMetric(){ADPropertiesPanel.DEBUG&&ADLoggerService.warn("PropertiesPanel.updateDataMetric Debug: Called with scope.currentDashboard "+Util.stringifyWithIndent(scope.currentDashboard)),ADPropertiesPanel.DEBUG&&ADLoggerService.warn("PropertiesPanel.updateDataMetric Debug: Called with scope.selectedWidgetProperties "+Util.stringifyWithIndent(scope.selectedWidgetProperties));var wmmc=dashboardHelper.getWidgetsMetricMatchCriterias(scope.currentDashboard,{widgetGuid:scope.selectedWidgetProperties.widgetGuid}),wmmcUiStates=dashboardHelper.getAllWidgetMetricMatchCriteriaUIStates(scope.currentDashboard,scope.selectedWidgetProperties.widgetGuid);ADPropertiesPanel.DEBUG&&ADLoggerService.warn("PropertiesPanel.updateDataMetric Debug: Called with scope.currentDashboard "+Util.stringifyWithIndent(scope.currentDashboard)),ADPropertiesPanel.DEBUG&&ADLoggerService.warn("PropertiesPanel.updateDataMetric Debug: Called with scope.selectedWidgetProperties "+Util.stringifyWithIndent(scope.selectedWidgetProperties)),ADPropertiesPanel.DEBUG&&ADLoggerService.warn("PropertiesPanel.updateDataMetric Debug: Called with wmmcs "+Util.stringifyWithIndent(wmmc)),ADPropertiesPanel.DEBUG&&ADLoggerService.warn("PropertiesPanel.updateDataMetric Debug: Called with wmmcUiStates "+Util.stringifyWithIndent(wmmcUiStates)),wmmcUiStates&&wmmcUiStates.length>0?(scope.selectedSeries=wmmcUiStates[0].widgetMetricMatchCriteriaName,scope.dataMetricLabel=scope.selectedWidgetProperties.dataMetricName,ADPropertiesPanel.DEBUG&&ADLoggerService.warn("PropertiesPanel.updateDataMetric Debug: Set scope.dataMetricLabel to "+scope.dataMetricLabel)):(scope.selectedSeries=null,scope.dataMetricLabel=null)}function updateSeriesGridData(){scope.gridOptions.dataProvider=dashboardHelper.getAllWidgetMetricMatchCriteriaUIStates(scope.currentDashboard,scope.selectedWidgetProperties.widgetGuid)}var readableWidgetNames={METRIC_LABEL:"Metric Value",PIE:"Pie",GAUGE:"Gauge",TIMESERIES_GRAPH:"Graph",STREAMING_GRAPH:"Streaming Graph",STATUS_LIGHT:"Status Light",LIST:"List",LOG_TAIL:"Log Tail"};scope.gridOptions=new GridOptions,scope.uiData=uiData.getData(scope.controller.isTemplate(),scope.controller.isNodeTemplate()),scope.$on(SeriesSelectorController.SERIES_SELECTION_EVENT,function(e,data){"add"==data.mode||"edit"==data.mode?(ADPropertiesPanel.DEBUG&&ADLoggerService.warn("PropertiesPanel.on.SERIES_SELECTION_EVENT Debug: Called with mode add or edit and data "+Util.stringifyWithIndent(data)),updateSeriesGridData()):"set"==data.mode?(ADPropertiesPanel.DEBUG&&ADLoggerService.warn("PropertiesPanel.on.SERIES_SELECTION_EVENT Debug: Called with mode set and data "+Util.stringifyWithIndent(data)),updateDataMetric()):ADLoggerService.warn("PropertiesPanel.on.SERIES_SELECTION_EVENT Warning: Event received with unknown mode. ")}),scope.$on(SeriesSelectorController.SERIES_DATA_EVENT,function(e,data){ADPropertiesPanel.DEBUG&&ADLoggerService.warn("PropertiesPanel.on.SERIES_DATA_EVENT Debug: Setting scope.dataMetricLabel to "+data.name),scope.selectedWidgetProperties.widgetGuid==data.widgetGuid&&(scope.dataMetricLabel=data.name,ViewUtil.safeApply(scope))});var columns=[GridColumn.createColumn(40,"widgetMetricMatchCriteriaName","Name",null,!0),new GridColumn({flex:.3,align:"left",dataIndex:"seriesType",sortable:!1,hidden:!0,renderer:seriesTypeRenderer,header:"Type",menuDisabled:!1}),new GridColumn({flex:.3,align:"left",dataIndex:"colorPalette",sortable:!1,renderer:colorPaletteRenderer,header:"Color(s)",menuDisabled:!0})];scope.gridOptions.columnProvider=columns,scope.gridOptions.dataProvider=[],scope.gridOptions.sortFields=[{property:"widgetMetricMatchCriteriaName",direction:"ASC"}],scope.selectedSeries=null,scope.isSeriesSelected=function(){return null!=scope.selectedSeries},scope.gridClick=function(event){scope.selectedSeries=event.data.widgetMetricMatchCriteriaName},scope.gridDoubleClick=function(event){scope.selectedSeries=event.data.widgetMetricMatchCriteriaName,scope.openSeriesDialog("edit",event.data.widgetMetricMatchCriteriaName)},scope.getAccordionStyle=function(){return{"max-height":scope.controller.isGridCanvas()?getAccordionMaxHeight()+"px":.5*screen.height+"px","overflow-y":"auto"}},scope.$on(ADPropertiesPanel.WIDGET_DISPLAY_TYPE_CHANGE,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(args&&args.length>=2){var data=args[0],displayType=args[1],wmmc=dashboardHelper.getWidgetMetricMatchCriteriaUIStates(scope.currentDashboard,data.widgetGuid,data.widgetMetricMatchCriteriaName);wmmc.seriesType=displayType.value,scope.autoSave(wmmc.widgetGuid)}}),scope.$on(HealthRuleSelectorController.HEALTH_RULE_SELECTION_EVENT,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(args&&args.length>=1){var data=args[0];scope.selectedWidgetProperties.applicationId=data.appId,scope.selectedWidgetProperties.policyTemplateId=data.policyId,updateWidgetState(!0)}}),scope.$on(TimeRangeSelectorController.UEV_TIME_RANGE_CHANGE,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(args&&args.length>=2){var trs=args[0],isDashboardTimeRange=args[1];if(isDashboardTimeRange)return;scope.widgetTimeRange=trs,trs.type===TimeRangeSpecifierType.BETWEEN_TIMES?(scope.showWidgetCustomRange=!0,scope.widgetTimeRange.startTime=trs.startTime,scope.widgetTimeRange.endTime=trs.endTime,scope.selectedWidgetProperties.minutesBeforeAnchorTime=0,scope.selectedWidgetProperties.startTime=trs.startTime.getTime(),scope.selectedWidgetProperties.endTime=trs.endTime.getTime()):(scope.showWidgetCustomRange=!1,scope.selectedWidgetProperties.minutesBeforeAnchorTime=trs.durationInMinutes,scope.selectedWidgetProperties.startTime=0,scope.selectedWidgetProperties.endTime=0),scope.autoSave(scope.selectedWidgetProperties.widgetGuid)}}),scope.labels={},scope.openHealthRuleDialog=function(data){var opts={widgetGuid:scope.selectedWidgetProperties.widgetGuid,appId:scope.selectedWidgetProperties.applicationId?scope.selectedWidgetProperties.applicationId:null,isTemplate:scope.controller.isTemplate(),isWarRoom:scope.controller.isWarRoom(),data:data||{}};dialogService.showDialog(HealthRuleSelectorController,"app/view/customDashboard/editor/dialogs/HealthRuleSelectorController","app/view/customDashboard/editor/dialogs/HealthRuleSelector.html",opts)},scope.openEventsDialog=function(data){var eventStreamItemFilter;scope.selectedWidgetProperties.query&&scope.selectedWidgetProperties.query.eventStreamItemFilter?(eventStreamItemFilter=scope.selectedWidgetProperties.query.eventStreamItemFilter,ADPropertiesPanel.DEBUG&&ADLoggerService.warn("PropertiesPanel.openEventDialog Debug: Setting eventStreamItemFilter")):ADPropertiesPanel.DEBUG&&ADLoggerService.warn("PropertiesPanel.openEventDialog Debug: NOT setting eventStreamItemFilter");var opts={widgetGuid:scope.selectedWidgetProperties.widgetGuid,eventStreamItemFilter:eventStreamItemFilter,appId:eventStreamItemFilter?eventStreamItemFilter.applicationIds[0]:null,data:data||{}};dialogService.showDialog(EventSelectorController,"app/view/customDashboard/editor/dialogs/eventSelector/EventSelectorController","app/view/customDashboard/editor/dialogs/eventSelector/EventSelectorView.html",opts)},scope.openMetricDialog=function(data){var wmmc=_.findWhere(scope.currentDashboard.widgetsMetricMatchCriterias,{widgetGuid:scope.selectedWidgetProperties.widgetGuid}),opts={type:"metric-label",widgetGuid:scope.selectedWidgetProperties.widgetGuid,appId:wmmc?wmmc.metricMatchCriteria.applicationId:null,isTemplate:scope.controller.isTemplate(),isWarRoom:scope.controller.isWarRoom(),showRelativeMetricPath:!1,data:data||{}};dialogService.showDialog(MetricSelectorController,"app/view/customDashboard/editor/dialogs/MetricSelectorViewController","app/view/customDashboard/editor/dialogs/MetricSelectorView.html",opts)},scope.openSeriesDialog=function(mode,seriesName,singleMetricSelect){var opts,templateController,templateUrl,template;scope.isWidgetType(WidgetTypes.STREAMING_GRAPH)?(templateController=StreamingSeriesSelectorController,template="app/view/customDashboard/editor/dialogs/streamingSeriesSelector/StreamingSeriesSelectorController",templateUrl="app/view/customDashboard/editor/dialogs/streamingSeriesSelector/StreamingSeriesSelector.html"):(templateController=SeriesSelectorController,template="app/view/customDashboard/editor/dialogs/SeriesSelectorController",templateUrl="app/view/customDashboard/editor/dialogs/SeriesSelector.html"),opts={isTemplate:scope.controller.isTemplate(),isNodeTemplate:scope.controller.isNodeTemplate(),isWarRoom:scope.controller.isWarRoom(),singleMetricSelect:singleMetricSelect,seriesName:seriesName,mode:mode,dashboard:scope.currentDashboard,selectedWidgetProperties:scope.selectedWidgetProperties},dialogService.showDialog(templateController,template,templateUrl,opts)},scope.onApplyWidgetCustomTimeRange=function(){return scope.widgetTimeRange.startTime.getTime()>=scope.widgetTimeRange.endTime.getTime()?void notificationService.displayError("End Time must be later than start time",""):(scope.selectedWidgetProperties.minutesBeforeAnchorTime=0,scope.selectedWidgetProperties.startTime=scope.widgetTimeRange.startTime.getTime(),scope.selectedWidgetProperties.endTime=scope.widgetTimeRange.endTime.getTime(),void scope.autoSave(scope.selectedWidgetProperties.widgetGuid))},scope.handleSetSeries=function(){scope.openSeriesDialog("set",scope.selectedSeries,!0)},scope.handleAddSeries=function(){scope.openSeriesDialog("add")},scope.handleEditSeries=function(){scope.openSeriesDialog("edit",scope.selectedSeries)},scope.handleSelectNode=function(){require(["app/view/apm/businessTransactions/btDiscoveryTools/configurator/nodeselector/NodeSelectorController"],function(nodeselectorcontroller){var opts={multiSelect:!1,dialogHeading:scope.getString("ms_selectNodeForLogTailing"),minAgentVersion:"4.1.0.0"};dialogService.showDialog(nodeselectorcontroller.NodeSelectorController,"app/view/apm/businessTransactions/btDiscoveryTools/configurator/nodeselector/NodeSelectorController","app/view/apm/businessTransactions/btDiscoveryTools/configurator/nodeselector/nodeselector.html",opts).then(function(instance){instance.result.then(function(data){_.isArray(data)&&1==data.length&&(scope.selectedWidgetProperties.transientNodeId=data[0].componentId,scope.selectedWidgetProperties.transientNodeName=data[0].text)})})})},scope.handleDeleteSeries=function(){dashboardHelper.deleteSeries(scope.currentDashboard,scope.selectedWidgetProperties,scope.selectedSeries),scope.selectedSeries=null,updateSeriesGridData(),scope.autoSave(scope.selectedWidgetProperties.widgetGuid)},scope.handleTimeRangeTypeChange=function(){scope.selectedWidgetProperties.minutesBeforeAnchorTime=scope.currentDashboard.dashboardUIState.minutesBeforeAnchorTime,scope.selectedWidgetProperties.startTime=scope.currentDashboard.dashboardUIState.startTime,scope.selectedWidgetProperties.endTime=scope.currentDashboard.dashboardUIState.endTime,"globalTimeRange"==this.propertiesPanel.timeRangeType?scope.selectedWidgetProperties.isGlobal=!0:(scope.widgetTimeRange.durationInMinutes=scope.dashboardTimeRange.durationInMinutes,scope.widgetTimeRange.startTime=scope.dashboardTimeRange.startTime,scope.widgetTimeRange.endTime=scope.dashboardTimeRange.endTime,scope.widgetTimeRange.type=scope.dashboardTimeRange.type,scope.selectedWidgetProperties.isGlobal=!1),scope.autoSave(scope.selectedWidgetProperties.widgetGuid)},scope.widgetProperties={},scope.$watch("selectedWidgetProperties",function(){scope.selectedSeries=null,updateWidgetState(!1)}),scope.handleXPosChange=function(){null!=scope.currentDashboard&&scope.selectedWidgetProperties.x>scope.currentDashboard.dashboardUIState.width-10&&(scope.selectedWidgetProperties.x=scope.currentDashboard.dashboardUIState.width>scope.selectedWidgetProperties.width?scope.currentDashboard.dashboardUIState.width-scope.selectedWidgetProperties.width:0)},scope.handleYPosChange=function(){null!=scope.currentDashboard&&scope.selectedWidgetProperties.y>scope.currentDashboard.dashboardUIState.height-10&&(scope.selectedWidgetProperties.y=scope.currentDashboard.dashboardUIState.height>scope.selectedWidgetProperties.height?scope.currentDashboard.dashboardUIState.height-scope.selectedWidgetProperties.height:0)},scope.handleLegendPositionChange=function(value){null!=value&&(scope.selectedWidgetProperties.legendPosition=value,scope.autoSave(scope.selectedWidgetProperties.widgetGuid))},scope.handleHideAxisChange=function(value){null!=value&&(scope.selectedWidgetProperties.compactMode=value,scope.autoSave(scope.selectedWidgetProperties.widgetGuid))},scope.handleAxisTypeChange=function(value){null!=value&&(scope.selectedWidgetProperties.axisType=value?GraphAxisType.LOGARITHMIC:GraphAxisType.LINEAR,scope.autoSave(scope.selectedWidgetProperties.widgetGuid))},scope.handleShowLegendChange=function(value){null!=value&&(scope.selectedWidgetProperties.showLegend=value,scope.selectedWidgetProperties.showLegend===!0&&(null==scope.selectedWidgetProperties.legendPosition&&(scope.selectedWidgetProperties.legendPosition="POSITION_BOTTOM"),(null==scope.selectedWidgetProperties.legendColumnCount||0==scope.selectedWidgetProperties.legendColumnCount)&&(scope.selectedWidgetProperties.legendColumnCount=2)),scope.autoSave(scope.selectedWidgetProperties.widgetGuid))},scope.isDisableNoColumnsField=function(){return null==scope.selectedWidgetProperties?!0:!scope.selectedWidgetProperties.showLegend||"POSITION_BOTTOM"!=scope.selectedWidgetProperties.legendPosition},scope.handleEnableBorders=function(value){null!=value&&(scope.selectedWidgetProperties.borderEnabled=value,scope.selectedWidgetProperties.borderEnabled===!0&&0==scope.selectedWidgetProperties.borderThickness&&(scope.selectedWidgetProperties.borderThickness=1),scope.autoSave(scope.selectedWidgetProperties.widgetGuid))},scope.handlePropertyUpdate=function(){scope.controller.ignorePropertyChanges||scope.autoSave(scope.selectedWidgetProperties.widgetGuid)},scope.onStartLogTailing=function(){scope.autoSave(scope.selectedWidgetProperties.widgetGuid),$rootScope.$broadcast(LogTailController.START_TAILING_LOG,scope.selectedWidgetProperties.widgetGuid)},scope.onShowEventsChange=function(value){scope.selectedWidgetProperties.showEvents=value,scope.autoSave(scope.selectedWidgetProperties.widgetGuid)},scope.getEventsQueryButtonLabel=function(){return scope.getString(scope.selectedWidgetProperties.query&&scope.selectedWidgetProperties.query.eventStreamItemFilter?"ms_editQuery":"ms_setQuery")},scope.additionalStyles={},scope.$watch("additionalStyles",function(){scope.selectedWidgetProperties.backgroundAlpha=scope.additionalStyles.transparent?0:1},!0),scope.handleFunctionChange=function(functionType){scope.selectedWidgetMetricFunction.type=functionType,dashboardHelper.setMetricFunctionType(scope.currentDashboard,scope.selectedWidgetProperties.widgetGuid,functionType.value),scope.autoSave(scope.selectedWidgetProperties.widgetGuid)},scope.handleDrillDownActionType=function(drillDownType){scope.selectedWidgetProperties.useMetricBrowserAsDrillDown=drillDownType.value,scope.autoSave(scope.selectedWidgetProperties.widgetGuid)},scope.getReadableWidgetName=function(type){return readableWidgetNames[type]||type},scope.getLabel=function(id){return scope.labels[id]||"Loading..."},scope.controller.isAbsoluteCanvas()&&iElement.draggable({containment:"parent",handle:".modal-header"}),scope.isPSOpen=!1,scope.isChartOpen=!0,scope.isIFrameOpen=!0,scope.isLabelOpen=!0,scope.isImageOpen=!0,scope.isMetricOpen=!0,scope.isHealthRuleOpen=!0,scope.isLogTailOpen=!0,scope.minimized=!1,scope.toggleMinimize=function(){return scope.controller.isGridCanvas()?void $rootScope.$broadcast(ADPropertiesPanel.HIDE_PROPERTIES_PANEL):void(scope.minimized=!scope.minimized)},scope.isWidgetType=function(types){return types=Util.getArray(types),_.some(types,function(type){return scope.selectedWidgetProperties.widgetType===type})},scope.showTimeRangeOption=function(){return scope.isWidgetType([WidgetTypes.TIMESERIES_GRAPH,WidgetTypes.PIE,WidgetTypes.GAUGE])?!0:!1}}}}return ADPropertiesPanel.DEBUG=!1,ADPropertiesPanel.WIDGET_DISPLAY_TYPE_CHANGE="widget-display-type-change",ADPropertiesPanel.HIDE_PROPERTIES_PANEL="hide-properties-panel",ADPropertiesPanel}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-properties-panel"),ADPropertiesPanel),define("app/view/customDashboard/editor/propertiesPanel/PropertiesPanel",function(){});var CopyCDDialogController=function(){function CopyCDDialogController($scope,$rootScope,resourceManager,$modalInstance,dialogData,notificationService){function isDuplicateName(){return _.some(dialogData.dataProvider,function(data){return data.name==$scope.inputName?!0:!1})}this.$scope=$scope,this.$rootScope=$rootScope,this.resourceManager=resourceManager;var dashboard=dialogData.dashboard;$scope.inputName="Copy of "+dashboard.name+" - "+DateTimeUtil.getDateTimeString(),$scope.dashboard=dashboard,$scope.close=function(){$modalInstance.close()},$scope.submit=function(){return isDuplicateName()?void notificationService.displayError("Name '"+$scope.inputName+"' already in use.",""):_.isEmpty($scope.inputName)?void notificationService.displayError("Dashboard name is required",""):$scope.inputName>100?void notificationService.displayError("Dashboard name cannot exceed 100 characters",""):($rootScope.$broadcast(CopyCDDialogController.COPY_CD_EVENT,{name:$scope.inputName,id:$scope.dashboard.id}),void $modalInstance.close())}}return CopyCDDialogController.COPY_CD_EVENT="cd-cd-event",CopyCDDialogController.$inject=["$scope","$rootScope","resourceManager","$modalInstance","dialogData","notificationService"],CopyCDDialogController}();define("app/view/customDashboard/listView/dialogs/CopyCDDialogController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},CDImportDialogController=function(_super){function CDImportDialogController($scope,resourceManager,injectorService,dialog,notificationService,customDashboardViewService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.injectorService=injectorService,this.dialog=dialog,this.notificationService=notificationService,this.customDashboardViewService=customDashboardViewService,this.fileSelected=!1,this.$scope.controller=this,this.init()}return __extends(CDImportDialogController,_super),CDImportDialogController.prototype.close=function(){this.dialog.close()},CDImportDialogController.prototype.fileNameChanged=function(){this.fileSelected=!0,ViewUtil.safeApply(this.$scope)},CDImportDialogController.prototype.uploadComplete=function(response){_.isObject(response)?(this.response=response,response.success&&this.customDashboardViewService.refreshDashboardList()):this.handleInternalServerError()},CDImportDialogController.prototype.init=function(){this.csrfTokenValue=BrowserUtils.getCookie("X-CSRF-TOKEN")},CDImportDialogController.prototype.handleInternalServerError=function(){this.notificationService.displayError(this.getString("ms_dashboardImportErrorMsg"),this.getString("ms_dashboardImportErrorTitle")),this.dialog.close()},CDImportDialogController.$inject=["$scope","resourceManager","injectorService","dialog","notificationService","customDashboardViewService"],CDImportDialogController}(ControllerBase);define("app/view/customDashboard/import/CDImportDialogController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/customDashboard/templates/node/NodeDashboardTemplateController",["require","exports"],function(require,exports){var NodeDashboardTemplateController=function(_super){function NodeDashboardTemplateController($scope,$rootScope,$http,$location,$log,$dialog,resourceManager,notificationService,injectorService,navigationService,dashboardTemplateUiService,applicationViewService,nodeViewService,componentViewService){_super.call(this,$scope,$rootScope,$location,resourceManager,notificationService,injectorService,applicationViewService),this.$scope=$scope,this.$rootScope=$rootScope,this.$http=$http,this.$location=$location,this.$log=$log,this.$dialog=$dialog,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.navigationService=navigationService,this.dashboardTemplateUiService=dashboardTemplateUiService,this.applicationViewService=applicationViewService,this.nodeViewService=nodeViewService,this.componentViewService=componentViewService,this.$scope.controller=this,this.urlParams=new URLParams($location.path()),this.applicationId=parseInt(this.urlParams.application()),this.nodeId=parseInt(this.urlParams.node()),this.dashboardId=parseInt(this.urlParams.dashboard()),this.nodeNavigationTabs=null,this.locationEntries=null,this.initNodeTemplateView()}return __extends(NodeDashboardTemplateController,_super),NodeDashboardTemplateController.prototype.initLocationBar=function(){var _this=this,locationEntries=[{label:this.applicationName,clickFn:function(){_this.applicationViewService.viewApplicationDashboard(_this.applicationId)}},{label:"App Servers",clickFn:function(){_this.applicationViewService.viewAppInfrastructure(_this.applicationId)}},{label:this.componentName,clickFn:function(){_this.componentViewService.viewComponent(_this.applicationId,_this.componentId)}},{label:this.nodeName}];this.locationEntries=locationEntries,this.setLocationBarConfigData(this.locationEntries,!0)},NodeDashboardTemplateController.prototype.initNodeTemplateView=function(){var _this=this;if(this.applicationId&&this.nodeId){var resultHandler=function(response){var dashboardTemplateViewData=_this.dashboardTemplateUiService.getDashboardNodeTemplateData_response(response);if(Util.isDefAndNotNull(dashboardTemplateViewData.application)){var selectedTab=NodeViewService.Tabs.CUSTOM_DASHBOARDS,component=dashboardTemplateViewData.applicationComponent,node=dashboardTemplateViewData.applicationComponentNode;_this.applicationName=dashboardTemplateViewData.application.name,_this.componentId=node.componentId,_this.componentName=node.applicationComponentName,_this.nodeName=node.name,_this.nodeViewService.getNodeNavigationTabs(_this.applicationId,component,node,selectedTab,_this.locationEntries).then(function(navigationTabs){_this.nodeNavigationTabs=navigationTabs,_this.initLocationBar();var templateContext={};templateContext.appId=_this.applicationId,templateContext.componentId=_this.componentId,templateContext.nodeId=_this.nodeId,Util.isDefAndNotNull(_this.dashboardId)&&(templateContext.dashboardId=_this.dashboardId),templateContext.entityType=EntityType.APPLICATION_COMPONENT_NODE,_this.context=templateContext})}},dashboardTemplateViewDataPromise=this.dashboardTemplateUiService.getDashboardNodeTemplateData(this.applicationId,this.nodeId);dashboardTemplateViewDataPromise.then(resultHandler)}},NodeDashboardTemplateController.prototype.fetchData=function(){this.initLocationBar()},NodeDashboardTemplateController.$inject=["$scope","$rootScope","$http","$location","$log","$dialog","resourceManager","notificationService","injectorService","navigationService","dashboardTemplateUiService","applicationViewService","nodeViewService","componentViewService"],NodeDashboardTemplateController}(MainAppViewControllerBase);exports.NodeDashboardTemplateController=NodeDashboardTemplateController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/customDashboard/templates/tier/TierDashboardTemplateController",["require","exports"],function(require,exports){var TierDashboardTemplateController=function(_super){function TierDashboardTemplateController($scope,$rootScope,$http,$location,$log,$dialog,resourceManager,notificationService,injectorService,navigationService,dashboardTemplateUiService,applicationViewService,componentViewService){_super.call(this,$scope,$rootScope,$location,resourceManager,notificationService,injectorService,applicationViewService),this.$scope=$scope,this.$rootScope=$rootScope,this.$http=$http,this.$location=$location,this.$log=$log,this.$dialog=$dialog,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.navigationService=navigationService,this.dashboardTemplateUiService=dashboardTemplateUiService,this.applicationViewService=applicationViewService,this.componentViewService=componentViewService,this.$scope.controller=this,this.urlParams=new URLParams($location.path()),this.applicationId=parseInt(this.urlParams.application()),this.componentId=parseInt(this.urlParams.component()),this.dashboardId=parseInt(this.urlParams.dashboard()),this.componentNavigationTabs=null,this.locationEntries=null,this.initTierTemplateView()}return __extends(TierDashboardTemplateController,_super),TierDashboardTemplateController.prototype.initLocationBar=function(){var _this=this,locationEntries=[{label:this.applicationName,clickFn:function(){_this.applicationViewService.viewApplicationDashboard(_this.applicationId)}},{label:"App Servers",clickFn:function(){_this.applicationViewService.viewAppInfrastructure(_this.applicationId)}},{label:this.componentName,clickFn:function(){_this.componentViewService.viewComponent(_this.applicationId,_this.componentId)}}];this.locationEntries=locationEntries,this.setLocationBarConfigData(this.locationEntries,!0)},TierDashboardTemplateController.prototype.initTierTemplateView=function(){var _this=this;if(this.applicationId&&this.componentId){var resultHandler=function(response){var dashboardTemplateViewData=_this.dashboardTemplateUiService.getDashboardComponentTemplateData_response(response);if(Util.isDefAndNotNull(dashboardTemplateViewData.application)){var selectedTab=ComponentViewService.Tabs.CUSTOM_DASHBOARDS,component=dashboardTemplateViewData.applicationComponent;_this.applicationName=dashboardTemplateViewData.application.name,_this.componentName=component.name,_this.componentNavigationTabs=_this.componentViewService.getComponentNavigationTabs(_this.applicationId,component,selectedTab),_this.initLocationBar();var templateContext={};templateContext.appId=_this.applicationId,templateContext.componentId=_this.componentId,templateContext.nodeId=void 0,Util.isDefAndNotNull(_this.dashboardId)&&(templateContext.dashboardId=_this.dashboardId),templateContext.entityType=EntityType.APPLICATION_COMPONENT,_this.context=templateContext}},dashboardTemplateViewDataPromise=this.dashboardTemplateUiService.getDashboardComponentTemplateData(this.applicationId,this.componentId);dashboardTemplateViewDataPromise.then(resultHandler)}},TierDashboardTemplateController.prototype.fetchData=function(){this.initLocationBar()},TierDashboardTemplateController.$inject=["$scope","$rootScope","$http","$location","$log","$dialog","resourceManager","notificationService","injectorService","navigationService","dashboardTemplateUiService","applicationViewService","componentViewService"],TierDashboardTemplateController}(MainAppViewControllerBase);exports.TierDashboardTemplateController=TierDashboardTemplateController});var CustomDashBoardDisplayType=function(){function CustomDashBoardDisplayType(){}return CustomDashBoardDisplayType.MOBILE="MOBILE",CustomDashBoardDisplayType.TABLET="TABLET",CustomDashBoardDisplayType.DESKTOP="DESKTOP",CustomDashBoardDisplayType}();define("app/view/customDashboard/editor/CustomDashboardClassEnums",function(){});var CustomDashboardEditorDirective=function(){function CustomDashboardEditorDirective(){return{restrict:"E",replace:!1,templateUrl:"app/view/customDashboard/editor/CustomDashboardEditor.html",scope:{adTemplate:"@",adDashboardId:"@",adContext:"="},controller:"CustomDashboardEditorController"}}return CustomDashboardEditorDirective.$inject=[],CustomDashboardEditorDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-custom-dashboard-editor"),CustomDashboardEditorDirective),define("app/view/customDashboard/editor/CustomDashboardEditorDirective",function(){});var CustomDashboardTemplateDirective=function(){function CustomDashboardTemplateDirective($location,dashboardService,dashboardTemplateUiService,dashboardTemplateViewService,navigationService,customDashboardViewService){return{restrict:"E",replace:!1,templateUrl:"app/view/customDashboard/editor/CustomDashboardTemplate.html",scope:{adContext:"="},link:function(scope){function isTierDashboard(){return!Util.isDefAndNotNull(scope.adContext.nodeId)}function sortDashboard(dash1,dash2){return dash1.name&&dash2.name?dash1.name.localeCompare(dash2.name):-1}scope.isValidDashboardSelected=function(){var dashboardId=Util.get(scope.selectedDashboard,"id");return _.isNumber(dashboardId)},scope.hasDashboards=!0,scope.onHelpCustomDashTemplates=function(){ExternalUrls.openHelp(ExternalUrls.HELP_URL_CUSTOM_DASH_TEMPLATES)},scope.viewCustomDashManage=function(){var applicationId,params=new URLParams;if(params.hasParam(UrlConstants.APPLICATION_ID)){applicationId=params.getNumberParam(UrlConstants.APPLICATION_ID);var params=new URLParams;params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_CUSTOM_DASH_MANAGE),params.setParam(UrlConstants.APPLICATION_ID,applicationId.toString()),navigationService.navigateTo(params.toString())}},scope.$on(CDPropertiesDialogController.CD_CREATE_EVENT,function(e,data){var cdUIState={height:data.height,width:data.width,canvasType:data.canvasType,templateEntityType:_.isUndefined(scope.adContext.nodeId)?EntityType.APPLICATION_COMPONENT:EntityType.APPLICATION_COMPONENT_NODE,refreshInterval:1e3*data.refreshIntervalInSecs,backgroundColor:data.backgroundColor,minutesBeforeAnchorTime:15},dashboard={name:data.name,dashboardUIState:cdUIState},dashboardEntities=[{entityId:scope.adContext.componentId,entityType:EntityType.APPLICATION_COMPONENT}],dashboardTemplate={customDashboard:dashboard,associatedEntities:dashboardEntities};cdUIState.isTemplate=!0,dashboardTemplateUiService.createDashboardTemplate(dashboardTemplate).then(function(response){var newDashTemplate=dashboardTemplateUiService.createDashboardTemplate_response(response);
dashboardTemplateViewService.viewDashboardTemplateTierOrNode(scope.adContext.appId,scope.adContext.componentId,scope.adContext.nodeId,newDashTemplate.customDashboard.id)})}),scope.viewCustomDashboardTemplateDialog=function(){customDashboardViewService.viewCreateCustomDashboard()},scope.viewAssociateCustomDashboardDialog=function(){dashboardTemplateViewService.viewAssociateCustomDashboardDialog(scope,scope.adContext.componentId,isTierDashboard())},scope.getAllDashboardTemplatesForThisTier=function(){var isTierDashboard=scope.adContext.entityType===EntityType.APPLICATION_COMPONENT;dashboardTemplateUiService.getAllDashboardTemplatesByTier(scope.adContext.componentId,isTierDashboard).then(function(data){scope.dashboards=_.map(data,function(d){return{id:d.id,name:Util.sanitize(d.name),value:d.id}}).sort(sortDashboard);var hasValidDashboardInContext=!1;if(Util.isDefAndNotNull(scope.adContext.dashboardId)){var currentDashboard=_.find(scope.dashboards,function(dashboard){return scope.adContext.dashboardId==dashboard.id});Util.isDefAndNotNull(currentDashboard)&&(scope.selectedDashboard=currentDashboard,hasValidDashboardInContext=!0)}if(!hasValidDashboardInContext)if(scope.dashboards.length>0)scope.selectedDashboard=scope.dashboards[0];else{scope.hasDashboards=!1;var params=new URLParams($location.path());params.removeParam(UrlConstants.CUSTOM_DASHBOARD_ID),URLUtil.setLocationHashNoHistory(params.toString())}})},scope.menuOptionsWithCallbacks=[{name:"Create Dashboard",callback:scope.viewCustomDashboardTemplateDialog},{name:"Associate Dashboards",callback:scope.viewAssociateCustomDashboardDialog},{name:"Manage Dashboards",callback:scope.viewCustomDashManage}],scope.$watch("adContext",function(value){Util.isDefAndNotNull(value)&&(scope.adContext=value,scope.getAllDashboardTemplatesForThisTier())})}}}return CustomDashboardTemplateDirective.$inject=["$location","dashboardService","dashboardTemplateUiService","dashboardTemplateViewService","navigationService","customDashboardViewService"],CustomDashboardTemplateDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-custom-dashboard-template"),CustomDashboardTemplateDirective),define("app/view/customDashboard/editor/CustomDashboardTemplateDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/customDashboard/warRoom/WarRoomController",["require","exports"],function(require,exports){var WarRoomController=function(_super){function WarRoomController($scope,$rootScope,$location,resourceManager,notificationService,injectorService,warRoomUiService,warRoomViewService,applicationViewService,applicationUiService){_super.call(this,$scope,$rootScope,$location,resourceManager,notificationService,injectorService,applicationViewService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.warRoomUiService=warRoomUiService,this.warRoomViewService=warRoomViewService,this.applicationViewService=applicationViewService,this.applicationUiService=applicationUiService,this.warRoomDropdownList=[],this.warRoomDropdownSelectedItem=null,this.pageState=0,this.warRoomSessions=[],this.joinedWarRoom=!1,this.isListMode=!0,this.warRoomListHeight=0,this.$scope.controller=this,this.urlParams=this.getCurrentUrlParams(),this.applicationId=this.getApplicationIdFromUrl(),this.warRoomKey=this.urlParams.warRoomKey(),this.isListMode=this.urlParams.location()===NavigationDataConstants.APP_WARROOM_LIST1,this.locationEntries=null,this.init()}return __extends(WarRoomController,_super),WarRoomController.prototype.onLocationBarRefresh=function(){this.hasJoinedWarRoom()?this.warRoomViewService.viewWarRoom(this.applicationId,this.warRoomDropdownSelectedItem.key):this.fetchData()},WarRoomController.prototype.fetchData=function(){var _this=this;this.applicationUiService.getApplicationById(this.applicationId).then(function(response){var application=_this.applicationUiService.getApplicationById_response(response);_this.applicationName=application.name,_this.initLocationBar(),_this.initLayoutVariables();var warRoomMode=_this.urlParams.getParam(UrlConstants.WARROOM_JOIN);return Util.isDefAndNotNull(warRoomMode)&&"true"===warRoomMode?void(Util.isDefAndNotNull(_this.warRoomKey)&&_this.warRoomUiService.joinWarRoom(_this.warRoomKey).then(function(data){var wrSessions=_this.warRoomUiService.getWarRoomsForCurrentUser_response(data);_this.refreshWarRooms(wrSessions),_this.warRoomViewService.removeJoinParameter()},function(){_this.warRoomViewService.showWarRoomEndedError(_this.getApplicationIdFromUrl())})):(_this.warRoomDropdownSelectedItem=null,void _this.warRoomUiService.getWarRoomsForCurrentUser(application.id).then(function(data){var wrSessions=_this.warRoomUiService.getWarRoomsForCurrentUser_response(data);_this.refreshWarRooms(wrSessions),_this.pageState=1}))})},WarRoomController.prototype.hasWarRooms=function(){return this.warRoomSessions.length>0},WarRoomController.prototype.hasJoinedWarRoom=function(){return this.joinedWarRoom},WarRoomController.prototype.joinWarRoom=function(index){this.warRoomDropdownSelectedItem=this.warRoomDropdownList[index],this.joinedWarRoom=!0,this.isListMode&&this.warRoomViewService.viewWarRoom(this.applicationId,this.warRoomDropdownSelectedItem.key)},WarRoomController.prototype.openCreateWarRoomSessionDialog=function(){this.warRoomViewService.viewCreateWarRoomSessionDialog()},WarRoomController.prototype.getElapsedTime=function(timestamp){return DateTimeUtil.getElapsedTime(timestamp)},WarRoomController.prototype.onWarRoomSessionsHelp=function(){ExternalUrls.openHelp(ExternalUrls.HELP_URL_LEARN_WAR_ROOM)},WarRoomController.prototype.onManageWarRoomTemplates=function(){this.warRoomViewService.viewManageWarRoomTemplates(this.getApplicationIdFromUrl())},WarRoomController.prototype.getWarRoomListStyle=function(){return{"max-height":this.warRoomListHeight}},WarRoomController.prototype.init=function(){this.setupListeners(),this.createMenuOptions(),this.fetchData()},WarRoomController.prototype.initLocationBar=function(){var _this=this,locationEntries=[{label:this.applicationName,clickFn:function(){_this.applicationViewService.viewApplicationDashboard(_this.applicationId)}},{label:"Troubleshoot",clickFn:function(){_this.applicationViewService.viewAppTroubleshoot(_this.applicationId)}},{label:ResourceManager.instance().getString("ui","ms_warRoomNavItemLabel")}];this.locationEntries=locationEntries;var config=this.createLocationBarConfigData(this.locationEntries,!0);config.hideTimeRange=!0,this.setLocationBarConfig(config)},WarRoomController.prototype.initLayoutVariables=function(){var height=$("#appContainer").height()-($(".adsMainTitleBarContainerRow").height()+$("#topMenuBarContainerDivId").height());this.warRoomListHeight=Math.floor(.55*height)},WarRoomController.prototype.setupListeners=function(){var _this=this;this.$scope.$on(EventConstants.UEV_LAYOUT_CHANGED,function(){_this.initLayoutVariables()})},WarRoomController.prototype.createMenuOptions=function(){var _this=this;this.menuOptionsWithCallbacks=[{name:this.getString("ms_warRoomStartLabel"),callback:function(){_this.openCreateWarRoomSessionDialog()}}]},WarRoomController.prototype.refreshWarRooms=function(warRoomSessions){if(void 0===warRoomSessions&&(warRoomSessions=[]),this.warRoomSessions=warRoomSessions,warRoomSessions.length>0){this.warRoomDropdownList=_.map(warRoomSessions,function(warRoom){var menuItem={};return menuItem.id=warRoom.customDashboard.id,menuItem.key=warRoom.warRoomKey,menuItem.name=warRoom.name,menuItem}),_.each(warRoomSessions,function(warRoom){for(var i=0;i<warRoom.participants.length;i++)if(warRoom.participants[i].participantName===warRoom.presenterUserName){_.extend(warRoom,{presenterDisplayName:warRoom.participants[i].participantDisplayName});break}}),this.warRoomDropdownSelectedItem=this.warRoomDropdownList[0];var warRoomKey=this.warRoomViewService.getWarRoomKeyFromUrl();if(Util.isDefAndNotNull(warRoomKey)&&warRoomKey.length>0)for(var i=0;i<this.warRoomDropdownList.length;i++)this.warRoomDropdownList[i].key===warRoomKey&&(this.warRoomDropdownSelectedItem=this.warRoomDropdownList[i],this.joinedWarRoom=!0)}},WarRoomController.prototype.isLoadingState=function(){return 0===this.pageState},WarRoomController.prototype.isWarRoomsLoadedState=function(){return 1===this.pageState},WarRoomController.prototype.isSessionEndedState=function(){return 2===this.pageState},WarRoomController.$inject=["$scope","$rootScope","$location","resourceManager","notificationService","injectorService","warRoomUiService","warRoomViewService","applicationViewService","applicationUiService"],WarRoomController}(MainAppViewControllerBase);exports.WarRoomController=WarRoomController;var WarRoomPageState;!function(WarRoomPageState){WarRoomPageState[WarRoomPageState.LOADING=0]="LOADING",WarRoomPageState[WarRoomPageState.WARROOMS_LOADED=1]="WARROOMS_LOADED",WarRoomPageState[WarRoomPageState.WARROOM_SESSION_ENDED=2]="WARROOM_SESSION_ENDED"}(WarRoomPageState||(WarRoomPageState={}))});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},WarRoomEditorController=function(_super){function WarRoomEditorController($scope,$rootScope,$location,resourceManager,$dialog,notificationService,dashboardService,dashboardHelper,userUiService,$window,$timeout,uiData,userPreferenceUiService,userService,customDashboardViewService,dashboardLiveUpdateService,dashboardShareService,warRoomUiService,warRoomViewService,dialogService){_super.call(this,$scope,$rootScope,$location,resourceManager,$dialog,notificationService,dashboardService,dashboardHelper,userUiService,$window,$timeout,uiData,userPreferenceUiService,userService,customDashboardViewService,dashboardLiveUpdateService,dashboardShareService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.$dialog=$dialog,this.notificationService=notificationService,this.dashboardService=dashboardService,this.dashboardHelper=dashboardHelper,this.userUiService=userUiService,this.$window=$window,this.$timeout=$timeout,this.uiData=uiData,this.userPreferenceUiService=userPreferenceUiService,this.userService=userService,this.customDashboardViewService=customDashboardViewService,this.dashboardLiveUpdateService=dashboardLiveUpdateService,this.dashboardShareService=dashboardShareService,this.warRoomUiService=warRoomUiService,this.warRoomViewService=warRoomViewService,this.dialogService=dialogService,this.isPresenter=!1,this.elapsedTime="00:00:00",this.isRightPanelMinimized=!1,this.notesHeight=0,this.firstTime=!0,this.initialized=!1,$scope.controller=this,this.setupListeners(),this.setupScopeFunctions(),this.init()}return __extends(WarRoomEditorController,_super),WarRoomEditorController.prototype.endSessionDialog=function(){var _this=this;this.dialogService.showConfirmation("End War Room","Are you sure you want to end this War Room?",function(){_this.endSession()},null,"End War Room")},WarRoomEditorController.prototype.endSession=function(){var _this=this;this.warRoomUiService.endWarRoom(this.warRoomSession.warRoomKey).then(function(){_this.warRoomViewService.viewWarRoomList(_this.getApplicationIdFromUrl())})},WarRoomEditorController.prototype.getPropertiesPanelStyle=function(){return{padding:0,height:$(window).height()+"px","background-color":"#EBEDF0","z-index":200}},WarRoomEditorController.prototype.getRightPanelMinimizeButtonStyle=function(){var canvasHeight=$(".canvas-column").height();return this.isRightPanelMinimized?{right:0,height:canvasHeight}:{right:362,height:canvasHeight}},WarRoomEditorController.prototype.toggleRightPanel=function(){this.isRightPanelMinimized=!this.isRightPanelMinimized,this.isRightPanelMinimized&&this.dashboardHelper.rescaleHighcharts(300)},WarRoomEditorController.prototype.isRightPanelOrPropertiesShown=function(){return!this.isRightPanelMinimized},WarRoomEditorController.prototype.onLocationChange=function(e,newUrl){var newUrlParams=new URLParams(WebUtil.getPath(newUrl)),dashboardMode=newUrlParams.getParam(UrlConstants.CUSTOM_DASHBOARD_MODE);if(newUrlParams.getParam(UrlConstants.LOCATION)==NavigationDataConstants.APP_WARROOM_DASH&&""===dashboardMode){var params=new URLParams(this.$location.path());return params.setParam(UrlConstants.WARROOM_KEY,this.$scope.adWarRoomKey),this.$scope.editMode?params.setParam(UrlConstants.CUSTOM_DASHBOARD_MODE,CustomDashboardEditorController.MODE_EDIT):params.setParam(UrlConstants.CUSTOM_DASHBOARD_MODE,CustomDashboardEditorController.MODE_VIEW),void URLUtil.setLocationHashNoHistory(params.toString())}},WarRoomEditorController.prototype.init=function(){var _this=this;this.startTime=new Date,this.$scope.setupAutoSave(5e3),this.setupLiveUpdate(),this.userUiService.getCurrentUserObject().then(function(data){var user=_this.userUiService.getCurrentUserObject_response(data);_this.username=user.name,_this.initialized=!0,_this.$scope.getDashboard()}),this.$timeout(function(){_this.setElapsedTimeTimer()},1e3)},WarRoomEditorController.prototype.handleShareWarRoom=function(){var _this=this;this.isWarRoomShared()||this.warRoomUiService.getWarRoomSharedEntityState(this.warRoomSession.warRoomKey).then(function(response){var state=_this.warRoomUiService.getWarRoomSharedEntityState_response(response);_this.sharedStatus=state,state&&null!=state.securityToken?state.sharingRevoked?(state.sharingRevoked=!1,_this.warRoomUiService.updateWarRoomSharedEntityState(state,_this.warRoomSession.warRoomKey).then(function(response){_this.sharedStatus=_this.warRoomUiService.updateWarRoomDashboard_response(response),_this.notificationService.displayMessage(_this.getString("ms_shareWarRoomSuccessful"),"")},function(){_this.notificationService.displayError(_this.getString("ms_shareWarRoomError"),"")})):_this.notificationService.displayMessage(_this.getString("ms_shareWarRoomAlreadyShared"),""):_this.warRoomUiService.shareWarRoom(_this.warRoomSession.warRoomKey).then(function(response){_this.sharedStatus=_this.warRoomUiService.shareWarRoom_response(response),_this.notificationService.displayMessage(_this.getString("ms_shareWarRoomSuccessful"),"")},function(){_this.notificationService.displayError(_this.getString("ms_shareWarRoomError"),"")})})},WarRoomEditorController.prototype.handleStopSharingWarRoom=function(){var _this=this;this.isWarRoomShared()&&this.warRoomUiService.getWarRoomSharedEntityState(this.warRoomSession.warRoomKey).then(function(response){var state=_this.warRoomUiService.getWarRoomSharedEntityState_response(response);_this.sharedStatus=state,state&&null!=state.securityToken?state.sharingRevoked?_this.notificationService.displayMessage(_this.getString("ms_stopSharingWarRoomAlreadyNotShared"),""):(state.sharingRevoked=!0,_this.warRoomUiService.updateWarRoomSharedEntityState(state,_this.warRoomSession.warRoomKey).then(function(response){_this.sharedStatus=_this.warRoomUiService.updateWarRoomDashboard_response(response),_this.notificationService.displayMessage(_this.getString("ms_stopSharingWarRoomSuccessful"),"")},function(){_this.notificationService.displayError(_this.getString("ms_stopSharingWarRoomError"),"")})):_this.notificationService.displayMessage(_this.getString("ms_stopSharingWarRoomAlreadyNotShared"),"")})},WarRoomEditorController.prototype.handleViewSharedWarRoomURL=function(){if(this.isWarRoomShared()){var location=WebUtil.getSharedWarRoomServletURL(this.sharedStatus.securityToken);WebUtil.copyToClipboard(location.toString())}},WarRoomEditorController.prototype.handleOpenSharedWarRoomURL=function(){if(this.isWarRoomShared()){var location=WebUtil.getSharedWarRoomServletURL(this.sharedStatus.securityToken);WebUtil.loadURL(location)}},WarRoomEditorController.prototype.handleSaveAsTemplate=function(){this.openCreateWarRoomTemplateDialog()},WarRoomEditorController.prototype.setupListeners=function(){var _this=this;this.$scope.$on(EventConstants.UEV_LAYOUT_CHANGED,function(){_this.initLayoutVariables()}),this.$scope.$on(ParticipantsController.UEV_WARROOM_PRESENTER_CHANGE,function(){for(var data=[],_i=1;_i<arguments.length;_i++)data[_i-1]=arguments[_i];_this.$scope.isAutoSaveScheduled&&(_this.$scope.isAutoSaveScheduled=!1,_this.save(!1)),_this.isPresenter=!1,_this.$scope.handleViewDashboard(),_this.warRoomSession=data[0].warRoomSession}),this.$scope.$watch("adWarRoomKey",function(warRoomKey){if(_this.$scope.isAutoSaveScheduled&&(_this.$scope.isAutoSaveScheduled=!1,_this.save(!1)),_this.$scope.refreshDashboardView(),Util.isDefAndNotNull(warRoomKey)){var params=new URLParams(_this.$location.path());params.setParam(UrlConstants.WARROOM_KEY,warRoomKey),URLUtil.setLocationHashNoHistory(params.toString())}}),this.$scope.$on("$destroy",function(){_this.dashboardLiveUpdateService.stopLiveUpdateDashboardConfig()})},WarRoomEditorController.prototype.setupScopeFunctions=function(){var _this=this;this.saveDashboardToServer=function(){if(_this.isPresenter&&_this.$scope.editMode)return _this.warRoomUiService.updateWarRoomDashboard(_this.marshall(_this.$scope.currentDashboard),_this.warRoomSession.warRoomKey);var deferred=_this.injectorService.$q().defer();return deferred.resolve(null),deferred.promise},this.$scope.getDashboard=function(){if(_this.initialized){var warRoomKey=_this.$scope.adWarRoomKey;return _.isEmpty(warRoomKey)?void _this.warRoomViewService.viewWarRoomList(_this.getApplicationIdFromUrl()):void _this.warRoomUiService.getWarRoom(warRoomKey).then(function(data){_this.warRoomSession=_this.warRoomUiService.getWarRoom_response(data),_this.updateDashboard(_this.warRoomSession.customDashboard),_this.isPresenter=_this.username==_this.warRoomSession.presenterUserName,_this.$scope.handleViewDashboard(),_this.isPresenter?_this.warRoomUiService.getWarRoomSharedEntityState(_this.warRoomSession.warRoomKey).then(function(data){_this.sharedStatus=_this.warRoomUiService.getWarRoomSharedEntityState_response(data)}):_this.sharedStatus=null,_this.firstTime&&(_.delay(function(){_this.initLayoutVariables()}),_this.firstTime=!1)},function(){_this.warRoomViewService.showWarRoomEndedError(_this.getApplicationIdFromUrl())})}}},WarRoomEditorController.prototype.isWarRoomShared=function(){return this.sharedStatus&&this.sharedStatus.securityToken&&!this.sharedStatus.sharingRevoked},WarRoomEditorController.prototype.refreshWarRoom=function(){var _this=this,warRoomKey=this.$scope.adWarRoomKey;return _.isEmpty(warRoomKey)?void this.warRoomViewService.viewWarRoomList(this.getApplicationIdFromUrl()):void this.warRoomUiService.getWarRoom(warRoomKey).then(function(data){_this.warRoomSession=_this.warRoomUiService.getWarRoom_response(data),_this.isPresenter=_this.username==_this.warRoomSession.presenterUserName},function(){_this.warRoomViewService.showWarRoomEndedError(_this.getApplicationIdFromUrl())})},WarRoomEditorController.prototype.setupLiveUpdate=function(){var _this=this;this.dashboardLiveUpdateService.startLiveUpdateDashboardConfig(function(){_this.isPresenter?_this.refreshWarRoom():_this.$scope.getDashboard(),_this.$rootScope.$broadcast(NotesController.NOTES_REFRESH_EVENT,{refreshTarget:NotesController.NOTES_WIDGET_TYPE,isDataRefresh:!0})},2e3)},WarRoomEditorController.prototype.setElapsedTimeTimer=function(){var _this=this;this.setElapsedTime(),this.$timeout(function(){_this.setElapsedTimeTimer()},1e3)},WarRoomEditorController.prototype.setElapsedTime=function(){this.elapsedTime=Util.isDefAndNotNull(this.warRoomSession)?DateTimeUtil.getElapsedTime(this.warRoomSession.createTime):"00:00:00"},WarRoomEditorController.prototype.openCreateWarRoomTemplateDialog=function(){var dialogData={warRoomKey:this.warRoomSession.warRoomKey};DialogService.instance().showDialog("","app/view/customDashboard/warRoom/template/CreateWarRoomTemplateDialogController","app/view/customDashboard/warRoom/template/CreateWarRoomTemplateDialog.html",dialogData)},WarRoomEditorController.prototype.initLayoutVariables=function(){this.notesHeight=$("#appContainer").height()-($(".adsMainTitleBarContainerRow").height()+$("#topMenuBarContainerDivId").height()+$(".action-bar").height()+$(".participants-panel").height()+$("#notesHeaderId").height())},WarRoomEditorController.$inject=["$scope","$rootScope","$location","resourceManager","$dialog","notificationService","dashboardService","dashboardHelper","userUiService","$window","$timeout","uiData","userPreferenceUiService","userService","customDashboardViewService","dashboardLiveUpdateService","dashboardShareService","warRoomUiService","warRoomViewService","dialogService"],WarRoomEditorController}(CustomDashboardEditorController);define("app/view/customDashboard/warRoom/WarRoomEditorController",function(){});var WarRoomDashboardDirective=function(){function WarRoomDashboardDirective(){return{restrict:"E",replace:!1,templateUrl:"app/view/customDashboard/warRoom/WarRoomDashboard.html",scope:{adWarRoom:"@",adWarRoomKey:"@"},controller:"WarRoomEditorController"}}return WarRoomDashboardDirective.$inject=[],WarRoomDashboardDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-war-room-dashboard"),WarRoomDashboardDirective),define("app/view/customDashboard/warRoom/WarRoomDashboardDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},CustomDashboardUiService=function(_super){function CustomDashboardUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(CustomDashboardUiService,_super),CustomDashboardUiService.instance=function(){return AngularUtil.getADInjector().get("customDashboardUiService")},CustomDashboardUiService.prototype.createDashboard2=function(arg0){var path="restui/dashboards/create2",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","createDashboard2",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["uiState.timeRangeForDashboard.timeRange.endTime","uiState.timeRangeForDashboard.timeRange.startTime","uiState.timeRangeForDashboard.endTime","uiState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.createDashboard2_response=function(response){return response},CustomDashboardUiService.prototype.copyDashboard=function(arg0){var path="restui/dashboards/copy",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","copyDashboard",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dashboardUIState.timeRangeForDashboard.timeRange.endTime","dashboardUIState.timeRangeForDashboard.timeRange.startTime","dashboardUIState.timeRangeForDashboard.endTime","dashboardUIState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.copyDashboard_response=function(response){return response},CustomDashboardUiService.prototype.copyDashboard2=function(arg0){var path="restui/dashboards/copy2",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","copyDashboard2",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["uiState.timeRangeForDashboard.timeRange.endTime","uiState.timeRangeForDashboard.timeRange.startTime","uiState.timeRangeForDashboard.endTime","uiState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.copyDashboard2_response=function(response){return response},CustomDashboardUiService.prototype.updateDashboard=function(arg0){var path="restui/dashboards/update",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","updateDashboard",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dashboardUIState.timeRangeForDashboard.timeRange.endTime","dashboardUIState.timeRangeForDashboard.timeRange.startTime","dashboardUIState.timeRangeForDashboard.endTime","dashboardUIState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.updateDashboard_response=function(response){return response},CustomDashboardUiService.prototype.updateDashboard2=function(arg0){var path="restui/dashboards/update2",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","updateDashboard2",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["uiState.timeRangeForDashboard.timeRange.endTime","uiState.timeRangeForDashboard.timeRange.startTime","uiState.timeRangeForDashboard.endTime","uiState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.updateDashboard2_response=function(response){return response},CustomDashboardUiService.prototype.getLegacyCustomDashboards=function(){var path="restui/dashboards/getLegacyCustomDashboards",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getLegacyCustomDashboards",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.getLegacyCustomDashboards_response=function(response){return response},CustomDashboardUiService.prototype.getAllDashboards=function(){var path="restui/dashboards/list",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getAllDashboards",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dashboardUIState.timeRangeForDashboard.timeRange.endTime","dashboardUIState.timeRangeForDashboard.timeRange.startTime","dashboardUIState.timeRangeForDashboard.endTime","dashboardUIState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.getAllDashboards_response=function(response){return response},CustomDashboardUiService.prototype.hasLegacyCustomDashboards=function(){var path="restui/dashboards/hasLegacyCustomDashboards",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","hasLegacyCustomDashboards",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.hasLegacyCustomDashboards_response=function(response){return response},CustomDashboardUiService.prototype.getAllDashboards2=function(){var path="restui/dashboards/list2",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getAllDashboards2",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["uiState.timeRangeForDashboard.timeRange.endTime","uiState.timeRangeForDashboard.timeRange.startTime","uiState.timeRangeForDashboard.endTime","uiState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.getAllDashboards2_response=function(response){return response},CustomDashboardUiService.prototype.getAllDashboardsByType2=function(isTemplateType){var path="restui/dashboards/list2/"+isTemplateType,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getAllDashboardsByType2",path,[isTemplateType]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["uiState.timeRangeForDashboard.timeRange.endTime","uiState.timeRangeForDashboard.timeRange.startTime","uiState.timeRangeForDashboard.endTime","uiState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.getAllDashboardsByType2_response=function(response){return response},CustomDashboardUiService.prototype.getDashboard=function(dashboardId){var path="restui/dashboards/"+dashboardId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getDashboard",path,[dashboardId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dashboardUIState.timeRangeForDashboard.timeRange.endTime","dashboardUIState.timeRangeForDashboard.timeRange.startTime","dashboardUIState.timeRangeForDashboard.endTime","dashboardUIState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.getDashboard_response=function(response){return response},CustomDashboardUiService.prototype.getDashboard2=function(dashboardId){var path="restui/dashboards/getDashboard2/"+dashboardId,apiCall=null;
this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getDashboard2",path,[dashboardId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["uiState.timeRangeForDashboard.timeRange.endTime","uiState.timeRangeForDashboard.timeRange.startTime","uiState.timeRangeForDashboard.endTime","uiState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.getDashboard2_response=function(response){return response},CustomDashboardUiService.prototype.getDashboardVersion=function(dashboardId){var path="restui/dashboards/"+dashboardId+"/version",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getDashboardVersion",path,[dashboardId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.getDashboardVersion_response=function(response){return response},CustomDashboardUiService.prototype.getSharedDashboardByToken=function(token){var path="restui/dashboards/shared/"+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getSharedDashboardByToken",path,[token]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dashboardUIState.timeRangeForDashboard.timeRange.endTime","dashboardUIState.timeRangeForDashboard.timeRange.startTime","dashboardUIState.timeRangeForDashboard.endTime","dashboardUIState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.getSharedDashboardByToken_response=function(response){return response},CustomDashboardUiService.prototype.getSharedDashboardByToken2=function(token){var path="restui/dashboards/shared2/"+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getSharedDashboardByToken2",path,[token]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["uiState.timeRangeForDashboard.timeRange.endTime","uiState.timeRangeForDashboard.timeRange.startTime","uiState.timeRangeForDashboard.endTime","uiState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.getSharedDashboardByToken2_response=function(response){return response},CustomDashboardUiService.prototype.getAllMachinesForApplication=function(applicationId){var path="restui/dashboards/getAllMachinesForApplication/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getAllMachinesForApplication",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["machineAgent.installTime","machineAgent.lastStartTime","machineAgent.agentVersionsHistory.changeDetectionTime","machineAgent.agentRuntimeHistory.changeDetectionTime","machineAgent.vmStartupOptionsHistory.changeDetectionTime","machineAgent.vmSystemPropertiesHistory.changeDetectionTime","machineAgent.environmentVariablesHistory.changeDetectionTime","machineAgent.agentPropertiesHistory.changeDetectionTime"]),response})},CustomDashboardUiService.prototype.getAllMachinesForApplication_response=function(response){return response},CustomDashboardUiService.prototype.createDashboard=function(arg0){var path="restui/dashboards/create",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","createDashboard",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dashboardUIState.timeRangeForDashboard.timeRange.endTime","dashboardUIState.timeRangeForDashboard.timeRange.startTime","dashboardUIState.timeRangeForDashboard.endTime","dashboardUIState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.createDashboard_response=function(response){return response},CustomDashboardUiService.prototype.updateWidget=function(arg0){var path="restui/dashboards/updateWidget",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","updateWidget",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.updateWidget_response=function(response){return response},CustomDashboardUiService.prototype.deleteWidget=function(arg0){var path="restui/dashboards/deleteWidget",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","deleteWidget",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.deleteDashboards=function(arg0){var path="restui/dashboards/deleteMultiple",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","deleteDashboards",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.shareDashboard=function(arg0){var path="restui/dashboards/share",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","shareDashboard",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.shareDashboard_response=function(response){return response},CustomDashboardUiService.prototype.getDashboardSharedEntityState=function(dashboardId){var path="restui/dashboards/sharedEntityState/"+dashboardId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getDashboardSharedEntityState",path,[dashboardId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.getDashboardSharedEntityState_response=function(response){return response},CustomDashboardUiService.prototype.updateDashboardSharedEntityState=function(arg0,dashboardId){var path="restui/dashboards/sharedEntityState/update/"+dashboardId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","updateDashboardSharedEntityState",path,[arg0,dashboardId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.updateDashboardSharedEntityState_response=function(response){return response},CustomDashboardUiService.prototype.deleteDashboardSharedEntityState=function(dashboardId){var path="restui/dashboards/sharedEntityState/delete/"+dashboardId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","deleteDashboardSharedEntityState",path,[dashboardId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.getApplicationMetricDefinitionsForWidget=function(dashboardId,widgetGuid,applicationId){var path="restui/dashboards/metricDefinitions/"+dashboardId+"/"+widgetGuid+"/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getApplicationMetricDefinitionsForWidget",path,[dashboardId,widgetGuid,applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.getApplicationMetricDefinitionsForWidget_response=function(response){return response},CustomDashboardUiService.prototype.getWidgetData=function(arg0){var path="restui/dashboards/widgetData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getWidgetData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eventStreamUiItemQueryResult.queryCursor.timeRange.timeRange.endTime","eventStreamUiItemQueryResult.queryCursor.timeRange.timeRange.startTime","eventStreamUiItemQueryResult.queryCursor.timeRange.endTime","eventStreamUiItemQueryResult.queryCursor.timeRange.startTime"]),response})},CustomDashboardUiService.prototype.getWidgetData_response=function(response){return response},CustomDashboardUiService.prototype.getAllHealthRuleWidgetData=function(arg0){var path="restui/dashboards/allHealthRuleWidgetData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getAllHealthRuleWidgetData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.getAllHealthRuleWidgetData_response=function(response){return response},CustomDashboardUiService.prototype.getStatusWidgetDataByWidgetGuid=function(dashboardId,widgetGuid){var path="restui/dashboards/statusData/"+dashboardId+"/"+widgetGuid,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getStatusWidgetDataByWidgetGuid",path,[dashboardId,widgetGuid]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.getStatusWidgetDataByWidgetGuid_response=function(response){return response},CustomDashboardUiService.prototype.getGraphWidgetData=function(arg0){var path="restui/dashboards/graphData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getGraphWidgetData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.getGraphWidgetData_response=function(response){return response},CustomDashboardUiService.prototype.getAllDashboardsByType=function(isTemplateType){var path="restui/dashboards/list/"+isTemplateType,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","getAllDashboardsByType",path,[isTemplateType]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dashboardUIState.timeRangeForDashboard.timeRange.endTime","dashboardUIState.timeRangeForDashboard.timeRange.startTime","dashboardUIState.timeRangeForDashboard.endTime","dashboardUIState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},CustomDashboardUiService.prototype.getAllDashboardsByType_response=function(response){return response},CustomDashboardUiService.prototype.deleteDashboard=function(arg0){var path="restui/dashboards/delete",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","deleteDashboard",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.describe=function(){var path="restui/dashboards/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CustomDashboardUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CustomDashboardUiService.prototype.describe_response=function(response){return response},CustomDashboardUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],CustomDashboardUiService}(ControllerUiServiceBase);adComponentsModule.service("customDashboardUiService",CustomDashboardUiService),define("lib/controller/services/customdashboard/CustomDashboardUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},DashboardTemplateUiService=function(_super){function DashboardTemplateUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(DashboardTemplateUiService,_super),DashboardTemplateUiService.instance=function(){return AngularUtil.getADInjector().get("dashboardTemplateUiService")},DashboardTemplateUiService.prototype.getAllDashboardTemplatesByTier2=function(componentId,isTierDashboard){var path="restui/templates/getAllDashboardTemplatesByTier2/"+componentId+"?isTierDashboard="+isTierDashboard,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","getAllDashboardTemplatesByTier2",path,[componentId,isTierDashboard]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["uiState.timeRangeForDashboard.timeRange.endTime","uiState.timeRangeForDashboard.timeRange.startTime","uiState.timeRangeForDashboard.endTime","uiState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},DashboardTemplateUiService.prototype.getAllDashboardTemplatesByTier2_response=function(response){return response},DashboardTemplateUiService.prototype.getAllDashboardTemplatesByType=function(isTierDashboard){var path="restui/templates/getAllDashboardTemplatesByType?isTierDashboard="+isTierDashboard,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","getAllDashboardTemplatesByType",path,[isTierDashboard]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dashboardUIState.timeRangeForDashboard.timeRange.endTime","dashboardUIState.timeRangeForDashboard.timeRange.startTime","dashboardUIState.timeRangeForDashboard.endTime","dashboardUIState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},DashboardTemplateUiService.prototype.getAllDashboardTemplatesByType_response=function(response){return response},DashboardTemplateUiService.prototype.getAllDashboardTemplatesByType2=function(isTierDashboard){var path="restui/templates/getAllDashboardTemplatesByType2?isTierDashboard="+isTierDashboard,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","getAllDashboardTemplatesByType2",path,[isTierDashboard]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["uiState.timeRangeForDashboard.timeRange.endTime","uiState.timeRangeForDashboard.timeRange.startTime","uiState.timeRangeForDashboard.endTime","uiState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},DashboardTemplateUiService.prototype.getAllDashboardTemplatesByType2_response=function(response){return response},DashboardTemplateUiService.prototype.getDashboardAssociatedEntities=function(dashboardId,applicationId){var path="restui/templates/associatedEntities/"+dashboardId+"/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","getDashboardAssociatedEntities",path,[dashboardId,applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DashboardTemplateUiService.prototype.getDashboardAssociatedEntities_response=function(response){return response},DashboardTemplateUiService.prototype.setAssociatedDashboards=function(arg0,componentId,isTierDashboard){var path="restui/templates/setAssociatedDashboards/"+componentId+"?isTierDashboard="+isTierDashboard,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","setAssociatedDashboards",path,[arg0,componentId,isTierDashboard]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DashboardTemplateUiService.prototype.setAssociatedDashboards2=function(arg0,componentId,isTierDashboard){var path="restui/templates/setAssociatedDashboards2/"+componentId+"?isTierDashboard="+isTierDashboard,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","setAssociatedDashboards2",path,[arg0,componentId,isTierDashboard]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DashboardTemplateUiService.prototype.getDashboardTemplateManageViewData=function(applicationId){var path="restui/templates/manageViewData/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","getDashboardTemplateManageViewData",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dashboardTemplates.customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.endTime","dashboardTemplates.customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.startTime","dashboardTemplates.customDashboard.dashboardUIState.timeRangeForDashboard.endTime","dashboardTemplates.customDashboard.dashboardUIState.timeRangeForDashboard.startTime","dashboardTemplates.customDashboard.createdOn","dashboardTemplates.customDashboard.modifiedOn","application.runningSince","application.createdOn","application.modifiedOn"]),response})},DashboardTemplateUiService.prototype.getDashboardTemplateManageViewData_response=function(response){return response},DashboardTemplateUiService.prototype.getDashboardTemplateManageViewData2=function(applicationId){var path="restui/templates/manageViewData2/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","getDashboardTemplateManageViewData2",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dashboardTemplates.customDashboard.uiState.timeRangeForDashboard.timeRange.endTime","dashboardTemplates.customDashboard.uiState.timeRangeForDashboard.timeRange.startTime","dashboardTemplates.customDashboard.uiState.timeRangeForDashboard.endTime","dashboardTemplates.customDashboard.uiState.timeRangeForDashboard.startTime","dashboardTemplates.customDashboard.createdOn","dashboardTemplates.customDashboard.modifiedOn","application.runningSince","application.createdOn","application.modifiedOn"]),response})},DashboardTemplateUiService.prototype.getDashboardTemplateManageViewData2_response=function(response){return response},DashboardTemplateUiService.prototype.createDashboardTemplate=function(arg0){var path="restui/templates/create",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","createDashboardTemplate",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboard.dashboardUIState.timeRangeForDashboard.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn"]),response})},DashboardTemplateUiService.prototype.createDashboardTemplate_response=function(response){return response},DashboardTemplateUiService.prototype.createDashboardTemplate2=function(arg0){var path="restui/templates/create2",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","createDashboardTemplate2",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.uiState.timeRangeForDashboard.timeRange.endTime","customDashboard.uiState.timeRangeForDashboard.timeRange.startTime","customDashboard.uiState.timeRangeForDashboard.endTime","customDashboard.uiState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn"]),response})},DashboardTemplateUiService.prototype.createDashboardTemplate2_response=function(response){return response},DashboardTemplateUiService.prototype.getAllDashboardTemplatesByTier=function(componentId,isTierDashboard){var path="restui/templates/getAllDashboardTemplatesByTier/"+componentId+"?isTierDashboard="+isTierDashboard,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","getAllDashboardTemplatesByTier",path,[componentId,isTierDashboard]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dashboardUIState.timeRangeForDashboard.timeRange.endTime","dashboardUIState.timeRangeForDashboard.timeRange.startTime","dashboardUIState.timeRangeForDashboard.endTime","dashboardUIState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},DashboardTemplateUiService.prototype.getAllDashboardTemplatesByTier_response=function(response){return response},DashboardTemplateUiService.prototype.copyDashboardTemplate=function(arg0){var path="restui/templates/copy",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","copyDashboardTemplate",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboard.dashboardUIState.timeRangeForDashboard.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn"]),response})},DashboardTemplateUiService.prototype.copyDashboardTemplate_response=function(response){return response},DashboardTemplateUiService.prototype.copyDashboardTemplate2=function(arg0){var path="restui/templates/copy2",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","copyDashboardTemplate2",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.uiState.timeRangeForDashboard.timeRange.endTime","customDashboard.uiState.timeRangeForDashboard.timeRange.startTime","customDashboard.uiState.timeRangeForDashboard.endTime","customDashboard.uiState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn"]),response})},DashboardTemplateUiService.prototype.copyDashboardTemplate2_response=function(response){return response},DashboardTemplateUiService.prototype.updateDashboardTemplate=function(arg0,applicationId){var path="restui/templates/update/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","updateDashboardTemplate",path,[arg0,applicationId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboard.dashboardUIState.timeRangeForDashboard.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn"]),response})},DashboardTemplateUiService.prototype.updateDashboardTemplate_response=function(response){return response},DashboardTemplateUiService.prototype.updateDashboardTemplate2=function(arg0,applicationId){var path="restui/templates/update2/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","updateDashboardTemplate2",path,[arg0,applicationId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.uiState.timeRangeForDashboard.timeRange.endTime","customDashboard.uiState.timeRangeForDashboard.timeRange.startTime","customDashboard.uiState.timeRangeForDashboard.endTime","customDashboard.uiState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn"]),response
})},DashboardTemplateUiService.prototype.updateDashboardTemplate2_response=function(response){return response},DashboardTemplateUiService.prototype.deleteDashboardTemplate=function(arg0){var path="restui/templates/delete",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","deleteDashboardTemplate",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DashboardTemplateUiService.prototype.getDashboardComponentTemplateData=function(applicationId,componentId){var path="restui/templates/dashboardComponentViewData/"+applicationId+"/"+componentId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","getDashboardComponentTemplateData",path,[applicationId,componentId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["applicationComponentNode.appAgent.installTime","applicationComponentNode.appAgent.lastStartTime","applicationComponentNode.appAgent.agentVersionsHistory.changeDetectionTime","applicationComponentNode.appAgent.agentRuntimeHistory.changeDetectionTime","applicationComponentNode.appAgent.vmStartupOptionsHistory.changeDetectionTime","applicationComponentNode.appAgent.vmSystemPropertiesHistory.changeDetectionTime","applicationComponentNode.appAgent.environmentVariablesHistory.changeDetectionTime","applicationComponentNode.appAgent.agentPropertiesHistory.changeDetectionTime","application.runningSince","application.createdOn","application.modifiedOn"]),response})},DashboardTemplateUiService.prototype.getDashboardComponentTemplateData_response=function(response){return response},DashboardTemplateUiService.prototype.getDashboardNodeTemplateData=function(applicationId,nodeId){var path="restui/templates/dashboardNodeViewData/"+applicationId+"/"+nodeId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","getDashboardNodeTemplateData",path,[applicationId,nodeId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["applicationComponentNode.appAgent.installTime","applicationComponentNode.appAgent.lastStartTime","applicationComponentNode.appAgent.agentVersionsHistory.changeDetectionTime","applicationComponentNode.appAgent.agentRuntimeHistory.changeDetectionTime","applicationComponentNode.appAgent.vmStartupOptionsHistory.changeDetectionTime","applicationComponentNode.appAgent.vmSystemPropertiesHistory.changeDetectionTime","applicationComponentNode.appAgent.environmentVariablesHistory.changeDetectionTime","applicationComponentNode.appAgent.agentPropertiesHistory.changeDetectionTime","application.runningSince","application.createdOn","application.modifiedOn"]),response})},DashboardTemplateUiService.prototype.getDashboardNodeTemplateData_response=function(response){return response},DashboardTemplateUiService.prototype.describe=function(){var path="restui/templates/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardTemplateUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DashboardTemplateUiService.prototype.describe_response=function(response){return response},DashboardTemplateUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],DashboardTemplateUiService}(ControllerUiServiceBase);adComponentsModule.service("dashboardTemplateUiService",DashboardTemplateUiService),define("lib/controller/services/customdashboard/DashboardTemplateUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},WarRoomUiService=function(_super){function WarRoomUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(WarRoomUiService,_super),WarRoomUiService.instance=function(){return AngularUtil.getADInjector().get("warRoomUiService")},WarRoomUiService.prototype.updateWarRoomDashboard=function(arg0,warRoomKey){var path="restui/warrooms/updateWarRoomDashboard/"+warRoomKey,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","updateWarRoomDashboard",path,[arg0,warRoomKey]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dashboardUIState.timeRangeForDashboard.timeRange.endTime","dashboardUIState.timeRangeForDashboard.timeRange.startTime","dashboardUIState.timeRangeForDashboard.endTime","dashboardUIState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},WarRoomUiService.prototype.updateWarRoomDashboard_response=function(response){return response},WarRoomUiService.prototype.createWarRoom=function(arg0){var path="restui/warrooms/createWarRoom",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","createWarRoom",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboard.dashboardUIState.timeRangeForDashboard.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn","customDashboard2.uiState.timeRangeForDashboard.timeRange.endTime","customDashboard2.uiState.timeRangeForDashboard.timeRange.startTime","customDashboard2.uiState.timeRangeForDashboard.endTime","customDashboard2.uiState.timeRangeForDashboard.startTime","customDashboard2.createdOn","customDashboard2.modifiedOn"]),response})},WarRoomUiService.prototype.createWarRoom_response=function(response){return response},WarRoomUiService.prototype.updateWarRoomDashboard2=function(arg0,warRoomKey){var path="restui/warrooms/updateWarRoomDashboard2/"+warRoomKey,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","updateWarRoomDashboard2",path,[arg0,warRoomKey]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["uiState.timeRangeForDashboard.timeRange.endTime","uiState.timeRangeForDashboard.timeRange.startTime","uiState.timeRangeForDashboard.endTime","uiState.timeRangeForDashboard.startTime","createdOn","modifiedOn"]),response})},WarRoomUiService.prototype.updateWarRoomDashboard2_response=function(response){return response},WarRoomUiService.prototype.getNodeNameById=function(nodeId){var path="restui/warrooms/getNodeNameById/"+nodeId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getNodeNameById",path,[nodeId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.getNodeNameById_response=function(response){return response},WarRoomUiService.prototype.getWarRoom=function(warRoomKey){var path="restui/warrooms/getWarRoom/"+warRoomKey,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getWarRoom",path,[warRoomKey]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboard.dashboardUIState.timeRangeForDashboard.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn","customDashboard2.uiState.timeRangeForDashboard.timeRange.endTime","customDashboard2.uiState.timeRangeForDashboard.timeRange.startTime","customDashboard2.uiState.timeRangeForDashboard.endTime","customDashboard2.uiState.timeRangeForDashboard.startTime","customDashboard2.createdOn","customDashboard2.modifiedOn"]),response})},WarRoomUiService.prototype.getWarRoom_response=function(response){return response},WarRoomUiService.prototype.getWarRoomsForCurrentUser=function(applicationId){var path="restui/warrooms/getWarRoomsForCurrentUser/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getWarRoomsForCurrentUser",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboard.dashboardUIState.timeRangeForDashboard.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn","customDashboard2.uiState.timeRangeForDashboard.timeRange.endTime","customDashboard2.uiState.timeRangeForDashboard.timeRange.startTime","customDashboard2.uiState.timeRangeForDashboard.endTime","customDashboard2.uiState.timeRangeForDashboard.startTime","customDashboard2.createdOn","customDashboard2.modifiedOn"]),response})},WarRoomUiService.prototype.getWarRoomsForCurrentUser_response=function(response){return response},WarRoomUiService.prototype.joinWarRoom=function(arg0){var path="restui/warrooms/joinWarRoom",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","joinWarRoom",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboard.dashboardUIState.timeRangeForDashboard.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn","customDashboard2.uiState.timeRangeForDashboard.timeRange.endTime","customDashboard2.uiState.timeRangeForDashboard.timeRange.startTime","customDashboard2.uiState.timeRangeForDashboard.endTime","customDashboard2.uiState.timeRangeForDashboard.startTime","customDashboard2.createdOn","customDashboard2.modifiedOn"]),response})},WarRoomUiService.prototype.joinWarRoom_response=function(response){return response},WarRoomUiService.prototype.endWarRoom=function(warRoomKey){var path="restui/warrooms/endWarRoom/"+warRoomKey,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","endWarRoom",path,[warRoomKey]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.makePresenter=function(arg0,warRoomKey){var path="restui/warrooms/makePresenter/"+warRoomKey,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","makePresenter",path,[arg0,warRoomKey]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboard.dashboardUIState.timeRangeForDashboard.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn","customDashboard2.uiState.timeRangeForDashboard.timeRange.endTime","customDashboard2.uiState.timeRangeForDashboard.timeRange.startTime","customDashboard2.uiState.timeRangeForDashboard.endTime","customDashboard2.uiState.timeRangeForDashboard.startTime","customDashboard2.createdOn","customDashboard2.modifiedOn"]),response})},WarRoomUiService.prototype.makePresenter_response=function(response){return response},WarRoomUiService.prototype.startStreamingMetrics=function(arg0,warRoomKey,nodeId){var path="restui/warrooms/startStreamingMetrics/"+warRoomKey+"/"+nodeId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","startStreamingMetrics",path,[arg0,warRoomKey,nodeId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.startTailingLogs=function(warRoomKey,nodeId,path,regex){var path="restui/warrooms/startTailingLogs/"+warRoomKey+"?nodeId="+nodeId+"&path="+path+"&regex="+regex,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","startTailingLogs",path,[warRoomKey,nodeId,path,regex]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.getLogData=function(warRoomKey,nodeId,path,sequenceId){var path="restui/warrooms/getLogData/"+warRoomKey+"?nodeId="+nodeId+"&path="+path+"&sequenceId="+sequenceId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getLogData",path,[warRoomKey,nodeId,path,sequenceId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.getLogData_response=function(response){return response},WarRoomUiService.prototype.getLogDataUsingToken=function(warRoomKey,token,nodeId,path,sequenceId){var path="restui/warrooms/getLogData/"+warRoomKey+"/"+token+"?nodeId="+nodeId+"&path="+path+"&sequenceId="+sequenceId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getLogDataUsingToken",path,[warRoomKey,token,nodeId,path,sequenceId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.getLogDataUsingToken_response=function(response){return response},WarRoomUiService.prototype.addWarRoomNote=function(arg0){var path="restui/warrooms/addWarRoomNote",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","addWarRoomNote",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.addWarRoomNoteForAnonymousUser=function(arg0,token,anonymousUser){var path="restui/warrooms/addWarRoomNoteForAnonymousUser/"+token+"/"+anonymousUser,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","addWarRoomNoteForAnonymousUser",path,[arg0,token,anonymousUser]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.getStreamingMetricData=function(arg0,warRoomKey){var path="restui/warrooms/getStreamingMetricData/"+warRoomKey,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getStreamingMetricData",path,[arg0,warRoomKey]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.getStreamingMetricData_response=function(response){return response},WarRoomUiService.prototype.getStreamingMetricDataUsingToken=function(arg0,warRoomKey,token){var path="restui/warrooms/getStreamingMetricDataUsingToken/"+warRoomKey+"/"+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getStreamingMetricDataUsingToken",path,[arg0,warRoomKey,token]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.getStreamingMetricDataUsingToken_response=function(response){return response},WarRoomUiService.prototype.shareWarRoom=function(arg0){var path="restui/warrooms/shareWarRoom",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","shareWarRoom",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.shareWarRoom_response=function(response){return response},WarRoomUiService.prototype.updateWarRoomSharedEntityState=function(arg0,warRoomKey){var path="restui/warrooms/updateWarRoomSharedEntityState/"+warRoomKey,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","updateWarRoomSharedEntityState",path,[arg0,warRoomKey]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.updateWarRoomSharedEntityState_response=function(response){return response},WarRoomUiService.prototype.getWarRoomSharedEntityState=function(warRoomKey){var path="restui/warrooms/getWarRoomSharedEntityState/"+warRoomKey,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getWarRoomSharedEntityState",path,[warRoomKey]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.getWarRoomSharedEntityState_response=function(response){return response},WarRoomUiService.prototype.deleteWarRoomSharedEntityState=function(arg0){var path="restui/warrooms/deleteWarRoomSharedEntityState",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","deleteWarRoomSharedEntityState",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.getWarRoomForAnonymousUser=function(token,anonymousUser){var path="restui/warrooms/getWarRoomForAnonymousUser/"+token+"/"+anonymousUser,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getWarRoomForAnonymousUser",path,[token,anonymousUser]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboard.dashboardUIState.timeRangeForDashboard.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn","customDashboard2.uiState.timeRangeForDashboard.timeRange.endTime","customDashboard2.uiState.timeRangeForDashboard.timeRange.startTime","customDashboard2.uiState.timeRangeForDashboard.endTime","customDashboard2.uiState.timeRangeForDashboard.startTime","customDashboard2.createdOn","customDashboard2.modifiedOn"]),response})},WarRoomUiService.prototype.getWarRoomForAnonymousUser_response=function(response){return response},WarRoomUiService.prototype.joinWarRoomForAnonymousUser=function(token,anonymousUser){var path="restui/warrooms/joinWarRoomForAnonymousUser/"+token+"/"+anonymousUser,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","joinWarRoomForAnonymousUser",path,[token,anonymousUser]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboard.dashboardUIState.timeRangeForDashboard.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn","customDashboard2.uiState.timeRangeForDashboard.timeRange.endTime","customDashboard2.uiState.timeRangeForDashboard.timeRange.startTime","customDashboard2.uiState.timeRangeForDashboard.endTime","customDashboard2.uiState.timeRangeForDashboard.startTime","customDashboard2.createdOn","customDashboard2.modifiedOn"]),response})},WarRoomUiService.prototype.joinWarRoomForAnonymousUser_response=function(response){return response},WarRoomUiService.prototype.getNotes=function(arg0){var path="restui/warrooms/getNotes",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getNotes",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["queryCursor.timeRange.timeRange.endTime","queryCursor.timeRange.timeRange.startTime","queryCursor.timeRange.endTime","queryCursor.timeRange.startTime"]),response})},WarRoomUiService.prototype.getNotes_response=function(response){return response},WarRoomUiService.prototype.getNotesUsingToken=function(arg0,token){var path="restui/warrooms/getNotesUsingToken/"+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getNotesUsingToken",path,[arg0,token]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["queryCursor.timeRange.timeRange.endTime","queryCursor.timeRange.timeRange.startTime","queryCursor.timeRange.endTime","queryCursor.timeRange.startTime"]),response})},WarRoomUiService.prototype.getNotesUsingToken_response=function(response){return response},WarRoomUiService.prototype.getWarRoomTemplates=function(accountId){var path="restui/warrooms/getWarRoomTemplatesForAccount/"+accountId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getWarRoomTemplates",path,[accountId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboardTemplate.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboardTemplate.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboardTemplate.dashboardUIState.timeRangeForDashboard.endTime","customDashboardTemplate.dashboardUIState.timeRangeForDashboard.startTime","customDashboardTemplate.createdOn","customDashboardTemplate.modifiedOn","customDashboardTemplate2.uiState.timeRangeForDashboard.timeRange.endTime","customDashboardTemplate2.uiState.timeRangeForDashboard.timeRange.startTime","customDashboardTemplate2.uiState.timeRangeForDashboard.endTime","customDashboardTemplate2.uiState.timeRangeForDashboard.startTime","customDashboardTemplate2.createdOn","customDashboardTemplate2.modifiedOn"]),response})},WarRoomUiService.prototype.getWarRoomTemplates_response=function(response){return response},WarRoomUiService.prototype.createPersistedTemplateFromWarRoom=function(arg0,templateName,warRoomKey){var path="restui/warrooms/createPersistedTemplateFromWarRoom/"+templateName+"/"+warRoomKey,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","createPersistedTemplateFromWarRoom",path,[arg0,templateName,warRoomKey]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboardTemplate.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboardTemplate.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboardTemplate.dashboardUIState.timeRangeForDashboard.endTime","customDashboardTemplate.dashboardUIState.timeRangeForDashboard.startTime","customDashboardTemplate.createdOn","customDashboardTemplate.modifiedOn","customDashboardTemplate2.uiState.timeRangeForDashboard.timeRange.endTime","customDashboardTemplate2.uiState.timeRangeForDashboard.timeRange.startTime","customDashboardTemplate2.uiState.timeRangeForDashboard.endTime","customDashboardTemplate2.uiState.timeRangeForDashboard.startTime","customDashboardTemplate2.createdOn","customDashboardTemplate2.modifiedOn"]),response})},WarRoomUiService.prototype.createPersistedTemplateFromWarRoom_response=function(response){return response},WarRoomUiService.prototype.createPersistedWarRoomFromTemplate=function(arg0,warRoomTemplateId,appId){var path="restui/warrooms/createPersistedWarRoomFromTemplate/"+warRoomTemplateId+"/"+appId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","createPersistedWarRoomFromTemplate",path,[arg0,warRoomTemplateId,appId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboard.dashboardUIState.timeRangeForDashboard.endTime","customDashboard.dashboardUIState.timeRangeForDashboard.startTime","customDashboard.createdOn","customDashboard.modifiedOn","customDashboard2.uiState.timeRangeForDashboard.timeRange.endTime","customDashboard2.uiState.timeRangeForDashboard.timeRange.startTime","customDashboard2.uiState.timeRangeForDashboard.endTime","customDashboard2.uiState.timeRangeForDashboard.startTime","customDashboard2.createdOn","customDashboard2.modifiedOn"]),response})},WarRoomUiService.prototype.createPersistedWarRoomFromTemplate_response=function(response){return response
},WarRoomUiService.prototype.deleteWarRoomTemplate=function(arg0){var path="restui/warrooms/deleteWarRoomTemplate",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","deleteWarRoomTemplate",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.getAllWarRoomTemplatesForCurrentAccount=function(){var path="restui/warrooms/getAllWarRoomTemplatesForCurrentAccount",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","getAllWarRoomTemplatesForCurrentAccount",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["customDashboardTemplate.dashboardUIState.timeRangeForDashboard.timeRange.endTime","customDashboardTemplate.dashboardUIState.timeRangeForDashboard.timeRange.startTime","customDashboardTemplate.dashboardUIState.timeRangeForDashboard.endTime","customDashboardTemplate.dashboardUIState.timeRangeForDashboard.startTime","customDashboardTemplate.createdOn","customDashboardTemplate.modifiedOn","customDashboardTemplate2.uiState.timeRangeForDashboard.timeRange.endTime","customDashboardTemplate2.uiState.timeRangeForDashboard.timeRange.startTime","customDashboardTemplate2.uiState.timeRangeForDashboard.endTime","customDashboardTemplate2.uiState.timeRangeForDashboard.startTime","customDashboardTemplate2.createdOn","customDashboardTemplate2.modifiedOn"]),response})},WarRoomUiService.prototype.getAllWarRoomTemplatesForCurrentAccount_response=function(response){return response},WarRoomUiService.prototype.describe=function(){var path="restui/warrooms/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WarRoomUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WarRoomUiService.prototype.describe_response=function(response){return response},WarRoomUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],WarRoomUiService}(ControllerUiServiceBase);adComponentsModule.service("warRoomUiService",WarRoomUiService),define("lib/controller/services/customdashboard/WarRoomUiService",function(){}),require(["app/view/customDashboard/widgets/WidgetBaseController","app/view/customDashboard2/common/CustomDashboardUtil","app/view/customDashboard2/widgets/WidgetControllerBase","app/view/customDashboard2/widgetEditor/WidgetEditorControllerBase","app/view/customDashboard2/widgets/IWidgetScope","app/view/customDashboard/widgets/WidgetBaseController","app/view/customDashboard/editor/CustomDashboardEditorController"],function(){require(["app/view/customDashboard2/services/DashboardService","app/view/customDashboard2/services/DashboardShareService","app/view/customDashboard2/services/CustomDashboardViewService","app/view/customDashboard2/services/DashboardTemplateViewService","app/view/customDashboard2/services/WarRoomViewService","app/view/customDashboard2/services/WidgetDataService","app/view/customDashboard/widgets/metricLabel/MetricLabelDirective","app/view/customDashboard/widgets/metricLabel/MetricLabelController","app/view/customDashboard/widgets/healthStatus/HealthStatusDirective","app/view/customDashboard/widgets/healthStatus/HealthStatusController","app/view/customDashboard/widgets/streamingGraph/StreamingGraphDirective","app/view/customDashboard/widgets/streamingGraph/StreamingGraphController","app/view/customDashboard/widgets/timeseriesGraph/TimeseriesGraphDirective","app/view/customDashboard/widgets/timeseriesGraph/TimeseriesGraphController","app/view/customDashboard/widgets/pieChart/PieChartDirective","app/view/customDashboard/widgets/pieChart/PieChartController","app/view/customDashboard/widgets/gauge/GaugeDirective","app/view/customDashboard/widgets/gauge/GaugeController","app/view/customDashboard/widgets/image/ImageDirective","app/view/customDashboard/widgets/image/ImageController","app/view/customDashboard/widgets/iframe/IframeDirective","app/view/customDashboard/widgets/iframe/IframeController","app/view/customDashboard/query/ListQueryService","app/view/customDashboard/widgets/list/ListDirective","app/view/customDashboard/widgets/list/ListController","app/view/customDashboard/widgets/logtail/LogTailDirective","app/view/customDashboard/widgets/logtail/LogTailController","app/view/customDashboard/warRoom/notesPanel/NotesDirective","app/view/customDashboard/warRoom/notesPanel/NotesController","app/view/customDashboard/warRoom/participantsPanel/ParticipantsDirective","app/view/customDashboard/warRoom/participantsPanel/ParticipantsController","app/view/customDashboard/widgets/AdWidgetDirective","app/view/customDashboard/widgets/AdWidgetController","app/view/customDashboard/widgets/WidgetHelper","app/view/customDashboard/widgets/HighChartsHelper","app/view/customDashboard/common/DashboardLiveUpdateService","app/view/customDashboard/editor/DashboardHelper","app/view/customDashboard/editor/MetricBrowserHelper","app/view/customDashboard/editor/UIData","app/view/customDashboard/editor/dialogs/HealthRuleSelectorController","app/view/customDashboard/editor/dialogs/MetricSelectorController","app/view/customDashboard/editor/dialogs/eventSelector/EventSelectorController","app/view/customDashboard/editor/dialogs/SeriesSelectorController","app/view/customDashboard/editor/dialogs/CDPropertiesDialogController","app/view/customDashboard/editor/dialogs/streamingSeriesSelector/StreamingSeriesSelectorController","app/view/customDashboard/editor/propertiesPanel/PropertiesPanel","app/view/customDashboard/listView/dialogs/CopyCDDialogController","app/view/customDashboard/import/CDImportDialogController","app/view/customDashboard/templates/node/NodeDashboardTemplateController","app/view/customDashboard/templates/tier/TierDashboardTemplateController","app/view/customDashboard/editor/CustomDashboardClassEnums","app/view/customDashboard/editor/CustomDashboardEditorDirective","app/view/customDashboard/editor/CustomDashboardTemplateDirective","app/view/customDashboard/warRoom/WarRoomController","app/view/customDashboard/warRoom/WarRoomEditorController","app/view/customDashboard/warRoom/WarRoomDashboardDirective","lib/controller/services/customdashboard/CustomDashboardUiService","lib/controller/services/customdashboard/DashboardTemplateUiService","lib/controller/services/customdashboard/WarRoomUiService"])}),define("app/view/customDashboard2/CustomDashboardsModuleCode",function(){});var DBTunaService=function(){function DBTunaService(masterService,applicationUiService,timeRangeService,dialogService){this.masterService=masterService,this.applicationUiService=applicationUiService,this.timeRangeService=timeRangeService,this.dialogService=dialogService}return DBTunaService.instance=function(){return AngularUtil.getADInjector().get(DBTunaService.SERVICE_NAME)},DBTunaService.prototype.isDBMonitoringEnabled=function(){return this.masterService.getAccountPropertyBoolean("DB_MONITORING_ENABLED")},DBTunaService.prototype.isDB=function(node){return!node.$$groupItems&&node.entityType==EntityType.BACKEND&&node.exitPointCall&&node.exitPointCall.exitPointType&&(node.exitPointCall.exitPointType==TransactionExitPointType.JDBC||node.exitPointCall.exitPointType==TransactionExitPointType.ADODOTNET||node.exitPointCall.exitPointType==TransactionExitPointType.DB)},DBTunaService.prototype.setSnapshotCorrelationData=function(graph){var _this=this,correlationData={};graph.properties&&graph.properties.definition&&graph.properties.definition.entityType===EntityType.BUSINESS_TRANSACTION&&(correlationData.btId=graph.properties.definition.entityId);var urlParams=URLParams.getCurrentUrlParams();correlationData.requestGUID=urlParams.requestGUID();var dbs=graph.nodes.filter(function(node){return _this.isDB(node)});_.each(dbs,function(db){db.dbMonSnapshotCorrelationData=correlationData})},DBTunaService.prototype.getDBTunaUrl=function(){var dbTunaUrl=this.masterService.getAccountProperty("DB_MONITORING_URL");return ADLoggerService.info("DBTunaService.getDBTunaUrl Debug: Found user specified url "+dbTunaUrl),dbTunaUrl},DBTunaService.prototype.getDBTunaRedirectUrl=function(url){void 0===url&&(url="");var result="";if(url&&url.length>0){var lastCharacter=url.charAt(url.length-1);result="/"==lastCharacter?url+DBTunaService.PATH_TO_REDIRECT_JSP:url+"/"+DBTunaService.PATH_TO_REDIRECT_JSP}return result},DBTunaService.prototype.addTimeRangeToUrlParams=function(urlParams){var startTime,endTime,timeRange=this.timeRangeService.getTimeRange();return timeRange.type==TimeRangeSpecifierType.BETWEEN_TIMES?(endTime=timeRange.endTime,startTime=timeRange.startTime):timeRange.type==TimeRangeSpecifierType.BEFORE_NOW&&(endTime=new Date,startTime=new Date(endTime.getTime()-DateTimeUtil.MILLISEC_PER_MIN*timeRange.durationInMinutes)),startTime&&endTime&&(urlParams[DBTunaService.START_DATETIME]=startTime.getTime()+"",urlParams[DBTunaService.END_DATETIME]=endTime.getTime()+""),urlParams},DBTunaService.prototype.validateRedirectUrl=function(){var result=!1,dbTunaUrl=this.getDBTunaUrl();if(dbTunaUrl&&dbTunaUrl.length>0){var dbTunaRedirectUrl=this.getDBTunaRedirectUrl(dbTunaUrl);dbTunaRedirectUrl&&dbTunaRedirectUrl.length>0&&(result=!0)}return result||(ADLoggerService.warn("DBTunaService.validateRedirectUrl Warning: Could not access one of dbTunaUrl and dbTunaRedirectUrl"),this.dialogService.showConfirmation("Link to AppD4DB","Cannot redirect because url for AppDynamics for Databases is null",void 0,void 0,"","",!1)),result},DBTunaService.prototype.linkToDBTunaFromD3Node=function(node){var _this=this;this.validateRedirectUrl()&&this.applicationUiService.getBackend(node.idNum).then(function(response){_this.linkToDBTuna(response,node.dbMonSnapshotCorrelationData)})},DBTunaService.prototype.linkToDBTuna=function(backendCallInfo,snapshotCorrelationData){if(this.validateRedirectUrl()&&backendCallInfo){var redirectUrlSite=this.getDBTunaRedirectUrl(this.getDBTunaUrl()),redirectUrlParams=new Object;if(redirectUrlParams[DBTunaService.APP_ID]=backendCallInfo.applicationId+"",backendCallInfo.resolutionInfo&&backendCallInfo.resolutionInfo.properties)for(var i=0;i<backendCallInfo.resolutionInfo.properties.length;i++){var prop=backendCallInfo.resolutionInfo.properties[i];redirectUrlParams[prop.name]=prop.value}snapshotCorrelationData&&(redirectUrlParams[DBTunaService.GUID_ID]=snapshotCorrelationData.requestGUID,redirectUrlParams[DBTunaService.BT_ID]=snapshotCorrelationData.btId),redirectUrlParams=this.addTimeRangeToUrlParams(redirectUrlParams),ADLoggerService.info("DBTunaService.linkToDBTuna Debug: Redirect url site is "+redirectUrlSite),ADLoggerService.info("DBTunaService.linkToDBTuna Debug: Redirect url params are: ");for(var param in redirectUrlParams)ADLoggerService.info("DBTunaService.linkToDBTuna Debug:  < "+param+" : "+redirectUrlParams[param]+" >");var form=document.createElement("form");form.setAttribute("method","post"),form.setAttribute("target","view"),form.setAttribute("action",redirectUrlSite);for(var param in redirectUrlParams){var hiddenField=document.createElement("input");hiddenField.setAttribute("name",param),hiddenField.setAttribute("value",redirectUrlParams[param]),form.appendChild(hiddenField)}document.body.appendChild(form);var win=window.open("","view");win&&win.focus(),form.submit()}},DBTunaService.SERVICE_NAME="dbTunaService",DBTunaService.PATH_TO_REDIRECT_JSP="dbtuna/appd.jsp",DBTunaService.START_DATETIME="date_S",DBTunaService.END_DATETIME="date_E",DBTunaService.APP_ID="appid",DBTunaService.GUID_ID="guid",DBTunaService.BT_ID="btid",DBTunaService.$inject=["masterService","applicationUiService","timeRangeService","dialogService"],DBTunaService}();appdynamicsModule.service(DBTunaService.SERVICE_NAME,DBTunaService),define("app/services/DBTunaService",function(){});var DBCamService=function(){function DBCamService(){}return DBCamService.instance=function(){return AngularUtil.getADInjector().get(DBCamService.SERVICE_NAME)},DBCamService.prototype.linkToDBCamFromD3Node=function(node){var _this=this;this.validateRedirectUrl()&&ApplicationUiService.instance().getBackend(node.idNum).then(function(backendInfo){_this.openLinkToDBCam(backendInfo,node.dbMonSnapshotCorrelationData)})},DBCamService.prototype.openLinkToDBCam=function(backendInfo,dbMonSnapshotCorrelationData){var url;url=dbMonSnapshotCorrelationData?this.getUrlToDBCamUi(backendInfo.applicationId,dbMonSnapshotCorrelationData.requestGUID,backendInfo,dbMonSnapshotCorrelationData.btId):this.getDBCamDashboardUrl(),url?(WebUtil.loadURL(WebUtil.formatURL(url,!0)),ADLoggerService.info("Launching a new browser window/tab to DBCam URL: "+url)):(NotificationService.instance().displayError(ResourceManager.instance().getString("ui","ms_linkToDBCamNullURL"),""),ADLoggerService.warn("Unable to create DB cam URL"))},DBCamService.prototype.isDBCamEnabled=function(){return MasterService.instance().getAccountPropertyBoolean(DBCamService.PROPERTY_DB_CAM_ENABLED)},DBCamService.prototype.getDBCamUrl=function(){var dbCamUrl=MasterService.instance().getAccountProperty(DBCamService.PROPERTY_DB_CAM_URL);return ADLoggerService.info("DBCam.getDBCamUrl Debug: Found user specified url "+dbCamUrl),dbCamUrl},DBCamService.prototype.getDBCamExtraParams=function(){return MasterService.instance().getAccountProperty(DBCamService.PROPERTY_DB_CAM_QUERY_PARAMS)},DBCamService.prototype.getDBCamDashboardUrl=function(){var url=this.getDBCamUrl();return url=this.validateAndFixUserInputUrl(url),url+DBCamService.PATH_TO_REDIRECT_DASHBOARD},DBCamService.prototype.getUrlToDBCamUi=function(applicationId,requestGUID,backend,btId){void 0===btId&&(btId=0);var currentInstanceName;if(backend&&backend.resolutionInfo){var schema=_.findWhere(backend.resolutionInfo.properties,{name:DBCamService.URL_PARAM_SCHEMA});schema&&(currentInstanceName=schema.value)}var url=this.getDBCamUrl();url=this.validateAndFixUserInputUrl(url),url+=DBCamService.PATH_TO_REDIRECT_DRILL_DOWN;var params=URLParams.createEmptyUrlParams();requestGUID&&params.setParam(DBCamService.URL_PARAM_CID,requestGUID),currentInstanceName&&params.setParam(DBCamService.URL_PARAM_CURR_INSTANCE_NAME,currentInstanceName),applicationId&&params.setNumberParam(DBCamService.URL_PARAM_JAPP_ID,applicationId),Util.isValidId(btId)&&params.setNumberParam(DBCamService.URL_PARAM_BT_ID,btId);var queryParams=params.toString(),extraQueryParams=this.getDBCamExtraParams();return extraQueryParams&&extraQueryParams.length>0&&(queryParams.length>0&&(queryParams+="&"),queryParams+=extraQueryParams),queryParams&&queryParams.length>0&&(url+=queryParams.replace("/","?")),url},DBCamService.prototype.validateAndFixUserInputUrl=function(url){if(url&&url.length>0){var lastCharacter=url.charAt(url.length-1);"/"!==lastCharacter&&(url+="/")}return url},DBCamService.prototype.validateRedirectUrl=function(){var result=!1,dbCamUrl=this.getDBCamUrl();return dbCamUrl&&dbCamUrl.length>0&&(result=!0),result||(DialogService.instance().showConfirmation(ResourceManager.instance().getString("ui","ms_linkToDBCam"),ResourceManager.instance().getString("ui","ms_linkToDBCamNullURL"),void 0,void 0,"","",!1),ADLoggerService.warn("DBCamService.validateRedirectUrl Warning: Could not access one of dbCamUrl")),result},DBCamService.SERVICE_NAME="dbCamService",DBCamService.PATH_TO_REDIRECT_DASHBOARD="dashboard.efi",DBCamService.PATH_TO_REDIRECT_DRILL_DOWN="sessionDrillDown.efi",DBCamService.PROPERTY_DB_CAM_ENABLED="DB_CAM_ENABLED",DBCamService.PROPERTY_DB_CAM_URL="DB_CAM_URL",DBCamService.PROPERTY_DB_CAM_QUERY_PARAMS="DB_CAM_QUERY_PARAMS",DBCamService.URL_PARAM_CID="cid",DBCamService.URL_PARAM_CURR_INSTANCE_NAME="currInstanceName",DBCamService.URL_PARAM_SCHEMA="SCHEMA",DBCamService.URL_PARAM_JAPP_ID="jappId",DBCamService.URL_PARAM_BT_ID="btId",DBCamService.$inject=[],DBCamService}();appdynamicsModule.service(DBCamService.SERVICE_NAME,DBCamService),define("app/services/DBCamService",function(){});var UserService=function(){function UserService($rootScope,$timeout,$interval,injectorService,userPreferenceUiService){this.$rootScope=$rootScope,this.$timeout=$timeout,this.$interval=$interval,this.injectorService=injectorService,this.userPreferenceUiService=userPreferenceUiService,this.queue=[],this.intervalInMillis=5*DateTimeUtil.MILLISEC_PER_SEC,this.intervalPromise=null,this.debugUsageTracking=!1,this.enableUsageTracking=!1,this.user=null,this.onAuthenticateSuccess=function(){this.$rootScope.$broadcast(UserService.LOGIN_EVENT)},this.debugUsageTracking=document.location.href&&-1!=document.location.href.indexOf("debugUsageTracking=true"),this.enableUsageTracking=document.location.href&&-1!=document.location.href.indexOf("enableUsageTracking=true")}return UserService.instance=function(){return AngularUtil.getADInjector().get(UserService.SERVICE_NAME)},UserService.prototype.onInitDataFetched=function(){var _this=this;this.setChartDateTimeFormat(),UserUiService.instance().getCurrentUserObject().then(function(user){_this.user=user}),this.isMarketoUsageTrackingEnabled()&&this.injectorService.masterService().initData&&this.injectorService.masterService().initData.accountUI&&(this.updateMarketoLead(this.injectorService.masterService().initData.accountUI.account),this.$rootScope.$on(NavigationService.UEV_NAV_ACTION_HTML,function(){_this.trackCurrentUrlParams()}),this.$rootScope.$on(NavigationService.UEV_NAV_ACTION_FLASH,function(){_this.trackCurrentUrlParams()}));var numberLogins=Math.max(this.getGeneralUserPreferenceNumberValue(UserService.NUMBER_OF_42_LOGINS),0);numberLogins++,this.setGeneralUserPreferenceValue(UserService.NUMBER_OF_42_LOGINS,numberLogins.toString())},UserService.prototype.getAccountName=function(){return this.injectorService.masterService()&&this.injectorService.masterService().initData&&this.injectorService.masterService().initData.accountUI?this.injectorService.masterService().initData.accountUI.account.name:null},UserService.prototype.getGeneralUserPreferenceValue=function(prefName){var val=null,generalUserPrefernces=this.getGeneralUserPrefernces();if(generalUserPrefernces&&generalUserPrefernces.preferences)for(var i=0;i<generalUserPrefernces.preferences.length;i++)if(generalUserPrefernces.preferences[i].name==prefName){val=generalUserPrefernces.preferences[i].value;break}return val},UserService.prototype.getGeneralUserPreferenceBooleanValue=function(prefName){var val=this.getGeneralUserPreferenceValue(prefName);return"true"==val},UserService.prototype.getGeneralUserPreferenceNumberValue=function(prefName){return Util.parseInt(this.getGeneralUserPreferenceValue(prefName))},UserService.prototype.setHelpBubblesEnabled=function(enabled){var _this=this;enabled?UserPreferenceUiService.instance().enableAllHelpBubbles().then(function(response){var updatedGeneralPrefs=UserPreferenceUiService.instance().enableAllHelpBubbles_response(response);_this.injectorService.masterService().initData&&(_this.injectorService.masterService().initData.generalUserPreferences=updatedGeneralPrefs),NotificationService.instance().displayMessage(resourceManager.getString("ui","ms_helpPopupsEnabled"),"")}):(NotificationService.instance().displayMessage(resourceManager.getString("ui","ms_helpPopupsDisabled"),""),this.setGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.HELP_BUBBLE_ALL_ITEMS_DISABLED,!0),EventBusService.instance().dispatchEvent(EventConstants.UEV_DISABLE_HELP_POPUPS,{})),FlashService.instance().helpPopupsEnabledChange()},UserService.prototype.getGeneralUserPrefernces=function(){return this.injectorService.masterService()&&this.injectorService.masterService().initData?this.injectorService.masterService().initData.generalUserPreferences:null},UserService.prototype.setGeneralUserPreferenceBooleanValue=function(prefName,value){return this.setGeneralUserPreferenceValue(prefName,value.toString())},UserService.prototype.setGeneralUserPreferenceValue=function(prefName,value){var _this=this;return this.userPreferenceUiService.setGeneralUserPreference(prefName,value).then(function(){_this.fetchGeneralUserPreferences()})},UserService.prototype.fetchGeneralUserPreferences=function(){var _this=this;this.userPreferenceUiService.getGeneralUserPreferences(!1).then(function(response){var generalUserPrefs=_this.userPreferenceUiService.getGeneralUserPreferences_response(response);MasterService.instance().initData&&(MasterService.instance().initData.generalUserPreferences=generalUserPrefs),EventBusService.instance().dispatchEvent(UserService.UEV_GENERAL_USER_PREFERENCES_FETCHED,null)})},UserService.prototype.getUserPreferenceValue=function(prefName){var userPrefs=this.getUserPreferences();return Util.isDefAndNotNull(userPrefs)?userPrefs[prefName]:null},UserService.prototype.getUserPreferenceBooleanValue=function(prefName,defaultValue){var val=this.getUserPreferenceValue(prefName);return val?"true"===val:"undefined"!=typeof defaultValue?defaultValue:!1},UserService.prototype.getUserPreferences=function(){return this.injectorService.masterService()&&this.injectorService.masterService().userPreferences?this.injectorService.masterService().userPreferences:null},UserService.prototype.setUserPreferenceBooleanValue=function(prefName,value){this.setUserPreferenceValue(prefName,value.toString())},UserService.prototype.setUserPreferenceValue=function(prefName,value){var _this=this;return this.userPreferenceUiService.setOldUserPreference(prefName,value).then(function(setPreferenceState){var userPrefs=_this.getUserPreferences();return userPrefs&&(userPrefs[prefName]=value),SharedInjectorService.instance().$rootScope().$broadcast(UserService.UEV_USER_PREFERENCE_UPDATED,prefName),setPreferenceState})},UserService.prototype.setChartDateTimeFormat=function(){var dateFormat,timeFormat;this.injectorService.masterService()&&this.injectorService.masterService().userPreferences&&(dateFormat=this.injectorService.masterService().userPreferences[UserPreferenceConstants.DATE_FORMAT],timeFormat=this.injectorService.masterService().userPreferences[UserPreferenceConstants.TIME_FORMAT]),ChartUtil.setHighchartsGlobalSettings(dateFormat,timeFormat)},UserService.prototype.isMarketoUsageTrackingEnabled=function(){var enabled=!1,controllerConfigSetting=this.injectorService.masterService().getControllerConfigurationItemValue("usage.data.enabled");if(this.enableUsageTracking)enabled=!0;else if("true"!=controllerConfigSetting||"true"==this.injectorService.masterService().getAccountProperty("VERSION_CHECK_DISABLED"))enabled=!1;else{var productMode=this.injectorService.masterService().getProductModeFromCurrentAccount();enabled=productMode===MasterService.PRODUCT_PRO_TRIAL_MODE||productMode===MasterService.PRODUCT_LITE_MODE}return enabled},UserService.prototype.updateMarketoLead=function(account){if(account&&account.originalEmail&&this.isMarketoUsageTrackingEnabled()){var tokens=[];account.originalEmail&&account.originalEmail.length>0&&tokens.push("email="+account.originalEmail),account.originalFirstName&&account.originalFirstName.length>0&&tokens.push("fname="+account.originalFirstName),account.originalLastName&&account.originalLastName.length>0&&tokens.push("lname="+account.originalLastName),account.originalCompanyName&&account.originalCompanyName.length>0&&tokens.push("cname="+account.originalCompanyName);var leadInfoString=null;if(0!=tokens.length){leadInfoString=1==tokens.length?tokens[0]:tokens.join("&");var fnData={};fnData.fn=this.doUpdateMarketoLead,fnData.arguments=[ExternalUrls.PRO_TRIAL_LEAD_UPDATE_URL,leadInfoString],this.queueUserTrackingFunction(fnData)}}},UserService.prototype.doUpdateMarketoLead=function(url,data){this.isMarketoUsageTrackingEnabled()&&updateLead(url,data)},UserService.prototype.trackCurrentUrlParams=function(){var urlParams=new URLParams;this.sendUsageTrackingData(urlParams.location())},UserService.prototype.trackAction=function(actionName,description){this.sendUsageTrackingData(actionName,description)},UserService.prototype.sendUsageTrackingData=function(pageName,pageDescription,parameters){if(this.isMarketoUsageTrackingEnabled()){this.debugUsageTracking&&NotificationService.instance().displayMessage(pageName+" "+pageDescription,""),pageName&&"/"!=pageName.charAt(0)&&(pageName="/"+pageName),parameters||(parameters=[]),parameters.push(CollectionUtils.createNameValuePair(UserService.USC_PAGE_PREFIX,pageName)),pageDescription&&""!=pageDescription&&parameters.push(CollectionUtils.createNameValuePair(UserService.USC_DESCRIPTION,pageDescription));var accountName=this.getAccountName();accountName&&parameters.push(CollectionUtils.createNameValuePair(UserService.USC_ACCOUNT,accountName)),this.user&&this.user.email&&parameters.push(CollectionUtils.createNameValuePair(UserService.USC_EMAIL,this.user.email));for(var parameterStrings=[],i=0;i<parameters.length;i++)parameterStrings.push(parameters[i].name+"="+parameters[i].value);var fnData={};fnData.fn=this.doSendUsageTrackingData,fnData.arguments=[ExternalUrls.PRO_TRIAL_TRACKING_URL,parameterStrings.join("&")],this.queueUserTrackingFunction(fnData)}},UserService.prototype.sendQuestUsageStatistics=function(eventType,name){if(this.shouldSendStatistics()){var eventId=this.buildQuestEventId(eventType,name);this.sendUsageTrackingData(eventId)}},UserService.prototype.sendGettingStartedUsageStatistics=function(stageName,agentType){if(this.shouldSendStatistics()){var eventId=this.buildGettingStartedEventId(stageName,agentType);this.sendUsageTrackingData(eventId,"Agent Install Wizard")}},UserService.prototype.doSendUsageTrackingData=function(url,data){this.isMarketoUsageTrackingEnabled()&&sendUsageStatistics(ExternalUrls.PRO_TRIAL_TRACKING_URL,data)},UserService.prototype.queueUserTrackingFunction=function(trackingFunctionData){this.queue.push(trackingFunctionData),null==this.intervalPromise&&this.startInterval()},UserService.prototype.shouldSendStatistics=function(){return sendUsageStatistics&&this.isMarketoUsageTrackingEnabled()},UserService.prototype.buildGettingStartedEventId=function(stageName,agentType){var eventId="/AGENT_DOWNLOAD_WIZARD";return eventId+="_"+agentType.replace("AGENT_TYPE_",""),eventId+="_"+stageName},UserService.prototype.buildQuestEventId=function(eventType,name){var eventId="/";return eventId+=eventType,eventId+="_"+name.replace(/ /g,"_").toUpperCase()},UserService.prototype.startInterval=function(){var _this=this;this.stopInterval(),this.intervalPromise=this.$interval(function(){_this.onInterval()},this.intervalInMillis)},UserService.prototype.stopInterval=function(){null!=this.intervalPromise&&(this.$interval.cancel(this.intervalPromise),this.intervalPromise=null)},UserService.prototype.onInterval=function(){if(0==this.queue.length)this.stopInterval();else{var nextTrackingFunctionData=this.queue.shift();nextTrackingFunctionData&&nextTrackingFunctionData.fn.apply(this,nextTrackingFunctionData.arguments)}},UserService.prototype.createNameValuePair=function(key,value){return key&&0!=key.length&&value?key+"="+value:""},UserService.LOGIN_EVENT="loginEvent",UserService.UEV_GENERAL_USER_PREFERENCES_FETCHED="UEV_GENERAL_USER_PREFERENCES_FETCHED",UserService.UEV_USER_PREFERENCE_UPDATED="UEV_USER_PREFERENCE_UPDATED",UserService.SHOW_ONLY_BTS_WITH_PERF_DATA="SHOW_ONLY_BTS_WITH_PERF_DATA",UserService.SHOW_ONLY_SEP_WITH_PERF_DATA="SHOW_ONLY_SEP_WITH_PERF_DATA",UserService.DONT_SHOW_WELCOME_TO_UI="DONT_SHOW_WELCOME_TO_UI_4.1",UserService.DONT_SHOW_AGENT_ACCESS_KEY_MESSAGE="DONT_SHOW_AGENT_ACCESS_KEY_MESSAGE",UserService.AUTO_SELECT_COMPARE_VS_DEFAULT_BASELINE="AUTO_SELECT_COMPARE_VS_DEFAULT_BASELINE",UserService.NUMBER_OF_42_LOGINS="NUMBER_OF_42_LOGINS",UserService.SERVICE_NAME="userService",UserService.$inject=["$rootScope","$timeout","$interval","injectorService","userPreferenceUiService"],UserService.USC_PAGE_PREFIX="pid",UserService.USC_EMAIL="email",UserService.USC_ACCOUNT="account",UserService.USC_DESCRIPTION="description",UserService}();appdynamicsModule.service(UserService.SERVICE_NAME,UserService),define("app/services/UserService",function(){}),define("app/view/home/quests/popover/QuestPopoverController",["require","exports"],function(){var QuestPopoverController=function(){function QuestPopoverController($scope){this.$scope=$scope,$scope.controller=this}return QuestPopoverController.prototype.close=function(){var ele=angular.element(document.getElementById("ad-quest-popover"));ele.remove()},QuestPopoverController.$inject=["$scope"],QuestPopoverController}();return QuestPopoverController}),define("app/view/home/quests/popover/QuestPopoverDirective",["require","exports","./QuestPopoverController"],function(require,exports,QuestPopoverController){var QuestPopoverDirective=function(){function QuestPopoverDirective(){return{restrict:"E",templateUrl:"app/view/home/quests/popover/QuestPopover.html",replace:!1,scope:{adTitle:"=",adContent:"="},controller:QuestPopoverController}}return QuestPopoverDirective}();return adComponentsModule.directive(StringUtils.toCamelCase("ad-quest-popover"),QuestPopoverDirective),QuestPopoverDirective}),define("app/view/home/quests/AQuestService",["require","exports","app/view/home/quests/popover/QuestPopoverDirective"],function(require,exports,QuestPopoverDirective){var AQuestService=function(){function AQuestService($rootScope,$compile){var _this=this;this.$rootScope=$rootScope,this.$compile=$compile,$rootScope.$on(NavigationService.UEV_NAV_ACTION_HTML,function(){URLParams.getCurrentUrlParams().location()!==AQuestService.POPOVER_LOCATION&&_this.closePopover()}),this.$scope=$rootScope.$new(!0),this.$scope.controller=this}return AQuestService.prototype.getQuests=function(){return[]},AQuestService.prototype.getAll=function(state){var quests=this.getQuests(),questsComplete=0;return _.each(quests,function(quest){state[quest.id.toString()]&&(questsComplete++,quest.complete=!0),quest.disabled=!angular.isDefined(state[quest.prerequisite.toString()])}),{progress:Math.round(questsComplete/quests.length*100),quests:quests}},AQuestService.prototype.getNext=function(state){var quests=this.getQuests(),next=[],questsComplete=0;return _.each(quests,function(quest){state[quest.id.toString()]?questsComplete++:state[quest.prerequisite.toString()]&&next.push(quest)}),{progress:Math.round(questsComplete/quests.length*100),quests:next}},AQuestService.prototype.openPopover=function(title,content){this.questPopoverTitle=title,this.questPopoverContent=content;var body=angular.element(document.body),ele=angular.element("<ad-quest-popover id='ad-quest-popover' ad-title='controller.questPopoverTitle' ad-content='controller.questPopoverContent'></ad-quest-popover>");this.$compile(ele)(this.$scope),body.append(ele)},AQuestService.prototype.closePopover=function(){var ele=document.getElementById("ad-quest-popover");ele&&angular.element(ele).remove()},AQuestService.prototype.getQuestString=function(str){return ResourceManager.instance().getString("productTour",str)},AQuestService.prototype.onStartQuest=function(fn,name){UserService.instance().sendQuestUsageStatistics(AQuestService.QUEST_START,name),fn()},AQuestService.QUEST_COMPLETE="QUEST_COMPLETE",AQuestService.QUEST_START="QUEST_START",AQuestService.$inject=["$rootScope","$compile"],AQuestService}();return AQuestService}),define("app/view/home/quests/QuestConstants",["require","exports"],function(){var QuestConstants=function(){function QuestConstants(){}return QuestConstants.NO_PREREQUISITES=-1,QuestConstants.APM={INSTRUMENT_APPLICATION:100,PRODUCT_TOUR:101,TRANSACTION_SNAPSHOT:102,SETUP_ALERTS:103,CREATE_CUSTOM_DASHBOARD:104},QuestConstants.DB={INSTRUMENT_DATABASE:301,FAKE:399},QuestConstants.EUM_WEB={INSTRUMENT:401,PRODUCT_TOUR:402,BROWSER_SNAPSHOT:403,BROWSER_SESSION:404,BROWSER_VISUALIZATION:405,HEALTH_RULE:406,SETUP_ALERTS:407,SYNTHETIC_JOB:408,SYNTHETIC_SESSION:409,FILTER_SYNTHETIC:410,SYNTHETIC_ON_DEMAND:411},QuestConstants.EUM_MOBILE={INSTRUMENT:501,PRODUCT_TOUR:502,NETWORK_SNAPSHOT:503,MOBILE_SESSION:504,CRASH_SNAPSHOT:505,SETUP_DYSM:506},QuestConstants
}();return QuestConstants});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/home/quests/AppQuestService",["require","exports","./AQuestService","app/view/home/quests/QuestConstants"],function(require,exports,AQuestService,QuestConstants){var AppQuestService=function(_super){function AppQuestService($rootScope,$compile){_super.call(this,$rootScope,$compile),this.$rootScope=$rootScope,this.$compile=$compile}return __extends(AppQuestService,_super),AppQuestService.instance=function(){return AngularUtil.getADInjector().get(AppQuestService.serviceName)},AppQuestService.prototype.getQuests=function(){var _this=this;return AppQuestService.APP_QUESTS?AppQuestService.APP_QUESTS:(AppQuestService.APP_QUESTS=[{id:QuestConstants.APM.INSTRUMENT_APPLICATION,name:this.getQuestString("ms_instrumentAnApplication"),complete:!1,disabled:!1,onStart:function(){_this.onStartQuest(_this.onInstrumentApplication.bind(_this),_this.getQuestString("ms_instrumentAnApplication"))},prerequisite:QuestConstants.NO_PREREQUISITES},{id:QuestConstants.APM.PRODUCT_TOUR,name:this.getQuestString("ms_takeAProductTour"),complete:!1,disabled:!1,onStart:function(){_this.onStartApmQuest(_this.onProductTour.bind(_this),_this.getQuestString("ms_takeAProductTour"))},prerequisite:QuestConstants.APM.INSTRUMENT_APPLICATION},{id:QuestConstants.APM.TRANSACTION_SNAPSHOT,name:this.getQuestString("ms_viewATransactionSnapshot"),complete:!1,disabled:!1,onStart:function(){_this.onStartApmQuest(_this.onTransactionSnapshot.bind(_this),_this.getQuestString("ms_viewATransactionSnapshot"))},prerequisite:QuestConstants.APM.INSTRUMENT_APPLICATION},{id:QuestConstants.APM.SETUP_ALERTS,name:this.getQuestString("ms_setupApplicationAlert"),complete:!1,disabled:!1,onStart:function(){_this.onStartApmQuest(_this.onSetupAlert.bind(_this),_this.getQuestString("ms_setupApplicationAlert"))},prerequisite:QuestConstants.APM.INSTRUMENT_APPLICATION},{id:QuestConstants.APM.CREATE_CUSTOM_DASHBOARD,name:this.getQuestString("ms_createACustomDashboard"),complete:!1,disabled:!1,onStart:function(){_this.onStartQuest(_this.onCreateCustomDashboard.bind(_this),_this.getQuestString("ms_createACustomDashboard"))},prerequisite:QuestConstants.APM.INSTRUMENT_APPLICATION}],AppQuestService.APP_QUESTS)},AppQuestService.prototype.onStartApmQuest=function(fn,name){var _this=this;ApplicationUiService.instance().getApmApplications().then(function(applications){applications.length>0?_this.onStartQuest(fn,name):_this.onStartQuest(_this.onInstrumentApplicationAsPrereq.bind(_this),name)})},AppQuestService.prototype.onInstrumentApplication=function(){HomeViewService.instance().viewGettingStarted(),AQuestService.POPOVER_LOCATION=NavigationDataConstants.AD_GETTING_STARTED,this.openPopover(this.getQuestString("ms_instrumentAnApplication"),this.getQuestString("ms_instrumentApplicationContent"))},AppQuestService.prototype.onInstrumentApplicationAsPrereq=function(){HomeViewService.instance().viewGettingStarted(),AQuestService.POPOVER_LOCATION=NavigationDataConstants.AD_GETTING_STARTED,this.openPopover(this.getQuestString("ms_instrumentAnApplication"),this.getQuestString("ms_instrumentApplicationAsPrereqContent")+"<br>"+this.getQuestString("ms_instrumentApplicationContent"))},AppQuestService.prototype.onProductTour=function(){HomeViewService.instance().viewProductTourByAgentType(ProductTourService.APM_TOUR),AQuestService.POPOVER_LOCATION=NavigationDataConstants.AD_PRODUCT_TOUR,this.openPopover(this.getQuestString("ms_takeAProductTour"),this.getQuestString("ms_takeAProductTourContent"))},AppQuestService.prototype.onTransactionSnapshot=function(){var _this=this;HomeUiService.instance().getApplications().then(function(applications){if(applications&&0!==applications.length){var appId=applications[0].id;ApplicationViewService.instance().viewAppSnapshots(appId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.APP_ALL_SNAPSHOT_LIST,_this.openPopover(_this.getQuestString("ms_viewATransactionSnapshot"),_this.getQuestString("ms_snapshotContent"))}})},AppQuestService.prototype.onSetupAlert=function(){var _this=this;HomeUiService.instance().getApplications().then(function(applications){if(applications&&0!==applications.length){var appId=applications[0].id;ApplicationViewService.instance().viewAppAlertRespond(appId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.ALERT_RESPOND_APP_HOME,_this.openPopover(_this.getQuestString("ms_setupApplicationAlert"),_this.getQuestString("ms_setupAlertContent"))}})},AppQuestService.prototype.onCreateCustomDashboard=function(){CustomDashboardViewService.instance().viewCustomDashboardList(),AQuestService.POPOVER_LOCATION=NavigationDataConstants.DASHBOARD_LIST,this.openPopover(this.getQuestString("ms_createACustomDashboard"),this.getQuestString("ms_createDashboardContent"))},AppQuestService.serviceName="appQuestService",AppQuestService.$inject=["$rootScope","$compile"],AppQuestService}(AQuestService);return adComponentsModule.service(AppQuestService.serviceName,AppQuestService),AppQuestService});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/home/quests/DBQuestService",["require","exports","./AQuestService","app/view/home/quests/QuestConstants"],function(require,exports,AQuestService,QuestConstants){var DBQuestService=function(_super){function DBQuestService($rootScope,$compile){_super.call(this,$rootScope,$compile),this.$rootScope=$rootScope,this.$compile=$compile}return __extends(DBQuestService,_super),DBQuestService.instance=function(){return AngularUtil.getADInjector().get(DBQuestService.serviceName)},DBQuestService.prototype.getQuests=function(){var _this=this;return DBQuestService.DB_QUESTS?DBQuestService.DB_QUESTS:(DBQuestService.DB_QUESTS=[{id:QuestConstants.DB.INSTRUMENT_DATABASE,name:this.getQuestString("ms_instrumentADatabase"),complete:!1,disabled:!1,onStart:function(){_this.onInstrumentDatabase()},prerequisite:QuestConstants.NO_PREREQUISITES},{id:QuestConstants.DB.FAKE,name:"Fake DB Quest 1",complete:!1,disabled:!1,onStart:function(){},prerequisite:QuestConstants.DB.INSTRUMENT_DATABASE}],DBQuestService.DB_QUESTS)},DBQuestService.prototype.onInstrumentDatabase=function(){HomeViewService.instance().viewDBGettingStarted(),AQuestService.POPOVER_LOCATION=NavigationDataConstants.GETTING_STARTED_DB,this.openPopover(this.getQuestString("ms_instrumentADatabase"),this.getQuestString("ms_instrumentDatabaseContent"))},DBQuestService.serviceName="dbQuestService",DBQuestService.$inject=["$rootScope","$compile"],DBQuestService}(AQuestService);return adComponentsModule.service(DBQuestService.serviceName,DBQuestService),DBQuestService});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/home/quests/EumWebQuestService",["require","exports","./AQuestService","app/view/home/quests/QuestConstants"],function(require,exports,AQuestService,QuestConstants){var EumWebQuestService=function(_super){function EumWebQuestService($rootScope,$compile){_super.call(this,$rootScope,$compile),this.$rootScope=$rootScope,this.$compile=$compile}return __extends(EumWebQuestService,_super),EumWebQuestService.instance=function(){return AngularUtil.getADInjector().get(EumWebQuestService.serviceName)},EumWebQuestService.prototype.getQuests=function(){var _this=this;return EumWebQuestService.EUM_WEB_QUESTS?EumWebQuestService.EUM_WEB_QUESTS:(EumWebQuestService.EUM_WEB_QUESTS=[{id:QuestConstants.EUM_WEB.INSTRUMENT,name:this.getQuestString("ms_installAgentsStartMonitoring"),complete:!1,disabled:!1,onStart:function(){_this.onStartQuest(_this.onInstrument.bind(_this),_this.getQuestString("ms_installAgentsStartMonitoring"))},prerequisite:QuestConstants.NO_PREREQUISITES},{id:QuestConstants.EUM_WEB.PRODUCT_TOUR,name:this.getQuestString("ms_takeAProductTour"),complete:!1,disabled:!1,onStart:function(){_this.onStartEumWebQuest(_this.onProductTour.bind(_this),_this.getQuestString("ms_takeAProductTour"))},prerequisite:QuestConstants.EUM_WEB.INSTRUMENT},{id:QuestConstants.EUM_WEB.BROWSER_SNAPSHOT,name:this.getQuestString("ms_viewABrowserSnapshot"),complete:!1,disabled:!1,onStart:function(){_this.onStartEumWebQuest(_this.onBrowserSnapshot.bind(_this),_this.getQuestString("ms_viewABrowserSnapshot"))},prerequisite:QuestConstants.EUM_WEB.INSTRUMENT},{id:QuestConstants.EUM_WEB.BROWSER_SESSION,name:this.getQuestString("ms_viewABrowserSession"),complete:!1,disabled:!1,onStart:function(){_this.onStartEumWebQuest(_this.onViewEumWebSession.bind(_this),_this.getQuestString("ms_viewABrowserSession"))},prerequisite:QuestConstants.EUM_WEB.INSTRUMENT},{id:QuestConstants.EUM_WEB.BROWSER_VISUALIZATION,name:this.getQuestString("ms_filterABrowserSession"),complete:!1,disabled:!1,onStart:function(){_this.onStartEumWebQuest(_this.onFilterEumWebSession.bind(_this),_this.getQuestString("ms_filterABrowserSession"))},prerequisite:QuestConstants.EUM_WEB.INSTRUMENT},{id:QuestConstants.EUM_WEB.SYNTHETIC_JOB,name:this.getQuestString("ms_createASyntheticJob"),complete:!1,disabled:!1,onStart:function(){_this.onStartEumWebQuest(_this.onCreateSyntheticJob.bind(_this),_this.getQuestString("ms_createASyntheticJob"))},prerequisite:QuestConstants.EUM_WEB.INSTRUMENT},{id:QuestConstants.EUM_WEB.SYNTHETIC_SESSION,name:this.getQuestString("ms_viewASyntheticSession"),complete:!1,disabled:!1,onStart:function(){_this.onStartEumWebQuest(_this.onViewSyntheticSession.bind(_this),_this.getQuestString("ms_viewASyntheticSession"))},prerequisite:QuestConstants.EUM_WEB.INSTRUMENT},{id:QuestConstants.EUM_WEB.SYNTHETIC_ON_DEMAND,name:this.getQuestString("ms_syntheticOnDemand"),complete:!1,disabled:!1,onStart:function(){_this.onStartEumWebQuest(_this.onSyntheticOnDemand.bind(_this),_this.getQuestString("ms_syntheticOnDemand"))},prerequisite:QuestConstants.EUM_WEB.INSTRUMENT}],EumWebQuestService.EUM_WEB_QUESTS)},EumWebQuestService.prototype.onStartEumWebQuest=function(fn,name){var _this=this;EUMApplicationsUiService.instance().getEumWebApplications().then(function(applications){applications.length>0?_this.onStartQuest(fn,name):_this.onStartQuest(_this.onInstrumentAsPrereq.bind(_this),name)})},EumWebQuestService.prototype.onInstrument=function(){HomeViewService.instance().viewEumWebGettingStarted(),AQuestService.POPOVER_LOCATION=NavigationDataConstants.AGENT_INSTALL_WIZARD,this.openPopover(this.getQuestString("ms_installAgentsStartMonitoring"),this.getQuestString("ms_installBrowserAgentContent"))},EumWebQuestService.prototype.onInstrumentAsPrereq=function(){HomeViewService.instance().viewEumWebGettingStarted(),AQuestService.POPOVER_LOCATION=NavigationDataConstants.AGENT_INSTALL_WIZARD,this.openPopover(this.getQuestString("ms_installAgentsStartMonitoring"),this.getQuestString("ms_installBrowserAgentAsPrereqContent")+"<br>"+this.getQuestString("ms_installBrowserAgentContent"))},EumWebQuestService.prototype.onProductTour=function(){HomeViewService.instance().viewProductTourByAgentType(ProductTourService.EUM_TOUR),AQuestService.POPOVER_LOCATION=NavigationDataConstants.AD_PRODUCT_TOUR,this.openPopover(this.getQuestString("ms_takeAProductTour"),this.getQuestString("ms_takeAProductTourContent"))},EumWebQuestService.prototype.onBrowserSnapshot=function(){var _this=this;EUMApplicationsUiService.instance().getEumWebApplications().then(function(applications){if(applications&&0!==applications.length){var appId=applications[0].id;EumViewService.instance().viewWebBrowserSnapshotList(appId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.EUM_BROWSER_SNAPSHOTS,_this.openPopover(_this.getQuestString("ms_viewABrowserSnapshot"),_this.getQuestString("ms_browserSnapshotContent"))}})},EumWebQuestService.prototype.onViewEumWebSession=function(){var _this=this;EUMApplicationsUiService.instance().getEumWebApplications().then(function(applications){if(applications&&0!==applications.length){var appId=applications[0].id;EumViewService.instance().viewEumWebSessions(appId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.EUM_WEB_SESSION_ANALYTICS,_this.openPopover(_this.getQuestString("ms_viewABrowserSession"),_this.getQuestString("ms_browserSessionContent"))}})},EumWebQuestService.prototype.onFilterEumWebSession=function(){var _this=this;EUMApplicationsUiService.instance().getEumWebApplications().then(function(applications){if(applications&&0!==applications.length){var appId=applications[0].id;EumViewService.instance().viewEumWebSessionsVisualization(appId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.EUM_WEB_SESSION_ANALYTICS,_this.openPopover(_this.getQuestString("ms_filterABrowserSession"),_this.getQuestString("ms_filterSessionContent"))}})},EumWebQuestService.prototype.onCreateSyntheticJob=function(){var _this=this;EUMApplicationsUiService.instance().getEumWebApplications().then(function(applications){if(applications&&0!==applications.length){var appId=applications[0].id;EumViewService.instance().viewSyntheticScheduleList(appId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.EUM_SYNTHETIC_SCHEDULE_LIST,_this.openPopover(_this.getQuestString("ms_createASyntheticJob"),_this.getQuestString("ms_createASyntheticJobContent"))}})},EumWebQuestService.prototype.onViewSyntheticSession=function(){var _this=this;EUMApplicationsUiService.instance().getEumWebApplications().then(function(applications){if(applications&&0!==applications.length){var appId=applications[0].id;EumViewService.instance().viewSyntheticAnalyze(appId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.EUM_SYNTHETIC_SESSION_ANALYTICS,_this.openPopover(_this.getQuestString("ms_viewASyntheticSession"),_this.getQuestString("ms_viewASyntheticSessionContent"))}})},EumWebQuestService.prototype.onFilterSyntheticSession=function(){var _this=this;EUMApplicationsUiService.instance().getEumWebApplications().then(function(applications){if(applications&&0!==applications.length){var appId=applications[0].id;EumViewService.instance().viewSyntheticVisualization(appId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.EUM_SYNTHETIC_SESSION_ANALYTICS,_this.openPopover(_this.getQuestString("ms_filterASyntheticSession"),_this.getQuestString("ms_filterASyntheticSessionContent"))}})},EumWebQuestService.prototype.onSyntheticOnDemand=function(){var _this=this;EUMApplicationsUiService.instance().getEumWebApplications().then(function(applications){if(applications&&0!==applications.length){var appId=applications[0].id;EumViewService.instance().viewSyntheticOnDemand(appId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.EUM_SYNTHETIC_ON_DEMAND,_this.openPopover(_this.getQuestString("ms_syntheticOnDemand"),_this.getQuestString("ms_syntheticOnDemandContent"))}})},EumWebQuestService.serviceName="EumWebQuestService",EumWebQuestService.$inject=["$rootScope","$compile"],EumWebQuestService}(AQuestService);return adComponentsModule.service(EumWebQuestService.serviceName,EumWebQuestService),EumWebQuestService});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/home/quests/EumMobileQuestService",["require","exports","./AQuestService","app/view/home/quests/QuestConstants"],function(require,exports,AQuestService,QuestConstants){var EumMobileQuestService=function(_super){function EumMobileQuestService($rootScope,$compile){_super.call(this,$rootScope,$compile),this.$rootScope=$rootScope,this.$compile=$compile}return __extends(EumMobileQuestService,_super),EumMobileQuestService.instance=function(){return AngularUtil.getADInjector().get(EumMobileQuestService.serviceName)},EumMobileQuestService.prototype.getQuests=function(){var _this=this;return EumMobileQuestService.EUM_MOBILE_QUESTS?EumMobileQuestService.EUM_MOBILE_QUESTS:(EumMobileQuestService.EUM_MOBILE_QUESTS=[{id:QuestConstants.EUM_MOBILE.INSTRUMENT,name:this.getQuestString("ms_installAgentsStartMonitoring"),complete:!1,disabled:!1,onStart:function(){_this.onStartQuest(_this.onInstrument.bind(_this),_this.getQuestString("ms_installAgentsStartMonitoring"))},prerequisite:QuestConstants.NO_PREREQUISITES},{id:QuestConstants.EUM_MOBILE.PRODUCT_TOUR,name:this.getQuestString("ms_takeAProductTour"),complete:!1,disabled:!1,onStart:function(){_this.onStartEumMobileQuest(_this.onProductTour.bind(_this),_this.getQuestString("ms_takeAProductTour"))},prerequisite:QuestConstants.EUM_MOBILE.INSTRUMENT},{id:QuestConstants.EUM_MOBILE.NETWORK_SNAPSHOT,name:this.getQuestString("ms_viewANetworkSnapshot"),complete:!1,disabled:!1,onStart:function(){_this.onStartEumMobileQuest(_this.onNetworkSnapshot.bind(_this),_this.getQuestString("ms_viewANetworkSnapshot"))},prerequisite:QuestConstants.EUM_MOBILE.INSTRUMENT},{id:QuestConstants.EUM_MOBILE.MOBILE_SESSION,name:this.getQuestString("ms_viewMobileSession"),complete:!1,disabled:!1,onStart:function(){_this.onStartEumMobileQuest(_this.onViewMobileSession.bind(_this),_this.getQuestString("ms_viewMobileSession"))},prerequisite:QuestConstants.EUM_MOBILE.INSTRUMENT},{id:QuestConstants.EUM_MOBILE.CRASH_SNAPSHOT,name:this.getQuestString("ms_viewCrashSnapshot"),complete:!1,disabled:!1,onStart:function(){_this.onStartEumMobileQuest(_this.onViewCrashSnapshot.bind(_this),_this.getQuestString("ms_viewCrashSnapshot"))},prerequisite:QuestConstants.EUM_MOBILE.INSTRUMENT},{id:QuestConstants.EUM_MOBILE.SETUP_DYSM,name:this.getQuestString("ms_setupDsym"),complete:!1,disabled:!1,onStart:function(){_this.onStartEumMobileQuest(_this.onSetupDsym.bind(_this),_this.getQuestString("ms_setupDsym"))},prerequisite:QuestConstants.EUM_MOBILE.INSTRUMENT}],EumMobileQuestService.EUM_MOBILE_QUESTS)},EumMobileQuestService.prototype.onStartEumMobileQuest=function(fn,name){var _this=this;EUMApplicationsUiService.instance().getAllMobileApplications().then(function(applications){applications.length>0?_this.onStartQuest(fn,name):_this.onStartQuest(_this.onInstrumentAsPrereq.bind(_this),name)})},EumMobileQuestService.prototype.onInstrument=function(){HomeViewService.instance().viewGettingStarted(),AQuestService.POPOVER_LOCATION=NavigationDataConstants.AD_GETTING_STARTED,this.openPopover(this.getQuestString("ms_installAgentsStartMonitoring"),this.getQuestString("ms_installMobileAgentContent"))},EumMobileQuestService.prototype.onInstrumentAsPrereq=function(){HomeViewService.instance().viewGettingStarted(),AQuestService.POPOVER_LOCATION=NavigationDataConstants.AD_GETTING_STARTED,this.openPopover(this.getQuestString("ms_installAgentsStartMonitoring"),this.getQuestString("ms_installMobileAgentAsPrereqContent")+"<br>"+this.getQuestString("ms_installMobileAgentContent"))},EumMobileQuestService.prototype.onProductTour=function(){HomeViewService.instance().viewProductTourByAgentType(ProductTourService.MOBILE_TOUR),AQuestService.POPOVER_LOCATION=NavigationDataConstants.AD_PRODUCT_TOUR,this.openPopover(this.getQuestString("ms_takeAProductTour"),this.getQuestString("ms_takeAProductTourContent"))},EumMobileQuestService.prototype.onNetworkSnapshot=function(){var _this=this;EUMApplicationsUiService.instance().getAllMobileApplications().then(function(mobileApps){if(mobileApps&&0!==mobileApps.length){var mobileApp=mobileApps[0],appId=mobileApp.applicationId,mobileAppId=mobileApp.id,platform=mobileApp.platform;EumViewService.instance().viewRequestListForMobileApp(appId,platform,mobileAppId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.EUM_REQUEST_SNAPSHOT_LIST,_this.openPopover(_this.getQuestString("ms_viewANetworkSnapshot"),_this.getQuestString("ms_networkSnapshotContent"))}})},EumMobileQuestService.prototype.onViewMobileSession=function(){var _this=this;EUMApplicationsUiService.instance().getAllMobileApplications().then(function(mobileApps){if(mobileApps&&0!==mobileApps.length){var mobileApp=mobileApps[0],appId=mobileApp.applicationId,mobileAppId=mobileApp.id,platform=mobileApp.platform;EumViewService.instance().viewMobileSessionAnalyze(appId,platform,mobileAppId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.EUM_MOBILE_SESSION_ANALYTICS,_this.openPopover(_this.getQuestString("ms_viewMobileSession"),_this.getQuestString("ms_mobileSessionContent"))}})},EumMobileQuestService.prototype.onViewCrashSnapshot=function(){var _this=this;EUMApplicationsUiService.instance().getAllMobileApplications().then(function(mobileApps){if(mobileApps&&0!==mobileApps.length){var mobileApp=mobileApps[0],appId=mobileApp.applicationId,mobileAppId=mobileApp.id,platform=mobileApp.platform;EumViewService.instance().viewCrashListForMobileApp(appId,platform,mobileAppId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.EUM_CRASH_LIST,_this.openPopover(_this.getQuestString("ms_viewCrashSnapshot"),_this.getQuestString("ms_crashSnapshotContent"))}})},EumMobileQuestService.prototype.onSetupDsym=function(){var _this=this;EUMApplicationsUiService.instance().getAllMobileApplications().then(function(mobileApps){if(mobileApps&&0!==mobileApps.length){var mobileApp=mobileApps[0],appId=mobileApp.applicationId,mobileAppId=mobileApp.id,platform=mobileApp.platform;EumViewService.instance().viewMobileConfig(appId,platform,mobileAppId),AQuestService.POPOVER_LOCATION=NavigationDataConstants.EUM_MOBILE_CONFIG,_this.openPopover(_this.getQuestString("ms_setupDsym"),_this.getQuestString("ms_setupDsymContent"))}})},EumMobileQuestService.serviceName="EumMobileQuestService",EumMobileQuestService.$inject=["$rootScope","$compile"],EumMobileQuestService}(AQuestService);return adComponentsModule.service(EumMobileQuestService.serviceName,EumMobileQuestService),EumMobileQuestService}),define("app/services/QuestStateService",["require","exports","app/view/home/quests/AQuestService","app/view/home/quests/AppQuestService","app/view/home/quests/DBQuestService","app/view/home/quests/EumWebQuestService","app/view/home/quests/EumMobileQuestService","app/view/home/quests/QuestConstants"],function(require,exports,AQuestService,AppQuestService,DBQuestService,EumWebQuestService,EumMobileQuestService,QuestConstants){var QuestStateService=function(){function QuestStateService($rootScope,$q){var _this=this;this.$inject=["$rootScope","$q"],this.$q=$q,this.$rootScope=$rootScope,ApplicationUiService.instance().getApmApplications().then(function(applications){applications.length>0&&_this.completeQuest(QuestConstants.APM.INSTRUMENT_APPLICATION)}),EUMApplicationsUiService.instance().getEumWebApplications().then(function(applications){applications.length>0&&_this.completeQuest(QuestConstants.EUM_WEB.INSTRUMENT)}),EUMApplicationsUiService.instance().getAllMobileApplications().then(function(applications){applications.length>0&&_this.completeQuest(QuestConstants.EUM_MOBILE.INSTRUMENT)}),this.setupEventListeners()}return QuestStateService.instance=function(){return AngularUtil.getADInjector().get(QuestStateService.SERVICE_NAME)},QuestStateService.prototype.getQuestApplications=function(){return this.questApplications||(this.questApplications=[{name:ResourceManager.instance().getString("ui","ms_applicationPerformanceMonitoring"),getState:QuestStateService.instance().getAppQuestState},{name:ResourceManager.instance().getString("ui","ms_eumWebAppsNavZoneLabel"),getState:QuestStateService.instance().getEumWebQuestState},{name:ResourceManager.instance().getString("ui","ms_eumMobileAppsNavZoneLabel"),getState:QuestStateService.instance().getEumMobileQuestState}]),this.questApplications},QuestStateService.prototype.getState=function(){var _this=this,deferred=this.$q.defer();return this.state?deferred.resolve(this.state):UserPreferenceUiService.instance().getQuestState().then(function(userPreference){if(_this.state={"-1":!0},userPreference.value)for(var completed=userPreference.value.completed,i=0;i<completed.length;i++)_this.state[completed[i].toString()]=!0;deferred.resolve(_this.state)}),deferred.promise},QuestStateService.prototype.completeQuest=function(questId){this.isQuestComplete(questId)||(this.setState(questId),AppQuestService.instance().closePopover(),EventBusService.instance().dispatchEvent(QuestStateService.QUEST_STATE_CHANGED,null),this.questIdToNameMap||this.initQuestIdToNameMap(),UserService.instance().sendQuestUsageStatistics(AQuestService.QUEST_COMPLETE,this.questIdToNameMap[questId]))},QuestStateService.prototype.getAppQuestState=function(){var deferred=this.$q.defer();return this.getState().then(function(state){deferred.resolve(AppQuestService.instance().getAll(state))}),deferred.promise},QuestStateService.prototype.getDBQuestState=function(){var deferred=this.$q.defer();return this.getState().then(function(state){deferred.resolve(DBQuestService.instance().getAll(state))}),deferred.promise},QuestStateService.prototype.getEumWebQuestState=function(){var deferred=this.$q.defer();return this.getState().then(function(state){deferred.resolve(EumWebQuestService.instance().getAll(state))}),deferred.promise},QuestStateService.prototype.getEumMobileQuestState=function(){var deferred=this.$q.defer();return this.getState().then(function(state){deferred.resolve(EumMobileQuestService.instance().getAll(state))}),deferred.promise},QuestStateService.prototype.setState=function(questId){var _this=this;this.state?(this.state[questId.toString()]=!0,UserPreferenceUiService.instance().markQuestCompleted(questId)):this.getState().then(function(){_this.state[questId.toString()]=!0,UserPreferenceUiService.instance().markQuestCompleted(questId)})},QuestStateService.prototype.isQuestComplete=function(questId){return this.state?this.state[questId.toString()]===!0:!1},QuestStateService.prototype.initQuestIdToNameMap=function(){var _this=this;this.questIdToNameMap={};var appQuests=AppQuestService.instance().getQuests();_.each(appQuests,function(quest){_this.questIdToNameMap[quest.id]=quest.name});EumMobileQuestService.instance().getQuests();_.each(appQuests,function(quest){_this.questIdToNameMap[quest.id]=quest.name});EumWebQuestService.instance().getQuests();_.each(appQuests,function(quest){_this.questIdToNameMap[quest.id]=quest.name})},QuestStateService.prototype.setupEventListeners=function(){var _this=this;EventBusService.instance().registerEventListener(ProductTourService.UEV_APM_PRODUCT_TOUR_COMPLETED,function(){_this.completeQuest(QuestConstants.APM.PRODUCT_TOUR)},this.$rootScope),EventBusService.instance().registerEventListener(EventConstants.UEV_CUSTOM_DASHBOARD_CREATE,function(){_this.completeQuest(QuestConstants.APM.CREATE_CUSTOM_DASHBOARD)},this.$rootScope),EventBusService.instance().registerEventListener(EventConstants.UEV_APM_SNAPSHOT_VIEW,function(){_this.completeQuest(QuestConstants.APM.TRANSACTION_SNAPSHOT)},this.$rootScope),EventBusService.instance().registerEventListener(EventConstants.UEV_APM_APP_ALERT,function(){_this.completeQuest(QuestConstants.APM.SETUP_ALERTS)},this.$rootScope),EventBusService.instance().registerEventListener(ProductTourService.UEV_EUM_WEB_PRODUCT_TOUR_COMPLETED,function(){_this.completeQuest(QuestConstants.EUM_WEB.PRODUCT_TOUR)},this.$rootScope),EventBusService.instance().registerEventListener(ProductTourService.UEV_EUM_MOBILE_PRODUCT_TOUR_COMPLETED,function(){_this.completeQuest(QuestConstants.EUM_MOBILE.PRODUCT_TOUR)},this.$rootScope),EventBusService.instance().registerEventListener(EventConstants.UEV_EUM_MOBILE_REQUEST_SNAPSHOT,function(){_this.completeQuest(QuestConstants.EUM_MOBILE.NETWORK_SNAPSHOT)},this.$rootScope),EventBusService.instance().registerEventListener(EventConstants.UEV_EUM_MOBILE_SETUP_DSYM,function(){_this.completeQuest(QuestConstants.EUM_MOBILE.SETUP_DYSM)},this.$rootScope)},QuestStateService.SERVICE_NAME="QuestStateService",QuestStateService.QUEST_STATE_CHANGED="QUEST_STATE_CHANGED",QuestStateService.QUESTS_APP_APM=0,QuestStateService.QUESTS_EUM_WEB=1,QuestStateService.QUESTS_EUM_MOBILE=2,QuestStateService}();return adComponentsModule.service(QuestStateService.SERVICE_NAME,QuestStateService),QuestStateService});var SampleAppDownloadService=function(){function SampleAppDownloadService($rootScope,$http,notificationService){this.$rootScope=$rootScope,this.$http=$http,this.notificationService=notificationService}return SampleAppDownloadService.prototype.downloadSampleApplication=function(accountName,accountAccessKey,controllerHost,controllerPort,controllerSSLEnabled,agentVersion,privateKey){{var query=new SampleAppDownloadQuery(accountName,accountAccessKey,controllerHost,controllerPort,controllerSSLEnabled,agentVersion,privateKey);query.generateQueryData()}BrowserUtils.isBrowserInternetExplorer9orLess()&&"undefined"!=typeof XDomainRequest?this.invokeDownloadForIE9OrLess(query):this.invokeDownload(query)},SampleAppDownloadService.prototype.invokeDownloadForIE9OrLess=function(query){var _this=this;ADLoggerService.log("AgentInstallWizardController.onStartDownload: IE9 case; XDomainRequest to url "+queryUrl);var parameterQueryString=decodeURIComponent($.param(query.generateQueryData())),queryUrl=ExternalUrls.QA_URL;queryUrl=queryUrl+"?"+parameterQueryString;var xdr=new XDomainRequest;try{xdr.open("get",queryUrl),xdr.onprogress=function(){ADLoggerService.log("Querying for getting link for download package...")},xdr.ontimeout=function(){ADLoggerService.log("Query for getting link for download package timed-out.")},xdr.onload=function(){_this.downloadFileAtURL(xdr.responseText)},xdr.onerror=function(){_this.displayDownloadServerError(xdr.responseText)},xdr.timeout=SampleAppDownloadService.PACKAGE_QUERY_TIMEOUT,setTimeout(function(){xdr.send()},0)}catch(e){ADLoggerService.error("Agent download attempt on IE9 failed. Try running this app with https."),this.displayDownloadServerError(e)}},SampleAppDownloadService.prototype.invokeDownload=function(query){var _this=this,parameters=query.generateQueryData();this.$http({method:"GET",url:ExternalUrls.PRODUCTION_URL,params:parameters,headers:{"content-type":"text/plain"}}).success(function(data){_this.downloadFileAtURL(data)}).error(function(data,status){_this.displayDownloadServerError(status)})},SampleAppDownloadService.prototype.downloadFileAtURL=function(url){NotificationService.instance().displayResourceMessage("ms_startingFileDownload"),window.location.href=url},SampleAppDownloadService.prototype.displayDownloadServerError=function(message){ADLoggerService.error("Error getting URL for download package: "+message),BrowserUtils.isBrowserInternetExplorer9orLess()?this.notificationService.displayError(resourceManager.getString("ui","ms_errorWhileRetrievingTheAgentIE9"),""):this.notificationService.displayError(resourceManager.getString("ui","ms_errorWhileRetrievingTheAgent"),"")},SampleAppDownloadService.PACKAGE_QUERY_TIMEOUT=10*DateTimeUtil.MILLISEC_PER_SEC,SampleAppDownloadService.$inject=["$rootScope","$http","notificationService"],SampleAppDownloadService}();appdynamicsModule.service("sampleAppDownloadService",SampleAppDownloadService);var SampleAppDownloadQuery=function(){function SampleAppDownloadQuery(accountName,accountAccessKey,controllerHost,controllerPort,controllerSSLEnabled,agentVersion,privateKey){this.accountName=accountName,this.accountAccessKey=accountAccessKey,this.controllerHost=controllerHost,this.controllerPort=controllerPort,this.controllerSSLEnabled=controllerSSLEnabled,this.agentVersion=agentVersion,this.privateKey=privateKey}return SampleAppDownloadQuery.prototype.generateQueryData=function(){var now=(new Date).getTime().toString(),rtn=new Object;return rtn[SampleAppDownloadQuery.PROPERTY_TYPE]=SampleAppDownloadQuery.VALUE_SAMPLE_APP,rtn[SampleAppDownloadQuery.PROPERTY_ACCOUNT]=this.accountName,rtn[SampleAppDownloadQuery.PROPERTY_ACCOUNT_ACCESS_KEY]=this.accountAccessKey,rtn[SampleAppDownloadQuery.PROPERTY_CONTROLLER_HOST]=this.controllerHost,rtn[SampleAppDownloadQuery.PROPERTY_CONTROLLER_PORT]=this.controllerPort,rtn[SampleAppDownloadQuery.PROPERTY_CONTROLLER_SSL_ENABLED]=this.controllerSSLEnabled.toString(),rtn[SampleAppDownloadQuery.PROPERTY_JAVA_AGENT_VERSION]=this.agentVersion,rtn[SampleAppDownloadQuery.PROPERTY_DOTNET_AGENT_VERSION]=this.agentVersion,rtn[SampleAppDownloadQuery.PROPERTY_NODEJS_AGENT_VERSION]=this.agentVersion,rtn[SampleAppDownloadQuery.PROPERTY_MACHINE_AGENT_VERSION]=this.agentVersion,rtn[SampleAppDownloadQuery.PROPERTY_DATABASE_AGENT_VERSION]=this.agentVersion,rtn[SampleAppDownloadQuery.PROPERTY_TIMESTAMP]=now,rtn[SampleAppDownloadQuery.PROPERTY_SIGNATURE]=this.generateSignature(this.privateKey,now,this.accountName),rtn
},SampleAppDownloadQuery.prototype.generateSignature=function(privateKey,timestamp,accountName){var signature=privateKey+timestamp+SampleAppDownloadQuery.VALUE_SAMPLE_APP+accountName;return signature=CryptoJS.MD5(signature).toString()},SampleAppDownloadQuery.PROPERTY_TYPE="type",SampleAppDownloadQuery.PROPERTY_ACCOUNT="account",SampleAppDownloadQuery.PROPERTY_ACCOUNT_ACCESS_KEY="account-access-key",SampleAppDownloadQuery.PROPERTY_CONTROLLER_HOST="controller-host",SampleAppDownloadQuery.PROPERTY_CONTROLLER_PORT="controller-port",SampleAppDownloadQuery.PROPERTY_CONTROLLER_SSL_ENABLED="controller-ssl-enabled",SampleAppDownloadQuery.PROPERTY_JAVA_AGENT_VERSION="java-agent-version",SampleAppDownloadQuery.PROPERTY_DOTNET_AGENT_VERSION="dotnet-agent-version",SampleAppDownloadQuery.PROPERTY_NODEJS_AGENT_VERSION="nodejs-agent-version",SampleAppDownloadQuery.PROPERTY_MACHINE_AGENT_VERSION="machine-agent-version",SampleAppDownloadQuery.PROPERTY_DATABASE_AGENT_VERSION="database-agent-version",SampleAppDownloadQuery.PROPERTY_TIMESTAMP="timestamp",SampleAppDownloadQuery.PROPERTY_SIGNATURE="signature",SampleAppDownloadQuery.VALUE_SAMPLE_APP="sample-app",SampleAppDownloadQuery}();define("app/services/SampleAppDownloadService",function(){});var FlowMapZoomLevels=function(){function FlowMapZoomLevels(){}return FlowMapZoomLevels.getZoomLevel=function(level){return level<=FlowMapZoomLevels.ZOOM_LEVEL_0.maxLevel?FlowMapZoomLevels.ZOOM_LEVEL_0:level<=FlowMapZoomLevels.ZOOM_LEVEL_1.maxLevel?FlowMapZoomLevels.ZOOM_LEVEL_1:level<=FlowMapZoomLevels.ZOOM_LEVEL_2.maxLevel?FlowMapZoomLevels.ZOOM_LEVEL_2:level<=FlowMapZoomLevels.ZOOM_LEVEL_3.maxLevel?FlowMapZoomLevels.ZOOM_LEVEL_3:FlowMapZoomLevels.ZOOM_LEVEL_4},FlowMapZoomLevels.updateNodeForZoomLevel=function(currentZoomLevel){var zoomLevel0=d3.selectAll(".adsFlowMapZoom0"),zoomLevel1=d3.selectAll(".adsFlowMapZoom1"),zoomLevel2=d3.selectAll(".adsFlowMapZoom2"),zoomLevel3=d3.selectAll(".adsFlowMapZoom3"),zoomLevel4=d3.selectAll(".adsFlowMapZoom4"),enableZoomLevel0=!1,enableZoomLevel1=!1,enableZoomLevel2=!1,enableZoomLevel3=!1,enableZoomLevel4=!1;currentZoomLevel==FlowMapZoomLevels.ZOOM_LEVEL_0||currentZoomLevel==FlowMapZoomLevels.ZOOM_LEVEL_1?(enableZoomLevel0=!0,enableZoomLevel1=!0):currentZoomLevel==FlowMapZoomLevels.ZOOM_LEVEL_2?(FlowMapZoomLevels.makeNodeCountTextLarge(),enableZoomLevel0=!0,enableZoomLevel1=!0,enableZoomLevel2=!0):currentZoomLevel==FlowMapZoomLevels.ZOOM_LEVEL_3?(FlowMapZoomLevels.makeNodeCountTextSmall(),enableZoomLevel0=!0,enableZoomLevel1=!0,enableZoomLevel2=!0,enableZoomLevel3=!0):currentZoomLevel==FlowMapZoomLevels.ZOOM_LEVEL_4&&(FlowMapZoomLevels.makeNodeCountTextSmall(),enableZoomLevel0=!0,enableZoomLevel1=!0,enableZoomLevel2=!0,enableZoomLevel3=!0,enableZoomLevel4=!0),zoomLevel0.classed("adsFlowmapHiddenZoom",!enableZoomLevel0),zoomLevel1.classed("adsFlowmapHiddenZoom",!enableZoomLevel1),zoomLevel2.classed("adsFlowmapHiddenZoom",!enableZoomLevel2),zoomLevel3.classed("adsFlowmapHiddenZoom",!enableZoomLevel3),zoomLevel4.classed("adsFlowmapHiddenZoom",!enableZoomLevel4)},FlowMapZoomLevels.updateZoomLevelDetail=function(force,currentZoomValue,lastZoomValue,canvas){if(lastZoomValue!=currentZoomValue){var fontSizeString=FlowMapZoomLevels.getFontSizeForScaleFactor(FlowMapZoomLevels.getDefaultNodeLabelSize(),currentZoomValue);canvas.select(".adsFlowMapText").style("font-size",fontSizeString),fontSizeString=FlowMapZoomLevels.getFontSizeForScaleFactor(FlowMapZoomLevels.getDefaultStatLabelSize(),currentZoomValue),canvas.select("text.adsFlowMapStatsDetails").style("font-size",fontSizeString),fontSizeString=FlowMapZoomLevels.getFontSizeForScaleFactor(FlowMapZoomLevels.getDefaultEdgeLabelSize(),currentZoomValue),canvas.select("text.adsFlowMapLinkTypeLabels").style("font-size",fontSizeString);var lastZoomLevel=FlowMapZoomLevels.getZoomLevel(lastZoomValue),currentZoomLevel=FlowMapZoomLevels.getZoomLevel(currentZoomValue);(lastZoomLevel.maxLevel!=currentZoomLevel.maxLevel||force)&&FlowMapZoomLevels.updateNodeForZoomLevel(currentZoomLevel)}},FlowMapZoomLevels.makeNodeCountTextLarge=function(){var nodeText=d3.selectAll(".adsNodeCountText");nodeText.classed("adsNodeCountText",!1),nodeText.classed("adsNodeCountTextLarge",!0),nodeText.attr("y",6)},FlowMapZoomLevels.makeNodeCountTextSmall=function(){var nodeText=d3.selectAll(".adsNodeCountTextLarge");nodeText.classed("adsNodeCountTextLarge",!1),nodeText.classed("adsNodeCountText",!0),nodeText.attr("y",0)},FlowMapZoomLevels.getDefaultNodeLabelSize=function(){return"9px"},FlowMapZoomLevels.getDefaultEdgeLabelSize=function(){return"9px"},FlowMapZoomLevels.getDefaultStatLabelSize=function(){return"8px"},FlowMapZoomLevels.getFontSizeForScaleFactor=function(originalSizeString,currentScaleFactor){if(currentScaleFactor>FlowMapZoomLevels.LABEL_FONT_SIZE_UPPER_ZOOM_LEVEL){var originalSize=parseInt(originalSizeString,10),newSize=FlowMapZoomLevels.LABEL_FONT_SIZE_UPPER_ZOOM_LEVEL/currentScaleFactor*originalSize;return newSize.toString()+"px"}return originalSizeString},FlowMapZoomLevels.LOWER_ZOOM=.1,FlowMapZoomLevels.UPPER_ZOOM=3,FlowMapZoomLevels.ZOOM_OUT_FACTOR=4,FlowMapZoomLevels.LABEL_FONT_SIZE_UPPER_ZOOM_LEVEL=1.5,FlowMapZoomLevels.ZOOM_LEVEL_0={maxLevel:.35,className:".adsFlowMapZoom0"},FlowMapZoomLevels.ZOOM_LEVEL_1={maxLevel:.75,className:".adsFlowMapZoom1"},FlowMapZoomLevels.ZOOM_LEVEL_2={maxLevel:1,className:".adsFlowMapZoom2"},FlowMapZoomLevels.ZOOM_LEVEL_3={maxLevel:1.6,className:".adsFlowMapZoom3"},FlowMapZoomLevels.ZOOM_LEVEL_4={maxLevel:2.5,className:".adsFlowMapZoom4"},FlowMapZoomLevels}();define("app/view/components/flowmap/FlowMapZoomLevels",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MainDashboardControllerBase=function(_super){function MainDashboardControllerBase($scope,$rootScope,$location,flowMapUiService,businessTransactionViewService,baselineUiService,resourceManager,notificationService,injectorService,globalCacheService,userPreferenceUiService,masterService,$timeout){var _this=this;_super.call(this,$scope,$rootScope,$location,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.flowMapUiService=flowMapUiService,this.businessTransactionViewService=businessTransactionViewService,this.baselineUiService=baselineUiService,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.globalCacheService=globalCacheService,this.userPreferenceUiService=userPreferenceUiService,this.masterService=masterService,this.$timeout=$timeout,this.includeLowerGraphs=!0,this.includeRightGraphs=!0,this.showExplainDetailsText=!1,this.showTreeButton=!1,this.showGridButton=!0,this.showFlowButton=!0,this.showChordButton=!1,this.disableFlowButtons=BrowserUtils.isBrowserInternetExplorer8(),this.mainContentMaximized=!1,this.showFlowmapControlDividers=!0,this.enableMaximizeRestore=!0,this.baselineAvailable=!0,this.isCrossApp=!1,this.hiddenItemsCount=0,this.loadingD3=!1,this.configuratorClosed=function(){_this.editFlowmapProperties=!1},this.entityDefinition=this.createEntityDefinition(),this.configuratorEntityDefinition=this.getConfiguratorEntityDefinition(),$scope.controller=this}return __extends(MainDashboardControllerBase,_super),MainDashboardControllerBase.prototype.init=function(){_super.prototype.init.call(this),this.mainContentMaximized=this.getMainContentMaximizedPreference()},MainDashboardControllerBase.prototype.addClassToLayout=function(){this.mainContentMaximized?$(".adsFlowMapLayout").removeClass("adsFlowNormalSize").addClass("adsFlowMaxSize"):$(".adsFlowMapLayout").removeClass("adsFlowMaxSize").addClass("adsFlowNormalSize"),ViewUtil.layoutAfterDigest(this.$scope)},MainDashboardControllerBase.prototype.fetchTransactionScorecardData=function(){},MainDashboardControllerBase.prototype.fetchDashboardGraphData=function(autoRefresh){var _this=this;void 0===autoRefresh&&(autoRefresh=!1),this.layout.loading=!0;var entityDef=this.getEntityDefinition(),baselineId=this.baselineConfig.selectedBaseline?this.baselineConfig.selectedBaseline.id:-1;this.baselineId=baselineId;var promise=this.injectorService.dashboardGraphService().getEntityStatsData(entityDef.entityId,entityDef.entityType,this.getTimeRangeString(),baselineId,50);promise.then(function(response){_this.dashboardGraphData=_this.injectorService.dashboardGraphService().getEntityStatsData_response(response)})},MainDashboardControllerBase.prototype.fetchDefaultBaseline=function(){},MainDashboardControllerBase.prototype.fetchEventsCounts=function(){},MainDashboardControllerBase.prototype.cloneGraph=function(graph){return jQuery.extend(!0,{},graph)},MainDashboardControllerBase.prototype.processFlowmapData=function(graph){this.layout.loading=!1,this.listviewdata=this.createListviewGraph(this.cloneGraph(graph)),this.flowmapdata=this.createFlowmapGraph(graph)},MainDashboardControllerBase.prototype.createFlowmapGraph=function(graph){this.filterNodesFromPreferences(graph);var serverEdges,links,serverNodes=graph.nodes,nodes=serverNodes,nodeHash=this.createNodeHash(graph);return serverEdges=this.filterDisconnectedEdges(graph,nodeHash),links=serverEdges,this.syncEdges(links,serverEdges,nodeHash),this.filterDisconnectedOrStatFreeNodes(nodes),this.groupBackends(graph,serverNodes,serverEdges,nodes,links,nodeHash),graph},MainDashboardControllerBase.prototype.createListviewGraph=function(graph){var serverEdges,links,serverNodes=graph.nodes,nodes=serverNodes,nodeHash=this.createNodeHash(graph);serverEdges=this.filterDisconnectedEdges(graph,nodeHash),links=serverEdges,this.syncEdges(links,serverEdges,nodeHash),this.filterDisconnectedOrStatFreeNodes(nodes);for(var edges=graph.edges,edgesLength=edges.length,i=0;edgesLength>i;i++){var edge=edges[i];if(edge.stats.length>1){for(var originalEdgeStatsArray=new Array,j=0;j<edge.stats.length;j++)originalEdgeStatsArray.push(jQuery.extend(!0,{},edge.stats[j]));var edgeStats=originalEdgeStatsArray[0],newEdgeStats=jQuery.extend(!0,{},edgeStats),newEdgeStatsArray=new Array;newEdgeStatsArray.push(newEdgeStats),edge.stats=newEdgeStatsArray;for(var k=1;k<originalEdgeStatsArray.length;k++){var newEdge=jQuery.extend({},edge);edgeStats=originalEdgeStatsArray[k],newEdgeStats=jQuery.extend(!0,{},edgeStats),newEdgeStatsArray=new Array,newEdgeStatsArray.push(newEdgeStats),newEdge.stats=newEdgeStatsArray,graph.edges.push(newEdge)}}}return graph},MainDashboardControllerBase.prototype.createNodeHash=function(graph){for(var nodeHash={},nodes=graph.nodes,i=0;i<nodes.length;i++){var nodeToHash=nodes[i];nodeHash[nodeToHash.id]||(nodeHash[nodeToHash.id]=nodeToHash),nodeHash[nodeToHash.id].$$edges=[]}return nodeHash},MainDashboardControllerBase.prototype.filterNodesFromPreferences=function(graph){var ids,_this=this,serverNodes=graph.nodes,hiddenTiers={},hiddenBackends={};if(graph&&graph.properties&&graph.properties.preference){if(graph.properties.preference.componentFilter&&graph.properties.preference.componentFilter.entityIds){ids=graph.properties.preference.componentFilter.entityIds;for(var itr=0;itr<ids.length;++itr)hiddenTiers[ids[itr]]=!0}if(graph.properties.preference.backendFilter&&graph.properties.preference.backendFilter.entityIds){ids=graph.properties.preference.backendFilter.entityIds;for(var itr=0;itr<ids.length;++itr)hiddenBackends[ids[itr]]=!0}this.hiddenItemsCount=serverNodes.length,serverNodes=serverNodes.filter(function(d){return d.entityType==EntityType.APPLICATION_COMPONENT?_this.filterNode(d,hiddenTiers,graph.properties.preference.componentFilter):d.entityType==EntityType.BACKEND?_this.filterNode(d,hiddenBackends,graph.properties.preference.backendFilter):d.entityType==EntityType.APPLICATION?_this.filterNode(d,hiddenTiers,graph.properties.preference.componentFilter):!0}),this.hiddenItemsCount-=serverNodes.length,graph.nodes=serverNodes}},MainDashboardControllerBase.prototype.filterDisconnectedOrStatFreeNodes=function(nodes){for(var uniqueNodeCheck={},i=0;i<nodes.length;i++){var node=nodes[i],graphNode=nodes[i],isBackend=graphNode.entityType==EntityType.BACKEND,missingStats=!this.hasStats(graphNode)&&!this.hasNetStats(graphNode);graphNode.nodeDegree=graphNode.$$edges.length,uniqueNodeCheck[node.id]||graphNode.$$edges.length<=0&&(missingStats||isBackend)?(nodes.splice(i,1),i--):uniqueNodeCheck[node.id]=node}},MainDashboardControllerBase.prototype.syncEdges=function(links,edges,nodeHash){for(var linkHash={},linkNum=0;linkNum<links.length;linkNum++){var link=links[linkNum],edge=edges[linkNum];!link.target&&edge.targetNode&&(link.target=nodeHash[edge.targetNode]),!link.source&&edge.sourceNode&&(link.source=nodeHash[edge.sourceNode]),edge.source.$$edges.push(edge),edge.target.$$edges.push(edge),linkHash[link.target.id+"_"+link.source.id]?(linkHash[link.target.id+"_"+link.source.id].adjacentEdge=edge,edge.adjacentEdge=linkHash[link.target.id+"_"+link.source.id]):linkHash[link.source.id+"_"+link.target.id]=edge}},MainDashboardControllerBase.prototype.filterDisconnectedEdges=function(graph,nodeHash){return nodeHash||(nodeHash=this.createNodeHash(graph)),graph.edges.filter(function(edgeToFilter){return angular.isDefined(nodeHash[edgeToFilter.targetNode])&&angular.isDefined(nodeHash[edgeToFilter.sourceNode])})},MainDashboardControllerBase.prototype.groupBackends=function(graph,serverNodes,serverEdges,nodes,links,nodeHash){var preferences=graph&&graph.properties?graph.properties.preference:null,grouper=new BackendGrouper(serverNodes,serverEdges,nodes,links,nodeHash,preferences);grouper.performBackendGrouping(),graph.edges=grouper.serverEdges,graph.nodes=grouper.serverNodes},MainDashboardControllerBase.prototype.filterNode=function(d,hiddenDictionary,filter){if(filter){if(hiddenDictionary[d.idNum])return!1;if(d.stats){var stats=d.stats;return TransactionStatUtils.hasSyncTransactionStatsSet(stats)?this.compareMetric(stats.transactionStats.numberOfCalls,filter.totalCallsFilter)&&this.compareMetric(stats.transactionStats.timeConsumedPerTransaction,filter.timeConsumedFilter)&&this.compareMetric(stats.transactionStats.numberOfErrors,filter.totalErrorsFilter)?!0:!1:TransactionStatUtils.hasAsyncTransactionStatsSet(stats)?this.compareMetric(stats.asyncTransactionStats.numberOfCalls,filter.totalCallsFilter)&&this.compareMetric(stats.asyncTransactionStats.timeConsumedPerTransaction,filter.timeConsumedFilter)&&this.compareMetric(stats.asyncTransactionStats.numberOfErrors,filter.totalErrorsFilter)?!0:!1:this.compareSimplifiedMetricValue(stats.callsPerMinute,filter.callsPerMinFilter)&&this.compareSimplifiedMetricValue(stats.averageResponseTime,filter.responseTimeFiler)&&this.compareSimplifiedMetricValue(stats.errorsPerMinute,filter.errorsPerMinFilter)?!0:!1}}return!0},MainDashboardControllerBase.prototype.compareSimplifiedMetricValue=function(metric,criteria){return criteria?this.isMetricValid(metric)?this.compareMetric(metric.metricValue,criteria):!1:!0},MainDashboardControllerBase.prototype.compareMetric=function(metric,criteria){if(criteria){if(!criteria.conditionOperator)return!0;if(!MetricUtil.isValidMetricData(metric))return!1;var limitValue=criteria.value,conditionOperator=criteria.conditionOperator;if(conditionOperator==ConditionOperator.GREATER_THAN)return metric>limitValue;if(conditionOperator==ConditionOperator.LESS_THAN)return limitValue>metric}return!0},MainDashboardControllerBase.prototype.isMetricValid=function(metric){return metric&&Util.isValidId(metric.metricId)&&MetricUtil.isValidMetricData(metric.metricValue)},MainDashboardControllerBase.prototype.processDashData=function(){this.updateBaseLineReasonText(),this.showGridButton&&this.updateGridOptions(),this.showTreeButton&&this.updateTreeGridOptions()},MainDashboardControllerBase.prototype.hasStats=function(node){return node.stats?null!=node.stats.transactionStats||null!=node.stats.asyncTransactionStats||node.stats.numberOfCalls&&node.stats.numberOfCalls.metricValue>0:!1},MainDashboardControllerBase.prototype.hasNetStats=function(node){return node.networkStats?this.hasThroughputMetrics(node.networkStats)||this.hasLatencyMetrics(node.networkStats):!1},MainDashboardControllerBase.prototype.hasThroughputMetrics=function(networkStats){return!Util.isUndefOrNull(networkStats.throughput)&&!Util.isUndefOrNull(networkStats.throughput.metricValue)&&networkStats.throughput.metricValue.value>0},MainDashboardControllerBase.prototype.hasLatencyMetrics=function(networkStats){return!Util.isUndefOrNull(networkStats.latency)&&!Util.isUndefOrNull(networkStats.latency.metricValue)&&networkStats.latency.metricValue.value>0},MainDashboardControllerBase.prototype.updateBaseLineReasonText=function(){this.baselineConfig.selectedBaseline?this.baselineReasonText=this.flowmapdata&&this.flowmapdata.baselineReasonText?this.flowmapdata.baselineReasonText:this.getString("ms_dontCompareAgainstBaselineReasonUnknown"):(ADLoggerService.log("NOT COMPARED WITH BASE LINE.  UPDATING VAR."),this.baselineReasonText=this.getString("ms_dontCompareAgainstBaselineNoneSelected"))},MainDashboardControllerBase.prototype.openFlowmapConfigurator=function(){this.dropdownOpen=!0,this.editFlowmapProperties=!0},MainDashboardControllerBase.prototype.getConfiguratorCloseHandler=function(){return this.configuratorClosed},MainDashboardControllerBase.prototype.fetchData=function(autoRefresh){void 0===autoRefresh&&(autoRefresh=!1),this.fetchEventsCounts(),this.fetchTransactionScorecardData(),this.fetchDashboardGraphData(autoRefresh)},MainDashboardControllerBase.prototype.isSelectedFlowMapPreference=function(userPreferenceListData){return this.flowmapdata&&this.flowmapdata.properties&&userPreferenceListData&&userPreferenceListData.id===this.flowmapdata.properties.mapId},MainDashboardControllerBase.prototype.doGraphicalLayout=function(){this.selectMode(MainDashboardControllerBase.MODE_FORCE)},MainDashboardControllerBase.prototype.doGrid=function(){this.selectMode(MainDashboardControllerBase.MODE_GRID)},MainDashboardControllerBase.prototype.doTree=function(){this.selectMode(MainDashboardControllerBase.MODE_TREE)},MainDashboardControllerBase.prototype.doChord=function(){this.selectMode(MainDashboardControllerBase.MODE_CHORD)},MainDashboardControllerBase.prototype.layoutCircular=function(){this.layout.circular()},MainDashboardControllerBase.prototype.layoutForce=function(){this.notificationService.displayMessage(this.resourceManager.getString("ui","ms_flowMapDoForceDirectedLayoutMessage"),""),this.layout.force(),this.selectMode(MainDashboardControllerBase.MODE_FORCE)},MainDashboardControllerBase.prototype.forceSelected=function(){return this.mode==MainDashboardControllerBase.MODE_FORCE},MainDashboardControllerBase.prototype.gridSelected=function(){return this.mode==MainDashboardControllerBase.MODE_GRID},MainDashboardControllerBase.prototype.treeSelected=function(){return this.mode==MainDashboardControllerBase.MODE_TREE},MainDashboardControllerBase.prototype.chordSelected=function(){return this.mode==MainDashboardControllerBase.MODE_CHORD},MainDashboardControllerBase.prototype.selectMode=function(mode){var _this=this,params=new URLParams;this.mode==mode&&params.getParam(UrlConstants.DASHBOARD_MODE)==mode||this.loadingD3||(this.setSelectModePreference(mode),BrowserUtils.isBrowserInternetExplorer8()||window.d3?(this.showGridButton||mode!=MainDashboardControllerBase.MODE_GRID?this.showTreeButton||mode!=MainDashboardControllerBase.MODE_TREE||(mode=MainDashboardControllerBase.MODE_GRID):mode=MainDashboardControllerBase.MODE_TREE,this.mode=mode,params.setParam(UrlConstants.DASHBOARD_MODE,mode),URLUtil.setLocationHashNoHistory(params.toString())):(this.loadingD3=!0,require(["lib/d3/d3.min"],function(d3){window.d3=d3,_this.loadingD3=!1,_this.mode=mode,params.setParam(UrlConstants.DASHBOARD_MODE,mode),URLUtil.setLocationHashNoHistory(params.toString()),mode===MainDashboardControllerBase.MODE_CHORD&&_this.doChord(),ViewUtil.safeApply(_this.$scope)})),ViewUtil.safeApply(this.$scope))},MainDashboardControllerBase.prototype.getFlowmapName=function(){return this.flowmapdata&&this.flowmapdata.properties?this.flowmapdata.properties.defaultValue?this.getDefaultFlowmapName():this.flowmapdata.properties.name:""},MainDashboardControllerBase.prototype.getDefaultFlowmapName=function(){return this.getString("ms_appFlowMapTitle")},MainDashboardControllerBase.prototype.getSelectModePreference=function(){return ADLoggerService.warn("MainDashboardControllerBase.getSelectModePreference Warning: Pseudo abstract method invoked."),""},MainDashboardControllerBase.prototype.setSelectModePreference=function(){ADLoggerService.warn("MainDashboardControllerBase.setSelectModePreference Warning: Pseudo abstract method invoked.")},MainDashboardControllerBase.prototype.toggleAdvanced=function(){this.advancedOptions=!this.advancedOptions},MainDashboardControllerBase.prototype.toggleMainContentMaximized=function(){this.mainContentMaximized=!this.mainContentMaximized,this.setMainContentMaximizedPreference(this.mainContentMaximized),this.addClassToLayout()},MainDashboardControllerBase.prototype.getMainContentMaximizedPreference=function(){return ADLoggerService.warn("MainDashboardControllerBase.getMainContentMaximizedPreference Warning: Pseudo abstract method invoked."),!1},MainDashboardControllerBase.prototype.setMainContentMaximizedPreference=function(){ADLoggerService.warn("MainDashboardControllerBase.setMainContentMaximizedPreference Warning: Pseudo abstract method invoked.")},MainDashboardControllerBase.prototype.charge=function(d,visibleNodes){return Math.max(-1800,-1800+100*Math.min(5,visibleNodes)+-400*d.nodeDegree)},MainDashboardControllerBase.prototype.buildMenuItem=function(label,handler,disabled){return{text:label,handler:function(){null!=handler&&handler()},disabled:disabled}},MainDashboardControllerBase.prototype.loadFlowMap=function(flowMapId){var _this=this,result=this.flowMapUiService.setFlowMapPreference(flowMapId);result.then(function(){_this.fetchData()})},MainDashboardControllerBase.prototype.manageFlowMaps=function(){var _this=this,dialogPromise=DialogService.instance().showDialog("","app/view/components/flowmap/manage/ManageFlowmapDialogController","app/view/components/flowmap/manage/ManageFlowmapDialog.html",{entity:this.getConfiguratorEntityDefinition(),currentMapId:this.flowmapdata.properties.mapId});dialogPromise.then(function(data){data.result.then(function(defaultMapId){Util.isDefAndNotNull(defaultMapId)&&_this.loadFlowMap(defaultMapId)})})},MainDashboardControllerBase.prototype.setup=function(){this.layout={force:null,circular:null,linkDistance:{value:null},linkStrength:{value:1},friction:{value:.1},chargeDistance:{value:1500},charge:{value:this.charge},gravity:null},this.centerMap={execute:null},this.scaleData={value:1,lowerBound:FlowMapZoomLevels.LOWER_ZOOM},this.chordScaleData={value:.62,lowerBound:FlowMapZoomLevels.LOWER_ZOOM},this.showTreeButton&&this.buildTreeGridOptions();var mode=MainDashboardControllerBase.MODE_FORCE,params=new URLParams;params.hasParam(UrlConstants.DASHBOARD_MODE)?mode=params.getParam(UrlConstants.DASHBOARD_MODE):this.getSelectModePreference()&&(mode=this.getSelectModePreference()),this.selectMode(mode)},MainDashboardControllerBase.prototype.setupEventListeners=function(){var _this=this;EventBusService.instance().registerEventListener(BaselineSelectorChangeEvent.UEV_BASELINE_SELECTOR_CHANGE,function(baselineSelectorChangeEvent){_this.baselineConfig&&(_this.baselineConfig.selectedBaseline=baselineSelectorChangeEvent.selectedBaseline),_this.baselineId=baselineSelectorChangeEvent.selectedBaseline?baselineSelectorChangeEvent.selectedBaseline.id:-1,_this.fetchData()},this.$scope),this.$scope.$on(App.UEV_REFRESH,function(){_this.fetchData()})},MainDashboardControllerBase.prototype.fetchInitViewData=function(){var _this=this;this.logDebug("MainDashboardControllerBase.fetchInitViewData"),this.fetchDefaultBaseline(function(){_this.fetchData()})},MainDashboardControllerBase.prototype.getErrorsPercentage=function(){if(this.numberOfErrors>-1&&this.numberOfCalls>-1){var percentage=this.numberOfErrors/this.numberOfCalls*100;if(percentage>0)return Number(percentage).toFixed(1)}return"0"},MainDashboardControllerBase.prototype.createEntityDefinition=function(){return null},MainDashboardControllerBase.prototype.getEntityDefinition=function(){return this.entityDefinition},MainDashboardControllerBase.prototype.getConfiguratorEntityDefinition=function(){return this.getEntityDefinition()},MainDashboardControllerBase.prototype.buildListView=function(entityMap){throw void 0===entityMap&&(entityMap=null),new Error("buildListView called but not implemented")},MainDashboardControllerBase.prototype.updateGridOptions=function(){var _this=this;if(this.flowmapdata&&this.flowmapdata.edges){for(var entitiesToFetchMap={},i=0;i<this.flowmapdata.edges.length;i++){var tmpEdge=this.flowmapdata.edges[i];if(tmpEdge&&tmpEdge.crossAppOriginTierDefinition){var key=tmpEdge.crossAppOriginTierDefinition.entityType+"_"+tmpEdge.crossAppOriginTierDefinition.entityId;entitiesToFetchMap[key]=tmpEdge.crossAppOriginTierDefinition}}var entitiesToFetch=[];for(var k in entitiesToFetchMap)entitiesToFetch.push(entitiesToFetchMap[k]);var entityService=(AngularUtil.getADInjector(),EntityService.instance()),onEntityMapLoaded=function(){var listView=_this.buildListView(entityMap);Util.isDefAndNotNull(listView)&&(_this.flowGrid=listView.updateGridOptions(_this.listviewdata,_this.flowGrid))},entityMap=entityService.fetchEntities(entitiesToFetch,onEntityMapLoaded)}},MainDashboardControllerBase.prototype.updateTreeGridOptions=function(){throw new Error("UpdateTreeGridOptions called but not implemented")},MainDashboardControllerBase.prototype.buildTreeGridOptions=function(){throw new Error("BuildTreeGridOptions called but not implemented")},MainDashboardControllerBase.prototype.getShowExplainDetailsText=function(){return this.showExplainDetailsText},MainDashboardControllerBase.prototype.importOldFlowmaps=function(){var _this=this;this.flowMapUiService.updateFlexFlowmaps(this.getEntityDefinition().entityType,this.getEntityDefinition().entityId).then(function(){_this.notificationService.displayResourceMessage("ms_importedFlowmapSuccessfully")})},MainDashboardControllerBase.prototype.processFlowmap=function(graph,autoRefresh){return graph.emptyText=this.resourceManager.getString("ui","ms_noLoadDetected"),graph.autoRefresh=autoRefresh,this.showReasonForNotComparingWithBaselineMessage=!graph.comparedWithBaseline,this.processFlowmapData(graph),this.processDashData(),graph},MainDashboardControllerBase.prototype.flowmapErrorHandler=function(response){ADLoggerService.error("Error retrieving flowmap data -"),ADLoggerService.error(response),NotificationService.instance().displayError(resourceManager.getString("ui","ms_errorRetrievingFlowmap"),"");var graph=this.createEmptyGraph();graph.emptyText=this.resourceManager.getString("ui","ms_errorRetrievingFlowmap"),this.processFlowmapData(graph),this.processDashData()},MainDashboardControllerBase.prototype.createEmptyGraph=function(){return{nodes:[],edges:[],autoRefresh:!1}},MainDashboardControllerBase.prototype.isSnapshot=function(){return!1},MainDashboardControllerBase.prototype.isBusinessTransactionDashboard=function(){return!1},MainDashboardControllerBase.MODE_FORCE="force",MainDashboardControllerBase.MODE_GRID="grid",MainDashboardControllerBase.MODE_TREE="tree",MainDashboardControllerBase.MODE_CHORD="chord",MainDashboardControllerBase.$inject=["$scope","$rootScope","$location","flowMapUiService","businessTransactionViewService","baselineUiService","resourceManager","notificationService","injectorService","globalCacheService","userPreferenceUiService","masterService","$timeout"],MainDashboardControllerBase}(MainViewControllerBase);define("app/controller/MainDashboardControllerBase",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MainAppViewControllerBase=function(_super){function MainAppViewControllerBase($scope,$rootScope,$location,resourceManager,notificationService,injectorService,applicationViewService){_super.call(this,$scope,$rootScope,$location,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.applicationViewService=applicationViewService}return __extends(MainAppViewControllerBase,_super),MainAppViewControllerBase.prototype.getApplicationLocationBarEntryConfig=function(){return this.application?this.applicationViewService.getApplicationLocationBarEntryConfig(this.application):null},MainAppViewControllerBase.prototype.fetchApplication=function(){var _this=this,promise=ApplicationsCache.instance().findApplicationById(this.getApplicationIdFromUrl());return promise.then(function(application){_this.application=application})},MainAppViewControllerBase.$inject=["$scope","$rootScope","$location","resourceManager","notificationService","injectorService","applicationViewService"],MainAppViewControllerBase}(MainViewControllerBase);define("app/controller/MainAppViewControllerBase",function(){});var App=function(){function App(){}return App.UEV_VIEW_PRE_INITIALIZE="UEV_VIEW_PRE_INITIALIZE",App.UEV_MAIN_VIEW_CHANGE_BEFORE="UEV_MAIN_VIEW_CHANGE_BEFORE",App.UEV_MAIN_VIEW_CHANGE="UEV_MAIN_VIEW_CHANGE",App.UEV_NAV_ACTION="UEV_NAV_ACTION",App.UEV_NAV_BACK="UEV_NAV_BACK",App.UEV_NAV_NEXT="UEV_NAV_NEXT",App.UEV_NAV_HOME="UEV_NAV_HOME",App.UEV_INIT_APP="UEV_INIT_APP",App.UEV_LOGIN_ATTEMPT="UEV_LOGIN_ATTEMPT",App.UEV_USER_AUTHENTICATION_COMPLETED="UEV_USER_AUTHENTICATION_COMPLETED",App.UEV_PERMISSION_ACTIONS_CHANGED="UEV_PERMISSION_ACTIONS_CHANGED",App.UEV_LOGIN_RESULT_FAIL="UEV_LOGIN_RESULT_FAIL",App.UEV_LOGOUT="UEV_LOGOUT",App.UEV_REFRESH="UEV_REFRESH",App.UEV_DELETE_USER_RES="UEV_DELETE_USER_RES",App.UEV_DELETE_APP="UEV_DELETE_APP",App.UEV_DELETE_IMAGES_RES="UEV_DELETE_IMAGES_RES",App.UEV_REMOVE_CONDITION="UEV_REMOVE_CONDITION",App.UEV_REMOVE_NOTIFICATION="UEV_REMOVE_NOTIFICATION",App.UEV_REMOVE_WORKFLOW="UEV_REMOVE_WORKFLOW",App.UEV_SERVER_CALL="UEV_SERVER_CALL",App.UEV_ITEM_SELECTED="UEV_ITEM_SELECTED",App.UEV_CUSTOM_TIME_RANGE_SELECTED="UEV_CUSTOM_TIME_RANGE_SELECTED",App.UEV_BACKEND_CALL_RESOLVED="UEV_BACKEND_CALL_RESOLVED",App.UEV_SEARCH_BOX_CHANGE="UEV_SEARCH_BOX_CHANGE",App.UEV_SNAPSHOT_VIEWER_OPENED="UEV_SNAPSHOT_VIEWER_OPENED",App.UEV_SNAPSHOT_VIEWER_CLOSED="UEV_SNAPSHOT_VIEWER_CLOSED",App.UEV_COMPONENT_UPDATED="UEV_COMPONENT_UPDATED",App.UEV_APPLICATION_COMPONENTS_CHANGED="UEV_APPLICATION_COMPONENTS_CHANGED",App.UEV_INCIDENT_FETCH="UEV_INCIDENT_FETCH",App.UEV_DISPLAY_APPLICATION_EVENT_DEFINITION_SELECTOR="UEV_DISPLAY_APPLICATION_EVENT_DEFINITION_SELECTOR",App.UEV_APP_PROBLEM_SUMMARY_FETCHED="UEV_APP_PROBLEM_SUMMARY_FETCHED",App.UEV_INCIDENTS_SETUP="UEV_INCIDENTS_SETUP",App.UEV_FILE_UPLOAD_COMPLETE="UEV_FILE_UPLOAD_COMPLETE",App.UEV_UPLOAD_COMPLETE_SUCCESS="UEV_UPLOAD_COMPLETE_SUCCESS",App.UEV_UPLOAD_COMPLETE_FAIL="UEV_UPLOAD_COMPLETE_FAIL",App.UEV_WORKFLOW_PROPERTY_VALUE_SELECTED="UEV_WORKFLOW_PROPERTY_VALUE_SELECTED",App.UEV_RULE_SELECTED="UEV_RULE_SELECTED",App.UEV_POLICY_SELECTED="UEV_POLICY_SELECTED",App.UEV_COMPONENT_SELECTED="UEV_COMPONENT_SELECTED",App.UEV_NODE_SELECTED="UEV_NODE_SELECTED",App.UEV_XMODAL_CLOSE="UEV_XMODAL_CLOSE",App.UEV_FLYOUT_CLOSE_CLICKED="UEV_FLYOUT_CLOSE_CLICKED",App.UEV_APP_NAV_TREE_BUILT="UEV_APP_NAV_TREE_BUILT",App.UEV_APPLICATION_EVENT_TYPES_APPLIED="UEV_APPLICATION_EVENT_TYPES_APPLIED",App.UEV_MAXIMIZE="UEV_MAXIMIZE",App.UEV_MINIMIZE="UEV_MINIMIZE",App.UEV_NORMAL_SIZE="UEV_NORMAL_SIZE",App.UEV_APPLY_FILTERS="UEV_APPLY_FILTERS",App.UEV_APPLY_FILTERS_AND_HIDE="UEV_APPLY_FILTERS_AND_HIDE",App.UEV_FLOW_DATA_DRILL_DOWN="UEV_FLOW_DATA_DRILL_DOWN",App.UEV_START_DRAG="UEV_START_DRAG",App.UEV_STOP_DRAG="UEV_STOP_DRAG",App.UEV_METRIC_LEGEND_REMOVE_SERIES="UEV_METRIC_LEGEND_REMOVE_SERIES",App.UEV_TRANSIENT_QUERY_RESTARTED="UEV_TRANSIENT_QUERY_RESTARTED",App.UEV_SESSION_TIMEOUT_DETECTED_IN_FLASH="UEV_SESSION_TIMEOUT_DETECTED_IN_FLASH",App.UEV_XRESONDER_SERVER_CONNECTION_FAILURE="UEV_XRESONDER_SERVER_CONNECTION_FAILURE",App.UEV_WRITE_LOCATION_TO_URL="UEV_WRITE_LOCATION_TO_URL",App.UEV_VIEW_CUSTOM_TIME_RANGES="UEV_VIEW_CUSTOM_TIME_RANGES",App.UEV_LOGGED_SERVICE_CALL="UEV_LOGGED_SERVICE_CALL",App.UEV_LOGGED_SERVICE_CALL_RESPONSE="UEV_LOGGED_SERVICE_CALL_RESPONSE",App.UEV_INIT_DATA_FETCHED="UEV_INIT_DATA_FETCHED",App.UEV_SET_GLOBAL_TIME_RANGE="UEV_SET_GLOBAL_TIME_RANGE",App.UEV_VIEWSTACK_VIEW_SET_AFTER="UEV_VIEWSTACK_VIEW_SET_AFTER",App.UEV_NAVIGATION_PANEL_CREATION_COMPLETE="UEV_NAVIGATION_PANEL_CREATION_COMPLETE",App.UEV_NAVIGATION_PANEL_CONFIG_CHANGED="UEV_NAVIGATION_PANEL_CONFIG_CHANGED",App.UEV_USER_PREFERENCE_DELETED="UEV_USER_PREFERENCE_DELETED",App.UEV_HIDE_ITEM_IN_FLOW="UEV_HIDE_ITEM_IN_FLOW",App.UEV_UNGROUP_BACKENDS_IN_FLOW="UEV_UNGROUP_BACKENDS_IN_FLOW",App.UEV_POLICIES_UPDATED_FOR_ALERT_CONFIG="UEV_POLICIES_UPDATED_FOR_ALERT_CONFIG",App.UEV_EVENT_NOTIFICATION_CONFIGS_UPDATED_FOR_ALERT_CONFIG="UEV_EVENT_NOTIFICATION_CONFIGS_UPDATED_FOR_ALERT_CONFIG",App.UEV_POLICY_CREATED="UEV_POLICY_CREATED",App.UEV_POLICY_UPDATED="UEV_POLICY_UPDATED",App.UEV_POLICIES_DELETED="UEV_POLICIES_DELETED",App.UEV_ACTION_CREATED="UEV_ACTION_CREATED",App.UEV_ACTION_UPDATED="UEV_ACTION_UPDATED",App.UEV_ACTION_DELETED="UEV_ACTION_DELETED",App.UEV_ACTION_SUPPRESSION_CREATED="UEV_ACTION_SUPPRESSION_CREATED",App.UEV_ACTION_SUPPRESSION_UPDATED="UEV_ACTION_SUPPRESSION_UPDATED",App.UEV_ACTION_SUPPRESSION_DELETED="UEV_ACTION_SUPPRESSION_DELETED",App.UEV_EVENT_REACTOR_CREATED="UEV_EVENT_REACTOR_CREATED",App.UEV_EVENT_REACTOR_UPDATED="UEV_EVENT_REACTOR_UPDATED",App.UEV_EVENT_REACTOR_DELETED="UEV_EVENT_REACTOR_DELETED",App.UEV_RUNBOOK_CREATED="UEV_RUNBOOK_CREATED",App.UEV_RESTRICTED_TIME_RANGE="UEV_RESTRICTED_TIME_RANGE",App.UEV_EUM_ENABLED_CHANGE="UEV_EUM_ENABLED_CHANGE",App.UEV_REPORTS_ENABLED_CHANGE="UEV_EUM_ENABLED_CHANGE",App.UEV_HELP_BUBBLE_ALL_ITEMS_DISABLED="UEV_HELP_BUBBLE_ALL_ITEMS_DISABLED",App.UEV_NOTIFICATION_CONFIG_UPDATED="UEV_NOTIFICATION_CONFIG_UPDATED",App.UEV_FLASH_LOADED="UEV_FLASH_LOADED",App.UEV_COPY_LINK_TO_CLIPBOARD="UEV_COPY_LINK_TO_CLIPBOARD",App
}();appdynamicsModule.service("App",App),define("app/config/App",function(){});var AppConfig=function(){function AppConfig($location,resourceManager,navigationHistoryService,$rootScope){this.$location=$location,this.resourceManager=resourceManager,this.navigationHistoryService=navigationHistoryService,this.$rootScope=$rootScope,this.saveTimeRangeInCookie=!1,this.fakeBTs=0,this.fakeComponents=0,this.fakeDataMode=!1,this.debugMode=!1,this.showInfoBTSnapsInReqTab=!1,this.mockDataMode=!1,this.accountsEnabled=!0,this.dpmEnabled=!0,this.showAutomationFeatures=!0,this.btDiscoveryDepthConfigEnabled=!1,this.fakePetNumberMode=!1,this.loadLastViewedApp=!1,this.newSnapshotExplorer=!1,this.snapshotViewerEnabled=!1,this.createFakeBTStats=!1,this.createFakeHugeCallGraph=!1,this.useImageCache=!0,this.debugLogin=!1,this.saveTimeRangeAsUserPreference=!1,this.fakeEventsMode=!1,this.deepLinkEnabled=!1,this.enableAccountsAndShowController=!1,this.darkMode=!1,this.darkGraphModeMetricBrowser=!1,this.darkDashboardGraphMode=!0,this.disablePopups=!1,this.showAllEvents=!1,this.debugQuery=!1,this.navigationPanelAutoHideMode=!0,this.navigationPanelAutoHideFeatureEnabled=!1,this._navigationMode=GlobalConstants.NAV_MODE_ADVANCED,this.displayKeyMetricsOnTierDashboard=!1,this.logServiceCalls=!1,this.logServiceCallDiagnostics=!1,this.viewDiagnosticsModal=!1,this.displayServiceCallTotals=!1,this.advancedSettingsEnabled=!0,this.maxNumUnresolvedComponents=20,this.incidentSummaryLight=!0,this.policySearchEnabled=!0,this.showImageStores=!1,this.computeCloudMode=!0,this.appTasksEnabled=!1,this.admin=!0,this.appTreeViewEnabled=!0,this.showOnlyItemsInFlowViewsThatAreInFlow=!0,this.viewModeBTDashboard=GlobalConstants.BT_DETAIL_VIEW_MODE_GRAPHICAL,this.viewModeAppDashboard=GlobalConstants.APP_DASH_VIEW_MODE_GRAPHICAL,this.viewModeAllAppDashboard=GlobalConstants.ALL_APPS_DASH_VIEW_MODE_GRAPHICAL,this.backendThresholdBeforeGroupingAppDash=2,this.backendThresholdBeforeGroupingBTDash=2,this.fastDataGrid=!0,this.showOrginalNameInBTList=!0,this.isControllerMultiTennant=!1,this.logDebug=!1,this.fakeMemoryDataMode=!1,this.fakeSnapshotCompareMode=!1,this.debugMultiTenant=!1,this.debugComponentFetch=!1,this.isCoradiantIntegrationEnabled=!1,this.isDBTunaIntegrationEnabled=!1,this.isSplunkIntegrationEnabled=!0,this.dbCamIntegrationEnabled=!1,this.mergeStallRSDs=!0,this.showCreateIncident=!1,this.showCallReturnContents=!1,this.showServerCallParameters=!1,this.disableGraphicalView=!1,this.debugGraphicalView=!1,this.appGraphicalViewShowHealthBars=!0,this.appGraphicalViewShowComponentStats=!0,this.appGraphicalViewShowExitStats=!0,this.btGraphicalViewShowComponentStats=!0,this.btGraphicalViewShowExitStats=!0,this.allowObjectActivityTraceOnAllObjects=!1,this.dotNetExitPointsEnabled=!0,this.debugQuickTips=!1,this.debugLocationBarRow=!1,this.debugEventCounts=!1,this.mainNavEnabled=!0,this.customDashboardsEnabled=!0,this.changeAnalysisEnabled=!1,this.alconEnabled=!1,this.nonInclusiveEndTime=!1,this.useScaledFlowView=!0,this.baselineLightPerformanceDelta=25,this.derivedMetricsEnabled=!1,this.enableMBEvents=!1,this.agentDiagnosticsStatsViewTree=!0,this.allowDefaultViewsToBeDeleted=!0,this.autoSelectBaseline=!0,this.fakeBTEUMStats=!1,this.useSimpleFlowRenderers=!1,this.disableBackendGrouping=!1,this.renderFlow=!0,this.createTiersOnFlow=!0,this.createLinksOnFlow=!0,this.createStatsOnFlow=!0,this.defaultFlowExitStatRendererProvider="com.singularity.ee.ui.view.application.zoomableFlowView.renderers.simple.SimplerPerformanceStatRenderer",this.debugTrackingEvents=!1,this.externalMouseWheelEnabled=!1,this.debugAsyncFlow=!1,this.enablePAAPController=!0,this.fixNegativeNormalCalls=!0,this.launchHelpBubblesInPopups=!1,this.allowCreationOfOldDashboards=!1,this.testNullMetricData=!1,this.graphTimeAxisByTimeRange=!1,this.graphTimeAxisMaxByTimeRange=!1,this.debugTransientEvents=!1,this.performanceMetricsEnabled=!1,this.objectEventDispatchEnabled=!0,this.criticalThreshold=3,this.warningThreshold=2,this.maxCallGraphDepth=15,this.maxCallGraphExpandedNodes=100,this.callGraphDepthOnLoad=15,this.isLiteMode=!1,this.maximumTimeRangeBeforeNowDurationInMinutes=0,this.maximumTimeRangeBeforeNowDurationInMinutesForListViews=0,this.largeEnvironment=!1,this.baselinesEnabled=!1,this.fakeSystemEventMode=!1,this.eumF=!1,this.showDeviantMetrics=!0,this.autoHideErrorMessageFromCtrollerCalls=!0,this.releaseAnalysisEnabled=!0,this.eumEnabled=!0,this.includeAgentStatusInNodeHealthState=!1,this.frameDelayForFlowRendererUpdate=0,this.flowViewChildAddBatchProcessorEnabled=!1,this.flowViewChildAddBatchProcessorWorkDurationMillis=5e3,this.flowViewChildAddBatchProcessorSleepDurationMillis=1e3,this.defaultErrorHandlingEnabled=!1,this.autoAdjustInvalidTimeRangesInTimeRangeSelector=!1,this.autoAdjustInvalidTimeRangesInDataViews=!1,this.fakeAzureMode=!1,this.eumStreamWriterParseRulesEnabled=!1,this.troublshootNavEnabled=!0,this.accordionHeadersAlwaysGoToRoot=!0,this.viewIncidentSummaryPanel=!1,this.showDisabledHierarchicalConfig=!1,this.newPermissionMode=!0,this.showEventReactorDiagSessionsInDiagSessionList=!1,this.eumSessionsEnabled=!1,this.eumTopLevelNavZoneEnabled=!(-1!=window.location.href.indexOf("eumTopLevelNavZoneEnabled=false")),this.adqlEnabled=!0,this.debugCaches=-1!=InjectorService.instance().$location().absUrl().indexOf("debugCaches=true"),this._urlParams=new URLParams($location.path()),this.version=resourceManager.getString("version","version"),this.uiSchemaVersion=resourceManager.getString("version","controllerSchemaVersion"),this.buildNumber=resourceManager.getString("version","buildNumber"),this.buildTime=resourceManager.getString("version","buildTime"),this.fakeDataMode="true"==resourceManager.getString("config","fakeDataMode"),this.mockDataMode="true"==resourceManager.getString("config","mockDataMode"),this.saveTimeRangeInCookie="true"==resourceManager.getString("config","saveTimeRangeInCookie"),this.useImageCache="true"==resourceManager.getString("config","useImageCache"),this.deepLinkEnabled="true"==resourceManager.getString("config","deepLinkEnabled"),this.debugMode="true"==resourceManager.getString("config","debug")||this._urlParams.getParam("debug")&&"true"==this._urlParams.getParam("debug"),this.debugMode=this.debugMode||document.location.href&&-1!=document.location.href.indexOf("debug=true"),this.newSnapshotExplorer="true"==resourceManager.getString("config","newSnapshotExplorer")||this._urlParams.getParam("newSnapshotExplorer")&&"true"==this._urlParams.getParam("newSnapshotExplorer"),this.debugLogin="true"==resourceManager.getString("config","debugLogin")||this._urlParams.getParam("debugLogin")&&this._urlParams.getParam("debugLogin")?!0:!1,this.snapshotViewerEnabled="true"==resourceManager.getString("config","snapshotViewerEnabled")||this._urlParams.getParam("snapshotViewerEnabled")&&"true"==this._urlParams.getParam("snapshotViewerEnabled"),this.createFakeBTStats="true"==resourceManager.getString("config","createFakeBTStats")||this._urlParams.getParam("createFakeBTStats")&&"true"==this._urlParams.getParam("createFakeBTStats"),this.createFakeHugeCallGraph="true"==resourceManager.getString("config","createFakeHugeCallGraph")||this._urlParams.getParam("createFakeHugeCallGraph")&&"true"==this._urlParams.getParam("createFakeHugeCallGraph"),this.saveTimeRangeAsUserPreference=this.debugMode,this.fakeEventsMode=this._urlParams.getParam("fakeEventsMode")&&"true"==this._urlParams.getParam("fakeEventsMode");var tempEnableAccountsAndShowController="true"==resourceManager.getString("config","enableAccounts")||$location.absUrl()&&-1!=$location.absUrl().indexOf("enableAccounts=true"),showController="true"==resourceManager.getString("config","showController")||$location.absUrl()&&-1!=$location.absUrl().indexOf("showController=true");this.enableAccountsAndShowController=tempEnableAccountsAndShowController||showController,this.darkMode="true"==resourceManager.getString("config","darkMode")||this._urlParams.getParam("darkMode")&&"true"==this._urlParams.getParam("darkMode"),this.showAllEvents="true"==resourceManager.getString("config","showAllEvents")||this._urlParams.getParam("showAllEvents")&&"true"==this._urlParams.getParam("showAllEvents"),this.debugQuery=this.getBooleanURLParam("debugQuery"),this.logServiceCallDiagnostics="true"==resourceManager.getString("config","logServiceCallDiagnostics")||this._urlParams.getParam("logServiceCallDiagnostics")&&"true"==this._urlParams.getParam("logServiceCallDiagnostics"),this.logServiceCallDiagnostics&&(this.logServiceCalls=!0),this.viewDiagnosticsModal=this.getBooleanURLParam("viewDiagnosticsModal"),this.showInfoBTSnapsInReqTab="true"==resourceManager.getString("config","showInfoBTSnapsInReqTab")||this._urlParams.getParam("showInfoBTSnapsInReqTab")&&"true"==this._urlParams.getParam("showInfoBTSnapsInReqTab"),this.showImageStores="true"==resourceManager.getString("config","showImageStores")||this._urlParams.getParam("showImageStores")&&"true"==this._urlParams.getParam("showImageStores"),this.fakeMemoryDataMode=this._urlParams.getParam("fakeMemoryDataMode")&&"true"==this._urlParams.getParam("fakeMemoryDataMode"),this.fakeSnapshotCompareMode=this._urlParams.getParam("fakeSnapshotCompareMode")&&"true"==this._urlParams.getParam("fakeSnapshotCompareMode"),this._urlParams.getParam("cT")&&!isNaN(Number(this._urlParams.getParam("cT")))&&(this.criticalThreshold=Number(this._urlParams.getParam("cT"))),this._urlParams.getParam("wT")&&!isNaN(Number(this._urlParams.getParam("wT")))&&(this.warningThreshold=Number(this._urlParams.getParam("wT"))),this.admin=-1!=$location.absUrl().indexOf("admin.jsp")||this.getBooleanURLParam("admin"),this.fakeBTs=this.getNumberURLParam("fakeBTs",0),this.fakeComponents=this.getNumberURLParam("fakeComponents",0),this.debugMultiTenant=this.getBooleanURLParam("debugMultiTenant"),this.logDebug=this.getBooleanURLParam("logDebug"),this.debugComponentFetch=this.getBooleanURLParam("debugComponentFetch"),this.graphTimeAxisByTimeRange=this.getBooleanURLParam("graphTimeAxisByTimeRange"),this.graphTimeAxisMaxByTimeRange=this.getBooleanURLParam("graphTimeAxisMaxByTimeRange"),this._urlParams.getParam("maxCallGraphDepth")&&!isNaN(Number(this._urlParams.getParam("maxCallGraphDepth")))&&(this.maxCallGraphDepth=Number(this._urlParams.getParam("maxCallGraphDepth"))),this._urlParams.getParam("maxCallGraphExpandedNodes")&&!isNaN(Number(this._urlParams.getParam("maxCallGraphExpandedNodes")))&&(this.maxCallGraphExpandedNodes=Number(this._urlParams.getParam("maxCallGraphExpandedNodes"))),this._urlParams.getParam("callGraphDepthOnLoad")&&!isNaN(Number(this._urlParams.getParam("callGraphDepthOnLoad")))&&(this.callGraphDepthOnLoad=Number(this._urlParams.getParam("callGraphDepthOnLoad"))),this._urlParams.getParam("debugAsyncFlow")&&(this.debugAsyncFlow=this.getBooleanURLParam("debugAsyncFlow")),this._urlParams.getParam("maxCallGraphDepth")&&!isNaN(Number(this._urlParams.getParam("maxCallGraphDepth")))&&(this.maxCallGraphDepth=Number(this._urlParams.getParam("maxCallGraphDepth"))),this._urlParams.getParam("maxCallGraphExpandedNodes")&&!isNaN(Number(this._urlParams.getParam("maxCallGraphExpandedNodes")))&&(this.maxCallGraphExpandedNodes=Number(this._urlParams.getParam("maxCallGraphExpandedNodes"))),this._urlParams.getParam("callGraphDepthOnLoad")&&!isNaN(Number(this._urlParams.getParam("callGraphDepthOnLoad")))&&(this.callGraphDepthOnLoad=Number(this._urlParams.getParam("callGraphDepthOnLoad"))),this._urlParams.getParam("maxCallGraphDepth")&&!isNaN(Number(this._urlParams.getParam("maxCallGraphDepth")))&&(this.maxCallGraphDepth=Number(this._urlParams.getParam("maxCallGraphDepth"))),this._urlParams.getParam("maxCallGraphExpandedNodes")&&!isNaN(Number(this._urlParams.getParam("maxCallGraphExpandedNodes")))&&(this.maxCallGraphExpandedNodes=Number(this._urlParams.getParam("maxCallGraphExpandedNodes"))),this._urlParams.getParam("callGraphDepthOnLoad")&&!isNaN(Number(this._urlParams.getParam("callGraphDepthOnLoad")))&&(this.callGraphDepthOnLoad=Number(this._urlParams.getParam("callGraphDepthOnLoad"))),this._urlParams.getParam("mergeStallRSDs")&&(this.mergeStallRSDs="true"==this._urlParams.getParam("mergeStallRSDs")),this._urlParams.getParam("showCreateIncident")&&(this.showCreateIncident="true"==this._urlParams.getParam("showCreateIncident")),this._urlParams.getParam("showCallReturnContents")&&(this.showCallReturnContents="true"==this._urlParams.getParam("showCallReturnContents")),this._urlParams.getParam("allowObjectActivityTraceOnAllObjects")&&(this.allowObjectActivityTraceOnAllObjects="true"==this._urlParams.getParam("allowObjectActivityTraceOnAllObjects")),this._urlParams.getParam("baselineLightPerformanceDelta")&&(this.baselineLightPerformanceDelta=this.getNumberURLParam("baselineLightPerformanceDelta",this.baselineLightPerformanceDelta)),this.disableGraphicalView=this.getBooleanURLParam("disableGraphicalView"),this.isURLParamPresent("debugGraphicalView")&&(this.debugGraphicalView=this.getBooleanURLParam("debugGraphicalView")),this.isURLParamPresent("allowCreationOfOldDashboards")&&(this.allowCreationOfOldDashboards=this.getBooleanURLParam("allowCreationOfOldDashboards")),this.isURLParamPresent("disablePopups")&&(this.disablePopups=this.getBooleanURLParam("disablePopups")),this.debugQuickTips=this.getBooleanURLParam("debugQuickTips"),this.debugLocationBarRow=this.getBooleanURLParam("debugLocationBarRow"),this.debugEventCounts=this.getBooleanURLParam("debugEventCounts"),this.changeAnalysisEnabled=this.getBooleanURLParam("changeAnalysisEnabled"),this.alconEnabled=this.getBooleanURLParam("alconEnabled"),this.nonInclusiveEndTime=this.getBooleanURLParam("nonInclusiveEndTime"),this.debugTransientEvents=this.getBooleanURLParam("debugTransientEvents"),this.performanceMetricsEnabled=this.getBooleanURLParam("performanceMetricsEnabled"),this.derivedMetricsEnabled=this.getBooleanURLParam("derivedMetricsEnabled"),this.isURLParamPresent("useScaledFlowView")&&(this.useScaledFlowView=this.getBooleanURLParam("useScaledFlowView")),this.isURLParamPresent("autoSelectBaseline")&&(this.autoSelectBaseline=this.getBooleanURLParam("autoSelectBaseline")),this.isURLParamPresent("fakeSystemEventMode")&&(this.fakeSystemEventMode=this.getBooleanURLParam("fakeSystemEventMode")),this.eumF=this.getBooleanURLParam("eumF"),this.isURLParamPresent("releaseAnalysisEnabled")&&(this.releaseAnalysisEnabled=this.getBooleanURLParam("releaseAnalysisEnabled")),this.includeAgentStatusInNodeHealthState=this.getBooleanURLParam("includeAgentStatusInNodeHealthState"),this.useSimpleFlowRenderers=this.getBooleanURLParam("useSimpleFlowRenderers"),this.frameDelayForFlowRendererUpdate=this.getNumberURLParam("frameDelayForFlowRendererUpdate",0),this.isURLParamPresent("flowViewChildAddBatchProcessorEnabled")&&(this.flowViewChildAddBatchProcessorEnabled=this.getBooleanURLParam("flowViewChildAddBatchProcessorEnabled")),this.isURLParamPresent("defaultErrorHandlingEnabled")&&(this.defaultErrorHandlingEnabled=this.getBooleanURLParam("defaultErrorHandlingEnabled")),this.isURLParamPresent("debugTrackingEvents")&&(this.debugTrackingEvents=this.getBooleanURLParam("debugTrackingEvents")),this.flowViewChildAddBatchProcessorWorkDurationMillis=this.getNumberURLParam("flowViewChildAddBatchProcessorWorkDurationMillis",5e3),this.flowViewChildAddBatchProcessorSleepDurationMillis=this.getNumberURLParam("flowViewChildAddBatchProcessorSleepDurationMillis",1e3),this.isURLParamPresent("autoAdjustInvalidTimeRangesInTimeRangeSelector")&&(this.autoAdjustInvalidTimeRangesInTimeRangeSelector=this.getBooleanURLParam("autoAdjustInvalidTimeRangesInTimeRangeSelector")),this.isURLParamPresent("autoAdjustInvalidTimeRangesInDataViews")&&(this.autoAdjustInvalidTimeRangesInDataViews=this.getBooleanURLParam("autoAdjustInvalidTimeRangesInDataViews")),this.fakeAzureMode=this.getBooleanURLParam("fakeAzureMode",!1),this.account=this._urlParams.getParam("account"),this.eumStreamWriterParseRulesEnabled=this.getBooleanURLParam("eumStreamWriterParseRulesEnabled"),null!=this._urlParams.getParam("troublshootNavEnabled")&&(this.troublshootNavEnabled=this.getBooleanURLParam("troublshootNavEnabled")),null!=this._urlParams.getParam("enablePAAPController")&&(this.enablePAAPController=this.getBooleanURLParam("enablePAAPController")),null!=this._urlParams.getParam("fixNegativeNormalCalls")&&(this.fixNegativeNormalCalls=this.getBooleanURLParam("fixNegativeNormalCalls")),null!=this._urlParams.getParam("showDisabledHierarchicalConfig")&&(this.showDisabledHierarchicalConfig=this.getBooleanURLParam("showDisabledHierarchicalConfig")),this.viewIncidentSummaryPanel=this.getBooleanURLParam("viewIncidentSummaryPanel"),this.dbCamIntegrationEnabled=this.getBooleanURLParam("dbCamIntegrationEnabled"),this.showEventReactorDiagSessionsInDiagSessionList=this.getBooleanURLParam("showEventReactorDiagSessionsInDiagSessionList"),this.loadLastViewedApp=this.debugMode,this.eumSessionsEnabled=-1!=InjectorService.instance().$location().absUrl().indexOf("eumSessionsEnabled=true")}return AppConfig.instance=function(){return AngularUtil.getADInjector().get(AppConfig.SERVICE_NAME)},AppConfig.prototype.setShowAutomationFeatures=function(value){this.showAutomationFeatures=value,this.$rootScope.$broadcast("showAutomationFeaturesChanged")},AppConfig.prototype.navigationMode=function(){return this._navigationMode},AppConfig.prototype.setNavigationMode=function(value){this._navigationMode=value},AppConfig.prototype.isURLParamPresent=function(paramName,forceParamRefresh){return void 0===forceParamRefresh&&(forceParamRefresh=!1),(!this._urlParams||forceParamRefresh)&&(this._urlParams=new URLParams(this.$location.path())),null!=this._urlParams&&Boolean(this._urlParams.getParam(paramName))},AppConfig.prototype.getBooleanURLParam=function(paramName,forceParamRefresh){void 0===forceParamRefresh&&(forceParamRefresh=!1),(!this._urlParams||forceParamRefresh)&&(this._urlParams=new URLParams(this.$location.path()));var param="true"==this.resourceManager.getString("config",paramName)||this._urlParams.getParam(paramName)&&"true"==this._urlParams.getParam(paramName);return param},AppConfig.prototype.getNumberURLParam=function(paramName,defaultValue){var paramstring=this._urlParams.getParam(paramName);if(paramstring)try{return parseInt(paramstring)}catch(e){}return defaultValue},AppConfig.prototype.isParamEnabled=function(name,checkConfig){void 0===checkConfig&&(checkConfig=!0);var param;return checkConfig&&(param=Boolean(this.resourceManager.getString("config",name))),param||(param=Boolean(this._urlParams.getParam(name))),param},AppConfig.SERVICE_NAME="AppConfig",AppConfig.$inject=["$location","resourceManager","navigationHistoryService","$rootScope"],AppConfig}();appdynamicsModule.service(AppConfig.SERVICE_NAME,AppConfig),define("app/config/AppConfig",function(){});var ApplicationsCache=function(){function ApplicationsCache(){this.appMap={},this.entityCacheMap={},this.componentNodeCacheMap={},this.mobileAppsByAppId={},this.mobileAppsById={},this.fetchAllAppsPromise=null,this.isFetchAllInProgress=!1,this.debug=AppConfig.instance().debugCaches}return ApplicationsCache.instance=function(){return ApplicationsCache._instance||(ApplicationsCache._instance=new ApplicationsCache),ApplicationsCache._instance},ApplicationsCache.getApplicationTypeDisplayString=function(applicationType){var resouceManager=InjectorService.instance().resourceManager();return 0==applicationType?resouceManager.getString("ui","ms_applicationType_APM"):1==applicationType?resouceManager.getString("ui","ms_applicationType_EUM_WEB"):2==applicationType?resourceManager.getString("ui","ms_applicationType_MOBILE"):4==applicationType?resouceManager.getString("ui","ms_applicationType_DBMON"):3==applicationType?resouceManager.getString("ui","ms_applicationType_SIM"):5==applicationType?resouceManager.getString("ui","ms_applicationType_ANALYTICS"):void 0},ApplicationsCache.hasApplicationType=function(application,applicationType){return application&&application.applicationTypeInfo&&application.applicationTypeInfo.applicationTypes&&-1!=application.applicationTypeInfo.applicationTypes.indexOf(applicationType)},ApplicationsCache.hasAnyApplicationTypes=function(application,applicationTypes){if(applicationTypes&&application)for(var i=0;i<applicationTypes.length;i++)if(ApplicationsCache.hasApplicationType(application,applicationTypes[i]))return!0;return!1},ApplicationsCache.prototype.getAllApplications=function(forceRefresh){if(void 0===forceRefresh&&(forceRefresh=!1),!this.allApplications||forceRefresh)return this.fetchAllApplications();var deferred=InjectorService.instance().$q().defer();return deferred.resolve(),deferred.promise},ApplicationsCache.prototype.fetchAllApplications=function(){var _this=this;return this.isFetchAllInProgress&&this.fetchAllAppsPromise?this.fetchAllAppsPromise:(this.debug&&NotificationService.instance().displayMessage("Fetching applications...",""),this.isFetchAllInProgress=!0,this.fetchAllAppsPromise=ApplicationUiService.instance().getApplicationsAllTypes().then(function(allApps){_this.isFetchAllInProgress=!1,_this.allApplications=allApps,_this.allApplications.apmApplications=Util.sortByName(_this.allApplications.apmApplications),_this.appMap={},_this.processApplications(_this.allApplications.apmApplications,0),_this.processApplications(_this.allApplications.eumWebApplications,1),_this.processApplications(_this.allApplications.mobileAppContainers,2),_this.allApplications.dbMonApplication&&_this.processApplications([_this.allApplications.dbMonApplication],4),_this.allApplications.simApplication&&_this.processApplications([_this.allApplications.simApplication],3),_this.allApplications.analyticsApplication&&_this.processApplications([_this.allApplications.analyticsApplication],5),EventBusService.instance().dispatchEvent(ApplicationsCache.UEV_APPLICATIONS_FETCHED_BY_APP_CACHE,_this.allApplications)}),this.fetchAllAppsPromise)},ApplicationsCache.prototype.getApplicationById=function(id){var tuple=this.appMap[id];return tuple?tuple[1]:void 0},ApplicationsCache.prototype.findApplicationById=function(id){var _this=this,application=this.getApplicationById(id),deferred=InjectorService.instance().$q().defer();return application?deferred.resolve(application):this.getAllApplications(!0).then(function(){application=_this.getApplicationById(id),deferred.resolve(application)}),deferred.promise},ApplicationsCache.prototype.getApplicationTypeById=function(id){var tuple=this.appMap[id];return tuple?tuple[0]:void 0},ApplicationsCache.prototype.getEntityCache=function(entityType,applicationId){var key=this.key(entityType,applicationId);return this.getApplicationById(applicationId)?this.entityCacheMap[key]:null},ApplicationsCache.prototype.getComponentNodeCacheByComponentId=function(componentId,createIfNotExists){void 0===createIfNotExists&&(createIfNotExists=!0);var componentNodeCache=this.componentNodeCacheMap[componentId];return!componentNodeCache&&createIfNotExists&&(componentNodeCache=new ComponentNodeCache(componentId),this.componentNodeCacheMap[componentId]=componentNodeCache),componentNodeCache},ApplicationsCache.prototype.getMobileApps=function(applicationId,forceRefresh){if(void 0===forceRefresh&&(forceRefresh=!1),!this.mobileAppsByAppId[applicationId]||forceRefresh)return this.fetchMobileApps(applicationId);var deferred=InjectorService.instance().$q().defer();return deferred.resolve(),deferred.promise},ApplicationsCache.prototype.fetchMobileApps=function(applicationId){var _this=this;-1!=InjectorService.instance().$location().absUrl().indexOf("debugCaches=true")&&NotificationService.instance().displayMessage("Fetching mobile apps....","");var promise=EUMApplicationsUiService.instance().getMobileAppsForApp(applicationId).then(function(mobileApps){_this.mobileAppsByAppId[applicationId]=mobileApps;for(var i=0;i<mobileApps.length;i++)_this.mobileAppsById[mobileApps[i].id]=mobileApps[i]});return promise},ApplicationsCache.prototype.getMobileAppById=function(mobileAppId){return this.mobileAppsById[mobileAppId]},ApplicationsCache.prototype.getMobileAppsByApplicationId=function(applicationId){return this.mobileAppsByAppId[applicationId]},ApplicationsCache.prototype.apmApplications=function(){return this.allApplications&&this.allApplications.apmApplications?this.allApplications.apmApplications:[]},ApplicationsCache.prototype.processApplications=function(applications,type){for(var i=0;i<applications.length;i++){this.appMap[applications[i].id]=[type,applications[i]];var componentKey=this.key(EntityType.APPLICATION_COMPONENT,applications[i].id);this.entityCacheMap[componentKey]||(this.entityCacheMap[componentKey]=new ComponentCache(applications[i].id));var btKey=this.key(EntityType.BUSINESS_TRANSACTION,applications[i].id);this.entityCacheMap[btKey]||(this.entityCacheMap[btKey]=new BusinessTransactionCache(applications[i].id));var pageKey=this.key(EntityType.BASE_PAGE,applications[i].id);this.entityCacheMap[pageKey]||(this.entityCacheMap[pageKey]=new EUMPageCache(applications[i].id))}},ApplicationsCache.prototype.key=function(entityType,applicationId){return entityType+" app:"+applicationId},ApplicationsCache.UEV_APPLICATIONS_FETCHED_BY_APP_CACHE="UEV_APPLICATIONS_FETCHED_BY_APP_CACHE",ApplicationsCache}(),AppType;!function(AppType){AppType[AppType.APM=0]="APM",AppType[AppType.EUM_WEB=1]="EUM_WEB",AppType[AppType.EUM_MOBILE=2]="EUM_MOBILE",AppType[AppType.SIM=3]="SIM",AppType[AppType.DBMON=4]="DBMON",AppType[AppType.ANALYTICS=5]="ANALYTICS"}(AppType||(AppType={})),define("app/model/ApplicationsCache",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BusinessTransactionCache=function(_super){function BusinessTransactionCache(applicationId){_super.call(this,applicationId),this.applicationId=applicationId,this.entityType=EntityType.BUSINESS_TRANSACTION}return __extends(BusinessTransactionCache,_super),BusinessTransactionCache.prototype.getBusinessTransactionById=function(id){return this.getEntityById(id)},BusinessTransactionCache.prototype.fetchEntities=function(){var _this=this;if(Util.isValidId(this.applicationId)){ApplicationsCache.instance().debug&&NotificationService.instance().displayMessage("Fetching bts...","");var promise=BusinessTransactionUiService.instance().getBusinessTransactions(this.applicationId);return promise.then(function(bts){_this.processEntitiesFetched(bts)}),promise}},BusinessTransactionCache}(EntityCache);define("app/model/BusinessTransactionCache",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ComponentCache=function(_super){function ComponentCache(applicationId){_super.call(this,applicationId),this.applicationId=applicationId,this.entityType=EntityType.APPLICATION_COMPONENT}return __extends(ComponentCache,_super),ComponentCache.prototype.getComponentById=function(id){return this.getEntityById(id)},ComponentCache.prototype.fetchEntities=function(){var _this=this;if(Util.isValidId(this.applicationId)){ApplicationsCache.instance().debug&&NotificationService.instance().displayMessage("Fetching components...","");var promise=ApplicationUiService.instance().getAllApplicationComponents(this.applicationId);return promise.then(function(components){_this.processEntitiesFetched(components)}),promise}},ComponentCache}(EntityCache);define("app/model/ComponentCache",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ComponentNodeCache=function(_super){function ComponentNodeCache(componentId){_super.call(this,-1),this.componentId=componentId,this.entityType=EntityType.APPLICATION_COMPONENT_NODE}return __extends(ComponentNodeCache,_super),ComponentNodeCache.prototype.getNodeById=function(id){return this.getEntityById(id)},ComponentNodeCache.prototype.fetchEntities=function(){var _this=this;if(Util.isValidId(this.componentId)){ApplicationsCache.instance().debug&&NotificationService.instance().displayMessage("Fetching Nodes for component: "+this.componentId,"");var promise=NodeUiService.instance().getApplicationComponentNodesByComponentId(this.componentId);return promise.then(function(nodes){_this.processEntitiesFetched(nodes)}),promise}},ComponentNodeCache}(EntityCache);define("app/model/ComponentNodeCache",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},DatabaseCache=function(_super){function DatabaseCache(){_super.call(this),this.entityType=EntityType.DB_SERVER}return __extends(DatabaseCache,_super),DatabaseCache.instance=function(){return DatabaseCache._instance},DatabaseCache.prototype.fetchEntities=function(){var _this=this,promise=DbMonitoringUiService.instance().getAllConsolidatedDatabases();return promise.then(function(databases){return _this.processEntitiesFetched(databases),SharedInjectorService.instance().$q().when(databases)}),promise},DatabaseCache._instance=new DatabaseCache,DatabaseCache}(EntityCache);define("app/model/DatabaseCache",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EUMPageCache=function(_super){function EUMPageCache(applicationId){_super.call(this,applicationId),this.applicationId=applicationId,this.entityType=EntityType.BASE_PAGE}return __extends(EUMPageCache,_super),EUMPageCache.prototype.getPageById=function(id){return this.getEntityById(id)},EUMPageCache.prototype.fetchEntities=function(){var _this=this;if(Util.isValidId(this.applicationId)){ApplicationsCache.instance().debug&&NotificationService.instance().displayMessage("Fetching pages...","");var addFilter={};addFilter.types=[ApplicationDiagnosticDataType.BASE_PAGE,ApplicationDiagnosticDataType.AJAX_REQUEST,ApplicationDiagnosticDataType.VIRTUAL_PAGE],addFilter.applicationId=this.applicationId;var promise=UserUiService.instance().getApplicationDiagnosticDatas(addFilter);return promise.then(function(applicationDiagnosticDatas){_this.processEntitiesFetched(applicationDiagnosticDatas)}),promise}},EUMPageCache}(EntityCache);define("app/model/EUMPageCache",function(){});var TimeBaseDataCache=function(){function TimeBaseDataCache(){this.debug=AppConfig.instance().debugCaches,this.lastFetchedTime=new Date}return TimeBaseDataCache.prototype.get=function(params,forceLoad){var _this=this;return this.fetchPromise&&this&&this.isCacheDataValid(params)&&!forceLoad?(this.debug&&this.debugMessage("TimeBasedDataCache - Returning data from cache"),this.fetchPromise):(this.debug&&this.debugMessage("TimeBasedDataCache - Fetching data from server"),this.fetchPromise=this.fetchDataCallbackFn(params).then(function(response){return _this.lastFetchedTime=new Date,_this.lastFetchedForTimeRangeString=TimeRangeService.instance().getCurrentTimeRangeString(),_this.lastFetchedForParamsHash=_this.getParamsHash(params),response}),this.fetchPromise)},TimeBaseDataCache.prototype.isCacheDataValid=function(params){var now=new Date;if(!this.areParamsSameAsPreviousCall(params))return!1;var now=new Date;return now.getTime()-this.lastFetchedTime.getTime()>=this.getTimeToLiveInMillisec(params)?!1:!0},TimeBaseDataCache.prototype.areParamsSameAsPreviousCall=function(params){var currentParamsHash=this.getParamsHash(params);return currentParamsHash===this.lastFetchedForParamsHash},TimeBaseDataCache.prototype.getParamsHash=function(params){var signature="";return params&&(signature=JSON.stringify(params)),CryptoUtils.getMD5(signature)},TimeBaseDataCache.prototype.getTimeRangeFromParams=function(params){var timeRange=null,timeRanges=[];if(params)for(var i=0;i<params.length;i++)try{timeRange=TimeRangeService.instance().createTimeRange(params[i].toString(),"."),timeRange&&timeRanges.push(timeRange)
}catch(error){ADLoggerService.error("TimeBasedDataCache - error parsing time range from paream : "+params[i])}return timeRanges&&1==timeRanges.length?timeRanges[0]:null},TimeBaseDataCache.prototype.getTimeToLiveInMillisec=function(){return 1*DateTimeUtil.MILLISEC_PER_MIN},TimeBaseDataCache.prototype.debugMessage=function(message){NotificationService.instance().displayMessage(message,"")},TimeBaseDataCache}();define("app/model/TimeBasedDataCache",function(){});var GlobalConstants=function(){function GlobalConstants(){}return GlobalConstants.BT_DETAIL_VIEW_MODE_GRAPHICAL="Graphical View",GlobalConstants.BT_DETAIL_MODE_TREE="Tree View",GlobalConstants.APP_DASH_VIEW_MODE_GRAPHICAL="Application Flow Map (graphical view)",GlobalConstants.APP_DASH_VIEW_MODE_TREE="Application Infrastructure List",GlobalConstants.APP_DASH_VIEW_MODE_FLOW_LIST="Application Flow List (grid view)",GlobalConstants.ALL_APPS_DASH_VIEW_MODE_GRAPHICAL=0,GlobalConstants.ALL_APPS_DASH_VIEW_MODE_LIST=1,GlobalConstants.NAV_MODE_BASIC="NAV_MODE_BASIC",GlobalConstants.NAV_MODE_ADVANCED="NAV_MODE_ADVANCED",GlobalConstants}(),EntryPointConfigCache=function(){function EntryPointConfigCache(){}return EntryPointConfigCache.TYPE_APP_JAVA_AGENT_ENTRY_POINT_CONFIG="TYPE_APP_JAVA_AGENT_ENTRY_POINT_CONFIG",EntryPointConfigCache.TYPE_APP_DOT_NET_AGENT_ENTRY_POINT_CONFIG="TYPE_APP_DOT_NET_AGENT_ENTRY_POINT_CONFIG",EntryPointConfigCache.TYPE_APP_PHP_AGENT_ENTRY_POINT_CONFIG="TYPE_APP_PHP_AGENT_ENTRY_POINT_CONFIG",EntryPointConfigCache.TYPE_APP_NODEJS_AGENT_ENTRY_POINT_CONFIG="TYPE_APP_NODEJS_AGENT_ENTRY_POINT_CONFIG",EntryPointConfigCache.TYPE_APP_PYTHON_AGENT_ENTRY_POINT_CONFIG="TYPE_APP_PYTHON_AGENT_ENTRY_POINT_CONFIG",EntryPointConfigCache.TYPE_COMPONENT_ENTRY_POINT_CONFIG="TYPE_COMPONENT_ENTRY_POINT_CONFIG",EntryPointConfigCache.TYPE_APP_NATIVE_AGENT_ENTRY_POINT_CONFIG="TYPE_APP_NATIVE_AGENT_ENTRY_POINT_CONFIG",EntryPointConfigCache}();define("app/config/GlobalConstants",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},InjectorService=function(_super){function InjectorService(){_super.call(this)}return __extends(InjectorService,_super),InjectorService.instance=function(){return AngularUtil.getADInjector().get(InjectorService.SERVICE_NAME)},InjectorService.prototype.flashService=function(){return this.getADInjector().get("flashService")},InjectorService.prototype.entityViewService=function(){return this.getADInjector().get("entityViewService")},InjectorService.prototype.applicationViewService=function(){return this.getADInjector().get("applicationViewService")},InjectorService.prototype.eumViewService=function(){return this.getADInjector().get("eumViewService")},InjectorService.prototype.navigationService=function(){return this.getADInjector().get("navigationService")},InjectorService.prototype.masterService=function(){return this.getADInjector().get("masterService")},InjectorService.prototype.eventsUiService=function(){return this.getADInjector().get("eventsUiService")},InjectorService.prototype.businessTransactionUiService=function(){return this.getADInjector().get("businessTransactionUiService")},InjectorService.prototype.businessTransactionViewService=function(){return this.getADInjector().get("businessTransactionViewService")},InjectorService.prototype.componentUiService=function(){return this.getADInjector().get("componentUiService")},InjectorService.prototype.dashboardGraphService=function(){return this.getADInjector().get("dashboardGraphService")},InjectorService.prototype.appConfig=function(){return this.getADInjector().get("AppConfig")},InjectorService.prototype.userService=function(){return this.getADInjector().get("userService")},InjectorService.prototype.navigationHistoryService=function(){return this.getADInjector().get("navigationHistoryService")},InjectorService.prototype.userUiService=function(){return this.getADInjector().get("userUiService")},InjectorService.prototype.analyticsViewService=function(){return this.getADInjector().get("analyticsViewService")},InjectorService.prototype.metaDataService=function(){return this.getADInjector().get("metaDataService")},InjectorService.SERVICE_NAME="injectorService",InjectorService}(SharedInjectorService);appdynamicsModule.service(InjectorService.SERVICE_NAME,InjectorService),define("app/services/InjectorService",function(){});var EventStreamManagerService=function(){function EventStreamManagerService($http,$q){this.$http=$http,this.$q=$q}return EventStreamManagerService.prototype.getEvents=function(){var deferred=this.$q.defer();return this.$http({url:"restui/events/all",dataType:"json",method:"GET"}).success(function(response){deferred.resolve(response)}).error(function(error){deferred.resolve(error)}),deferred.promise},EventStreamManagerService.$inject=["$http","$q"],EventStreamManagerService}();appdynamicsModule.service("eventStreamManagerService",EventStreamManagerService),define("app/services/EventStreamManagerService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EmailSMSConfigDialogController=function(_super){function EmailSMSConfigDialogController($scope,resourceManager,notificationService,$modalInstance,accountUiService,flashService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.$modalInstance=$modalInstance,this.accountUiService=accountUiService,this.flashService=flashService,this.injectorService=injectorService,this.$scope.controller=this,this.SMSCarrier=[{value:"@txt.att.net",name:"AT&T Wireless"},{value:"@page.nextel.com",name:"Sprint(Nextel)"},{value:"@messaging.sprintpcs.com",name:"Sprint(PCS)"},{value:"@tmomail.net",name:"T-Mobile"},{value:"@vtext.com",name:"Verizon Wireless"}],this.authnRequiredOptions=[{value:"Yes",name:ResourceManager.instance().getString("ui","ms_yes")},{value:"No",name:ResourceManager.instance().getString("ui","ms_no")}],this.saveInProgress=!1,this.carrierDefault=!1,this.carrierCustom=!0,this.defaultCarrier="true",this.authnRequired=!1,this.someCarrier=this.SMSCarrier[0],this.requiredAuthn=this.authnRequiredOptions[1],this.emailSMSNoteEnable=!1,this.secureConnection="secureConnectionNever",this.saveConfigMode=!0,this.fetchData()}return __extends(EmailSMSConfigDialogController,_super),EmailSMSConfigDialogController.prototype.onTestEmailMode=function(){return this.saveConfigMode=!1,this.testEmail&&0!==this.testEmail.length?void this.onEmailSMSConfigSubmit():void this.notificationService.displayError(this.getString("ms_emailFormatValidationError"),"")},EmailSMSConfigDialogController.prototype.onSubmitMode=function(){this.saveInProgress=!0,this.saveConfigMode=!0,this.onEmailSMSConfigSubmit()},EmailSMSConfigDialogController.prototype.onEmailSMSConfigClose=function(){this.$modalInstance.close()},EmailSMSConfigDialogController.prototype.fetchData=function(){var _this=this;this.accountUiService.getNotificationConfig().then(function(response){var notificationConfig=_this.accountUiService.getNotificationConfig_response(response);_this.configID=notificationConfig.id,_this.version=notificationConfig.version,null!=notificationConfig.smtpHost&&notificationConfig.smtpHost.length>0&&(_this.emailSMSNoteEnable=!0,_this.notificationConfigText=notificationConfig.notificationConfigText,_this.smtpHost=notificationConfig.smtpHost,_this.smtpPort=notificationConfig.smtpPort,_this.fromAddress=notificationConfig.fromAddress,_this.emailUser=notificationConfig.emailUser,_this.emailPasswd=notificationConfig.emailPasswd,_this.confirmPassword=notificationConfig.emailPasswd,_this.secureConnection=notificationConfig.secureConnectionNever?"secureConnectionNever":notificationConfig.secureConnectionSSL?"secureConnectionSSL":notificationConfig.secureConnectionTLSAlways?"secureConnectionTLSAlways":"secureConnectionTLSIfAvail",_this.secureAuthN=notificationConfig.useSecureAuthentication,null!=notificationConfig.emailPasswd&&null!=notificationConfig.emailUser?(_this.requiredAuthn=_this.authnRequiredOptions[0],_this.emailUser=notificationConfig.emailUser,_this.authnRequired=!0):(_this.requiredAuthn=_this.authnRequiredOptions[1],_this.authnRequired=!1),_this.someCarrier=_this.optionSetter(notificationConfig.smsExtension,_this.SMSCarrier,"value"),_this.someCarrier?(_this.defaultCarrier="true",_this.customCarrier=""):(_this.defaultCarrier="false",_this.someCarrier=_this.SMSCarrier[0],_this.customCarrier=notificationConfig.smsExtension.substring(1)),_this.handleCarrierDefaultCustom())})},EmailSMSConfigDialogController.prototype.formValidation=function(){this.$scope.$broadcast("validateForm",{onlyRequired:this.saveConfigMode===!0});var formValid=this.ServerSettingsForm.$valid;return this.saveConfigMode||(formValid=this.EmailSMSForm.$valid&&formValid),formValid},EmailSMSConfigDialogController.prototype.optionSetter=function(value,options,field){for(var i in options)if(value==options[i][field])return options[i]},EmailSMSConfigDialogController.prototype.handleSubmitSaveMode=function(configData){var _this=this;if(this.saveConfigMode)this.accountUiService.setNotificationConfig(configData).then(function(){_this.flashService.notificationConfigUpdated(),_this.notificationService.displayMessage("Updated Successfully",""),_this.$modalInstance.close()},function(){_this.saveInProgress=!1}),this.notificationService.displayMessage("Updating Email/SMS Configuration...","");else{this.notificationService.displayMessage("Sending test email...","");var resultHandlerTest=function(response){response?_this.notificationService.displayMessage("Test email was sent",""):_this.notificationService.displayError("Test email was not sent, authentication error","")},promise=this.accountUiService.testNotificationConfig(configData,this.testEmail);promise.then(resultHandlerTest)}},EmailSMSConfigDialogController.prototype.getSecureConnectionType=function(){var secureConnectionTypes={secureConnectionNever:!1,secureConnectionTLSIfAvail:!1,secureConnectionTLSAlways:!1,secureConnectionSSL:!1};switch(this.secureConnection){case"secureConnectionNever":secureConnectionTypes.secureConnectionNever=!0;break;case"secureConnectionTLSIfAvail":secureConnectionTypes.secureConnectionTLSIfAvail=!0;break;case"secureConnectionTLSAlways":secureConnectionTypes.secureConnectionTLSAlways=!0;break;case"secureConnectionSSL":secureConnectionTypes.secureConnectionSSL=!0}return secureConnectionTypes},EmailSMSConfigDialogController.prototype.getEmailSMSConfigFromForm=function(){var secureConnectionTypes=this.getSecureConnectionType(),configData={id:this.configID,version:this.version,smtpHost:this.smtpHost,smtpPort:this.smtpPort,fromAddress:this.fromAddress,secureConnectionNever:secureConnectionTypes.secureConnectionNever,secureConnectionTLSIfAvail:secureConnectionTypes.secureConnectionTLSIfAvail,secureConnectionTLSAlways:secureConnectionTypes.secureConnectionTLSAlways,secureConnectionSSL:secureConnectionTypes.secureConnectionSSL,notificationConfigText:this.notificationConfigText,useSecureAuthentication:this.secureAuthN,emailUser:this.emailUser,emailPasswd:this.emailPasswd,confirmPassword:this.confirmPassword};return configData.smsExtension="true"==this.defaultCarrier?""+this.someCarrier.value:"@"+this.customCarrier,configData},EmailSMSConfigDialogController.prototype.onEmailSMSConfigSubmit=function(){var formValid=this.emailSMSNoteEnable?this.formValidation():!0;if(formValid){var configData=this.getEmailSMSConfigFromForm();if(this.emailSMSNoteEnable)this.requiredAuthn==this.authnRequiredOptions[0]?(delete configData.confirmPassword,this.handleSubmitSaveMode(configData)):(delete configData.confirmPassword,configData.emailUser=null,configData.emailPasswd=null,this.handleSubmitSaveMode(configData));else{for(var prop in configData)configData[prop]=null;configData.id=this.configID,configData.version=this.version,delete configData.confirmPassword,this.handleSubmitSaveMode(configData)}}else this.saveInProgress=!1},EmailSMSConfigDialogController.prototype.handleCarrierChange=function(){ADLoggerService.log(this.someCarrier)},EmailSMSConfigDialogController.prototype.handleCarrierDefaultCustom=function(){"true"==this.defaultCarrier?(this.carrierDefault=!1,this.carrierCustom=!0):(this.carrierDefault=!0,this.carrierCustom=!1)},EmailSMSConfigDialogController.prototype.handleAuthNRequired=function(){"Yes"==this.requiredAuthn.value?this.authnRequired=!0:(this.confirmPassword="",this.emailPasswd="",this.emailUser="",this.authnRequired=!1)},EmailSMSConfigDialogController.$inject=["$scope","resourceManager","notificationService","$modalInstance","accountUiService","flashService","injectorService"],EmailSMSConfigDialogController}(ControllerBase);define("app/view/common/dialogs/EmailSMSConfigDialog/EmailSMSConfigDialogController",function(){});var NotificationConfigService=function(){function NotificationConfigService(dialogService){this.dialogService=dialogService}return NotificationConfigService.instance=function(){return AngularUtil.getADInjector().get(NotificationConfigService.SERVICE_NAME)},NotificationConfigService.prototype.openEmailSMSConfig=function(scope,onCloseHandler){var _this=this;require(["app/view/common/dialogs/EmailSMSConfigDialog/EmailSMSConfigDialogController"],function(){_this.dialogService.showDialog(EmailSMSConfigDialogController,"app/view/common/dialogs/EmailSMSConfigDialog/EmailSMSConfigDialogController","app/view/common/dialogs/EmailSMSConfigDialog/EmailSMSConfigDialog.html").then(function($modalInstance){$modalInstance.result.then(function(){_.isFunction(onCloseHandler)&&onCloseHandler()})})})},NotificationConfigService.SERVICE_NAME="notificationConfigService",NotificationConfigService.$inject=["dialogService"],NotificationConfigService}();appdynamicsModule.service(NotificationConfigService.SERVICE_NAME,NotificationConfigService),define("app/services/NotificationConfigService",function(){});var RESTService=function(){function RESTService($http,$q){this.$http=$http,this.$q=$q}return RESTService.prototype.isErrorResult=function(result,status){return void 0===status&&(status=null),status&&"499"==status?!0:result&&0==result.toString().indexOf("<!DOCTYPE html")?!0:!1},RESTService.prototype.serverSummary=function(appId){var deferred=this.$q.defer();return this.$http({url:"restui/applicationManagerUiBean/serverSummary/"+appId,dataType:"json",method:"GET"}).success(function(response){deferred.resolve(response)}).error(function(error){deferred.reject(error)}),deferred.promise},RESTService.$inject=["$http","$q"],RESTService}();appdynamicsModule.service("restService",RESTService),define("app/services/RESTService",function(){});var ApplicationService=function(){function ApplicationService($rootScope,$location){var _this=this;this.$rootScope=$rootScope,this.$location=$location,$rootScope.$on(NavigationService.UEV_NAV_ACTION_HTML,function(){_this.on_UEV_NAV_ACTION()}),$rootScope.$on(NavigationService.UEV_NAV_ACTION_FLASH,function(){_this.on_UEV_NAV_ACTION()}),this.on_UEV_NAV_ACTION()}return ApplicationService.prototype.on_UEV_NAV_ACTION=function(){var appId=this.getApplicationIdFromUrl();isNaN(appId)||appId==this.applicationId||this.$rootScope.$broadcast(ApplicationService.UEV_APPLICATION_CHANGED,appId),this.applicationId=appId},ApplicationService.prototype.getCurrentUrlParams=function(){return new URLParams(this.$location.path())},ApplicationService.prototype.getApplicationIdFromUrl=function(){return parseInt(this.getCurrentUrlParams().application())},ApplicationService.UEV_APPLICATION_CHANGED="UEV_APPLICATION_CHANGED",ApplicationService.$inject=["$rootScope","$location"],ApplicationService}();appdynamicsModule.service("applicationService",ApplicationService),define("app/view/apm/services/ApplicationService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ApplicationViewService=function(_super){function ApplicationViewService($location,navigationService,notificationService,resourceManager,$dialog,dialogService,$rootScope,allApplicationsUiService,userUiService,flashService){var _this=this;_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.$dialog=$dialog,this.dialogService=dialogService,this.$rootScope=$rootScope,this.allApplicationsUiService=allApplicationsUiService,this.userUiService=userUiService,this.flashService=flashService,EventBusService.instance().registerEventListener(NavigationService.UEV_NAV_ACTION,function(){_this.isAppDashLocation(URLParams.getCurrentUrlParams())&&(_this.lastViewedAppDashLocation=URLParams.getCurrentUrlParams().location())},null)}return __extends(ApplicationViewService,_super),ApplicationViewService.instance=function(){return AngularUtil.getADInjector().get(ApplicationViewService.SERVICE_NAME)},ApplicationViewService.prototype.viewAllApplicationsDashboard=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APPS_ALL_DASHBOARD),this.navigationService.navigateTo(params.toString())},ApplicationViewService.prototype.viewApplicationDashboard=function(applicationId){var location=this.lastViewedAppDashLocation?this.lastViewedAppDashLocation:NavigationDataConstants.APP_DASHBOARD;this.viewApplicationDashboardLocation(location,applicationId)},ApplicationViewService.prototype.viewApplicationDashboardLocation=function(location,applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,location),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},ApplicationViewService.prototype.viewApplicationDashboardForTab=function(applicationId,tab){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),tab&&!isNaN(tab)&&tab>=0&&params.setNumberParam(UrlConstants.TAB_ID,tab),this.navigationService.navigateTo(params.toString())},ApplicationViewService.prototype.viewEndUserExperienceWeb=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},ApplicationViewService.prototype.viewEndUserExperienceIos=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_PLATFORM),params.setParam(UrlConstants.EUM_PLATFORM,MobilePlatform.IOS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},ApplicationViewService.prototype.viewEndUserExperienceAndroid=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_PLATFORM),params.setParam(UrlConstants.EUM_PLATFORM,MobilePlatform.ANDROID),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},ApplicationViewService.prototype.viewMachineSnapshots=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_MACHINE_SNAPSHOTS,applicationId)},ApplicationViewService.prototype.viewAppServerHome=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_INFRASTRUCTURE,applicationId)},ApplicationViewService.prototype.viewAppInfrastructure=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_INFRASTRUCTURE,applicationId)},ApplicationViewService.prototype.viewAppTopBts=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_TOP_BT_LIST,applicationId)},ApplicationViewService.prototype.viewAppEvents=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_EVENTSTREAM_LIST,applicationId)},ApplicationViewService.prototype.viewAppSnapshots=function(applicationId){FlashService.instance().isHTMLEnabledLocation(NavigationDataConstants.APP_ALL_SNAPSHOT_LIST)?this.viewApplicationLocation(NavigationDataConstants.APP_ALL_SNAPSHOT_LIST,applicationId):this.viewApplicationDashboardForTab(applicationId,ApplicationViewService.TAB_APP_SNAPSHOTS)},ApplicationViewService.prototype.viewAppAlertRespond=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.ALERT_RESPOND_APP_HOME,applicationId)},ApplicationViewService.prototype.viewAppTroubleshoot=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_TROUBLESHOOT_HOME,applicationId)},ApplicationViewService.prototype.viewAppMore=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_MORE_HOME,applicationId)},ApplicationViewService.prototype.viewAppAnalyze=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_ANALYZE_HOME,applicationId)},ApplicationViewService.prototype.viewAppConfigure=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_CONFIGURATION_HOME,applicationId)},ApplicationViewService.prototype.viewAppHealthRuleViolations=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_INCIDENT_LIST,applicationId)},ApplicationViewService.prototype.viewAppHealthRules=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.ALERT_RESPOND_HEALTH_RULES,applicationId)},ApplicationViewService.prototype.viewAppErrors=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_ERRORS,applicationId)},ApplicationViewService.prototype.viewAppExceptions=function(){this.flashService.viewExceptionListForEntity(EntityType.APPLICATION)},ApplicationViewService.prototype.viewAppBtHealth=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_BT_LIST,applicationId)},ApplicationViewService.prototype.getApplicationDashboardNavigationTabs=function(applicationId){var _this=this,deferred=InjectorService.instance().$q().defer();return ApplicationUiService.instance().getApplicationComponentInfo(applicationId).then(function(appCompInfo){var showMachineSnapshotsTab=appCompInfo.numberOfDotNetComponents>0,tabs=[],showNpm=MasterService.instance().initData&&MasterService.instance().initData.mainNavConfig.showNpm;tabs.push(NavigationTabUtil.create(_this.getString("ms_overviewDashboardTabLabel"),function(){_this.viewApplicationDashboardLocation(NavigationDataConstants.APP_DASHBOARD,applicationId)})),showNpm&&tabs.push(NavigationTabUtil.create(_this.getString("ms_networkDashboard"),function(){_this.viewApplicationLocation(NavigationDataConstants.APP_NETWORK_DASHBOARD,applicationId)})),tabs.push(NavigationTabUtil.create(_this.getString("ms_events"),function(){_this.viewAppEvents(applicationId)})),tabs.push(NavigationTabUtil.create(_this.getString("ms_topBusinessTransactions"),function(){_this.viewAppTopBts(applicationId)})),tabs.push(NavigationTabUtil.create(_this.getString("ms_snapshotsTabTitle"),function(){_this.viewAppSnapshots(applicationId)})),tabs.push(NavigationTabUtil.create(_this.getString("ms_histogramTabLabelOnDashboards"),function(){_this.viewApplicationLocation(NavigationDataConstants.APP_TX_SCORE,applicationId)})),showMachineSnapshotsTab&&tabs.push(NavigationTabUtil.create(_this.getString("ms_machineSnapshotsTabTitle"),function(){_this.viewMachineSnapshots(applicationId)})),deferred.resolve(tabs)}),deferred.promise},ApplicationViewService.prototype.editApplicationProperties=function(applicationId){DialogService.instance().showDialog("","app/view/apm/allApplications/EditAppPropertiesController","app/view/apm/allApplications/EditApplicationPropertiesDialog.html",{applicationId:applicationId})},ApplicationViewService.prototype.deleteApplication=function(applicationId,applicationName){var modalSettings={};modalSettings.controllerPath="app/view/apm/allApplications/DeleteApplicationController",modalSettings.templateUrl="app/view/apm/allApplications/DeleteApplicationDialog.html",modalSettings.data={applicationId:applicationId,applicationName:applicationName},DialogService.instance().openDialogAsync(modalSettings)},ApplicationViewService.prototype.exportApplication=function(applicationId,appName){var _this=this,successHandler=function(user){if(!user)return void _this.notificationService.displayError("Internal server error","Error while getting user");var canExport=RoleUtil.canUserExportApp(user);if(!canExport)return void _this.notificationService.displayError(_this.getString("ms_exportApplicationNoPermission"),_this.getString("ms_exportApplicationError"));var okHandler=function(){var exportEndpoint="ConfigObjectImportExportServlet?applicationId="+applicationId;$(document.body).append("<iframe src='"+exportEndpoint+"' style='display: none;' ></iframe>")},title=_this.getString("ms_exportApplication"),exportApplicationWithName=_this.getString("ms_exportApplicationWithApplicationName",[appName]),confirmMsg=_this.getString("ms_appExportWarning"),message=exportApplicationWithName+"<br /><br />"+confirmMsg,okBtnLabel=_this.getString("ms_export"),cancelBtnLabel=_this.getString("ms_cancel");_this.dialogService.showConfirmation(title,message,okHandler,null,okBtnLabel,cancelBtnLabel)},promise=this.userUiService.getCurrentUserObject();promise.then(successHandler)},ApplicationViewService.prototype.resetAgents=function(applicationId){this.flashService.showFlash(),this.flashService.resetAgents(applicationId)},ApplicationViewService.prototype.getAllApplicationsLocationBarEntryConfig=function(){var _this=this,config={};return config.clickFn=function(){_this.viewAllApplicationsDashboard()},config.label=this.getString("ms_applications"),config},ApplicationViewService.prototype.getApplicationLocationBarEntryConfig=function(application){return this.getApplicationLocationBarEntryConfigFromNameAndId(application.id,application.name)},ApplicationViewService.prototype.getApplicationLocationBarEntryConfigFromNameAndId=function(applicationId,applicationName){var _this=this,config={};return config.clickFn=function(){_this.viewApplicationDashboard(applicationId)},config.label=applicationName,config},ApplicationViewService.prototype.getAppConfigLocationBarEntryConfig=function(application){var _this=this,config={};return config.clickFn=function(){_this.viewAppConfigure(application.id)},config.label=this.resourceManager.getString("ui","ms_configureNavItem"),config},ApplicationViewService.prototype.getAppTroubleshootLocationBarEntryConfig=function(application){var _this=this,config={};return config.clickFn=function(){_this.viewAppTroubleshoot(application.id)},config.label=this.resourceManager.getString("ui","ms_troubleshootNavItem"),config},ApplicationViewService.prototype.getAppIncidentListLocationBarEntryConfig=function(){var config={};return config.clickFn=function(){alert("todo!")},config.label=this.resourceManager.getString("ui","ms_policyViolations"),config},ApplicationViewService.prototype.getServersLocationBarEntryConfig=function(applicationId){var _this=this,config={};return config.clickFn=function(){_this.viewAppServerHome(applicationId)},config.label=this.resourceManager.getString("ui","ms_servers"),config},ApplicationViewService.prototype.getAppServersLocationBarEntryConfig=function(applicationId){var _this=this,config={};return config.clickFn=function(){_this.viewAppInfrastructure(applicationId)},config.label=this.resourceManager.getString("ui","ms_navItemAppServers"),config},ApplicationViewService.prototype.getApmDatabasesNavItemLabel=function(){return this.getString(MasterService.instance().initData&&MasterService.instance().initData.mainNavConfig&&MasterService.instance().initData.mainNavConfig.showDatabaseMonitoring?"ms_navItemApmDatabases_withDbMon":"ms_navItemApmDatabases")},ApplicationViewService.prototype.isAppDashLocation=function(urlParams){var currentLocation=urlParams.location(),isAppDashLocation=-1!=[NavigationDataConstants.APP_DASHBOARD,NavigationDataConstants.APP_NETWORK_DASHBOARD,NavigationDataConstants.APP_EVENTSTREAM_LIST,NavigationDataConstants.APP_TOP_BT_LIST,NavigationDataConstants.APP_ALL_SNAPSHOT_LIST,NavigationDataConstants.APP_TX_SCORE,NavigationDataConstants.APP_MACHINE_SNAPSHOTS].indexOf(currentLocation);return isAppDashLocation},ApplicationViewService.prototype.viewCreateApplication=function(existingApplications,applicationType){this.viewCreateOrImportApplication(existingApplications,applicationType,!1)},ApplicationViewService.prototype.viewImportApplicationOld=function(existingApplications,applicationType){this.viewCreateOrImportApplication(existingApplications,applicationType,!0)},ApplicationViewService.prototype.viewCreateOrImportApplication=function(existingApplications,applicationType,importApp){var modalSettings={};modalSettings.controllerPath="app/view/apm/allApplications/CreateImportApplicationController",modalSettings.controllerName="CreateImportApplicationController",modalSettings.templateUrl=importApp?"app/view/apm/allApplications/ImportApplicationDialog.html":"app/view/apm/allApplications/CreateApplicationDialog.html",modalSettings.data={applications:existingApplications,applicationType:applicationType},DialogService.instance().openDialogAsync(modalSettings)},ApplicationViewService.prototype.show41AgentAccessKeyMessageIfNeeded=function(){var hasDismissedWelcomeModalIn41=UserService.instance().getGeneralUserPreferenceBooleanValue(UserService.DONT_SHOW_WELCOME_TO_UI),isSaas=MasterService.instance().isSaas(),accessKeyMessageDismissed=UserService.instance().getGeneralUserPreferenceBooleanValue(UserService.DONT_SHOW_AGENT_ACCESS_KEY_MESSAGE),isHtmlLocation=MasterService.instance().isHTMLEnabledLocation(URLParams.getCurrentUrlParams()),isModalShowing=DialogService.instance().htmlDialogsOpen();if(hasDismissedWelcomeModalIn41&&!isSaas&&!accessKeyMessageDismissed&&isHtmlLocation&&!HelpBubblePopoverController.isHelpBubblesShowingOrWaitingToShow()&&!isModalShowing){HelpBubblePopoverController.disableHelpBubbles=!0;var modal,scope={};scope.onClose=function(){modal.close(),HelpBubblePopoverController.disableHelpBubbles=!1,EventBusService.instance().dispatchEvent(EventConstants.UEV_RERUN_HELP_POPUPS,{})},scope.onViewDocs=function(){ExternalUrls.open(ExternalUrls.HELP_URL_AGENT_ACCESS_KEY_REQUIREMENT),scope.onClose()},scope.onDontShowAgainChange=function(selected){UserService.instance().setGeneralUserPreferenceBooleanValue(UserService.DONT_SHOW_AGENT_ACCESS_KEY_MESSAGE,selected)},ControllerBase.addGetStringToScope(scope),modal=DialogService.instance().showSimpleDialog("app/view/common/dialogs/41AgentAccessKeyDialog/41AgentAccessKeyDialog.html",scope)}},ApplicationViewService.prototype.viewIncidentListViewForBT=function(applicationId,btId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_INCIDENT_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.BUSINESS_TRANSACTION_ID,btId),this.navigationService.navigateTo(params.toString())},ApplicationViewService.prototype.viewIncidentListViewForComponent=function(applicationId,componentId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_INCIDENT_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.COMPONENT_ID,componentId),this.navigationService.navigateTo(params.toString())},ApplicationViewService.prototype.viewIncidentListViewForNode=function(applicationId,nodeId){var params=this.createUrlParamsWithCurrentTimeRange();
params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_INCIDENT_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.NODE_ID,nodeId),this.navigationService.navigateTo(params.toString())},ApplicationViewService.SERVICE_NAME="applicationViewService",ApplicationViewService.TAB_APP_DASHBOARD=0,ApplicationViewService.TAB_APP_TOP_BTS=1,ApplicationViewService.TAB_APP_SNAPSHOTS=2,ApplicationViewService.TAB_APP_ANALYSIS=3,ApplicationViewService.TAB_APP_MACHINE_SNAPSHOTS=4,ApplicationViewService.$inject=["$location","navigationService","notificationService","resourceManager","$dialog","dialogService","$rootScope","allApplicationsUiService","userUiService","flashService"],ApplicationViewService}(ViewServiceBase);adComponentsModule.service(ApplicationViewService.SERVICE_NAME,ApplicationViewService),define("app/view/apm/services/ApplicationViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BackendListViewService=function(_super){function BackendListViewService($location,navigationService,notificationService,resourceManager){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager}return __extends(BackendListViewService,_super),BackendListViewService.instance=function(){return AngularUtil.getADInjector().get(BackendListViewService.SERVICE_NAME)},BackendListViewService.prototype.viewDatabaseList=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_DATABASE_LIST,applicationId)},BackendListViewService.prototype.viewRemoteServiceList=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_BACKEND_LIST,applicationId)},BackendListViewService.prototype.viewDatabaseTierList=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_DATABASE_COMPONENT_LIST,applicationId)},BackendListViewService.prototype.viewBackendConfigure=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_CONFIGURATION),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.TAB_ID,BackendListViewService.BACKEND_CONFIG_TAB),this.navigationService.navigateTo(params.toString())},BackendListViewService.prototype.getDatabasesLocationBarEntryConfig=function(applicationId){var _this=this;return{label:ApplicationViewService.instance().getApmDatabasesNavItemLabel(),clickFn:function(){_this.viewDatabaseList(applicationId)}}},BackendListViewService.prototype.getRemoteServicesLocationBarEntryConfig=function(applicationId){var _this=this;return{label:this.getString("ms_navItemLabelNonDBBackends"),clickFn:function(){_this.viewRemoteServiceList(applicationId)}}},BackendListViewService.prototype.getDatabaseTiersLocationBarEntryConfig=function(applicationId){var _this=this;return{label:ApplicationViewService.instance().getApmDatabasesNavItemLabel(),clickFn:function(){_this.viewDatabaseTierList(applicationId)}}},BackendListViewService.SERVICE_NAME="backendListViewService",BackendListViewService.BACKEND_CONFIG_TAB=1,BackendListViewService.$inject=["$location","navigationService","notificationService","resourceManager"],BackendListViewService}(ViewServiceBase);appdynamicsModule.service(BackendListViewService.SERVICE_NAME,BackendListViewService),define("app/view/apm/services/BackendListViewService",function(){});var DashboardUtil=function(){function DashboardUtil(){}return DashboardUtil.isBTDash=function(){var url=URLParams.getCurrentUrlParams();return url.location().indexOf(DashboardUtil.BTDASH_TAB_LOCATION_PREFIX)>-1},DashboardUtil.isTierDash=function(){var url=URLParams.getCurrentUrlParams();return url.location().indexOf(DashboardUtil.COMPONENT_DASH_TAB_LOCATION_PREFIX)>-1},DashboardUtil.isNodeDash=function(){var url=URLParams.getCurrentUrlParams();return url.location().indexOf(DashboardUtil.NODE_DASH_TAB_LOCATION_PREFIX)>-1},DashboardUtil.createLocationBarEntriesForDashboard=function(selectedTabName){void 0===selectedTabName&&(selectedTabName="");var $q=AngularUtil.getADInjector().get("$q"),defer=$q.defer(),navigationData={},url=URLParams.getCurrentUrlParams();return ApplicationUiService.instance().getApplicationById(url.applicationId()).then(function(application){url.location().indexOf(DashboardUtil.BTDASH_TAB_LOCATION_PREFIX)>-1?BusinessTransactionUiService.instance().getBTDashboardViewData(url.businessTransactionId()).then(function(response){var bt=response.businessTransaction;navigationData.locationEntries=BusinessTransactionViewService.instance().getBusinessTransactionDashboardLocationBarEntryConfigs(application,bt),navigationData.navTabs=BusinessTransactionViewService.instance().getBTNavigationTabs(application.id,bt,selectedTabName),defer.resolve(navigationData)}):url.location().indexOf(DashboardUtil.COMPONENT_DASH_TAB_LOCATION_PREFIX)>-1?ComponentUiService.instance().getComponent(url.componentId()).then(function(component){navigationData.locationEntries=ComponentViewService.instance().getComponentDashboardLocationBarEntryConfigs(application,component),navigationData.navTabs=ComponentViewService.instance().getComponentNavigationTabs(application.id,component,selectedTabName),defer.resolve(navigationData)}):url.location().indexOf(DashboardUtil.NODE_DASH_TAB_LOCATION_PREFIX)>-1?DashboardTemplateUiService.instance().getDashboardNodeTemplateData(application.id,url.nodeId()).then(function(response){var component=response.applicationComponent,node=response.applicationComponentNode;navigationData.locationEntries=NodeViewService.instance().getNodeDashboardLocationBarEntryConfigs(application,component,node),NodeViewService.instance().getNodeNavigationTabs(application.id,component,node,selectedTabName).then(function(navigationTabs){navigationData.navTabs=navigationTabs,defer.resolve(navigationData)},function(err){defer.reject(err)})}):(navigationData.locationEntries=[ApplicationViewService.instance().getApplicationLocationBarEntryConfig(application)],ApplicationViewService.instance().getApplicationDashboardNavigationTabs(application.id).then(function(navigationTabs){navigationData.navTabs=navigationTabs,NavigationTabUtil.selectTabByName(navigationData.navTabs,selectedTabName),defer.resolve(navigationData)}))}),defer.promise},DashboardUtil.BTDASH_TAB_LOCATION_PREFIX="APP_BT",DashboardUtil.COMPONENT_DASH_TAB_LOCATION_PREFIX="APP_COMPONENT",DashboardUtil.NODE_DASH_TAB_LOCATION_PREFIX="APP_NODE",DashboardUtil.BTDASH_TAB_OVERVIEW=0,DashboardUtil.BTDASH_TAB_SNAPSHOTS=1,DashboardUtil.BTDASH_TAB_EVENTS=2,DashboardUtil.BTDASH_TAB_SLOW_RESPONSE_TIMES=3,DashboardUtil.BTDASH_TAB_ERRORS=4,DashboardUtil.BTDASH_TAB_HISTOGRAM=5,DashboardUtil.APP_DASH_TAB_OVERVIEW=0,DashboardUtil.APP_DASH_TAB_TOP_BTS=1,DashboardUtil.APP_DASH_TAB_SNAPSHOTS=2,DashboardUtil.APP_DASH_TAB_HISTOGRAM=3,DashboardUtil.APP_DASH_TAB_MACHINE_SNAPSHOTS=4,DashboardUtil.COMPONENT_DASH_TAB_OVERVIEW=0,DashboardUtil.COMPONENT_DASH_TAB_MY_DASH=1,DashboardUtil.COMPONENT_DASH_TAB_NODES=2,DashboardUtil.COMPONENT_DASH_TAB_EVENTS=3,DashboardUtil.COMPONENT_DASH_TAB_SLOW_RESPONSE_TIMES=4,DashboardUtil.COMPONENT_DASH_TAB_ERRORS=5,DashboardUtil.NODE_DASH_TAB_OVERVIEW=0,DashboardUtil.NODE_DASH_TAB_MACHINE=1,DashboardUtil.NODE_DASH_TAB_HARDWARE=1,DashboardUtil.NODE_DASH_TAB_MEMORY=2,DashboardUtil.NODE_DASH_TAB_DOT_NET_MEMORY=3,DashboardUtil.NODE_DASH_TAB_NODE_JS_MEMORY=4,DashboardUtil.NODE_DASH_TAB_JVM=5,DashboardUtil.NODE_DASH_TAB_JMX=6,DashboardUtil.NODE_DASH_TAB_SNAPSHOTS=7,DashboardUtil.NODE_DASH_TAB_ERRORS=8,DashboardUtil.NODE_DASH_TAB_EVENTS=9,DashboardUtil.NODE_DASH_TAB_AGENTS=10,DashboardUtil.NODE_DASH_TAB_SLOW_RESPONSE_TIMES=11,DashboardUtil.NODE_DASH_TAB_HISTOGRAM=12,DashboardUtil.NODE_DASH_TAB_PROCESS_SNAPSHOTS=13,DashboardUtil.BACKEND_DASH_TAB_OVERVIEW=0,DashboardUtil.BACKEND_DASH_TAB_SLOWEST_CALLS=1,DashboardUtil}();define("app/view/apm/mainDashboards/DashboardUtil",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ComponentViewService=function(_super){function ComponentViewService($location,navigationService,notificationService,resourceManager,serviceEndpointListViewService,dashboardTemplateViewService,componentUiService,flashService,$rootScope,eventViewService){var _this=this;_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.serviceEndpointListViewService=serviceEndpointListViewService,this.dashboardTemplateViewService=dashboardTemplateViewService,this.componentUiService=componentUiService,this.flashService=flashService,this.$rootScope=$rootScope,this.eventViewService=eventViewService,this.lastViewedTierDashTabLocation=null,EventBusService.instance().registerEventListener(NavigationService.UEV_NAV_ACTION,function(){_this.navigationService.isTierDashLocation(URLParams.getCurrentUrlParams())&&(_this.lastViewedTierDashTabLocation=URLParams.getCurrentUrlParams().location())},null)}return __extends(ComponentViewService,_super),ComponentViewService.instance=function(){return AngularUtil.getADInjector().get(ComponentViewService.SERVICE_NAME)},ComponentViewService.prototype.viewComponent=function(applicationId,componentId){var location=this.lastViewedTierDashTabLocation?this.lastViewedTierDashTabLocation:NavigationDataConstants.APP_COMPONENT_MANAGER;NetworkMonitoringViewService.instance().isLocationAppNetworkDashboard()&&(location=NavigationDataConstants.APP_NETWORK_COMPONENT_DASHBOARD),this.viewComponentLocation(location,applicationId,componentId)},ComponentViewService.prototype.viewComponentDashboard=function(applicationId,componentId){ADLoggerService.log("ComponentViewService.viewComponentDashboard Debug: Enter with componentId "+componentId),this.viewComponentLocation(NavigationDataConstants.APP_COMPONENT_MANAGER,applicationId,componentId)},ComponentViewService.prototype.viewComponentLocation=function(location,applicationId,componentId){ADLoggerService.log("ComponentViewService.viewComponentDashboard Debug: Enter with componentId "+componentId);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,location),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.COMPONENT_ID,componentId),this.navigationService.navigateTo(params.toString())},ComponentViewService.prototype.viewComponentSnapshotsAnalysis=function(){this.flashService.viewSnapshotsAnalysisForComponentFromHTML()},ComponentViewService.prototype.viewComponentSnapshotsList=function(requestUserExperience,appId,componentId){this.flashService.isHTMLEnabledLocation(NavigationDataConstants.APP_COMPONENT_ALL_SNAPSHOT_LIST)?SnapshotViewService.instance().viewSnapshotsListForEntity(appId,EntityType.APPLICATION_COMPONENT,componentId,requestUserExperience):this.flashService.viewSnapshotsListForEntity(requestUserExperience,EntityType.APPLICATION_COMPONENT)},ComponentViewService.prototype.viewComponentProcessSnapshotsList=function(requestUserExperience,appId,componentId){this.flashService.isHTMLEnabledLocation(NavigationDataConstants.APP_COMPONENT_PROCESS_SNAPSHOTS)?SnapshotViewService.instance().viewSnapshotsListForEntity(appId,EntityType.APPLICATION_COMPONENT,componentId,requestUserExperience):this.flashService.viewSnapshotsListForEntity(requestUserExperience,EntityType.APPLICATION_COMPONENT)},ComponentViewService.prototype.viewComponentExceptions=function(){this.flashService.viewExceptionsForComponentFromHTML()},ComponentViewService.prototype.viewComponentServiceEndpoints=function(applicationId,componentId){ADLoggerService.log("ComponentViewService.viewComponentServiceEndpoints Debug: Enter with componentId "+componentId);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_SERVICE_ENDPOINT_LIST),-1!=applicationId&&params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),-1!=componentId&&params.setNumberParam(UrlConstants.COMPONENT_ID,componentId),this.navigationService.navigateTo(params.toString())},ComponentViewService.prototype.getComponentNavigationTabs=function(applicationId,component,selected,locationEntries){var _this=this;void 0===locationEntries&&(locationEntries=null);var componentId=component.id,tabs=(component.componentType.name,component.numberOfApplicationComponentNodes,ComponentViewService.Tabs),showNpm=NetworkMonitoringViewService.instance().isNetworkMonitoringEnabled(),componentTabs=[];if(componentTabs.push(NavigationTabUtil.create(tabs.DASHBOARD,function(){_this.viewComponentDashboard(applicationId,componentId)})),componentTabs.push(NavigationTabUtil.create(tabs.CUSTOM_DASHBOARDS,function(){_this.dashboardTemplateViewService.viewDashboardTemplateTier(applicationId,componentId)})),showNpm&&componentTabs.push(NavigationTabUtil.create(tabs.NETWORK_DASHBOARD,function(){_this.viewComponentLocation(NavigationDataConstants.APP_NETWORK_COMPONENT_DASHBOARD,applicationId,componentId)})),componentTabs.push(NavigationTabUtil.create(tabs.NODES,function(){AppInfraListViewService.instance().viewAppComponentInfrastructureList(applicationId,componentId)})),ServerMonitoringViewService.instance().isSIMEnabled()&&componentTabs.push(NavigationTabUtil.create(tabs.SERVERS,function(){ServerMonitoringViewService.instance().viewAppComponentMachinesList(applicationId,componentId)})),componentTabs.push(NavigationTabUtil.create(tabs.EVENTS,function(){_this.eventViewService.viewEventDashboard(applicationId,EntityType.APPLICATION_COMPONENT,componentId,null)})),componentTabs.push(NavigationTabUtil.create(tabs.SLOW_RESPONSE_TIMES,function(){_this.viewComponentLocation(NavigationDataConstants.APP_COMPONENT_SLOW_RESPONSE_TIMES,applicationId,componentId)})),componentTabs.push(NavigationTabUtil.create(tabs.ERRORS,function(){_this.viewComponentLocation(NavigationDataConstants.APP_COMPONENT_ERRORS,applicationId,componentId)})),componentTabs.push(NavigationTabUtil.create(tabs.TRANSACTION_SNAPSHOTS,function(){_this.viewComponentLocation(NavigationDataConstants.APP_COMPONENT_ALL_SNAPSHOT_LIST,applicationId,componentId)})),APMUtil.isNodeJsTier(component)&&componentTabs.push(NavigationTabUtil.create(this.getString("ms_processSnapshots"),function(){_this.viewComponentLocation(NavigationDataConstants.APP_COMPONENT_PROCESS_SNAPSHOTS,applicationId,componentId)})),componentTabs.push(NavigationTabUtil.create(this.getString("ms_histogramTabLabelOnDashboards"),function(){_this.viewComponentLocation(NavigationDataConstants.APP_COMPONENT_TX_SCORE,applicationId,componentId)})),APMUtil.isDotNetTier(component)&&componentTabs.push(NavigationTabUtil.create("IIS App Pools",function(){_this.viewComponentLocation(NavigationDataConstants.APP_COMPONENT_IIS_APP_POOLS,applicationId,componentId)})),componentTabs.push(NavigationTabUtil.create(tabs.SERVICE_ENDPOINTS,function(){_this.viewComponentLocation(NavigationDataConstants.APP_SERVICE_ENDPOINT_LIST,applicationId,componentId)})),selected==ComponentViewService.Tabs.NODES)componentTabs[2].selected=!0;else for(var i=0,size=componentTabs.length;size>i;i++)if(componentTabs[i].name===selected){componentTabs[i].selected=!0;break}return componentTabs},ComponentViewService.prototype.validateTierDashboardTabForURL=function(urlParams,component){if(Util.isUndefOrNull(urlParams)||Util.isUndefOrNull(component))return!0;var tabValid=!0;switch(urlParams.location()){case NavigationDataConstants.APP_COMPONENT_PROCESS_SNAPSHOTS:tabValid=APMUtil.isNodeJsTier(component);break;case NavigationDataConstants.APP_COMPONENT_IIS_APP_POOLS:tabValid=APMUtil.isDotNetTier(component)}return tabValid},ComponentViewService.prototype.getComponentDashboardLocationBarEntryConfigs=function(application,component){var locationEntries=[];locationEntries.push(ApplicationViewService.instance().getApplicationLocationBarEntryConfigFromNameAndId(application.id,application.name));var isDbTier=APMUtil.isDBTier(component);return locationEntries.push(isDbTier?BackendListViewService.instance().getDatabaseTiersLocationBarEntryConfig(application.id):ApplicationViewService.instance().getAppServersLocationBarEntryConfig(application.id)),locationEntries.push(this.getComponentDashLocationBarEntryConfig(component)),locationEntries},ComponentViewService.prototype.getComponentDashLocationBarEntryConfig=function(component){return{label:component.name,clickFn:function(){ComponentViewService.instance().viewComponentDashboard(component.applicationId,component.id)}}},ComponentViewService.prototype.deleteComponent=function(componentId,applicationId,componentName){var _this=this;this.componentUiService.deleteComponent(componentId).then(function(){var appEvent={};appEvent.applicationId=applicationId,appEvent.applicationComponentId=componentId,_this.$rootScope.$broadcast("UEV_COMPONENT_DELETED",appEvent)}),this.notificationService.displayMessage(componentName,"Deleting Application Component")},ComponentViewService.SERVICE_NAME="componentViewService",ComponentViewService.Tabs={DASHBOARD:"Dashboard",NETWORK_DASHBOARD:"Network Dashboard",NODES:"Nodes",SERVERS:"Servers",SERVICE_ENDPOINTS:"Service Endpoints",CUSTOM_DASHBOARDS:"My Dashboards",EVENTS:"Events",SLOW_RESPONSE_TIMES:"Slow Response Times",ERRORS:"Errors",TRANSACTION_SNAPSHOTS:"Transaction Snapshots"},ComponentViewService.$inject=["$location","navigationService","notificationService","resourceManager","serviceEndpointListViewService","dashboardTemplateViewService","componentUiService","flashService","$rootScope","eventViewService"],ComponentViewService}(ViewServiceBase);appdynamicsModule.service(ComponentViewService.SERVICE_NAME,ComponentViewService),define("app/view/apm/services/ComponentViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AppInfraListViewService=function(_super){function AppInfraListViewService($location,navigationService,notificationService,resourceManager){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager}return __extends(AppInfraListViewService,_super),AppInfraListViewService.instance=function(){return AngularUtil.getADInjector().get(AppInfraListViewService.SERVICE_NAME)},AppInfraListViewService.prototype.viewAppInfrastructureList=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_INFRASTRUCTURE),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},AppInfraListViewService.prototype.viewAppComponentInfrastructureList=function(applicationId,componentId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_COMPONENT_INFRASTRUCTURE),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.COMPONENT_ID,componentId),this.navigationService.navigateTo(params.toString())},AppInfraListViewService.prototype.viewDashboardForInfraListEntry=function(item,applicationId){AppInfraListViewService.isComponent(item)?this.gotoComponentDash(applicationId,item.componentId):AppInfraListViewService.isNode(item)&&this.gotoNodeDash(applicationId,item.nodeId)},AppInfraListViewService.prototype.viewAnalyzeResponseTimeVsLoadPage=function(item,applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_RESPONSE_TIME_VS_LOAD),Util.isValidId(applicationId)&&params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),AppInfraListViewService.isComponent(item)?params.setNumberParam(UrlConstants.COMPONENT_ID,item.componentId):AppInfraListViewService.isNode(item)&&params.setNumberParam(UrlConstants.NODE_ID,item.nodeId),this.navigationService.navigateTo(params.toString())},AppInfraListViewService.prototype.viewAnalyzeCpuVsLoadPage=function(item,applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_CPU_VS_LOAD),Util.isValidId(applicationId)&&params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),AppInfraListViewService.isComponent(item)?params.setNumberParam(UrlConstants.COMPONENT_ID,item.componentId):AppInfraListViewService.isNode(item)&&params.setNumberParam(UrlConstants.NODE_ID,item.nodeId),this.navigationService.navigateTo(params.toString())},AppInfraListViewService.prototype.viewIncidentsList=function(item,applicationId){AppInfraListViewService.isComponent(item)?ApplicationViewService.instance().viewIncidentListViewForComponent(applicationId,item.componentId):AppInfraListViewService.isNode(item)&&ApplicationViewService.instance().viewIncidentListViewForNode(applicationId,item.nodeId)},AppInfraListViewService.prototype.gotoComponentDash=function(appId,componentId){ComponentViewService.instance().viewComponent(appId,componentId)},AppInfraListViewService.prototype.gotoNodeDash=function(appId,nodeId){NodeViewService.instance().viewNode(appId,nodeId)},AppInfraListViewService.isComponent=function(entry){return entry.entityType==EntityType.APPLICATION_COMPONENT},AppInfraListViewService.isNode=function(entry){return entry.entityType==EntityType.APPLICATION_COMPONENT_NODE},AppInfraListViewService.SERVICE_NAME="appInfraListViewService",AppInfraListViewService.$inject=["$location","navigationService","notificationService","resourceManager"],AppInfraListViewService}(ViewServiceBase);appdynamicsModule.service("appInfraListViewService",AppInfraListViewService),define("app/view/apm/services/AppInfraListViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/apm/businessTransactions/btList/SetAsBackgroundTaskController",["require","exports"],function(){var SetAsBackgroundTaskController=function(_super){function SetAsBackgroundTaskController($scope,$location,$rootScope,$modalInstance,dialogData,businessTransactionUIService){var _this=this;_super.call(this,$scope),this.$scope=$scope,this.$location=$location,this.$rootScope=$rootScope,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.businessTransactionUIService=businessTransactionUIService,this.onSetAsBackgroundTask=function(){for(var resultHandler=function(){_this.$modalInstance.close()},btIds=new Array,i=0;i<_this.selectedBTItems.length;i++)btIds.push(_this.selectedBTItems[i].id);_this.businessTransactionUIService.markBusinessTransactionsAsBackground(btIds,_this.isBackgroundTask).then(resultHandler)},this.typeIconRenderer=function(val,meta,record){return"<img src='"+ImageUtil.getIconForBusinessTransactionType(record.raw)+"'/>"},this.backgroundTypeRenderer=function(val,meta,record){var bto=record.raw;return _this.getString(bto.background?"ms_BackgroundTask":"ms_UserTransaction")},$scope.controller=this,this.init()}return __extends(SetAsBackgroundTaskController,_super),SetAsBackgroundTaskController.prototype.init=function(){this.selectedBTItems=this.dialogData.data,this.isBackgroundTask=!this.dialogData.background,this.titleText=this.getString("ms_setAsBackgroundOrForgroundTask"),this.infoText=this.getString("ms_selectedBusinessTransactions");var columns=[new GridColumn({dataIndex:"type",dataIndexMapping:"type",width:28,header:"",sortable:!0,resizable:!1,hidden:!1,type:"string",renderer:this.typeIconRenderer}),new GridColumn({flex:2,align:"left",dataIndex:"name",dataIndexMapping:"name",mapping:"name",hidden:!1,sortable:!0,header:this.getString("ms_name")}),new GridColumn({flex:1,align:"left",dataIndex:"applicationComponentName",dataIndexMapping:"applicationComponentName",mapping:"applicationComponentName",hidden:!1,sortable:!0,header:this.getString("ms_tier")}),new GridColumn({flex:1,align:"left",dataIndex:"type",dataIndexMapping:"type",hidden:!1,sortable:!0,header:this.getString("ms_type"),renderer:this.backgroundTypeRenderer})],options=new GridOptions;options.columnProvider=columns,this.gridOptions=options,this.gridOptions.dataProvider=this.selectedBTItems,this.gridOptions.multiSelect=!1},SetAsBackgroundTaskController.$inject=["$scope","$location","$rootScope","$modalInstance","dialogData","businessTransactionUiService"],SetAsBackgroundTaskController}(ControllerBase);return SetAsBackgroundTaskController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/apm/businessTransactions/btList/BTRenameController",["require","exports"],function(){var BTRenameController=function(_super){function BTRenameController($scope,$location,$rootScope,$modalInstance,dialogData,businessTransactionUiService){_super.call(this,$scope),this.$scope=$scope,this.$location=$location,this.$rootScope=$rootScope,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.businessTransactionUiService=businessTransactionUiService,$scope.controller=this,this.init()}return __extends(BTRenameController,_super),BTRenameController.prototype.init=function(){this.selectedBTItems=this.dialogData,this.titleText=this.getString("ms_rename")+" - "+this.selectedBTItems[0].name,this.currentNameText=this.getString("ms_currentName"),this.newNameText=this.getString("ms_newName"),this.renameButtonText=this.getString("ms_rename"),this.currentName=this.selectedBTItems[0].name,this.newName=this.selectedBTItems[0].name},BTRenameController.prototype.onRenameBT=function(){var _this=this,resultHandler=function(){_this.selectedBTItems[0].name=_this.newName,_this.$modalInstance.close(_this.selectedBTItems[0])};this.newName!==this.currentName?this.businessTransactionUiService.renameBT(this.newName,this.selectedBTItems[0].id).then(resultHandler):this.$modalInstance.dismiss()},BTRenameController.$inject=["$scope","$location","$rootScope","$modalInstance","dialogData","businessTransactionUiService"],BTRenameController}(ControllerBase);return BTRenameController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BusinessTransactionViewService=function(_super){function BusinessTransactionViewService($location,navigationService,notificationService,resourceManager,businessTransactionUiService,$dialog,dialogService,eventViewService,flashService){var _this=this;_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.businessTransactionUiService=businessTransactionUiService,this.$dialog=$dialog,this.dialogService=dialogService,this.eventViewService=eventViewService,this.flashService=flashService,EventBusService.instance().registerEventListener(NavigationService.UEV_NAV_ACTION,function(){_this.navigationService.isBtDashLocation(URLParams.getCurrentUrlParams())&&(_this.lastViewedBtDashTabLocation=URLParams.getCurrentUrlParams().location())},null)}return __extends(BusinessTransactionViewService,_super),BusinessTransactionViewService.instance=function(){return AngularUtil.getADInjector().get(BusinessTransactionViewService.SERVICE_NAME)},BusinessTransactionViewService.prototype.viewBusinessTransaction=function(applicationId,businessTransactionId){var location=this.lastViewedBtDashTabLocation?this.lastViewedBtDashTabLocation:NavigationDataConstants.APP_BT_DETAIL;this.viewBusinessTransactionLocation(location,applicationId,businessTransactionId)},BusinessTransactionViewService.prototype.viewBusinessTransactionLocation=function(location,applicationId,businessTransactionId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,location),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.BUSINESS_TRANSACTION_ID,businessTransactionId),this.navigationService.navigateTo(params.toString())},BusinessTransactionViewService.prototype.viewBusinessTransactionList=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_BT_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},BusinessTransactionViewService.prototype.viewBusinessTransactionSnapshotList=function(applicationId,btId,requestUserExperience){SnapshotViewService.instance().viewSnapshotsListForEntity(applicationId,EntityType.BUSINESS_TRANSACTION,btId,requestUserExperience)},BusinessTransactionViewService.prototype.viewAnalyzeResponseTimeVsLoad=function(applicationId,businessTransactionId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_RESPONSE_TIME_VS_LOAD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.BUSINESS_TRANSACTION_ID,businessTransactionId),this.navigationService.navigateTo(params.toString())},BusinessTransactionViewService.prototype.viewBTDetails=function(applicationId,businessTransactionId,tab,timeRange){void 0===tab&&(tab=0),void 0===timeRange&&(timeRange=null);var params=this.createUrlParamsWithCurrentTimeRange();return timeRange&&params.setParam(UrlConstants.TIME_RANGE,timeRange),tab==DashboardUtil.BTDASH_TAB_EVENTS&&this.flashService.isHTMLEnabledLocation(NavigationDataConstants.APP_BT_EVENTSTREAM_LIST)?void this.eventViewService.viewEventDashboard(applicationId,EntityType.BUSINESS_TRANSACTION,businessTransactionId,null):tab==DashboardUtil.BTDASH_TAB_SNAPSHOTS&&this.flashService.isHTMLEnabledLocation(NavigationDataConstants.APP_BT_ALL_SNAPSHOT_LIST)?void SnapshotViewService.instance().viewSnapshotsListForEntity(applicationId,EntityType.BUSINESS_TRANSACTION,businessTransactionId):(params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_BT_DETAIL),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.BUSINESS_TRANSACTION_ID,businessTransactionId),tab>=0&&params.setNumberParam(UrlConstants.TAB_ID,tab),void this.navigationService.navigateTo(params.toString()))},BusinessTransactionViewService.prototype.getBusinessTransactionsLocationBarEntryConfig=function(applicationId){var _this=this,config={};return config.clickFn=function(){_this.viewBusinessTransactionList(applicationId)},config.label=this.resourceManager.getString("ui","ms_businessTransactions"),config},BusinessTransactionViewService.prototype.getBusinessTransactionLocationBarEntryConfig=function(businessTransaction){var _this=this,config={};return config.clickFn=function(){_this.viewBusinessTransaction(businessTransaction.applicationId,businessTransaction.id)},config.label=businessTransaction.name,config},BusinessTransactionViewService.prototype.viewDeleteBusinessTransaction=function(businessTransaction,postSubmitHandler,postCancelHandler){var _this=this;void 0===postSubmitHandler&&(postSubmitHandler=null),void 0===postCancelHandler&&(postCancelHandler=null);var submitHandler=function(){var onDeleted=function(){null!=postSubmitHandler&&postSubmitHandler()};_this.deleteBusinessTransaction(businessTransaction).then(onDeleted)},cancelHandler=function(){null!=postCancelHandler&&postCancelHandler()
};this.dialogService.showConfirmation("Delete Business Transaction","Are you sure you want to delete this business transaction ("+businessTransaction.name+")?",submitHandler,cancelHandler,"Delete Transaction","Cancel",!0)},BusinessTransactionViewService.prototype.deleteBusinessTransaction=function(businessTransaction){var _this=this;if(null!=businessTransaction){var resultHandler=function(){_this.notificationService.displayDeletedSuccessfullyMessage()},promise=this.businessTransactionUiService.deleteBTs([businessTransaction.id]);return promise.then(resultHandler),promise}},BusinessTransactionViewService.prototype.viewExcludeBusinessTransaction=function(businessTransaction,postSubmitHandler,postCancelHandler){var _this=this;void 0===postSubmitHandler&&(postSubmitHandler=null),void 0===postCancelHandler&&(postCancelHandler=null);var submitHandler=function(){var onDeleted=function(){null!=postSubmitHandler&&postSubmitHandler()};_this.excludeBusinessTransaction(businessTransaction).then(onDeleted)},cancelHandler=function(){null!=postCancelHandler&&postCancelHandler()};this.dialogService.showConfirmation("Exclude Business Transaction","Are you sure you want to exclude this business transaction ("+businessTransaction.name+")?",submitHandler,cancelHandler,"Exclude Transaction","Cancel",!0)},BusinessTransactionViewService.prototype.excludeBusinessTransaction=function(businessTransaction){var _this=this;if(null!=businessTransaction){var resultHandler=function(){_this.notificationService.displayMessage("Transaction was successfully excluded.","")},promise=this.businessTransactionUiService.excludeBTs([businessTransaction.id]);return promise.then(resultHandler),promise}},BusinessTransactionViewService.prototype.viewSetTransactionAsBackgroundTask=function(businessTransaction){var _this=this,onSubmitCallback=function(){_this.notificationService.displayUpdatedSuccessfullyMessage()};require(["app/view/apm/businessTransactions/btList/SetAsBackgroundTaskController"],function(){var opts={backdrop:!0,keyboard:!0,controller:"SetAsBackgroundTaskController",templateUrl:"app/view/apm/businessTransactions/btList/SetAsBackgroundTask.html",dialogClass:"modal",data:[businessTransaction],callBackFn:onSubmitCallback},dlg=_this.$dialog.dialog(opts);dlg.open()})},BusinessTransactionViewService.prototype.viewRenameBusinessTransaction=function(businessTransaction,postSubmitCallback){var _this=this;void 0===postSubmitCallback&&(postSubmitCallback=null),require(["app/view/apm/businessTransactions/btList/BTRenameController"],function(controllerModule){var modalConfig={controller:controllerModule,templateUrl:"app/view/apm/businessTransactions/btList/BTRename.html",data:[businessTransaction]},modal=DialogService.instance().openDialog(modalConfig);modal.result.then(function(result){_this.notificationService.displayMessage(_this.getString("ms_btRenameSuccessfulMessage"),""),null!=postSubmitCallback&&postSubmitCallback(result.name)})})},BusinessTransactionViewService.prototype.viewStartDiagnosticSessionOnBusinessTransactions=function(applicationId,businessTransactionIds){var _this=this;if(null!=businessTransactionIds&&0!=businessTransactionIds.length){var resultHandler=function(response){for(var selectedBTDataItems=_this.businessTransactionUiService.getBTObjects_response(response),selectedBTDataItemsWithoutSession=[],numberOfRemovedItems=0,iBT=0;iBT<selectedBTDataItems.length;iBT++){var oBTItem=selectedBTDataItems[iBT];oBTItem.configuration.snapshotCollectionPolicy.collectingOnDemandSnapshots||selectedBTDataItemsWithoutSession.push(oBTItem)}selectedBTDataItems=selectedBTDataItemsWithoutSession;var numberOfRemovedItems=businessTransactionIds.length-selectedBTDataItems.length,onOK=function(){_this.dialogService.showDialog("","app/view/apm/businessTransactions/btList/BTDiagnosticSessionController","app/view/apm/businessTransactions/btList/BTDiagnosticSession.html",selectedBTDataItems).then(function(modal){modal.result.then(function(){})})};numberOfRemovedItems>0?numberOfRemovedItems===businessTransactionIds.length?businessTransactionIds.length>1?_this.dialogService.showConfirmation(_this.resourceManager.getString("ui","ms_diagnosticSession"),_this.resourceManager.getString("ui","ms_allSelectedBTsSnapshotting"),null,null,"Close","",!1):_this.dialogService.showConfirmation(_this.resourceManager.getString("ui","ms_diagnosticSession"),_this.resourceManager.getString("ui","ms_selectedBTSnapshotting"),null,null,"Close","",!1):_this.dialogService.showConfirmation(_this.resourceManager.getString("ui","ms_diagnosticSession"),_this.resourceManager.getString("ui","ms_fewSelectedBTsSnapshotting",[numberOfRemovedItems.toString(),businessTransactionIds.length.toString()]),onOK,null):onOK()},selectedBTDataPromise=this.businessTransactionUiService.getBTObjects(businessTransactionIds);selectedBTDataPromise.then(resultHandler)}},BusinessTransactionViewService.prototype.getBTNavigationTabs=function(applicationId,businessTransaction,selected,locationEntries){var _this=this;void 0===locationEntries&&(locationEntries=null);var btId=businessTransaction.id,tabs=BusinessTransactionViewService.Tabs,btTabs=[];btTabs.push(NavigationTabUtil.create(tabs.DASHBOARD,function(){_this.viewBusinessTransactionLocation(NavigationDataConstants.APP_BT_DETAIL,applicationId,btId)})),btTabs.push(NavigationTabUtil.create(tabs.EVENTS,function(){_this.eventViewService.viewEventDashboard(applicationId,EntityType.BUSINESS_TRANSACTION,btId,null)})),btTabs.push(NavigationTabUtil.create(tabs.SLOW_RESPONSE_TIMES,function(){_this.viewBusinessTransactionLocation(NavigationDataConstants.APP_BT_SLOW_RESONSE_TIMES,applicationId,btId)})),btTabs.push(NavigationTabUtil.create(tabs.ERRORS,function(){_this.viewBusinessTransactionLocation(NavigationDataConstants.APP_BT_ERRORS,applicationId,btId)})),btTabs.push(NavigationTabUtil.create(tabs.TRANSACTION_SNAPSHOTS,function(){_this.viewBusinessTransactionLocation(NavigationDataConstants.APP_BT_ALL_SNAPSHOT_LIST,applicationId,btId)})),btTabs.push(NavigationTabUtil.create(tabs.TRANSACTION_ANALYSIS,function(){_this.viewBusinessTransactionLocation(NavigationDataConstants.APP_BT_TX_SCORE,applicationId,btId)}));for(var i=0,size=btTabs.length;size>i;i++)if(btTabs[i].name===selected){btTabs[i].selected=!0;break}return btTabs},BusinessTransactionViewService.prototype.getBusinessTransactionDashboardLocationBarEntryConfigs=function(application,bt){var locationEntries=[{label:application.name,clickFn:function(){ApplicationViewService.instance().viewApplicationDashboard(application.id)}}];return locationEntries.push(BusinessTransactionViewService.instance().getBusinessTransactionsLocationBarEntryConfig(application.id)),locationEntries.push(BusinessTransactionViewService.instance().getBusinessTransactionLocationBarEntryConfig(bt)),locationEntries},BusinessTransactionViewService.SERVICE_NAME="businessTransactionViewService",BusinessTransactionViewService.Tabs={DASHBOARD:"Dashboard",EVENTS:"Events",SLOW_RESPONSE_TIMES:"Slow Response Times",ERRORS:"Errors",TRANSACTION_SNAPSHOTS:"Transaction Snapshots",TRANSACTION_ANALYSIS:"Transaction Score"},BusinessTransactionViewService.$inject=["$location","navigationService","notificationService","resourceManager","businessTransactionUiService","$dialog","dialogService","eventViewService","flashService"],BusinessTransactionViewService}(ViewServiceBase);appdynamicsModule.service("businessTransactionViewService",BusinessTransactionViewService),define("app/view/apm/services/BusinessTransactionViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},NodeViewService=function(_super){function NodeViewService($location,navigationService,notificationService,resourceManager,dashboardTemplateViewService,eventViewService,nodeUiService,$rootScope,flashService){var _this=this;_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.dashboardTemplateViewService=dashboardTemplateViewService,this.eventViewService=eventViewService,this.nodeUiService=nodeUiService,this.$rootScope=$rootScope,this.flashService=flashService,this.lastViewedNodeDashTabLocation=null,EventBusService.instance().registerEventListener(NavigationService.UEV_NAV_ACTION,function(){_this.navigationService.isNodeDashLocation(URLParams.getCurrentUrlParams())&&(_this.lastViewedNodeDashTabLocation=URLParams.getCurrentUrlParams().location())},null)}return __extends(NodeViewService,_super),NodeViewService.instance=function(){return AngularUtil.getADInjector().get(NodeViewService.SERVICE_NAME)},NodeViewService.prototype.viewNode=function(applicationId,nodeId){var location=this.lastViewedNodeDashTabLocation?this.lastViewedNodeDashTabLocation:NavigationDataConstants.APP_NODE_MANAGER;this.viewNodeLocation(location,applicationId,nodeId)},NodeViewService.prototype.viewNodeDashboard=function(applicationId,nodeId){this.viewNodeLocation(NavigationDataConstants.APP_NODE_MANAGER,applicationId,nodeId)},NodeViewService.prototype.viewNodeLocation=function(location,applicationId,nodeId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,location),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.NODE_ID,nodeId),this.navigationService.navigateTo(params.toString())},NodeViewService.prototype.viewNodeSimLocation=function(location,applicationId,nodeId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,location),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.NODE_ID,nodeId),this.navigationService.navigateTo(params.toString())},NodeViewService.prototype.viewNodeExceptions=function(){this.flashService.viewExceptionsForNodeFromHTML()},NodeViewService.prototype.viewNodeSnapshotsAnalysis=function(){this.flashService.viewSnapshotsAnalysisForNodeFromHTML()},NodeViewService.prototype.viewNodeSnapshotsList=function(requestUserExperience,appId,nodeId){void 0===appId&&(appId=-1),void 0===nodeId&&(nodeId=-1),this.flashService.isHTMLEnabledLocation(NavigationDataConstants.APP_NODE_ALL_SNAPSHOT_LIST)?SnapshotViewService.instance().viewSnapshotsListForEntity(appId,EntityType.APPLICATION_COMPONENT_NODE,nodeId,requestUserExperience):this.flashService.viewSnapshotsListForEntity(requestUserExperience,EntityType.APPLICATION_COMPONENT_NODE)},NodeViewService.prototype.getNodeDashboardLocationBarEntryConfigs=function(application,component,node){var locationEntries=ComponentViewService.instance().getComponentDashboardLocationBarEntryConfigs(application,component);return locationEntries.push({label:node.name}),locationEntries},NodeViewService.prototype.getNodeNavigationTabs=function(applicationId,component,node,selected,locationEntries){void 0===locationEntries&&(locationEntries=null);var deferred=InjectorService.instance().$q().defer(),tabs=this.buildNodeNavigationTabs(applicationId,component,node,selected);return deferred.resolve(tabs),deferred.promise},NodeViewService.prototype.validateNodeDashboardTabForURL=function(urlParams,node){var _this=this,tabValid=!0,$q=AngularUtil.getADInjector().get("$q"),deferred=$q.defer();return(Util.isUndefOrNull(urlParams)||Util.isUndefOrNull(node))&&deferred.resolve(!0),ComponentUiService.instance().getComponent(node.componentId).then(function(component){if(component&&component.componentType){var componentType=component.componentType.name;switch(urlParams.location()){case NavigationDataConstants.APP_NETWORK_NODE_DASH:tabValid=NetworkMonitoringViewService.instance().isNetworkMonitoringEnabled();break;case NavigationDataConstants.APP_NODE_MEMORY:tabValid=_this.showJavaMemoryTab(componentType);break;case NavigationDataConstants.APP_NODE_MEMORY_DOTNET:tabValid=_this.showDotNetMemoryTab(componentType)&&node.appAgentPresent;break;case NavigationDataConstants.APP_NODE_MEMORY_NODEJS:tabValid=_this.showNodeJSMemoryTab(componentType)&&node.appAgentPresent;break;case NavigationDataConstants.APP_NODE_JVM:tabValid=_this.showJVMTab(componentType);break;case NavigationDataConstants.APP_NODE_CLR:tabValid=_this.showCLRTab(componentType);break;case NavigationDataConstants.APP_NODE_JMX:tabValid=_this.showJMXTab(componentType);break;case NavigationDataConstants.APP_NODE_PROCESS_SNAPSHOTS:tabValid=_this.showProcessSnapshotsTab(componentType)}}deferred.resolve(tabValid)},function(){deferred.resolve(!0)}),deferred.promise},NodeViewService.prototype.buildNodeNavigationTabs=function(applicationId,component,node,selected){var _this=this,nodeId=node.id,componentType=component.componentType.name,tabs=NodeViewService.Tabs,nodeTabs=[];nodeTabs.push(NavigationTabUtil.create(tabs.DASHBOARD,function(){_this.viewNodeDashboard(applicationId,nodeId)})),nodeTabs.push(NavigationTabUtil.create(tabs.CUSTOM_DASHBOARDS,function(){_this.dashboardTemplateViewService.viewDashboardTemplateNode(applicationId,nodeId)})),NetworkMonitoringViewService.instance().isNetworkMonitoringEnabled()&&nodeTabs.push(NavigationTabUtil.create(tabs.NETWORK_DASHBOARD,function(){NetworkMonitoringViewService.instance().viewNpmNodeDashboard(applicationId,nodeId)})),nodeTabs.push(NavigationTabUtil.create(this.getString("ms_navItemSimMachine"),function(){_this.viewNodeSimLocation(NavigationDataConstants.APP_NODE_MACHINE_OVERVIEW,applicationId,nodeId)})),this.showJavaMemoryTab(componentType)&&nodeTabs.push(NavigationTabUtil.create(tabs.MEMORY,function(){_this.viewNodeLocation(NavigationDataConstants.APP_NODE_MEMORY,applicationId,nodeId)})),this.showDotNetMemoryTab(componentType)&&node.appAgentPresent&&nodeTabs.push(NavigationTabUtil.create(tabs.MEMORY,function(){_this.viewNodeLocation(NavigationDataConstants.APP_NODE_MEMORY_DOTNET,applicationId,nodeId)})),this.showNodeJSMemoryTab(componentType)&&node.appAgentPresent&&nodeTabs.push(NavigationTabUtil.create(tabs.MEMORY,function(){_this.viewNodeLocation(NavigationDataConstants.APP_NODE_MEMORY_NODEJS,applicationId,nodeId)})),this.showJVMTab(componentType)&&nodeTabs.push(NavigationTabUtil.create(tabs.JVM,function(){_this.viewNodeLocation(NavigationDataConstants.APP_NODE_JVM,applicationId,nodeId)})),this.showCLRTab(componentType)&&nodeTabs.push(NavigationTabUtil.create(tabs.CLR,function(){_this.viewNodeLocation(NavigationDataConstants.APP_NODE_CLR,applicationId,nodeId)})),this.showJMXTab(componentType)&&nodeTabs.push(NavigationTabUtil.create(tabs.JMX,function(){_this.viewNodeLocation(NavigationDataConstants.APP_NODE_JMX,applicationId,nodeId)})),nodeTabs.push(NavigationTabUtil.create(tabs.EVENTS,function(){_this.eventViewService.viewEventDashboard(applicationId,EntityType.APPLICATION_COMPONENT_NODE,nodeId,null)})),nodeTabs.push(NavigationTabUtil.create(tabs.SLOW_RESPONSE_TIMES,function(){_this.viewNodeLocation(NavigationDataConstants.APP_NODE_SLOW_RESPONSE_TIMES,applicationId,nodeId)})),nodeTabs.push(NavigationTabUtil.create(tabs.ERRORS,function(){_this.viewNodeLocation(NavigationDataConstants.APP_NODE_ERRORS,applicationId,nodeId)})),nodeTabs.push(NavigationTabUtil.create(tabs.TRANSACTION_SNAPSHOTS,function(){SnapshotViewService.instance().viewSnapshotsListForEntity(applicationId,EntityType.APPLICATION_COMPONENT_NODE,nodeId)})),nodeTabs.push(NavigationTabUtil.create(tabs.TRANSACTION_ANALYSIS,function(){_this.viewNodeLocation(NavigationDataConstants.APP_NODE_TX_SCORE,applicationId,nodeId)})),this.showProcessSnapshotsTab(componentType)&&nodeTabs.push(NavigationTabUtil.create(tabs.PROCESS_SNAPSHOTS,function(){_this.viewNodeLocation(NavigationDataConstants.APP_NODE_PROCESS_SNAPSHOTS,applicationId,nodeId)})),nodeTabs.push(NavigationTabUtil.create(tabs.AGENTS,function(){_this.viewNodeLocation(NavigationDataConstants.APP_NODE_AGENTS,applicationId,nodeId)}));for(var i=0,size=nodeTabs.length;size>i;i++)if(nodeTabs[i].name===selected){nodeTabs[i].selected=!0;break}return nodeTabs},NodeViewService.prototype.showProcessSnapshotsTab=function(componentType){return componentType==ComponentTypeConstants.NODE_JS_SERVER_COMPONENT_TYPE},NodeViewService.prototype.showJavaMemoryTab=function(componentType){return componentType==ComponentTypeConstants.APP_SERVER},NodeViewService.prototype.showDotNetMemoryTab=function(componentType){return componentType==ComponentTypeConstants.DOT_NET_APP_SERVER_COMPONENT_TYPE},NodeViewService.prototype.showNodeJSMemoryTab=function(componentType){return componentType==ComponentTypeConstants.NODE_JS_SERVER_COMPONENT_TYPE},NodeViewService.prototype.showJVMTab=function(componentType){return componentType==ComponentTypeConstants.APP_SERVER},NodeViewService.prototype.showCLRTab=function(componentType){return componentType==ComponentTypeConstants.DOT_NET_APP_SERVER_COMPONENT_TYPE},NodeViewService.prototype.showJMXTab=function(componentType){return componentType==ComponentTypeConstants.APP_SERVER},NodeViewService.prototype.showEventTab=function(){return!0},NodeViewService.prototype.deleteNode=function(nodeId,applicationId,nodeName,componentId){var _this=this;this.nodeUiService.deleteNode(nodeId).then(function(){var appEvent={};appEvent.applicationId=applicationId,appEvent.applicationComponentId=componentId,appEvent.nodeId=nodeId,_this.$rootScope.$broadcast("UEV_NODE_DELETED",appEvent)}),this.notificationService.displayMessage(nodeName,"Deleting Node...")},NodeViewService.SERVICE_NAME="nodeViewService",NodeViewService.Tabs={DASHBOARD:"Dashboard",HARDWARE:"Server",MACHINE:"Server",MEMORY:"Memory",CUSTOM_DASHBOARDS:"My Dashboards",JVM:"JVM",CLR:"CLR",JMX:"JMX",EVENTS:"Events",SLOW_RESPONSE_TIMES:"Slow Response Times",ERRORS:"Errors",TRANSACTION_SNAPSHOTS:"Transaction Snapshots",TRANSACTION_ANALYSIS:"Transaction Score",PROCESS_SNAPSHOTS:"Process Snapshots",AGENTS:"Agents",NETWORK_DASHBOARD:"Network Dashboard"},NodeViewService.$inject=["$location","navigationService","notificationService","resourceManager","dashboardTemplateViewService","eventViewService","nodeUiService","$rootScope","flashService"],NodeViewService}(ViewServiceBase);appdynamicsModule.service("nodeViewService",NodeViewService),define("app/view/apm/services/NodeViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ApplicationConfigurationViewService=function(_super){function ApplicationConfigurationViewService($location,navigationService,notificationService,resourceManager){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager}return __extends(ApplicationConfigurationViewService,_super),ApplicationConfigurationViewService.instance=function(){return AngularUtil.getADInjector().get(ApplicationConfigurationViewService.SERVICE_NAME)},ApplicationConfigurationViewService.prototype.viewInstrumentationDashboard=function(applicationId,tab){var params=this.createUrlParamsWithCurrentTimeRange();switch(params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),tab){case ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_SERVICE_ENDPOINT:params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_CONFIG_SERVICE_ENDPOINT_DETECTION);break;case ApplicationConfigurationViewService.TAB_APP_ASYNC_CONFIG:params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_CONFIG_ASYNC);break;default:params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_CONFIGURATION),tab&&!isNaN(tab)&&tab>=0&&params.setNumberParam(UrlConstants.TAB_ID,tab)}this.navigationService.navigateTo(params.toString())},ApplicationConfigurationViewService.prototype.getInstrumentationDashboardNavigationTabs=function(applicationId){var _this=this,onClickTab=function(tab){_this.viewInstrumentationDashboard(applicationId,tab)};return[{name:this.getString("ms_transactionDetection"),clickFn:onClickTab,fnArg:ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_TXN},{name:this.getString("ms_backendDetection"),clickFn:onClickTab,fnArg:ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_BACKEND},{name:this.getString("ms_eum"),clickFn:onClickTab,fnArg:ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_EUM},{name:this.getString("ms_errorDetection"),clickFn:onClickTab,fnArg:ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_ERROR},{name:this.getString("ms_serviceEndpointsTitle"),clickFn:onClickTab,fnArg:ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_SERVICE_ENDPOINT},{name:this.getString("ms_dataCollectors"),clickFn:onClickTab,fnArg:ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_DATA_COLLECTOR},{name:this.getString("ms_callGraphSettings"),clickFn:onClickTab,fnArg:ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_CALL_GRAPH},{name:this.getString("ms_jmx"),clickFn:onClickTab,fnArg:ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_JMX},{name:this.getString("ms_memoryMonitoring"),clickFn:onClickTab,fnArg:ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_MEMORY},{name:this.getString("ms_asyncConfiguration"),clickFn:onClickTab,fnArg:ApplicationConfigurationViewService.TAB_APP_ASYNC_CONFIG}]},ApplicationConfigurationViewService.prototype.getInstrumentationDashboardLocationBarEntryConfigs=function(application){var configs=[];return configs.push(ApplicationViewService.instance().getApplicationLocationBarEntryConfig(application)),configs.push(ApplicationViewService.instance().getAppConfigLocationBarEntryConfig(application)),configs.push({label:this.getString("ms_instrumentation")}),configs},ApplicationConfigurationViewService.prototype.viewConfigureBaselines=function(applicationId,navlocation){var params=this.createUrlParamsWithCurrentTimeRange();params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),navlocation?(params.setParam(UrlConstants.LOCATION,navlocation),this.navigationService.navigateTo(params.toString())):ApplicationsCache.instance().findApplicationById(applicationId).then(function(application){ApplicationsCache.hasApplicationType(application,ApplicationType.APM)?params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_BASELINES):ApplicationsCache.hasApplicationType(application,ApplicationType.WEB)?params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_WEB_CONFIG_BASELINES):ApplicationsCache.hasApplicationType(application,ApplicationType.INFRA)?params.setParam(UrlConstants.LOCATION,NavigationDataConstants.SERVER_MONITORING_BASELINES):ApplicationsCache.hasApplicationType(application,ApplicationType.DATABASE)?params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_BASELINE):params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_BASELINES),NavigationService.instance().navigateTo(params.toString())})},ApplicationConfigurationViewService.prototype.viewConfigureSlowThreshholds=function(appliationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_THRESHOLD_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,appliationId),this.navigationService.navigateTo(params.toString())},ApplicationConfigurationViewService.prototype.viewConfigurationBTDiscovery=function(appliationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_BT_DISCOVERY_TOOLS_CONFIG),params.setNumberParam(UrlConstants.APPLICATION_ID,appliationId),this.navigationService.navigateTo(params.toString())},ApplicationConfigurationViewService.SERVICE_NAME="applicationConfigurationViewService",ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_TXN=0,ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_BACKEND=1,ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_EUM=2,ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_ERROR=3,ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_SERVICE_ENDPOINT=4,ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_DATA_COLLECTOR=5,ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_CALL_GRAPH=6,ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_JMX=7,ApplicationConfigurationViewService.TAB_APP_INSTRUMENTATION_MEMORY=8,ApplicationConfigurationViewService.TAB_APP_ASYNC_CONFIG=9,ApplicationConfigurationViewService.$inject=["$location","navigationService","notificationService","resourceManager"],ApplicationConfigurationViewService}(ViewServiceBase);appdynamicsModule.service("applicationConfigurationViewService",ApplicationConfigurationViewService),define("app/view/apm/services/ApplicationConfigurationViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BackendDashboardViewService=function(_super){function BackendDashboardViewService($location,navigationService,notificationService,resourceManager,flowMapUiService,backendUiService,$rootScope){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.flowMapUiService=flowMapUiService,this.backendUiService=backendUiService,this.$rootScope=$rootScope}return __extends(BackendDashboardViewService,_super),BackendDashboardViewService.instance=function(){return AngularUtil.getADInjector().get(BackendDashboardViewService.SERVICE_NAME)},BackendDashboardViewService.prototype.viewBackendDashboard=function(applicationId,backendId){var newLocation=URLParams.createUrlParamsWithCurrentTimeRange();newLocation.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_BACKEND_DASHBOARD),newLocation.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),newLocation.setNumberParam(UrlConstants.BACKEND_DASHBOARD,backendId),this.navigationService.navigateTo(newLocation.toString())},BackendDashboardViewService.prototype.viewBackendSlowestCalls=function(applicationId,backendId){var newLocation=new URLParams;newLocation.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_BACKEND_DASHBOARD_SLOWEST_CALLS),newLocation.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),newLocation.setNumberParam(UrlConstants.BACKEND_DASHBOARD,backendId),this.navigationService.navigateTo(newLocation.toString())},BackendDashboardViewService.prototype.ungroupBackends=function(idsToUngroup,properties){var _this=this;properties.preference.ungroupableBackends=properties.preference.ungroupableBackends?_.union(properties.preference.ungroupableBackends,idsToUngroup):idsToUngroup,this.flowMapUiService.setFlowmapProperties(properties).then(function(){_this.$rootScope.$broadcast(App.UEV_REFRESH)})},BackendDashboardViewService.prototype.renameBackendFromNode=function(data){var _this=this,backendFromNode={};backendFromNode.id=data.idNum,backendFromNode.displayName=data.name,backendFromNode.resolutionInfo={exitPointType:data.backendType};var promise=this.renameBackend(backendFromNode);promise.then(function(){_this.$rootScope.$broadcast(App.UEV_REFRESH)})},BackendDashboardViewService.prototype.renameBackend=function(backendInfo){var _this=this,deferred=SharedInjectorService.instance().$q().defer(),doRenameBackend=function(newVal){var promise=_this.backendUiService.renameBackend(backendInfo.id,newVal);promise.then(function(){_this.notificationService.displayMessage(_this.getString("ms_renameBackendSuccess"),""),deferred.resolve(newVal)},deferred.reject)},modal=DialogService.instance().openDialog({templateUrl:"app/view/apm/backendDashboard/dialogs/RenameBackendDialog.html",scopeData:{getString:this.getString.bind(this),backendName:backendInfo.displayName,newBackendName:backendInfo.displayName,imageSrc:ImageUtil.getBackendBigIconSource(ExitPointUtil.getExitPointTypeFromBackend(backendInfo))}});return modal.result.then(function(newValue){doRenameBackend(newValue)},deferred.reject),deferred.promise},BackendDashboardViewService.prototype.deleteBackends=function(backendInfoArray){var _this=this,deferred=SharedInjectorService.instance().$q().defer();if(!backendInfoArray)return deferred.reject(),deferred.promise;for(var confirmationStringKey=backendInfoArray.length>1?"ms_deleteBackendsConfirmation":"ms_deleteBackendConfirmation",confirmHtml="<p>"+this.getString(confirmationStringKey)+"</p><br/>",index=0;index<backendInfoArray.length;index++)confirmHtml+="<p>"+backendInfoArray[index].displayName+"</p>";var doDelete=function(){var promise=_this.backendUiService.deleteBackends(_.pluck(backendInfoArray,"id"));promise.then(function(){for(var index=0;index<backendInfoArray.length;index++)_this.notificationService.displayMessage(backendInfoArray[index].displayName,_this.getString("ms_backendDeleted"));deferred.resolve()},deferred.reject)};return DialogService.instance().showConfirmation(this.getString("ms_deleteConfirmation"),confirmHtml,doDelete,deferred.reject),deferred.promise},BackendDashboardViewService.prototype.resolveBackend=function(backendInfo){var deferred=SharedInjectorService.instance().$q().defer(),openModalPromise=DialogService.instance().showDialog("","app/view/apm/backendDashboard/dialogs/ResolveBackendDialogController","app/view/apm/backendDashboard/dialogs/ResolveBackendDialog.html",backendInfo);return openModalPromise.then(function(modal){modal.result.then(function(resolvedId){deferred.resolve(resolvedId)},deferred.reject)},deferred.reject),deferred.promise},BackendDashboardViewService.SERVICE_NAME="backendDashboardViewService",BackendDashboardViewService.$inject=["$location","navigationService","notificationService","resourceManager","flowMapUiService","backendUiService","$rootScope"],BackendDashboardViewService}(ViewServiceBase);appdynamicsModule.service(BackendDashboardViewService.SERVICE_NAME,BackendDashboardViewService),define("app/view/apm/services/BackendDashboardViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SnapshotViewService=function(_super){function SnapshotViewService($location,navigationService,snapshotUiService,masterService,flashService,timeRangeService,dialogService,notificationService,resourceManager){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.snapshotUiService=snapshotUiService,this.masterService=masterService,this.flashService=flashService,this.timeRangeService=timeRangeService,this.dialogService=dialogService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.snapshotViewerMap=new HashMap({keyFunction:function(key){return key[0]+key[1]}})}return __extends(SnapshotViewService,_super),SnapshotViewService.instance=function(){return AngularUtil.getADInjector().get(SnapshotViewService.SERVICE_NAME)},SnapshotViewService.prototype.archiveSnapshots=function(rsds){var _this=this,confirmMessage=this.getString("ms_archivedSnapshotsConfirmMessage",[1]),titleMessage=this.getString("ms_archivedEventConfirm"),deferred=SharedInjectorService.instance().$q().defer(),onConfirmArchive=function(){var timeRange=_this.getTimeRangeAroundRSDs(rsds),rsdIds=_.map(rsds,function(rsd){return rsd.id}),rsdGuids=_.map(rsds,function(rsd){return rsd.requestGUID}),onSuccess=function(){var success=rsds.length>1?_this.getString("ms_archivedSnapshotsSuccessMessage",[rsds.length]):_this.getString("ms_archivedSnapshotSuccessMessage");_this.notificationService.displayMessage(success,""),deferred.resolve()},archiveRequest={requestIDs:rsdIds,requestGUIDs:rsdGuids,timeRangeSpecifier:timeRange},result=_this.snapshotUiService.archiveSnapshots(archiveRequest);
result.then(onSuccess,deferred.reject)};return this.dialogService.showConfirmation(titleMessage,confirmMessage,onConfirmArchive),deferred.promise},SnapshotViewService.prototype.deleteSnapshots=function(rsds){var _this=this,titleMessage=this.getString("ms_deleteConfirmation"),confirmMessage=rsds.length>1?this.getString("ms_deleteNItemsConfirmation",[rsds.length]):this.getString("ms_deleteItemConfirmation"),deferred=SharedInjectorService.instance().$q().defer(),onConfirmDelete=function(){var timeRange=_this.getTimeRangeAroundRSDs(rsds),rsdIds=_.map(rsds,function(rsd){return rsd.id}),onSuccess=function(){var success=rsds.length>1?_this.getString("ms_deletedSnapshotsSuccessMessage",[rsds.length]):_this.getString("ms_deletedSnapshotSuccessMessage");_this.notificationService.displayMessage(success,""),deferred.resolve()},deleteRequest={requestIDs:rsdIds,timeRangeSpecifier:timeRange},result=_this.snapshotUiService.deleteSnapshots(deleteRequest);result.then(onSuccess,deferred.reject)};return this.dialogService.showConfirmation(titleMessage,confirmMessage,onConfirmDelete),deferred.promise},SnapshotViewService.prototype.viewMultipleRequestSegmentData=function(rsds){1==rsds.length?this.viewRequestSegmentData(rsds[0]):rsds.length>1&&DialogService.instance().showDialog("","app/view/apm/snapshot/distributed/rsdPickerDialog/RSDPickerDialogController","app/view/apm/snapshot/distributed/rsdPickerDialog/RSDPickerDialogView.html",{rsds:rsds})},SnapshotViewService.prototype.viewSnapshotComparisonModal=function(rsd1,rsd2){var timeRangeString=this.timeRangeService.convertToPreferenceString(this.getTimeRangeAroundRSDs([rsd1,rsd2]));this.flashService.showSnapshotComparisonModal(rsd1.applicationId,rsd1.id,rsd2.id,timeRangeString)},SnapshotViewService.prototype.viewSplunkForRequestSegmentData=function(rsd){var timeRangeString=this.timeRangeService.convertToPreferenceString(this.getTimeRangeAroundRSDs([rsd]));this.flashService.showSplunkForRsd(rsd.applicationId,rsd.id,timeRangeString)},SnapshotViewService.prototype.viewExpensiveMethodsAndSqlModal=function(rsds){if(Util.isDefAndNotEmptyArray(rsds)){if(rsds.length>SnapshotViewService.MAX_RSDS_TO_GET_MOST_EXPENSIVE_METHODS){var confirmMessage=this.getString("ms_exceededMaxAllowableRSDsForGetMostExpensiveMethodsMessage",[SnapshotViewService.MAX_RSDS_TO_GET_MOST_EXPENSIVE_METHODS]),titleMessage=this.getString("ms_exceededMaxAllowableRSDsForGetMostExpensiveMethodsTitle");return void DialogService.instance().showConfirmation(titleMessage,confirmMessage)}var rsdGuids=_.map(rsds,function(rsd){return rsd.requestGUID}),rsdIds=_.map(rsds,function(rsd){return rsd.id}),timeRangeString=this.timeRangeService.convertToPreferenceString(this.getTimeRangeAroundRSDs(rsds));this.flashService.showExpensiveMethodsAndSqlModal(rsds[0].applicationId,rsdGuids,rsdIds,timeRangeString)}},SnapshotViewService.prototype.viewRequestSegmentDataByGuid=function(guid,applicationId){var _this=this,deferredModal=SharedInjectorService.instance().$q().defer();return this.snapshotUiService.getDistributedRequestTimeRange(guid).then(function(startTime){_this.viewRequestSegmentData({requestGUID:guid,applicationId:applicationId,serverStartTime:startTime,firstInChain:!0}).then(function(modal){deferredModal.resolve(modal)}).catch(function(){deferredModal.reject()})}).catch(function(){deferredModal.reject()}),deferredModal.promise},SnapshotViewService.prototype.viewRequestSegmentData=function(rsdRequest){var _this=this;EventBusService.instance().dispatchEvent(EventConstants.UEV_APM_SNAPSHOT_VIEW,null);var timeRange=this.timeRangeService.convertForUrl(SnapshotViewService.getTimeRangeAroundSnapshot(rsdRequest.serverStartTime));if(!this.openNewViewerForRequest(rsdRequest)){var existingViewer=this.snapshotViewerMap.get([rsdRequest.requestGUID,2])(),deferred=InjectorService.instance().$q().defer(),modalStack=InjectorService.instance().$modalStack(),wasHidden=!modalStack.getTop()||modalStack.getTop().key!==existingViewer;return this.dialogService.bringDialogToFront(existingViewer).finally(function(){!Util.isValidId(rsdRequest.id)||wasHidden&&rsdRequest.firstInChain?existingViewer?deferred.resolve(existingViewer):deferred.reject():_this.viewSingleRequestSegmentData(_this.snapshotUiService.getRequestSegmentById(rsdRequest.id,timeRange),!1).then(function(modalInstance){deferred.resolve(modalInstance)}).catch(function(){deferred.reject()})}),deferred.promise}return this.openSnapshotViewer(this.snapshotUiService.getDistributedRequestSegmentData(rsdRequest.requestGUID,timeRange),rsdRequest,ViewUtil.createLoaderDialog())},SnapshotViewService.prototype.viewDbServerData=function(dbServerPromise,backendId,background){var _this=this;void 0===background&&(background=!1);var deferredModal=SharedInjectorService.instance().$q().defer(),URLParam=URLParams.getCurrentUrlParams(),requestGUID=URLParam.requestGUID();return dbServerPromise.then(function(dbServer){dbServer.id?(URLParam.setNumberParam("databaseId",dbServer.id),URLUtil.setTemporaryLocationHash(URLParam.toString()),deferredModal.resolve(_this.snapshotViewerMap.get([requestGUID,1])(dbServer,background))):DialogService.instance().showDialog("","app/view/dbMonitoring/configuration/backendMapping/BackendMappingDialogController","app/view/dbMonitoring/configuration/backendMapping/BackendMappingDialog.html",{editMode:!1,backendId:backendId}).then(function(modal){deferredModal.resolve(modal)})}).catch(function(){deferredModal.reject()}),deferredModal.promise},SnapshotViewService.prototype.viewAnalyticsTransactionSnapshot=function(analyticsTransaction,launchingScope){var dialogData={analyticsData:analyticsTransaction,requestParams:null};DialogService.instance().openDialogAsync({controllerPath:"app/view/apm/snapshot/analytics/AnalyticsSnapshotDialog",templateUrl:"app/view/apm/snapshot/SnapshotDialog.html",data:dialogData,parentScope:launchingScope})},SnapshotViewService.prototype.viewSnapshotsInSelectedTimeRange=function(fromDate,toDate){var currentUrlParams=URLParams.getCurrentUrlParams(),entityType=EntityType.APPLICATION,entityId=currentUrlParams.applicationId();currentUrlParams.location()==NavigationDataConstants.APP_BT_DETAIL?(entityType=EntityType.BUSINESS_TRANSACTION,entityId=currentUrlParams.getNumberParam(UrlConstants.BUSINESS_TRANSACTION_ID)):currentUrlParams.location()==NavigationDataConstants.APP_COMPONENT_MANAGER?(entityType=EntityType.APPLICATION_COMPONENT,entityId=currentUrlParams.getNumberParam(UrlConstants.COMPONENT_ID)):currentUrlParams.location()==NavigationDataConstants.APP_NODE_MANAGER&&(entityType=EntityType.APPLICATION_COMPONENT_NODE,entityId=currentUrlParams.getNumberParam(UrlConstants.NODE_ID)),this.flashService.isHTMLEnabledLocation(NavigationDataConstants.APP_ALL_SNAPSHOT_LIST)?DialogService.instance().showDialog("SnapshotsInTimeRangeDialogController","app/view/apm/snapshot/list/snapshotsInTimeRange/SnapshotsInTimeRangeDialogController","app/view/apm/snapshot/list/snapshotsInTimeRange/SnapshotsInTimeRangeDialog.html",{entityType:entityType,entityId:entityId,fromDate:fromDate,toDate:toDate}):FlashService.instance().viewSnapshotsInTimeRangeFromHtml(entityType,entityId,fromDate.getTime(),toDate.getTime())},SnapshotViewService.prototype.getDeepLinkFragmentForTransactionSnapshot=function(rsd){var urlParams=URLParams.createEmptyUrlParams();if(urlParams.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_SNAPSHOT_VIEWER),!rsd)return urlParams;urlParams.setNumberParam(UrlConstants.APPLICATION_ID,rsd.applicationId);var rsdTimeRange=SnapshotViewService.getTimeRangeAroundSnapshot(rsd.serverStartTime);return urlParams.setParam(UrlConstants.RSD_TIME,this.timeRangeService.convertToPreferenceString(rsdTimeRange,".")),urlParams.setParam(UrlConstants.REQUEST_GUID,rsd.requestGUID),!rsd.firstInChain&&rsd.id&&urlParams.setNumberParam(UrlConstants.TAB_ID,rsd.id),urlParams},SnapshotViewService.prototype.getDeepLinkFragmentForIndividualRsd=function(rsd){var urlParams=URLParams.createEmptyUrlParams();if(urlParams.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_SNAPSHOT_RSD_VIEWER),this.masterService.isHTMLEnabledLocation(urlParams))return urlParams=this.getDeepLinkFragmentForTransactionSnapshot(rsd),rsd&&urlParams.setNumberParam(UrlConstants.TAB_ID,rsd.id),urlParams;if(rsd){urlParams.setNumberParam(SnapshotViewService.LEGACY_URL_RSD_PARAM,rsd.id);var rsdTimeRange=SnapshotViewService.getTimeRangeAroundSnapshot(rsd.serverStartTime);return urlParams.setParam(UrlConstants.RSD_TIME,this.timeRangeService.convertToPreferenceString(rsdTimeRange,".")),urlParams}return urlParams},SnapshotViewService.getTimeRangeAroundSnapshot=function(serverStartTime){return DateTimeUtil.getTimeRangeAroundTime(serverStartTime,2*SnapshotViewService.TIME_INTERVAL)},SnapshotViewService.getServerStartTimeForSnapshotTimeRangeString=function(snapshotTimeRangeString){var timeRange=TimeRangeService.instance().createTimeRange(snapshotTimeRangeString,".");return timeRange&&timeRange.type==TimeRangeSpecifierType.BETWEEN_TIMES?timeRange.startTime.getTime()+SnapshotViewService.TIME_INTERVAL*TimeRangeService.MILLISECONDS_PER_MINUTE:-1},SnapshotViewService.prototype.getTimeRangeAroundRSDs=function(rsds){for(var maxTime=-1,minTime=-1,itr=0;itr<rsds.length;itr++){var rsd=rsds[itr];(-1==minTime||rsd.serverStartTime<minTime)&&(minTime=rsd.serverStartTime),(-1==maxTime||rsd.serverStartTime>maxTime)&&(maxTime=rsd.serverStartTime)}var trs={};trs.type=TimeRangeSpecifierType.BETWEEN_TIMES;var startDate=new Date(minTime-TimeRangeService.MILLISECONDS_PER_MINUTE*SnapshotViewService.TIME_INTERVAL),endDate=new Date(maxTime+TimeRangeService.MILLISECONDS_PER_MINUTE*SnapshotViewService.TIME_INTERVAL);return trs.startTime=startDate,trs.endTime=endDate,trs.durationInMinutes=(endDate.getTime()-startDate.getTime())/TimeRangeService.MILLISECONDS_PER_MINUTE,trs},SnapshotViewService.prototype.viewExitCallDetailsDialog=function(snapshotExitCall){var scope={title:APMUtil.renderCallType(snapshotExitCall.exitPointName)+" "+resourceManager.getString("ui","ms_call"),snapshotExitCall:snapshotExitCall};ControllerBase.addGetStringToScope(scope);DialogService.instance().showSimpleDialog("app/view/apm/snapshot/exitCalls/SnapshotExitCallDialogView.html",scope)},SnapshotViewService.prototype.viewSnapshotMethodDetailDetailsDialog=function(snapshotMethodDetail){var scope={title:"Method Call: "+snapshotMethodDetail.methodName,snapshotMethodDetail:snapshotMethodDetail};ControllerBase.addGetStringToScope(scope);DialogService.instance().showSimpleDialog("app/view/apm/snapshot/methodDetails/SnapshotMethodDetailDialogView.html",scope)},SnapshotViewService.prototype.viewSnapshotsListForEntity=function(applicationId,entityType,entityId,requestUserExperience,rsdFilter){var params=this.createUrlParamsWithCurrentTimeRange();if(params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),entityType&&Util.isValidId(entityId))switch(entityType){case EntityType.APPLICATION:params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_ALL_SNAPSHOT_LIST);break;case EntityType.BUSINESS_TRANSACTION:params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_BT_ALL_SNAPSHOT_LIST),params.setNumberParam(UrlConstants.BUSINESS_TRANSACTION_ID,entityId);break;case EntityType.APPLICATION_COMPONENT:params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_COMPONENT_ALL_SNAPSHOT_LIST),params.setNumberParam(UrlConstants.COMPONENT_ID,entityId);break;case EntityType.APPLICATION_COMPONENT_NODE:params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_NODE_ALL_SNAPSHOT_LIST),params.setNumberParam(UrlConstants.NODE_ID,entityId)}requestUserExperience?params.setParam(UrlConstants.REQUEST_UE_TYPE,requestUserExperience):rsdFilter&&(AngularUtil.getADInjector().get("snapshotFilterService").transientFilter=rsdFilter),this.navigationService.navigateTo(params.toString())},SnapshotViewService.prototype.registerSnapshotViewerCallback=function(guid,callbackType,callback){var _this=this;return this.snapshotViewerMap.put([guid,callbackType],callback),function(){_this.snapshotViewerMap.remove([guid,callbackType])}},SnapshotViewService.prototype.viewSingleRequestSegmentData=function(rsdPromise,background,resetTabs){var _this=this;void 0===background&&(background=!1),void 0===resetTabs&&(resetTabs=!1);var deferredModal=SharedInjectorService.instance().$q().defer(),loader=ViewUtil.createLoaderDialog();return rsdPromise.then(function(rsd){if(MasterService.instance().isHTMLEnabledLocation(_this.getDeepLinkFragmentForIndividualRsd())){var openTabCallback=_this.snapshotViewerMap.get([rsd.requestGUID,0]);openTabCallback?deferredModal.resolve(openTabCallback(rsd,background,resetTabs)):deferredModal.reject()}else _this.openCallGraph(rsd.id,rsd.requestGUID,rsd.serverStartTime,rsd.applicationId),deferredModal.resolve()}).catch(function(){deferredModal.reject()}).finally(function(){loader.opened.then(loader.dismiss)}),deferredModal.promise},SnapshotViewService.prototype.openSnapshotViewer=function(dataPromise,rsdRequest,loader){var _this=this,allowEmpty=Util.isValidId(rsdRequest.id),deferred=SharedInjectorService.instance().$q().defer();return deferred.promise.finally(function(){loader.dismiss()}),dataPromise.then(function(snapshotData){if(_this.masterService.isHTMLEnabledLocation(_this.getDeepLinkFragmentForTransactionSnapshot()))if(allowEmpty||snapshotData&&snapshotData.requestSegmentData){var dialogData={snapshotData:snapshotData,requestParams:rsdRequest};DialogService.instance().openDialogAsync({controllerPath:"app/view/apm/snapshot/SnapshotDialog",templateUrl:"app/view/apm/snapshot/SnapshotDialog.html",data:dialogData,minimizable:!0}).then(function(modal){deferred.resolve(modal)})}else NotificationService.instance().displayError(_this.resourceManager.getString("ui","ms_cannotFindSnapshot",[rsdRequest.requestGUID]),_this.resourceManager.getString("ui","ms_deepLinkFailed")),deferred.reject();else _this.flashService.gotoFlexModal(_this.getDeepLinkFragmentForTransactionSnapshot(snapshotData.requestSegmentData).toStringNoForwardSlash()),deferred.resolve()}).catch(function(){deferred.reject()}),deferred.promise},SnapshotViewService.prototype.openCallGraph=function(requestID,requestGUID,serverStartTime,applicationId){this.flashService.showSnapshotCallGraphDialog(requestID,requestGUID,serverStartTime,applicationId)},SnapshotViewService.prototype.openNewViewerForRequest=function(rsdRequest){return this.snapshotViewerMap.containsKey([rsdRequest.requestGUID,2])?!1:rsdRequest.firstInChain||this.masterService.isHTMLEnabledLocation(this.getDeepLinkFragmentForIndividualRsd())},SnapshotViewService.SERVICE_NAME="snapshotViewService",SnapshotViewService.SNAPSHOT_MODE_APM="SNAPSHOT_MODE_APM",SnapshotViewService.SNAPSHOT_MODE_ANALYTICS="SNAPSHOT_MODE_ANALYTICS",SnapshotViewService.TIME_INTERVAL=30,SnapshotViewService.MAX_RSDS_TO_GET_MOST_EXPENSIVE_METHODS=30,SnapshotViewService.MAX_RSDS_TO_MINE_FOR_PROBLEMS=30,SnapshotViewService.MAX_PROBLEMS_TO_GET=50,SnapshotViewService.MAX_SLOW_EXIT_CALLS=30,SnapshotViewService.MAX_SLOW_METHODS_TO_GET=30,SnapshotViewService.MAX_ERRORS_TO_GET=30,SnapshotViewService.EXE_TIME_THRESHOLD_MILIS=5,SnapshotViewService.FLOW_VIEW="FLOW_VIEW",SnapshotViewService.WATERFALL_VIEW="WATERFALL_VIEW",SnapshotViewService.ROOT_CAUSE_VIEW="ROOT_CAUSE_VIEW",SnapshotViewService.LIST_VIEW="LIST_VIEW",SnapshotViewService.RAW_VIEW="RAW_VIEW",SnapshotViewService.ALL_TABS_SNAPSHOT_VIEWER=[SnapshotViewService.FLOW_VIEW,SnapshotViewService.WATERFALL_VIEW,SnapshotViewService.ROOT_CAUSE_VIEW,SnapshotViewService.LIST_VIEW,SnapshotViewService.RAW_VIEW],SnapshotViewService.DISTRIBUTED_RSD_TAB_ID="overview",SnapshotViewService.LEGACY_URL_RSD_PARAM="requestID",SnapshotViewService.$inject=["$location","navigationService","snapshotUiService","masterService","flashService","timeRangeService","dialogService","notificationService","resourceManager"],SnapshotViewService}(ViewServiceBase),SnapshotViewerCallbackType;!function(SnapshotViewerCallbackType){SnapshotViewerCallbackType[SnapshotViewerCallbackType.RSD=0]="RSD",SnapshotViewerCallbackType[SnapshotViewerCallbackType.DATABASE=1]="DATABASE",SnapshotViewerCallbackType[SnapshotViewerCallbackType.IDENTITY=2]="IDENTITY"}(SnapshotViewerCallbackType||(SnapshotViewerCallbackType={})),appdynamicsModule.service(SnapshotViewService.SERVICE_NAME,SnapshotViewService),define("app/view/apm/services/SnapshotViewService",function(){}),define("app/view/apm/PerformanceFilter/PerformanceFilterType",["require","exports"],function(require,exports){!function(PerformanceFilterType){PerformanceFilterType[PerformanceFilterType.WITH_PERFORMANCE_DATA=0]="WITH_PERFORMANCE_DATA",PerformanceFilterType[PerformanceFilterType.RESPONSE_TIME_FILTER=1]="RESPONSE_TIME_FILTER",PerformanceFilterType[PerformanceFilterType.CALLS_PER_MIN_VALUE=2]="CALLS_PER_MIN_VALUE",PerformanceFilterType[PerformanceFilterType.SEARCH_STRING=3]="SEARCH_STRING",PerformanceFilterType[PerformanceFilterType.TIER_SEARCH_STRING=4]="TIER_SEARCH_STRING"}(exports.PerformanceFilterType||(exports.PerformanceFilterType={}));exports.PerformanceFilterType;!function(FilterTypesOthers){FilterTypesOthers[FilterTypesOthers.BTGroups=0]="BTGroups",FilterTypesOthers[FilterTypesOthers.FGTasks=1]="FGTasks",FilterTypesOthers[FilterTypesOthers.BGTasks=2]="BGTasks"}(exports.FilterTypesOthers||(exports.FilterTypesOthers={}));exports.FilterTypesOthers});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/apm/PerformanceFilter/PerformanceFilterController",["require","exports","./PerformanceFilterType"],function(){var PerformanceFilterController=function(_super){function PerformanceFilterController($scope){_super.call(this,$scope),this.$scope=$scope,this.filter={},$scope.controller=this,this.init()}return __extends(PerformanceFilterController,_super),PerformanceFilterController.prototype.init=function(){this.filter=this.$scope.adConfiguration},PerformanceFilterController.prototype.updateTransactionTypeFilters=function(selected,adOptionalData){this.$scope.adOnFilterChange({selected:adOptionalData.show,adOptionalData:{name:adOptionalData.type,value:!adOptionalData.selected}})},PerformanceFilterController.prototype.updatePerformanceData=function(selected){this.$scope.adConfiguration.withPerformanceDataSelected=selected,this.$scope.adOnFilterChange({selected:selected,adOptionalData:{name:0,value:this.filter.withPerformanceDataSelected}})},PerformanceFilterController.prototype.updateResponseTimeFilterValue=function(value){this.$scope.adConfiguration.responseTimeFilterValue=value,this.$scope.adOnFilterChange({selected:!0,adOptionalData:{name:1,value:this.$scope.adConfiguration.responseTimeFilterValue}})},PerformanceFilterController.prototype.updateCallsPerMinuteValue=function(value){this.$scope.adConfiguration.callsPerMinuteValue=value,this.$scope.adOnFilterChange({selected:!0,adOptionalData:{name:2,value:this.$scope.adConfiguration.callsPerMinuteValue}})},PerformanceFilterController.prototype.updateSearchString=function(value){this.$scope.adConfiguration.searchString=value,this.$scope.adOnFilterChange({selected:!0,adOptionalData:{name:3,value:this.$scope.adConfiguration.searchString}})},PerformanceFilterController.prototype.updateTierText=function(value){this.$scope.adConfiguration.tierSearchString=value,this.$scope.adOnFilterChange({selected:!0,adOptionalData:{name:4,value:this.$scope.adConfiguration.tierSearchString}})},PerformanceFilterController.JAVA_TIERS="JAVA_TIERS",PerformanceFilterController.DOT_NET_TIERS="DOT_NET_TIERS",PerformanceFilterController.$inject=["$scope"],PerformanceFilterController}(ControllerBase);return PerformanceFilterController}),define("app/view/apm/PerformanceFilter/PerformanceFilterDirective",["require","exports","./PerformanceFilterController"],function(require,exports,PerformanceFilterController){var PerformanceFilterDirective=function(){function PerformanceFilterDirective(){return{restrict:"E",scope:{adConfiguration:"=",adOnFilterChange:"&"},templateUrl:"app/view/apm/PerformanceFilter/PerformanceFilter.html",controller:PerformanceFilterController}}return PerformanceFilterDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-performance-filter"),PerformanceFilterDirective)}),define("app/view/apm/PerformanceFilter/PerformanceFilterUtil",["require","exports","app/view/apm/PerformanceFilter/PerformanceFilterType"],function(require,exports,filterType){var ListViewState=function(){function ListViewState(){this.filterOptionStates=null,this.initialSortField="numberOfCalls",this.initialSortDirection=GridComp.DESC,this.withLoad=!0,this.filterString=""}return ListViewState.getDefaultViewState=function(){return new ListViewState},ListViewState}();exports.ListViewState=ListViewState;var PerformanceFilterUtil=function(){function PerformanceFilterUtil(config){var _this=this;this.initFilter=function(viewState){return viewState.filterOptionStates?(_this.filterConfiguration.withPerformanceDataSelected=viewState.filterOptionStates[_this.filterConfiguration.withPerformanceDataLabel].show,_this.filterConfiguration.tierSearchString=viewState.filterOptionStates[4].text,_this.filterConfiguration.searchString=viewState.filterOptionStates[3].text,_this.filterConfiguration.callsPerMinuteValue=viewState.filterOptionStates[2].value,_this.filterConfiguration.responseTimeFilterValue=viewState.filterOptionStates[1].value):(viewState.filterOptionStates={},viewState.filterOptionStates[_this.filterConfiguration.withPerformanceDataLabel]={show:_this.filterConfiguration.withPerformanceDataSelected,text:"",value:null},viewState.filterOptionStates[4]={show:null,text:"",value:null},viewState.filterOptionStates[3]={show:null,text:"",value:null},viewState.filterOptionStates[2]={show:null,text:null,value:0},viewState.filterOptionStates[1]={show:null,text:null,value:0}),_this.filterConfiguration},this.getSelectedEntryPointTypes=function(){var types=[],filters=_this.filterConfiguration.entryPointTypes;return filters.forEach(function(filter){filter.selected&&types.push(filter.type===filterType.FilterTypesOthers[2]||filter.type===filterType.FilterTypesOthers[1]||filter.type===filterType.FilterTypesOthers[0]?filter.type:TransactionEntryPointType[filter.type])}),types},this.filterTypesOthers=filterType.FilterTypesOthers,this.filterConfiguration={},config&&(this.filterConfiguration.withPerformanceDataLabel=config.withPerformanceDataLabel,this.filterConfiguration.withPerformanceDataSelected=config.withPerformanceDataSelected,this.filterConfiguration.searchStringPrompt=config.searchStringPrompt,this.filterConfiguration.searchStringLabel=config.searchStringLabel,this.filterConfiguration.filtersTypeOthersVisible=config.filtersTypeOthersVisible,this.filterConfiguration.withPerformanceDataSelected=config.withPerformanceDataSelected,this.filterConfiguration.tierSearchString="",this.filterConfiguration.searchString="",this.filterConfiguration.callsPerMinuteValue=0,this.filterConfiguration.responseTimeFilterValue=0)}return PerformanceFilterUtil.createTransactionEntryPointTypeFilters=function(filterTypes,viewState){var selected,result=[];return filterTypes.forEach(function(type){switch(viewState.filterOptionStates[type]?selected=viewState.filterOptionStates[type].show:viewState.filterOptionStates[type]={show:!1,text:null,value:null},type){case filterType.FilterTypesOthers[2]:result.push({selected:selected,label:Util.getString("ms_entryPoint_"+type),type:type,imgSrc:ImageUtil.bt_background_task_16});break;case filterType.FilterTypesOthers[1]:result.push({selected:selected,label:Util.getString("ms_entryPoint_"+type),type:type,imgSrc:ImageUtil.bt_overflow_16});break;case filterType.FilterTypesOthers[0]:result.push({selected:selected,label:Util.getString("ms_entryPoint_"+type),type:type,imgSrc:ImageUtil.bt_group_16});break;default:result.push({selected:selected,label:Util.getString("ms_entryPoint_"+type),type:type,imgSrc:ImageUtil.getBTEntryPointOrCallElementMap()[type]})}}),result},PerformanceFilterUtil.JAVA_TIERS="JAVA_TIERS",PerformanceFilterUtil.DOT_NET_TIERS="DOT_NET_TIERS",PerformanceFilterUtil.BT_TYPE="BUSINESS_TRANSACTION",PerformanceFilterUtil.SEP_TYPE="SERVICE_ENDPOINT",PerformanceFilterUtil}();exports.PerformanceFilterUtil=PerformanceFilterUtil});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},DeleteServiceEndpointsController=function(_super){function DeleteServiceEndpointsController($scope,$location,$rootScope,resourceManager,dialog,notificationService,serviceEndpointUIService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$location=$location,this.$rootScope=$rootScope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.serviceEndpointUIService=serviceEndpointUIService,this.injectorService=injectorService,$scope.selectedSEPItems=dialog.options.data,$scope.callBackFn=dialog.options.callBackFn,$scope.titleText=resourceManager.getString("ui","ms_deleteServiceEndpoints"),$scope.infoText=resourceManager.getString("ui","ms_deleteServiceEndpointsMessage"),$scope.close=function(){dialog.close()},$scope.onDeleteServiceEndpoints=function(){for(var deleteSEPIds=new Array,i=0;i<$scope.gridOptions.dataProvider.length;i++){var sepLE=$scope.gridOptions.dataProvider[i];deleteSEPIds.push(sepLE.id)}var resultHandler=function(){$scope.callBackFn(),$scope.close(),notificationService.displayMessage(resourceManager.getString("ui","ms_deleteSuccessful"),"")},notificationText=resourceManager.getString("ui","ms_deletingServiceEndpointsMsg",[_.size(deleteSEPIds)]);notificationService.displayMessage(notificationText,""),serviceEndpointUIService.deleteServiceEndpoints(deleteSEPIds).then(resultHandler)};var columns=[new GridColumn({dataIndex:"id",dataIndexMapping:"id",width:28,header:"",sortable:!0,resizable:!1,hidden:!1,type:"string",renderer:function(val,meta,record){return"<img src='"+ImageUtil.getIconForServiceEndpointType(record.raw)+"'/>"}}),new GridColumn({flex:2,align:"left",dataIndex:"name",dataIndexMapping:"name",mapping:"name",hidden:!1,sortable:!0,header:this.getString("ms_name")}),new GridColumn({flex:1,align:"left",dataIndex:"applicationComponentName",dataIndexMapping:"applicationComponentName",mapping:"applicationComponentName",hidden:!1,sortable:!0,header:this.getString("ms_tier")})],options=new GridOptions;options.columnProvider=columns,$scope.gridOptions=options,$scope.gridOptions.dataProvider=$scope.selectedSEPItems,$scope.gridOptions.multiSelect=!1}return __extends(DeleteServiceEndpointsController,_super),DeleteServiceEndpointsController.$inject=["$scope","$location","$rootScope","resourceManager","dialog","notificationService","serviceEndpointUiService","injectorService"],DeleteServiceEndpointsController}(ControllerBase);define("app/view/apm/ServiceEndpoint/DeleteServiceEndpointsController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/apm/ServiceEndpoint/ServiceEndpointListController",["require","exports","../PerformanceFilter/PerformanceFilterDirective","../PerformanceFilter/PerformanceFilterUtil","../PerformanceFilter/PerformanceFilterType"],function(require,exports,PerformanceFilterDirective,PerformanceFilterUtil,filterType){var ServiceEndpointListController=function(_super){function ServiceEndpointListController($scope,$http,$location,resourceManager,$log,notificationService,injectorService,navigationService,serviceEndpointUiService,serviceEndpointListViewService,applicationViewService,componentViewService,$dialog,dialogService,globalCacheService){function getMappedDataIndex(perfEntryName){return ServiceEndpointListController.PERFORMANCE_PREFIX+perfEntryName+ServiceEndpointListController.VALUE_POSTFIX}function filterSummary(shown){$scope.itemsShown=shown}function linkedTierNameRenderer(val){if(StringUtils.isNullOrEmptyString(val))return MetricUtil.NO_DATA_DISPLAY_STRING;var cssClass="adsCursorPointer blueText";return"<span class='"+cssClass+"'><p class='ads-ellipsis'>"+val+"</p></span>"}function getLabelForType(serviceEndpointListEntry){var label=resourceManager.getString("ui","ms_entryPoint_"+serviceEndpointListEntry.type);return _.isEmpty(label)?_.isNull(serviceEndpointListEntry.type)?"":serviceEndpointListEntry.type:label}var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$http=$http,this.$location=$location,this.resourceManager=resourceManager,this.$log=$log,this.notificationService=notificationService,this.injectorService=injectorService,this.navigationService=navigationService,this.serviceEndpointUiService=serviceEndpointUiService,this.serviceEndpointListViewService=serviceEndpointListViewService,this.applicationViewService=applicationViewService,this.componentViewService=componentViewService,this.$dialog=$dialog,this.dialogService=dialogService,this.globalCacheService=globalCacheService,this.mode=ServiceEndpointListController.MODE_APP,this.filtersOpen=!1,this.filterConfiguration={},this.fTypesOthers=filterType.FilterTypesOthers,this.showInProgressIndicator=!1,this.filterEntryPointTypesAndOthers=[],this.initLocationBar=function(){var appId=_this.$scope.applicationId,locationEntries=(_this.$scope.componentId,[]);_this.mode==ServiceEndpointListController.MODE_APP&&_this.appSEPListData?(locationEntries.push(ApplicationViewService.instance().getApplicationLocationBarEntryConfigFromNameAndId(appId,_this.appSEPListData.applicationEntity.name)),locationEntries.push({label:_this.resourceManager.getString("ui","ms_serviceEndpointsTitle")})):_this.mode==ServiceEndpointListController.MODE_TIER&&_this.tierSEPListViewData.applicationComponent&&(locationEntries.push(ApplicationViewService.instance().getApplicationLocationBarEntryConfigFromNameAndId(appId,_this.tierSEPListViewData.applicationEntity.name)),locationEntries.push(ApplicationViewService.instance().getAppServersLocationBarEntryConfig(appId)),locationEntries.push(ComponentViewService.instance().getComponentDashLocationBarEntryConfig(_this.tierSEPListViewData.applicationComponent))),_this.setLocationBarConfigData(locationEntries,!0)},this.toggleFiltersOpen=function(){_this.filtersOpen=!_this.filtersOpen,_this.filtersHeightChanged()},this.filtersHeightChanged=function(){ViewUtil.layoutAfterDigest()},this.setEntryPointTypesOnFilters=function(sepList){for(var i=0;i<sepList.length;i++)-1===_this.filterEntryPointTypesAndOthers.indexOf(sepList[i].type)&&_this.filterEntryPointTypesAndOthers.push(sepList[i].type)},this.adOnFilterChange=function(selected,adOptionalData){if(adOptionalData){switch(adOptionalData.name){case 0:_this.viewState.filterOptionStates[_this.filterConfiguration.withPerformanceDataLabel].show=adOptionalData.value,_this.setUserPreferenceValue(adOptionalData.value);break;case 1:case 2:_this.viewState.filterOptionStates[adOptionalData.name].value=adOptionalData.value,_this.$scope.updateFilter();break;case 3:case 4:_this.viewState.filterOptionStates[adOptionalData.name].text=adOptionalData.value,_this.$scope.updateFilter()}_this.filterConfiguration.entryPointTypes.forEach(function(item){adOptionalData.name===item.type&&(item.selected=adOptionalData.value,_this.viewState.filterOptionStates[adOptionalData.name].show=adOptionalData.value,_this.$scope.updateFilter())})}},this.filterFunction=function(item){var data=item.raw;if(_this.$scope.gridOptions.filterString){var value=data.name;if(value&&(value=value.toString().toLowerCase(),!value||-1===value.indexOf(_this.$scope.gridOptions.filterString.toLowerCase())))return!1}var onFilterEntryPointTypes=_this.sepFilter.getSelectedEntryPointTypes();if(onFilterEntryPointTypes.length>0){var typeToMatch=data.type;if(!Util.isOneOf(typeToMatch,onFilterEntryPointTypes))return!1
}if(_this.filterConfiguration.withPerformanceDataSelected){var numberOfCalls=Util.getProperty("performanceSummary.performanceStats.numberOfCalls.value",data),itemResponseTime=Util.getProperty("performanceSummary.performanceStats.averageResponseTime.value",data),filterResponseTime=_this.filterConfiguration.responseTimeFilterValue,itemCallsPerMinute=Util.getProperty("performanceSummary.performanceStats.callsPerMinute.value",data),filtercallsPerMinute=_this.filterConfiguration.callsPerMinuteValue;if(Util.isUndefOrNull(numberOfCalls)||isNaN(numberOfCalls)||0>=numberOfCalls)return!1;if(filterResponseTime||filtercallsPerMinute){if(filterResponseTime>=itemResponseTime)return!1;if(filtercallsPerMinute>=itemCallsPerMinute)return!1}}if(_this.filterConfiguration.searchString){var ServiceEndpointNames=_this.filterConfiguration.searchString.split(",");if(ServiceEndpointNames&&ServiceEndpointNames.length>0){var selectedNames=data.name;for(var sep in ServiceEndpointNames){var match=String(ServiceEndpointNames[sep]);if(match=match.trim(),match&&match.length>0&&StringUtils.containsString(selectedNames,match,!1))return!0}return!1}}if(_this.filterConfiguration.tierSearchString){var value=data.applicationComponentName;if(value&&(value=value.toString().toUpperCase(),!value||-1===value.indexOf(_this.filterConfiguration.tierSearchString.toUpperCase())))return!1}return!0},this.initializeViewState(),$scope.controller=this,this.initFilter(),$scope.viewDashboardContextMenuItem={text:$scope.controller.getString("ms_viewDashboard"),handler:function(){$scope.onViewDashboard()},disabled:!0},$scope.deleteServiceEndpointContextMenuItem={text:$scope.controller.getString("ms_deleteServiceEndpoints"),handler:function(){$scope.onDeleteServiceEndpoints()},disabled:!0},$scope.excludeServiceEndpointContextMenuItem={text:$scope.controller.getString("ms_excludeServiceEndpoints"),handler:function(){$scope.onExcludeServiceEndpoints()},disabled:!0},$scope.contextMenuOptions={disableDefaultContextMenu:!0,items:[$scope.viewDashboardContextMenuItem,$scope.deleteServiceEndpointContextMenuItem,$scope.excludeServiceEndpointContextMenuItem]},$scope.enableContextMenuItems=function(){for(var count=0;count<$scope.contextMenuOptions.items.length;count++)$scope.contextMenuOptions.items[count].disabled=$scope.isItemDisabled($scope.contextMenuOptions.items[count].text)},$scope.isItemDisabled=function(itemName){return itemName===$scope.controller.getString("ms_viewExcludedServiceEndpoints")?!1:itemName===$scope.controller.getString("ms_viewDashboard")?Util.isDefAndNotEmptyArray($scope.selectedSEPItems)&&$scope.selectedSEPItems.length>1:!Util.isDefAndNotEmptyArray($scope.selectedSEPItems)},$scope.getItemClass=function(itemName){var disabled=$scope.isItemDisabled(itemName);return"ads-mega-menu-list-item "+(disabled?"ads-mega-menu-list-item-disabled item-hover-disabled":"item-hover")},$scope.applicationId=new URLParams($location.path()).application(),$scope.componentId=new URLParams($location.path()).component(),$scope.setTierNameOnListElements=function(entries){entries.forEach(function(el){var key="Type:APPLICATION_COMPONENT, id:"+el.applicationComponentId.toString();el.applicationComponentName=key in $scope.serviceEndpointListData.entityMap?$scope.serviceEndpointListData.entityMap["Type:APPLICATION_COMPONENT, id:"+el.applicationComponentId.toString()].name:"Tier no longer exists."})},$scope.columns=[new GridColumn({dataIndex:ServiceEndpointListController.DATA_INDEX_TYPE,header:"",align:"center",width:50,resizable:!1,hidden:!1,type:"string",renderer:function(val,meta,record){return"<img src='"+ImageUtil.getIconForServiceEndpointType(record.raw)+"'/>"}}),new GridColumn({flex:2,align:"left",dataIndex:ServiceEndpointListController.DATA_INDEX_NAME,hidden:!1,sortable:!0,header:this.getString("ms_name"),renderer:GridColumn.renderStringWithTooltip}),new GridColumn({flex:.5,align:"right",dataIndex:ServiceEndpointListController.DATA_INDEX_RESPONSE_TIME,dataIndexMapping:getMappedDataIndex(ServiceEndpointListController.DATA_INDEX_RESPONSE_TIME),sortable:!0,type:"int",header:this.getString("ms_responseTime_ms"),renderer:GridColumn.itemRenderer}),new GridColumn({flex:.5,align:"right",dataIndex:ServiceEndpointListController.DATA_INDEX_NUMBER_OF_CALLS,dataIndexMapping:getMappedDataIndex(ServiceEndpointListController.DATA_INDEX_NUMBER_OF_CALLS),sortable:!0,type:"int",header:this.getString("ms_calls"),renderer:GridColumn.itemRenderer}),new GridColumn({flex:.5,align:"right",dataIndex:ServiceEndpointListController.DATA_INDEX_CALLS_PER_MINUTE,dataIndexMapping:getMappedDataIndex(ServiceEndpointListController.DATA_INDEX_CALLS_PER_MINUTE),sortable:!0,type:"int",header:this.getString("ms_callsPerMinute"),renderer:GridColumn.itemRenderer}),new GridColumn({flex:.5,align:"right",dataIndex:ServiceEndpointListController.DATA_INDEX_NUMBER_OF_ERRORS,dataIndexMapping:getMappedDataIndex(ServiceEndpointListController.DATA_INDEX_NUMBER_OF_ERRORS),sortable:!0,type:"int",header:this.getString("ms_errors"),renderer:GridColumn.itemRenderer}),new GridColumn({flex:.5,align:"right",dataIndex:ServiceEndpointListController.DATA_INDEX_ERRORS_PER_MINUTE,dataIndexMapping:getMappedDataIndex(ServiceEndpointListController.DATA_INDEX_ERRORS_PER_MINUTE),sortable:!0,type:"float",header:this.getString("ms_errorsPerMinute"),renderer:GridColumn.itemRenderer}),new GridColumn({flex:.5,align:"left",dataIndex:ServiceEndpointListController.DATA_INDEX_TYPE,sortable:!0,type:"string",header:this.getString("ms_type"),renderer:function(val,meta,record){return"<p>"+getLabelForType(record.raw)+"</p>"}}),new GridColumn({flex:.5,align:"left",dataIndex:ServiceEndpointListController.DATA_INDEX_APP_COMPONENT_NAME,sortable:!0,type:"string",header:this.getString("ms_tier"),hidden:!!$scope.componentId,renderer:linkedTierNameRenderer})];for(var itr=0;itr<$scope.columns.length;itr++){var col=$scope.columns[itr];col.name=col.dataIndex,col.menuDisabled=!0,col.hideable=!0,col.text=col.header,col.hasOwnProperty("type")||(col.type="string"),col.headerAttributes={"class":"btGridHeaderCell",style:""},col.align&&(col.headerAttributes.style+="text-align:"+col.align+";")}var gridOptions=new GridOptions;gridOptions.compileRenderers=!1,gridOptions.useBufferedRenderer=!0,gridOptions.useDataLoadReader=!0,gridOptions.columnProvider=$scope.columns,gridOptions.multiSelect=!0,gridOptions.filterFunction=this.filterFunction,gridOptions.stateful=!0,gridOptions.stateId="ServiceEndpintList-stateId",$scope.gridOptions=gridOptions,gridOptions.filterSummaryFunction=filterSummary,$scope.updateFilter=function(){$scope.gridOptions.updateFilter&&$scope.gridOptions.updateFilter(),ViewUtil.safeApply(_this.$scope)},$scope.refreshGrid=function(){$scope.fetchData()},$scope.viewComponentTab=function(tab){serviceEndpointListViewService.viewComponentTab(tab)},$scope.initListView=function(){_this.showInProgressIndicator=!0;var serviceEndpointListDataPromise=$scope.fetchData(),initializeView=function(response){$scope.componentName=_this.getString("ms_serviceEndpointsTitle"),response.serviceEndpointListEntries&&($scope.gridOptions.dataProvider=response.serviceEndpointListEntries,$scope.itemsShown=response.serviceEndpointListEntries.length),$scope.timeRangeUrlParam=new URLParams($location.path()).timeRange(),$scope.applicationId&&$scope.componentId?(_this.mode=ServiceEndpointListController.MODE_TIER,_this.tierSEPListViewData=response,$scope.numberOfNodes=response.applicationComponent.numberOfApplicationComponentNodes,$scope.componentType=response.applicationComponent.componentType.name,$scope.applicationName=response.applicationComponent.name,$scope.componentTabs=componentViewService.getComponentNavigationTabs($scope.applicationId,response.applicationComponent,ComponentViewService.Tabs.SERVICE_ENDPOINTS)):(_this.appSEPListData=response,_this.mode=ServiceEndpointListController.MODE_APP,$scope.applicationName=response.applicationEntity.name,$scope.setTierNameOnListElements(response.serviceEndpointListEntries)),_this.setEntryPointTypesOnFilters(response.serviceEndpointListEntries),_this.filterConfiguration.entryPointTypes=PerformanceFilterUtil.PerformanceFilterUtil.createTransactionEntryPointTypeFilters(_this.filterEntryPointTypesAndOthers,_this.viewState),_this.initLocationBar()};serviceEndpointListDataPromise.then(initializeView)},$scope.fetchData=function(){var serviceEndpointListDataPromise;if(_this.showInProgressIndicator=!0,$scope.timeRangeUrlParam=new URLParams($location.path()).timeRange(),$scope.applicationId&&$scope.componentId){$scope.mode=ServiceEndpointListController.MODE_TIER;var resultHandler=function(response){var serviceEndpointListViewData=serviceEndpointUiService.getServiceEndpointListViewData_response(response),serviceEndpointListEntries=serviceEndpointListViewData.serviceEndpointListEntries;_this.tierSEPListViewData=serviceEndpointListViewData,serviceEndpointListEntries&&($scope.gridOptions.dataProvider=serviceEndpointListViewData.serviceEndpointListEntries,$scope.itemsShown=serviceEndpointListEntries.length),$scope.componentType=_this.tierSEPListViewData.applicationComponent.componentType.name,$scope.componentTabs=componentViewService.getComponentNavigationTabs($scope.applicationId,serviceEndpointListViewData.applicationComponent,ComponentViewService.Tabs.SERVICE_ENDPOINTS)};serviceEndpointListDataPromise=serviceEndpointUiService.getServiceEndpointListViewData(parseInt($scope.applicationId),parseInt($scope.componentId),$scope.timeRangeUrlParam),serviceEndpointListDataPromise.then(resultHandler).finally(function(){_this.showInProgressIndicator=!1})}else{var successHandler=function(response){var serviceEndpointListData=serviceEndpointUiService.getServiceEndpointListData2_response(response);$scope.serviceEndpointListData=serviceEndpointListData;var serviceEndpointListEntries=serviceEndpointListData.serviceEndpointListEntries;serviceEndpointListEntries&&($scope.setTierNameOnListElements(serviceEndpointListEntries),$scope.gridOptions.dataProvider=serviceEndpointListEntries,$scope.itemsShown=serviceEndpointListEntries.length)};serviceEndpointListDataPromise=serviceEndpointUiService.getServiceEndpointListData2(parseInt($scope.applicationId),parseInt($scope.applicationId),EntityType.APPLICATION,$scope.timeRangeUrlParam),serviceEndpointListDataPromise.then(successHandler).finally(function(){_this.showInProgressIndicator=!1})}return serviceEndpointListDataPromise},$scope.$on(TimeRangeService.UEV_TIME_RANGE_CHANGE_TR_SERVICE,function(){$scope.fetchData()}),$scope.$on(TimeRangeService.TIMERANGE_AUTOREFRESH_EVENT,function(){ADLoggerService.info("ServiceEndpointController got the TimeRangeService.TIMERANGE_AUTOREFRESH_EVENT event; fetching data"),$scope.fetchData()}),$scope.onSEPListGridClick=function(event){if($scope.selectedServiceEndpoint=event.raw,event.columnIndex>-1)switch($scope.columns[event.columnIndex].dataIndex){case"applicationComponentName":componentViewService.viewComponent($scope.applicationId,$scope.selectedServiceEndpoint.applicationComponentId)}},$scope.onSEPListGridDoubleClick=function(event){var serviceEndpointListEntry=event.raw;ADLoggerService.log("ServiceEndpointListController.onSEPListGridDoubleClick Debug: Current sepId is "+serviceEndpointListEntry.id),serviceEndpointListViewService.viewServiceEndpointDashboard($scope.applicationId,$scope.selectedServiceEndpoint.applicationComponentId,$scope.selectedServiceEndpoint.id)},$scope.onViewDashboard=function(){$scope.selectedServiceEndpoint&&serviceEndpointListViewService.viewServiceEndpointDashboard($scope.applicationId,$scope.selectedServiceEndpoint.applicationComponentId,$scope.selectedServiceEndpoint.id)},$scope.onConfigure=function(){serviceEndpointListViewService.viewServiceEndpointConfigure($scope.applicationId)},$scope.onDeleteServiceEndpoints=function(){require(["app/view/apm/ServiceEndpoint/DeleteServiceEndpointsController"],function(){var opts={backdrop:!0,keyboard:!0,controller:DeleteServiceEndpointsController,templateUrl:"app/view/apm/ServiceEndpoint/DeleteServiceEndpoints.html",dialogClass:"modal",data:$scope.selectedSEPItems||{},callBackFn:$scope.refreshGrid},dlg=$dialog.dialog(opts);dlg.open()})},$scope.onExcludeServiceEndpoints=function(){_this.dialogService.showDialog("","app/view/apm/ServiceEndpoint/excludeServiceEndpoint/ExcludeServiceEndpointController","app/view/apm/ServiceEndpoint/excludeServiceEndpoint/ExcludeServiceEndpointView.html",$scope.selectedSEPItems).then(function(modal){modal.result.then(function(){$scope.refreshGrid()})})},$scope.onViewExcludedServiceEndpoints=function(){_this.serviceEndpointUiService.getExcludedServiceEndpointListData(parseInt($scope.applicationId),parseInt($scope.applicationId),EntityType.APPLICATION,$scope.timeRangeUrlParam).then(function(excludedServiceEndpointListData){var serviceEndpointListEntries=excludedServiceEndpointListData?excludedServiceEndpointListData.serviceEndpointListEntries:[];$scope.setTierNameOnListElements(serviceEndpointListEntries),_this.dialogService.showDialog("","app/view/apm/ServiceEndpoint/viewExcludedServiceEndpoint/ViewExcludedServiceEndpointController","app/view/apm/ServiceEndpoint/viewExcludedServiceEndpoint/ViewExcludedServiceEndpointView.html",serviceEndpointListEntries).then(function(modal){modal.result.then(function(){$scope.refreshGrid()})})})},$scope.onSelectionChange=function(event){$scope.selectedSEPItems=[];for(var i=0;i<event.selected.items.length;i++){var sepLI=event.selected.items[i].raw;$scope.selectedSEPItems.push(sepLI)}$scope.enableContextMenuItems()},$scope.selectedServiceEndpoint=null,$scope.locationEntries=null,$scope.initListView()}return __extends(ServiceEndpointListController,_super),ServiceEndpointListController.prototype.initializeViewState=function(){this.globalCacheService["ServiceEndpoint.viewState"]?this.viewState=this.globalCacheService["ServiceEndpoint.viewState"]:(this.viewState=PerformanceFilterUtil.ListViewState.getDefaultViewState(),this.globalCacheService["ServiceEndpoint.viewState"]=this.viewState)},ServiceEndpointListController.prototype.initFilter=function(){var configurations={};configurations.withPerformanceDataLabel=this.getString("ms_service_endpoint_with_performance_data"),configurations.withPerformanceDataSelected=UserService.instance().getUserPreferenceBooleanValue(UserService.SHOW_ONLY_SEP_WITH_PERF_DATA,!0),configurations.searchStringPrompt=this.getString("ms_serviceEndPointSearchStringPrompt"),configurations.searchStringLabel=this.getString("ms_serviceEndPointSearchStringLabel"),configurations.filtersTypeOthersVisible=!1,this.sepFilter=new PerformanceFilterUtil.PerformanceFilterUtil(configurations),this.filterConfiguration=this.sepFilter.initFilter(this.viewState)},ServiceEndpointListController.prototype.setUserPreferenceValue=function(newValue){var _this=this;this.$scope.updateFilter(),this.setUserPreferencePromise||(this.setUserPreferencePromise=UserService.instance().setUserPreferenceValue(UserService.SHOW_ONLY_SEP_WITH_PERF_DATA,newValue.toString()).then(function(response){var responseAsBoolean=Util.parseBoolean(response),currentValue=_this.filterConfiguration.withPerformanceDataSelected;return _this.setUserPreferencePromise=null,responseAsBoolean!==currentValue&&_this.setUserPreferenceValue(currentValue),response},function(){_this.setUserPreferencePromise=null}))},ServiceEndpointListController.MODE_APP="MODE_APP",ServiceEndpointListController.MODE_TIER="MODE_TIER",ServiceEndpointListController.JAVA_TIERS="JAVA_TIERS",ServiceEndpointListController.DOT_NET_TIERS="DOT_NET_TIERS",ServiceEndpointListController.$inject=["$scope","$http","$location","resourceManager","$log","notificationService","injectorService","navigationService","serviceEndpointUiService","serviceEndpointListViewService","applicationViewService","componentViewService","$dialog","dialogService","globalCacheService"],ServiceEndpointListController.DATA_INDEX_NAME="name",ServiceEndpointListController.PERFORMANCE_PREFIX="performanceSummary.performanceStats.",ServiceEndpointListController.VALUE_POSTFIX=".value",ServiceEndpointListController.DATA_INDEX_RESPONSE_TIME="averageResponseTime",ServiceEndpointListController.DATA_INDEX_NUMBER_OF_CALLS="numberOfCalls",ServiceEndpointListController.DATA_INDEX_CALLS_PER_MINUTE="callsPerMinute",ServiceEndpointListController.DATA_INDEX_NUMBER_OF_ERRORS="numberOfErrors",ServiceEndpointListController.DATA_INDEX_ERRORS_PER_MINUTE="errorsPerMinute",ServiceEndpointListController.DATA_INDEX_TYPE="type",ServiceEndpointListController.DATA_INDEX_APP_COMPONENT_NAME="applicationComponentName",ServiceEndpointListController}(ControllerBase);exports.ServiceEndpointListController=ServiceEndpointListController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ServiceEndpointListViewService=function(_super){function ServiceEndpointListViewService($location,navigationService,notificationService,resourceManager){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager}return __extends(ServiceEndpointListViewService,_super),ServiceEndpointListViewService.instance=function(){return AngularUtil.getADInjector().get(ServiceEndpointListViewService.SERVICE_NAME)},ServiceEndpointListViewService.prototype.viewServiceEndpointListAppLevel=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_SERVICE_ENDPOINT_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},ServiceEndpointListViewService.prototype.viewServiceEndpointList=function(applicationId,componentId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_SERVICE_ENDPOINT_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.COMPONENT_ID,componentId),this.navigationService.navigateTo(params.toString())},ServiceEndpointListViewService.prototype.viewServiceEndpointDashboard=function(applicationId,componentId,serviceEndpointId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_SERVICE_ENDPOINT_DETAIL),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.COMPONENT_ID,componentId),params.setNumberParam(UrlConstants.SERVICE_ENDPOINT_ID,serviceEndpointId),this.navigationService.navigateTo(params.toString())},ServiceEndpointListViewService.prototype.viewComponentTab=function(tab){var params=this.getCurrentUrlParams();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_COMPONENT_MANAGER),params.setNumberParam(UrlConstants.TAB_ID,tab),ADLoggerService.log("Navigating to "+params.toString()),this.navigationService.navigateTo(params.toString())},ServiceEndpointListViewService.prototype.viewServiceEndpointConfigure=function(applicationId,componentId){void 0===componentId&&(componentId=-1);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_CONFIG_SERVICE_ENDPOINT_DETECTION),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),Util.isValidId(componentId)&&params.setNumberParam(UrlConstants.COMPONENT_ID,componentId),this.navigationService.navigateTo(params.toString())},ServiceEndpointListViewService.SERVICE_NAME="serviceEndpointListViewService",ServiceEndpointListViewService.$inject=["$location","navigationService","notificationService","resourceManager"],ServiceEndpointListViewService}(ViewServiceBase);appdynamicsModule.service("serviceEndpointListViewService",ServiceEndpointListViewService),define("app/view/apm/services/ServiceEndpointListViewService",function(){}),define("shared/components/validator/ValidateInteger",["require","exports"],function(){var ValidateIntegerDirective=function(){function ValidateIntegerDirective(){return{require:"ngModel",restrict:"A",link:function(scope,element,attrs,ctrl){ctrl.$validators.integer=function(modelValue,viewValue){return ctrl.$isEmpty(modelValue)?!0:ValidateIntegerDirective.INTEGER_REGEXP.test(viewValue)}}}}return ValidateIntegerDirective.INTEGER_REGEXP=/^\-?\d+$/,ValidateIntegerDirective}();return void adComponentsModule.directive(StringUtils.toCamelCase("ad-validate-integer"),ValidateIntegerDirective)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/apm/businessTransactions/btList/BTDiagnosticSessionController",["require","exports","shared/components/validator/ValidateInteger"],function(require,exports,ValidateInteger){var BTDiagnosticSessionController=function(_super){function BTDiagnosticSessionController($scope,$location,$rootScope,$modalInstance,dialogData,businessTransactionUIService){_super.call(this,$scope),this.$scope=$scope,this.$location=$location,this.$rootScope=$rootScope,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.businessTransactionUIService=businessTransactionUIService,this.typeIconRenderer=function(val,meta,record){return"<img src='"+ImageUtil.getIconForBusinessTransactionType(record.raw)+"'/>"},$scope.controller=this,this.init()}return __extends(BTDiagnosticSessionController,_super),BTDiagnosticSessionController.prototype.init=function(){this.selectedBTItems=this.dialogData;var btText="";btText=1===this.selectedBTItems.length?this.selectedBTItems[0].name:this.selectedBTItems.length.toString()+" "+this.getString("ms_businessTransactions"),this.headerText=this.getString("ms_startDiagnosticSessionModalTitleSingle",[btText]),this.infoText=this.getString("ms_startDiagnosticSessionOnSelectedBT"),this.snapshotRate=5,this.snapshotDuration=10;var columns=[new GridColumn({dataIndex:"id",dataIndexMapping:"id",width:28,header:"",sortable:!0,resizable:!1,hidden:!1,type:"string",renderer:this.typeIconRenderer}),new GridColumn({flex:2,align:"left",dataIndex:"name",dataIndexMapping:"name",mapping:"name",hidden:!1,sortable:!0,header:this.getString("ms_name")}),new GridColumn({flex:1,align:"left",dataIndex:"applicationComponentName",dataIndexMapping:"applicationComponentName",mapping:"applicationComponentName",hidden:!1,sortable:!0,header:this.getString("ms_tier")})],options=new GridOptions;options.columnProvider=columns,this.gridOptions=options,this.gridOptions.dataProvider=this.selectedBTItems,this.gridOptions.multiSelect=!1},BTDiagnosticSessionController.prototype.onCollectSnapshots=function(){for(var _this=this,snapshotBTIds=new Array,i=0;i<this.gridOptions.dataProvider.length;i++){var bt=this.gridOptions.dataProvider[i];snapshotBTIds.push(bt.id)}var resultHandler=function(){_this.$modalInstance.close(),_this.displayMessage(_this.getString("ms_diagnosticSessionSnapshotCollection",[_this.snapshotDuration,_this.snapshotRate]))};this.snapshotRate>10&&(this.snapshotRate=10),this.snapshotDuration>10&&(this.snapshotDuration=10),this.businessTransactionUIService.startDiagnosticSessionOnBTs(snapshotBTIds,this.snapshotDuration,this.snapshotRate).then(resultHandler)},BTDiagnosticSessionController.$inject=["$scope","$location","$rootScope","$modalInstance","dialogData","businessTransactionUiService"],BTDiagnosticSessionController}(ControllerBase);return BTDiagnosticSessionController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MachineSnapshotsController=function(_super){function MachineSnapshotsController($scope,$rootScope,$location,$timeout,resourceManager,notificationService,navigationService,timeRangeService,applicationUiService,applicationViewService,machineSnapshotUiService,injectorService,$dialog,dialogService,userUiService){function convertDateToString(v){var dateAsNumber=v;return dateAsNumber?DateTimeUtil.getDateTimeString(dateAsNumber):""}function onTimeRangeChange(){$scope.timeRangeUrlParam=timeRangeService.convertToPreferenceString(timeRangeService.getTimeRange(),"."),$scope.timeRangeSpecifier=timeRangeService.getTimeRange(),$scope.fetchMachineSnapshotSummaries()}function filterSummary(shown){$scope.filterSummaryString=resourceManager.getString("ui","ms_filterStatusMessage",[shown,$scope.gridOptions.dataProvider.length,""])}function filterFunction(item){var data=item.raw;if($scope.gridOptions.filterString){var value=data.machineName;if(value&&(!value||-1==value.indexOf($scope.gridOptions.filterString.toString())))return!1}return!0}_super.call(this,$scope,$rootScope,$location,resourceManager,notificationService,injectorService,applicationViewService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.navigationService=navigationService,this.timeRangeService=timeRangeService,this.applicationUiService=applicationUiService,this.applicationViewService=applicationViewService,this.machineSnapshotUiService=machineSnapshotUiService,this.injectorService=injectorService,this.dialogService=dialogService,this.userUiService=userUiService,$scope.controller=this,$scope.filterOptions={isPeriodicEvent:!1,isCPUEvent:!1,isIISAppPoolEvent:!1,isMemoryEvent:!1,isArchivedOnly:!1,isArchivedOpen:!0,isMachinesOpen:!0,isMachineSnapshotTypeOpen:!0},$scope.showFilters=!1,$scope.msFilters={},$scope.msFilters.snapshotTypes=[],$scope.msFilters.policyEventTypes=[],$scope.selectedMachineSnapshots=[],$scope.applicationId=this.getApplicationIdFromUrl(),applicationUiService.getApplicationById($scope.applicationId).then(function(response){$scope.controller.application=applicationUiService.getApplicationById_response(response),$scope.applicationName=$scope.controller.application?$scope.controller.application.name:"",$scope.controller.setupLocationBar()}),ViewUtil.setContentAreaHeight($scope,$timeout,!1),$scope.toggleFilters=function(){$scope.showFilters=!$scope.showFilters},$scope.$watch("showFilters",function(){window.setTimeout(function(){$scope.$broadcast("layoutChanged")},1)}),$scope.$watch("filterOptions.isMachinesOpen",function(){window.setTimeout(function(){$scope.$broadcast("layoutChanged")},1)}),$scope.dateRenderer=function(v){return convertDateToString(v)},$scope.cpuRenderer=function(val,meta,record){var machineSummary=record.raw;return machineSummary.snapshotType==MachineSnapshotType.POLICY_TRIGGERED&&machineSummary.policyEventType===MachineSnapshotPolicyEventType.CPU?"<span class='redText'>"+val.toString()+"</span>":val},$scope.memoryRenderer=function(val,meta,record){var machineSummary=record.raw;return machineSummary.snapshotType==MachineSnapshotType.POLICY_TRIGGERED&&machineSummary.policyEventType===MachineSnapshotPolicyEventType.RAM?"<span class='redText'>"+val.toString()+"</span>":val},$scope.snapshotTriggerRenderer=function(val,meta,record){var triggerText=resourceManager.getString("ui","ms_PeriodicEventText");if(val==MachineSnapshotType.POLICY_TRIGGERED){var machineSummary=record.raw;switch(machineSummary.policyEventType){case MachineSnapshotPolicyEventType.CPU:triggerText=resourceManager.getString("ui","ms_CPUEventText");break;case MachineSnapshotPolicyEventType.RAM:triggerText=resourceManager.getString("ui","ms_MemoryEventText");break;case MachineSnapshotPolicyEventType.IIS:triggerText=resourceManager.getString("ui","ms_IISEventText")}}return triggerText},$scope.populateFiltersFromForm=function(){$scope.msFilters.applicationId=$scope.applicationId,$scope.msFilters.archived=$scope.filterOptions.isArchivedOnly,$scope.msFilters.machineIds=[],$scope.msFilters.snapshotTypes=[],$scope.msFilters.policyEventTypes=[],$scope.selectedMachinesGridOptions&&_.forEach($scope.selectedMachinesGridOptions.dataProvider,function(item){$scope.msFilters.machineIds.push(item.id)}),$scope.filterOptions.isPeriodicEvent&&$scope.msFilters.snapshotTypes.push(MachineSnapshotType.PERIODIC),($scope.filterOptions.isCPUEvent||$scope.filterOptions.isIISAppPoolEvent||$scope.filterOptions.isMemoryEvent)&&$scope.msFilters.snapshotTypes.push(MachineSnapshotType.POLICY_TRIGGERED),$scope.filterOptions.isCPUEvent&&$scope.msFilters.policyEventTypes.push(MachineSnapshotPolicyEventType.CPU),$scope.filterOptions.isMemoryEvent&&$scope.msFilters.policyEventTypes.push(MachineSnapshotPolicyEventType.RAM),$scope.filterOptions.isIISAppPoolEvent&&$scope.msFilters.policyEventTypes.push(MachineSnapshotPolicyEventType.IIS),$scope.msFilters.rangeSpecifier=$scope.timeRangeSpecifier},$scope.fetchMachineSnapshotSummaries=function(){var resultHandler=function(response){var machinesnapshotSummaryList=machineSnapshotUiService.getMachineSnaphotDataSummaries_response(response);$scope.gridOptions.dataProvider=machinesnapshotSummaryList,$scope.gridOptions.dataProvider=angular.copy($scope.gridOptions.dataProvider)};$scope.msFilters=null,$scope.msFilters={},$scope.gridOptions.dataProvider=[],$scope.gridOptions.multiSelect=!0,$scope.populateFiltersFromForm(),machineSnapshotUiService.getMachineSnaphotDataSummaries($scope.msFilters).then(resultHandler)};var columns=[new GridColumn({flex:.75,dataIndex:"controllerTime",shown:!0,header:resourceManager.getString("ui","ms_timestamp"),align:"left",renderer:$scope.dateRenderer}),new GridColumn({flex:.75,dataIndex:"machineName",shown:!0,header:resourceManager.getString("ui","ms_machineName"),align:"left"}),new GridColumn({flex:1.25,dataIndex:"snapshotType",shown:!0,header:resourceManager.getString("ui","ms_SnapshotTrigger"),align:"left",renderer:$scope.snapshotTriggerRenderer}),new GridColumn({flex:.25,dataIndex:"cpuUsage",shown:!0,header:resourceManager.getString("ui","ms_CPUPercent"),align:"left",renderer:$scope.cpuRenderer}),new GridColumn({flex:.25,dataIndex:"memoryUsage",shown:!0,header:resourceManager.getString("ui","ms_MemoryPercent"),align:"left",renderer:$scope.memoryRenderer}),new GridColumn({flex:.25,dataIndex:"archived",shown:!0,header:resourceManager.getString("ui","ms_archived"),align:"center",renderer:function(val){return val?'<img style="width:16px;" src="'+ImageUtil.snapshotArchived+'" title="'+this.getString("ms_machineSnapshotArchivedTooltip")+'"/>':null}})],gridOptions=new GridOptions;gridOptions.columnProvider=columns,gridOptions.filterSummaryFunction=filterSummary,gridOptions.filterFunction=filterFunction,$scope.gridOptions=gridOptions,$scope.$on(TimeRangeService.TIMERANGE_CHANGE_EVENT,onTimeRangeChange),onTimeRangeChange(null,timeRangeService.getTimeRange());var machineListColumns=[new GridColumn({width:"100%",align:"left",dataIndex:"hostName",header:this.getString("ms_name")})];$scope.allMachinesGridOptions=new GridOptions,$scope.allMachinesGridOptions.columnProvider=machineListColumns,$scope.allMachinesGridOptions.dataProvider=[],$scope.allMachinesGridOptions.multiSelect=!0,$scope.selectedMachinesGridOptions=new GridOptions,$scope.selectedMachinesGridOptions.columnProvider=machineListColumns,$scope.selectedMachinesGridOptions.dataProvider=[],$scope.selectedMachinesGridOptions.multiSelect=!0,$scope.selectedMachinesGridOptions.emptyText=this.getString("ms_noMachinesSelected"),$scope.$watch("$scope.isPeriodicEvent",$scope.populateFiltersFromForm),$scope.$watch("$scope.isMemoryEvent",$scope.populateFiltersFromForm),$scope.$watch("$scope.isCPUEvent",$scope.populateFiltersFromForm),$scope.$watch("$scope.isIISAppPoolEvent",$scope.populateFiltersFromForm),$scope.$watch("$scope.isArchivedOnly",$scope.populateFiltersFromForm),$scope.clearFilters=function(){$scope.filterOptions.isArchivedOnly=!1,$scope.filterOptions.isPeriodicEvent=!1,$scope.filterOptions.isCPUEvent=!1,$scope.filterOptions.isIISAppPoolEvent=!1,$scope.filterOptions.isMemoryEvent=!1,$scope.selectedMachinesGridOptions.dataProvider=[]},$scope.onMachineSnapshotGridChange=function(event){if($scope.selectedMachineSnapshots=[],event.selected.items.length>0)for(var i=0;i<event.selected.items.length;i++){var msDS=event.selected.items[i].raw;
$scope.selectedMachineSnapshots.push(msDS)}$scope.enableContextMenuItems()},$scope.onClickApp=function(){applicationViewService.viewApplicationDashboard($scope.applicationId)},$scope.onRefresh=function(){$scope.fetchMachineSnapshotSummaries()},$scope.getItemClass=function(itemName){var disabled=$scope.isItemDisabled(itemName);return"ads-mega-menu-list-item "+(disabled?"ads-mega-menu-list-item-disabled item-hover-disabled":"item-hover")},$scope.contextMenuOptions={disableDefaultContextMenu:!0,items:[{text:resourceManager.getString("ui","ms_archive"),handler:function(){$scope.onArchiveMachineSnapshots()},disabled:!$scope.selectedMachineSnapshots||0==$scope.selectedMachineSnapshots.length},{text:resourceManager.getString("ui","ms_menuItemDelete"),handler:function(){$scope.onDeleteMachineSnapshots()},disabled:!$scope.selectedMachineSnapshots||0==$scope.selectedMachineSnapshots.length}]},$scope.enableContextMenuItems=function(){for(var index=0;index<$scope.contextMenuOptions.items.length;index++)$scope.contextMenuOptions.items[index].disabled=$scope.isItemDisabled($scope.contextMenuOptions.items[index].text)},$scope.isItemDisabled=function(itemName){var isDisabled=!1,firstSelectedItem=null,enableArchive=!1;switch($scope.selectedMachineSnapshots&&(firstSelectedItem=$scope.selectedMachineSnapshots[0]),itemName){case resourceManager.getString("ui","ms_archive"):for(var i=0;i<$scope.selectedMachineSnapshots.length;i++){var machineSnapshot=$scope.selectedMachineSnapshots[i];if(!machineSnapshot.archived){enableArchive=!0;break}}isDisabled=!firstSelectedItem||!enableArchive;break;case resourceManager.getString("ui","ms_delete"):isDisabled=!firstSelectedItem}return isDisabled},$scope.onArchiveMachineSnapshots=function(){for(var archiveHandler=function(){notificationService.displayMessage("Selected Machine Snapshot(s) archived",""),$scope.fetchMachineSnapshotSummaries()},machineIds=[],timeRangeUrlParam=new URLParams($location.path()).timeRange(),i=0;i<$scope.selectedMachineSnapshots.length;i++){var msDS=$scope.selectedMachineSnapshots[i];msDS.archived||machineIds.push($scope.selectedMachineSnapshots[i].id)}machineIds.length>0&&machineSnapshotUiService.archiveMachineSnapshots(machineIds,timeRangeUrlParam).then(archiveHandler)},$scope.onDeleteMachineSnapshots=function(){for(var deleteHandler=function(){notificationService.displayMessage("Selected Machine Snapshot(s) deleted",""),$scope.fetchMachineSnapshotSummaries()},machineIds=[],i=(new URLParams($location.path()).timeRange(),0);i<$scope.selectedMachineSnapshots.length;i++){var msDS=$scope.selectedMachineSnapshots[i];msDS.archived||machineIds.push($scope.selectedMachineSnapshots[i].id)}if(machineIds.length>0){var onOK=function(){machineSnapshotUiService.deleteMachineSnapshots(machineIds).then(deleteHandler)};dialogService.showConfirmation(resourceManager.getString("ui","ms_DeleteSnapshots"),resourceManager.getString("ui","ms_DeleteSnapshotsText"),onOK)}},$scope.onMachineSnapshotGridDoubleClick=function(){var machineDataResultHandler=function(response){var machineSnapshotData=machineSnapshotUiService.getMachineSnapshotData_response(response);if(machineSnapshotData){var opts={backdrop:!0,keyboard:!0,controller:MachineSnapshotDataController,templateUrl:"app/view/apm/machineSnapshots/MachineSnapshotData.html",dialogClass:"modal",data:machineSnapshotData||{},summary:$scope.selectedMachineSnapshots[0],timestampString:convertDateToString($scope.selectedMachineSnapshots[0].controllerTime),callBkFn:$scope.fetchMachineSnapshotSummaries},dlg=$dialog.dialog(opts);dlg.open()}};machineSnapshotUiService.getMachineSnapshotData($scope.selectedMachineSnapshots[0].id,$scope.timeRangeUrlParam).then(machineDataResultHandler)},$scope.onViewTopBts=function(){applicationViewService.viewAppTopBts($scope.applicationId)},$scope.onViewSnapshots=function(){applicationViewService.viewApplicationDashboardLocation(NavigationDataConstants.APP_ALL_SNAPSHOT_LIST,$scope.applicationId)},$scope.onViewTransactionAnalysis=function(){applicationViewService.viewApplicationDashboardLocation(NavigationDataConstants.APP_TX_SCORE,$scope.applicationId)},$scope.getAccordionStyle=function(){var availHeight=$(window).height()-$(".adsNavContainerDiv").height()-$(".headerSection").outerHeight()-$(".ads-top-menu-bar-container-row").outerHeight()-20;return{"max-height":availHeight,"overflow-y":"auto"}}}return __extends(MachineSnapshotsController,_super),MachineSnapshotsController.prototype.setupLocationBar=function(){var _this=this;DashboardUtil.createLocationBarEntriesForDashboard(this.getString("ms_machineSnapshotsTabTitle")).then(function(response){_this.locationEntries=response.locationEntries,_this.setLocationBarConfig(_this.createLocationBarConfigData(_this.locationEntries,!0,_this.helpLink)),_this.navigationTabs=response.navTabs})},MachineSnapshotsController.prototype.getSelectableMachines=function(){var _this=this;this.$scope.allMachinesGridOptions.loading=!0,this.machineSnapshotUiService.getMachineAgents(this.$scope.applicationId).then(function(results){var machines=results;Util.removeWhere(machines,_this.$scope.selectedMachinesGridOptions.dataProvider),_this.applyMachinesResponseToViewState(machines),_this.$scope.allMachinesGridOptions.loading=!1})},MachineSnapshotsController.prototype.applyMachinesResponseToViewState=function(machines){this.$scope.allMachinesGridOptions.dataProvider=_.map(machines,function(machine){return{hostName:machine.hostName,id:machine.machineId}})},MachineSnapshotsController.$inject=["$scope","$rootScope","$location","$timeout","resourceManager","notificationService","navigationService","timeRangeService","applicationUiService","applicationViewService","machineSnapshotUiService","injectorService","$dialog","dialogService","userUiService"],MachineSnapshotsController}(MainAppViewControllerBase);define("app/view/apm/machineSnapshots/MachineSnapshotsController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AppPoolRequestController=function(_super){function AppPoolRequestController($scope,$location,$rootScope,resourceManager,dialog,notificationService,businessTransactionUIService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$location=$location,this.$rootScope=$rootScope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.businessTransactionUIService=businessTransactionUIService,this.injectorService=injectorService,$scope.appPoolRequest=dialog.options.data,$scope.titleText=resourceManager.getString("ui","ms_ExecutingRequests"),$scope.infoText=resourceManager.getString("ui","ms_ExecutingRequestText"),$scope.close=function(){dialog.close()};var columns=[new GridColumn({flex:2,align:"left",dataIndex:"url",dataIndexMapping:"url",mapping:"url",hidden:!1,sortable:!0,header:this.getString("ms_URL")}),new GridColumn({flex:1,align:"left",dataIndex:"verb",dataIndexMapping:"verb",mapping:"verb",hidden:!1,sortable:!0,header:this.getString("ms_method")}),new GridColumn({flex:1,align:"left",dataIndex:"timeElapsed",dataIndexMapping:"timeElapsed",mapping:"timeElapsed",hidden:!1,sortable:!0,header:this.getString("ms_timeElapsed")})],options=new GridOptions;options.columnProvider=columns,$scope.gridOptions=options,$scope.gridOptions.dataProvider=$scope.appPoolRequest,$scope.gridOptions.multiSelect=!1}return __extends(AppPoolRequestController,_super),AppPoolRequestController.$inject=["$scope","$location","$rootScope","resourceManager","dialog","notificationService","businessTransactionUiService","injectorService"],AppPoolRequestController}(ControllerBase);define("app/view/apm/machineSnapshots/AppPoolRequestController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MachineSnapshotDataController=function(_super){function MachineSnapshotDataController($scope,$location,$rootScope,resourceManager,dialog,$dialog,notificationService,machineSnapshotUiService,snapshotUiService,timeRangeService,injectorService,snapshotViewService){function filterFunction_processes(item){var data=item.raw;if($scope.gridOptions_processes.filterString){var value=data.processName;if(value&&(!value||-1==value.indexOf($scope.gridOptions_processes.filterString.toString())))return!1}return!0}function filterSummary_processes(shown){$scope.itemsShown_processes=shown}function filterFunction_appPools(item){var data=item.raw;if($scope.gridOptions_appPools.filterString){var value=data.name;if(value&&(!value||-1==value.indexOf($scope.gridOptions_appPools.filterString.toString())))return!1}return!0}function filterSummary_appPools(shown){$scope.itemsShown_appPools=shown}function filterFunction_btSnapshots(item){var data=item.raw;if($scope.gridOptions_btSnapshots.filterString){var value=data.name;if(value&&(!value||-1==value.indexOf($scope.gridOptions_btSnapshots.filterString.toString())))return!1}return!0}function filterSummary_btSnapshots(shown){$scope.itemsShown_btSnapshots=shown}_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$location=$location,this.$rootScope=$rootScope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.machineSnapshotUiService=machineSnapshotUiService,this.snapshotUiService=snapshotUiService,this.timeRangeService=timeRangeService,this.injectorService=injectorService,this.snapshotViewService=snapshotViewService,this.TAB_PROCESSES=0,this.TAB_IIS_APP_POOLS=1,this.TAB_BT_SNAPSHOTS=2,$scope.controller=this,$scope.machineSnapshotData=dialog.options.data,$scope.snapshotTimeReadable=dialog.options.timestampString,$scope.machineSnapshotSummary=dialog.options.summary,$scope.snapshotType=$scope.machineSnapshotSummary.snapshotType,$scope.callBackFn=dialog.options.callBkFn,$scope.machineSnapshotSummary.snapshotType==MachineSnapshotType.POLICY_TRIGGERED&&($scope.snapshotType=$scope.machineSnapshotSummary.policyEventType,$scope.machineSnapshotSummary.policyEventType==MachineSnapshotPolicyEventType.RAM&&($scope.snapshotType="MEMORY")),$scope.timeRangeInMinutes=5,$scope.isSnapshotArchived=!1,$scope.close=function(){dialog.close(),$scope.isSnapshotArchived&&$scope.callBackFn()},this.selectedTab=this.TAB_PROCESSES;var columns_processes=[new GridColumn({flex:.5,align:"left",dataIndex:"processId",dataIndexMapping:"processId",mapping:"processId",hidden:!1,sortable:!0,header:this.getString("ms_processId")}),new GridColumn({flex:1,align:"left",dataIndex:"processName",dataIndexMapping:"processName",mapping:"processName",hidden:!1,sortable:!0,header:this.getString("ms_processName")}),new GridColumn({flex:2,align:"left",dataIndex:"description",dataIndexMapping:"description",mapping:"description",hidden:!1,sortable:!0,header:this.getString("ms_processDesc")}),new GridColumn({flex:.5,align:"left",dataIndex:"cpuUsage",dataIndexMapping:"cpuUsage",mapping:"cpuUsage",hidden:!1,sortable:!0,header:this.getString("ms_CPUPercent")}),new GridColumn({flex:.5,align:"left",dataIndex:"memoryUsage",dataIndexMapping:"memoryUsage",mapping:"memoryUsage",hidden:!1,sortable:!0,header:this.getString("ms_Memory"),renderer:function(value){return Util.getNumberToDecimalPrecision(value/1048576)}})],options_processes=new GridOptions;options_processes.columnProvider=columns_processes,options_processes.filterFunction=filterFunction_processes,options_processes.filterSummaryFunction=filterSummary_processes,$scope.gridOptions_processes=options_processes,$scope.gridOptions_processes.dataProvider=$scope.machineSnapshotData.machineSnapshotContents.dotNetMachineSnapshotState.processInfos,$scope.gridOptions_processes.multiSelect=!1;var columns_appPools=[new GridColumn({flex:2,align:"left",dataIndex:"name",dataIndexMapping:"name",mapping:"name",hidden:!1,sortable:!0,header:this.getString("ms_appPoolName")}),new GridColumn({flex:1,align:"left",dataIndex:"arrivalRate",dataIndexMapping:"arrivalRate",mapping:"arrivalRate",hidden:!1,sortable:!0,header:this.getString("ms_arrivalRate")}),new GridColumn({flex:1,align:"left",dataIndex:"requestsPerSec",dataIndexMapping:"requestsPerSec",mapping:"requestsPerSec",hidden:!1,sortable:!0,header:this.getString("ms_requestsProcessed")}),new GridColumn({flex:1,align:"left",dataIndex:"maxQueueItemAge",dataIndexMapping:"maxQueueItemAge",mapping:"maxQueueItemAge",hidden:!1,sortable:!0,header:this.getString("ms_maxQueueItemAge")})],options_appPools=new GridOptions;options_appPools.columnProvider=columns_appPools,options_appPools.emptyText=resourceManager.getString("ui","ms_noDataAvailable"),options_appPools.filterFunction=filterFunction_appPools,options_appPools.filterSummaryFunction=filterSummary_appPools,$scope.gridOptions_appPools=options_appPools,$scope.gridOptions_appPools.dataProvider=$scope.machineSnapshotData.machineSnapshotContents.dotNetMachineSnapshotState.poolInfos,$scope.gridOptions_appPools.multiSelect=!1,$scope.onAppPoolDoubleClick=function(event){require(["app/view/apm/machineSnapshots/AppPoolRequestController"],function(){var appPoolInfo=event.raw,appPoolRequest=appPoolInfo.executingRequests,opts={backdrop:!0,keyboard:!0,controller:AppPoolRequestController,templateUrl:"app/view/apm/machineSnapshots/AppPoolRequest.html",dialogClass:"modal",data:appPoolRequest||{}},dlg=$dialog.dialog(opts);dlg.open()})},$scope.experienceRenderer=function(val,meta,record){var rowData=record.raw;return rowData.userExperience?"<img src='"+ImageUtil.getRequestExperienceIconURL(rowData.userExperience)+"'/>":""},$scope.linkedItemRenderer=function(val){var cssClass="blueText adsUnderlineTextOnHover";return"<span style='cursor: pointer;' class='"+cssClass+"'>"+val.toString()+"</span>"},$scope.dateRenderer=function(dateAsNumber){return dateAsNumber?DateTimeUtil.getDateTimeString(dateAsNumber):""},$scope.snapshotCallGraphRenderer=function(val,meta,record){var partialCallGraphLocation=(record.raw,"images/objects/callGraph_partial_16.png"),fullCallGraphLocation="images/objects/callGraph_16.png";return val===!0?"<img src='"+fullCallGraphLocation+"'/>":val===!1?"<img src='"+partialCallGraphLocation+"'/>":""};var columns_btSnapshots=[new GridColumn({flex:.25,dataIndex:"userExperience",shown:!0,header:"Experience",align:"center",renderer:$scope.experienceRenderer}),new GridColumn({flex:.25,dataIndex:"fullCallgraph",shown:!0,header:"Call Graph",align:"center",renderer:$scope.snapshotCallGraphRenderer}),new GridColumn({flex:.75,dataIndex:"serverStartTime",shown:!0,header:this.getString("ms_timestamp"),align:"left",renderer:$scope.dateRenderer}),new GridColumn({flex:.5,dataIndex:"timeTakenInMilliSecs",shown:!0,header:this.getString("ms_exeTimeMs"),align:"left",renderer:null}),new GridColumn({flex:1,dataIndex:"url",shown:!0,header:this.getString("ms_URL"),align:"left",renderer:null}),new GridColumn({flex:1,dataIndex:"businessTransactionName",shown:!0,header:this.getString("ms_businessTransaction"),align:"left"}),new GridColumn({flex:.5,dataIndex:"applicationComponentName",shown:!0,header:this.getString("ms_tier"),align:"left"}),new GridColumn({flex:.5,dataIndex:"applicationComponentNodeName",shown:!0,header:this.getString("ms_node"),align:"left"})],appID=new URLParams($location.path()).application(),startTime=(parseInt(appID),new Date($scope.machineSnapshotSummary.controllerTime-$scope.timeRangeInMinutes*DateTimeUtil.MILLISEC_PER_MIN)),endTime=new Date($scope.machineSnapshotSummary.controllerTime+$scope.timeRangeInMinutes*DateTimeUtil.MILLISEC_PER_MIN),timeRange={type:TimeRangeSpecifierType.BETWEEN_TIMES,durationInMinutes:0,startTime:startTime,endTime:endTime};if(null==$scope.gridOptions_btSnapshots){var resultHandler=function(response){var appComponentNodeIds=machineSnapshotUiService.getAppComponentNodesForMachine_response(response);$scope.btSnapshotListData=$scope.getBTSnapshotListData(appComponentNodeIds),$scope.btSnapshotListData&&(options_btSnapshots.dataProvider=$scope.btSnapshotListData)},options_btSnapshots=new GridOptions;if(options_btSnapshots.columnProvider=columns_btSnapshots,options_btSnapshots.multiSelect=!1,options_btSnapshots.dataProvider=[],options_btSnapshots.filterFunction=filterFunction_btSnapshots,options_btSnapshots.filterSummaryFunction=filterSummary_btSnapshots,$scope.gridOptions_btSnapshots=options_btSnapshots,0==$scope.gridOptions_btSnapshots.dataProvider.length){machineSnapshotUiService.getAppComponentNodesForMachine($scope.machineSnapshotSummary.machineId).then(resultHandler)}}$scope.getBTSnapshotListData=function(appComponentNodeIds){var resultAppCompNodesHandler=function(response){$scope.btSnapshotListData=snapshotUiService.getRequestSegmentDataListItems_response(response),$scope.gridOptions_btSnapshots.dataProvider=$scope.btSnapshotListData},rsdf={};rsdf.applicationComponentNodeIds=appComponentNodeIds,rsdf.rangeSpecifier=timeRange,snapshotUiService.getRequestSegmentDataListItems(rsdf).then(resultAppCompNodesHandler)},$scope.onBTSnapshotsDoubleClick=function(event){$scope.close();var rsdListItem=event.raw;snapshotViewService.viewRequestSegmentData(rsdListItem)},$scope.onArchive=function(){if($scope.machineSnapshotSummary.archived)notificationService.displayMessage("Machine snapshot is already archived","");else{var archiveHandler=function(){notificationService.displayMessage("Machine Snapshot archived",""),$scope.isSnapshotArchived=!0},machineIds=[],timeRangeUrlParam=new URLParams($location.path()).timeRange();machineIds.push($scope.machineSnapshotSummary.id),machineSnapshotUiService.archiveMachineSnapshots(machineIds,timeRangeUrlParam).then(archiveHandler)}}}return __extends(MachineSnapshotDataController,_super),MachineSnapshotDataController.prototype.onSelectTab=function(tab){this.selectedTab=tab,this.updateFilterForTab()},MachineSnapshotDataController.prototype.updateFilterForTab=function(){var _this=this;switch(this.selectedTab){case this.TAB_PROCESSES:this.$scope.gridOptions_processes.filterString&&setTimeout(function(){_this.$scope.gridOptions_processes.updateFilter()},0);break;case this.TAB_IIS_APP_POOLS:this.$scope.gridOptions_appPools.filterString&&setTimeout(function(){_this.$scope.gridOptions_appPools.updateFilter()},0);break;case this.TAB_BT_SNAPSHOTS:this.$scope.gridOptions_btSnapshots.filterString&&setTimeout(function(){_this.$scope.gridOptions_btSnapshots.updateFilter()},0)}},MachineSnapshotDataController.$inject=["$scope","$location","$rootScope","resourceManager","dialog","$dialog","notificationService","machineSnapshotUiService","snapshotUiService","timeRangeService","injectorService","snapshotViewService"],MachineSnapshotDataController}(ControllerBase);define("app/view/apm/machineSnapshots/MachineSnapshotDataController",function(){});var ApmImageUtil=function(){function ApmImageUtil(){}return ApmImageUtil.getAgentTypeIcon=function(agentType,defaultValue){var agentTypeIcon="";switch(agentType){case AgentType.APP_AGENT:agentTypeIcon=ApmImageUtil.javaAgentTypeSvg;break;case AgentType.DOT_NET_APP_AGENT:agentTypeIcon=ApmImageUtil.dotNetAgentTypeSvg;break;case AgentType.PHP_APP_AGENT:agentTypeIcon=ApmImageUtil.phpAgentTypeSvg;break;case AgentType.NODEJS_APP_AGENT:agentTypeIcon=ApmImageUtil.nodeJsAgentTypeSvg;break;default:agentTypeIcon=StringUtils.isNullOrEmptyString(defaultValue)?ApmImageUtil.webAgentTypeSvg:defaultValue}return agentTypeIcon},ApmImageUtil.javaAgentTypeSvg="images/tierTypes/Java.svg",ApmImageUtil.dotNetAgentTypeSvg="images/tierTypes/dot_net.svg",ApmImageUtil.phpAgentTypeSvg="images/tierTypes/php.svg",ApmImageUtil.nodeJsAgentTypeSvg="images/tierTypes/node_js.svg",ApmImageUtil.webAgentTypeSvg="images/tierTypes/Web.svg",ApmImageUtil.informationPointListDefaultIcon="images/iconNavInformationPoints.png",ApmImageUtil}();define("app/view/apm/utils/ApmImageUtil",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BusinessTransactionUiService=function(_super){function BusinessTransactionUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(BusinessTransactionUiService,_super),BusinessTransactionUiService.instance=function(){return AngularUtil.getADInjector().get("businessTransactionUiService")},BusinessTransactionUiService.prototype.getBusinessTransactionDashboardGraphData=function(transactionId,timeRange){var path="restui/bt/dashboardGraphData/"+transactionId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBusinessTransactionDashboardGraphData",path,[transactionId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["callsPerMinuteData.dataTimeslices.startTime","errorsPerMinuteData.dataTimeslices.startTime","averageResponseTimeData.dataTimeslices.startTime","endToEndLatencyData.dataTimeslices.startTime","numOfSlowCallsData.dataTimeslices.startTime","numOfVerySlowCallsData.dataTimeslices.startTime","numOfStallsData.dataTimeslices.startTime","averageResponseTimeBaselineData.dataTimeslices.startTime","callsPerMinuteBaselineData.dataTimeslices.startTime"]),response})},BusinessTransactionUiService.prototype.getBusinessTransactionDashboardGraphData_response=function(response){return response},BusinessTransactionUiService.prototype.getPerformanceRequestStats=function(applicationId,entityType,entityId,timeRange){var path="restui/bt/performanceRequestStats?applicationId="+applicationId+"&entityType="+entityType+"&entityId="+entityId+"&time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getPerformanceRequestStats",path,[applicationId,entityType,entityId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getPerformanceRequestStats_response=function(response){return response},BusinessTransactionUiService.prototype.getBusinessTransactionCallGraphStats=function(transactionId,timeRange,baselineId){var path="restui/bt/businessTransactionCallGraphStats/"+transactionId+"?time-range="+timeRange+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBusinessTransactionCallGraphStats",path,[transactionId,timeRange,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getBusinessTransactionCallGraphStats_response=function(response){return response},BusinessTransactionUiService.prototype.getDashboardGraphDataForBTs=function(arg0,timeRange){var path="restui/bt/dashBoardGraphDataForBTs?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getDashboardGraphDataForBTs",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["callsPerMinuteData.dataTimeslices.startTime","errorsPerMinuteData.dataTimeslices.startTime","averageResponseTimeData.dataTimeslices.startTime","endToEndLatencyData.dataTimeslices.startTime","numOfSlowCallsData.dataTimeslices.startTime","numOfVerySlowCallsData.dataTimeslices.startTime","numOfStallsData.dataTimeslices.startTime","averageResponseTimeBaselineData.dataTimeslices.startTime","callsPerMinuteBaselineData.dataTimeslices.startTime"]),response})},BusinessTransactionUiService.prototype.getDashboardGraphDataForBTs_response=function(response){return response},BusinessTransactionUiService.prototype.getBTListViewData=function(applicationId,timeRange){var path="restui/bt/listViewData/"+applicationId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBTListViewData",path,[applicationId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getBTListViewData_useCache=function(applicationId,timeRange,forceReload){var _this=this;return void 0===forceReload&&(forceReload=!1),BusinessTransactionUiService.getBTListViewData_Cache||(BusinessTransactionUiService.getBTListViewData_Cache=new TimeBaseDataCache,BusinessTransactionUiService.getBTListViewData_Cache.fetchDataCallbackFn=function(params){return _this.getBTListViewData(params[0],params[1])}),BusinessTransactionUiService.getBTListViewData_Cache.get([applicationId,timeRange],forceReload)},BusinessTransactionUiService.prototype.getBTListViewData_response=function(response){return response},BusinessTransactionUiService.prototype.createBusinessTransactionGroup=function(arg0,applicationId,groupName){var path="restui/bt/createBusinessTransactionGroup?applicationId="+applicationId+"&groupName="+groupName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","createBusinessTransactionGroup",path,[arg0,applicationId,groupName]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.deleteBusinessTransactionGroup=function(arg0){var path="restui/bt/deleteBusinessTransactionGroup",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","deleteBusinessTransactionGroup",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getExcludedBusinessTransactions=function(applicationId){var path="restui/bt/getExcludedBusinessTransactions/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getExcludedBusinessTransactions",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getExcludedBusinessTransactions_response=function(response){return response},BusinessTransactionUiService.prototype.unexcludeBTs=function(arg0){var path="restui/bt/unexcludeBTs",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","unexcludeBTs",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.markBusinessTransactionsAsBackground=function(arg0,background){var path="restui/bt/markBusinessTransactionsAsBackground?background="+background,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","markBusinessTransactionsAsBackground",path,[arg0,background]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getBTObjects=function(arg0){var path="restui/bt/getBTObjects",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBTObjects",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getBTObjects_response=function(response){return response},BusinessTransactionUiService.prototype.startDiagnosticSessionOnBTs=function(arg0,duration,rate){var path="restui/bt/startDiagnosticSession?duration="+duration+"&rate="+rate,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","startDiagnosticSessionOnBTs",path,[arg0,duration,rate]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.renameBT=function(arg0,id){var path="restui/bt/renameBT?id="+id,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","renameBT",path,[arg0,id]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.excludeBTs=function(arg0){var path="restui/bt/excludeBTs",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","excludeBTs",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.deleteBTs=function(arg0){var path="restui/bt/deleteBTs",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","deleteBTs",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise
},BusinessTransactionUiService.prototype.addMembersToGroup=function(arg0,groupId){var path="restui/bt/addMembersToGroup?groupId="+groupId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","addMembersToGroup",path,[arg0,groupId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.removeMembersFromGroup=function(arg0,groupId){var path="restui/bt/removeMembersFromGroup?groupId="+groupId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","removeMembersFromGroup",path,[arg0,groupId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getBTListData=function(applicationId,timeRange){var path="restui/bt/list/"+applicationId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBTListData",path,[applicationId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getBTListData_response=function(response){return response},BusinessTransactionUiService.prototype.getBusinessTransactions=function(applicationId){var path="restui/bt/allBusinessTransactions/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBusinessTransactions",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn"]),response})},BusinessTransactionUiService.prototype.getBusinessTransactions_response=function(response){return response},BusinessTransactionUiService.prototype.isBTEnabledForGuidInjection=function(applicationId,btId){var path="restui/bt/isBTEnabledForGuidInjection/"+applicationId+"/"+btId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","isBTEnabledForGuidInjection",path,[applicationId,btId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.isBTEnabledForGuidInjection_response=function(response){return response},BusinessTransactionUiService.prototype.getBusinessTransactionsByIds=function(arg0,applicationId){var path="restui/bt/getBusinessTransactions?applicationId="+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBusinessTransactionsByIds",path,[arg0,applicationId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getBusinessTransactionsByIds_response=function(response){return response},BusinessTransactionUiService.prototype.getBTDashboardViewData=function(businessTransactionId){var path="restui/bt/businessTransaction/"+businessTransactionId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBTDashboardViewData",path,[businessTransactionId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["businessTransaction.createdOn","application.runningSince","application.createdOn","application.modifiedOn"]),response})},BusinessTransactionUiService.prototype.getBTDashboardViewData_response=function(response){return response},BusinessTransactionUiService.prototype.getBTComponentStats=function(componentId,timeRange){var path="restui/bt/componentStats?componentId="+componentId+"&time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBTComponentStats",path,[componentId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getBTComponentStats_response=function(response){return response},BusinessTransactionUiService.prototype.getBTSegmentLinkStats=function(componentId,targetType,targetId,timeRange){var path="restui/bt/linkStats?componentId="+componentId+"&targetType="+targetType+"&targetId="+targetId+"&time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBTSegmentLinkStats",path,[componentId,targetType,targetId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getBTSegmentLinkStats_response=function(response){return response},BusinessTransactionUiService.prototype.getBTNodeStats=function(componentId,btId,timeRange){var path="restui/bt/btNodeStats?componentId="+componentId+"&btId="+btId+"&time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBTNodeStats",path,[componentId,btId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getBTNodeStats_response=function(response){return response},BusinessTransactionUiService.prototype.getBTsWithAutoDiscoveredFlag=function(arg0){var path="restui/bt/getBTsWithAutoDiscoveredFlag",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBTsWithAutoDiscoveredFlag",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getBTsWithAutoDiscoveredFlag_response=function(response){return response},BusinessTransactionUiService.prototype.getBTListConfigPreference=function(){var path="restui/bt/getBTListConfigPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","getBTListConfigPreference",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.getBTListConfigPreference_response=function(response){return response},BusinessTransactionUiService.prototype.updateBTListConfigPreference=function(arg0){var path="restui/bt/updateBTListConfigPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","updateBTListConfigPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.updateBTListConfigPreference_response=function(response){return response},BusinessTransactionUiService.prototype.describe=function(){var path="restui/bt/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BusinessTransactionUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BusinessTransactionUiService.prototype.describe_response=function(response){return response},BusinessTransactionUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],BusinessTransactionUiService.getBTListViewData_Cache=null,BusinessTransactionUiService}(ControllerUiServiceBase);adComponentsModule.service("businessTransactionUiService",BusinessTransactionUiService),define("lib/controller/services/apm/BusinessTransactionUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AllApplicationsUiService=function(_super){function AllApplicationsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AllApplicationsUiService,_super),AllApplicationsUiService.instance=function(){return AngularUtil.getADInjector().get("allApplicationsUiService")},AllApplicationsUiService.prototype.getAllApplicationDashboardItems=function(timeRange){var path="restui/allApplications/allApplicationsDashboard?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AllApplicationsUiService","getAllApplicationDashboardItems",path,[timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AllApplicationsUiService.prototype.getAllApplicationDashboardItems_useCache=function(timeRange,forceReload){var _this=this;return void 0===forceReload&&(forceReload=!1),AllApplicationsUiService.getAllApplicationDashboardItems_Cache||(AllApplicationsUiService.getAllApplicationDashboardItems_Cache=new TimeBaseDataCache,AllApplicationsUiService.getAllApplicationDashboardItems_Cache.fetchDataCallbackFn=function(params){return _this.getAllApplicationDashboardItems(params[0])}),AllApplicationsUiService.getAllApplicationDashboardItems_Cache.get([timeRange],forceReload)},AllApplicationsUiService.prototype.getAllApplicationDashboardItems_response=function(response){return response},AllApplicationsUiService.prototype.createApplication=function(arg0,applicationType){var path="restui/allApplications/createApplication?applicationType="+applicationType,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AllApplicationsUiService","createApplication",path,[arg0,applicationType]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["runningSince","createdOn","modifiedOn"]),response})},AllApplicationsUiService.prototype.createApplication_response=function(response){return response},AllApplicationsUiService.prototype.deleteApplication=function(arg0){var path="restui/allApplications/deleteApplication",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AllApplicationsUiService","deleteApplication",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AllApplicationsUiService.prototype.getFileToken=function(){var path="restui/allApplications/getFileToken",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AllApplicationsUiService","getFileToken",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AllApplicationsUiService.prototype.getFileToken_response=function(response){return response},AllApplicationsUiService.prototype.updateApplication=function(arg0){var path="restui/allApplications/updateApplicationDetails",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AllApplicationsUiService","updateApplication",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["runningSince","createdOn","modifiedOn"]),response})},AllApplicationsUiService.prototype.updateApplication_response=function(response){return response},AllApplicationsUiService.prototype.getDbMonitoringApplication=function(){var path="restui/allApplications/",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AllApplicationsUiService","getDbMonitoringApplication",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["runningSince","createdOn","modifiedOn"]),response})},AllApplicationsUiService.prototype.getDbMonitoringApplication_response=function(response){return response},AllApplicationsUiService.prototype.importUploadedApplication=function(token,applicationName){var path="restui/allApplications/importUploadedApplication?token="+token+"&applicationName="+applicationName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AllApplicationsUiService","importUploadedApplication",path,[token,applicationName]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AllApplicationsUiService.prototype.importUploadedApplication_response=function(response){return response},AllApplicationsUiService.prototype.getAppContainerData=function(arg0){var path="restui/allApplications/getAppContainerData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AllApplicationsUiService","getAppContainerData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AllApplicationsUiService.prototype.getAppContainerData_response=function(response){return response},AllApplicationsUiService.prototype.describe=function(){var path="restui/allApplications/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AllApplicationsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AllApplicationsUiService.prototype.describe_response=function(response){return response},AllApplicationsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AllApplicationsUiService.getAllApplicationDashboardItems_Cache=null,AllApplicationsUiService}(ControllerUiServiceBase);adComponentsModule.service("allApplicationsUiService",AllApplicationsUiService),define("lib/controller/services/apm/AllApplicationsUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ComponentUiService=function(_super){function ComponentUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(ComponentUiService,_super),ComponentUiService.instance=function(){return AngularUtil.getADInjector().get("componentUiService")},ComponentUiService.prototype.getComponent=function(componentId){var path="restui/componentUiService/getComponent/"+componentId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentUiService","getComponent",path,[componentId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentUiService.prototype.getComponent_response=function(response){return response},ComponentUiService.prototype.deleteComponent=function(componentId){var path="restui/componentUiService/deleteComponent/"+componentId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentUiService","deleteComponent",path,[componentId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentUiService.prototype.createComponent=function(arg0){var path="restui/componentUiService/createComponent",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentUiService","createComponent",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentUiService.prototype.createComponent_response=function(response){return response},ComponentUiService.prototype.getApplicationComponentByNodeId=function(nodeId){var path="restui/componentUiService/components?nodeId="+nodeId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentUiService","getApplicationComponentByNodeId",path,[nodeId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentUiService.prototype.getApplicationComponentByNodeId_response=function(response){return response},ComponentUiService.prototype.getComponentPerformanceState=function(componentId,timeRange){var path="restui/componentUiService/componentPerformanceState/"+componentId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentUiService","getComponentPerformanceState",path,[componentId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentUiService.prototype.getComponentPerformanceState_response=function(response){return response},ComponentUiService.prototype.getAllComponentTypes=function(){var path="restui/componentUiService/allComponentTypes",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentUiService","getAllComponentTypes",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentUiService.prototype.getAllComponentTypes_response=function(response){return response},ComponentUiService.prototype.describe=function(){var path="restui/componentUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentUiService.prototype.describe_response=function(response){return response},ComponentUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],ComponentUiService}(ControllerUiServiceBase);adComponentsModule.service("componentUiService",ComponentUiService),define("lib/controller/services/apm/ComponentUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ServiceEndpointUiService=function(_super){function ServiceEndpointUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(ServiceEndpointUiService,_super),ServiceEndpointUiService.instance=function(){return AngularUtil.getADInjector().get("serviceEndpointUiService")},ServiceEndpointUiService.prototype.getServiceEndpointListViewData=function(applicationId,componentId,timeRange){var path="restui/serviceEndpoint/listViewData/"+applicationId+"/"+componentId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","getServiceEndpointListViewData",path,[applicationId,componentId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.getServiceEndpointListViewData_response=function(response){return response},ServiceEndpointUiService.prototype.getServiceEndpointListData2=function(applicationId,entityId,entityType,timeRange){var path="restui/serviceEndpoint/list2/"+applicationId+"/"+entityId+"/"+entityType+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","getServiceEndpointListData2",path,[applicationId,entityId,entityType,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.getServiceEndpointListData2_response=function(response){return response},ServiceEndpointUiService.prototype.getExcludedServiceEndpointListData=function(applicationId,entityId,entityType,timeRange){var path="restui/serviceEndpoint/listExcluded/"+applicationId+"/"+entityId+"/"+entityType+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","getExcludedServiceEndpointListData",path,[applicationId,entityId,entityType,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.getExcludedServiceEndpointListData_response=function(response){return response},ServiceEndpointUiService.prototype.getServiceEndpointPerformanceSummaries=function(entityType,entityId,timeRange){var path="restui/serviceEndpoint/listPerformanceSummaries?entityType="+entityType+"&entityId="+entityId+"&time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","getServiceEndpointPerformanceSummaries",path,[entityType,entityId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.getServiceEndpointPerformanceSummaries_response=function(response){return response},ServiceEndpointUiService.prototype.deleteServiceEndpoints=function(arg0){var path="restui/serviceEndpoint/delete",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","deleteServiceEndpoints",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.excludeServiceEndpoints=function(arg0){var path="restui/serviceEndpoint/exclude",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","excludeServiceEndpoints",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.unexcludeServiceEndpoints=function(arg0){var path="restui/serviceEndpoint/unexclude",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","unexcludeServiceEndpoints",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.getServiceEndpointMatchConfigs=function(arg0){var path="restui/serviceEndpoint/getServiceEndpointMatchConfigs",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","getServiceEndpointMatchConfigs",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.getServiceEndpointMatchConfigs_response=function(response){return response},ServiceEndpointUiService.prototype.getServiceEndpointMatchConfigById=function(configId){var path="restui/serviceEndpoint/getServiceEndpointMatchConfigById/"+configId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","getServiceEndpointMatchConfigById",path,[configId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.getServiceEndpointMatchConfigById_response=function(response){return response},ServiceEndpointUiService.prototype.updateServiceEndpointMatchConfig=function(arg0){var path="restui/serviceEndpoint/updateServiceEndpointMatchConfig",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","updateServiceEndpointMatchConfig",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.updateServiceEndpointMatchConfig_response=function(response){return response},ServiceEndpointUiService.prototype.getServiceEndpointDefinitionContainer=function(arg0){var path="restui/serviceEndpoint/getServiceEndpointDefContainer",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","getServiceEndpointDefinitionContainer",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.getServiceEndpointDefinitionContainer_response=function(response){return response},ServiceEndpointUiService.prototype.updateServiceEndpointDefinitionContainer=function(arg0){var path="restui/serviceEndpoint/updateServiceEndpointDefContainer",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","updateServiceEndpointDefinitionContainer",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise
},ServiceEndpointUiService.prototype.updateServiceEndpointDefinitionContainer_response=function(response){return response},ServiceEndpointUiService.prototype.copyServiceEndpointMatchConfig=function(arg0){var path="restui/serviceEndpoint/copyServiceEndpointMatchConfig",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","copyServiceEndpointMatchConfig",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.overrideServiceEndpointMatchConfigs=function(arg0){var path="restui/serviceEndpoint/overrideServiceEndpointMatchConfigs",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","overrideServiceEndpointMatchConfigs",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.getAllSummaryServiceEndpointDefinitionContainerUnderApplication=function(applicationId){var path="restui/serviceEndpoint/getAllConfigContainerUnderApplication/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","getAllSummaryServiceEndpointDefinitionContainerUnderApplication",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.getAllSummaryServiceEndpointDefinitionContainerUnderApplication_response=function(response){return response},ServiceEndpointUiService.prototype.getServiceEndpointListData=function(applicationId,componentId,timeRange){var path="restui/serviceEndpoint/list/"+applicationId+"/"+componentId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","getServiceEndpointListData",path,[applicationId,componentId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.getServiceEndpointListData_response=function(response){return response},ServiceEndpointUiService.prototype.describe=function(){var path="restui/serviceEndpoint/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ServiceEndpointUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ServiceEndpointUiService.prototype.describe_response=function(response){return response},ServiceEndpointUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],ServiceEndpointUiService}(ControllerUiServiceBase);adComponentsModule.service("serviceEndpointUiService",ServiceEndpointUiService),define("lib/controller/services/apm/ServiceEndpointUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BTDiscoveryUiService=function(_super){function BTDiscoveryUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(BTDiscoveryUiService,_super),BTDiscoveryUiService.instance=function(){return AngularUtil.getADInjector().get("bTDiscoveryUiService")},BTDiscoveryUiService.prototype.getActiveTransactionDiscoverySessionForCurrentUser=function(applicationId){var path="restui/btdiscovery/sessions/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","getActiveTransactionDiscoverySessionForCurrentUser",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.getActiveTransactionDiscoverySessionForCurrentUser_response=function(response){return response},BTDiscoveryUiService.prototype.resetTransientBTSummaryData=function(sessionGuid){var path="restui/btdiscovery/sessions/"+sessionGuid+"/bts/reset",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","resetTransientBTSummaryData",path,[sessionGuid]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.getTransientBTSnapshotData=function(sessionGuid,operationId,from,count){var path="restui/btdiscovery/sessions/"+sessionGuid+"/"+operationId+"/snapshots?from="+from+"&count="+count,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","getTransientBTSnapshotData",path,[sessionGuid,operationId,from,count]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.getTransientBTSnapshotData_response=function(response){return response},BTDiscoveryUiService.prototype.startDiscoverySession=function(arg0,applicationId){var path="restui/btdiscovery/sessions/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","startDiscoverySession",path,[arg0,applicationId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.startDiscoverySession_response=function(response){return response},BTDiscoveryUiService.prototype.closeDiscoverySession=function(sessionGuid){var path="restui/btdiscovery/sessions/"+sessionGuid+"/close",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","closeDiscoverySession",path,[sessionGuid]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.applyDiscoverySessionConfig=function(arg0,sessionGuid){var path="restui/btdiscovery/sessions/"+sessionGuid+"/config",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","applyDiscoverySessionConfig",path,[arg0,sessionGuid]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.getAllActiveDiscoverySessionsForNodes=function(arg0,applicationId){var path="restui/btdiscovery/sessions/"+applicationId+"/nodes",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","getAllActiveDiscoverySessionsForNodes",path,[arg0,applicationId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.getAllActiveDiscoverySessionsForNodes_response=function(response){return response},BTDiscoveryUiService.prototype.startClassBrowseOperation=function(arg0,sessionGuid){var path="restui/btdiscovery/sessions/"+sessionGuid+"/classes",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","startClassBrowseOperation",path,[arg0,sessionGuid]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.startClassBrowseOperation_response=function(response){return response},BTDiscoveryUiService.prototype.getTransientBTSummaryData=function(sessionGuid){var path="restui/btdiscovery/sessions/"+sessionGuid+"/bts",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","getTransientBTSummaryData",path,[sessionGuid]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.getTransientBTSummaryData_response=function(response){return response},BTDiscoveryUiService.prototype.startTransientBTSnapshotDataCapture=function(arg0,sessionGuid){var path="restui/btdiscovery/sessions/"+sessionGuid+"/snapshots",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","startTransientBTSnapshotDataCapture",path,[arg0,sessionGuid]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.startTransientBTSnapshotDataCapture_response=function(response){return response},BTDiscoveryUiService.prototype.getClassesInfo=function(sessionGuid,operationId){var path="restui/btdiscovery/sessions/"+sessionGuid+"/classes/"+operationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","getClassesInfo",path,[sessionGuid,operationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.getClassesInfo_response=function(response){return response},BTDiscoveryUiService.prototype.startMethodBrowseOperation=function(arg0,sessionGuid){var path="restui/btdiscovery/sessions/"+sessionGuid+"/methods",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","startMethodBrowseOperation",path,[arg0,sessionGuid]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.startMethodBrowseOperation_response=function(response){return response},BTDiscoveryUiService.prototype.getMethodsInfo=function(sessionGuid,operationId){var path="restui/btdiscovery/sessions/"+sessionGuid+"/methods/"+operationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","getMethodsInfo",path,[sessionGuid,operationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.getMethodsInfo_response=function(response){return response},BTDiscoveryUiService.prototype.describe=function(){var path="restui/btdiscovery/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTDiscoveryUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTDiscoveryUiService.prototype.describe_response=function(response){return response},BTDiscoveryUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],BTDiscoveryUiService}(ControllerUiServiceBase);adComponentsModule.service("bTDiscoveryUiService",BTDiscoveryUiService),define("lib/controller/services/apm/BTDiscoveryUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SnapshotUiService=function(_super){function SnapshotUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(SnapshotUiService,_super),SnapshotUiService.instance=function(){return AngularUtil.getADInjector().get("snapshotUiService")},SnapshotUiService.prototype.deleteSnapshots=function(arg0){var path="restui/snapshot/deleteSnapshots",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","deleteSnapshots",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getFilteredRequestSegmentData=function(arg0){var path="restui/snapshot/getFilteredRequestSegmentData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getFilteredRequestSegmentData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["userComments.createdOn"]),response})},SnapshotUiService.prototype.getFilteredRequestSegmentData_response=function(response){return response},SnapshotUiService.prototype.getSlowestExitCalls=function(arg0,limit){var path="restui/snapshot/getSlowestExitCalls?limit="+limit,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getSlowestExitCalls",path,[arg0,limit]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getSlowestExitCalls_response=function(response){return response},SnapshotUiService.prototype.getRequestSegmentById=function(rsdId,timeRange){var path="restui/snapshot/getRequestSegmentById?rsdId="+rsdId+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getRequestSegmentById",path,[rsdId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["userComments.createdOn"]),response})},SnapshotUiService.prototype.getRequestSegmentById_response=function(response){return response},SnapshotUiService.prototype.getCallGraphRoot=function(rsdId,timeRange){var path="restui/snapshot/getCallGraphRoot?rsdId="+rsdId+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getCallGraphRoot",path,[rsdId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getCallGraphRoot_response=function(response){return response},SnapshotUiService.prototype.getProcessCallGraphRoot=function(processSnapshotGUID,timeRange){var path="restui/snapshot/getProcessCallGraphRoot?processSnapshotGUID="+processSnapshotGUID+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getProcessCallGraphRoot",path,[processSnapshotGUID,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getProcessCallGraphRoot_response=function(response){return response},SnapshotUiService.prototype.getAllocationCallGraphRoot=function(processSnapshotGUID,timeRange){var path="restui/snapshot/getAllocationCallGraphRoot?processSnapshotGUID="+processSnapshotGUID+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getAllocationCallGraphRoot",path,[processSnapshotGUID,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getAllocationCallGraphRoot_response=function(response){return response},SnapshotUiService.prototype.getPotentialProblemsForRSD=function(requestGuid,applicationId,timeRange,maxProblems,maxRsds,exeTimeThreshold){var path="restui/snapshot/potentialProblems?request-guid="+requestGuid+"&applicationId="+applicationId+"&time-range="+timeRange+"&max-problems="+maxProblems+"&max-rsds="+maxRsds+"&exe-time-threshold="+exeTimeThreshold,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getPotentialProblemsForRSD",path,[requestGuid,applicationId,timeRange,maxProblems,maxRsds,exeTimeThreshold]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getPotentialProblemsForRSD_response=function(response){return response},SnapshotUiService.prototype.getRequestSegmentDataListItemsWithFilterHandle=function(arg0){var path="restui/snapshot/snapshotListDataWithFilterHandle",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getRequestSegmentDataListItemsWithFilterHandle",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getRequestSegmentDataListItemsWithFilterHandle_response=function(response){return response},SnapshotUiService.prototype.getDistributedRequestTimeRange=function(requestGUID){var path="restui/snapshot/getDistributedRequestTimeRange?requestGUID="+requestGUID,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getDistributedRequestTimeRange",path,[requestGUID]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getDistributedRequestTimeRange_response=function(response){return response},SnapshotUiService.prototype.getDistributedRequestSegmentData=function(requestGUID,timeRange){var path="restui/snapshot/getRequestSegmentData?requestGUID="+requestGUID+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getDistributedRequestSegmentData",path,[requestGUID,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["requestSegmentData.userComments.createdOn","eumSnapshotData.eventSummary.eventTime","eumSnapshotData.eumPerformanceDataAveraged.errorsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.serverConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.domainLookupTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.tcpConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.sslHandshakeTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseAvailableTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxResponseDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.redirectTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.requestsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.iFrameRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.frontEndTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestErrorData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.httpErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentProcessingData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxCallbackExecutionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.crashesPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerCallsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.speedIndexData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfDOMElementsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfRequestsByOnLoadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfResourcesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesByOnloadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageLoadErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageClientErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.virtualPageDigestCyclesData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.outlierRequestsData.dataTimeslices.startTime"]),response})},SnapshotUiService.prototype.getDistributedRequestSegmentData_response=function(response){return response},SnapshotUiService.prototype.getProcessSnapshotDataByGuid=function(processSnapshotGUID,timeRange){var path="restui/snapshot/getProcessSnapshotDataByGuid?processSnapshotGUID="+processSnapshotGUID+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getProcessSnapshotDataByGuid",path,[processSnapshotGUID,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["processSnapshotDataSummary.userComments.createdOn"]),response})},SnapshotUiService.prototype.getProcessSnapshotDataByGuid_response=function(response){return response},SnapshotUiService.prototype.getProcessSnapshots=function(arg0){var path="restui/snapshot/getProcessSnapshots",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getProcessSnapshots",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["userComments.createdOn"]),response})},SnapshotUiService.prototype.getProcessSnapshots_response=function(response){return response},SnapshotUiService.prototype.collectOnDemandProcessSnapshotsForNodes=function(arg0){var path="restui/snapshot/collectOnDemandProcessSnapshotsForNodes",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","collectOnDemandProcessSnapshotsForNodes",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getMostExpensiveMethods=function(arg0,limit,maxRsds,timeRange){var path="restui/snapshot/getMostExpensiveMethods?limit="+limit+"&max-rsds="+maxRsds+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getMostExpensiveMethods",path,[arg0,limit,maxRsds,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getMostExpensiveMethods_response=function(response){return response
},SnapshotUiService.prototype.getMostExpensiveSQL=function(arg0,limit,timeRange){var path="restui/snapshot/getMostExpensiveSQL?limit="+limit+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getMostExpensiveSQL",path,[arg0,limit,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["sqlStatement.timeStamp"]),response})},SnapshotUiService.prototype.getMostExpensiveSQL_response=function(response){return response},SnapshotUiService.prototype.getErrorsForDrsd=function(requestGuid,limit,maxRsds,timeRange){var path="restui/snapshot/getErrorsForDrsd/"+requestGuid+"?limit="+limit+"&max-rsds="+maxRsds+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getErrorsForDrsd",path,[requestGuid,limit,maxRsds,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getErrorsForDrsd_response=function(response){return response},SnapshotUiService.prototype.getErrorsForRsd=function(requestId,limit,timeRange){var path="restui/snapshot/getErrorsForRsd/"+requestId+"?limit="+limit+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getErrorsForRsd",path,[requestId,limit,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getErrorsForRsd_response=function(response){return response},SnapshotUiService.prototype.archiveSnapshots=function(arg0){var path="restui/snapshot/archiveSnapshots",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","archiveSnapshots",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getRequestSegmentDataListItems=function(arg0){var path="restui/snapshot/snapshotListData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getRequestSegmentDataListItems",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getRequestSegmentDataListItems_response=function(response){return response},SnapshotUiService.prototype.getFilteredRSDListData=function(arg0){var path="restui/snapshot/getFilteredRSDListData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","getFilteredRSDListData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.getFilteredRSDListData_response=function(response){return response},SnapshotUiService.prototype.describe=function(){var path="restui/snapshot/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotUiService.prototype.describe_response=function(response){return response},SnapshotUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],SnapshotUiService}(ControllerUiServiceBase);adComponentsModule.service("snapshotUiService",SnapshotUiService),define("lib/controller/services/apm/snapshot/SnapshotUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},TransactionConfigUiService=function(_super){function TransactionConfigUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(TransactionConfigUiService,_super),TransactionConfigUiService.instance=function(){return AngularUtil.getADInjector().get("transactionConfigUiService")},TransactionConfigUiService.prototype.createScope=function(arg0){var path="restui/transactionConfig/createScope",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TransactionConfigUiService","createScope",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TransactionConfigUiService.prototype.createScope_response=function(response){return response},TransactionConfigUiService.prototype.updateScope=function(arg0){var path="restui/transactionConfig/updateScope",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TransactionConfigUiService","updateScope",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TransactionConfigUiService.prototype.updateScope_response=function(response){return response},TransactionConfigUiService.prototype.getAllMdsTiersForApplication=function(applicationId){var path="restui/transactionConfig/allMdsTiers/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TransactionConfigUiService","getAllMdsTiersForApplication",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TransactionConfigUiService.prototype.getAllMdsTiersForApplication_response=function(response){return response},TransactionConfigUiService.prototype.createRule=function(arg0){var path="restui/transactionConfig/createRule",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TransactionConfigUiService","createRule",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TransactionConfigUiService.prototype.createRule_response=function(response){return response},TransactionConfigUiService.prototype.describe=function(){var path="restui/transactionConfig/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TransactionConfigUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TransactionConfigUiService.prototype.describe_response=function(response){return response},TransactionConfigUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],TransactionConfigUiService}(ControllerUiServiceBase);adComponentsModule.service("transactionConfigUiService",TransactionConfigUiService),define("lib/controller/services/apm/TransactionConfigUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ConfigurationImportUiService=function(_super){function ConfigurationImportUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(ConfigurationImportUiService,_super),ConfigurationImportUiService.instance=function(){return AngularUtil.getADInjector().get("configurationImportUiService")},ConfigurationImportUiService.prototype.getConfigurationTypesInFile=function(fileID){var path="restui/configurationImportUiService/configurationTypes/"+fileID,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ConfigurationImportUiService","getConfigurationTypesInFile",path,[fileID]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ConfigurationImportUiService.prototype.getConfigurationTypesInFile_response=function(response){return response},ConfigurationImportUiService.prototype.startConfigurationImport=function(arg0){var path="restui/configurationImportUiService/startImport",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ConfigurationImportUiService","startConfigurationImport",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ConfigurationImportUiService.prototype.startConfigurationImport_response=function(response){return response},ConfigurationImportUiService.prototype.getConfigurationImportProgress=function(importGUID){var path="restui/configurationImportUiService/progress/"+importGUID,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ConfigurationImportUiService","getConfigurationImportProgress",path,[importGUID]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ConfigurationImportUiService.prototype.getConfigurationImportProgress_response=function(response){return response},ConfigurationImportUiService.prototype.describe=function(){var path="restui/configurationImportUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ConfigurationImportUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ConfigurationImportUiService.prototype.describe_response=function(response){return response},ConfigurationImportUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],ConfigurationImportUiService}(ControllerUiServiceBase);adComponentsModule.service("configurationImportUiService",ConfigurationImportUiService),define("lib/controller/services/apm/config/ConfigurationImportUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},FlowMapUiService=function(_super){function FlowMapUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(FlowMapUiService,_super),FlowMapUiService.instance=function(){return AngularUtil.getADInjector().get("flowMapUiService")},FlowMapUiService.prototype.setFlowmapProperties=function(arg0){var path="restui/flowMapUiService/setFlowmapProperties",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("FlowMapUiService","setFlowmapProperties",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},FlowMapUiService.prototype.getFlowmapProperties=function(entityId,entityType,mapId){var path="restui/flowMapUiService/getFlowmapProperties?entityId="+entityId+"&entityType="+entityType+"&mapId="+mapId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("FlowMapUiService","getFlowmapProperties",path,[entityId,entityType,mapId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},FlowMapUiService.prototype.getFlowmapProperties_response=function(response){return response},FlowMapUiService.prototype.getFlowMapsForEntity=function(entityType,entityId){var path="restui/flowMapUiService/flowmaps/"+entityType+"/"+entityId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("FlowMapUiService","getFlowMapsForEntity",path,[entityType,entityId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},FlowMapUiService.prototype.getFlowMapsForEntity_response=function(response){return response},FlowMapUiService.prototype.getNodesForApp=function(applicationId,timeRange){var path="restui/flowMapUiService/getNodesForApp/"+applicationId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("FlowMapUiService","getNodesForApp",path,[applicationId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eumSnapshotData.eventSummary.eventTime","eumSnapshotData.eumPerformanceDataAveraged.errorsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.serverConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.domainLookupTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.tcpConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.sslHandshakeTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseAvailableTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxResponseDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.redirectTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.requestsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.iFrameRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.frontEndTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestErrorData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.httpErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentProcessingData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxCallbackExecutionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.crashesPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerCallsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.speedIndexData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfDOMElementsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfRequestsByOnLoadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfResourcesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesByOnloadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageLoadErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageClientErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.virtualPageDigestCyclesData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.outlierRequestsData.dataTimeslices.startTime"]),response})},FlowMapUiService.prototype.getNodesForApp_response=function(response){return response},FlowMapUiService.prototype.setEntityLocation=function(arg0){var path="restui/flowMapUiService/setEntityLocation",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("FlowMapUiService","setEntityLocation",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},FlowMapUiService.prototype.setFlowMapPreference=function(arg0){var path="restui/flowMapUiService/updateSelectedFlowMap",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("FlowMapUiService","setFlowMapPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},FlowMapUiService.prototype.deleteFlowMapPreference=function(arg0){var path="restui/flowMapUiService/deleteFlowMapPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("FlowMapUiService","deleteFlowMapPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},FlowMapUiService.prototype.copyFlowMapPreference=function(arg0){var path="restui/flowMapUiService/copyFlowMapPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("FlowMapUiService","copyFlowMapPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["owner.createdOn","owner.modifiedOn"]),response})},FlowMapUiService.prototype.copyFlowMapPreference_response=function(response){return response},FlowMapUiService.prototype.createNewFlowMapPreference=function(entityType,entityId,name){var path="restui/flowMapUiService/createNewFlowMapPreference?entityType="+entityType+"&entityId="+entityId+"&name="+name,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("FlowMapUiService","createNewFlowMapPreference",path,[entityType,entityId,name]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},FlowMapUiService.prototype.createNewFlowMapPreference_response=function(response){return response},FlowMapUiService.prototype.updateFlexFlowmaps=function(entityType,entityId){var path="restui/flowMapUiService/updateFlexFlowmaps?entityType="+entityType+"&entityId="+entityId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("FlowMapUiService","updateFlexFlowmaps",path,[entityType,entityId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},FlowMapUiService.prototype.getNodesForTier=function(applicationId,tierId,timeRange){var path="restui/flowMapUiService/getNodesForTier/"+applicationId+"?tierId="+tierId+"&time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("FlowMapUiService","getNodesForTier",path,[applicationId,tierId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eumSnapshotData.eventSummary.eventTime","eumSnapshotData.eumPerformanceDataAveraged.errorsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.serverConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.domainLookupTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.tcpConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.sslHandshakeTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseAvailableTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxResponseDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.redirectTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.requestsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.iFrameRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.frontEndTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestErrorData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.httpErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentProcessingData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxCallbackExecutionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.crashesPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerCallsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.speedIndexData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfDOMElementsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfRequestsByOnLoadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfResourcesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesByOnloadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageLoadErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageClientErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.virtualPageDigestCyclesData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.outlierRequestsData.dataTimeslices.startTime"]),response
})},FlowMapUiService.prototype.getNodesForTier_response=function(response){return response},FlowMapUiService.prototype.describe=function(){var path="restui/flowMapUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("FlowMapUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},FlowMapUiService.prototype.describe_response=function(response){return response},FlowMapUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],FlowMapUiService}(ControllerUiServiceBase);adComponentsModule.service("flowMapUiService",FlowMapUiService),define("lib/controller/services/apm/dashboards/FlowMapUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AccountFlowmapUiService=function(_super){function AccountFlowmapUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AccountFlowmapUiService,_super),AccountFlowmapUiService.instance=function(){return AngularUtil.getADInjector().get("accountFlowmapUiService")},AccountFlowmapUiService.prototype.getAccountFlowMap=function(accountId,timeRange,mapId,baselineId){var path="restui/accountFlowMapUiService/account/"+accountId+"?time-range="+timeRange+"&mapId="+mapId+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","getAccountFlowMap",path,[accountId,timeRange,mapId,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountFlowmapUiService.prototype.getAccountFlowMap_response=function(response){return response},AccountFlowmapUiService.prototype.setFlowmapProperties=function(arg0){var path="restui/accountFlowMapUiService/setFlowmapProperties",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","setFlowmapProperties",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountFlowmapUiService.prototype.getFlowmapProperties=function(entityId,entityType,mapId){var path="restui/accountFlowMapUiService/getFlowmapProperties?entityId="+entityId+"&entityType="+entityType+"&mapId="+mapId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","getFlowmapProperties",path,[entityId,entityType,mapId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountFlowmapUiService.prototype.getFlowmapProperties_response=function(response){return response},AccountFlowmapUiService.prototype.getFlowMapsForEntity=function(entityType,entityId){var path="restui/accountFlowMapUiService/flowmaps/"+entityType+"/"+entityId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","getFlowMapsForEntity",path,[entityType,entityId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountFlowmapUiService.prototype.getFlowMapsForEntity_response=function(response){return response},AccountFlowmapUiService.prototype.getNodesForApp=function(applicationId,timeRange){var path="restui/accountFlowMapUiService/getNodesForApp/"+applicationId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","getNodesForApp",path,[applicationId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eumSnapshotData.eventSummary.eventTime","eumSnapshotData.eumPerformanceDataAveraged.errorsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.serverConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.domainLookupTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.tcpConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.sslHandshakeTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseAvailableTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxResponseDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.redirectTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.requestsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.iFrameRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.frontEndTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestErrorData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.httpErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentProcessingData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxCallbackExecutionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.crashesPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerCallsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.speedIndexData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfDOMElementsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfRequestsByOnLoadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfResourcesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesByOnloadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageLoadErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageClientErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.virtualPageDigestCyclesData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.outlierRequestsData.dataTimeslices.startTime"]),response})},AccountFlowmapUiService.prototype.getNodesForApp_response=function(response){return response},AccountFlowmapUiService.prototype.setEntityLocation=function(arg0){var path="restui/accountFlowMapUiService/setEntityLocation",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","setEntityLocation",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountFlowmapUiService.prototype.setFlowMapPreference=function(arg0){var path="restui/accountFlowMapUiService/updateSelectedFlowMap",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","setFlowMapPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountFlowmapUiService.prototype.deleteFlowMapPreference=function(arg0){var path="restui/accountFlowMapUiService/deleteFlowMapPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","deleteFlowMapPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountFlowmapUiService.prototype.copyFlowMapPreference=function(arg0){var path="restui/accountFlowMapUiService/copyFlowMapPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","copyFlowMapPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["owner.createdOn","owner.modifiedOn"]),response})},AccountFlowmapUiService.prototype.copyFlowMapPreference_response=function(response){return response},AccountFlowmapUiService.prototype.createNewFlowMapPreference=function(entityType,entityId,name){var path="restui/accountFlowMapUiService/createNewFlowMapPreference?entityType="+entityType+"&entityId="+entityId+"&name="+name,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","createNewFlowMapPreference",path,[entityType,entityId,name]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountFlowmapUiService.prototype.createNewFlowMapPreference_response=function(response){return response},AccountFlowmapUiService.prototype.updateFlexFlowmaps=function(entityType,entityId){var path="restui/accountFlowMapUiService/updateFlexFlowmaps?entityType="+entityType+"&entityId="+entityId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","updateFlexFlowmaps",path,[entityType,entityId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountFlowmapUiService.prototype.getNodesForTier=function(applicationId,tierId,timeRange){var path="restui/accountFlowMapUiService/getNodesForTier/"+applicationId+"?tierId="+tierId+"&time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","getNodesForTier",path,[applicationId,tierId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eumSnapshotData.eventSummary.eventTime","eumSnapshotData.eumPerformanceDataAveraged.errorsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.serverConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.domainLookupTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.tcpConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.sslHandshakeTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseAvailableTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxResponseDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.redirectTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.requestsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.iFrameRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.frontEndTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestErrorData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.httpErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentProcessingData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxCallbackExecutionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.crashesPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerCallsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.speedIndexData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfDOMElementsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfRequestsByOnLoadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfResourcesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesByOnloadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageLoadErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageClientErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.virtualPageDigestCyclesData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.outlierRequestsData.dataTimeslices.startTime"]),response})},AccountFlowmapUiService.prototype.getNodesForTier_response=function(response){return response},AccountFlowmapUiService.prototype.describe=function(){var path="restui/accountFlowMapUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountFlowmapUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountFlowmapUiService.prototype.describe_response=function(response){return response},AccountFlowmapUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AccountFlowmapUiService}(ControllerUiServiceBase);adComponentsModule.service("accountFlowmapUiService",AccountFlowmapUiService),define("lib/controller/services/apm/dashboards/AccountFlowmapUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ASyncConfigurationUiService=function(_super){function ASyncConfigurationUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(ASyncConfigurationUiService,_super),ASyncConfigurationUiService.instance=function(){return AngularUtil.getADInjector().get("aSyncConfigurationUiService")},ASyncConfigurationUiService.prototype.updateASyncTransactionConfig=function(arg0){var path="restui/asyncConfiguration/update",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ASyncConfigurationUiService","updateASyncTransactionConfig",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ASyncConfigurationUiService.prototype.updateASyncTransactionConfig_response=function(response){return response},ASyncConfigurationUiService.prototype.setBusinessTransactionsUsingAsyncTransactionConfig=function(arg0,transactionConfigId){var path="restui/asyncConfiguration/applyConfigToBts?transactionConfigId="+transactionConfigId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ASyncConfigurationUiService","setBusinessTransactionsUsingAsyncTransactionConfig",path,[arg0,transactionConfigId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ASyncConfigurationUiService.prototype.getBusinessTransactionsUsingAsyncTransactionConfig=function(transactionConfigId){var path="restui/asyncConfiguration/getBtsByConfigId/"+transactionConfigId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ASyncConfigurationUiService","getBusinessTransactionsUsingAsyncTransactionConfig",path,[transactionConfigId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ASyncConfigurationUiService.prototype.getBusinessTransactionsUsingAsyncTransactionConfig_response=function(response){return response},ASyncConfigurationUiService.prototype.createASyncTransactionConfig=function(arg0){var path="restui/asyncConfiguration/create",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ASyncConfigurationUiService","createASyncTransactionConfig",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ASyncConfigurationUiService.prototype.createASyncTransactionConfig_response=function(response){return response},ASyncConfigurationUiService.prototype.copyASyncTransactionConfig=function(idToCopy,newConfigName){var path="restui/asyncConfiguration/copy/"+idToCopy+"/"+newConfigName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ASyncConfigurationUiService","copyASyncTransactionConfig",path,[idToCopy,newConfigName]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ASyncConfigurationUiService.prototype.copyASyncTransactionConfig_response=function(response){return response},ASyncConfigurationUiService.prototype.getAsyncTransactionConfigsForApplication=function(applicationId){var path="restui/asyncConfiguration/get/application/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ASyncConfigurationUiService","getAsyncTransactionConfigsForApplication",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ASyncConfigurationUiService.prototype.getAsyncTransactionConfigsForApplication_response=function(response){return response},ASyncConfigurationUiService.prototype.deleteAsyncTransactionConfig=function(arg0){var path="restui/asyncConfiguration/delete",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ASyncConfigurationUiService","deleteAsyncTransactionConfig",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ASyncConfigurationUiService.prototype.describe=function(){var path="restui/asyncConfiguration/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ASyncConfigurationUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ASyncConfigurationUiService.prototype.describe_response=function(response){return response},ASyncConfigurationUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],ASyncConfigurationUiService}(ControllerUiServiceBase);adComponentsModule.service("aSyncConfigurationUiService",ASyncConfigurationUiService),define("lib/controller/services/apm/ASyncConfigurationUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BackendUiService=function(_super){function BackendUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(BackendUiService,_super),BackendUiService.instance=function(){return AngularUtil.getADInjector().get("backendUiService")},BackendUiService.prototype.getBackendVendors=function(arg0){var path="restui/backendUiService/getBackendVendors",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendUiService","getBackendVendors",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BackendUiService.prototype.getBackendVendors_response=function(response){return response},BackendUiService.prototype.deleteBackends=function(arg0){var path="restui/backendUiService/deleteBackends",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendUiService","deleteBackends",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();
return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BackendUiService.prototype.markUnresolvedBackendCallInfoAsDb2OnzOS=function(backendId,value){var path="restui/backendUiService/markUnresolvedBackendCallInfoAsDb2OnzOS/"+backendId+"/"+value,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendUiService","markUnresolvedBackendCallInfoAsDb2OnzOS",path,[backendId,value]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BackendUiService.prototype.markUnresolvedBackendCallInfoAsDb2OnzOS_response=function(response){return response},BackendUiService.prototype.renameBackend=function(backendId,newName){var path="restui/backendUiService/renameBackend/"+backendId+"?newName="+newName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendUiService","renameBackend",path,[backendId,newName]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BackendUiService.prototype.getBackendViewData=function(backendId){var path="restui/backendUiService/getBackendViewData/"+backendId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendUiService","getBackendViewData",path,[backendId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},BackendUiService.prototype.getBackendViewData_response=function(response){return response},BackendUiService.prototype.getBackendApplicationComponentData=function(backendId,timeRange){var path="restui/backendUiService/getBackendApplicationComponentData/"+backendId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendUiService","getBackendApplicationComponentData",path,[backendId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BackendUiService.prototype.getBackendApplicationComponentData_response=function(response){return response},BackendUiService.prototype.resolveBackendToExistingTier=function(backendId,tierId){var path="restui/backendUiService/resolveBackendToExistingTier/"+backendId+"/"+tierId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendUiService","resolveBackendToExistingTier",path,[backendId,tierId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BackendUiService.prototype.resolveBackendToNewTier=function(backendId,tierName,tierType){var path="restui/backendUiService/resolveBackendToNewTier/"+backendId+"/"+tierName+"/"+tierType,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendUiService","resolveBackendToNewTier",path,[backendId,tierName,tierType]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BackendUiService.prototype.resolveBackendToNewTier_response=function(response){return response},BackendUiService.prototype.getBackendListViewData=function(applicationId,isDatabaseList,timeRange){var path="restui/backendUiService/backendListViewData/"+applicationId+"/"+isDatabaseList+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendUiService","getBackendListViewData",path,[applicationId,isDatabaseList,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},BackendUiService.prototype.getBackendListViewData_response=function(response){return response},BackendUiService.prototype.getBackendInfoById=function(backendId){var path="restui/backendUiService/getBackendInfoById?backendId="+backendId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendUiService","getBackendInfoById",path,[backendId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BackendUiService.prototype.getBackendInfoById_response=function(response){return response},BackendUiService.prototype.getAllBackends=function(){var path="restui/backendUiService/getAllBackends",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendUiService","getAllBackends",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BackendUiService.prototype.getAllBackends_response=function(response){return response},BackendUiService.prototype.describe=function(){var path="restui/backendUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BackendUiService.prototype.describe_response=function(response){return response},BackendUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],BackendUiService}(ControllerUiServiceBase);adComponentsModule.service("backendUiService",BackendUiService),define("lib/controller/services/apm/BackendUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},DashboardGraphService=function(_super){function DashboardGraphService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(DashboardGraphService,_super),DashboardGraphService.instance=function(){return AngularUtil.getADInjector().get("dashboardGraphService")},DashboardGraphService.prototype.getEntityStatsData=function(entityId,entityType,timeRange,baselineId,maxNumDataPoints){void 0===maxNumDataPoints&&(maxNumDataPoints=-1);var path="restui/dashboardUiService/entityStatsGraphData/"+entityId+"?entityType="+entityType+"&time-range="+timeRange+"&baselineId="+baselineId+"&maxNumDataPoints="+maxNumDataPoints,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardGraphService","getEntityStatsData",path,[entityId,entityType,timeRange,baselineId,maxNumDataPoints]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["callsPerMinuteData.dataTimeslices.startTime","errorsPerMinuteData.dataTimeslices.startTime","averageResponseTimeData.dataTimeslices.startTime","endToEndLatencyData.dataTimeslices.startTime","numOfSlowCallsData.dataTimeslices.startTime","numOfVerySlowCallsData.dataTimeslices.startTime","numOfStallsData.dataTimeslices.startTime","averageResponseTimeBaselineData.dataTimeslices.startTime","callsPerMinuteBaselineData.dataTimeslices.startTime"]),response})},DashboardGraphService.prototype.getEntityStatsData_response=function(response){return response},DashboardGraphService.prototype.getLinkStatsData=function(sourceEntityId,sourceEntityType,artMetricId,cpmMetricId,epmMetricId,timeRange,baselineId){var path="restui/dashboardUiService/linkStatsGraphData?sourceEntityId="+sourceEntityId+"&sourceEntityType="+sourceEntityType+"&artMetricId="+artMetricId+"&cpmMetricId="+cpmMetricId+"&epmMetricId="+epmMetricId+"&time-range="+timeRange+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardGraphService","getLinkStatsData",path,[sourceEntityId,sourceEntityType,artMetricId,cpmMetricId,epmMetricId,timeRange,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["callsPerMinuteData.dataTimeslices.startTime","errorsPerMinuteData.dataTimeslices.startTime","averageResponseTimeData.dataTimeslices.startTime","endToEndLatencyData.dataTimeslices.startTime","numOfSlowCallsData.dataTimeslices.startTime","numOfVerySlowCallsData.dataTimeslices.startTime","numOfStallsData.dataTimeslices.startTime","averageResponseTimeBaselineData.dataTimeslices.startTime","callsPerMinuteBaselineData.dataTimeslices.startTime"]),response})},DashboardGraphService.prototype.getLinkStatsData_response=function(response){return response},DashboardGraphService.prototype.describe=function(){var path="restui/dashboardUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardGraphService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DashboardGraphService.prototype.describe_response=function(response){return response},DashboardGraphService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],DashboardGraphService}(ControllerUiServiceBase);adComponentsModule.service("dashboardGraphService",DashboardGraphService),define("lib/controller/services/apm/DashboardGraphService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},DeployerConfigUiService=function(_super){function DeployerConfigUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(DeployerConfigUiService,_super),DeployerConfigUiService.instance=function(){return AngularUtil.getADInjector().get("deployerConfigUiService")},DeployerConfigUiService.prototype.getConfigurations=function(){var path="restui/deployer/getConfigurations",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","getConfigurations",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DeployerConfigUiService.prototype.getConfigurations_response=function(response){return response},DeployerConfigUiService.prototype.getEnvironments=function(){var path="restui/deployer/getEnvironments",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","getEnvironments",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DeployerConfigUiService.prototype.getEnvironments_response=function(response){return response},DeployerConfigUiService.prototype.addConfigurations=function(arg0){var path="restui/deployer/addConfigurations",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","addConfigurations",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DeployerConfigUiService.prototype.addConfigurations_response=function(response){return response},DeployerConfigUiService.prototype.updateConfiguration=function(arg0){var path="restui/deployer/updateConfigurations",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","updateConfiguration",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DeployerConfigUiService.prototype.getConfigurationContents=function(id){var path="restui/deployer/getConfigurationContents/"+id,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","getConfigurationContents",path,[id]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DeployerConfigUiService.prototype.getConfigurationContents_response=function(response){return response},DeployerConfigUiService.prototype.deleteDeployerConfiguration=function(id){var path="restui/deployer/deleteDeployerConfiguration/"+id,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","deleteDeployerConfiguration",path,[id]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DeployerConfigUiService.prototype.getEnvironment=function(id){var path="restui/deployer/getEnvironment/"+id,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","getEnvironment",path,[id]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DeployerConfigUiService.prototype.getEnvironment_response=function(response){return response},DeployerConfigUiService.prototype.assignConfigurationToEnvironment=function(environmentId,configId){var path="restui/deployer/assignConfigurationToEnvironment?environmentId="+environmentId+"&configId="+configId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","assignConfigurationToEnvironment",path,[environmentId,configId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DeployerConfigUiService.prototype.removeConfigurationToEnvironmentAssignment=function(id){var path="restui/deployer/removeConfigurationToEnvironmentAssignment/"+id,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","removeConfigurationToEnvironmentAssignment",path,[id]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DeployerConfigUiService.prototype.getAllMachineAgents=function(){var path="restui/deployer/allMachineAgents",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","getAllMachineAgents",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["agentDetails.installTime","agentDetails.lastStartTime","agentDetails.agentVersionsHistory.changeDetectionTime","agentDetails.agentRuntimeHistory.changeDetectionTime","agentDetails.vmStartupOptionsHistory.changeDetectionTime","agentDetails.vmSystemPropertiesHistory.changeDetectionTime","agentDetails.environmentVariablesHistory.changeDetectionTime","agentDetails.agentPropertiesHistory.changeDetectionTime"]),response})},DeployerConfigUiService.prototype.getAllMachineAgents_response=function(response){return response},DeployerConfigUiService.prototype.test=function(){var path="restui/deployer/test",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","test",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DeployerConfigUiService.prototype.test_response=function(response){return response},DeployerConfigUiService.prototype.getAppServerAgents=function(){var path="restui/deployer/allAppServerAgents",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","getAppServerAgents",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["agentDetails.installTime","agentDetails.lastStartTime","agentDetails.agentVersionsHistory.changeDetectionTime","agentDetails.agentRuntimeHistory.changeDetectionTime","agentDetails.vmStartupOptionsHistory.changeDetectionTime","agentDetails.vmSystemPropertiesHistory.changeDetectionTime","agentDetails.environmentVariablesHistory.changeDetectionTime","agentDetails.agentPropertiesHistory.changeDetectionTime"]),response})},DeployerConfigUiService.prototype.getAppServerAgents_response=function(response){return response},DeployerConfigUiService.prototype.getConfigurationEntity=function(id){var path="restui/deployer/getConfigurations/"+id,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","getConfigurationEntity",path,[id]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DeployerConfigUiService.prototype.getConfigurationEntity_response=function(response){return response},DeployerConfigUiService.prototype.describe=function(){var path="restui/deployer/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DeployerConfigUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DeployerConfigUiService.prototype.describe_response=function(response){return response},DeployerConfigUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],DeployerConfigUiService}(ControllerUiServiceBase);adComponentsModule.service("deployerConfigUiService",DeployerConfigUiService),define("lib/controller/services/apm/DeployerConfigUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AppInfraUiService=function(_super){function AppInfraUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AppInfraUiService,_super),AppInfraUiService.instance=function(){return AngularUtil.getADInjector().get("appInfraUiService")},AppInfraUiService.prototype.getComponents=function(applicationId){var path="restui/appInfra/treeViewData/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getComponents",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getComponents_response=function(response){return response},AppInfraUiService.prototype.getHealthMetricStatsForComponent=function(componentId,timeRange){var path="restui/appInfra/healthStatsForComponent/"+componentId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getHealthMetricStatsForComponent",path,[componentId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getHealthMetricStatsForComponent_response=function(response){return response},AppInfraUiService.prototype.getNodesForApplication=function(applicationId){var path="restui/appInfra/listViewData/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getNodesForApplication",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getNodesForApplication_response=function(response){return response},AppInfraUiService.prototype.getNodesForComponent=function(componentId,applicationId){var path="restui/appInfra/listViewDataForComponent/"+componentId+"?applicationId="+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getNodesForComponent",path,[componentId,applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getNodesForComponent_response=function(response){return response},AppInfraUiService.prototype.getHealthMetricStatsForComponents=function(arg0,timeRange){var path="restui/appInfra/healthStatsForComponents?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getHealthMetricStatsForComponents",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getHealthMetricStatsForComponents_response=function(response){return response},AppInfraUiService.prototype.getHealthMetricStatsForNode=function(nodeId,timeRange){var path="restui/appInfra/healthStatsForNode/"+nodeId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getHealthMetricStatsForNode",path,[nodeId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getHealthMetricStatsForNode_response=function(response){return response},AppInfraUiService.prototype.getHealthMetricStatsForNodes=function(arg0,timeRange){var path="restui/appInfra/healthStatsForNodes?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getHealthMetricStatsForNodes",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getHealthMetricStatsForNodes_response=function(response){return response},AppInfraUiService.prototype.getHardwareStatsForComponent=function(componentId,timeRange){var path="restui/appInfra/hardwareStatsForComponent/"+componentId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getHardwareStatsForComponent",path,[componentId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getHardwareStatsForComponent_response=function(response){return response},AppInfraUiService.prototype.getHardwareStatsForComponents=function(arg0,timeRange){var path="restui/appInfra/hardwareStatsForComponents?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getHardwareStatsForComponents",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getHardwareStatsForComponents_response=function(response){return response},AppInfraUiService.prototype.getHardwareStatsForNode=function(nodeId,timeRange){var path="restui/appInfra/hardwareStatsForNode/"+nodeId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getHardwareStatsForNode",path,[nodeId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getHardwareStatsForNode_response=function(response){return response},AppInfraUiService.prototype.getHardwareStatsForNodes=function(arg0,timeRange){var path="restui/appInfra/hardwareStatsForNodes?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getHardwareStatsForNodes",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getHardwareStatsForNodes_response=function(response){return response},AppInfraUiService.prototype.getRuntimeMemoryStatsForComponent=function(componentId,timeRange){var path="restui/appInfra/memoryStatsForComponent/"+componentId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getRuntimeMemoryStatsForComponent",path,[componentId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getRuntimeMemoryStatsForComponent_response=function(response){return response},AppInfraUiService.prototype.getJvmRuntimeMemoryStatsForComponent=function(componentId,timeRange){var path="restui/appInfra/jvmMemoryStatsForComponent/"+componentId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getJvmRuntimeMemoryStatsForComponent",path,[componentId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getJvmRuntimeMemoryStatsForComponent_response=function(response){return response},AppInfraUiService.prototype.getJvmRuntimeMemoryStatsForComponents=function(arg0,timeRange){var path="restui/appInfra/jvmMemoryStatsForComponents?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getJvmRuntimeMemoryStatsForComponents",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getJvmRuntimeMemoryStatsForComponents_response=function(response){return response},AppInfraUiService.prototype.getClrRuntimeMemoryStatsForComponent=function(componentId,timeRange){var path="restui/appInfra/clrMemoryStatsForComponent/"+componentId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getClrRuntimeMemoryStatsForComponent",path,[componentId,timeRange]),apiCall.httpMethod="GET");
var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getClrRuntimeMemoryStatsForComponent_response=function(response){return response},AppInfraUiService.prototype.getClrRuntimeMemoryStatsForComponents=function(arg0,timeRange){var path="restui/appInfra/clrMemoryStatsForComponents?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getClrRuntimeMemoryStatsForComponents",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getClrRuntimeMemoryStatsForComponents_response=function(response){return response},AppInfraUiService.prototype.getJvmRuntimeMemoryStatsForNode=function(nodeId,timeRange){var path="restui/appInfra/jvmMemoryStatsForNode/"+nodeId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getJvmRuntimeMemoryStatsForNode",path,[nodeId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getJvmRuntimeMemoryStatsForNode_response=function(response){return response},AppInfraUiService.prototype.getJvmRuntimeMemoryStatsForNodes=function(arg0,timeRange){var path="restui/appInfra/jvmMemoryStatsForNodes?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getJvmRuntimeMemoryStatsForNodes",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getJvmRuntimeMemoryStatsForNodes_response=function(response){return response},AppInfraUiService.prototype.getClrRuntimeMemoryStatsForNode=function(nodeId,timeRange){var path="restui/appInfra/clrMemoryStatsForNode/"+nodeId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getClrRuntimeMemoryStatsForNode",path,[nodeId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getClrRuntimeMemoryStatsForNode_response=function(response){return response},AppInfraUiService.prototype.getClrRuntimeMemoryStatsForNodes=function(arg0,timeRange){var path="restui/appInfra/clrMemoryStatsForNodes?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getClrRuntimeMemoryStatsForNodes",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getClrRuntimeMemoryStatsForNodes_response=function(response){return response},AppInfraUiService.prototype.getNetworkStatsForComponent=function(componentId,timeRange){var path="restui/appInfra/networkStatsForComponent/"+componentId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getNetworkStatsForComponent",path,[componentId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getNetworkStatsForComponent_response=function(response){return response},AppInfraUiService.prototype.getNetworkStatsForComponents=function(arg0,timeRange){var path="restui/appInfra/networkStatsForComponents?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getNetworkStatsForComponents",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getNetworkStatsForComponents_response=function(response){return response},AppInfraUiService.prototype.getNetworkStatsForNode=function(nodeId,timeRange){var path="restui/appInfra/networkStatsForNode/"+nodeId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getNetworkStatsForNode",path,[nodeId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getNetworkStatsForNode_response=function(response){return response},AppInfraUiService.prototype.getNetworkStatsForNodes=function(arg0,timeRange){var path="restui/appInfra/networkStatsForNodes?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","getNetworkStatsForNodes",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.getNetworkStatsForNodes_response=function(response){return response},AppInfraUiService.prototype.describe=function(){var path="restui/appInfra/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AppInfraUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AppInfraUiService.prototype.describe_response=function(response){return response},AppInfraUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AppInfraUiService}(ControllerUiServiceBase);adComponentsModule.service("appInfraUiService",AppInfraUiService),define("lib/controller/services/apm/AppInfraUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ErrorsUiService=function(_super){function ErrorsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(ErrorsUiService,_super),ErrorsUiService.instance=function(){return AngularUtil.getADInjector().get("errorsUiService")},ErrorsUiService.prototype.getErrorSummary=function(applicationId,entityType,entityId,timeRange){var path="restui/errors/summaryData?applicationId="+applicationId+"&entityType="+entityType+"&entityId="+entityId+"&time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ErrorsUiService","getErrorSummary",path,[applicationId,entityType,entityId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["exceptionsMetricData.dataTimeslices.startTime","httpErrorCodesMetricData.dataTimeslices.startTime","errorPageRedirectsMetricData.dataTimeslices.startTime"]),response})},ErrorsUiService.prototype.getErrorSummary_response=function(response){return response},ErrorsUiService.prototype.getApplicationErrors=function(applicationId){var path="restui/errors/application/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ErrorsUiService","getApplicationErrors",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn"]),response})},ErrorsUiService.prototype.getApplicationErrors_response=function(response){return response},ErrorsUiService.prototype.describe=function(){var path="restui/errors/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ErrorsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ErrorsUiService.prototype.describe_response=function(response){return response},ErrorsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],ErrorsUiService}(ControllerUiServiceBase);adComponentsModule.service("errorsUiService",ErrorsUiService),define("lib/controller/services/apm/ErrorsUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},TopSummaryStatsUiService=function(_super){function TopSummaryStatsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(TopSummaryStatsUiService,_super),TopSummaryStatsUiService.instance=function(){return AngularUtil.getADInjector().get("topSummaryStatsUiService")},TopSummaryStatsUiService.prototype.getTopCallsSummaryListViewData=function(entityType,entityId,applicationId,timeRange,targetEntityId,targetIsComponent){void 0===targetEntityId&&(targetEntityId=-1),void 0===targetIsComponent&&(targetIsComponent=!1);var path="restui/topSummaryStats/getStats/"+entityType+"/"+entityId+"?applicationId="+applicationId+"&time-range="+timeRange+"&target-entity-id="+targetEntityId+"&target-is-component="+targetIsComponent,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TopSummaryStatsUiService","getTopCallsSummaryListViewData",path,[entityType,entityId,applicationId,timeRange,targetEntityId,targetIsComponent]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TopSummaryStatsUiService.prototype.getTopCallsSummaryListViewData_response=function(response){return response},TopSummaryStatsUiService.prototype.getRsdsFromGuids=function(arg0,timeRange){var path="restui/topSummaryStats/getRsdsFromGuids?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TopSummaryStatsUiService","getRsdsFromGuids",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TopSummaryStatsUiService.prototype.getRsdsFromGuids_response=function(response){return response},TopSummaryStatsUiService.prototype.describe=function(){var path="restui/topSummaryStats/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TopSummaryStatsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TopSummaryStatsUiService.prototype.describe_response=function(response){return response},TopSummaryStatsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],TopSummaryStatsUiService}(ControllerUiServiceBase);adComponentsModule.service("topSummaryStatsUiService",TopSummaryStatsUiService),define("lib/controller/services/apm/TopSummaryStatsUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ApplicationFlowmapUiService=function(_super){function ApplicationFlowmapUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(ApplicationFlowmapUiService,_super),ApplicationFlowmapUiService.instance=function(){return AngularUtil.getADInjector().get("applicationFlowmapUiService")},ApplicationFlowmapUiService.prototype.getApplicationFlowMap=function(applicationId,timeRange,mapId,baselineId){var path="restui/applicationFlowMapUiService/application/"+applicationId+"?time-range="+timeRange+"&mapId="+mapId+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","getApplicationFlowMap",path,[applicationId,timeRange,mapId,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationFlowmapUiService.prototype.getApplicationFlowMap_response=function(response){return response},ApplicationFlowmapUiService.prototype.setFlowmapProperties=function(arg0){var path="restui/applicationFlowMapUiService/setFlowmapProperties",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","setFlowmapProperties",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationFlowmapUiService.prototype.getFlowmapProperties=function(entityId,entityType,mapId){var path="restui/applicationFlowMapUiService/getFlowmapProperties?entityId="+entityId+"&entityType="+entityType+"&mapId="+mapId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","getFlowmapProperties",path,[entityId,entityType,mapId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationFlowmapUiService.prototype.getFlowmapProperties_response=function(response){return response},ApplicationFlowmapUiService.prototype.getFlowMapsForEntity=function(entityType,entityId){var path="restui/applicationFlowMapUiService/flowmaps/"+entityType+"/"+entityId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","getFlowMapsForEntity",path,[entityType,entityId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationFlowmapUiService.prototype.getFlowMapsForEntity_response=function(response){return response},ApplicationFlowmapUiService.prototype.getNodesForApp=function(applicationId,timeRange){var path="restui/applicationFlowMapUiService/getNodesForApp/"+applicationId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","getNodesForApp",path,[applicationId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eumSnapshotData.eventSummary.eventTime","eumSnapshotData.eumPerformanceDataAveraged.errorsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.serverConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.domainLookupTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.tcpConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.sslHandshakeTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseAvailableTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxResponseDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.redirectTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.requestsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.iFrameRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.frontEndTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestErrorData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.httpErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentProcessingData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxCallbackExecutionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.crashesPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerCallsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.speedIndexData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfDOMElementsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfRequestsByOnLoadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfResourcesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesByOnloadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageLoadErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageClientErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.virtualPageDigestCyclesData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.outlierRequestsData.dataTimeslices.startTime"]),response})},ApplicationFlowmapUiService.prototype.getNodesForApp_response=function(response){return response},ApplicationFlowmapUiService.prototype.setEntityLocation=function(arg0){var path="restui/applicationFlowMapUiService/setEntityLocation",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","setEntityLocation",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationFlowmapUiService.prototype.setFlowMapPreference=function(arg0){var path="restui/applicationFlowMapUiService/updateSelectedFlowMap",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","setFlowMapPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationFlowmapUiService.prototype.deleteFlowMapPreference=function(arg0){var path="restui/applicationFlowMapUiService/deleteFlowMapPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","deleteFlowMapPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationFlowmapUiService.prototype.copyFlowMapPreference=function(arg0){var path="restui/applicationFlowMapUiService/copyFlowMapPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","copyFlowMapPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["owner.createdOn","owner.modifiedOn"]),response})},ApplicationFlowmapUiService.prototype.copyFlowMapPreference_response=function(response){return response},ApplicationFlowmapUiService.prototype.createNewFlowMapPreference=function(entityType,entityId,name){var path="restui/applicationFlowMapUiService/createNewFlowMapPreference?entityType="+entityType+"&entityId="+entityId+"&name="+name,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","createNewFlowMapPreference",path,[entityType,entityId,name]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationFlowmapUiService.prototype.createNewFlowMapPreference_response=function(response){return response},ApplicationFlowmapUiService.prototype.updateFlexFlowmaps=function(entityType,entityId){var path="restui/applicationFlowMapUiService/updateFlexFlowmaps?entityType="+entityType+"&entityId="+entityId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","updateFlexFlowmaps",path,[entityType,entityId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationFlowmapUiService.prototype.getNodesForTier=function(applicationId,tierId,timeRange){var path="restui/applicationFlowMapUiService/getNodesForTier/"+applicationId+"?tierId="+tierId+"&time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","getNodesForTier",path,[applicationId,tierId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eumSnapshotData.eventSummary.eventTime","eumSnapshotData.eumPerformanceDataAveraged.errorsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.serverConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.domainLookupTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.tcpConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.sslHandshakeTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseAvailableTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxResponseDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.redirectTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.requestsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.iFrameRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.frontEndTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestErrorData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.httpErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentProcessingData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxCallbackExecutionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.crashesPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerCallsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.speedIndexData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfDOMElementsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfRequestsByOnLoadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfResourcesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesByOnloadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageLoadErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageClientErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.virtualPageDigestCyclesData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.outlierRequestsData.dataTimeslices.startTime"]),response
})},ApplicationFlowmapUiService.prototype.getNodesForTier_response=function(response){return response},ApplicationFlowmapUiService.prototype.describe=function(){var path="restui/applicationFlowMapUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationFlowmapUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationFlowmapUiService.prototype.describe_response=function(response){return response},ApplicationFlowmapUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],ApplicationFlowmapUiService}(ControllerUiServiceBase);adComponentsModule.service("applicationFlowmapUiService",ApplicationFlowmapUiService),define("lib/controller/services/apm/dashboards/ApplicationFlowmapUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BTFlowmapUiService=function(_super){function BTFlowmapUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(BTFlowmapUiService,_super),BTFlowmapUiService.instance=function(){return AngularUtil.getADInjector().get("bTFlowmapUiService")},BTFlowmapUiService.prototype.getBusinessTransactionFlowMap=function(businessTransactionId,applicationId,timeRange,mapId,baselineId){var path="restui/btFlowMapUiService/businessTransaction/"+businessTransactionId+"?applicationId="+applicationId+"&time-range="+timeRange+"&mapId="+mapId+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTFlowmapUiService","getBusinessTransactionFlowMap",path,[businessTransactionId,applicationId,timeRange,mapId,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTFlowmapUiService.prototype.getBusinessTransactionFlowMap_response=function(response){return response},BTFlowmapUiService.prototype.describe=function(){var path="restui/btFlowMapUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BTFlowmapUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BTFlowmapUiService.prototype.describe_response=function(response){return response},BTFlowmapUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],BTFlowmapUiService}(ControllerUiServiceBase);adComponentsModule.service("bTFlowmapUiService",BTFlowmapUiService),define("lib/controller/services/apm/dashboards/BTFlowmapUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MachineSnapshotUiService=function(_super){function MachineSnapshotUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(MachineSnapshotUiService,_super),MachineSnapshotUiService.instance=function(){return AngularUtil.getADInjector().get("machineSnapshotUiService")},MachineSnapshotUiService.prototype.getAppComponentNodesForMachine=function(machineId){var path="restui/machinesnapshot/appComponentNodesForMachine/"+machineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MachineSnapshotUiService","getAppComponentNodesForMachine",path,[machineId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MachineSnapshotUiService.prototype.getAppComponentNodesForMachine_response=function(response){return response},MachineSnapshotUiService.prototype.getMachineSnapshotData=function(machineSnapshotId,timeRange){var path="restui/machinesnapshot/machineSnapshotData/"+machineSnapshotId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MachineSnapshotUiService","getMachineSnapshotData",path,[machineSnapshotId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MachineSnapshotUiService.prototype.getMachineSnapshotData_response=function(response){return response},MachineSnapshotUiService.prototype.getMachineAgents=function(applicationId){var path="restui/machinesnapshot/machineAgents/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MachineSnapshotUiService","getMachineAgents",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["agentDetails.installTime","agentDetails.lastStartTime","agentDetails.agentVersionsHistory.changeDetectionTime","agentDetails.agentRuntimeHistory.changeDetectionTime","agentDetails.vmStartupOptionsHistory.changeDetectionTime","agentDetails.vmSystemPropertiesHistory.changeDetectionTime","agentDetails.environmentVariablesHistory.changeDetectionTime","agentDetails.agentPropertiesHistory.changeDetectionTime"]),response})},MachineSnapshotUiService.prototype.getMachineAgents_response=function(response){return response},MachineSnapshotUiService.prototype.getAllMachineAgents=function(){var path="restui/machinesnapshot/allMachineAgents",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MachineSnapshotUiService","getAllMachineAgents",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["agentDetails.installTime","agentDetails.lastStartTime","agentDetails.agentVersionsHistory.changeDetectionTime","agentDetails.agentRuntimeHistory.changeDetectionTime","agentDetails.vmStartupOptionsHistory.changeDetectionTime","agentDetails.vmSystemPropertiesHistory.changeDetectionTime","agentDetails.environmentVariablesHistory.changeDetectionTime","agentDetails.agentPropertiesHistory.changeDetectionTime"]),response})},MachineSnapshotUiService.prototype.getAllMachineAgents_response=function(response){return response},MachineSnapshotUiService.prototype.archiveMachineSnapshots=function(arg0,timeRange){var path="restui/machinesnapshot/archiveMachineSnapshots?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MachineSnapshotUiService","archiveMachineSnapshots",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MachineSnapshotUiService.prototype.deleteMachineSnapshots=function(arg0){var path="restui/machinesnapshot/deleteMachineSnapshots",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MachineSnapshotUiService","deleteMachineSnapshots",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MachineSnapshotUiService.prototype.getMachineSnaphotDataSummaries=function(arg0){var path="restui/machinesnapshot/machineSnapshotDataSummaries",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MachineSnapshotUiService","getMachineSnaphotDataSummaries",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MachineSnapshotUiService.prototype.getMachineSnaphotDataSummaries_response=function(response){return response},MachineSnapshotUiService.prototype.describe=function(){var path="restui/machinesnapshot/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MachineSnapshotUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MachineSnapshotUiService.prototype.describe_response=function(response){return response},MachineSnapshotUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],MachineSnapshotUiService}(ControllerUiServiceBase);adComponentsModule.service("machineSnapshotUiService",MachineSnapshotUiService),define("lib/controller/services/apm/MachineSnapshotUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ComponentFlowmapUiService=function(_super){function ComponentFlowmapUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(ComponentFlowmapUiService,_super),ComponentFlowmapUiService.instance=function(){return AngularUtil.getADInjector().get("componentFlowmapUiService")},ComponentFlowmapUiService.prototype.getComponentFlowMap=function(componentId,timeRange,mapId,baselineId){var path="restui/componentFlowMapUiService/component/"+componentId+"?time-range="+timeRange+"&mapId="+mapId+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","getComponentFlowMap",path,[componentId,timeRange,mapId,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentFlowmapUiService.prototype.getComponentFlowMap_response=function(response){return response},ComponentFlowmapUiService.prototype.setFlowmapProperties=function(arg0){var path="restui/componentFlowMapUiService/setFlowmapProperties",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","setFlowmapProperties",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentFlowmapUiService.prototype.getFlowmapProperties=function(entityId,entityType,mapId){var path="restui/componentFlowMapUiService/getFlowmapProperties?entityId="+entityId+"&entityType="+entityType+"&mapId="+mapId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","getFlowmapProperties",path,[entityId,entityType,mapId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentFlowmapUiService.prototype.getFlowmapProperties_response=function(response){return response},ComponentFlowmapUiService.prototype.getFlowMapsForEntity=function(entityType,entityId){var path="restui/componentFlowMapUiService/flowmaps/"+entityType+"/"+entityId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","getFlowMapsForEntity",path,[entityType,entityId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentFlowmapUiService.prototype.getFlowMapsForEntity_response=function(response){return response},ComponentFlowmapUiService.prototype.getNodesForApp=function(applicationId,timeRange){var path="restui/componentFlowMapUiService/getNodesForApp/"+applicationId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","getNodesForApp",path,[applicationId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eumSnapshotData.eventSummary.eventTime","eumSnapshotData.eumPerformanceDataAveraged.errorsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.serverConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.domainLookupTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.tcpConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.sslHandshakeTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseAvailableTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxResponseDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.redirectTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.requestsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.iFrameRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.frontEndTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestErrorData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.httpErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentProcessingData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxCallbackExecutionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.crashesPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerCallsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.speedIndexData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfDOMElementsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfRequestsByOnLoadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfResourcesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesByOnloadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageLoadErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageClientErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.virtualPageDigestCyclesData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.outlierRequestsData.dataTimeslices.startTime"]),response})},ComponentFlowmapUiService.prototype.getNodesForApp_response=function(response){return response},ComponentFlowmapUiService.prototype.setEntityLocation=function(arg0){var path="restui/componentFlowMapUiService/setEntityLocation",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","setEntityLocation",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentFlowmapUiService.prototype.setFlowMapPreference=function(arg0){var path="restui/componentFlowMapUiService/updateSelectedFlowMap",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","setFlowMapPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentFlowmapUiService.prototype.deleteFlowMapPreference=function(arg0){var path="restui/componentFlowMapUiService/deleteFlowMapPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","deleteFlowMapPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentFlowmapUiService.prototype.copyFlowMapPreference=function(arg0){var path="restui/componentFlowMapUiService/copyFlowMapPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","copyFlowMapPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["owner.createdOn","owner.modifiedOn"]),response})},ComponentFlowmapUiService.prototype.copyFlowMapPreference_response=function(response){return response},ComponentFlowmapUiService.prototype.createNewFlowMapPreference=function(entityType,entityId,name){var path="restui/componentFlowMapUiService/createNewFlowMapPreference?entityType="+entityType+"&entityId="+entityId+"&name="+name,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","createNewFlowMapPreference",path,[entityType,entityId,name]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentFlowmapUiService.prototype.createNewFlowMapPreference_response=function(response){return response},ComponentFlowmapUiService.prototype.updateFlexFlowmaps=function(entityType,entityId){var path="restui/componentFlowMapUiService/updateFlexFlowmaps?entityType="+entityType+"&entityId="+entityId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","updateFlexFlowmaps",path,[entityType,entityId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentFlowmapUiService.prototype.getNodesForTier=function(applicationId,tierId,timeRange){var path="restui/componentFlowMapUiService/getNodesForTier/"+applicationId+"?tierId="+tierId+"&time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","getNodesForTier",path,[applicationId,tierId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eumSnapshotData.eventSummary.eventTime","eumSnapshotData.eumPerformanceDataAveraged.errorsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.firstByteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageReadyTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.serverConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.domainLookupTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.tcpConnectionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.sslHandshakeTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.responseAvailableTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxResponseDownloadTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.redirectTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.requestsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.iFrameRequestsCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.frontEndTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxRequestErrorData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.httpErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkErrorsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.networkRequestTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.documentProcessingData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.ajaxCallbackExecutionTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.crashesPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startsPerMinuteData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.applicationServerCallsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.speedIndexData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfDOMElementsData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfRequestsByOnLoadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfResourcesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesByOnloadData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.numberOfBytesPerPageviewData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.startPageRenderTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.visuallyCompleteTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP0.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP1.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP2.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.fullyLoadedTimeDataP3.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageLoadErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.pageClientErrorCountData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.virtualPageDigestCyclesData.dataTimeslices.startTime","eumSnapshotData.eumPerformanceDataAveraged.outlierRequestsData.dataTimeslices.startTime"]),response
})},ComponentFlowmapUiService.prototype.getNodesForTier_response=function(response){return response},ComponentFlowmapUiService.prototype.describe=function(){var path="restui/componentFlowMapUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ComponentFlowmapUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ComponentFlowmapUiService.prototype.describe_response=function(response){return response},ComponentFlowmapUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],ComponentFlowmapUiService}(ControllerUiServiceBase);adComponentsModule.service("componentFlowmapUiService",ComponentFlowmapUiService),define("lib/controller/services/apm/dashboards/ComponentFlowmapUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},NodeUiService=function(_super){function NodeUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(NodeUiService,_super),NodeUiService.instance=function(){return AngularUtil.getADInjector().get("nodeUiService")},NodeUiService.prototype.getApplicationComponentNodeById=function(nodeId){var path="restui/nodeUiService/node/"+nodeId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("NodeUiService","getApplicationComponentNodeById",path,[nodeId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["appAgent.installTime","appAgent.lastStartTime","appAgent.agentVersionsHistory.changeDetectionTime","appAgent.agentRuntimeHistory.changeDetectionTime","appAgent.vmStartupOptionsHistory.changeDetectionTime","appAgent.vmSystemPropertiesHistory.changeDetectionTime","appAgent.environmentVariablesHistory.changeDetectionTime","appAgent.agentPropertiesHistory.changeDetectionTime"]),response})},NodeUiService.prototype.getApplicationComponentNodeById_response=function(response){return response},NodeUiService.prototype.getApplicationComponentNodesByComponentId=function(tierId){var path="restui/nodeUiService/tiers/"+tierId+"/nodes",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("NodeUiService","getApplicationComponentNodesByComponentId",path,[tierId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["appAgent.installTime","appAgent.lastStartTime","appAgent.agentVersionsHistory.changeDetectionTime","appAgent.agentRuntimeHistory.changeDetectionTime","appAgent.vmStartupOptionsHistory.changeDetectionTime","appAgent.vmSystemPropertiesHistory.changeDetectionTime","appAgent.environmentVariablesHistory.changeDetectionTime","appAgent.agentPropertiesHistory.changeDetectionTime"]),response})},NodeUiService.prototype.getApplicationComponentNodesByComponentId_response=function(response){return response},NodeUiService.prototype.deleteNode=function(nodeId){var path="restui/nodeUiService/deleteNode/"+nodeId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("NodeUiService","deleteNode",path,[nodeId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},NodeUiService.prototype.getNodePerformanceState=function(nodeId,timeRange){var path="restui/nodeUiService/nodePerformanceState/"+nodeId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("NodeUiService","getNodePerformanceState",path,[nodeId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},NodeUiService.prototype.getNodePerformanceState_response=function(response){return response},NodeUiService.prototype.describe=function(){var path="restui/nodeUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("NodeUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},NodeUiService.prototype.describe_response=function(response){return response},NodeUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],NodeUiService}(ControllerUiServiceBase);adComponentsModule.service("nodeUiService",NodeUiService),define("lib/controller/services/apm/NodeUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},NodeFlowmapUiService=function(_super){function NodeFlowmapUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(NodeFlowmapUiService,_super),NodeFlowmapUiService.instance=function(){return AngularUtil.getADInjector().get("nodeFlowmapUiService")},NodeFlowmapUiService.prototype.getNodeFlowMap=function(nodeId,timeRange,mapId,baselineId){var path="restui/nodeFlowMapUiService/node/"+nodeId+"?time-range="+timeRange+"&mapId="+mapId+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("NodeFlowmapUiService","getNodeFlowMap",path,[nodeId,timeRange,mapId,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},NodeFlowmapUiService.prototype.getNodeFlowMap_response=function(response){return response},NodeFlowmapUiService.prototype.describe=function(){var path="restui/nodeFlowMapUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("NodeFlowmapUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},NodeFlowmapUiService.prototype.describe_response=function(response){return response},NodeFlowmapUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],NodeFlowmapUiService}(ControllerUiServiceBase);adComponentsModule.service("nodeFlowmapUiService",NodeFlowmapUiService),define("lib/controller/services/apm/dashboards/NodeFlowmapUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BackendFlowmapUiService=function(_super){function BackendFlowmapUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(BackendFlowmapUiService,_super),BackendFlowmapUiService.instance=function(){return AngularUtil.getADInjector().get("backendFlowmapUiService")},BackendFlowmapUiService.prototype.getBackendFlowMap=function(backendId,timeRange,mapId,baselineId){var path="restui/backendFlowMapUiService/backend/"+backendId+"?time-range="+timeRange+"&mapId="+mapId+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendFlowmapUiService","getBackendFlowMap",path,[backendId,timeRange,mapId,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BackendFlowmapUiService.prototype.getBackendFlowMap_response=function(response){return response},BackendFlowmapUiService.prototype.describe=function(){var path="restui/backendFlowMapUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BackendFlowmapUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BackendFlowmapUiService.prototype.describe_response=function(response){return response},BackendFlowmapUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],BackendFlowmapUiService}(ControllerUiServiceBase);adComponentsModule.service("backendFlowmapUiService",BackendFlowmapUiService),define("lib/controller/services/apm/dashboards/BackendFlowmapUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SnapshotFlowmapUiService=function(_super){function SnapshotFlowmapUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(SnapshotFlowmapUiService,_super),SnapshotFlowmapUiService.instance=function(){return AngularUtil.getADInjector().get("snapshotFlowmapUiService")},SnapshotFlowmapUiService.prototype.getDistributedSnapshotFlow=function(applicationId,businessTransactionId,requestGUID,eventType,timeRange,mapId){var path="restui/snapshotFlowmap/distributedSnapshotFlow?applicationId="+applicationId+"&businessTransactionId="+businessTransactionId+"&requestGUID="+requestGUID+"&eventType="+eventType+"&timeRange="+timeRange+"&mapId="+mapId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotFlowmapUiService","getDistributedSnapshotFlow",path,[applicationId,businessTransactionId,requestGUID,eventType,timeRange,mapId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotFlowmapUiService.prototype.getDistributedSnapshotFlow_response=function(response){return response},SnapshotFlowmapUiService.prototype.describe=function(){var path="restui/snapshotFlowmap/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SnapshotFlowmapUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SnapshotFlowmapUiService.prototype.describe_response=function(response){return response},SnapshotFlowmapUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],SnapshotFlowmapUiService}(ControllerUiServiceBase);adComponentsModule.service("snapshotFlowmapUiService",SnapshotFlowmapUiService),define("lib/controller/services/apm/snapshot/SnapshotFlowmapUiService",function(){}),require(["app/view/apm/services/ApplicationService","app/view/apm/services/ApplicationViewService","app/view/apm/services/BackendListViewService","app/view/apm/mainDashboards/DashboardUtil","app/view/apm/services/ComponentViewService","app/view/apm/services/AppInfraListViewService","app/view/apm/services/BusinessTransactionViewService","app/view/apm/services/NodeViewService","app/view/apm/services/ApplicationConfigurationViewService","app/view/apm/services/BackendDashboardViewService","app/view/apm/services/SnapshotViewService","app/view/apm/ServiceEndpoint/ServiceEndpointListController","app/view/apm/services/ServiceEndpointListViewService","app/view/apm/businessTransactions/btList/BTDiagnosticSessionController","app/view/apm/machineSnapshots/MachineSnapshotsController","app/view/apm/machineSnapshots/AppPoolRequestController","app/view/apm/machineSnapshots/MachineSnapshotDataController","app/view/apm/utils/ApmImageUtil","lib/controller/services/apm/BusinessTransactionUiService","lib/controller/services/apm/AllApplicationsUiService","lib/controller/services/apm/ComponentUiService","lib/controller/services/apm/ServiceEndpointUiService","lib/controller/services/apm/BTDiscoveryUiService","lib/controller/services/apm/snapshot/SnapshotUiService","lib/controller/services/apm/TransactionConfigUiService","lib/controller/services/apm/config/ConfigurationImportUiService","lib/controller/services/apm/dashboards/FlowMapUiService","lib/controller/services/apm/dashboards/AccountFlowmapUiService","lib/controller/services/apm/ASyncConfigurationUiService","lib/controller/services/apm/BackendUiService","lib/controller/services/apm/DashboardGraphService","lib/controller/services/apm/DeployerConfigUiService","lib/controller/services/apm/AppInfraUiService","lib/controller/services/apm/ErrorsUiService","lib/controller/services/apm/TopSummaryStatsUiService","lib/controller/services/apm/dashboards/ApplicationFlowmapUiService","lib/controller/services/apm/dashboards/BTFlowmapUiService","lib/controller/services/apm/MachineSnapshotUiService","lib/controller/services/apm/ComponentUiService","lib/controller/services/apm/dashboards/ComponentFlowmapUiService","lib/controller/services/apm/NodeUiService","lib/controller/services/apm/dashboards/NodeFlowmapUiService","lib/controller/services/apm/dashboards/BackendFlowmapUiService","lib/controller/services/apm/snapshot/SnapshotFlowmapUiService"]),define("app/view/apm/APMModuleCode",function(){});var FlashService=function(){function FlashService($location,$rootScope,$timeout,$modal,notificationService,appConfig,masterService,timeRangeService,navigationService,navigationHistoryService,apiLoggerService){var _this=this;if(this.$location=$location,this.$rootScope=$rootScope,this.$timeout=$timeout,this.$modal=$modal,this.notificationService=notificationService,this.appConfig=appConfig,this.masterService=masterService,this.timeRangeService=timeRangeService,this.navigationService=navigationService,this.navigationHistoryService=navigationHistoryService,this.apiLoggerService=apiLoggerService,this.callLoginWhenReady=!1,this.lastHoveredItem=null,this.flashElement=null,this.flashReady=!1,this.flexApplicationReady=!1,this.lastBrowserScale=1,this.scrollDragging=null,this.scrollStartLocation=0,this.scrollElement=null,this.scrollStartPosition=0,this.currentUserName=null,this.currentUserPassword=null,this.sectionToGoToWhenReady=null,this.lastZoom=1,this.flashInstalled=!0,!FlashService.DISABLE_FLASH&&!window.disableFlashUnitTest){$rootScope.showingFlash=!0,window.flashService=this;var thisObject=this,onFlashLoaded=function(event){event.success||(thisObject.flashInstalled=!1,thisObject.showFlashNotInstalledDialogIfNeeded()),this.flashElement=event.ref,this.configureServiceLogging(this.apiLoggerService.logCalls,this.apiLoggerService.captureRequests,this.apiLoggerService.captureResponses)},mode="transparent",flashvarsObj={},paramsObj={allowScriptAccess:"sameDomain",name:"Main",align:"middle",quality:"high",wmode:mode},attributesObj={wmode:mode};attributesObj["class"]="flashDiv";var urlParams=new URLParams($location.path()),swffilename=FlashService.SWF_DEFAULT;if(urlParams.getParam(FlashService.SWF_URL_PARAMETER)&&0!=urlParams.getParam(FlashService.SWF_URL_PARAMETER).length)swffilename=urlParams.getParam(FlashService.SWF_URL_PARAMETER);else try{var flashDiv=$("#flashDiv"),swfAttr=flashDiv.attr("swf");null!=swfAttr&&swfAttr.length>0&&swfAttr!=FlashService.SWF_FILENAME_TOKEN&&(swffilename=swfAttr)}catch(err){}swfobject.embedSWF(swffilename,"flashDiv","100%","100%","11.0.0","swfobject/expressInstall.swf",flashvarsObj,paramsObj,attributesObj,onFlashLoaded.bind(this));var debouncedResizeListener=_.debounce(function(){setTimeout(function(){_this.flashElement&&_this.flashElement.getStageWidth&&_this.onResizeBrowser(_this.flashElement.getStageWidth())},2*(1e3/24))},500);$(window).resize(debouncedResizeListener),this.setupEventListeners()}}return FlashService.instance=function(){return AngularUtil.getADInjector().get(FlashService.SERVICE_NAME)},FlashService.prototype.setupEventListeners=function(){var _this=this;this.$rootScope.$on(NavigationService.UEV_LAST_XMODAL_VIEWED_FROM_HTML_CLOSED,this.on_UEV_LAST_XMODAL_VIEWED_FROM_HTML_CLOSED.bind(this)),this.$rootScope.$on(NavigationService.UEV_LAST_DEEP_LINKABLE_XMODAL_VIEWED_FROM_HTML_CLOSED,this.on_UEV_LAST_DEEP_LINKABLE_XMODAL_VIEWED_FROM_HTML_CLOSED.bind(this)),this.$rootScope.$on(NavigationService.UEV_NAV_ACTION_FLASH,this.on_UEV_NAV_ACTION_FLASH.bind(this)),this.$rootScope.$on(NavigationService.UEV_NAV_ACTION_HTML,function(event){_this.sendAppEventToFlash(event)}),this.$rootScope.$on(TimeRangeService.UEV_CUSTOM_TIME_RANGE_CHANGED_HTML,function(event){_this.sendAppEventToFlash(event)}),this.$rootScope.$on(App.UEV_SESSION_TIMEOUT_DETECTED_IN_FLASH,this.on_UEV_SESSION_TIMEOUT_DETECTED_IN_FLASH.bind(this))},FlashService.prototype.onResizeBrowser=function(stageWidth){this.updateBrowserScale(stageWidth);var newZoom=this.getZoomLevel();newZoom!=this.lastZoom&&(this.lastZoom=newZoom,this.layoutFlash())},FlashService.prototype.layoutFlash=function(){var currentLeftNavWidth=this.getNavWidth(),currentTitleBarHeight=this.getTitleBarHeight();currentLeftNavWidth!==this._leftNavWidth&&(this._leftNavWidth=currentLeftNavWidth,this.navWidthChanged(this._leftNavWidth)),currentTitleBarHeight!==this._topTitleBarHeight&&(this._topTitleBarHeight=currentTitleBarHeight,this.titleBarHeightChanged(this._topTitleBarHeight))},FlashService.prototype.onAuthenticateSuccess=function(username,password){void 0===username&&(username=null),void 0===password&&(password=null),this.currentUserName=username,this.currentUserPassword=password,this.flashElement&&this.flashReady?(this.flashElement.onAuthenticateSuccess(username,password),this.callLoginWhenReady=!1):this.callLoginWhenReady=!0,this.layoutFlashLater()},FlashService.prototype.setFlexLocationBarData=function(locationBarString,isAppScreen,showTimeRange,showBaselineSelector,helpLink,videoLink){var data={};data.locationBarString=locationBarString,data.isAppScreen=isAppScreen,data.showTimeRange=showTimeRange,data.showBaselineSelector=showBaselineSelector,data.helpLink=helpLink,data.videoLink=videoLink,EventBusService.instance().dispatchEvent(EventConstants.UEV_LOCATION_BAR_DATA_SET_BY_FLEX,data)},FlashService.prototype.layoutFlashLater=function(){var _this=this;this.$timeout(function(){_this.layoutFlash()},1)},FlashService.prototype.sendAppEventToFlash=function(event){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.broadcastEvent(event.name)},FlashService.prototype.viewSnapshotsListForEntity=function(eventType,entityType){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewSnapshotsListForEntity(eventType,entityType),this.showFlash())},FlashService.prototype.viewResponseTimeVsLoadForEntity=function(applicationId,entityType,entityId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewResponseTimeVsLoadForEntity(applicationId,entityType,entityId),this.showFlash())},FlashService.prototype.viewLoadVsCPUForEntity=function(applicationId,entityType,entityId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewLoadVsCPUForEntity(applicationId,entityType,entityId),this.showFlash())},FlashService.prototype.viewIncidentDetails=function(incidentId,appId,evalStateStartTime){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewIncidentDetailsFromHTML(incidentId,appId,evalStateStartTime),this.showFlash())},FlashService.prototype.viewPolicyTemplateDetails=function(appId,entityId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewPolicyTemplateDetailsFromHTML(appId,entityId),this.showFlash())},FlashService.prototype.viewExceptionListForEntity=function(entityType){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewExceptionListForEntity(entityType),this.showFlash())},FlashService.prototype.createCustomMatchPointDefinitionFromHTML=function(applicationId,entryPointConfigTypes,transactionEntryPointType,customMatchPoinClass,customMatchPointMethod){void 0===customMatchPoinClass&&(customMatchPoinClass=null),void 0===customMatchPointMethod&&(customMatchPointMethod=null),this.flashInstalledAndReadyCheck()&&(this.flashElement.createCustomMatchPointDefinitionFromHTML(applicationId,entryPointConfigTypes,transactionEntryPointType,customMatchPoinClass,customMatchPointMethod),this.showFlash())},FlashService.prototype.viewBTNodeStatsFromHTML=function(applicationId,businessTransactionId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewBTNodeStats(applicationId,businessTransactionId),this.showFlash())},FlashService.prototype.viewThresholdsforBTFromHTML=function(applicationId,businessTransactionId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewThresholdsforBTFromHTML(applicationId,businessTransactionId),this.showFlash())},FlashService.prototype.viewOverflowBTDetailsFromHTML=function(applicationId,businessTransactionId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewOverflowBTDetailsFromHTML(applicationId,businessTransactionId),this.showFlash())},FlashService.prototype.viewBTDetailSnapshotsTabFromHTML=function(applicationId,businessTransactionId,dataField){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewBTDetailSnapshotsTabFromHTML(applicationId,businessTransactionId,dataField),this.showFlash())},FlashService.prototype.viewTransactionDetectionForComponentFromHTML=function(){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewTransactionDetectionForComponentFromHTML(),this.showFlash())},FlashService.prototype.viewAgentConfigurationForComponentFromHTML=function(){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewAgentConfigurationForComponentFromHTML(),this.showFlash())},FlashService.prototype.viewBackendsForComponentFromHTML=function(){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewBackendsForComponentFromHTML(),this.showFlash())},FlashService.prototype.viewHealthPopUpForEntityFromHTML=function(applicationId,businessTransactionId){this.flashInstalledAndReadyCheck()&&(this._locationBeforeGoingToFlexModal=this.navigationHistoryService.getCurrentNavHistoryUrlParams(),this.flashElement.viewHealthPopUpForEntityFromHTML(applicationId,businessTransactionId),this.showFlash())},FlashService.prototype.viewHealthPopUpForComponentFromHTML=function(applicationId,componentId){this.flashInstalledAndReadyCheck()&&(this._locationBeforeGoingToFlexModal=this.navigationHistoryService.getCurrentNavHistoryUrlParams(),this.flashElement.viewHealthPopUpForComponentFromHTML(applicationId,componentId),this.showFlash())},FlashService.prototype.viewHealthPopUpForNodeFromHTML=function(applicationId,nodeId){this.flashInstalledAndReadyCheck()&&(this._locationBeforeGoingToFlexModal=this.navigationHistoryService.getCurrentNavHistoryUrlParams(),this.flashElement.viewHealthPopUpForNodeFromHTML(applicationId,nodeId),this.showFlash())},FlashService.prototype.viewDataGatherersFromHTML=function(applicationId,businessTransactionId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewBTDataGatherers(applicationId,businessTransactionId),this.showFlash())},FlashService.prototype.viewEventDetailsModalByIdFromHTML=function(applicationId,eventId){this.flashInstalledAndReadyCheck()&&(this._locationBeforeGoingToFlexModal=this.navigationHistoryService.getCurrentNavHistoryUrlParams(),this.flashElement.viewEventDetailsModalByIdFromHTML(applicationId,eventId),this.showFlash())},FlashService.prototype.viewEventStreamItemDetailsFromHTML=function(applicationId,eventId,timeRange,isDBMonitoringApp){this.flashInstalledAndReadyCheck()&&(this._locationBeforeGoingToFlexModal=this.navigationHistoryService.getCurrentNavHistoryUrlParams(),this.flashElement.viewEventStreamItemDetailsFromHTML(applicationId,eventId,timeRange,isDBMonitoringApp),this.showFlash())},FlashService.prototype.viewActionsExecutedForEventFromHTML=function(applicationId,eventId,eventType,timeRange,isRSD){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewActionsExecutedForEventFromHTML(applicationId,eventId,eventType,timeRange,isRSD),this.showFlash())},FlashService.prototype.viewCreateEventReactorFromHTMLForEmailDigest=function(applicationId,mode){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewCreateEventReactorFromHTML(applicationId,mode),this.showFlash())},FlashService.prototype.viewCreateEventReactorFromHTML=function(applicationId,mode){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewCreateEventReactorFromHTML(applicationId,mode),this.showFlash())},FlashService.prototype.viewCopyEventReactorFromHTML=function(applicationId,eventReactorId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewCopyEventReactorFromHTML(applicationId,eventReactorId),this.showFlash())},FlashService.prototype.viewDeleteEventReactorFromHTML=function(applicationId,eventReactorIds){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewDeleteEventReactorFromHTML(applicationId,eventReactorIds),this.showFlash())},FlashService.prototype.viewCreateRunbookFromHTML=function(applicationId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewCreateRunbookFromHTML(applicationId),this.showFlash())},FlashService.prototype.viewDeleteRunbookFromHTML=function(applicationId,eventReactorIds){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewDeleteRunbookFromHTML(applicationId,eventReactorIds),this.showFlash())},FlashService.prototype.viewEditRunbookFromHTML=function(applicationId,actionId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewEditRunbookFromHTML(applicationId,actionId),this.showFlash())},FlashService.prototype.viewCreateActionSuppressionFromHTML=function(applicationId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewCreateActionSuppressionFromHTML(applicationId),this.showFlash())},FlashService.prototype.viewEditActionSuppressionFromHTML=function(applicationId,actionSuppressionWindowId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewEditActionSuppressionFromHTML(applicationId,actionSuppressionWindowId),this.showFlash())},FlashService.prototype.viewCreateHealthRulesFromHTML=function(applicationId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewCreateHealthRuleFromHTML(applicationId),this.showFlash())},FlashService.prototype.viewHealthRulesDetailsFromHTML=function(applicationId,healthRulesId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewHealthRulesDetailsFromHTML(applicationId,healthRulesId),this.showFlash())},FlashService.prototype.viewCopyHealthRuleFromHTML=function(applicationId,healthRule){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewCopyHealthRuleFromHTML(applicationId,healthRule),this.showFlash())},FlashService.prototype.viewDeleteHealthRulesFromHTML=function(applicationId,healthRulesIds){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewDeleteHealthRulesFromHTML(applicationId,healthRulesIds),this.showFlash())},FlashService.prototype.viewEventReactorDetailsFromHTML=function(applicationId,eventReactorId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewEventReactorDetailsFromHTML(applicationId,eventReactorId),this.showFlash())},FlashService.prototype.viewPropertiesForNodeFromHTML=function(applicationId,nodeId,isHTMLLocation){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewPropertiesForNodeFromHTML(applicationId,nodeId,isHTMLLocation),this.showFlash())},FlashService.prototype.viewPropertiesForComponentFromHTML=function(applicationId,componentId,isHTMLLocation){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewPropertiesForComponentFromHTML(applicationId,componentId,isHTMLLocation),this.showFlash())},FlashService.prototype.viewExceptionsForComponentFromHTML=function(){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewExceptionsForComponentFromHTML(),this.showFlash())},FlashService.prototype.viewSnapshotsAnalysisForComponentFromHTML=function(){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewSnapshotsAnalysisForComponentFromHTML(),this.showFlash())},FlashService.prototype.viewSnapshotsAnalysisForNodeFromHTML=function(){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewSnapshotsAnalysisForNodeFromHTML(),this.showFlash())},FlashService.prototype.viewAgentConfigurationForNodeFromHTML=function(){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewAgentConfigurationForNodeFromHTML(),this.showFlash())},FlashService.prototype.viewIncidentsForNodeFromHTML=function(){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewIncidentsForNodeFromHTML(),this.showFlash())},FlashService.prototype.viewAgentDiagnosticEventsForNodeFromHTML=function(){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewAgentDiagnosticEventsForNodeFromHTML(),this.showFlash())},FlashService.prototype.viewTopDeviantMetricsForNodeFromHTML=function(){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewTopDeviantMetricsForNodeFromHTML(),this.showFlash())},FlashService.prototype.viewMoveForNodeFromHTML=function(){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewMoveForNodeFromHTML(),this.showFlash())},FlashService.prototype.viewSplunkForNodeFromHTML=function(){this.flashInstalledAndReadyCheck()&&this.flashElement.viewSplunkForNodeFromHTML()},FlashService.prototype.viewExceptionsForNodeFromHTML=function(){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewExceptionsForNodeFromHTML(),this.showFlash())},FlashService.prototype.viewRegisterApplicationChangeEventFromHTML=function(applicationId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewRegisterApplicationChangeEventFromHTML(applicationId),this.showFlash())},FlashService.prototype.viewCreateNewDashboard=function(){this.flashInstalledAndReadyCheck()&&this.flashElement.viewCreateNewDashboard()},FlashService.prototype.viewAlertActGettingStartedFromHTML=function(applicationId,dbMode,userInitiated){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewAlertActGettingStartedFromHTML(applicationId,dbMode,userInitiated),this.showFlash())},FlashService.prototype.viewSnapshotsInTimeRangeFromHtml=function(entityType,entityId,fromTimeMillisec,toTimeMillsec){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewSnapshotsInTimeRangeFromHtml(entityType,entityId,fromTimeMillisec,toTimeMillsec),this.showFlash())
},FlashService.prototype.viewEditInfoPointFromHtml=function(applicationId,informationPointId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewEditInfoPointFromHtml(applicationId,informationPointId),this.showFlash())},FlashService.prototype.viewCreateInfoPointFromHTML=function(applicationId){this.flashInstalledAndReadyCheck()&&(this.flashElement.viewCreateInfoPointFromHTML(applicationId),this.showFlash())},FlashService.prototype.resetAgents=function(applicationId){this.flashInstalledAndReadyCheck()&&this.flashElement.resetAgents(applicationId)},FlashService.prototype.createOrEditAction=function(applicationId,create,actionId){this.flashInstalledAndReadyCheck()&&(this.flashElement.createOrEditAction(applicationId,create,actionId),this.showFlash())},FlashService.prototype.editPolicy=function(applicationId,policyId){this.flashInstalledAndReadyCheck()&&(this.flashElement.editPolicy(applicationId,policyId),this.showFlash())},FlashService.prototype.setUserPreferences=function(functionName,param){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.setUserPreferences(functionName,param)},FlashService.prototype.getUserPreferences=function(functionName){return this.flashReady?this.flashElement.getUserPreferences(functionName):!1},FlashService.prototype.helpPopupsEnabledChange=function(){return this.flashReady?this.flashElement.helpPopupsEnabledChange():!1},FlashService.prototype.appRefreshEvent=function(){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.appRefreshEvent()},FlashService.prototype.globalTimeRangeChangedHTML=function(timeRange){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.globalTimeRangeChangedHTML(timeRange)},FlashService.prototype.navWidthChanged=function(newWidth){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.navWidthChanged(Math.ceil(newWidth))},FlashService.prototype.titleBarHeightChanged=function(newHeight){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.titlebarHeightChanged(Math.floor(newHeight))},FlashService.prototype.notificationConfigUpdated=function(){this.flashReady&&this.flashElement.notificationConfigUpdated()},FlashService.prototype.handleAppEvent=function(jsAppEventAsJSON){var jsEvent=JSON.parse(jsAppEventAsJSON);"UEV_SHOW_HTML_NOTIFICATION_CONFIG"==jsEvent.eventType?NotificationConfigService.instance().openEmailSMSConfig(this.$rootScope):this.broadcastAppEvent(jsEvent)},FlashService.prototype.broadcastAppEvent=function(jsAppEvent){this.$rootScope.$broadcast(jsAppEvent.eventType,jsAppEvent)},FlashService.prototype.clearAppCache=function(){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.clearAppCache()},FlashService.prototype.onLocationBarEntryClicked=function(locationName){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.onLocationBarEntryClicked(locationName)},FlashService.prototype.onRefreshFromHtml=function(){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.onRefreshFromHtml()},FlashService.prototype.onTimeRangeChangeFromHtml=function(){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.onTimeRangeChangeFromHtml()},FlashService.prototype.onAutoRefreshFromHtml=function(){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.onAutoRefreshFromHtml()},FlashService.prototype.gotoView=function(section){if(this.flashReady&&this.flashElement){var showPostLoginView=null!=this.sectionToGoToWhenReady;ADLoggerService.log("FlashService.gotoView - Flash IS setup goint to: "+section),this.sectionToGoToWhenReady=null;var loadingFlexModalFromHtml=!1,urlParams=new URLParams(section);return urlParams&&"true"==urlParams.getParam(FlashService.LOADING_FLEX_MODAL_FROM_HTML)?loadingFlexModalFromHtml=!0:this._navigatingViaLocationToFlash=!0,this.flashElement.gotoView(urlParams.toStringNoForwardSlash(),showPostLoginView,loadingFlexModalFromHtml)}return this.sectionToGoToWhenReady=section,ADLoggerService.log("FlashService.gotoView - Flash is not ready, saving this location off to go to later: "+section),!1},FlashService.prototype.gotoFlexModal=function(section){if(this.routeController){var params=new URLParams(section);params.setParam(FlashService.LOADING_FLEX_MODAL_FROM_HTML,"true"),this._locationBeforeGoingToFlexModal=this.navigationHistoryService.getCurrentNavHistoryUrlParams(),this.routeController.beginShowingFlash(),this.gotoView(params.toString())}},FlashService.prototype.applicationSelected=function(appId){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.applicationSelected(appId)},FlashService.prototype.updateBrowserScale=function(stageWidth){stageWidth>0&&(this.lastBrowserScale=$(window).width()/stageWidth)},FlashService.prototype.clearFlexViewstack=function(){this.flashInstalledAndReadyCheck(!1)&&this.flashElement.clearFlexViewstack()},FlashService.prototype.flashCallbacksAdded=function(){ADLoggerService.log("FlashService.flashCallbacksAdded Debug: Enter"),this.flashReady=!0,this.globalTimeRangeChangedHTML(TimeRangeService.instance().getCurrentTimeRangeStringForUrl()),this.callLoginWhenReady&&this.flashElement.onAuthenticateSuccess(this.currentUserName,this.currentUserPassword),this.sectionToGoToWhenReady&&(this.gotoView(this.sectionToGoToWhenReady),this.sectionToGoToWhenReady=null)},FlashService.prototype.openHTMLMetricBrowser=function(applicationId,metricsToView,timeRange){var metrics;metricsToView&&(metrics=Array(),metricsToView.split(",").forEach(function(metricIdentifier){if(metricIdentifier){var metricParams=metricIdentifier.split(".");3===metricParams.length&&metrics.push({entityType:metricParams[0],entityId:Number(metricParams[1]),metricId:Number(metricParams[2])})}})),MetricBrowserViewService.instance().openMetricBrowserDialog(applicationId,metrics,timeRange)},FlashService.prototype.viewRequestSegmentData=function(requestGUID,serverStartTime,applicationId,firstInChain,segmentId){SnapshotViewService.instance().viewRequestSegmentData({requestGUID:requestGUID,id:segmentId,serverStartTime:serverStartTime,applicationId:applicationId,firstInChain:firstInChain})},FlashService.prototype.showSnapshotCallGraphDialog=function(rsdId,requestGUID,serverStartTime,appId){this.flashInstalledAndReadyCheck()&&(this._locationBeforeGoingToFlexModal=new URLParams,this._flashShownBeforeGoingToFlexModal=this.$rootScope.showingFlash,this.flashElement.viewRequestSegmentDataFromHTML(rsdId,requestGUID,serverStartTime,appId),this.showFlash())},FlashService.prototype.showInstrumentationConfigForCallElement=function(rsdId,appId,serverStartTime,pathToCallElement){this.flashInstalledAndReadyCheck()&&(this._locationBeforeGoingToFlexModal=new URLParams,this._flashShownBeforeGoingToFlexModal=this.$rootScope.showingFlash,this.flashElement.viewCreateInstrumentationPointFromHtml(rsdId,appId,serverStartTime,pathToCallElement),this.showFlash())},FlashService.prototype.showExportCallGraphForCallElement=function(rsdId,appId,serverStartTime,pathToCallElement){this.flashInstalledAndReadyCheck()&&(this._locationBeforeGoingToFlexModal=new URLParams,this._flashShownBeforeGoingToFlexModal=this.$rootScope.showingFlash,this.flashElement.viewExportCallGraphFromHtml(rsdId,appId,serverStartTime,pathToCallElement),this.showFlash())},FlashService.prototype.showSnapshotComparisonModal=function(appId,firstRsdId,secondRsdId,timeString){this.flashInstalledAndReadyCheck()&&(this._locationBeforeGoingToFlexModal=this.navigationHistoryService.getCurrentNavHistoryUrlParams(),this.flashElement.viewSnapshotComparisonModalFromHTML(appId,firstRsdId,secondRsdId,timeString),this.showFlash())},FlashService.prototype.showSplunkForRsd=function(appId,rsdId,timeString){this.flashInstalledAndReadyCheck()&&this.flashElement.viewSplunkForRsdFromHTML(appId,rsdId,timeString)},FlashService.prototype.showExpensiveMethodsAndSqlModal=function(appId,rsdGuids,rsdIds,timeString){this.flashInstalledAndReadyCheck()&&(this._locationBeforeGoingToFlexModal=this.navigationHistoryService.getCurrentNavHistoryUrlParams(),this.flashElement.viewExpensiveMethodsAndSqlModalFromHTML(appId,rsdGuids,rsdIds,timeString),this.showFlash())},FlashService.prototype.showEventDetailsModal=function(eventSummaryId){var eventViewService=AngularUtil.getADInjector().get("eventViewService"),eventStreamUiItem={id:eventSummaryId,type:EventStreamUiItemType.EVENT};eventViewService.openEventDetailsModal(eventStreamUiItem,!1)},FlashService.prototype.flexApplicationComplete=function(){this.flexApplicationReady=!0,this.hideFlash(),this.onResizeBrowser(this.flashElement.getStageWidth()),this.$rootScope.$broadcast(App.UEV_FLASH_LOADED)},FlashService.prototype.setTemporaryGeneralPreference=function(preference,value){preference&&0!=preference.length&&this.masterService.setTemporaryGeneralPreference(preference,value)},FlashService.prototype.setupAppAlertComplete=function(){EventBusService.instance().dispatchEvent(EventConstants.UEV_APM_APP_ALERT,null)},FlashService.prototype.setupDsymUploadComplete=function(){EventBusService.instance().dispatchEvent(EventConstants.UEV_EUM_MOBILE_SETUP_DSYM,null)},FlashService.prototype.viewLogAnalytcsForNode=function(ipAddresses,timeRangeString){AnalyticsViewService.instance().viewLogAnalytcsForNode(ipAddresses,timeRangeString),ViewUtil.safeApply(null,this.$rootScope)},FlashService.prototype.handleLogServiceCallFromFlex=function(serviceName,methodName,args){void 0===args&&(args=null);var apiCall=this.apiLoggerService.logServiceCall(serviceName,methodName,"");return apiCall.httpMethod="AMF",apiCall.fromFlex=!0,apiCall.flexArgs=args?args:"",apiCall.guid},FlashService.prototype.showHttpRequestActionDialog=function(editMode,actionId){HttpActionViewService.instance().showCreateHttpAction(editMode,actionId)},FlashService.prototype.showEmailActionDialog=function(editMode,actionId){EmailActionViewService.instance().showCreateEmailAction(editMode,actionId)},FlashService.prototype.handleCompleteServiceCallFromFlex=function(guid,response){if(void 0===response&&(response=null),response)for(;-1!=response.indexOf("\n");)response=response.replace("\n","<br>");this.apiLoggerService.processCompletedAPICallByGuid(guid,response)},FlashService.prototype.viewTransactionsForSessionId=function(sessionId){AnalyticsViewService.instance().viewTransactionsForSessionId(sessionId)},FlashService.prototype.handleNavigateTo=function(fragmentPassedFromFlash){ADLoggerService.log("FlashService.handleNavigateTo: "+fragmentPassedFromFlash),this.navigationService.navigateTo(fragmentPassedFromFlash),this.$rootScope.$$phase||this.$rootScope.$apply()},FlashService.prototype.globalTimeRangeChangedFlash=function(timeRange){if(this.flexApplicationReady){var trService=this.timeRangeService,updateFromFlash=!0;trService.changeTimeRange(trService.createTimeRange(timeRange,"."),updateFromFlash)}},FlashService.prototype.setGlobalTimeRangeAndReload=function(timeRange){this.timeRangeService.setGlobalTimeRangeFromFlexAndReload(timeRange)},FlashService.prototype.goToHome=function(){if(this.appConfig.admin){var params=new URLParams(this.$location.path());params.setParam("location",NavigationDataConstants.ADMIN_HOME),this.navigationService.navigateTo(params.toString())}else HomeViewService.instance().goToHome()},FlashService.prototype.goToAgentInstallWizard=function(){HomeViewService.instance().viewAgentInstallWizard()},FlashService.prototype.goBackInHistory=function(){this.navigationHistoryService.goBackInHistory()},FlashService.prototype.goForwardInHistory=function(){this.navigationHistoryService.goForwardInHistory()},FlashService.prototype.addNavigationDataToHistory=function(navDataUrlHashFragment){this.navigationHistoryService.addNavigationDataToHistory(navDataUrlHashFragment)},FlashService.prototype.navigateToInHtml=function(navDataUrlHashFragment){this.navigationService.navigateTo(navDataUrlHashFragment)},FlashService.prototype.trackAction=function(actionName,description){UserService.instance().trackAction(actionName,description)},FlashService.prototype.getNavWidth=function(){return $("#leftNavComp").width()*this.getZoomLevel()},FlashService.prototype.getTitleBarHeight=function(){var topMenuBarContainer=$("#topMenuBarContainerDivId"),mainTitleBarContainer=$("#mainTitleBarContainerId"),height=0;return NavigationService.instance().navigationState.isTopMenuBarMinimized||(height+=topMenuBarContainer?topMenuBarContainer.height():0),height+=mainTitleBarContainer?mainTitleBarContainer.height():0,height*this.getZoomLevel()},FlashService.prototype.displayStatusMessage=function(message){ADLoggerService.log(message),this.notificationService.displayMessage(message,"")},FlashService.prototype.displayProblemMessage=function(message){ADLoggerService.error(message),this.notificationService.displayError(message,"")},FlashService.prototype.configureServiceLogging=function(logServiceCallDiagnostics,showServerCallParameters,showCallReturnContents){this.flashReady&&this.flashElement&&this.flashElement.configureServiceLogging(logServiceCallDiagnostics,showServerCallParameters,showCallReturnContents)},FlashService.prototype.isHTMLEnabledLocation=function(location,tab){void 0===tab&&(tab=-1);var param=new URLParams("");return param.setParam(UrlConstants.LOCATION,location),tab>-1&&param.setNumberParam(UrlConstants.TAB_ID,tab),this.masterService.isHTMLEnabledLocation(param)&&this.masterService.routeExists(location)},FlashService.prototype.isAutoRefreshMode=function(){return TimeRangeService.instance().autoRefreshing},FlashService.prototype.getAssociatedLastVisitedHTMLLocation=function(location,tab){return void 0===tab&&(tab=-1),this.navigationHistoryService.getAssociatedLastVisitedHTMLLocation(location,tab)},FlashService.prototype.setUrlFragment=function(fragment,replace){void 0===replace&&(replace=!0),replace||this._navigatingViaLocationToFlash?URLUtil.setLocationHashNoHistory("/"+fragment):URLUtil.setLocationHashWithHistory("/"+fragment),ViewUtil.safeApply(AngularUtil.rootScope())},FlashService.prototype.getUrlFragment=function(){var path=this.$location.path();return path&&(path=path.replace(/^\//,"")),path},FlashService.prototype.onMouseWheel=function(x,y,deltaY){if(x<this.getNavWidth()){var updateScrollbarItem,elem=$(this.findTargetHTMLElement(x,y));for(elem&&elem.length>0&&(updateScrollbarItem=$(this.findScrollBars(elem)));updateScrollbarItem&&updateScrollbarItem.length;)updateScrollbarItem[0].scrollTop-=deltaY,updateScrollbarItem=$(this.findScrollBars(updateScrollbarItem.parent()))}},FlashService.prototype.initFlexMouseWheel=function(){this.flashElement.addEventListener(MouseEvents.MOUSE_WHEEL,this.onFlexMouseWheel.bind(this)),this.flashElement.addEventListener(MouseEvents.MOUSE_WHEEL_MOZ,this.onMozWheel.bind(this)),this.flashElement.addEventListener(MouseEvents.WHEEL,this.onWheel.bind(this))},FlashService.prototype.onMozWheel=function(event){if(event.target==this.flashElement){var wheelDeltaConstant=-10,deltaY=event.detail*wheelDeltaConstant;this.flashElement.externalMouseEvent(deltaY)}},FlashService.prototype.onFlexMouseWheel=function(event){if(event.target==this.flashElement){var deltaY=event.wheelDelta;this.flashElement.externalMouseEvent(deltaY)}},FlashService.prototype.onWheel=function(event){if(event.target==this.flashElement){var deltaY,wheelDeltaConstant=-.3;0===event.deltaMode?deltaY=event.deltaY*wheelDeltaConstant:1===event.deltaMode?deltaY=10*event.deltaY*wheelDeltaConstant:2===event.deltaMode&&(deltaY=30*event.deltaY*wheelDeltaConstant),event.preventDefault(),this.flashElement.externalMouseEvent(deltaY)}},FlashService.prototype.findTargetHTMLElement=function(x,y){var flashZIndex,flashElem=$("#flashDiv"),appElem=$("#appContainer"),elem=null,flashNeedsTopLevel=!1;return this.$rootScope.showingFlash&&(flashNeedsTopLevel=!0,appElem.css("z-index",1),flashZIndex=flashElem.css("z-index"),flashElem.css("z-index",-1)),elem=document.elementFromPoint(x/this.getZoomLevel(),y/this.getZoomLevel()),flashNeedsTopLevel&&(appElem.css("z-index","0"),flashElem.css("z-index",flashZIndex)),elem},FlashService.prototype.flashZIndex=function(){if(this.routeController.htmlDialogsOpen()){var modals=$(document.body).children(".modal"),indices=_.map(modals,function(elem){return Number($(elem).css("z-index"))}),highestZ=_.max(indices.concat(FlashService.FLASH_Z_ORDER));return highestZ+1}return FlashService.FLASH_Z_ORDER},FlashService.prototype.hideFlash=function(){if(this.$rootScope.showingFlash=!1,this.flexApplicationReady){var flashElem=$("#flashDiv");flashElem.css("z-index",-this.flashZIndex()),this.lastHoveredItem&&(this.markAncestors(this.lastHoveredItem,"hovered",!1),this.lastHoveredItem=null)}},FlashService.prototype.showFlash=function(){this.$rootScope.showingFlash=!0,this.routeController.htmlDialogsOpen()&&DialogService.instance().updateTopModalOption("keyboard",!1);var flashElem=$("#flashDiv");flashElem.css("z-index",this.flashZIndex()),BrowserUtils.isBrowserFirefox()&&0===BrowserUtils.getOperatingSystemType()||flashElem.focus()},FlashService.prototype.flashMouseClicked=function(x,y){if(this.$rootScope.showingFlash){var elem=this.findTargetHTMLElement(x,y);$(elem).click()}},FlashService.prototype.flashMouseDown=function(x,y){if(this.$rootScope.showingFlash){var elem=this.findTargetHTMLElement(x,y),updateScrollbarItem=this.findScrollBars($(elem));updateScrollbarItem&&(updateScrollbarItem.scrollHeight>updateScrollbarItem.clientHeight||updateScrollbarItem.scrollWidth>updateScrollbarItem.clientWidth)&&this.updateScrollbars(updateScrollbarItem,x,y),$(elem).mousedown()}},FlashService.prototype.updateScrollbars=function(target,x,y){var offset=$(target).offset(),relX=x-offset.left,relY=y-offset.top,scrollBarWidth=target.offsetWidth-target.clientWidth,scrollBarHeight=target.offsetHeight-target.clientHeight;Ext.isGecko&&Ext.isMac&&0==scrollBarWidth&&0==scrollBarHeight&&(scrollBarWidth=12,scrollBarHeight=12);var isOverVScrollBar=relX>$(target).width()-scrollBarWidth,isOverHScrollBar=!1;if(isOverVScrollBar){var scrollPosY=target.scrollTop,relativeScrollFractionY=scrollPosY/target.scrollHeight,thumbHeight=target.clientHeight*(target.clientHeight/target.scrollHeight),thumbY=relativeScrollFractionY*target.clientHeight,isOverVThumb=isOverVScrollBar&&relY>=thumbY&&thumbHeight+thumbY>relY;isOverVThumb?(this.scrollStartLocation=y,this.scrollStartPosition=target.scrollTop,this.scrollDragging="y",this.scrollElement=target):thumbY>relY?target.scrollTop-=target.clientHeight:target.scrollTop+=target.clientHeight,this.flashMouseMoved(x,y,!0)}else if(isOverHScrollBar){var scrollPosX=target.scrollLeft,relativeScrollFractionX=scrollPosX/target.scrollWidth,thumbWidth=target.clientWidth*(target.clientWidth/target.scrollWidth),thumbX=relativeScrollFractionX*target.clientWidth,isOverHThumb=isOverHScrollBar&&relX>=thumbX&&thumbWidth+thumbX>relX;isOverHThumb?(this.scrollStartLocation=x,this.scrollStartPosition=target.scrollLeft,this.scrollDragging="x",this.scrollElement=target):thumbX>relX?target.scrollLeft-=target.clientWidth:target.scrollLeft+=target.clientWidth,this.flashMouseMoved(x,y,!0)}},FlashService.prototype.flashMouseUp=function(x,y){if(this.$rootScope.showingFlash){this.scrollDragging&&(this.scrollDragging=null);var elem=this.findTargetHTMLElement(x,y);$(elem).mouseup()}},FlashService.prototype.flashMouseMoved=function(x,y,buttonDown){if(this.$rootScope.showingFlash){if(this.scrollDragging){if(buttonDown){if("y"==this.scrollDragging){var scrollDeltaY=y-this.scrollStartLocation,newScrollTopDeltaY=scrollDeltaY*(this.scrollElement.scrollHeight/this.scrollElement.clientHeight);this.scrollElement.scrollTop=newScrollTopDeltaY+this.scrollStartPosition}else if("x"==this.scrollDragging){var scrollDeltaX=x-this.scrollStartLocation,newScrollTopDeltaX=scrollDeltaX*(this.scrollElement.scrollWidth/this.scrollElement.clientWidth);this.scrollElement.scrollLeft=newScrollTopDeltaX+this.scrollStartPosition}return}this.scrollDragging=null}var currentNavWidth=this.getNavWidth();if(!buttonDown&&(currentNavWidth>=x||y<this.getTitleBarHeight())){var elem=this.findTargetHTMLElement(x,y),markedItem=this.markAncestors(elem,"hovered",!0);this.lastHoveredItem&&markedItem!=this.lastHoveredItem&&this.markAncestors(this.lastHoveredItem,"hovered",!1),this.lastHoveredItem=markedItem,Ext.isGecko&&Ext.isWindows&&($(".adExtTree").hide(),this.flashElement.redrawFlex(),$(".adExtTree").show(),this.flashElement.redrawFlex())}else this.lastHoveredItem&&(this.markAncestors(this.lastHoveredItem,"hovered",!1),this.lastHoveredItem=null),$("#flashDiv").attr("title","");if(buttonDown){var clickedElem=this.findTargetHTMLElement(x,y);$(clickedElem).mousemove()}}},FlashService.prototype.findScrollBars=function(item){for(;item&&item[0]&&item[0]!=document.body;){var itemHeight=item.innerWidth();if(item[0].scrollHeight>itemHeight||item[0].scrollWidth>item[0].clientWidth)return item[0];item=item.parent()}return null},FlashService.prototype.markAncestors=function(item,className,add){var markedItem=null,foundToolTip=!1;if(item)for(item=$(item);item&&item[0]&&item[0]!=document.body;){if(add){if(item.hasClass("hoverable")){item.hasClass("hovered")||(ViewUtil.doAfterDigest(function(){$(item).trigger(MouseEvents.MOUSE_ENTER)}),item.addClass("hovered")),markedItem=item[0];break}}else if(item.hasClass("hoverable")){item.hasClass("hovered")&&(ViewUtil.doAfterDigest(function(){$(item).trigger(MouseEvents.MOUSE_LEAVE)}),item.removeClass("hovered")),markedItem=item[0];break}add&&""!=item.attr("title")&&($("#flashDiv").attr("title",item.attr("title")),foundToolTip=!0),item=$(item).parent()}return foundToolTip||$("#flashDiv").attr("title",""),markedItem},FlashService.prototype.loggedOut=function(){this.masterService.logout()},FlashService.prototype.reloadPageIfChrome=function(){BrowserUtils.isBrowserChrome()&&location.reload()},FlashService.prototype.setAutomationFeatureVisibilityInUI=function(visible){this.appConfig.setShowAutomationFeatures(visible)},FlashService.prototype.on_UEV_SESSION_TIMEOUT_DETECTED_IN_FLASH=function(){this.masterService.logout(!0)},FlashService.prototype.showFlashNotInstalledDialogIfNeeded=function(){MasterService.instance().onInitDataFetch().then(function(){if(!UserService.instance().getGeneralUserPreferenceBooleanValue(FlashService.USER_PREF_HAS_DISMISSED_FLASH_NOT_INSTALLED_MESSAGE)){HelpBubblePopoverController.disableHelpBubbles=!0;var scope={};ControllerBase.addGetStringToScope(scope);var modal;scope.onClose=function(){modal.close(),HelpBubblePopoverController.disableHelpBubbles=!1},scope.onDontShowAgainChange=function(selected){UserService.instance().setGeneralUserPreferenceBooleanValue(FlashService.USER_PREF_HAS_DISMISSED_FLASH_NOT_INSTALLED_MESSAGE,selected)},modal=DialogService.instance().showSimpleDialog("app/view/common/dialogs/flashNotInstalledDialog/FlashNotInstalledDialogView.html",scope)}})},FlashService.prototype.on_UEV_LAST_XMODAL_VIEWED_FROM_HTML_CLOSED=function(){this.hideFlash(),this.routeController.htmlDialogsOpen()&&DialogService.instance().updateTopModalOption("keyboard",!0)},FlashService.prototype.on_UEV_LAST_DEEP_LINKABLE_XMODAL_VIEWED_FROM_HTML_CLOSED=function(){this._locationBeforeGoingToFlexModal&&this.masterService.isHTMLEnabledLocation(this._locationBeforeGoingToFlexModal)&&(this.setUrlFragment(this._locationBeforeGoingToFlexModal.toStringNoForwardSlash()),this._locationBeforeGoingToFlexModal=null)},FlashService.prototype.on_UEV_NAV_ACTION_FLASH=function(){var urlParamsInLocationBar=new URLParams;this._navigatingViaLocationToFlash=!1;var isFlexModal=this.navigationService.isFlexModalLocation(urlParamsInLocationBar.location());isFlexModal||(this.$rootScope.showingFlash||this.showFlash(),this.routeController&&!this.routeController.isCurrentRouteFlash()&&this.routeController.showFlashRoute())},FlashService.prototype.getZoomLevel=function(){return 1/this.lastBrowserScale},FlashService.prototype.flashInstalledAndReadyCheck=function(displayMessageIfNotInstalled){return void 0===displayMessageIfNotInstalled&&(displayMessageIfNotInstalled=!0),displayMessageIfNotInstalled&&!this.flashInstalled&&NotificationService.instance().displayMessage("Please install Flash to use this feature",""),this.flashInstalled&&this.flashReady},FlashService.SWF_FILENAME_TOKEN="@SWFFILENAME@",FlashService.SWF_URL_PARAMETER="swf",FlashService.SWF_DEFAULT="Main.swf",FlashService.FLASH_Z_ORDER=900,FlashService.LOADING_FLEX_MODAL_FROM_HTML="loadingFlexModalFromHtml",FlashService.DISABLE_FLASH=!1,FlashService.SERVICE_NAME="flashService",FlashService.USER_PREF_HAS_DISMISSED_FLASH_NOT_INSTALLED_MESSAGE="HAS_DISMISSED_FLASH_NOT_INSTALLED_MESSAGE",FlashService.$inject=["$location","$rootScope","$timeout","$modal","notificationService","AppConfig","masterService","timeRangeService","navigationService","navigationHistoryService","apiLoggerService"],FlashService}();appdynamicsModule.service(FlashService.SERVICE_NAME,FlashService),define("app/services/FlashService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},HomeViewService=function(_super){function HomeViewService($location,navigationService,notificationService,resourceManager){var _this=this;_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.lastViewedHomeTabLocation=null,EventBusService.instance().registerEventListener(NavigationService.UEV_NAV_ACTION,function(){_this.isHomeLocation(URLParams.getCurrentUrlParams().location())&&(_this.lastViewedHomeTabLocation=URLParams.getCurrentUrlParams().location())},null)}return __extends(HomeViewService,_super),HomeViewService.instance=function(){return AngularUtil.getADInjector().get(HomeViewService.SERVICE_NAME)},HomeViewService.prototype.goToHome=function(){this.viewHome()},HomeViewService.prototype.viewHome=function(){var location=this.lastViewedHomeTabLocation?this.lastViewedHomeTabLocation:NavigationDataConstants.AD_HOME_OVERVIEW;this.viewLocation(location)},HomeViewService.prototype.viewHomeOverview=function(){this.viewLocation(NavigationDataConstants.AD_HOME_OVERVIEW)},HomeViewService.prototype.viewPlatformHome=function(){this.viewLocation(NavigationDataConstants.AD_PLATFORM_HOME)},HomeViewService.prototype.viewGettingStartedHome=function(){this.viewLocation(NavigationDataConstants.AD_GETTING_STARTED_HOME)},HomeViewService.prototype.viewDBGettingStarted=function(){this.viewLocation(NavigationDataConstants.GETTING_STARTED_DB)},HomeViewService.prototype.viewIOSGettingStarted=function(){this.viewLocation(NavigationDataConstants.GETTING_STARTED_IOS)},HomeViewService.prototype.viewAndroidGettingStarted=function(){this.viewLocation(NavigationDataConstants.GETTING_STARTED_ANDROID)},HomeViewService.prototype.viewEumMobileGettingStarted=function(){this.viewGettingStarted()},HomeViewService.prototype.viewEumWebGettingStarted=function(){this.viewAgentInstallWizard("AGENT_TYPE_WEB")},HomeViewService.prototype.viewServerGettingStarted=function(){this.viewLocation(NavigationDataConstants.GETTING_STARTED_SERVER)},HomeViewService.prototype.viewGettingStarted=function(){this.viewLocation(NavigationDataConstants.AD_GETTING_STARTED),HomeViewService.gettingStatedWasViewed=!0},HomeViewService.prototype.viewProductTourByAgentType=function(agentType){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.AD_PRODUCT_TOUR),params.setParam(UrlConstants.AGENT_TYPE,agentType),this.navigationService.navigateTo(params.toString())},HomeViewService.prototype.viewProductTour=function(){this.viewLocation(NavigationDataConstants.AD_PRODUCT_TOUR)},HomeViewService.prototype.viewAgentInstallWizard=function(agentType){if(this._homeViewData&&!this._homeViewData.agentDownloadWizardEnabled)this.notificationService.displayError(this.getString("ms_noAgentDownloadPermissionsError"),"");else{var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.AGENT_INSTALL_WIZARD),agentType&&params.setParam(UrlConstants.AGENT_TYPE,agentType),this.navigationService.navigateTo(params.toString())}},HomeViewService.prototype.viewAgentList=function(){this.viewLocation(NavigationDataConstants.SETTINGS_AGENTS)},HomeViewService.prototype.viewDBAgentSettings=function(){this.viewLocation(NavigationDataConstants.SETTINGS_DB_AGENTS)},HomeViewService.prototype.viewDeployerAgentConfig=function(){this.viewLocation(NavigationDataConstants.SETTINGS_DEPLOYER_AGENT_CONFIG)},HomeViewService.prototype.viewAdministration=function(){this.viewLocation(NavigationDataConstants.SETTINGS_ADMIN)},HomeViewService.prototype.viewLicense=function(){this.viewLocation(NavigationDataConstants.SETTINGS_LICENSE)},HomeViewService.prototype.viewUserPreferences=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.SETTINGS_USER_PREFERENCES),"Microsoft Internet Explorer"==navigator.appName&&FlashService.instance().setUserPreferences("setHelpPopUpFlagIE","true"),this.navigationService.navigateTo(params.toString())},HomeViewService.prototype.viewSettingsHome=function(){this.viewLocation(NavigationDataConstants.SETTINGS_HOME)},HomeViewService.prototype.getHomeLocationBarEntryConfig=function(){var _this=this,config={};return config.clickFn=function(){_this.viewHome()},config.label=this.getString("ms_home"),config},HomeViewService.prototype.getProductTourLocationBarEntryConfig=function(){var _this=this,config={};return config.clickFn=function(){_this.viewProductTour()},config.label=this.getString("ms_product_tour"),config},HomeViewService.prototype.getGettingStartedWizardLocationBarConfig=function(currentScreenTitle){var _this=this,currentWizardLocation={};currentWizardLocation.label=this.getString("ms_agentInstallSetupWizard")+" - "+currentScreenTitle;var wizardStartLocation={};wizardStartLocation.label=this.getString("ms_agentInstallSetupWizard"),wizardStartLocation.clickFn=function(){_this.viewGettingStarted()};var configs=[];configs.push(this.getHomeLocationBarEntryConfig()),configs.push(wizardStartLocation),configs.push(currentWizardLocation);var config={};return config.hideRefresh=!0,config.hideTimeRange=!0,config.locationBarEntryConfigs=configs,config},HomeViewService.prototype.setHomeViewdata=function(homeViewData){this._homeViewData=homeViewData},HomeViewService.prototype.isHomeLocation=function(location){return-1!=[NavigationDataConstants.AD_HOME_OVERVIEW,NavigationDataConstants.AD_PLATFORM_HOME,NavigationDataConstants.AD_GETTING_STARTED_HOME].indexOf(location)},HomeViewService.SERVICE_NAME="homeViewService",HomeViewService.$inject=["$location","navigationService","notificationService","resourceManager"],HomeViewService.gettingStatedWasViewed=!1,HomeViewService}(ViewServiceBase);adComponentsModule.service(HomeViewService.SERVICE_NAME,HomeViewService),define("app/view/home/HomeViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AlertRespondViewService=function(_super){function AlertRespondViewService(){var _this=this;_super.call(this,InjectorService.instance().$location(),NavigationService.instance(),NotificationService.instance(),InjectorService.instance().resourceManager()),this.lastVisitedApplicationId=-1,EventBusService.instance().registerEventListener(NavigationService.UEV_NAV_ACTION,function(){var appIdOnUrl=URLParams.getCurrentUrlParams().applicationId();Util.isValidId(appIdOnUrl)&&(_this.lastVisitedApplicationId=appIdOnUrl)},null)}return __extends(AlertRespondViewService,_super),AlertRespondViewService.instance=function(){return AngularUtil.getADInjector().get(AlertRespondViewService.SERVICE_NAME)},AlertRespondViewService.prototype.viewAlertRespondHome=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();this.setupUrlParamsAppId(params,applicationId),params.setParam(UrlConstants.LOCATION,NavigationDataConstants.ALERT_RESPOND_HOME),this.navigationService.navigateTo(params.toString())
},AlertRespondViewService.prototype.viewPolicies=function(applicationId){var params=this.createUrlParamsForLocation(NavigationDataConstants.ALERT_RESPOND_POLICIES);this.setupUrlParamsAppId(params,applicationId),this.navigationService.navigateTo(params.toString())},AlertRespondViewService.prototype.viewHealthRules=function(applicationId){var params=this.createUrlParamsForLocation(NavigationDataConstants.ALERT_RESPOND_HEALTH_RULES);this.setupUrlParamsAppId(params,applicationId),this.navigationService.navigateTo(params.toString())},AlertRespondViewService.prototype.viewActions=function(applicationId){var params=this.createUrlParamsForLocation(NavigationDataConstants.ALERT_RESPOND_ACTIONS);this.setupUrlParamsAppId(params,applicationId),this.navigationService.navigateTo(params.toString())},AlertRespondViewService.prototype.viewActionSuppression=function(applicationId){var params=this.createUrlParamsForLocation(NavigationDataConstants.ALERT_RESPOND_ACTION_SUPPRESSION);this.setupUrlParamsAppId(params,applicationId),this.navigationService.navigateTo(params.toString())},AlertRespondViewService.prototype.getActionsLocationBarEntryConfig=function(applicationId){var _this=this,config={};return config.label=resourceManager.getString("ui","ms_actions"),config.clickFn=function(){_this.viewActions(applicationId)},config},AlertRespondViewService.prototype.getActionSuppressionLocationBarEntryConfig=function(applicationId){var _this=this,config={};return config.label=resourceManager.getString("ui","ms_actions"),config.clickFn=function(){_this.viewActionSuppression(applicationId)},config},AlertRespondViewService.prototype.viewEmailDigests=function(applicationId){var params=this.createUrlParamsForLocation(NavigationDataConstants.ALERT_RESPOND_EMAIL_DIGESTS);this.setupUrlParamsAppId(params,applicationId),this.navigationService.navigateTo(params.toString())},AlertRespondViewService.prototype.getAlertRespondHomeLocationBarEntryConfig=function(applicationId){return this.getLocationBarEntryConfig("ms_aletAndRespondTopLevelNavZoneLabel",applicationId)},AlertRespondViewService.prototype.getPoliciesLocationBarEntryConfig=function(applicationId){return this.getLocationBarEntryConfig("ms_eventReactors",applicationId)},AlertRespondViewService.prototype.getHealthRulesLocationBarEntryConfig=function(applicationId){return this.getLocationBarEntryConfig("ms_policyTemplates",applicationId)},AlertRespondViewService.prototype.getEmailDigestLocationBarEntryConfig=function(applicationId){return this.getLocationBarEntryConfig("ms_email_digests",applicationId)},AlertRespondViewService.prototype.viewPolicySetupWizard=function(applicationId,userInitiated){Util.isValidId(applicationId)&&FlashService.instance().viewAlertActGettingStartedFromHTML(applicationId,!1,userInitiated)},AlertRespondViewService.prototype.getLocationBarEntryConfig=function(labelKey,applicationId){var _this=this;return{label:resourceManager.getString("ui",labelKey),clickFn:function(){_this.viewPolicies(applicationId)}}},AlertRespondViewService.prototype.setupUrlParamsAppId=function(urlParams,applicationId){var appIdToSetOnParams=-1;appIdToSetOnParams=Util.isValidId(applicationId)?applicationId:Util.isValidId(this.lastVisitedApplicationId)?this.lastVisitedApplicationId:URLParams.getCurrentUrlParams().applicationId(),Util.isValidId(appIdToSetOnParams)&&urlParams.setNumberParam(UrlConstants.APPLICATION_ID,appIdToSetOnParams)},AlertRespondViewService.SERVICE_NAME="alertRespondViewService",AlertRespondViewService}(ViewServiceBase);adComponentsModule.service(AlertRespondViewService.SERVICE_NAME,AlertRespondViewService),define("app/view/alertRespond/AlertRespondViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},HttpActionViewService=function(_super){function HttpActionViewService($location,$dialog,navigationService,notificationService,resourceManager){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.$dialog=$dialog,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager}return __extends(HttpActionViewService,_super),HttpActionViewService.instance=function(){return AngularUtil.getADInjector().get(HttpActionViewService.SERVICE_NAME)},HttpActionViewService.prototype.viewHttpActionPlanListView=function(){var params=new URLParams(this.$location.path());params.removeParam(UrlConstants.TIME_RANGE),params.removeParam(UrlConstants.HTTP_ACTION_PLAN_ID),params.setParam(UrlConstants.LOCATION,NavigationDataConstants.ALERT_RESPOND_HTTP_ACTION_PLAN_LIST),this.navigationService.navigateTo(params.toString())},HttpActionViewService.prototype.viewHttpActionPlan=function(planId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.ALERT_RESPOND_HTTP_ACTION_PLAN_DETAIL),params.setNumberParam(UrlConstants.HTTP_ACTION_PLAN_ID,planId),this.navigationService.navigateTo(params.toString())},HttpActionViewService.prototype.showHttpActionTestDialog=function(planId){var dialogData={planId:planId};DialogService.instance().showDialog("","app/view/alertRespond/actions/http/template/testAction/HttpActionTestDialogController","app/view/alertRespond/actions/http/template/testAction/HttpActionTestDialog.html",dialogData)},HttpActionViewService.prototype.showManageMediaTypesDialog=function(){DialogService.instance().showDialog("","app/view/alertRespond/actions/http/template/mediaType/ManageMediaTypesDialogController","app/view/alertRespond/actions/http/template/mediaType/ManageMediaTypesDialog.html")},HttpActionViewService.prototype.showCreateMediaTypesDialog=function(){DialogService.instance().showDialog("","app/view/alertRespond/actions/http/template/mediaType/CreateMediaTypeDialogController","app/view/alertRespond/actions/http/template/mediaType/CreateMediaTypeDialog.html")},HttpActionViewService.prototype.showCreateHttpAction=function(editMode,actionId,callback){void 0===callback&&(callback=null);var dialogData={editMode:editMode,actionId:actionId};DialogService.instance().showDialog("","app/view/alertRespond/actions/http/action/HttpRequestActionDialogController","app/view/alertRespond/actions/http/action/HttpRequestActionDialog.html",dialogData).then(function(instance){instance.result.then(function(){callback&&callback()})})},HttpActionViewService.SERVICE_NAME="httpActionViewService",HttpActionViewService.$inject=["$location","$dialog","navigationService","notificationService","resourceManager"],HttpActionViewService}(ViewServiceBase);adComponentsModule.service(HttpActionViewService.SERVICE_NAME,HttpActionViewService),define("app/view/alertRespond/HttpActionViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EmailActionViewService=function(_super){function EmailActionViewService($location,navigationService,notificationService,resourceManager){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager}return __extends(EmailActionViewService,_super),EmailActionViewService.instance=function(){return AngularUtil.getADInjector().get(EmailActionViewService.SERVICE_NAME)},EmailActionViewService.prototype.viewEmailActionPlanListView=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.ALERT_RESPOND_EMAIL_ACTION_PLAN_LIST),this.navigationService.navigateTo(params.toString())},EmailActionViewService.prototype.viewEmailActionPlan=function(planId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.ALERT_RESPOND_EMAIL_ACTION_PLAN_DETAIL),params.setNumberParam(UrlConstants.EMAIL_ACTION_PLAN_ID,planId),this.navigationService.navigateTo(params.toString())},EmailActionViewService.prototype.showCreateEmailAction=function(editMode,actionId,callback){void 0===callback&&(callback=null);var dialogData={editMode:editMode,actionId:actionId};DialogService.instance().showDialog("","app/view/alertRespond/actions/email/action/EmailActionDialogController","app/view/alertRespond/actions/email/action/EmailActionDialog.html",dialogData).then(function(instance){instance.result.then(function(){callback&&callback()})})},EmailActionViewService.prototype.showEmailActionTestDialog=function(planId){var dialogData={planId:planId};DialogService.instance().showDialog("","app/view/alertRespond/actions/email/template/testAction/EmailActionTestDialogController","app/view/alertRespond/actions/email/template/testAction/EmailActionTestDialog.html",dialogData)},EmailActionViewService.SERVICE_NAME="emailActionViewService",EmailActionViewService.$inject=["$location","navigationService","notificationService","resourceManager"],EmailActionViewService}(ViewServiceBase);adComponentsModule.service(EmailActionViewService.SERVICE_NAME,EmailActionViewService),define("app/view/alertRespond/services/EmailActionViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},HttpActionUiService=function(_super){function HttpActionUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(HttpActionUiService,_super),HttpActionUiService.instance=function(){return AngularUtil.getADInjector().get("httpActionUiService")},HttpActionUiService.prototype.getSupportedEventTypes=function(){var path="restui/httpaction/getSupportedEventTypes",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","getSupportedEventTypes",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HttpActionUiService.prototype.getSupportedEventTypes_response=function(response){return response},HttpActionUiService.prototype.createHttpRequestActionPlan=function(arg0){var path="restui/httpaction/createHttpRequestActionPlan",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","createHttpRequestActionPlan",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["payload.contentType.createdOn","payload.contentType.modifiedOn","responseMatchCriteriaAny.contentType.createdOn","responseMatchCriteriaAny.contentType.modifiedOn","responseMatchCriteriaNone.contentType.createdOn","responseMatchCriteriaNone.contentType.modifiedOn","createdOn","modifiedOn"]),response})},HttpActionUiService.prototype.createHttpRequestActionPlan_response=function(response){return response},HttpActionUiService.prototype.updateHttpRequestActionPlan=function(arg0){var path="restui/httpaction/updateHttpRequestActionPlan",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","updateHttpRequestActionPlan",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["payload.contentType.createdOn","payload.contentType.modifiedOn","responseMatchCriteriaAny.contentType.createdOn","responseMatchCriteriaAny.contentType.modifiedOn","responseMatchCriteriaNone.contentType.createdOn","responseMatchCriteriaNone.contentType.modifiedOn","createdOn","modifiedOn"]),response})},HttpActionUiService.prototype.updateHttpRequestActionPlan_response=function(response){return response},HttpActionUiService.prototype.getHttpRequestActionPlan=function(planId){var path="restui/httpaction/getHttpRequestActionPlan/"+planId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","getHttpRequestActionPlan",path,[planId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["payload.contentType.createdOn","payload.contentType.modifiedOn","responseMatchCriteriaAny.contentType.createdOn","responseMatchCriteriaAny.contentType.modifiedOn","responseMatchCriteriaNone.contentType.createdOn","responseMatchCriteriaNone.contentType.modifiedOn","createdOn","modifiedOn"]),response})},HttpActionUiService.prototype.getHttpRequestActionPlan_response=function(response){return response},HttpActionUiService.prototype.testHttpRequestActionPlan=function(arg0){var path="restui/httpaction/testHttpRequestActionPlan",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","testHttpRequestActionPlan",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HttpActionUiService.prototype.testHttpRequestActionPlan_response=function(response){return response},HttpActionUiService.prototype.getHttpRequestActionPlanList=function(){var path="restui/httpaction/getHttpRequestActionPlanList",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","getHttpRequestActionPlanList",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["payload.contentType.createdOn","payload.contentType.modifiedOn","responseMatchCriteriaAny.contentType.createdOn","responseMatchCriteriaAny.contentType.modifiedOn","responseMatchCriteriaNone.contentType.createdOn","responseMatchCriteriaNone.contentType.modifiedOn","createdOn","modifiedOn"]),response})},HttpActionUiService.prototype.getHttpRequestActionPlanList_response=function(response){return response},HttpActionUiService.prototype.deleteHttpRequestActionPlan=function(arg0){var path="restui/httpaction/deleteHttpRequestActionPlan",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","deleteHttpRequestActionPlan",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HttpActionUiService.prototype.getHttpRequestActionMediaTypes=function(){var path="restui/httpaction/getHttpRequestActionMediaTypes",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","getHttpRequestActionMediaTypes",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn","modifiedOn"]),response})},HttpActionUiService.prototype.getHttpRequestActionMediaTypes_response=function(response){return response},HttpActionUiService.prototype.createHttpRequestActionMediaType=function(arg0){var path="restui/httpaction/createHttpRequestActionMediaType",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","createHttpRequestActionMediaType",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn","modifiedOn"]),response})},HttpActionUiService.prototype.createHttpRequestActionMediaType_response=function(response){return response},HttpActionUiService.prototype.deleteHttpRequestActionMediaType=function(arg0){var path="restui/httpaction/deleteHttpRequestActionMediaType",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","deleteHttpRequestActionMediaType",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HttpActionUiService.prototype.createHttpRequestAction=function(arg0){var path="restui/httpaction/createHttpRequestAction",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","createHttpRequestAction",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HttpActionUiService.prototype.createHttpRequestAction_response=function(response){return response},HttpActionUiService.prototype.updateHttpRequestAction=function(arg0){var path="restui/httpaction/updateHttpRequestAction",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","updateHttpRequestAction",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HttpActionUiService.prototype.updateHttpRequestAction_response=function(response){return response},HttpActionUiService.prototype.getHttpRequestAction=function(actionId){var path="restui/httpaction/getHttpRequestAction/"+actionId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","getHttpRequestAction",path,[actionId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HttpActionUiService.prototype.getHttpRequestAction_response=function(response){return response},HttpActionUiService.prototype.describe=function(){var path="restui/httpaction/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HttpActionUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HttpActionUiService.prototype.describe_response=function(response){return response},HttpActionUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],HttpActionUiService}(ControllerUiServiceBase);adComponentsModule.service("httpActionUiService",HttpActionUiService),define("lib/controller/services/alertRespond/actions/HttpActionUiService",function(){}),require(["app/view/alertRespond/AlertRespondViewService","app/view/alertRespond/HttpActionViewService","app/view/alertRespond/services/EmailActionViewService","lib/controller/services/alertRespond/actions/HttpActionUiService"]),define("app/view/alertRespond/AlertRespondModuleCode",function(){});var ForgotPasswordController=function(){function ForgotPasswordController($scope,dialog,userUiService,notificationService){var _this=this;$scope.controller=this,this._dialog=dialog,this._scope=$scope,this._scope.account="customer1",this._userUiService=userUiService,this._notificationService=notificationService,this.dialogTitle=this.getString("ms_forgotPassword"),null!=dialog&&dialog.hasOwnProperty("options")&&dialog.options.hasOwnProperty("showAccount")&&1==dialog.options.showAccount?(this._scope.showAccount=!0,this.dialogMessage=this.getString("ms_forgotPasswordMessageWithAccount")):(this._scope.showAccount=!1,this.dialogMessage=this.getString("ms_forgotPasswordMessage")),$scope.onCancel=function(){_this.cancel()},$scope.onSubmit=function(){_this.submit()}}return ForgotPasswordController.prototype.submit=function(){var _this=this;this._dialog.close(),this._userUiService.resetPassword(this._scope.account,this._scope.username).then(function(){_this._notificationService.displayMessage(ResourceManager.instance().getString("ui","ms_passwordResetMessage"),"")})},ForgotPasswordController.prototype.cancel=function(){this._dialog.close()},ForgotPasswordController.prototype.getString=function(key){return ResourceManager.instance().getString("ui",key)},ForgotPasswordController.$inject=["$scope","dialog","userUiService","notificationService"],ForgotPasswordController}();define("app/view/common/dialogs/forgotPassword/ForgotPasswordController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},LoginController=function(_super){function LoginController($scope,$location,$http,$routeParams,flashService,userService,restService,$dialog,notificationService,userUiService,masterService,resourceManager,appConfig){function successfulLogin(){$scope.showLoginMessage("",!1),$scope.loggingIn=!1,masterService.onAuthenticateSuccess($scope.userName,$scope.password),flashService.onAuthenticateSuccess($scope.userName,$scope.password),$scope.loggingIn=!1}function getParamDirectly(sname){for(var temp,params_str=location.search.substr(location.search.indexOf("?")+1),sval="",params=params_str.split("&"),i=0;i<params.length;i++)temp=params[i].split("="),temp[0]==sname&&(sval=temp[1]);return sval}function post_to_url(path,params,method){method=method||"post";var form=document.createElement("form");form.setAttribute("method",method),form.setAttribute("action",path);for(var key in params)if(params.hasOwnProperty(key)){var hiddenField=document.createElement("input");hiddenField.setAttribute("type","hidden"),hiddenField.setAttribute("name",key),hiddenField.setAttribute("value",params[key]),form.appendChild(hiddenField)}document.body.appendChild(form),form.submit()}_super.call(this,$scope,resourceManager,notificationService),this.$location=$location,this.masterService=masterService,this.resourceManager=resourceManager,this.appConfig=appConfig,$scope.isIE9orLess=BrowserUtils.isBrowserInternetExplorer9orLess(),$scope.forceLocalLogin=URLParams.getCurrentUrlParams().getBooleanParam(LoginController.URL_PARAM_LOCAL_LOGIN,!1);var url=new URLParams($location.path()),passwordResetToken=url.getParam("password-reset-token");null!=passwordResetToken&&passwordResetToken.length>0&&(url.removeParam("password-reset-token"),URLUtil.setLocationHashNoHistory(url.toString()),DialogService.instance().showDialog("CompleteResetPasswordController","app/view/common/dialogs/CompleteResetPasswordDialog/CompleteResetPasswordController","app/view/common/dialogs/CompleteResetPasswordDialog/CompleteResetPassword.html",passwordResetToken)),$scope.showLoginMessage=function(message,error){error?($scope.loginError=message,$scope.loginMessage=""):($scope.loginMessage=message,$scope.loginError="")},$scope.buildBasicAuthHeader=function(username,password){return"Basic "+window.Base64.encode(encodeURIComponent(username)+":"+encodeURIComponent(password))},$scope.handleSubmit=function(username,password){if(void 0===username&&(username=null),void 0===password&&(password=null),$scope.loggingIn=!0,$scope.showLoginMessage("Logging in...",!1),$scope.rememberUserName===!0||"true"===$scope.rememberUserName){ADLoggerService.log("Checkbox was checked; remembering login data");var expirationDate=BrowserUtils.getDefaultCookieExpirationDate();BrowserUtils.setCookie(LoginController.REMEMBER_USER,$scope.userName,{expires:expirationDate}),BrowserUtils.setCookie(LoginController.REMEMBER_ACCOUNT,$scope.accountName,{expires:expirationDate}),BrowserUtils.setCookie(LoginController.REMEMBER_USER_ACCOUNT,"true",{expires:expirationDate})}else ADLoggerService.log("Checkbox was not-checked; clearing login data"),BrowserUtils.expireCookie(LoginController.REMEMBER_USER,{}),BrowserUtils.expireCookie(LoginController.REMEMBER_ACCOUNT,{}),BrowserUtils.expireCookie(LoginController.REMEMBER_USER_ACCOUNT,{});$scope.isAccountEnabled||($scope.accountName="customer1");var userAccountName=$scope.userName+"@"+$scope.accountName,authHeader=$scope.buildBasicAuthHeader(userAccountName,$scope.password);if($http.defaults.headers.common.Authorization=authHeader,$scope.isSAMLLoginEnabled())return void $scope.authenticateWithSAML();var loginUrl="auth?action=login";$http.get(loginUrl).success(function(response,status){response&&response.toString().startsWith("<!DOCTYPE html")||status==LoginController.RESPONSE_CODE_AUTH_FAILURE?($scope.showLoginMessage("Login failed",!0),$scope.loggingIn=!1):successfulLogin(response)}).error(function(error){ADLoggerService.log("login error:"+error),$scope.showLoginMessage("Login failed",!0),$scope.loggingIn=!1})},$scope.handleURLBasedLogin=function(accountName,userName,password){void 0===userName&&(userName=null),void 0===password&&(password=null),$scope.loggingIn=!0,$scope.showLoginMessage("Logging In",!1);var userAccountName=userName+"@"+accountName,authHeader=$scope.buildBasicAuthHeader(userAccountName,password);$http.defaults.headers.common.Authorization=authHeader;var loginUrl="auth?action=login";$http.get(loginUrl).success(function(response){response&&response.toString().startsWith("<!DOCTYPE html")&&($scope.showLoginMessage("Login failed",!0),$scope.loggingIn=!1),successfulLogin(response)}).error(function(){$scope.showLoginMessage("Login failed",!0),$scope.loggingIn=!1})},$scope.handleTokenBasedLogin=function(token){$scope.loggingIn=!0,$scope.showLoginMessage("Logging In",!1),$http.defaults.headers.common["Auth-Token"]="Token "+token;var loginUrl="auth?action=login";$http.get(loginUrl).success(function(response){response&&response.toString().startsWith("<!DOCTYPE html")&&($scope.showLoginMessage("Login failed",!0),$scope.loggingIn=!1),delete $location.$$search.saas_token,successfulLogin(response)}).error(function(){$scope.showLoginMessage("Login failed",!0),$scope.loggingIn=!1})},$scope.handleAccountChange=function(){$scope.checkSAML()},$scope.handleForgotPassword=function(){require(["app/view/common/dialogs/forgotPassword/ForgotPasswordController"],function(){var opts={backdrop:!0,keyboard:!0,backdropClick:!0,controller:ForgotPasswordController,templateUrl:"app/view/common/dialogs/forgotPassword/ForgotPassword.html",showAccount:$scope.multiTenant},dlg=$dialog.dialog(opts);dlg.open(),$scope.$apply()})},$scope.onForceLocalLogin=function(){URLUtil.setParamInUrl(LoginController.URL_PARAM_LOCAL_LOGIN,"true"),$scope.forceLocalLogin=!0},$scope.isSAMLLoginEnabled=function(){return $scope.isSAML&&!$scope.forceLocalLogin},$scope.checkSAML=function(){if(!$scope||!$scope.accountName||0==$scope.accountName.length)return void($scope.isSAML=!1);if(!$scope.forceLocalLogin){var querySecurityProviderURL="public-info?action=query-security-provider&account-name="+$scope.accountName;$http.get(querySecurityProviderURL).success(function(securityProvider){if(securityProvider=securityProvider.replace(/^\s+|\s+$/g,""),$scope.isSAML="SAML"==securityProvider,$scope.isSAML){var getSAMLAuthRequestInfoURL="saml-auth?action=get-saml-auth-request-info&account-name="+$scope.accountName+"&requested-url="+window.Base64.encode(encodeURI($location.absUrl()));$http.get(getSAMLAuthRequestInfoURL).success(function(authRequestInfo){var tokens=authRequestInfo.split("\n");if(null!=tokens)for(var t=0;t<tokens.length;t++){var parameterName=StringUtils.getEverythingBeforeToken(tokens[t],"=");if(null!=parameterName&&0!=parameterName.length){var parameterValue=StringUtils.getEverythingAfterToken(tokens[t],"=");null!=parameterValue&&0!=parameterValue.length&&("URL"==parameterName?$scope.samlUrl=parameterValue:"SAMLRequest"==parameterName?$scope.samlRequest=parameterValue:"RelayState"==parameterName&&($scope.relayState=parameterValue))}}$scope.loginMessage=""}).error(function(){$scope.showLoginMessage("Error checking SAML",!0)})}}).error(function(error){ADLoggerService.error(error),$scope.showLoginMessage("Error checking Security provider",!0)})}},$scope.checkForMultiTenant=function(){var isControllerMultiTenantURL="public-info?action=is-controller-multi-tenant";$http.get(isControllerMultiTenantURL).success(function(result){var multiTenant=result.replace(/(\r\n|\n|\r)/gm,"");$scope.multiTenant="true"==multiTenant,masterService.isMultiTenantController=$scope.multiTenant;var accountParamDirectAccess=getParamDirectly(UrlConstants.ACCOUNT_NAME);$scope.accountName=url.hasParam(UrlConstants.ACCOUNT_NAME)?url.getParam(UrlConstants.ACCOUNT_NAME):""!==accountParamDirectAccess?accountParamDirectAccess:$scope.multiTenant?BrowserUtils.getCookie(LoginController.REMEMBER_ACCOUNT):"customer1",$scope.isSAML=!1,$scope.checkSAML(),$scope.loggingIn=!1,$scope.isAccountEnabled=$scope.multiTenant||$scope.showController}).error(function(){$scope.loggingIn=!1,$scope.showLoginMessage("Cannot login while system is initializing; try again later.",!0)})},$scope.authenticateWithSAML=function(){var urlAsString=$scope.samlUrl,data={SAMLRequest:$scope.samlRequest,RelayState:$scope.relayState};post_to_url(urlAsString,data)};var showController=(new URLParams($location.path()),appConfig.enableAccountsAndShowController);$scope.userName=BrowserUtils.getCookie(LoginController.REMEMBER_USER),$scope.accountName=BrowserUtils.getCookie(LoginController.REMEMBER_ACCOUNT),$scope.rememberUserName=BrowserUtils.getCookie(LoginController.REMEMBER_USER_ACCOUNT),$scope.password="",$scope.showController=showController,$scope.multiTenant=showController,$scope.checkForMultiTenant(),$scope.isAccountEnabled=$scope.multiTenant||$scope.showController,$scope.checkAuthorization=function(){$http({method:"GET",url:"auth?action=login"}).success(function(data,status){restService.isErrorResult(data,status)?$scope.$parent.showLogin():successfulLogin(data)
}).error(function(){var params=new URLParams($location.path());if(params.hasParam(LoginController.URL_PARAM_ACTION)&&params.getParam(LoginController.URL_PARAM_ACTION)==LoginController.URL_PARAM_LOGIN_ACTION){if(params.hasParam(LoginController.URL_PARAM_TOKEN))$scope.handleTokenBasedLogin(params.getParam(LoginController.URL_PARAM_TOKEN));else if(params.hasParam(LoginController.URL_PARAM_ACCT_NAME)&&params.hasParam(LoginController.URL_PARAM_USERNAME)&&params.hasParam(LoginController.URL_PARAM_PASSWORD)){var account=LoginController.decrypt(params.getParam(LoginController.URL_PARAM_ACCT_NAME)),user=LoginController.decrypt(params.getParam(LoginController.URL_PARAM_USERNAME)),password=LoginController.decrypt(params.getParam(LoginController.URL_PARAM_PASSWORD));$scope.handleURLBasedLogin(account,user,password)}}else $scope.$parent.showLogin()})};var version=resourceManager.getString("version","version"),buildNumber=resourceManager.getString("version","buildNumber");$scope.buildVersion="Version "+version+", build "+buildNumber,masterService.isSharedDashboardPageRequestWithToken()?successfulLogin({}):$scope.checkAuthorization(),this.showSessionTimeoutMessageIfNecessary()}return __extends(LoginController,_super),LoginController.decrypt=function(str){str=decodeURI(str);for(var charArray=new Array,i=0;i<str.length;i++)charArray.push(String.fromCharCode(str.charCodeAt(i)-(i%2==0?2:3)));return charArray.reverse().join("")},LoginController.prototype.showSessionTimeoutMessageIfNecessary=function(){var tokenVal=this.$location.search()[MasterService.URL_PARAM_SHOW_TIMEOUT_POPUP],showTimeoutPopup=tokenVal&&"true"==tokenVal.toString();showTimeoutPopup&&(DialogService.instance().showConfirmation(ResourceManager.instance().getString("ui","ms_sessionTimeoutTitle"),ResourceManager.instance().getString("ui","ms_sessionTimeoutText"),null,null,ResourceManager.instance().getString("ui","ms_ok"),"",!1),this.$location.search(MasterService.URL_PARAM_SHOW_TIMEOUT_POPUP,null))},LoginController.REDIRECT_AFTER_LOGIN="redirect-after-login",LoginController.REMEMBER_USER_ACCOUNT="ad-remember-user-account",LoginController.REMEMBER_USER="ad-remember-user",LoginController.REMEMBER_ACCOUNT="ad-remember-account",LoginController.DEFAULT_ACCOUNT_NAME="customer1",LoginController.SHOW_CONTROLLER="showController",LoginController.URL_PARAM_ACCT_NAME="bgtr",LoginController.URL_PARAM_USERNAME="ert",LoginController.URL_PARAM_PASSWORD="yui",LoginController.URL_PARAM_ACTION="action",LoginController.URL_PARAM_LOGIN_ACTION="LOGIN",LoginController.URL_PARAM_TOKEN="token",LoginController.URL_PARAM_LOCAL_LOGIN="localLogin",LoginController.RESPONSE_CODE_AUTH_FAILURE=499,LoginController.$inject=["$scope","$location","$http","$routeParams","flashService","userService","restService","$dialog","notificationService","userUiService","masterService","resourceManager","AppConfig"],LoginController}(ControllerBase);define("app/view/LoginView/LoginController",function(){});var LogoutController=function(){function LogoutController($scope,$http,masterService){$scope.logout=function(){masterService.logout()}}return LogoutController.$inject=["$scope","$http","masterService"],LogoutController}();define("app/view/LoginView/LogoutController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},LeftNavControllerBase=function(_super){function LeftNavControllerBase($scope){var _this=this;_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.isUserAnalyticsWebEnabled=!1,this.isUserAnalyticsMobileEnabled=!1,this.selectedLeftNavItem="",this.minimized=!1,this.minimizedTooltipTrigger="false",this.locationToNavItemMap={},MasterService.instance().onInitDataFetch().then(function(){var featureService=InjectorService.instance().featureService();_this.isUserAnalyticsWebEnabled=featureService.isWebEUMProEnabled(),_this.isUserAnalyticsMobileEnabled=featureService.isMobileEUMProEnabled()}),this.setupInternal()}return __extends(LeftNavControllerBase,_super),LeftNavControllerBase.prototype.initPostLogin=function(){},LeftNavControllerBase.prototype.on_UEV_NAV_ACTION=function(){},LeftNavControllerBase.prototype.setupLocationToNavItemMappings=function(){},LeftNavControllerBase.prototype.setupEventListeners=function(){},LeftNavControllerBase.prototype.setupLeftMenuBarBasedOnCurrentLocation=function(){var currentLocation=URLParams.getCurrentUrlParams().location();this.selectedLeftNavItem=this.getSelectedNavItemForLocation(currentLocation)},LeftNavControllerBase.prototype.setupMinimized=function(){var _this=this;LeftMenuBarController.instance()&&this.setMinimized(LeftMenuBarController.instance().$scope.collapsed),EventBusService.instance().registerEventListener(NavigationService.UEV_LEFT_NAV_MINIMIZED_TOGGLE,function(minimized){_this.setMinimized(minimized)},this.$scope)},LeftNavControllerBase.prototype.getSelectedNavItemForLocation=function(navLocation){var navLocation=this.locationToNavItemMap[navLocation];return navLocation===LeftNavControllerBase.NAV_ITEM_TBD?this.selectedLeftNavItem:navLocation},LeftNavControllerBase.prototype.mapLocationToNavItem=function(navLocation,selectedNavItem){this.locationToNavItemMap[navLocation]=selectedNavItem},LeftNavControllerBase.prototype.setupInternal=function(){var _this=this;InjectorService.instance().$rootScope().$on(NavigationService.UEV_NAV_ACTION_HTML,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];_this.on_UEV_NAV_ACTION()}),InjectorService.instance().$rootScope().$on(NavigationService.UEV_NAV_ACTION_FLASH,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];_this.on_UEV_NAV_ACTION();try{ViewUtil.safeDigest(_this.$scope)}catch(e){ADLoggerService.log("LeftNavControllerBase on on_UEV_NAV_ACTION_FLASH Error:"+e)}}),MasterService.instance().onInitDataFetch().then(function(){_this.initPostLogin()}),this.setupLocationToNavItemMappings(),this.setupEventListeners(),this.setupMinimized(),InjectorService.instance().$timeout()(function(){_this.setupLeftMenuBarBasedOnCurrentLocation()},10)},LeftNavControllerBase.prototype.on_UEV_NAV_ACTION_internal=function(){this.on_UEV_NAV_ACTION()},LeftNavControllerBase.prototype.setMinimized=function(minimized){this.minimized=minimized,this.minimizedTooltipTrigger=this.minimized?LeftNavControllerBase.MINIMIZED_TOOLTIP_TRIGGER_ENABLED_VAL:"false"},LeftNavControllerBase.MINIMIZED_TOOLTIP_TRIGGER_ENABLED_VAL="mouseenter",LeftNavControllerBase.NAV_ITEM_TBD="NAV_ITEM_TBD",LeftNavControllerBase.$inject=["$scope"],LeftNavControllerBase}(ControllerBase);define("app/view/leftMenuBar/LeftNavControllerBase",function(){});var LeftMenuBarController=function(){function LeftMenuBarController($scope,$location,$rootScope,$timeout,flashService,navigationUiService,appConfig,navigationService,notificationService,allApplicationsUiService,customDashboardViewService,homeViewService,applicationViewService){function layoutChanged(){$rootScope.$broadcast("layoutChanged")}var _this=this;this.$scope=$scope,this.$location=$location,this.$rootScope=$rootScope,this.$timeout=$timeout,this.navigationUiService=navigationUiService,this.navigationService=navigationService,this.notificationService=notificationService,this.allApplicationsUiService=allApplicationsUiService,this.customDashboardViewService=customDashboardViewService,this.homeViewService=homeViewService,this.applicationViewService=applicationViewService,this.navigationState=NavigationService.instance().navigationState;var thisObject=this;$scope.controller=this,LeftMenuBarController._instance=this,window.leftMenuBarController=this,$scope.hidden=!1,$scope.openSection="unselected",$scope.setupLeftMenuBarBasedOnCurrentLocation=function(){var urlParams=URLParams.getCurrentUrlParams(),location=urlParams.location();if(!(location&&location.length>0&&-1!=$.inArray(location,LeftMenuBarController.LOCATIONS_NOT_IN_LEFT_NAV))){var topLevelNav=thisObject.getTopLevelNav();topLevelNav==NavigationService.TOP_LEVEL_NAV_DASHBOARDS_REPORTS?$scope.openSection="dashboardsReportsHeaderSection":topLevelNav==NavigationService.TOP_LEVEL_NAV_INFRASTRUCTURE?$scope.openSection="cloudScalingHeaderSection":topLevelNav==NavigationService.TOP_LEVEL_NAV_EUM?$scope.openSection=NavigationService.instance().isEumMobileLocation(urlParams.location())?"eumMobileHeaderSection":"eumWebHeaderSection":topLevelNav==NavigationService.TOP_LEVEL_NAV_ANALYTICS?$scope.openSection="analyticsHeaderSection":topLevelNav==NavigationService.TOP_LEVEL_NAV_DB_MONITORING?$scope.openSection="dbMonitoringHeaderSection":topLevelNav==NavigationService.TOP_LEVEL_NAV_SERVER_MONITORING?$scope.openSection="serverMonitoringHeaderSection":topLevelNav==NavigationService.TOP_LEVEL_NAV_ALERT_RESPOND?$scope.openSection="alertRespondHeaderSection":topLevelNav==NavigationService.TOP_LEVEL_NAV_APPLICATIONS&&thisObject.getCurrentUrlParams().hasParam(UrlConstants.APPLICATION_ID)&&($scope.openSection="appMenuSection")}},$(window).resize(layoutChanged),$scope.on_UEV_NAV_ACTION=function(){var currentTopLevelNav=(thisObject.getCurrentUrlParams().location(),thisObject.getTopLevelNav()),topLevelNavZoneChanged=!1;_this.previousUrlParamsVisited&&_this.navigationService.getTopLevelNav(_this.previousUrlParamsVisited.location())==currentTopLevelNav||(topLevelNavZoneChanged=!0),topLevelNavZoneChanged&&_this.broadcastLayoutChangedLater();var isNavHidden=NavigationService.instance().isLeftNavHidden();NavigationService.instance().navigationState.isLeftNavHidden=isNavHidden,$scope.hideLeftNav(isNavHidden),_this.previousUrlParamsVisited=thisObject.getCurrentUrlParams()},$rootScope.$on(NavigationService.UEV_NAV_ACTION_HTML,function(){if(!LeftMenuBarController.setupLeftNavOnLocationChange){$scope.setupLeftMenuBarBasedOnCurrentLocation();try{ViewUtil.safeDigest($scope,$rootScope)}catch(e){ADLoggerService.log("LeftMenuBarController on NavigationService.UEV_NAV_ACTION_HTML Error:"+e)}}$scope.on_UEV_NAV_ACTION()}),$rootScope.$on(NavigationService.UEV_NAV_ACTION_FLASH,function(){if(!LeftMenuBarController.setupLeftNavOnLocationChange){$scope.setupLeftMenuBarBasedOnCurrentLocation();try{ViewUtil.safeDigest($scope,$rootScope)}catch(e){ADLoggerService.log("LeftMenuBarController on NavigationService.UEV_NAV_ACTION_FLASH Error:"+e)}}$scope.on_UEV_NAV_ACTION()});var lastWidth=LeftMenuBarController.NAV_PANEL_WIDTH,collapsedWidth=LeftMenuBarController.NAV_PANEL_WIDTH_MINIMIZED;$scope.resizeContainer=function(newWidth){var leftNavContainer=$("#leftNavComp");leftNavContainer.css("width",newWidth),leftNavContainer.next().css("left",newWidth)},$scope.toggleCollapse=function(){var newWidth;$scope.collapsed?(newWidth=LeftMenuBarController.NAV_PANEL_WIDTH,BrowserUtils.setCookie(LeftMenuBarController.LEFT_NAV_MINIMIZED,"false","")):($scope.hidden||(lastWidth=flashService.getNavWidth()),newWidth=collapsedWidth,BrowserUtils.setCookie(LeftMenuBarController.LEFT_NAV_MINIMIZED,"true","")),$scope.collapsed=!$scope.collapsed,this.resizeContainer(newWidth),flashService.layoutFlash(),EventBusService.instance().dispatchEvent(NavigationService.UEV_LEFT_NAV_MINIMIZED_TOGGLE,$scope.collapsed),$rootScope.$broadcast(EventConstants.UEV_LAYOUT_CHANGED)},$scope.hideLeftNav=function(hide){if($scope.hidden!==hide){$scope.hidden||$scope.collapsed||(lastWidth=flashService.getNavWidth());var newWidth;newWidth=hide?0:$scope.collapsed?collapsedWidth:lastWidth,$scope.hidden=hide,this.resizeContainer(newWidth),flashService.layoutFlash(),$rootScope.$broadcast("layoutChanged")}},$scope.collapsed=!1,"true"!=BrowserUtils.getCookie(LeftMenuBarController.LEFT_NAV_MINIMIZED)||appConfig.admin||$scope.toggleCollapse(),this.init()}return LeftMenuBarController.instance=function(){return LeftMenuBarController._instance},LeftMenuBarController.prototype.init=function(){},LeftMenuBarController.prototype.getCurrentUrlParams=function(){return new URLParams(this.$location.path())},LeftMenuBarController.prototype.getTopLevelNav=function(){return NavigationService.instance().getTopLevelNav(this.getCurrentUrlParams().location())},LeftMenuBarController.prototype.broadcastLayoutChangedLater=function(){var _this=this;this.$timeout(function(){_this.$rootScope.$broadcast("layoutChanged")})},LeftMenuBarController.prototype.safeApplyScope=function(){ViewUtil.safeApply(this.$scope)},LeftMenuBarController.LEFT_NAV_MINIMIZED="LEFT_NAV_MINIMIZED",LeftMenuBarController.LOCATIONS_NOT_IN_LEFT_NAV=[NavigationDataConstants.APP_EVENT_VIEWER_MODAL],LeftMenuBarController.NAV_PANEL_WIDTH=256,LeftMenuBarController.NAV_PANEL_WIDTH_MINIMIZED=66,LeftMenuBarController.setupLeftNavOnLocationChange=!1,LeftMenuBarController.$inject=["$scope","$location","$rootScope","$timeout","flashService","navigationUiService","AppConfig","navigationService","notificationService","allApplicationsUiService","customDashboardViewService","homeViewService","applicationViewService"],LeftMenuBarController}();define("app/view/leftMenuBar/LeftMenuBarController",function(){});var APMLeftNavDirective=function(){function APMLeftNavDirective(){return{restrict:"E",replace:!1,scope:{},templateUrl:"app/view/leftMenuBar/apm/APMLeftNavView.html",controller:APMLeftNavController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return APMLeftNavDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-apm-left-nav"),APMLeftNavDirective),define("app/view/leftMenuBar/apm/APMLeftNavDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},APMLeftNavController=function(_super){function APMLeftNavController($scope){_super.call(this,$scope),this.$scope=$scope,this.applications=[],this.selectedApplication=null,this.applicationSelectedClassName="",this.isTroubleshootOpen=!1,this.isMoreOpen=!1,this.showSim=!1,this.featureService=this.sharedInjectorService.featureService(),this.showLinkToEumWeb=!1,this.hoverDropDownEnabled=!1,this.showAutomation=!1,this.databasesNavItemLabel=this.getString("ms_navItemApmDatabases"),this.isAllAppFetchInProgress=!1,$scope.controller=this}return __extends(APMLeftNavController,_super),APMLeftNavController.prototype.link=function(scope,iElement){this.element=iElement},APMLeftNavController.prototype.fetchAllApplications=function(forceRefresh){var _this=this;void 0===forceRefresh&&(forceRefresh=!1),this.isAllAppFetchInProgress=!0,ApplicationsCache.instance().getAllApplications(forceRefresh).then(function(){var applications=ApplicationsCache.instance().allApplications.apmApplications;_this.applications=applications,_this.updateSelectedApplication(),_this.isAllAppFetchInProgress=!1})},APMLeftNavController.prototype.initPostLogin=function(){this.fetchAllApplications(),this.databasesNavItemLabel=ApplicationViewService.instance().getApmDatabasesNavItemLabel()},APMLeftNavController.prototype.on_UEV_NAV_ACTION=function(){var currentTopLevelNav=NavigationService.instance().getTopLevelNavCurrent();currentTopLevelNav==NavigationService.TOP_LEVEL_NAV_APPLICATIONS&&(this.updateSelectedApplication(),this.setupLeftMenuBarBasedOnCurrentLocation())},APMLeftNavController.prototype.setupLocationToNavItemMappings=function(){this.mapLocationToNavItem(NavigationDataConstants.APP_BT_LIST,APMLeftNavController.NAV_ITEM_BUSINESS_TRANSACTIONS),this.mapLocationToNavItem(NavigationDataConstants.APP_SERVICE_ENDPOINT_LIST,APMLeftNavController.NAV_ITEM_TBD),this.mapLocationToNavItem(NavigationDataConstants.APP_SERVICE_ENDPOINT_DETAIL,APMLeftNavController.NAV_ITEM_SERVICE_ENDPOINTS),this.mapLocationToNavItem(NavigationDataConstants.APP_INFRASTRUCTURE,APMLeftNavController.NAV_ITEM_APP_SERVERS),this.mapLocationToNavItem(NavigationDataConstants.APP_MACHINE_LIST,APMLeftNavController.NAV_ITEM_APP_MACHINES),this.mapLocationToNavItem(NavigationDataConstants.APP_COMPONENT_MACHINE_LIST,APMLeftNavController.NAV_ITEM_APP_SERVERS),this.mapLocationToNavItem(NavigationDataConstants.APP_INFO_POINT_LIST,APMLeftNavController.NAV_ITEM_APP_SERVERS),this.mapLocationToNavItem(NavigationDataConstants.APP_INFOPOINT_DASHBOARD,APMLeftNavController.NAV_ITEM_APP_SERVERS),this.mapLocationToNavItem(NavigationDataConstants.APP_DATABASE_LIST,APMLeftNavController.NAV_ITEM_DATABASES),this.mapLocationToNavItem(NavigationDataConstants.APP_DATABASE_COMPONENT_LIST,APMLeftNavController.NAV_ITEM_DATABASES),this.mapLocationToNavItem(NavigationDataConstants.APP_BACKEND_DASHBOARD,APMLeftNavController.NAV_ITEM_TBD),this.mapLocationToNavItem(NavigationDataConstants.APP_BACKEND_DASHBOARD_SLOWEST_CALLS,APMLeftNavController.NAV_ITEM_TBD),this.mapLocationToNavItem(NavigationDataConstants.APP_BACKEND_LIST,APMLeftNavController.NAV_ITEM_REMOTE_SERVICES),this.mapLocationToNavItem(NavigationDataConstants.APP_TROUBLESHOOT_HOME,APMLeftNavController.NAV_ITEM_TROUBLESHOOT),this.mapLocationToNavItem(NavigationDataConstants.APP_SLOW_RESPONSE_TIMES,APMLeftNavController.NAV_ITEM_SLOW_RESPONSE_TIMES),this.mapLocationToNavItem(NavigationDataConstants.APP_ERRORS,APMLeftNavController.NAV_ITEM_ERRORS),this.mapLocationToNavItem(NavigationDataConstants.APP_ERROR_LIST,APMLeftNavController.NAV_ITEM_ERRORS),this.mapLocationToNavItem(NavigationDataConstants.APP_ERROR_DASHBOARD,APMLeftNavController.NAV_ITEM_ERRORS),this.mapLocationToNavItem(NavigationDataConstants.APP_INCIDENT_LIST,APMLeftNavController.NAV_ITEM_HEALTH_RULE_VIOLATIONS),this.mapLocationToNavItem(NavigationDataConstants.APP_WARROOM_DASH,APMLeftNavController.NAV_ITEM_WAR_ROOMS),this.mapLocationToNavItem(NavigationDataConstants.APP_WARROOM_LIST,APMLeftNavController.NAV_ITEM_WAR_ROOMS),this.mapLocationToNavItem(NavigationDataConstants.APP_MORE_HOME,APMLeftNavController.NAV_ITEM_MORE),this.mapLocationToNavItem(NavigationDataConstants.APP_INFO_POINT_LIST,APMLeftNavController.NAV_ITEM_INFO_POINTS),this.mapLocationToNavItem(NavigationDataConstants.APP_INFOPOINT_DASHBOARD,APMLeftNavController.NAV_ITEM_INFO_POINTS),this.mapLocationToNavItem(NavigationDataConstants.APP_COMPARE_METRICS,APMLeftNavController.NAV_ITEM_CORRELATION_ANALYSIS),this.mapLocationToNavItem(NavigationDataConstants.APP_RESPONSE_TIME_VS_LOAD,APMLeftNavController.NAV_ITEM_SCALABILITY_ANALYSIS),this.mapLocationToNavItem(NavigationDataConstants.APP_CPU_VS_LOAD,APMLeftNavController.NAV_ITEM_SCALABILITY_ANALYSIS),this.mapLocationToNavItem(NavigationDataConstants.APP_JMX,APMLeftNavController.NAV_ITEM_JMX),this.mapLocationToNavItem(NavigationDataConstants.APP_RELEASE_ANALYSIS,APMLeftNavController.NAV_ITEM_COMPARE_RELEASES),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_APP_HOME,APMLeftNavController.NAV_ITEM_ALERT_AND_RESPOND),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_POLICIES,APMLeftNavController.NAV_ITEM_ALERT_AND_RESPOND),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_HEALTH_RULES,APMLeftNavController.NAV_ITEM_ALERT_AND_RESPOND),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_ACTIONS,APMLeftNavController.NAV_ITEM_ALERT_AND_RESPOND),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_ACTION_SUPPRESSION,APMLeftNavController.NAV_ITEM_ALERT_AND_RESPOND),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_EMAIL_DIGESTS,APMLeftNavController.NAV_ITEM_ALERT_AND_RESPOND),this.mapLocationToNavItem(NavigationDataConstants.APP_CONFIGURATION_HOME,APMLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.APP_CONFIGURATION,APMLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.APP_CONFIG_SERVICE_ENDPOINT_DETECTION,APMLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.APP_THRESHOLD_LIST,APMLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.APP_BASELINES,APMLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.APP_BT_DISCOVERY_CONFIGURATOR,APMLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.APP_CUSTOM_DASH_MANAGE,APMLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.APP_AUTOMATION_HOME,APMLeftNavController.NAV_ITEM_AUTOMATION),this.mapLocationToNavItem(NavigationDataConstants.APP_WORKFLOW_LIST,APMLeftNavController.NAV_ITEM_AUTOMATION),this.mapLocationToNavItem(NavigationDataConstants.APP_WORKFLOW_DETAIL,APMLeftNavController.NAV_ITEM_AUTOMATION),this.mapLocationToNavItem(NavigationDataConstants.APP_TASK_LIST,APMLeftNavController.NAV_ITEM_AUTOMATION),this.mapLocationToNavItem(NavigationDataConstants.APP_ENVIRONMENT_PROPERTIES,APMLeftNavController.NAV_ITEM_AUTOMATION),this.mapLocationToNavItem(NavigationDataConstants.APP_SCHEDULE_LIST,APMLeftNavController.NAV_ITEM_AUTOMATION),this.mapLocationToNavItem(NavigationDataConstants.APP_SCHEDULE_DETAIL,APMLeftNavController.NAV_ITEM_AUTOMATION),this.mapLocationToNavItem(NavigationDataConstants.APP_WORKFLOW_EXECUTION_LIST,APMLeftNavController.NAV_ITEM_AUTOMATION),this.mapLocationToNavItem(NavigationDataConstants.APP_WORKFLOW_EXECUTION_DETAIL,APMLeftNavController.NAV_ITEM_AUTOMATION)},APMLeftNavController.prototype.setupEventListeners=function(){var _this=this;InjectorService.instance().$rootScope().$on(EventConstants.UEV_ALL_APPLICATIONS_FETCHED,function(){_this.isAllAppFetchInProgress||_this.fetchAllApplications(!0)}),InjectorService.instance().$rootScope().$on(EventConstants.UEV_APPLICATION_CREATED,function(){_this.fetchAllApplications(!0)}),InjectorService.instance().$rootScope().$on(EventConstants.UEV_APPLICATION_EDITED,function(){_this.fetchAllApplications(!0)}),InjectorService.instance().$rootScope().$on(EventConstants.UEV_APPLICATION_UPDATED,function(){_this.fetchAllApplications(!0)}),InjectorService.instance().$rootScope().$on(EventConstants.UEV_APPLICATION_DELETED,function(){_this.fetchAllApplications(!0)}),InjectorService.instance().$rootScope().$on(EventConstants.UEV_EUM_ENABLED_CHANGE,function(){_this.setup()}),EventBusService.instance().registerEventListener(NavigationService.UEV_BACKEND_DASHBOARD_VIEWED,function(event){_this.selectedLeftNavItem=event.payload.isDatabase?APMLeftNavController.NAV_ITEM_DATABASES:APMLeftNavController.NAV_ITEM_REMOTE_SERVICES,ViewUtil.safeApply(_this.$scope)},this.$scope),EventBusService.instance().registerEventListener(NavigationService.UEV_TIER_DASH_VIEW_FOR_DB_TIER,function(){_this.selectedLeftNavItem=APMLeftNavController.NAV_ITEM_DATABASES,ViewUtil.safeApply(_this.$scope)},this.$scope)},APMLeftNavController.prototype.setupLeftMenuBarBasedOnCurrentLocation=function(){_super.prototype.setupLeftMenuBarBasedOnCurrentLocation.call(this);var urlParams=URLParams.getCurrentUrlParams(),currentLocation=urlParams.location();this.isTroubleshootOpen=this.isTroubleshootOpen||this.isTroubleshootLocation(currentLocation),this.isMoreOpen=this.isMoreOpen||this.isMoreLocation(currentLocation),ApplicationViewService.instance().isAppDashLocation(urlParams)&&(this.selectedLeftNavItem=APMLeftNavController.NAV_ITEM_APP_NAME),NavigationService.instance().isBtDashLocation(urlParams)&&(this.selectedLeftNavItem=APMLeftNavController.NAV_ITEM_BUSINESS_TRANSACTIONS),(NavigationService.instance().isTierDashLocation(urlParams)||NavigationService.instance().isNodeDashLocation(urlParams))&&(this.selectedLeftNavItem=APMLeftNavController.NAV_ITEM_APP_SERVERS),currentLocation==NavigationDataConstants.APP_SERVICE_ENDPOINT_LIST&&(this.selectedLeftNavItem=Util.isValidId(URLParams.getCurrentUrlParams().componentId())?APMLeftNavController.NAV_ITEM_APP_SERVERS:APMLeftNavController.NAV_ITEM_SERVICE_ENDPOINTS)},APMLeftNavController.prototype.onClickApplicationName=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationDashboard(this.selectedApplication.id)},APMLeftNavController.prototype.onClickApplicationInAllApplicationsDropDown=function(application){ApplicationViewService.instance().viewApplicationDashboard(application.id)},APMLeftNavController.prototype.onClickViewAllAppsInAllApplicationsDropDown=function(){ApplicationViewService.instance().viewAllApplicationsDashboard()},APMLeftNavController.prototype.onClickBTs=function(){this.selectedApplication&&BusinessTransactionViewService.instance().viewBusinessTransactionList(this.selectedApplication.id)},APMLeftNavController.prototype.onClickServiceEndpoints=function(){this.selectedApplication&&ServiceEndpointListViewService.instance().viewServiceEndpointListAppLevel(this.selectedApplication.id)},APMLeftNavController.prototype.onClickAppServers=function(){this.selectedApplication&&ApplicationViewService.instance().viewAppInfrastructure(this.selectedApplication.id)},APMLeftNavController.prototype.onClickAppMachines=function(){this.selectedApplication&&ServerMonitoringViewService.instance().viewAppMachineList(this.selectedApplication.id)},APMLeftNavController.prototype.onClickDatabases=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationLocation(NavigationDataConstants.APP_DATABASE_LIST,this.selectedApplication.id)},APMLeftNavController.prototype.onClickTroubleshoot=function(){this.isTroubleshootOpen=!this.isTroubleshootOpen,this.selectedApplication&&ApplicationViewService.instance().viewAppTroubleshoot(this.selectedApplication.id)},APMLeftNavController.prototype.onClickSlowResponseTimes=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationLocation(NavigationDataConstants.APP_SLOW_RESPONSE_TIMES,this.selectedApplication.id)},APMLeftNavController.prototype.onClickErrors=function(){this.selectedApplication&&ApplicationViewService.instance().viewAppErrors(this.selectedApplication.id)},APMLeftNavController.prototype.onClickHealthRuleViolations=function(){this.selectedApplication&&ApplicationViewService.instance().viewAppHealthRuleViolations(this.selectedApplication.id)},APMLeftNavController.prototype.onClickWarRooms=function(){this.selectedApplication&&WarRoomViewService.instance().viewWarRoomList(this.selectedApplication.id)},APMLeftNavController.prototype.onClickMore=function(){this.isMoreOpen=!this.isMoreOpen,this.selectedApplication&&ApplicationViewService.instance().viewAppMore(this.selectedApplication.id)},APMLeftNavController.prototype.onClickInfoPoints=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationLocation(NavigationDataConstants.APP_INFO_POINT_LIST,this.selectedApplication.id)},APMLeftNavController.prototype.onClickRemoteServices=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationLocation(NavigationDataConstants.APP_BACKEND_LIST,this.selectedApplication.id)},APMLeftNavController.prototype.onClickScalabilityAnalysis=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationLocation(NavigationDataConstants.APP_RESPONSE_TIME_VS_LOAD,this.selectedApplication.id)},APMLeftNavController.prototype.onClickCorrelationAnalysis=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationLocation(NavigationDataConstants.APP_COMPARE_METRICS,this.selectedApplication.id)},APMLeftNavController.prototype.onClickCompareReleases=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationLocation(NavigationDataConstants.APP_RELEASE_ANALYSIS,this.selectedApplication.id)},APMLeftNavController.prototype.onClickJMX=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationLocation(NavigationDataConstants.APP_JMX,this.selectedApplication.id)},APMLeftNavController.prototype.onClickAlertRespond=function(){this.selectedApplication&&ApplicationViewService.instance().viewAppAlertRespond(this.selectedApplication.id)},APMLeftNavController.prototype.onClickMetricBrowser=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationLocation(NavigationDataConstants.METRIC_BROWSER,this.selectedApplication.id)},APMLeftNavController.prototype.onClickConfig=function(){this.selectedApplication&&ApplicationViewService.instance().viewAppConfigure(this.selectedApplication.id)},APMLeftNavController.prototype.onClickAutomation=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationLocation(NavigationDataConstants.APP_AUTOMATION_HOME,this.selectedApplication.id)},APMLeftNavController.prototype.onClickWebAppDashboard=function(){this.selectedApplication&&EumViewService.instance().viewEumWebMainDashboard(this.selectedApplication.id)},APMLeftNavController.prototype.updateSelectedApplication=function(){var _this=this,previousSelectedApp=this.selectedApplication;this.getApplicationById(URLParams.getCurrentUrlParams().applicationId()).then(function(app){_this.selectedApplication=app;var newOrChangedApp=!1;_this.selectedApplication&&!previousSelectedApp?newOrChangedApp=!0:_this.selectedApplication&&previousSelectedApp&&_this.selectedApplication.id!=previousSelectedApp.id&&(newOrChangedApp=!0),newOrChangedApp&&_this.setup()})},APMLeftNavController.prototype.getApplicationById=function(id){return ApplicationsCache.instance().findApplicationById(id)},APMLeftNavController.prototype.isTroubleshootLocation=function(location){return location&&-1!=APMLeftNavController.TROUBLESHOOT_LOCATIONS.indexOf(location)},APMLeftNavController.prototype.isMoreLocation=function(location){return location&&-1!=APMLeftNavController.MORE_LOCATIONS.indexOf(location)},APMLeftNavController.prototype.setup=function(){var _this=this;MasterService.instance().onInitDataFetch().then(function(){_this.showAutomation=MasterService.instance().initData.mainNavConfig.showCloudAutoScaling,_this.showSim=MasterService.instance().initData.mainNavConfig.showSim,_this.showLinkToEumWeb=ApplicationsCache.hasApplicationType(_this.selectedApplication,ApplicationType.WEB)})},APMLeftNavController.NAV_ITEM_APP_NAME="NAV_ITEM_APP_NAME",APMLeftNavController.NAV_ITEM_BUSINESS_TRANSACTIONS="NAV_ITEM_BUSINESS_TRANSACTIONS",APMLeftNavController.NAV_ITEM_SERVICE_ENDPOINTS="NAV_ITEM_SERVICE_ENDPOINTS",APMLeftNavController.NAV_ITEM_APP_SERVERS="NAV_ITEM_APP_SERVERS",APMLeftNavController.NAV_ITEM_APP_MACHINES="NAV_ITEM_APP_MACHINES",APMLeftNavController.NAV_ITEM_DATABASES="NAV_ITEM_DATABASES",APMLeftNavController.NAV_ITEM_TROUBLESHOOT="NAV_ITEM_TROUBLESHOOT",APMLeftNavController.NAV_ITEM_SLOW_RESPONSE_TIMES="NAV_ITEM_SLOW_RESPONSE_TIMES",APMLeftNavController.NAV_ITEM_ERRORS="NAV_ITEM_ERRORS",APMLeftNavController.NAV_ITEM_HEALTH_RULE_VIOLATIONS="NAV_ITEM_HEALTH_RULE_VIOLATIONS",APMLeftNavController.NAV_ITEM_WAR_ROOMS="NAV_ITEM_WAR_ROOMS",APMLeftNavController.NAV_ITEM_MORE="NAV_ITEM_MORE",APMLeftNavController.NAV_ITEM_INFO_POINTS="NAV_ITEM_INFO_POINTS",APMLeftNavController.NAV_ITEM_REMOTE_SERVICES="NAV_ITEM_REMOTE_SERVICES",APMLeftNavController.NAV_ITEM_SCALABILITY_ANALYSIS="NAV_ITEM_SCALABILITY_ANALYSIS",APMLeftNavController.NAV_ITEM_CORRELATION_ANALYSIS="NAV_ITEM_CORRELATION_ANALYSIS",APMLeftNavController.NAV_ITEM_COMPARE_RELEASES="NAV_ITEM_COMPARE_RELEASES",APMLeftNavController.NAV_ITEM_JMX="NAV_ITEM_JMX",APMLeftNavController.NAV_ITEM_ALERT_AND_RESPOND="NAV_ITEM_ALERT_AND_RESPOND",APMLeftNavController.NAV_ITEM_CONFIG="NAV_ITEM_CONFIG",APMLeftNavController.NAV_ITEM_EUM_WEB="NAV_ITEM_EUM_WEB",APMLeftNavController.NAV_ITEM_EUM_WEB_APP_DASHBOARD="NAV_ITEM_EUM_WEB_APP_DASHBOARD",APMLeftNavController.NAV_ITEM_WEB_SESSIONS="NAV_ITEM_WEB_SESSIONS",APMLeftNavController.NAV_ITEM_PAGES_AJAX_REQUESTS="NAV_ITEM_PAGES_AJAX_REQUESTS",APMLeftNavController.NAV_ITEM_WEB_ANALYZE="NAV_ITEM_WEB_ANALYZE",APMLeftNavController.NAV_ITEM_SYNTHETIC="NAV_ITEM_SYNTHETIC",APMLeftNavController.NAV_ITEM_EUM_MOBILE="NAV_ITEM_EUM_MOBILE",APMLeftNavController.NAV_ITEM_EUM_MOBILE_APP_DASHBOARD="NAV_ITEM_EUM_MOBILE_APP_DASHBOARD",APMLeftNavController.NAV_ITEM_MOBILE_SESSIONS="NAV_ITEM_MOBILE_SESSIONS",APMLeftNavController.NAV_ITEM_NETWORK_REQUESTS="NAV_ITEM_NETWORK_REQUESTS",APMLeftNavController.NAV_ITEM_CRASHES="NAV_ITEM_CRASHES",APMLeftNavController.NAV_ITEM_CUSTOM_DATA="NAV_ITEM_CUSTOM_DATA",APMLeftNavController.NAV_ITEM_AUTOMATION="NAV_ITEM_AUTOMATION",APMLeftNavController.DEBUG=!0,APMLeftNavController.TROUBLESHOOT_LOCATIONS=[NavigationDataConstants.APP_SLOW_RESPONSE_TIMES,NavigationDataConstants.APP_ERRORS,NavigationDataConstants.APP_ERROR_LIST,NavigationDataConstants.APP_ERROR_DASHBOARD,NavigationDataConstants.APP_INCIDENT_LIST,NavigationDataConstants.APP_WARROOM_DASH,NavigationDataConstants.APP_WARROOM_LIST],APMLeftNavController.MORE_LOCATIONS=[NavigationDataConstants.APP_INFO_POINT_LIST,NavigationDataConstants.APP_INFOPOINT_DASHBOARD,NavigationDataConstants.APP_RELEASE_ANALYSIS,NavigationDataConstants.APP_COMPARE_METRICS,NavigationDataConstants.APP_RESPONSE_TIME_VS_LOAD,NavigationDataConstants.APP_JMX],APMLeftNavController.$inject=["$scope"],APMLeftNavController
}(LeftNavControllerBase);appdynamicsModule.controller("APMLeftNavController",APMLeftNavController),define("app/view/leftMenuBar/apm/APMLeftNavController",function(){});var EUMWebLeftNavDirective=function(){function EUMWebLeftNavDirective(){return{restrict:"E",replace:!1,scope:{},templateUrl:"app/view/leftMenuBar/eum/web/EUMWebLeftNavView.html",controller:EUMWebLeftNavController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return EUMWebLeftNavDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-eum-web-left-nav"),EUMWebLeftNavDirective),define("app/view/leftMenuBar/eum/web/EUMWebLeftNavDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EUMWebLeftNavController=function(_super){function EUMWebLeftNavController($scope){_super.call(this,$scope),this.$scope=$scope,this.applications=[],this.selectedApplication=null,this.applicationSelectedClassName="",this.isAllAppFetchInProgress=!1,this.isWebApplication=!1,this.isMobileApplication=!1,this.realVsSyntheticSelectorOptions=[],this.isRealUserMode=!0,this.isSyntheticOpen=!1,this.featureService=FeatureService.instance(),this.showLinkToAPM=!1,$scope.controller=this,this.setupRealVsSyntheticSelector()}return __extends(EUMWebLeftNavController,_super),EUMWebLeftNavController.prototype.link=function(scope,iElement){this.element=iElement},EUMWebLeftNavController.prototype.fetchAllApplications=function(successCallback){var _this=this;this.isAllAppFetchInProgress=!0,EUMApplicationsUiService.instance().getEumWebApplications().then(function(response){var applications=EUMApplicationsUiService.instance().getEumWebApplications_response(response),appMap={};if(applications)for(var i=0;i<applications.length;i++)appMap[applications[i].id]=applications[i];_this.appMap=appMap,_this.applications=applications,_this.updateSelectedApplication(),_this.setupLeftMenuBarBasedOnCurrentLocation(),null!=successCallback&&successCallback(),_this.isAllAppFetchInProgress=!1})},EUMWebLeftNavController.prototype.initPostLogin=function(){this.fetchAllApplications()},EUMWebLeftNavController.prototype.on_UEV_NAV_ACTION=function(){var currentTopLevelNav=NavigationService.instance().getTopLevelNavCurrent();currentTopLevelNav==NavigationService.TOP_LEVEL_NAV_EUM&&(this.updateSelectedApplication(),this.setupLeftMenuBarBasedOnCurrentLocation())},EUMWebLeftNavController.prototype.setupLocationToNavItemMappings=function(){this.mapLocationToNavItem(NavigationDataConstants.EUM_DASHBOARD,EUMWebLeftNavController.NAV_ITEM_APP_NAME),this.mapLocationToNavItem(NavigationDataConstants.EUM_WEB_MAIN_DASHBOARD,EUMWebLeftNavController.NAV_ITEM_APP_NAME),this.mapLocationToNavItem(NavigationDataConstants.EUM_BROWSER_SNAPSHOTS,EUMWebLeftNavController.NAV_ITEM_APP_NAME),this.mapLocationToNavItem(NavigationDataConstants.EUM_BROWSERS_AND_DEVICES,EUMWebLeftNavController.NAV_ITEM_APP_NAME),this.mapLocationToNavItem(NavigationDataConstants.EUM_WEB_SESSION_ANALYTICS,EUMWebLeftNavController.NAV_ITEM_SESSIONS),this.mapLocationToNavItem(NavigationDataConstants.EUM_PAGES_LIST,EUMWebLeftNavController.NAV_ITEM_PAGES_AJAX_REQUESTS),this.mapLocationToNavItem(NavigationDataConstants.EUM_PAGE_DASHBOARD,EUMWebLeftNavController.NAV_ITEM_PAGES_AJAX_REQUESTS),this.mapLocationToNavItem(NavigationDataConstants.EUM_PAGE_BROWSER_SNAPSHOTS,EUMWebLeftNavController.NAV_ITEM_PAGES_AJAX_REQUESTS),this.mapLocationToNavItem(NavigationDataConstants.EUM_SNAPSHOT_DATA,EUMWebLeftNavController.NAV_ITEM_PAGES_AJAX_REQUESTS),this.mapLocationToNavItem(NavigationDataConstants.EUM_WEB_ANALYZE,EUMWebLeftNavController.NAV_ITEM_WEB_ANALYZE),this.mapLocationToNavItem(NavigationDataConstants.EUM_WEB_ANALYZE_DETAILS,EUMWebLeftNavController.NAV_ITEM_WEB_ANALYZE),this.mapLocationToNavItem(NavigationDataConstants.EUM_SYNTHETIC_SCHEDULE_LIST,EUMWebLeftNavController.NAV_ITEM_JOBS_LIST),this.mapLocationToNavItem(NavigationDataConstants.EUM_SYNTHETIC_SCHEDULE,EUMWebLeftNavController.NAV_ITEM_JOBS_LIST),this.mapLocationToNavItem(NavigationDataConstants.EUM_SYNTHETIC_SESSION_ANALYTICS,EUMWebLeftNavController.NAV_ITEM_JOB_SNAPSHOTS),this.mapLocationToNavItem(NavigationDataConstants.EUM_SYNTHETIC_PAGES_LIST,EUMWebLeftNavController.NAV_ITEM_SYNTHETIC_PAGES),this.mapLocationToNavItem(NavigationDataConstants.EUM_SYNTHETIC_ON_DEMAND,EUMWebLeftNavController.NAV_ITEM_SYNTHETIC_ON_DEMAND),this.mapLocationToNavItem(NavigationDataConstants.EUM_SYNTHETIC_LAUNCH,EUMWebLeftNavController.NAV_ITEM_SYNTHETIC_ON_DEMAND),this.mapLocationToNavItem(NavigationDataConstants.EUM_SYNTHETIC_PAGE_DASHBOARD,EUMWebLeftNavController.NAV_ITEM_SYNTHETIC_PAGES),this.mapLocationToNavItem(NavigationDataConstants.EUM_WEB_EVENTS_LIST,EUMWebLeftNavController.NAV_ITEM_EVENTS),this.mapLocationToNavItem(NavigationDataConstants.EUM_WEB_HEALTH_RULE_VIOLATIONS,EUMWebLeftNavController.NAV_ITEM_HEALTH_RULE_VIOLATIONS),this.mapLocationToNavItem(NavigationDataConstants.EUM_WEB_CONFIG,EUMWebLeftNavController.NAV_ITEM_CONFIG)},EUMWebLeftNavController.prototype.setupEventListeners=function(){var _this=this;InjectorService.instance().$rootScope().$on(EventConstants.UEV_ALL_APPLICATIONS_FETCHED,function(){_this.isAllAppFetchInProgress||_this.fetchAllApplications()}),InjectorService.instance().$rootScope().$on(EventConstants.UEV_APPLICATION_CREATED,function(){_this.fetchAllApplications()}),InjectorService.instance().$rootScope().$on(EventConstants.UEV_APPLICATION_EDITED,function(){_this.fetchAllApplications()}),InjectorService.instance().$rootScope().$on(EventConstants.UEV_APPLICATION_UPDATED,function(){_this.fetchAllApplications()}),InjectorService.instance().$rootScope().$on(EventConstants.UEV_APPLICATION_DELETED,function(){_this.fetchAllApplications()})},EUMWebLeftNavController.prototype.setupLeftMenuBarBasedOnCurrentLocation=function(){_super.prototype.setupLeftMenuBarBasedOnCurrentLocation.call(this);var currentLocation=URLParams.getCurrentUrlParams().location();this.isSyntheticOpen=this.isSyntheticOpen||this.isSyntheticLocation(currentLocation)},EUMWebLeftNavController.prototype.onRealVsSyntheticChange=function(){this.setupRealVsSyntheticMode()},EUMWebLeftNavController.prototype.onClickApplicationName=function(){this.selectedApplication&&EumViewService.instance().viewEumWebMainDashboard(this.selectedApplication.id)},EUMWebLeftNavController.prototype.onClickApplicationInAllApplicationsDropDown=function(application){EumViewService.instance().viewEumWebMainDashboard(application.id)},EUMWebLeftNavController.prototype.onClickViewAllAppsInAllApplicationsDropDown=function(){EumViewService.instance().viewWebAllApps()},EUMWebLeftNavController.prototype.onClickPagesAjaxRequests=function(){this.selectedApplication&&EumViewService.instance().viewWebPagesList(this.selectedApplication.id)},EUMWebLeftNavController.prototype.onClickWebAnalyze=function(){this.selectedApplication&&EumViewService.instance().viewWebAnalyze(this.selectedApplication.id)},EUMWebLeftNavController.prototype.onClickSessions=function(){this.selectedApplication&&EumViewService.instance().viewEumWebSessions(this.selectedApplication.id)},EUMWebLeftNavController.prototype.onClickSyntheticSchedules=function(){this.isSyntheticOpen=!this.isSyntheticOpen,this.selectedApplication&&EumViewService.instance().viewSyntheticScheduleList(this.selectedApplication.id)},EUMWebLeftNavController.prototype.onClickSyntheticJobSnapshots=function(){this.isSyntheticOpen=!this.isSyntheticOpen,this.selectedApplication&&EumViewService.instance().viewSyntheticAnalyze(this.selectedApplication.id)},EUMWebLeftNavController.prototype.onClickSyntheticPages=function(){this.isSyntheticOpen=!this.isSyntheticOpen,this.selectedApplication&&EumViewService.instance().viewSyntheticWebPagesList(this.selectedApplication.id)},EUMWebLeftNavController.prototype.onClickSyntheticOnDemand=function(){this.isSyntheticOpen=!this.isSyntheticOpen,this.selectedApplication&&EumViewService.instance().viewSyntheticOnDemand(this.selectedApplication.id)},EUMWebLeftNavController.prototype.onClickAlertRespond=function(){this.selectedApplication&&ApplicationViewService.instance().viewAppAlertRespond(this.selectedApplication.id)},EUMWebLeftNavController.prototype.onClickMetricBrowser=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationLocation(NavigationDataConstants.METRIC_BROWSER,this.selectedApplication.id)},EUMWebLeftNavController.prototype.onClickConfig=function(){this.selectedApplication&&EumViewService.instance().viewWebConfig(this.selectedApplication.id)},EUMWebLeftNavController.prototype.onViewInAPM=function(){this.selectedApplication&&ApplicationViewService.instance().viewApplicationDashboard(this.selectedApplication.id)},EUMWebLeftNavController.prototype.onClickEvents=function(){this.selectedApplication&&EumViewService.instance().viewWebEventsList(this.selectedApplication.id)},EUMWebLeftNavController.prototype.onClickHealthRuleViolations=function(){this.selectedApplication&&EumViewService.instance().viewWebHealthRuleViolations(this.selectedApplication.id)},EUMWebLeftNavController.prototype.updateSelectedApplication=function(){this.selectedApplication=this.getApplicationById(URLParams.getCurrentUrlParams().applicationId()),this.showLinkToAPM=ApplicationsCache.hasApplicationType(this.selectedApplication,ApplicationType.APM)},EUMWebLeftNavController.prototype.getApplicationById=function(id){return this.appMap&&this.appMap[id]?this.appMap[id]:null},EUMWebLeftNavController.prototype.setupRealVsSyntheticSelector=function(){this.realVsSyntheticSelectorOptions=[{name:EUMWebLeftNavController.REAL_USERS,value:EUMWebLeftNavController.REAL_USERS},{name:EUMWebLeftNavController.SYNTHETIC,value:EUMWebLeftNavController.SYNTHETIC}],this.realVsSyntheticSelected=this.realVsSyntheticSelectorOptions[0],this.setupRealVsSyntheticMode()},EUMWebLeftNavController.prototype.isSyntheticLocation=function(location){return-1!=FeatureService.SYNTHETIC_LOCATIONS.indexOf(location)},EUMWebLeftNavController.prototype.setupRealVsSyntheticMode=function(){this.isRealUserMode=this.realVsSyntheticSelected&&this.realVsSyntheticSelected.value==EUMWebLeftNavController.REAL_USERS},EUMWebLeftNavController.NAV_ITEM_APP_NAME="NAV_ITEM_APP_NAME",EUMWebLeftNavController.NAV_ITEM_PAGES_AJAX_REQUESTS="NAV_ITEM_PAGES_AJAX_REQUESTS",EUMWebLeftNavController.NAV_ITEM_WEB_ANALYZE="NAV_ITEM_WEB_ANALYZE",EUMWebLeftNavController.NAV_ITEM_SESSIONS="NAV_ITEM_SESSIONS",EUMWebLeftNavController.NAV_ITEM_JOBS_LIST="NAV_ITEM_JOBS_LIST",EUMWebLeftNavController.NAV_ITEM_JOB_SNAPSHOTS="NAV_ITEM_JOB_SNAPSHOTS",EUMWebLeftNavController.NAV_ITEM_SYNTHETIC_PAGES="NAV_ITEM_SYNTHETIC_PAGES",EUMWebLeftNavController.NAV_ITEM_SYNTHETIC_ON_DEMAND="NAV_ITEM_SYNTHETIC_ON_DEMAND",EUMWebLeftNavController.NAV_ITEM_HEALTH_RULE_VIOLATIONS="NAV_ITEM_HEALTH_RULE_VIOLATIONS",EUMWebLeftNavController.NAV_ITEM_EVENTS="NAV_ITEM_EVENTS",EUMWebLeftNavController.NAV_ITEM_CONFIG="NAV_ITEM_CONFIG",EUMWebLeftNavController.REAL_USERS="Real Users",EUMWebLeftNavController.SYNTHETIC="Synthetic",EUMWebLeftNavController.$inject=["$scope"],EUMWebLeftNavController}(LeftNavControllerBase);appdynamicsModule.controller("EUMWebLeftNavController",EUMWebLeftNavController),define("app/view/leftMenuBar/eum/web/EUMWebLeftNavController",function(){});var EUMMobileLeftNavDirective=function(){function EUMMobileLeftNavDirective(){return{restrict:"E",replace:!1,scope:{},templateUrl:"app/view/leftMenuBar/eum/mobile/EUMMobileLeftNavView.html",controller:EUMMobileLeftNavController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return EUMMobileLeftNavDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-eum-mobile-left-nav"),EUMMobileLeftNavDirective),define("app/view/leftMenuBar/eum/mobile/EUMMobileLeftNavDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EUMMobileLeftNavController=function(_super){function EUMMobileLeftNavController($scope){_super.call(this,$scope),this.$scope=$scope,this.mobileApplications=[],this.selectedMobileApplication=null,this.applicationSelectedClassName="",this.isAllAppFetchInProgress=!1,this.isWebApplication=!1,this.isMobileApplication=!1,this.featureService=FeatureService.instance(),$scope.controller=this}return __extends(EUMMobileLeftNavController,_super),EUMMobileLeftNavController.prototype.link=function(scope,iElement){this.element=iElement},EUMMobileLeftNavController.prototype.fetchAllApplications=function(successCallback){var _this=this;this.isAllAppFetchInProgress=!0,EUMApplicationsUiService.instance().getAllMobileApplications().then(function(response){var mobileApplications=EUMApplicationsUiService.instance().getAllMobileApplications_response(response),mobileAppMap={};if(mobileApplications)for(var i=0;i<mobileApplications.length;i++)mobileAppMap[mobileApplications[i].id]=mobileApplications[i];_this.mobileAppMap=mobileAppMap,_this.mobileApplications=mobileApplications,_this.updateSelectedMobileApplication(),_this.setupLeftMenuBarBasedOnCurrentLocation(),null!=successCallback&&successCallback(),_this.isAllAppFetchInProgress=!1})},EUMMobileLeftNavController.prototype.getPlatformIcon=function(platform){return ImageUtil.getMobilePlatformIcon(platform)},EUMMobileLeftNavController.prototype.initPostLogin=function(){this.fetchAllApplications()},EUMMobileLeftNavController.prototype.on_UEV_NAV_ACTION=function(){var currentTopLevelNav=NavigationService.instance().getTopLevelNavCurrent();currentTopLevelNav==NavigationService.TOP_LEVEL_NAV_EUM&&(this.updateSelectedMobileApplication(),this.setupLeftMenuBarBasedOnCurrentLocation())},EUMMobileLeftNavController.prototype.setupLocationToNavItemMappings=function(){this.mapLocationToNavItem(NavigationDataConstants.EUM_MOBILE_MAIN_DASHBOARD,EUMMobileLeftNavController.NAV_ITEM_APP_NAME),this.mapLocationToNavItem(NavigationDataConstants.EUM_MOBILE_APPLICATION,EUMMobileLeftNavController.NAV_ITEM_APP_NAME),this.mapLocationToNavItem(NavigationDataConstants.EUM_DEVICES_CARRRIERS,EUMMobileLeftNavController.NAV_ITEM_APP_NAME),this.mapLocationToNavItem(NavigationDataConstants.EUM_MOBILE_SESSION_ANALYTICS,EUMMobileLeftNavController.NAV_ITEM_SESSIONS),this.mapLocationToNavItem(NavigationDataConstants.EUM_REQUESTS_EPISODES,EUMMobileLeftNavController.NAV_ITEM_NETWORK_REQUESTS),this.mapLocationToNavItem(NavigationDataConstants.EUM_REQUEST_DASHBOARD,EUMMobileLeftNavController.NAV_ITEM_NETWORK_REQUESTS),this.mapLocationToNavItem(NavigationDataConstants.EUM_REQUEST_SNAPSHOT_LIST,EUMMobileLeftNavController.NAV_ITEM_NETWORK_REQUESTS),this.mapLocationToNavItem(NavigationDataConstants.EUM_REQUEST_SNAPSHOT_DETAILS,EUMMobileLeftNavController.NAV_ITEM_NETWORK_REQUESTS),this.mapLocationToNavItem(NavigationDataConstants.EUM_NETWORK_REQUEST_ANALYTICS,EUMMobileLeftNavController.NAV_ITEM_NETWORK_REQUESTS),this.mapLocationToNavItem(NavigationDataConstants.EUM_ANALYTICS_CRASH_DASHBOARD,EUMMobileLeftNavController.NAV_ITEM_CRASHES),this.mapLocationToNavItem(NavigationDataConstants.EUM_CRASH_LIST,EUMMobileLeftNavController.NAV_ITEM_CRASHES),this.mapLocationToNavItem(NavigationDataConstants.EUM_CRASH_GROUP_DASHBOARD,EUMMobileLeftNavController.NAV_ITEM_CRASHES),this.mapLocationToNavItem(NavigationDataConstants.EUM_CRASH_DETAILS,EUMMobileLeftNavController.NAV_ITEM_CRASHES),this.mapLocationToNavItem(NavigationDataConstants.EUM_MOBILE_INFO_POINT_LIST,EUMMobileLeftNavController.NAV_ITEM_CUSTOM_DATA),this.mapLocationToNavItem(NavigationDataConstants.EUM_MOBILE_INFO_POINTS,EUMMobileLeftNavController.NAV_ITEM_CUSTOM_DATA),this.mapLocationToNavItem(NavigationDataConstants.EUM_MOBILE_EVENTS_LIST,EUMMobileLeftNavController.NAV_ITEM_EVENTS),this.mapLocationToNavItem(NavigationDataConstants.EUM_MOBILE_HEALTH_RULE_VIOLATIONS,EUMMobileLeftNavController.NAV_ITEM_HEALTH_RULE_VIOLATIONS),this.mapLocationToNavItem(NavigationDataConstants.EUM_MOBILE_CONFIG,EUMMobileLeftNavController.NAV_ITEM_CONFIG)},EUMMobileLeftNavController.prototype.onClickApplicationName=function(){this.selectedMobileApplication&&EumViewService.instance().viewEumMobileMainDashboard(this.selectedMobileApplication.applicationId,this.selectedMobileApplication.platform,this.selectedMobileApplication.id)},EUMMobileLeftNavController.prototype.onClickApplicationInAllApplicationsDropDown=function(application){this.selectedMobileApplication=application,EumViewService.instance().viewEumMobileMainDashboard(this.selectedMobileApplication.applicationId,this.selectedMobileApplication.platform,this.selectedMobileApplication.id)},EUMMobileLeftNavController.prototype.onClickViewAllAppsInAllApplicationsDropDown=function(){EumViewService.instance().viewMobileAllApps()},EUMMobileLeftNavController.prototype.onClickSessions=function(){this.selectedMobileApplication&&EumViewService.instance().viewMobileSessionAnalyze(this.selectedMobileApplication.applicationId,this.selectedMobileApplication.platform,this.selectedMobileApplication.id)},EUMMobileLeftNavController.prototype.onClickNetworkRequests=function(){this.selectedMobileApplication&&EumViewService.instance().viewMobileNetworkRequestList(this.selectedMobileApplication.applicationId,this.selectedMobileApplication.platform,this.selectedMobileApplication.id)},EUMMobileLeftNavController.prototype.onClickCrashes=function(){this.selectedMobileApplication&&EumViewService.instance().viewCrashDashboardForMobileApp(this.selectedMobileApplication.applicationId,this.selectedMobileApplication.platform,this.selectedMobileApplication.id)},EUMMobileLeftNavController.prototype.onClickCustomData=function(){this.selectedMobileApplication&&EumViewService.instance().viewMobileInfoPoints(this.selectedMobileApplication.applicationId,this.selectedMobileApplication.platform,this.selectedMobileApplication.id)},EUMMobileLeftNavController.prototype.onClickEvents=function(){this.selectedMobileApplication&&EumViewService.instance().viewMobileEventsList(this.selectedMobileApplication.applicationId,this.selectedMobileApplication.platform,this.selectedMobileApplication.id)},EUMMobileLeftNavController.prototype.onClickHealthRuleViolations=function(){this.selectedMobileApplication&&EumViewService.instance().viewMobileHealthRuleViolations(this.selectedMobileApplication.applicationId,this.selectedMobileApplication.platform,this.selectedMobileApplication.id)},EUMMobileLeftNavController.prototype.onClickAlertRespond=function(){this.selectedMobileApplication&&ApplicationViewService.instance().viewAppAlertRespond(this.selectedMobileApplication.applicationId)},EUMMobileLeftNavController.prototype.onClickMetricBrowser=function(){this.selectedMobileApplication&&ApplicationViewService.instance().viewApplicationLocation(NavigationDataConstants.METRIC_BROWSER,this.selectedMobileApplication.applicationId)},EUMMobileLeftNavController.prototype.onClickConfig=function(){this.selectedMobileApplication&&EumViewService.instance().viewMobileConfig(this.selectedMobileApplication.applicationId,this.selectedMobileApplication.platform,this.selectedMobileApplication.id)},EUMMobileLeftNavController.prototype.updateSelectedMobileApplication=function(){this.selectedMobileApplication=this.getMobileApplicationById(Number(URLParams.getCurrentUrlParams().mobileApp()))},EUMMobileLeftNavController.prototype.getMobileApplicationById=function(id){return this.mobileAppMap&&this.mobileAppMap[id]?this.mobileAppMap[id]:null},EUMMobileLeftNavController.NAV_ITEM_APP_NAME="NAV_ITEM_APP_NAME",EUMMobileLeftNavController.NAV_ITEM_SESSIONS="NAV_ITEM_SESSIONS",EUMMobileLeftNavController.NAV_ITEM_NETWORK_REQUESTS="NAV_ITEM_NETWORK_REQUESTS",EUMMobileLeftNavController.NAV_ITEM_CRASHES="NAV_ITEM_CRASHES",EUMMobileLeftNavController.NAV_ITEM_CUSTOM_DATA="NAV_ITEM_CUSTOM_DATA",EUMMobileLeftNavController.NAV_ITEM_HEALTH_RULE_VIOLATIONS="NAV_ITEM_HEALTH_RULE_VIOLATIONS",EUMMobileLeftNavController.NAV_ITEM_EVENTS="NAV_ITEM_EVENTS",EUMMobileLeftNavController.NAV_ITEM_CONFIG="NAV_ITEM_CONFIG",EUMMobileLeftNavController.$inject=["$scope"],EUMMobileLeftNavController}(LeftNavControllerBase);appdynamicsModule.controller("EUMMobileLeftNavController",EUMMobileLeftNavController),define("app/view/leftMenuBar/eum/mobile/EUMMobileLeftNavController",function(){});var DBMonitoringLeftNavDirective=function(){function DBMonitoringLeftNavDirective(){return{restrict:"E",replace:!1,scope:{},templateUrl:"app/view/leftMenuBar/dbMonitoring/DBMonitoringLeftNavView.html",controller:DBMonitoringLeftNavController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return DBMonitoringLeftNavDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-db-monitoring-left-nav"),DBMonitoringLeftNavDirective),define("app/view/leftMenuBar/dbMonitoring/DBMonitoringLeftNavDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},DBMonitoringLeftNavController=function(_super){function DBMonitoringLeftNavController($scope){_super.call(this,$scope),this.$scope=$scope,$scope.controller=this}return __extends(DBMonitoringLeftNavController,_super),DBMonitoringLeftNavController.prototype.link=function(scope,iElement){this.element=iElement},DBMonitoringLeftNavController.prototype.initPostLogin=function(){},DBMonitoringLeftNavController.prototype.on_UEV_NAV_ACTION=function(){var currentTopLevelNav=NavigationService.instance().getTopLevelNavCurrent();currentTopLevelNav==NavigationService.TOP_LEVEL_NAV_DB_MONITORING&&this.setupLeftMenuBarBasedOnCurrentLocation()},DBMonitoringLeftNavController.prototype.setupLocationToNavItemMappings=function(){this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_SERVER_LIST,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_SERVER_DASHBOARD,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_CLUSTER_TOPOLOGY,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_LIVE_VIEW,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_QUERY_LIST,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_QUERY_DETAILS,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_CLIENT_LIST,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_SESSION_LIST,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_NAMESPACE_LIST,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_SCHEMA_LIST,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_OBJECT_BROWSER,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_WAIT_REPORT,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_TOP_ACTIVITY_REPORT,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_COMPARISON_REPORT,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_TOP_SQL_REPORT,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_IO_REPORT,DBMonitoringLeftNavController.NAV_ITEM_DB_LIST),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_EVENTS,DBMonitoringLeftNavController.NAV_ITEM_EVENTS),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_CONFIGURATION_HOME,DBMonitoringLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_COLLECTOR_LIST,DBMonitoringLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_BASELINE,DBMonitoringLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_WAIT_STATE_FILTERING,DBMonitoringLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.DB_MONITORING_CUSTOM_SQL_METRICS_LIST,DBMonitoringLeftNavController.NAV_ITEM_CONFIG)},DBMonitoringLeftNavController.prototype.onClickDBList=function(){DBMonitoringViewService.instance().viewDbServersList()},DBMonitoringLeftNavController.prototype.onClickAlertRespond=function(){DBMonitoringViewService.instance().viewAlertRespondHome()},DBMonitoringLeftNavController.prototype.onClickEvents=function(){DBMonitoringViewService.instance().viewDBEventsPage()},DBMonitoringLeftNavController.prototype.onClickMetricBrowser=function(){DBMonitoringViewService.instance().viewDBMetricBrowser()},DBMonitoringLeftNavController.prototype.onClickConfig=function(){DBMonitoringViewService.instance().viewDbConfiguration()},DBMonitoringLeftNavController.NAV_ITEM_DB_LIST="NAV_ITEM_DB_LIST",DBMonitoringLeftNavController.NAV_ITEM_EVENTS="NAV_ITEM_EVENTS",DBMonitoringLeftNavController.NAV_ITEM_ALERT_AND_RESPOND="NAV_ITEM_ALERT_AND_RESPOND",DBMonitoringLeftNavController.NAV_ITEM_CONFIG="NAV_ITEM_CONFIG",DBMonitoringLeftNavController.$inject=["$scope"],DBMonitoringLeftNavController}(LeftNavControllerBase);appdynamicsModule.controller("DBMonitoringLeftNavController",DBMonitoringLeftNavController),define("app/view/leftMenuBar/dbMonitoring/DBMonitoringLeftNavController",function(){});var ServerMonitoringLeftNavDirective=function(){function ServerMonitoringLeftNavDirective(){return{restrict:"E",replace:!1,scope:{},templateUrl:"app/view/leftMenuBar/serverMonitoring/ServerMonitoringLeftNavView.html",controller:ServerMonitoringLeftNavController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return ServerMonitoringLeftNavDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-server-monitoring-left-nav"),ServerMonitoringLeftNavDirective),define("app/view/leftMenuBar/serverMonitoring/ServerMonitoringLeftNavDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ServerMonitoringLeftNavController=function(_super){function ServerMonitoringLeftNavController($scope){_super.call(this,$scope),this.$scope=$scope,$scope.controller=this}return __extends(ServerMonitoringLeftNavController,_super),ServerMonitoringLeftNavController.prototype.link=function(scope,iElement){this.element=iElement},ServerMonitoringLeftNavController.prototype.initPostLogin=function(){},ServerMonitoringLeftNavController.prototype.on_UEV_NAV_ACTION=function(){var currentTopLevelNav=NavigationService.instance().getTopLevelNavCurrent();currentTopLevelNav==NavigationService.TOP_LEVEL_NAV_SERVER_MONITORING&&this.setupLeftMenuBarBasedOnCurrentLocation()},ServerMonitoringLeftNavController.prototype.setupLocationToNavItemMappings=function(){this.mapLocationToNavItem(NavigationDataConstants.SERVER_MONITORING_MACHINE_LIST,ServerMonitoringLeftNavController.NAV_ITEM_MACHINE_LIST),this.mapLocationToNavItem(NavigationDataConstants.SERVER_MONITORING_MACHINE_OVERVIEW,ServerMonitoringLeftNavController.NAV_ITEM_MACHINE_LIST),this.mapLocationToNavItem(NavigationDataConstants.SERVER_MONITORING_MACHINE_DISKS,ServerMonitoringLeftNavController.NAV_ITEM_MACHINE_LIST),this.mapLocationToNavItem(NavigationDataConstants.SERVER_MONITORING_MACHINE_PROCESSES,ServerMonitoringLeftNavController.NAV_ITEM_MACHINE_LIST),this.mapLocationToNavItem(NavigationDataConstants.SERVER_MONITORING_MACHINE_CPU,ServerMonitoringLeftNavController.NAV_ITEM_MACHINE_LIST),this.mapLocationToNavItem(NavigationDataConstants.SERVER_MONITORING_MACHINE_NETWORK,ServerMonitoringLeftNavController.NAV_ITEM_MACHINE_LIST),this.mapLocationToNavItem(NavigationDataConstants.SERVER_MONITORING_ALERT,ServerMonitoringLeftNavController.NAV_ITEM_ALERT_AND_RESPOND),this.mapLocationToNavItem(NavigationDataConstants.SERVER_MONITORING_CONFIGURATION_HOME,ServerMonitoringLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.SERVER_MONITORING_EVENTS,ServerMonitoringLeftNavController.NAV_ITEM_EVENTS),this.mapLocationToNavItem(NavigationDataConstants.SERVER_MONITORING_BASELINES,ServerMonitoringLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.SERVER_MONITORING_SERVICE_LIST,ServerMonitoringLeftNavController.NAV_ITEM_SERVICE_MONITORING_LIST),this.mapLocationToNavItem(NavigationDataConstants.SERVER_MONITORING_SAM_TARGET_DETAILS,ServerMonitoringLeftNavController.NAV_ITEM_SERVICE_MONITORING_LIST)},ServerMonitoringLeftNavController.prototype.onClickMachineList=function(){ServerMonitoringViewService.instance().viewMachineList()},ServerMonitoringLeftNavController.prototype.onClickAlertRespond=function(){ServerMonitoringViewService.instance().viewAlertRespondHome()},ServerMonitoringLeftNavController.prototype.onClickEvents=function(){ServerMonitoringViewService.instance().viewEventsPage()},ServerMonitoringLeftNavController.prototype.onClickMetricBrowser=function(){ServerMonitoringViewService.instance().viewMetricBrowser()},ServerMonitoringLeftNavController.prototype.onClickConfig=function(){ServerMonitoringViewService.instance().viewSIMConfiguration()},ServerMonitoringLeftNavController.prototype.onClickService=function(){ServerMonitoringViewService.instance().viewServiceMonitoringList()},ServerMonitoringLeftNavController.NAV_ITEM_MACHINE_LIST="NAV_ITEM_MACHINE_LIST",ServerMonitoringLeftNavController.NAV_ITEM_EVENTS="NAV_ITEM_EVENTS",ServerMonitoringLeftNavController.NAV_ITEM_ALERT_AND_RESPOND="NAV_ITEM_ALERT_AND_RESPOND",ServerMonitoringLeftNavController.NAV_ITEM_CONFIG="NAV_ITEM_CONFIG",ServerMonitoringLeftNavController.NAV_ITEM_SERVICE_MONITORING_LIST="NAV_ITEM_SERVICE_MONITORING_LIST",ServerMonitoringLeftNavController.$inject=["$scope"],ServerMonitoringLeftNavController}(LeftNavControllerBase);appdynamicsModule.controller("ServerMonitoringLeftNavController",ServerMonitoringLeftNavController),define("app/view/leftMenuBar/serverMonitoring/ServerMonitoringLeftNavController",function(){});var AnalyticsLeftNavDirective=function(){function AnalyticsLeftNavDirective(){return{restrict:"E",replace:!1,scope:{},templateUrl:"app/view/leftMenuBar/analytics/AnalyticsLeftNavView.html",controller:AnalyticsLeftNavController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return AnalyticsLeftNavDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-analytics-left-nav"),AnalyticsLeftNavDirective),define("app/view/leftMenuBar/analytics/AnalyticsLeftNavDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsLeftNavController=function(_super){function AnalyticsLeftNavController($scope){_super.call(this,$scope),this.$scope=$scope,this.adqlEnabled=!1,this.showOldAnalytics=AnalyticsViewService.instance().debugAnalyticsMode(),$scope.controller=this,this.adqlEnabled=this.isAdqlEnabled(),this.showMetricConfig=this.isMetricConfigAllowed()}return __extends(AnalyticsLeftNavController,_super),AnalyticsLeftNavController.prototype.link=function(scope,iElement){this.element=iElement},AnalyticsLeftNavController.prototype.isAdqlEnabled=function(){return AppConfig.instance().adqlEnabled},AnalyticsLeftNavController.prototype.on_UEV_NAV_ACTION=function(){var currentTopLevelNav=NavigationService.instance().getTopLevelNavCurrent();currentTopLevelNav==NavigationService.TOP_LEVEL_NAV_ANALYTICS&&this.setupLeftMenuBarBasedOnCurrentLocation()
},AnalyticsLeftNavController.prototype.setupLocationToNavItemMappings=function(){this.mapLocationToNavItem(NavigationDataConstants.ANALYTICS_TRANSACTIONS,AnalyticsLeftNavController.NAV_ITEM_SEARCH_ANALYZE),this.mapLocationToNavItem(NavigationDataConstants.ANALYTICS_LOGS,AnalyticsLeftNavController.NAV_ITEM_SEARCH_ANALYZE),this.mapLocationToNavItem(NavigationDataConstants.ANALYTICS_USER_WEB_ACTIVITY,AnalyticsLeftNavController.NAV_ITEM_SEARCH_ANALYZE),this.mapLocationToNavItem(NavigationDataConstants.ANALYTICS_USER_MOBILE_ACTIVITY,AnalyticsLeftNavController.NAV_ITEM_SEARCH_ANALYZE),this.mapLocationToNavItem(NavigationDataConstants.ANALYTICS_ADQL_HOME,AnalyticsLeftNavController.NAV_ITEM_SEARCH_LIST),this.mapLocationToNavItem(NavigationDataConstants.ANALYTICS_SEARCH_LIST,AnalyticsLeftNavController.NAV_ITEM_SEARCH_LIST),this.mapLocationToNavItem(NavigationDataConstants.ANALYTICS_ADQL_SEARCH,AnalyticsLeftNavController.NAV_ITEM_SEARCH_LIST),this.mapLocationToNavItem(NavigationDataConstants.ANALYTICS_CONFIG,AnalyticsLeftNavController.NAV_ITEM_CONFIG),this.mapLocationToNavItem(NavigationDataConstants.ANALYTICS_METRICS_CONFIG,AnalyticsLeftNavController.NAV_ITEM_METRICS),this.mapLocationToNavItem(NavigationDataConstants.ANALYTICS_EXTRACTED_FIELDS_CONFIG,AnalyticsLeftNavController.NAV_ITEM_CONFIG)},AnalyticsLeftNavController.prototype.onClickSearchAndAnalyze=function(){AnalyticsViewService.instance().viewSearchAndAnalyze()},AnalyticsLeftNavController.prototype.onClickSearchList=function(){AnalyticsViewService.instance().viewSearchList()},AnalyticsLeftNavController.prototype.onClickAlertRespond=function(){AnalyticsViewService.instance().viewAlertRespondHome()},AnalyticsLeftNavController.prototype.onClickMetricBrowser=function(){AnalyticsViewService.instance().viewAnalyticsMetricBrowser()},AnalyticsLeftNavController.prototype.onClickConfig=function(){AnalyticsViewService.instance().viewAnalyticsConfig()},AnalyticsLeftNavController.prototype.onClickMetrics=function(){AnalyticsViewService.instance().viewMetricConfig()},AnalyticsLeftNavController.prototype.onClickMetricCorrelation=function(){AnalyticsViewService.instance().viewMetricCorrelation()},AnalyticsLeftNavController.prototype.isMetricConfigAllowed=function(){return MasterService.instance().hasAccountPermission(PermissionAction.ANALYTICS_MANAGE_METRICS)},AnalyticsLeftNavController.NAV_ITEM_SEARCH_ANALYZE="NAV_ITEM_SEARCH_ANALYZE",AnalyticsLeftNavController.NAV_ITEM_SEARCH_LIST="NAV_ITEM_SEARCH_LIST",AnalyticsLeftNavController.NAV_ITEM_CONFIG="NAV_ITEM_CONFIG",AnalyticsLeftNavController.NAV_ITEM_METRICS="NAV_ITEM_METRICS",AnalyticsLeftNavController.NAV_ITEM_ALERT_AND_RESPOND="NAV_ITEM_ALERT_AND_RESPOND",AnalyticsLeftNavController.$inject=["$scope"],AnalyticsLeftNavController}(LeftNavControllerBase);appdynamicsModule.controller("AnalyticsLeftNavController",AnalyticsLeftNavController),define("app/view/leftMenuBar/analytics/AnalyticsLeftNavController",function(){});var AlertRespondLeftNavDirective=function(){function AlertRespondLeftNavDirective(){return{restrict:"E",replace:!1,scope:{},templateUrl:"app/view/leftMenuBar/alertRespond/AlertRespondLeftNavView.html",controller:AlertRespondLeftNavController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return AlertRespondLeftNavDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-alert-respond-left-nav"),AlertRespondLeftNavDirective),define("app/view/leftMenuBar/alertRespond/AlertRespondLeftNavDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AlertRespondLeftNavController=function(_super){function AlertRespondLeftNavController($scope){_super.call(this,$scope),this.$scope=$scope,this.showHttpTemplates=!0,this.showEmailTemplates=!0,this.showEmailSmsConfig=!0,$scope.controller=this}return __extends(AlertRespondLeftNavController,_super),AlertRespondLeftNavController.prototype.link=function(scope,iElement){this.element=iElement},AlertRespondLeftNavController.prototype.initPostLogin=function(){this.showEmailTemplates=MasterService.instance().hasAccountPermission(PermissionAction.CONFIG_CUSTOM_EMAIL_ACTION_PLANS),this.showHttpTemplates=MasterService.instance().hasAccountPermission(PermissionAction.CONFIG_HTTP_REQUEST_ACTION_PLANS),this.showEmailSmsConfig=MasterService.instance().hasAccountPermission(PermissionAction.CONFIG_NOTIFICATIONS)},AlertRespondLeftNavController.prototype.on_UEV_NAV_ACTION=function(){var currentTopLevelNav=NavigationService.instance().getTopLevelNavCurrent();currentTopLevelNav==NavigationService.TOP_LEVEL_NAV_ALERT_RESPOND&&this.setupLeftMenuBarBasedOnCurrentLocation()},AlertRespondLeftNavController.prototype.setupLocationToNavItemMappings=function(){this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_POLICIES,AlertRespondLeftNavController.NAV_ITEM_POLICIES),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_HEALTH_RULES,AlertRespondLeftNavController.NAV_ITEM_HEALTH_RULES),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_ACTIONS,AlertRespondLeftNavController.NAV_ITEM_ACTIONS),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_ACTION_SUPPRESSION,AlertRespondLeftNavController.NAV_ITEM_ACTION_SUPPRESSION),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_EMAIL_DIGESTS,AlertRespondLeftNavController.NAV_ITEM_EMAIL_DIGESTS),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_EMAIL_ACTION_PLAN_DETAIL,AlertRespondLeftNavController.NAV_ITEM_EMAIL_TEMPLATES),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_EMAIL_ACTION_PLAN_LIST,AlertRespondLeftNavController.NAV_ITEM_EMAIL_TEMPLATES),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_HTTP_ACTION_PLAN_LIST,AlertRespondLeftNavController.NAV_ITEM_HTTP_ACTION_TEMPLATES),this.mapLocationToNavItem(NavigationDataConstants.ALERT_RESPOND_HTTP_ACTION_PLAN_DETAIL,AlertRespondLeftNavController.NAV_ITEM_HTTP_ACTION_TEMPLATES)},AlertRespondLeftNavController.prototype.onClickPolicies=function(){AlertRespondViewService.instance().viewPolicies()},AlertRespondLeftNavController.prototype.onClickHealthRules=function(){AlertRespondViewService.instance().viewHealthRules()},AlertRespondLeftNavController.prototype.onClickActions=function(){AlertRespondViewService.instance().viewActions()},AlertRespondLeftNavController.prototype.onClickActionSuppression=function(){AlertRespondViewService.instance().viewActionSuppression()},AlertRespondLeftNavController.prototype.onClickEmailDigests=function(){AlertRespondViewService.instance().viewEmailDigests()},AlertRespondLeftNavController.prototype.onClickEmailActionTemplates=function(){EmailActionViewService.instance().viewEmailActionPlanListView()},AlertRespondLeftNavController.prototype.onClickHttpActionTemplates=function(){HttpActionViewService.instance().viewHttpActionPlanListView()},AlertRespondLeftNavController.prototype.onClickEmailSmsConfig=function(){NotificationConfigService.instance().openEmailSMSConfig(this.$scope)},AlertRespondLeftNavController.NAV_ITEM_POLICIES="NAV_ITEM_POLICIES",AlertRespondLeftNavController.NAV_ITEM_HEALTH_RULES="NAV_ITEM_HEALTH_RULES",AlertRespondLeftNavController.NAV_ITEM_ACTIONS="NAV_ITEM_ACTIONS",AlertRespondLeftNavController.NAV_ITEM_ACTION_SUPPRESSION="NAV_ITEM_ACTION_SUPPRESSION",AlertRespondLeftNavController.NAV_ITEM_EMAIL_DIGESTS="NAV_ITEM_EMAIL_DIGESTS",AlertRespondLeftNavController.NAV_ITEM_EMAIL_TEMPLATES="NAV_ITEM_EMAIL_TEMPLATES",AlertRespondLeftNavController.NAV_ITEM_HTTP_ACTION_TEMPLATES="NAV_ITEM_HTTP_ACTION_TEMPLATES",AlertRespondLeftNavController.NAV_ITEM_EMAIL_SMS_CONFIG="NAV_ITEM_EMAIL_SMS_CONFIG",AlertRespondLeftNavController.$inject=["$scope"],AlertRespondLeftNavController}(LeftNavControllerBase);appdynamicsModule.controller("AlertRespondLeftNavController",AlertRespondLeftNavController),define("app/view/leftMenuBar/alertRespond/AlertRespondLeftNavController",function(){});var LeftMenuBar=function(){function LeftMenuBar(){return{restrict:"E",transclude:!1,replace:!1,templateUrl:"app/view/leftMenuBar/LeftMenuBar.html",controller:"LeftMenuBarController",link:function(scope,iElement){$(iElement).css("display","inline-block")}}}return LeftMenuBar}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-left-menu-bar"),LeftMenuBar),define("app/view/leftMenuBar/LeftMenuBar",function(){}),require(["app/view/leftMenuBar/LeftNavControllerBase"],function(){require(["app/view/leftMenuBar/LeftMenuBarController","app/view/leftMenuBar/apm/APMLeftNavDirective","app/view/leftMenuBar/apm/APMLeftNavController","app/view/leftMenuBar/eum/web/EUMWebLeftNavDirective","app/view/leftMenuBar/eum/web/EUMWebLeftNavController","app/view/leftMenuBar/eum/mobile/EUMMobileLeftNavDirective","app/view/leftMenuBar/eum/mobile/EUMMobileLeftNavController","app/view/leftMenuBar/dbMonitoring/DBMonitoringLeftNavDirective","app/view/leftMenuBar/dbMonitoring/DBMonitoringLeftNavController","app/view/leftMenuBar/serverMonitoring/ServerMonitoringLeftNavDirective","app/view/leftMenuBar/serverMonitoring/ServerMonitoringLeftNavController","app/view/leftMenuBar/analytics/AnalyticsLeftNavDirective","app/view/leftMenuBar/analytics/AnalyticsLeftNavController","app/view/leftMenuBar/alertRespond/AlertRespondLeftNavDirective","app/view/leftMenuBar/alertRespond/AlertRespondLeftNavController","app/view/leftMenuBar/LeftMenuBar"])}),define("app/view/leftMenuBar/LeftMenuBarModuleCode",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/dialogs/ExportDialog/ViewExportedTextController",["require","exports"],function(){var ViewExportedTextController=function(_super){function ViewExportedTextController($scope,$modalInstance,dialogData,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,$scope.controller=this,this.init()}return __extends(ViewExportedTextController,_super),ViewExportedTextController.prototype.closeDialog=function(){this.$modalInstance.close()},ViewExportedTextController.prototype.init=function(){this.titleText=this.dialogData.title,this.exportedText=this.dialogData.value},ViewExportedTextController.prototype.onExportToCSVFile=function(csvData){Util.downloadFile(this.dialogData.fileName+".csv","csv",csvData),this.closeDialog()},ViewExportedTextController.$inject=["$scope","$modalInstance","dialogData","resourceManager","notificationService","sharedInjectorService"],ViewExportedTextController}(ControllerBase);return ViewExportedTextController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/EUMControllerBase",["require","exports"],function(require,exports){!function(EUMWebSections){EUMWebSections[EUMWebSections.OVERVIEW=0]="OVERVIEW",EUMWebSections[EUMWebSections.SESSIONS=1]="SESSIONS",EUMWebSections[EUMWebSections.PAGE_VIEWS=2]="PAGE_VIEWS",EUMWebSections[EUMWebSections.SYNTHETIC_JOBS=3]="SYNTHETIC_JOBS",EUMWebSections[EUMWebSections.SYNTHETIC_SNAPSHOTS=4]="SYNTHETIC_SNAPSHOTS",EUMWebSections[EUMWebSections.SYNTHETIC_PAGES=5]="SYNTHETIC_PAGES",EUMWebSections[EUMWebSections.SYNTHETIC_ON_DEMAND=6]="SYNTHETIC_ON_DEMAND"}(exports.EUMWebSections||(exports.EUMWebSections={}));var EUMControllerBase=(exports.EUMWebSections,function(_super){function EUMControllerBase($scope,resourceManager,notificationService,sharedInjectorService,applicationViewService,eumViewService,$modalInstance,dialogData){void 0===$modalInstance&&($modalInstance=null),void 0===dialogData&&(dialogData=null),_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.applicationViewService=applicationViewService,this.eumViewService=eumViewService,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.platform="Web",this.fetchDataOnTimeRangeEvents=!0,this.hideTimeRange=!1,this.hideRefresh=!1,this.rootScopeWatchDestructors=[],this.featureService=this.sharedInjectorService.featureService()}return __extends(EUMControllerBase,_super),EUMControllerBase.prototype.initializeProperties=function(){ADLoggerService.warn("EUMControllerBase.initializeProperties should be overridden","Warning")},EUMControllerBase.prototype.initializeGrid=function(){},EUMControllerBase.prototype.initializeCharts=function(){},EUMControllerBase.prototype.fetchViewData=function(){ADLoggerService.warn("EUMControllerBase.fetchViewData should be overridden","Warning")},EUMControllerBase.prototype.fetchData=function(){ADLoggerService.warn("EUMControllerBase.fetchData should be overridden","Warning")},EUMControllerBase.prototype.setCommonProperties=function(stringForParams){var urlParams=new URLParams(stringForParams);this.location=urlParams.location(),this.applicationId=parseInt(urlParams.application()),this.disableSplitter=BrowserUtils.isBrowserInternetExplorer8()},EUMControllerBase.prototype.initialize=function(){this.initializeProperties(),this.initializeGrid(),this.initializeEventListeners(),this.fetchViewData()},EUMControllerBase.prototype.afterGetViewData=function(){this.initializeLocationBar(),this.initializeNavigationTabs(),this.fetchData()},EUMControllerBase.prototype.initializeLocationBar=function(){var _this=this,locationEntries=[];if(NavigationService.instance().isEumWebLocation(this.location))locationEntries=EumViewService.instance().getLocationBarConfigsForWebApp(this.applicationId,this.applicationName);else if(NavigationService.instance().isEumMobileLocation(this.location)){var firstLocationLabel=this.getStringFromBundle("ui","ms_eumWebAppsAPMLeftNavZoneLabel")+": "+this.getStringFromBundle("ui","ms_eumMobileAppsNavZoneLabel");locationEntries=[{label:firstLocationLabel,clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_MOBILE_ALL_APPS)}},{label:this.applicationName,clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_MOBILE_HOME)}}]}this.locationEntries=locationEntries,InjectorService.instance().$timeout()(function(){_this.setEumLocationBarConfigData()})},EUMControllerBase.prototype.onLocationBarRefresh=function(){ADLoggerService.info("EUMControllerBase.onLocationBarRefresh"),this.fetchData&&this.fetchData()},EUMControllerBase.prototype.getMaximumAllowableTimeRangeDurationInMinutes=function(){return this.featureService.isWebEUMLiteEnabled()?DateTimeUtil.MINUTES_PER_DAY:-1},EUMControllerBase.prototype.initializeNavigationTabs=function(){this.navigationTabs=this.eumViewService.getWebNavigationTabsForLocation(this.selectedNavigationTab,this.applicationId)},EUMControllerBase.prototype.navigateTo=function(location){switch(location){case NavigationDataConstants.APP_DASHBOARD:this.applicationViewService.viewApplicationDashboard(this.applicationId);break;case NavigationDataConstants.EUM_HOME:this.eumViewService.viewHome();break;case NavigationDataConstants.EUM_WEB_ALL_APPS:this.eumViewService.viewWebAllApps();break;case NavigationDataConstants.EUM_MOBILE_ALL_APPS:this.eumViewService.viewMobileAllApps();break;case NavigationDataConstants.EUM_GEO_MASTER:this.eumViewService.viewEumGeoMaster(this.applicationId);break;case NavigationDataConstants.EUM_DASHBOARD:this.eumViewService.viewWebGeo(this.applicationId);break;case NavigationDataConstants.EUM_WEB_MAIN_DASHBOARD:this.eumViewService.viewEumWebMainDashboard(this.applicationId);break;case NavigationDataConstants.EUM_PAGES_LIST:this.eumViewService.viewWebPagesList(this.applicationId);break;case NavigationDataConstants.EUM_WEB_ANALYZE:this.eumViewService.viewWebAnalyze(this.applicationId);break;case NavigationDataConstants.EUM_BROWSER_SNAPSHOTS:this.eumViewService.viewWebBrowserSnapshotList(this.applicationId);break;case NavigationDataConstants.EUM_SYNTHETIC_LAUNCH:this.eumViewService.viewSyntheticLaunch(this.applicationId);break;case NavigationDataConstants.EUM_SYNTHETIC_ON_DEMAND:this.eumViewService.viewSyntheticOnDemand(this.applicationId);break;case NavigationDataConstants.EUM_SYNTHETIC_SCHEDULE_LIST:this.eumViewService.viewSyntheticScheduleList(this.applicationId);break;case NavigationDataConstants.EUM_SYNTHETIC_SCHEDULE:this.eumViewService.viewSyntheticLaunch(this.applicationId);break;case NavigationDataConstants.EUM_SYNTHETIC_SESSION_ANALYTICS:this.eumViewService.viewSyntheticAnalyze(this.applicationId);break;case NavigationDataConstants.EUM_BROWSERS_AND_DEVICES:this.eumViewService.viewWebEndUserStats(this.applicationId);break;case NavigationDataConstants.EUM_WEB_SESSION_ANALYTICS:this.eumViewService.viewEumWebSessions(this.applicationId);break;case NavigationDataConstants.EUM_SYNTHETIC_PAGES_LIST:this.eumViewService.viewSyntheticWebPagesList(this.applicationId);break;case NavigationDataConstants.EUM_WEB_EVENTS_LIST:this.eumViewService.viewWebEventsList(this.applicationId);break;case NavigationDataConstants.EUM_WEB_HEALTH_RULE_VIOLATIONS:this.eumViewService.viewWebHealthRuleViolations(this.applicationId);break;default:ADLoggerService.warn("EUMControllerBase.navigateTo: Unhandled location "+location)}},EUMControllerBase.prototype.addRootScopeWatch=function(watcher){this.rootScopeWatchDestructors.push(watcher)},EUMControllerBase.prototype.initializeEventListeners=function(){var _this=this;this.$scope.$on(TimeRangeService.UEV_TIME_RANGE_CHANGE_TR_SERVICE,function(){ADLoggerService.info("EUMControllerBase.on_UEV_TIME_RANGE_CHANGE_TR_SERVICE"),_this.on_UEV_TIME_RANGE_CHANGE_TR_SERVICE()}),this.$scope.$on(TimeRangeService.TIMERANGE_AUTOREFRESH_EVENT,function(){ADLoggerService.info("EUMControllerBase.on_TIMERANGE_AUTOREFRESH_EVENT"),_this.on_TIMERANGE_AUTOREFRESH_EVENT()});var controller=this;this.$scope.$on("$destroy",function(){for(var i in controller.rootScopeWatchDestructors)"function"==typeof controller.rootScopeWatchDestructors[i]&&controller.rootScopeWatchDestructors[i]()}),this.$scope.$watch("controller.showFilters",function(){window.setTimeout(function(){_this.$scope.$broadcast("layoutChanged")},1)}),this.$scope.$on(GridComp.UEV_GRID_COLUMN_SORT_EVENT,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var gridColumnSortEvent=args[0];_this.on_UEV_GRID_COLUMN_SORT_EVENT(gridColumnSortEvent)})},EUMControllerBase.prototype.on_UEV_TIME_RANGE_CHANGE_TR_SERVICE=function(){this.fetchViewData&&this.fetchDataOnTimeRangeEvents&&this.fetchViewData()},EUMControllerBase.prototype.on_TIMERANGE_AUTOREFRESH_EVENT=function(){this.fetchViewData&&this.fetchDataOnTimeRangeEvents&&this.fetchViewData()},EUMControllerBase.prototype.applyFilters=function(){this.fetchData()},EUMControllerBase.prototype.toggleFilters=function(){this.showFilters=!this.showFilters},EUMControllerBase.prototype.getFiltersIcon=function(){return this.showFilters?ImageUtil.filterShow:ImageUtil.filterHide},EUMControllerBase.prototype.on_UEV_GRID_COLUMN_SORT_EVENT=function(gridColumnSortEvent){this.viewState&&(this.viewState.initialSortDirection=gridColumnSortEvent.direction,this.viewState.initialSortField=gridColumnSortEvent.column.dataIndex)},EUMControllerBase.prototype.getMaxInGridColumn=function(dataProvider,dataIndex){try{for(var max=0,i=0;i<dataProvider.length;i++){var datum=dataProvider[i],value=datum[dataIndex]?+datum[dataIndex]:-1;value>max&&(max=value)}return max}catch(e){return ADLoggerService.warn("Error calculating max for this data store. Make sure dataIndex is present in store."+e),0/0}},EUMControllerBase.getElasticSearchDataLimitInMinutes=function(navigationConstant){switch(navigationConstant){case NavigationDataConstants.EUM_WEB_MAIN_DASHBOARD:return{limitInMinutes:2*DateTimeUtil.MINUTES_PER_WEEK,message:EUMControllerBase.ElasticSearchDataLimit2Weeks};case NavigationDataConstants.EUM_WEB_ANALYZE:return{limitInMinutes:2*DateTimeUtil.MINUTES_PER_WEEK,message:EUMControllerBase.ElasticSearchDataLimit2Weeks};case NavigationDataConstants.EUM_MOBILE_MAIN_DASHBOARD:return{limitInMinutes:DateTimeUtil.MINUTES_PER_MONTH,message:EUMControllerBase.ElasticSearchDataLimit1Month};case NavigationDataConstants.EUM_NETWORK_REQUEST_ANALYTICS:return{limitInMinutes:DateTimeUtil.MINUTES_PER_MONTH,message:EUMControllerBase.ElasticSearchDataLimit1Month};default:return{limitInMinutes:2*DateTimeUtil.MINUTES_PER_WEEK,message:EUMControllerBase.ElasticSearchDataLimit2Weeks}}},EUMControllerBase.constructPieChart=function(name,chartData){var options={credits:{enabled:!1},chart:{spacing:[0,0,0,0],plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,backgroundColor:"rgba(255,255,255,0.1)"},legend:{enabled:!1},title:{text:""},tooltip:{headerFormat:"<b>{point.key}</b>:<br>",pointFormat:"{point.percentage:.1f} %"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0,point:{events:{legendItemClick:function(){return!1}}}}},series:[{type:"pie",innerSize:ChartUtil.PIE_CHART_SERIES0_INNER_SIZE,data:chartData}]};return options},EUMControllerBase.prototype.isTimeRangeGreaterThanAllowed=function(){return this.elasticSearchDataLimitInfo=EUMControllerBase.getElasticSearchDataLimitInMinutes(this.location),TimeRangeService.instance().getCurrentTimeRangeDuration()>this.elasticSearchDataLimitInfo.limitInMinutes},EUMControllerBase.prototype.setEumLocationBarConfigData=function(){var _this=this,config={};config.locationBarEntryConfigs=this.locationEntries,config.helpLink=this.helpLink,config.hideTimeRange=this.hideTimeRange,config.hideRefresh=this.hideRefresh,config.showBaselineSelector=!1,config.onRefreshFunction=function(){_this.onLocationBarRefresh()},this.setLocationBarConfig(config)},EUMControllerBase.prototype.initModal=function(){this.$scope.$on(NavigationService.UEV_BEFORE_NAVIGATE_TO_FRAGMENT,this.onNavigateAway.bind(this)),this.$modalInstance.result.then(this.onClose.bind(this),this.onClose.bind(this)),this.replaceURLForModal()},EUMControllerBase.prototype.replaceURLForModal=function(){},EUMControllerBase.prototype.onClose=function(){this.closedViaExternalNav||(this.dialogData?URLUtil.setLocationHashNoHistory(this.savedURLHash):NavigationService.instance().gotoDefaultLocation())},EUMControllerBase.prototype.onNavigateAway=function(){this.closedViaExternalNav||(this.dialogData&&(URLUtil.setLocationHashNoHistory(this.savedURLHash),ViewUtil.safeApply(AngularUtil.rootScope())),this.closedViaExternalNav=!0,this.closeDialog())},EUMControllerBase.prototype.closeDialog=function(){this.$modalInstance.close()},EUMControllerBase.ElasticSearchDataLimit2Weeks="Data capped to 2 weeks.",EUMControllerBase.ElasticSearchDataLimit1Month="Data capped to 1 month.",EUMControllerBase}(ControllerBase));exports.EUMControllerBase=EUMControllerBase;var EUMDialogControllerBase=function(_super){function EUMDialogControllerBase($scope,$modalInstance){_super.call(this,$scope,$modalInstance),this.$scope=$scope,this.$modalInstance=$modalInstance}return __extends(EUMDialogControllerBase,_super),EUMDialogControllerBase.prototype.initModal=function(){return this.replaceURLForModal()},EUMDialogControllerBase.prototype.replaceURLForModal=function(){return InjectorService.instance().$q().when()},EUMDialogControllerBase.prototype.initialize=function(){this.initializeProperties(),this.initializeEventListeners(),this.fetchViewData()},EUMDialogControllerBase.prototype.initializeProperties=function(){ADLoggerService.warn("EUMDialogControllerBase.initializeProperties should be overridden","Warning")},EUMDialogControllerBase.prototype.initializeEventListeners=function(){},EUMDialogControllerBase.prototype.fetchViewData=function(){ADLoggerService.warn("EUMDialogControllerBase.fetchViewData should be overridden","Warning")},EUMDialogControllerBase.prototype.afterGetViewData=function(){this.fetchData()},EUMDialogControllerBase.prototype.fetchData=function(){ADLoggerService.warn("EUMDialogControllerBase.fetchData should be overridden","Warning")},EUMDialogControllerBase}(DialogControllerBase);exports.EUMDialogControllerBase=EUMDialogControllerBase});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/mobile/MobileControllerBase",["require","exports","app/view/eum/EUMControllerBase"],function(require,exports,EUMControllerBase){!function(EUMMobileSections){EUMMobileSections[EUMMobileSections.OVERVIEW=0]="OVERVIEW",EUMMobileSections[EUMMobileSections.SESSIONS=1]="SESSIONS",EUMMobileSections[EUMMobileSections.MOBILE_REQUESTS=2]="MOBILE_REQUESTS",EUMMobileSections[EUMMobileSections.CRASHES=3]="CRASHES",EUMMobileSections[EUMMobileSections.CUSTOM_DATA=4]="CUSTOM_DATA"}(exports.EUMMobileSections||(exports.EUMMobileSections={}));var MobileControllerBase=(exports.EUMMobileSections,function(_super){function MobileControllerBase($scope,resourceManager,notificationService,sharedInjectorService,applicationViewService,eumViewService,$modalInstance,dialogData){var _this=this;void 0===$modalInstance&&($modalInstance=null),void 0===dialogData&&(dialogData=null),_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService,applicationViewService,eumViewService,$modalInstance,dialogData),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.applicationViewService=applicationViewService,this.eumViewService=eumViewService,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.EUMPageMap={EUM_MOBILE_MAIN_DASHBOARD:{group:0,tab:{name:this.getString("ms_eumMainDashboardTabLabel"),clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_MOBILE_MAIN_DASHBOARD)}}},EUM_MOBILE_APPLICATION:{group:0,tab:{name:this.getString("ms_geoDashboardTabLabel"),clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_MOBILE_APPLICATION)}}},EUM_DEVICES_CARRRIERS:{group:0,tab:{name:this.getString("ms_endUserStats"),clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_DEVICES_CARRRIERS)}}},EUM_REQUESTS_EPISODES:{group:2,tab:{name:this.getString("ms_requestsAndEpisodes"),clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_REQUESTS_EPISODES)}}},EUM_REQUEST_SNAPSHOT_LIST:{group:2,tab:{name:this.getString("ms_snapshots"),clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_REQUEST_SNAPSHOT_LIST)}}},EUM_ANALYTICS_CRASH_DASHBOARD:{group:3,tab:{name:this.getString("ms_crashDashboard"),selected:this.featureService.isMobileEUMLiteEnabled(),clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_ANALYTICS_CRASH_DASHBOARD)}}},EUM_CRASH_LIST:{group:3,tab:{name:this.getString("ms_crashSnapshots"),selected:this.featureService.isMobileEUMLiteEnabled(),clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_CRASH_LIST)}}},EUM_MOBILE_INFO_POINT_LIST:{group:4,tab:{name:this.getString("ms_timersAndMetrics"),clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_MOBILE_INFO_POINT_LIST)}}},EUM_NETWORK_REQUEST_ANALYTICS:{group:2,tab:{name:this.getString("ms_mobileRequestAnalyticsTab"),clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_NETWORK_REQUEST_ANALYTICS)}}},EUM_MOBILE_INFO_POINTS:{group:4,tab:{name:this.getString("ms_infoPoints"),clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_MOBILE_INFO_POINTS)}}}},this.overviewNavigationTabs=[NavigationDataConstants.EUM_MOBILE_MAIN_DASHBOARD,NavigationDataConstants.EUM_MOBILE_APPLICATION,NavigationDataConstants.EUM_DEVICES_CARRRIERS],this.mobileRequestsNavigationTabs=[NavigationDataConstants.EUM_REQUESTS_EPISODES,NavigationDataConstants.EUM_NETWORK_REQUEST_ANALYTICS,NavigationDataConstants.EUM_REQUEST_SNAPSHOT_LIST],this.crashesNavigationTabs=[NavigationDataConstants.EUM_ANALYTICS_CRASH_DASHBOARD,NavigationDataConstants.EUM_CRASH_LIST],this.customDataNavigationTabs=[NavigationDataConstants.EUM_MOBILE_INFO_POINT_LIST,NavigationDataConstants.EUM_MOBILE_INFO_POINTS]}return __extends(MobileControllerBase,_super),MobileControllerBase.prototype.setCommonProperties=function(stringForParams){_super.prototype.setCommonProperties.call(this,stringForParams);var urlParams=new URLParams(stringForParams);this.platform=urlParams.platform(),this.mobileAppId=parseInt(urlParams.mobileApp()),this.isAndroid="Android"===this.platform,this.isMobileAppMode=this.mobileAppId?!0:!1,this.disableSplitter=BrowserUtils.isBrowserInternetExplorer8()},MobileControllerBase.prototype.initializeLocationBar=function(){_super.prototype.initializeLocationBar.call(this),this.mobileAppName&&Util.isValidId(this.mobileAppId)&&(this.locationEntries=EumViewService.instance().getLocationBarConfigsForMobileApp(this.mobileAppId,this.mobileAppName,this.platform,this.applicationId))},MobileControllerBase.prototype.getMaximumAllowableTimeRangeDurationInMinutes=function(){return-1},MobileControllerBase.prototype.initializeNavigationTabs=function(){var _this=this,locationMapping=this.EUMPageMap[this.selectedNavigationTab],masterService=this.sharedInjectorService.getADInjector().get("masterService");if(masterService.initData.showEumMobileAnalyticsCrashDashboard||(this.EUMPageMap[NavigationDataConstants.EUM_ANALYTICS_CRASH_DASHBOARD].tab.clickFn=function(){_this.navigateTo(NavigationDataConstants.EUM_CRASH_DASHBOARD)}),locationMapping){this.navigationTabs=[];var tabList;switch(locationMapping.group){case 0:tabList=this.overviewNavigationTabs;break;case 2:tabList=this.mobileRequestsNavigationTabs;break;case 3:tabList=this.crashesNavigationTabs;break;case 4:tabList=this.customDataNavigationTabs}for(var i=0;i<tabList.length;i++){var tabName=tabList[i];if(this.EUMPageMap[tabList[i]]){var tab=this.EUMPageMap[tabList[i]].tab;tabName===this.selectedNavigationTab&&(tab.selected=!0),this.navigationTabs.push(tab)}}}},MobileControllerBase.prototype.navigateTo=function(location){switch(location){case NavigationDataConstants.EUM_PLATFORM:this.eumViewService.viewPlatformGeo(this.applicationId,this.platform);break;case NavigationDataConstants.EUM_MOBILE_APPLICATION:this.eumViewService.viewMobileAppGeo(this.applicationId,this.platform,this.mobileAppId);break;case NavigationDataConstants.EUM_MOBILE_MAIN_DASHBOARD:this.eumViewService.viewEumMobileMainDashboard(this.applicationId,this.platform,this.mobileAppId);break;case NavigationDataConstants.EUM_REQUESTS_EPISODES:this.eumViewService.viewMobileNetworkRequestList(this.applicationId,this.platform,this.mobileAppId);break;case NavigationDataConstants.EUM_REQUEST_SNAPSHOT_LIST:this.eumViewService.viewMobileSnapshotList(this.applicationId,this.platform,this.mobileAppId);break;case NavigationDataConstants.EUM_CRASH_DASHBOARD:this.eumViewService.viewMobileCrashes(this.applicationId,this.platform,this.mobileAppId);break;case NavigationDataConstants.EUM_ANALYTICS_CRASH_DASHBOARD:this.isMobileAppMode?this.eumViewService.viewAnalyticsCrashDashboardForMobileApp(this.applicationId,this.platform,this.mobileAppId):this.eumViewService.viewAnalyticsCrashDashboardForPlatform(this.applicationId,this.platform);break;case NavigationDataConstants.EUM_CRASH_LIST:this.isMobileAppMode?this.eumViewService.viewCrashListForMobileApp(this.applicationId,this.platform,this.mobileAppId):this.eumViewService.viewCrashListForPlatform(this.applicationId,this.platform);break;case NavigationDataConstants.EUM_MOBILE_INFO_POINT_LIST:this.eumViewService.viewMobileInfoPoints(this.applicationId,this.platform,this.mobileAppId);break;case NavigationDataConstants.EUM_MOBILE_INFO_POINTS:this.eumViewService.viewMobileInfoPointsOnly(this.applicationId,this.platform,this.mobileAppId);break;case NavigationDataConstants.EUM_DEVICES_CARRRIERS:this.eumViewService.viewMobileEndUserStats(this.applicationId,this.platform,this.mobileAppId);
break;case NavigationDataConstants.EUM_NETWORK_REQUEST_ANALYTICS:this.eumViewService.viewNetworkRequestAnalyze(this.applicationId,this.platform,this.mobileAppId);break;case NavigationDataConstants.EUM_MOBILE_SESSION_ANALYTICS:this.eumViewService.viewMobileSessionAnalyze(this.applicationId,this.platform,this.mobileAppId);break;default:_super.prototype.navigateTo.call(this,location)}},MobileControllerBase.prototype.configureDeviceModelColumnVisibilityForPlatform=function(columns,viewState,viewStateWasSamePlatform){if(!viewStateWasSamePlatform&&viewState&&viewState.viewOptionsColumnStates&&0!==viewState.viewOptionsColumnStates.length){var deviceModelIndex=this.indexOfDeviceModel(viewState.viewOptionsColumnStates);this.isAndroid?(viewState.iosDeviceModelState=viewState.viewOptionsColumnStates[deviceModelIndex],viewState.viewOptionsColumnStates[deviceModelIndex]=viewState.androidDeviceModelState):(viewState.androidDeviceModelState=viewState.viewOptionsColumnStates[deviceModelIndex],viewState.viewOptionsColumnStates[deviceModelIndex]=viewState.iosDeviceModelState)}},MobileControllerBase.prototype.indexOfDeviceModel=function(columns){for(var i=0;i<columns.length;i++)if("deviceModel"===columns[i].dataIndex)return i;return-1},MobileControllerBase}(EUMControllerBase.EUMControllerBase));exports.MobileControllerBase=MobileControllerBase;var MobileDialogControllerBase=function(_super){function MobileDialogControllerBase($scope,$modalInstance){_super.call(this,$scope,$modalInstance),this.$scope=$scope,this.$modalInstance=$modalInstance}return __extends(MobileDialogControllerBase,_super),MobileDialogControllerBase.prototype.setCommonProperties=function(stringForParams){var urlParams=new URLParams(stringForParams);this.platform=urlParams.platform(),this.mobileAppId=parseInt(urlParams.mobileApp()),this.isAndroid="Android"===this.platform,this.isMobileAppMode=this.mobileAppId?!0:!1,this.applicationId=parseInt(urlParams.application())},MobileDialogControllerBase}(EUMControllerBase.EUMDialogControllerBase);exports.MobileDialogControllerBase=MobileDialogControllerBase});var EUMCommonGridRenderers=function(){function EUMCommonGridRenderers(){}return EUMCommonGridRenderers.WEB_REQUEST_TYPE_ICON_RENDERER=function(val){var type=val,icon=ImageUtil.getEUMPageIcon(type);return icon?"<img class='adsSvgIconSmall' src='"+icon+"'/>":""},EUMCommonGridRenderers.BROWSER_ICON_NAME_RENDERER=function(v){var browser=v;return"<img style='height : 20px;'' src='"+ImageUtil.getBrowserIcon(v)+"'/><span style='padding-left: 5px;'>"+browser+"</span>"},EUMCommonGridRenderers.BROWSER_ICON_NAME_VERSION_RENDERER=function(v,meta,record){return"<img style='height : 20px;'' src='"+ImageUtil.getBrowserIcon(v)+"'/><span style='padding-left: 5px;'>"+EUMCommonGridRenderers.SNAPSHOT_BROWSER_AND_VERSION_RENDERER(v,meta,record)+"</span>"},EUMCommonGridRenderers.WEB_PAGE_LOAD_TYPE_RENDERER=function(val,meta,record){var page=record.raw,hasSynthetic=page.syntheticTotalNumberOfEndUserRequests>0,hasRUM=page.totalNumberOfEndUserRequests>0,tooltip="";return tooltip=hasSynthetic&&hasRUM?"Real User and Synthetic Traffic":hasSynthetic?"Synthetic Traffic":hasRUM?"Real User Traffic":"No Traffic",meta&&(meta.tdAttr="data-qtip='"+tooltip+"'"),(hasRUM?"<img class='ads-svg-icon-medium' src='"+ImageUtil.iconRumRealUserSnapshot+"'/>":"")+(hasSynthetic?"<img class='ads-svg-icon-medium' src='"+ImageUtil.iconRumSyntheticSnapshot+"'/>":"")},EUMCommonGridRenderers.WEB_REQUEST_TYPE_NAME_RENDERER=function(val){var type=val;return type===ApplicationDiagnosticDataType.BASE_PAGE?resourceManager.getString("ui","ms_applicationDiagnosticType_BASE_PAGE"):type===ApplicationDiagnosticDataType.AJAX_REQUEST?resourceManager.getString("ui","ms_applicationDiagnosticType_AJAX_REQUEST"):type===ApplicationDiagnosticDataType.IFRAME?resourceManager.getString("ui","ms_applicationDiagnosticType_IFRAME"):type===ApplicationDiagnosticDataType.VIRTUAL_PAGE?resourceManager.getString("ui","ms_applicationDiagnosticType_VIRTUAL_PAGE"):""},EUMCommonGridRenderers.SEVERITY_AS_ICON_RENDERER=function(val){var iconUrl;return iconUrl=val==Severity.CRITICAL?"images/PI_CRITICAL_small.png":val==Severity.WARNING?"images/PI_WARNING_small.png":"images/PI_INFO_small.png","<img src='"+iconUrl+"'/>"},EUMCommonGridRenderers.BYTE_RENDERER=function(val,meta){if(StringUtils.isNumber(val)){if(isNaN(val)||0>val)return"-";var tooltip=String(val),byteSize="",remainingBytes="",len=tooltip.length;len>6?(byteSize=" MB",remainingBytes=tooltip.substring(0,len-6)):len>3?(byteSize=" KB",remainingBytes=tooltip.substring(0,len-3)):(byteSize=" B",remainingBytes=tooltip),meta&&(meta.tdAttr="data-qtip='"+tooltip+"'");var formattedVal=EUMCommonGridRenderers.GRID_LARGE_NUMBER_RENDERER(remainingBytes);return formattedVal+byteSize}return"-"},EUMCommonGridRenderers.GET_RENDERED_JOB_AVAILABILITY_FROM_PERCENTAGE_VALUE=function(availabilityPercentage,decimals){if(availabilityPercentage>-1){var decimalsDisplayed=Math.min(decimals,EUMCommonGridRenderers.MAX_JOB_AVAILABILITY_DECIMALS),availabilityString=ViewUtil.formatNumber(availabilityPercentage,decimalsDisplayed,-1,!0);return availabilityString!==MetricUtil.NO_DATA_DISPLAY_STRING&&(availabilityString+="%"),availabilityString}return MetricUtil.NO_DATA_DISPLAY_STRING},EUMCommonGridRenderers.PLUS_SYMBOL="+",EUMCommonGridRenderers.MAX_JOB_AVAILABILITY_DECIMALS=3,EUMCommonGridRenderers.columnBarRendererTpl=_.template("<div class='ads-grid-column-bar-renderer-container'><div class='ads-grid-column-bar-renderer-element'><div class='ads-grid-column-bar-renderer-bar' style='width: <%= barPercentageWidth %>%;'></div></div><div class='ads-grid-column-bar-renderer-element-metric' style='width: <%= metricPercentageWidth %>px;'><%= value %></div></div>"),EUMCommonGridRenderers.CREATE_COLUMN_BAR_RENDERER=function(maxValuesForIndices,valueRenderer){var columnBarRenderer=function(value,meta,record,rowIdx,colIdx,store){var v=+value;if(isNaN(v)||0>v)return"";if(0==v)return 0;var maxValue;maxValue=maxValuesForIndices[meta.column.dataIndex]?maxValuesForIndices[meta.column.dataIndex]:store.max(meta.column.dataIndex);var barPercentageWidth=v/maxValue*100,metricPercentageWidth=8*maxValue.toString().length;return EUMCommonGridRenderers.columnBarRendererTpl({barPercentageWidth:barPercentageWidth,metricPercentageWidth:metricPercentageWidth,value:valueRenderer?valueRenderer(value):EUMCommonGridRenderers.GRID_LARGE_NUMBER_RENDERER(value)})};return columnBarRenderer},EUMCommonGridRenderers.GRID_PERCENTAGE_RENDERER=function(v){if(StringUtils.isNumber(v)){var vNum=+v;return 0>vNum?"-":ViewUtil.formatNumber(100*vNum,1,-1,!0)+"%"}return MetricUtil.NO_DATA_DISPLAY_STRING},EUMCommonGridRenderers.RATE_RENDERER=function(maxValuesForIndices,warning){var columnBarRenderer=function(value,meta,record,rowIdx,colIdx,store){var v=+value;if(isNaN(v)||0>v)return"<div><img class='ads-svg-icon-medium' style='margin: -4px; padding-right: 8px;' src='"+ImageUtil.getSvgHealthIcon(PerformanceState.WARNING)+"'/>"+warning+"</div>";if(0==v)return 0;var maxValue;maxValue=maxValuesForIndices[meta.column.dataIndex]?maxValuesForIndices[meta.column.dataIndex]:store.max(meta.column.dataIndex);var barPercentageWidth=v/maxValue*100,metricPercentageWidth=8*maxValue.toString().length;return EUMCommonGridRenderers.columnBarRendererTpl({barPercentageWidth:barPercentageWidth,metricPercentageWidth:metricPercentageWidth,value:EUMCommonGridRenderers.GRID_PERCENTAGE_RENDERER(value)})};return columnBarRenderer},EUMCommonGridRenderers.DATE_RENDERER=function(v){var dateAsNumber=v;return dateAsNumber?DateTimeUtil.getDateTimeString(dateAsNumber):""},EUMCommonGridRenderers.CRASH_SNAPSHOT_DATE_TOOLTIP_RENDERER=function(val,meta){var dateAsString=EUMCommonGridRenderers.DATE_RENDERER(val);return dateAsString&&dateAsString.length>0&&(meta.tdAttr="data-qtip='"+dateAsString+"'"),dateAsString},EUMCommonGridRenderers.MOBILE_RELATED_RSD_EXPERIENCE_RENDERER=function(v,meta,record){var rowData=record.raw;return EUMCommonGridRenderers.EXPERIENCE_RENDERER(rowData.userExperience,meta)},EUMCommonGridRenderers.BROWSER_SNAPSHOT_EXPERIENCE_RENDERER=function(v,meta,record){var rowData=record.raw;return EUMCommonGridRenderers.EXPERIENCE_RENDERER(rowData.userExperience,meta)},EUMCommonGridRenderers.SYNTHETIC_PAGE_ERROR_RENDERER=function(v,meta,record){return record&&record.raw?(""===record.raw.pageError&&(record.raw.pageError="OK"),meta.tdAttr="data-qtip='"+record.raw.pageError+"'","NO_FAILURE"!==record.raw.pageErrorCode?"<img src='"+ImageUtil.iconNavErrors+"'/>":"<img src='"+ImageUtil.request_normal+"'/>"):""},EUMCommonGridRenderers.PENDING_SYNTHETIC_STATUS_RENDERER=function(v,meta,record){var html,colText,rowData=record.raw;return null!=rowData.synthMeasurementId&&null!=rowData.syntheticEventStatus?(meta&&(meta.tdAttr="data-qtip='"+rowData.syntheticEventStatus.statusMessage+"'"),rowData.syntheticEventStatus.hasFailed?(colText=rowData.syntheticEventStatus.statusMessage,html="<img src='"+ImageUtil.request_error+"'/> "+rowData.syntheticEventStatus.statusMessage):rowData.syntheticEventStatus.isStillWaiting?(colText=rowData.syntheticEventStatus.statusMessage,html="<i class='fa fa-2x fa-spinner fa-spin' style='font-size: 16px; margin-right: 6px'></i>"+rowData.syntheticEventStatus.statusMessage):(colText="Done",html="Done")):(colText="",html=""),rowData.userExperience=colText,html},EUMCommonGridRenderers.EXPERIENCE_RENDERER=function(userExperience,meta){return meta&&(meta.tdAttr="data-qtip='"+userExperience+"'"),"<img src='"+ImageUtil.getRequestExperienceIconURL(userExperience)+"'/>"},EUMCommonGridRenderers.RESOURCE_TIMING_RENDERER=function(snapshotDescriptor,meta){return null!=snapshotDescriptor?(meta&&(meta.tdAttr="data-qtip='Snapshot Has Resource Timing'"),"<img src='"+ImageUtil.iconResouceTimingInfo+"'/>"):""},EUMCommonGridRenderers.SNAPSHOT_SOURCE_RENDERER=function(synthMeasurementId,meta){return null!=synthMeasurementId?(meta&&(meta.tdAttr="data-qtip='Synthetic Snapshot'"),"<img class='ads-svg-icon-medium' src='"+ImageUtil.iconRumSyntheticSnapshot+"'/>"):(meta&&(meta.tdAttr="data-qtip='Real User Snaphot'"),"<img class='ads-svg-icon-medium' src='"+ImageUtil.iconRumRealUserSnapshot+"'/>")},EUMCommonGridRenderers.BROWSER_SNAPSHOT_SERVER_ERROR_RENDERER=function(v,meta,record){var rowData=record.raw;return EUMCommonGridRenderers.ERROR_RENDERER(null!=rowData.serverSnapshotError,meta,"Server Error Occurred")},EUMCommonGridRenderers.PAGE_VIEWS_ERROR_HANDLER=function(v,meta){return v?"script"===v?(meta.tdAttr="data-qtip='"+resourceManager.getString("ui","ms_scriptError")+"'","<img src='"+ImageUtil.iconNavErrors+"'/>"):"ajax"===v?(meta.tdAttr="data-qtip='"+resourceManager.getString("ui","ms_ajaxError")+"'","<img src='"+ImageUtil.iconNavErrors+"'/>"):void 0:void 0},EUMCommonGridRenderers.BROWSER_SNAPSHOT_DATA_ERROR_RENDERER=function(v,meta,record){var rowData=record.raw,tooltipText="";if(rowData.ajaxError&&(tooltipText+=resourceManager.getString("ui","ms_ajaxErrorString",[rowData.ajaxError.status,rowData.ajaxError.message])),rowData.errorEventData&&rowData.errorEventData.length>0){tooltipText&&(tooltipText+="\n\n"),tooltipText+=resourceManager.getString("ui","ms_javaScriptErrors")+":\n";for(var i=0;i<rowData.errorEventData.length;i++){var errorData=rowData.errorEventData[i];tooltipText+=resourceManager.getString("ui","ms_javaScriptErrorString",[errorData.scriptOrigin,errorData.lineNumber,errorData.message])+"\n"}tooltipText=tooltipText.substring(0,tooltipText.length-1)}return tooltipText=Ext.util.Format.htmlEncode(tooltipText),EUMCommonGridRenderers.ERROR_RENDERER(1==rowData.errorOccurred,meta,tooltipText)},EUMCommonGridRenderers.MOBILE_SNAPSHOT_ERROR_RENDERER=function(v,meta,record){var rowData=record.raw;return rowData?EUMCommonGridRenderers.ERROR_RENDERER(rowData.hasError,meta):EUMCommonGridRenderers.ERROR_RENDERER(!1,meta)},EUMCommonGridRenderers.ERROR_RENDERER=function(hasError,meta,tooltip){return hasError?(meta&&(tooltip||(tooltip="An Error Occurred"),meta.tdAttr="data-qtip='"+tooltip+"'"),"<img src='"+ImageUtil.iconNavErrors+"'/>"):""},EUMCommonGridRenderers.MOBILE_RSD_CALL_GRAPH_RENDERER=function(val,meta,record){var rowData=record.raw;return EUMCommonGridRenderers.CALL_GRAPH_RENDERER(rowData.fullCallGraph,!1,rowData.delayedCallGraph)},EUMCommonGridRenderers.BROWSER_SNAPSHOT_CALL_GRAPH_RENDERER=function(serverSnapshotCg){return EUMCommonGridRenderers.CALL_GRAPH_RENDERER("full"==serverSnapshotCg,!1,"partial"==serverSnapshotCg)},EUMCommonGridRenderers.RSD_LIST_ITEM_CALL_GRAPH_RENDERER=function(val,meta,record){var rsdListItem=record.raw;return EUMCommonGridRenderers.CALL_GRAPH_RENDERER(rsdListItem.fullCallgraph,rsdListItem.hotSpotCallGraph,rsdListItem.delayedCallGraph)},EUMCommonGridRenderers.CALL_GRAPH_RENDERER=function(isFullCallGraph,isHotSpotCallGraph,isPartialCallGraph){var imageAndTip=ImageUtil.getCallGraphIconURLAndTooltip(isFullCallGraph,isHotSpotCallGraph,isPartialCallGraph);return""===imageAndTip[0]?"":"<img src='"+imageAndTip[0]+"'/>"},EUMCommonGridRenderers.ARCHIVED_RENDERER=function(isArchived,meta){return isArchived?(meta&&(meta.tdAttr='data-qtip="'+ResourceManager.instance().getString("ui","ms_snapshotArchivedToolTip")+'"'),'<img style="width:16px;" src="'+ImageUtil.snapshotArchived+'"/>'):void 0},EUMCommonGridRenderers.BT_ICON_RENDERER=function(entryPointType){return"<img src='"+ImageUtil.getBTEntryPointOrCallElementIconClassByType(entryPointType)+"'/>"},EUMCommonGridRenderers.HTTP_STATUS_RENDERER=function(v){var statusAsNumber=v;return!statusAsNumber||100>statusAsNumber||statusAsNumber>599?"-":statusAsNumber>=400&&599>=statusAsNumber?"<span class='redText'>"+statusAsNumber.toString()+"</span>":statusAsNumber.toString()},EUMCommonGridRenderers.NETWORK_ERROR_RENDERER=function(v){var networkError=v;return networkError&&networkError.length>0?"<span class='redText'>"+networkError+"</span>":""},EUMCommonGridRenderers.LINK_RENDERER=function(val){var cssClass="blueText adsUnderlineTextOnHover";return"<span style='cursor: pointer;' class='"+cssClass+"'>"+val.toString()+"</span>"},EUMCommonGridRenderers.BROWSER_SNAPSHOT_RESPONSE_TIME_RENDERER=function(v,meta,record,rowIdx,colIdx,store,view){var snapshotData=record.raw,displayValue=EUMCommonGridRenderers.METRIC_TIME_RENDERER(v,meta,record,rowIdx,colIdx,store,view);if(v!=snapshotData.endUserTime){if(meta){var tooltipText=resourceManager.getString("ui","ms_snapshotResponseTimeDescription");meta.tdAttr="data-qtip='"+tooltipText+"'"}displayValue+="*"}return displayValue},EUMCommonGridRenderers.METRIC_TIME_RENDERER=function(v,meta,record,rowIdx,colIdx,store,view){return"-1"==v?"":EUMCommonGridRenderers.GRID_LARGE_NUMBER_RENDERER(v,meta,record,rowIdx,colIdx,store,view)},EUMCommonGridRenderers.METRIC_LARGE_NUMBER_RENDERER=function(v,meta,record,rowIdx,colIdx,store,view){return StringUtils.isNumber(v)&&"-1"==v?"-":EUMCommonGridRenderers.GRID_LARGE_NUMBER_RENDERER(v,meta,record,rowIdx,colIdx,store,view)},EUMCommonGridRenderers.SERVER_SNAPSSHOT_CG_RENDERER=function(v,meta,record){var rowData=record.raw,partialCallGraphLocation="images/objects/callGraph_partial_16.png",fullCallGraphLocation="images/objects/callGraph_16.png";return rowData.serverSnapshotCallGraph?"full"===rowData.serverSnapshotCallGraph?"<img src='"+fullCallGraphLocation+"'/>":"partial"===rowData.serverSnapshotCallGraph?"<img src='"+partialCallGraphLocation+"'/>":"":""},EUMCommonGridRenderers.LINKED_ITEM_RENDERER=function(val){var cssClass="blueText adsUnderlineTextOnHover";return"<span style='cursor: pointer;' class='"+cssClass+"'>"+val.toString()+"</span>"},EUMCommonGridRenderers.PERFORMANCE_VALUE_RENDERER=function(v){var valueAsNumber=v;if(isNaN(valueAsNumber))return"";if(-1==valueAsNumber)return"";var val=ViewUtil.formatNumber(valueAsNumber),cssClass="blueText adsUnderlineTextOnHover";return"<span style='cursor: pointer;' class='"+cssClass+"'>"+val+"</span>"},EUMCommonGridRenderers.MOBILE_TIMER_AND_METRIC_AVG_RENDERER=function(v,meta,record,rowIdx,colIdx,store,view){if(record&&record.raw){var rowData=record.raw;rowData.rowType===MobileCustomDataType.CUSTOM_METRIC&&(v=rowData.average)}return EUMCommonGridRenderers.PERFORMANCE_VALUE_RENDERER(v,meta,record,rowIdx,colIdx,store,view)},EUMCommonGridRenderers.TOTAL_REQS_VALUE_RENDERER=function(v){var valueAsNumber=v;(isNaN(valueAsNumber)||0>=valueAsNumber)&&(valueAsNumber=0);var val=ViewUtil.formatNumber(valueAsNumber);return val+" reqs"},EUMCommonGridRenderers.MOBILE_CUSTOM_METRIC_TYPE_RENDERER=function(customDataType){return"<img class='adsSvgIconSmall' src='"+ImageUtil.getMobileCustomDataType(customDataType)+"'/>"},EUMCommonGridRenderers.MOBILE_INFO_POINT_RENDERER=function(dynamic){return dynamic?"<img class='adsSvgIconSmall' src='"+ImageUtil.iconMobileInfoPointDynamic+"'/>":"<img class='adsSvgIconSmall' src='"+ImageUtil.iconMobileInfoPointStatic+"'/>"},EUMCommonGridRenderers.GRID_LARGE_NUMBER_RENDERER=function(v){if(StringUtils.isNumber(v)){var vNum=+v;return-1==vNum?"":ViewUtil.formatNumber(vNum,0,-1)}return""},EUMCommonGridRenderers.MOBILE_REQUEST_TYPE_RENDERER=function(v){var valueAsString=v;return"MOBILE_REQUEST"===valueAsString?"<img src='images/icon_eum_mobile_18x18.png'/>":""},EUMCommonGridRenderers.MOBILE_PLATFORM_ICON_RENDERER=function(val,meta){var tooltipText,mobilePlatform=val;return tooltipText=mobilePlatform===MobilePlatform.ANDROID?ResourceManager.instance().getString("ui","ms_android"):mobilePlatform===MobilePlatform.IOS?ResourceManager.instance().getString("ui","ms_ios"):ResourceManager.instance().getString("ui","ms_unknown"),meta.tdAttr="data-qtip='"+tooltipText+"'","<img src='"+ImageUtil.getMobilePlatformIcon(mobilePlatform)+"'/>"},EUMCommonGridRenderers.EUM_MONITORING_ENABLED_RENDERER=function(val){var isEnabled=val;return isEnabled===!0?ResourceManager.instance().getString("ui","ms_enabled"):isEnabled===!1?ResourceManager.instance().getString("ui","ms_disabled"):ResourceManager.instance().getString("ui","ms_unknown")},EUMCommonGridRenderers.SNAPSHOT_BROWSER_AND_VERSION_RENDERER=function(val,meta,record){var rowData=record.raw,displayString=rowData.browser+(rowData.browserVersion?" "+rowData.browserVersion:"");return meta&&(meta.tdAttr="data-qtip='"+displayString+"'"),displayString},EUMCommonGridRenderers.CELL_TOOLTIP_RENDERER=function(val,meta){return meta&&"string"==typeof val&&(meta.tdAttr="data-qtip='"+val+"'"),val},EUMCommonGridRenderers.CREATE_SESSION_RELATIVE_START_TIME_RENDERER=function(sessionDetailsData){return function(val,meta){if(sessionDetailsData.sessionStartTime==val)return"Start";if(val){var formattedValue=ViewUtil.convertDurationToHms(val-sessionDetailsData.sessionStartTime);return meta&&(meta.tdAttr="data-qtip='"+formattedValue+"("+DateTimeUtil.getDateTimeString(val)+")'"),EUMCommonGridRenderers.PLUS_SYMBOL+formattedValue}}},EUMCommonGridRenderers.CREATE_METRIC_VALUE_RENDERER=function(metricName){return function(val,meta,record){if(Util.isUndefOrNull(record.raw.metrics))return"";var metric=Util.get(record.raw,["metrics",metricName,"value"]);return EUMCommonGridRenderers.METRIC_LARGE_NUMBER_RENDERER(metric,meta,record)}},EUMCommonGridRenderers.CREATE_METRIC_SUM_RENDERER=function(metricName){return function(val,meta,record){if(Util.isUndefOrNull(record.raw.metrics))return"";var metric=Util.get(record.raw,["metrics",metricName,"sum"]);return EUMCommonGridRenderers.METRIC_LARGE_NUMBER_RENDERER(metric,meta,record)}},EUMCommonGridRenderers.CREATE_METRIC_VALUE_PERCENTAGE_RENDERER=function(metricName){return function(val,meta,record){if(Util.isUndefOrNull(record.raw.metrics))return"";var metric=Util.get(record.raw,["metrics",metricName,"value"]);return EUMCommonGridRenderers.GRID_PERCENTAGE_RENDERER(metric,meta,record)}},EUMCommonGridRenderers.CREATE_METRIC_JOB_AVAILABILITY_RENDERER=function(metricName,decimalsToDisplay){return function(val,meta,record){if(Util.isUndefOrNull(record.raw.metrics))return"";var availabilityPPM=Util.get(record.raw,["metrics",metricName,"value"]),availabilityPercentage=Util.convertPPMtoPercentage(availabilityPPM);return EUMCommonGridRenderers.GET_RENDERED_JOB_AVAILABILITY_FROM_PERCENTAGE_VALUE(availabilityPercentage,decimalsToDisplay.decimals)}},EUMCommonGridRenderers.CREATE_JOB_AVAILABILITY_RENDERER_FROM_PERCENTAGE=function(decimalsToDisplay){return function(val){var decimals=Math.min(decimalsToDisplay.decimals,EUMCommonGridRenderers.MAX_JOB_AVAILABILITY_DECIMALS);return EUMCommonGridRenderers.GET_RENDERED_JOB_AVAILABILITY_FROM_PERCENTAGE_VALUE(val,decimals)}},EUMCommonGridRenderers.CREATE_JOB_AVAILABILITY_RENDERER_FROM_PPM=function(decimalsToDisplay){return function(val){var availabilityPPM=val,availabilityPercentage=Util.convertPPMtoPercentage(availabilityPPM);return EUMCommonGridRenderers.GET_RENDERED_JOB_AVAILABILITY_FROM_PERCENTAGE_VALUE(availabilityPercentage,decimalsToDisplay.decimals)}},EUMCommonGridRenderers}();define("app/view/eum/common/EUMCommonGridRenderers",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},CrashDashboardController=function(_super){function CrashDashboardController($scope,$rootScope,$location,$q,$timeout,timeRangeService,resourceManager,notificationService,injectorService,crashDashboardUiService,applicationViewService,eumViewService){function initLocationBar(){var locationEntries=[{label:$scope.viewData.application.name,clickFn:$scope.navigateTo,fnArg:NavigationDataConstants.APP_DASHBOARD},{label:$scope.getString("ms_eumNavItemAndScreenTitle"),clickFn:$scope.navigateTo,fnArg:NavigationDataConstants.EUM_GEO_MASTER},{label:$scope.viewData.platform,clickFn:$scope.navigateTo,fnArg:NavigationDataConstants.EUM_PLATFORM}];$scope.isMobileAppMode&&locationEntries.push({label:$scope.viewData.mobileApp.name,clickFn:$scope.navigateTo,fnArg:NavigationDataConstants.EUM_MOBILE_APPLICATION}),$scope.newEumNavMode||locationEntries.push({label:$scope.getString("ms_crashes"),clickFn:null,fnArg:null}),$scope.locationEntries=locationEntries}function setScope(crashServerData){if(crashServerData){var chartData=transform(crashServerData);chartData.total.crashes>0?($scope.scatterChartConfig=constructScatterChart(chartData),$scope.totalChartConfig=constructTotalChart(chartData),$scope.crashTypes=chartData.types,$scope.noCrashes=!1):$scope.noCrashes=!0,$scope.noRequests=0==chartData.total.requests}else $scope.noCrashes=!0,$scope.noRequests=!0;$scope.loading=!1}function transform(crashServerData){var chartData=constructChartDataObject(crashServerData),typesOfData=consolidateTypes(crashServerData);for(var key in typesOfData){var data={},value=typesOfData[key],combinedSeries=consolidateSeries(value);data.title=value.title,data.time={},data.time.start=chartData.time.start,data.time.interval=chartData.time.interval,data.series=[],angular.forEach(combinedSeries,function(series){data.series.push(series)}),chartData.types.push(data)}return chartData}function constructChartDataObject(crashServerData){var chartData={};return chartData.total=calculateTotals(crashServerData),chartData.time=calculateTimeInfo(crashServerData),chartData.axisBounds=calculateAxisBounds(crashServerData),chartData.types=[],chartData}function calculateTotals(crashServerData){var requests=0,crashes=0,data=[];for(var key in titleMap){var pointsName="pointsBy"+key,trendsName="trendsBy"+key;if(angular.forEach(crashServerData[pointsName],function(point){requests+=point.totalRequests,crashes+=point.totalCrashes}),angular.forEach(crashServerData[trendsName],function(trend){if(trend&&trend.graphData&&trend.graphData.data)for(var dataArray=trend.graphData.data,i=0,end=dataArray.length;end>i;i++)data.length<end?data.push(dataArray[i]):data[i]=data[i]+dataArray[i]}),crashes>0)break}return{requests:requests,crashes:crashes,data:data}}function calculateTimeInfo(crashServerData){var startTime=null,timeInterval=null;for(var key in titleMap){var trendsName="trendsBy"+key;if(crashServerData[trendsName]&&crashServerData[trendsName][0]&&crashServerData[trendsName][0].graphData){var graphData=crashServerData[trendsName][0].graphData;startTime=graphData.startTime,timeInterval=graphData.interval*ChartUtil.MILLISECONDS_PER_MINUTE}if(startTime&&timeInterval)break}return{start:startTime,interval:timeInterval}}function calculateAxisBounds(crashServerData){var maxX=0,minX=1/0,adjustment=10;for(var key in titleMap){var pointsName="pointsBy"+key;angular.forEach(crashServerData[pointsName],function(point){point.totalRequests>maxX&&(maxX=point.totalRequests),point.totalRequests<minX&&(minX=point.totalRequests)})}return maxX=Math.ceil(maxX+maxX*(adjustment/100)),minX=Math.floor(minX-minX*(adjustment/100)),{maxX:maxX,minX:minX}}function consolidateTypes(crashServerData){var typeOfData={};for(var key in crashServerData){var type=key.split("By")[1];crashServerData[key]&&(-1!=key.indexOf("pointsBy")||-1!=key.indexOf("pointBy")?(typeOfData[type]||(typeOfData[type]={},typeOfData[type].title=titleMap[type]),typeOfData[type].pointsData=crashServerData[key]):-1!=key.indexOf("trendsBy")&&(typeOfData[type]||(typeOfData[type]={},typeOfData[type].title=titleMap[type]),typeOfData[type].trendData=crashServerData[key]))}return typeOfData}function consolidateSeries(dataType){var combinedSeries={},totalCrashes=0;return angular.forEach(dataType.pointsData,function(point){var key=point.identifier;combinedSeries[key]={},combinedSeries[key].title=key,combinedSeries[key].crashes=point.totalCrashes,combinedSeries[key].requests=point.totalRequests,totalCrashes+=point.totalCrashes}),angular.forEach(dataType.trendData,function(trend){if(trend){var key=trend.name;combinedSeries[key]&&trend.graphData&&(combinedSeries[key].data=trend.graphData.data,combinedSeries[key].percent=combinedSeries[key].crashes/totalCrashes||0)}}),combinedSeries}function constructScatterChart(crashData){return{credits:{enabled:!1},chart:{spacingRight:80,height:320,events:{load:function(){positionLegendElements()}}},legend:{align:"right",borderWidth:0,layout:"vertical",itemMarginTop:8,itemMarginBottom:8,itemStyle:{fontSize:"1.2em"},margin:100,verticalAlign:"middle"},xAxis:{title:{text:"Requests"}},yAxis:{min:0,title:{text:"Crashes"}},title:{text:"Crashes vs. Requests",align:"left",margin:40},plotOptions:{scatter:{dataLabels:{enabled:!0,formatter:function(){return this.point.name},y:-3},tooltip:{headerFormat:"<b>{series.name}</b>: {point.key}<br>",pointFormat:"{point.x} crashes"}},series:{showCheckbox:!0,events:{checkboxClick:function(event){return event.checked?this.show():this.hide(),!0},legendItemClick:function(event){return this.checkbox.checked=event.currentTarget.visible?!1:!0,!0}},selected:!0}},series:constructScatterSeries(crashData)}}function constructScatterSeries(crashData){var scaledYMax=crashData.axisBounds.maxX*crashData.total.crashes/crashData.total.requests,scaledYMin=crashData.axisBounds.minX*crashData.total.crashes/crashData.total.requests,index=1,series=[],lineData={type:"line",name:"Average",data:[[crashData.axisBounds.minX,scaledYMin],[crashData.axisBounds.maxX,scaledYMax]],marker:{enabled:!1},states:{hover:{lineWidth:0}},enableMouseTracking:!1};return angular.forEach(crashData.types,function(type){var seriesData={type:"scatter",name:type.title,data:constructScatterData(type),marker:{radius:4},index:index};series.push(seriesData),index+=1}),lineData.index=index,series.push(lineData),series}function constructScatterData(crashType){var data=[];return angular.forEach(crashType.series,function(s){data.push({name:s.title,x:s.requests,y:s.crashes})}),data}function positionLegendElements(){$timeout(function(){for(var legendEl=$(".adsScatterChart .highcharts-legend"),symbolEls=$(".highcharts-legend-item path",legendEl),itemEls=$(".highcharts-legend-item",legendEl),checkboxEls=$('.highcharts-container input[type="checkbox"]'),transform=legendEl.attr("transform"),translateRegex=/translate\(\s*([^\s,)]+)[ ,]([^\s,)]+)/,parts=translateRegex.exec(transform)||[],leftBase=parseInt(parts[1]),topBase=parseInt(parts[2]),transformMap={},i=0,size=itemEls.length;size>i;i++){var transform=$(itemEls[i]).attr("transform"),parts=translateRegex.exec(transform)||[],top=parseInt(parts[2]),mapItem={top:top};transformMap[i]=mapItem}symbolEls.attr("transform","translate(0,-3)"),checkboxEls.css("top",function(index){return topBase+transformMap[index].top+1}),checkboxEls.css("left",function(){return leftBase-10})},1)}function constructTotalChart(crashData){return{credits:{enabled:!1},chart:{height:200,marginLeft:150,marginRight:400},legend:{enabled:!1},xAxis:{startOnTick:!1,endOnTick:!1,type:"datetime"},yAxis:{min:0,title:{text:""}},title:{text:"Total Crashes",align:"left",margin:40},series:[{type:"line",name:"Total Crashes",data:crashData.total.data,pointStart:crashData.time.start,pointInterval:crashData.time.interval,marker:{enabled:!1},states:{hover:{lineWidth:0}},enableMouseTracking:!1}]}}_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.$q=$q,this.$timeout=$timeout,this.timeRangeService=timeRangeService,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.crashDashboardUiService=crashDashboardUiService,this.applicationViewService=applicationViewService,this.eumViewService=eumViewService,$scope.helpLink=ExternalUrls.HELP_URL_EUM_CRASH_DASHBOARD,$scope.newEumNavMode=!0;var watchDestructors=[],titleMap={Carrier:"Carrier",ConnectionType:"Connection Type",DeviceName:"Device Name",MobileApp:"Mobile App",MobileAppVersion:"Mobile App Version",OsVersion:"OS Version"};$scope.scatterChartConfig=null,$scope.totalChartConfig=null,$scope.crashTypes=null,$scope.initialize=function(stringForParams){var urlParams=new URLParams(stringForParams);if($scope.platform=urlParams.platform(),$scope.mobileAppId=parseInt(urlParams.mobileApp()),$scope.applicationId=parseInt(urlParams.application()),"Android"===$scope.platform&&(titleMap.DeviceName="Manufacturer"),$scope.mobileAppId){$scope.isMobileAppMode=!0;var resultHandler=function(response){var crashDashboardViewData=crashDashboardUiService.getMobileApplicationViewData_response(response);$scope.viewData=crashDashboardViewData,$scope.loadData()};crashDashboardUiService.getMobileApplicationViewData($scope.applicationId.toString(),$scope.mobileAppId.toString()).then(resultHandler)}else{$scope.isMobileAppMode=!1;var resultHandler=function(response){var crashDashboardViewData=crashDashboardUiService.getMobileApplicationViewData_response(response);$scope.viewData=crashDashboardViewData,$scope.loadData()};crashDashboardUiService.getPlatformViewData($scope.applicationId.toString(),$scope.platform).then(resultHandler)}},$scope.$on(TimeRangeService.UEV_TIME_RANGE_CHANGE_TR_SERVICE,function(){$scope.loadData()}),$scope.$on(TimeRangeService.TIMERANGE_AUTOREFRESH_EVENT,function(){ADLoggerService.info("CrashDashboardController got the event; fetching data"),$scope.loadData()}),$scope.loadData=function(){if($scope.loading=!0,initLocationBar(),$scope.isMobileAppMode){var queryForMobileApp={applicationId:$scope.applicationId,platform:$scope.platform,mobileAppId:$scope.mobileAppId,timeRangeString:timeRangeService.getCurrentTimeRangeString()};crashDashboardUiService.getMobileApplicationCrashData(queryForMobileApp).then(function(eumCrashDashboardData){ADLoggerService.info("Fetched Mobile App Crash Data"),setScope(eumCrashDashboardData)})}else{var queryForPlatform={applicationId:$scope.applicationId,platform:$scope.platform,mobileAppId:null,timeRangeString:timeRangeService.getCurrentTimeRangeString()};crashDashboardUiService.getPlatformCrashData(queryForPlatform).then(function(eumCrashDashboardData){ADLoggerService.info("Fetched Mobile Platform Crash Data"),setScope(eumCrashDashboardData)})}},$scope.navigateTo=function(location){switch(location){case NavigationDataConstants.APP_DASHBOARD:applicationViewService.viewApplicationDashboard($scope.applicationId);break;case NavigationDataConstants.EUM_GEO_MASTER:eumViewService.viewEumGeoMaster($scope.applicationId);
break;case NavigationDataConstants.EUM_PLATFORM:eumViewService.viewPlatformGeo($scope.applicationId,$scope.platform);break;case NavigationDataConstants.EUM_MOBILE_APPLICATION:eumViewService.viewMobileAppGeo($scope.applicationId,$scope.platform,$scope.mobileAppId)}},$scope.onViewCrashList=function(){$scope.isMobileAppMode?eumViewService.viewCrashListForMobileApp($scope.applicationId,$scope.platform,$scope.viewData.mobileApp.id):eumViewService.viewCrashListForPlatform($scope.applicationId,$scope.platform)},$scope.onViewOverallCrashes=function(){$scope.isMobileAppMode?eumViewService.viewAnalyticsCrashDashboardForMobileApp($scope.applicationId,$scope.platform,$scope.viewData.mobileApp.id):eumViewService.viewAnalyticsCrashDashboardForPlatform($scope.applicationId,$scope.platform)},$scope.onViewMobileGeoDashboard=function(){eumViewService.viewMobileAppGeo($scope.applicationId,$scope.platform,$scope.mobileAppId)},$scope.onViewMobileNetworkRequestList=function(){eumViewService.viewMobileNetworkRequestList($scope.applicationId,$scope.platform,$scope.mobileAppId)},$scope.onViewMobileNetworkRequestSnapshotList=function(){eumViewService.viewMobileSnapshotList($scope.applicationId,$scope.platform,$scope.mobileAppId)},$scope.onViewMobileCrashes=function(){eumViewService.viewMobileCrashes($scope.applicationId,$scope.platform,$scope.mobileAppId)},$scope.onViewMobileInfoPointList=function(){eumViewService.viewMobileInfoPoints($scope.applicationId,$scope.platform,$scope.mobileAppId)},$scope.onViewMobileEndUserStats=function(){eumViewService.viewMobileEndUserStats($scope.applicationId,$scope.platform,$scope.mobileAppId)},$scope.navigationTabs=[{name:$scope.getString("ms_geoDashboardTabLabel"),clickFn:$scope.onViewMobileGeoDashboard},{name:$scope.getString("ms_requestsAndEpisodes"),clickFn:$scope.onViewMobileNetworkRequestList},{name:$scope.getString("ms_networkRequestSnapshots"),clickFn:$scope.onViewMobileNetworkRequestSnapshotList},{name:$scope.getString("ms_crashes"),clickFn:$scope.onViewMobileCrashes,selected:!0},{name:$scope.getString("ms_infoPointsNavItem"),clickFn:$scope.onViewMobileInfoPointList},{name:$scope.getString("ms_endUserStats"),clickFn:$scope.onViewMobileEndUserStats}],watchDestructors.push($rootScope.$on(NavigationService.UEV_NAVIGATE_TO_FRAGMENT,function(event,fragment){var urlParams=new URLParams(fragment);urlParams.location()==NavigationDataConstants.EUM_CRASH_DASHBOARD&&$scope.initialize(fragment)})),$scope.$on("$destroy",function(){for(var i in watchDestructors)"function"==typeof watchDestructors[i]&&watchDestructors[i]()}),ViewUtil.setContentAreaHeight($scope,$timeout,!1),$scope.initialize($location.path()),$scope.locationEntries=null}return __extends(CrashDashboardController,_super),CrashDashboardController.$inject=["$scope","$rootScope","$location","$q","$timeout","timeRangeService","resourceManager","notificationService","injectorService","crashDashboardUiService","applicationViewService","eumViewService"],CrashDashboardController}(ControllerBase);appdynamicsModule.controller("CrashDashboardController",CrashDashboardController),define("app/view/eum/mobile/crashes/dashboard/CrashDashboardController",function(){});var CrashesByGraphsDirective=function(){function CrashesByGraphsDirective($timeout){return{restrict:"E",scope:{svChartData:"="},templateUrl:"app/view/eum/mobile/crashes/dashboard/crashesByGraphs/CrashesByGraphsDirective.html",link:function(scope,element){function crashesExist(chartData){var crashes=!1;return angular.forEach(chartData.series,function(s){s.percent>0&&(crashes=!0)}),crashes}function constructPieChart(chartData){return{credits:{enabled:!1},chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,height:330,spacingTop:-40},legend:{align:"right",borderWidth:0,layout:"vertical",itemMarginTop:10,itemMarginBottom:10,width:160,verticalAlign:"middle",labelFormatter:function(){return this.name.length>23?this.name.slice(0,20)+"...":this.name}},title:{text:""},tooltip:{headerFormat:"<b>{point.key}</b>:<br>",pointFormat:"{point.percentage:.1f} %"},plotOptions:{pie:{allowPointSelect:!0,center:["50%","50%"],cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",format:"{point.percentage:.1f} %",overflow:"justify"},showInLegend:!0,size:200,point:{events:{legendItemClick:function(){return!1}}}}},series:[{type:"pie",data:constructPieData(chartData)}]}}function constructPieData(chartData){var dataSeries=[];return angular.forEach(chartData.series,function(s){var percent=s.percent||0,data={name:s.title,y:percent};dataSeries.push(data)}),dataSeries}function constructLineChart(chartData){return{credits:{enabled:!1},chart:{marginLeft:25,spacingTop:60,spacingRight:10,height:240,width:fullWidthEl.width()-resizeFactor},legend:{enabled:!1},xAxis:{startOnTick:!1,endOnTick:!1,type:"datetime"},yAxis:{min:0,title:{text:""}},tooltip:{headerFormat:"<b>{series.name}</b>:<br>",pointFormat:"{point.y} crashes"},title:{text:""},series:constructLineSeries(chartData)}}function constructLineSeries(chartData){var series=[];return angular.forEach(chartData.series,function(s){var seriesData={type:"line",name:s.title,data:s.data,pointStart:chartData.time.start,pointInterval:chartData.time.interval,marker:{enabled:!1},states:{hover:{lineWidth:0}}};series.push(seriesData)}),series}var fullWidthEl=element.find(".crash-chart-width"),resizeFactor=600;scope.lineChartConfig=null,scope.pieChartConfig=null,scope.title=null,scope.type=null,scope.noCrashes=!1,scope.$watch("svChartData",function(){scope.svChartData&&"undefined"!=typeof scope.svChartData&&(scope.title="Crashes By "+scope.svChartData.title,scope.type=scope.svChartData.title,crashesExist(scope.svChartData)?(scope.lineChartConfig=constructLineChart(scope.svChartData),scope.pieChartConfig=constructPieChart(scope.svChartData)):scope.noCrashes=!0)}),scope.$on("layoutChanged",function(){scope.noCrashes||$timeout(function(){scope.lineChartConfig.chart.width=fullWidthEl.width()-resizeFactor,scope.lineChartConfig=angular.copy(scope.lineChartConfig)},1)})}}}return CrashesByGraphsDirective.$inject=["$timeout"],CrashesByGraphsDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-crashes-by-graphs"),CrashesByGraphsDirective),define("app/view/eum/mobile/crashes/dashboard/crashesByGraphs/CrashesByGraphsDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/mobile/crashes/details/cards/UserData/UserDataCardController",["require","exports"],function(require,exports){var UserDataCardController=function(_super){function UserDataCardController($scope,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.$scope.controller=this}return __extends(UserDataCardController,_super),UserDataCardController.$inject=["$scope","resourceManager","notificationService","injectorService"],UserDataCardController}(ControllerBase);exports.UserDataCardController=UserDataCardController,appdynamicsModule.controller("UserDataCardController",UserDataCardController)}),define("app/view/eum/mobile/crashes/details/cards/UserData/UserDataCardDirective",["require","exports","app/view/eum/mobile/crashes/details/cards/UserData/UserDataCardController"],function(require,exports,UserDataCardController){var UserDataCardDirective=function(){function UserDataCardDirective(){return{restrict:"E",templateUrl:"app/view/eum/mobile/crashes/details/cards/UserData/UserDataCardComponentView.html",scope:{adApplicationId:"=",adRequestSuccess:"=",adIsAndroid:"=",adUserData:"="},controller:UserDataCardController.UserDataCardController}}return UserDataCardDirective}();exports.UserDataCardDirective=UserDataCardDirective,appdynamicsModule.directive(StringUtils.toCamelCase("ad-crash-details-user-data-card"),UserDataCardDirective)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/mobile/crashes/details/CrashDetailsController",["require","exports","app/view/eum/mobile/MobileControllerBase","app/view/eum/mobile/crashes/details/cards/UserData/UserDataCardDirective","app/services/QuestStateService","app/view/home/quests/QuestConstants"],function(require,exports,MobileControllerBase,UserDataCardDirective,QuestStateService,QuestConstants){var CrashDetailsController=function(_super){function CrashDetailsController($scope,resourceManager,notificationService,injectorService,applicationViewService,eumViewService,$location,$modalInstance,crashDetailsUiService,timeRangeService,dialogData){var _this=this;_super.call(this,$scope,$modalInstance),this.$location=$location,this.$modalInstance=$modalInstance,this.crashDetailsUiService=crashDetailsUiService,this.timeRangeService=timeRangeService,this.dialogData=dialogData,$scope.controller=this,this.initModal().then(function(){_this.initialize()})}return __extends(CrashDetailsController,_super),CrashDetailsController.prototype.initializeProperties=function(){this.setCommonProperties(this.$location.path())},CrashDetailsController.prototype.initializeEventListeners=function(){_super.prototype.initializeEventListeners.call(this);var thisRef=this;this.$scope.$on(App.UEV_COPY_LINK_TO_CLIPBOARD,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];try{var trs=thisRef.timeRangeService.createTimeRangeAroundTimestamp(thisRef.crashSummary.timestamp),params=new URLParams(thisRef.$location.path()),newTimeRangeAsString=thisRef.timeRangeService.convertToPreferenceString(trs,".");params.setParam(UrlConstants.TIME_RANGE,newTimeRangeAsString);var newUrl=thisRef.$location.absUrl().replace(thisRef.$location.path(),params.toString());WebUtil.copyToClipboard(newUrl)}catch(exception){this.notificationService.displayError("Failed to copy the link to clipboard.","Error")}})},CrashDetailsController.prototype.replaceURLForModal=function(){if(this.dialogData){var params=new URLParams;return params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_CRASH_DETAILS),params.setNumberParam(UrlConstants.APPLICATION_ID,this.dialogData.applicationId),params.setParam(UrlConstants.EUM_PLATFORM,this.dialogData.platform),params.setParam(UrlConstants.EUM_MOBILE_CRASH,this.dialogData.crashId),this.dialogData.mobileAppId&&params.setNumberParam(UrlConstants.EUM_MOBILE_APP,this.dialogData.mobileAppId),QuestStateService.instance().completeQuest(QuestConstants.EUM_MOBILE.CRASH_SNAPSHOT),this.setUrlLocation(params)}return this.dialogData={applicationId:URLParams.getCurrentUrlParams().getNumberParam(UrlConstants.APPLICATION_ID),platform:URLParams.getCurrentUrlParams().getParam(UrlConstants.EUM_PLATFORM),mobileAppId:URLParams.getCurrentUrlParams().getNumberParam(UrlConstants.EUM_MOBILE_APP),crashId:URLParams.getCurrentUrlParams().getParam(UrlConstants.EUM_MOBILE_CRASH),openedFromSessionDetails:!1},InjectorService.instance().$q().when()},CrashDetailsController.prototype.deepLinkedModalClosedHandler=function(){EumViewService.instance().viewCrashListForMobileApp(this.applicationId,this.platform,this.mobileAppId)},CrashDetailsController.prototype.buildLocationName=function(){if(!this.crashSummary)return this.crashId;var str="",file=this.crashSummary.crashedFile;str+=file?file:"Unknown File",str+=" in line ";var line=this.crashSummary.crashedFileLineNumber;str+=line?line:"Unknown Line",str+=" ";var func=this.crashSummary.crashedFunction;return str+=func?func:"Unknown Function"},CrashDetailsController.prototype.fetchViewData=function(){var _this=this;if(this.crashId=new URLParams(this.$location.path()).crashId(),this.mobileAppId){this.isMobileAppMode=!0;var resultHandler=function(response){var crashDetailsViewData=_this.crashDetailsUiService.getMobileApplicationViewData_response(response);_this.viewData=crashDetailsViewData,_this.platform=_this.viewData.platform,_this.applicationName=_this.viewData.application.name,_this.mobileAppName=_this.viewData.mobileApp.name,_this.afterGetViewData()};this.crashDetailsUiService.getMobileApplicationViewData(this.applicationId.toString(),this.mobileAppId.toString()).then(resultHandler)}else{this.isMobileAppMode=!1;var resultHandler=function(response){var crashDetailsViewData=_this.crashDetailsUiService.getPlatformViewData_response(response);_this.viewData=crashDetailsViewData,_this.applicationName=_this.viewData.application.name,_this.afterGetViewData()};this.crashDetailsUiService.getPlatformViewData(this.applicationId.toString(),this.platform).then(resultHandler)}},CrashDetailsController.prototype.fetchData=function(){var _this=this,searchQuery={applicationId:this.applicationId,platform:this.platform,mobileAppId:this.mobileAppId?this.mobileAppId:0,timeRangeString:this.timeRangeService.getCurrentTimeRangeString(),crashId:this.crashId},resultHandler=function(response){var crashDetailsAndSummaryData=_this.crashDetailsUiService.getCrashDetailsAndSummary_response(response);_this.crashDetails=crashDetailsAndSummaryData.detailsData,_this.crashSummary=crashDetailsAndSummaryData.summaryData,_this.requestSuccess=!0},errorHandler=function(){_this.requestSuccess=!1};this.crashDetailsUiService.getCrashDetailsAndSummary(searchQuery).then(resultHandler,errorHandler)},CrashDetailsController.$inject=["$scope","resourceManager","notificationService","injectorService","applicationViewService","eumViewService","$location","$modalInstance","crashDetailsUiService","timeRangeService","dialogData"],CrashDetailsController}(MobileControllerBase.MobileDialogControllerBase);exports.CrashDetailsController=CrashDetailsController,appdynamicsModule.controller("CrashDetailsController",CrashDetailsController)}),define("app/view/common/GridViewStateBase",["require","exports"],function(require,exports){var GridViewStateBase=function(){function GridViewStateBase(){this.viewOptionsColumnStates=[],this.initialSortField="",this.initialSortDirection=GridComp.ASC}return GridViewStateBase}();exports.GridViewStateBase=GridViewStateBase});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/mobile/mobileSnapshots/list/MobileSnapshotListController",["require","exports","../../../../common/GridViewStateBase","app/view/eum/mobile/MobileControllerBase"],function(require,exports,GridViewStateBase,MobileControllerBase){var MobileSnapshotListViewState=function(_super){function MobileSnapshotListViewState(isAndroid){_super.call(this),this.isAndroid=isAndroid,this.initialSortField="timestamp",this.initialSortDirection=GridComp.DESC,this.withLoad=!0,this.filterString="",this.androidDeviceModelState={visible:!0,dataIndex:"deviceModel",header:ResourceManager.instance().getString("ui","ms_deviceModel")},this.iosDeviceModelState={visible:!1,dataIndex:"deviceModel",header:ResourceManager.instance().getString("ui","ms_deviceModel")}}return __extends(MobileSnapshotListViewState,_super),MobileSnapshotListViewState}(GridViewStateBase.GridViewStateBase);exports.MobileSnapshotListViewState=MobileSnapshotListViewState;var MobileSnapshotListController=function(_super){function MobileSnapshotListController($scope,$rootScope,$location,$timeout,resourceManager,notificationService,mobileSnapshotListUiService,filterService,timeRangeService,injectorService,applicationViewService,eumViewService,userPreferenceUiService,globalCacheService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService,applicationViewService,eumViewService),this.$rootScope=$rootScope,this.$location=$location,this.mobileSnapshotListUiService=mobileSnapshotListUiService,this.filterService=filterService,this.timeRangeService=timeRangeService,this.injectorService=injectorService,this.applicationViewService=applicationViewService,this.eumViewService=eumViewService,this.userPreferenceUiService=userPreferenceUiService,this.globalCacheService=globalCacheService,this.filterLayout=[{title:"ms_mobileApplication",filters:["mobileAppVersion"]},{title:"ms_errors",filters:["networkError","httpError"]},{title:"ms_networkRequestExperience",filters:["normalRequestExperience","slowRequestExperience","verySlowRequestExperience","stallRequestExperience"]},{title:"ms_eumSnapshotViewerServerTab",filters:["snapshotCallGraphExists"]},{title:"ms_networkLabel",filters:["carriers","connectionTypes","networkRequestNames"]},{title:"ms_device",filters:["deviceNames","osVersions"]},{title:"ms_geography",filters:["geoCountries"]}],this.filterButtons={clearButton:{name:"Clear Criteria",func:function(){_this.filterService.clearFilters(_this.filters)}},submitButton:{name:"Search",func:function(){_this.fetchData()}}},this.showLoading=!0,this.showFilters=!1,$scope.controller=this,$scope.gridSelection=null,this.initialize(),$scope.$on(NavigationService.UEV_BEFORE_NAVIGATE_TO_FRAGMENT,this.onNavigateAway.bind(this))}return __extends(MobileSnapshotListController,_super),MobileSnapshotListController.prototype.onNavigateAway=function(){this.networkRequestPageNameFilterBy&&(this.viewState.filters=null)},MobileSnapshotListController.prototype.updateNetworkRequestFilter=function(searchQuery){var values=searchQuery.networkRequestNames;if(values&&values.length>0){searchQuery.networkRequestNames=[];for(var i=0;i<values.length;i++)searchQuery.networkRequestNames.push(values[i].value)}},MobileSnapshotListController.prototype.initializeProperties=function(){this.setCommonProperties(this.$location.path()),this.globalCacheService["mobileSnapshotListController.viewState"]?(this.viewState=this.globalCacheService["mobileSnapshotListController.viewState"],this.viewStateWasSamePlatform=this.viewState.isAndroid==this.isAndroid,this.viewState.isAndroid=this.isAndroid):(this.viewState=new MobileSnapshotListViewState(this.isAndroid),this.viewStateWasSamePlatform=!0,this.globalCacheService["mobileSnapshotListController.viewState"]=this.viewState),this.updateContextMenuOptions();var urlParams=new URLParams(this.$location.path());this.networkRequestPageNameFilterBy=urlParams.getParam(UrlConstants.APPLICATION_DIAGNOSTIC_DATA_ID),this.networkRequestName=urlParams.getParam(UrlConstants.EUM_MOBILE_NETWORK_REQUEST_NAME),this.helpLink=ExternalUrls.HELP_URL_EUM_REQUEST_SNAPSHOT_LIST,this.selectedNavigationTab=NavigationDataConstants.EUM_REQUEST_SNAPSHOT_LIST,this.showFilters=!1,this.gridVisibleCount=0,this.archiveDisabled=!0,this.viewDetailsDisabled=!0,this.disableSplitter=BrowserUtils.isBrowserInternetExplorer8()},MobileSnapshotListController.prototype.initializeEventListeners=function(){var _this=this;_super.prototype.initializeEventListeners.call(this),this.$scope.$on(GridComp.UEV_GRID_COLUMN_SORT_EVENT,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var gridColumnSortEvent=args[0];_this.on_UEV_GRID_COLUMN_SORT_EVENT(gridColumnSortEvent)}),this.$scope.$watch("gridSelection",function(newValue){_this.onGridSelectionChange(newValue)}),this.$scope.$watch("controller.showFilters",function(){window.setTimeout(function(){_this.$scope.$broadcast("layoutChanged")},1)})},MobileSnapshotListController.prototype.initializeLocationBar=function(){var _this=this;_super.prototype.initializeLocationBar.call(this),this.locationEntries.push({label:InjectorService.instance().resourceManager().getString("ui","ms_requestsAndEpisodes")}),this.networkRequestPageNameFilterBy&&this.networkRequestName&&this.networkRequestName.length>0&&(this.locationEntries=this.locationEntries.concat([{label:this.getString("ms_networkRequestSnapshots"),clickFn:function(){_this.navigateTo(NavigationDataConstants.EUM_REQUEST_SNAPSHOT_LIST)}}]),this.locationEntries=this.locationEntries.concat([{label:this.networkRequestName}]))},MobileSnapshotListController.prototype.toggleFilters=function(){this.showFilters=!this.showFilters},MobileSnapshotListController.prototype.onArchive=function(){var _this=this,selectedItem=this.$scope.gridSelection;if(selectedItem){var archiveRequest={eventTimestamp:selectedItem.timestamp,eventId:selectedItem.eventSummary.id},resultHandler=function(response){var updatedItem=_this.mobileSnapshotListUiService.archiveEvent_response(response);selectedItem.archived=updatedItem.archived,selectedItem.eventSummary=updatedItem.eventSummary;var keyValue=new FilterKeyValue;keyValue.property="archived",keyValue.value=!0;var gridUpdateStatus=_this.gridOptions.updateSelectedRecord(keyValue);gridUpdateStatus?_this.notificationService.displayMessage(_this.resourceManager.getString("ui","ms_mobileSnapshotArchivedSuccess"),""):errorHandler(),_this.archiveDisabled=!0},errorHandler=function(){_this.notificationService.displayError(_this.resourceManager.getString("ui","ms_mobileSnapshotArchivedFailure"),"Error")};this.mobileSnapshotListUiService.archiveEvent(archiveRequest).then(resultHandler,errorHandler)}},MobileSnapshotListController.prototype.onViewDetails=function(){var selectedItem=this.$scope.gridSelection,eventId=selectedItem.eventSummary.id,snapshotTimestamp=selectedItem.eventSummary.eventTime.getTime();this.isMobileAppMode?this.eumViewService.viewMobileSnapshotDetailsForMobileApp(this.applicationId,this.platform,this.mobileAppId,eventId,snapshotTimestamp):this.eumViewService.viewMobileSnapshotDetailsForPlatform(this.applicationId,this.platform,eventId,snapshotTimestamp)},MobileSnapshotListController.prototype.updateContextMenuOptions=function(){var _this=this;this.contextMenuOptions={disableDefaultContextMenu:!0,items:[{text:"View Snapshot",handler:function(){_this.onViewDetails()},disabled:this.viewDetailsDisabled},{text:"Archive Snapshot",handler:function(){_this.onArchive()},disabled:this.archiveDisabled}]}},MobileSnapshotListController.prototype.initializeGrid=function(){var controller=this,columns=[new GridColumn({flex:.5,dataIndex:"networkRequestExperience",hidden:!1,header:"",tooltip:"Experience",align:"center",renderer:EUMCommonGridRenderers.EXPERIENCE_RENDERER}),new GridColumn({flex:.5,dataIndex:"hasError",hidden:!1,header:"",tooltip:"Error",align:"center",renderer:EUMCommonGridRenderers.MOBILE_SNAPSHOT_ERROR_RENDERER}),new GridColumn({flex:.5,dataIndex:"serverSnapshotCallGraph",hidden:!1,header:"",tooltip:this.getString("ms_hasServerSnapshot"),align:"center",renderer:EUMCommonGridRenderers.SERVER_SNAPSSHOT_CG_RENDERER}),new GridColumn({flex:1,dataIndex:"timestamp",hidden:!1,header:this.getString("ms_timestamp"),tooltip:this.getString("ms_timestamp"),renderer:EUMCommonGridRenderers.DATE_RENDERER}),new GridColumn({flex:.75,dataIndex:"mobileAppVersion",hidden:!1,header:this.getString("ms_mobileAppVersion"),tooltip:this.getString("ms_mobileAppVersion"),renderer:null}),new GridColumn({flex:1.5,dataIndex:"networkRequestName",hidden:!1,header:this.getString("ms_networkRequestName"),tooltip:this.getString("ms_networkRequestName"),renderer:EUMCommonGridRenderers.LINKED_ITEM_RENDERER}),new GridColumn({flex:1.5,dataIndex:"networkRequestUrl",hidden:!0,header:this.getString("ms_networkRequestUrl"),tooltip:this.getString("ms_networkRequestUrl"),renderer:null}),new GridColumn({flex:1,dataIndex:"networkRequestTime",align:"right",hidden:!1,header:this.getString("ms_networkRequestTime")+" (ms)",tooltip:this.getString("ms_networkRequestTime")+" (ms)",renderer:EUMCommonGridRenderers.GRID_LARGE_NUMBER_RENDERER}),new GridColumn({flex:1,dataIndex:"requestGUID",align:"left",hidden:!0,header:this.getString("ms_requestGUID"),tooltip:this.getString("ms_requestGUID"),renderer:null}),new GridColumn({flex:1,dataIndex:"requestContentLength",align:"right",hidden:!0,header:this.getString("ms_requestContentLength"),tooltip:this.getString("ms_requestContentLength"),renderer:EUMCommonGridRenderers.BYTE_RENDERER}),new GridColumn({flex:1,dataIndex:"responseContentLength",align:"right",hidden:!0,header:this.getString("ms_responseContentLength"),tooltip:this.getString("ms_responseContentLength"),renderer:EUMCommonGridRenderers.BYTE_RENDERER}),new GridColumn({flex:1,dataIndex:"geoCountry",hidden:!0,header:this.getString("ms_geoCountry"),tooltip:this.getString("ms_geoCountry"),renderer:null}),new GridColumn({flex:1,dataIndex:"deviceName",hidden:!1,header:this.getString("ms_deviceOrManufacturer"),tooltip:this.getString("ms_deviceOrManufacturer"),renderer:null}),new GridColumn({flex:1,dataIndex:"deviceModel",hidden:!this.isAndroid,header:this.getString("ms_deviceModel"),tooltip:this.getString("ms_deviceModel"),renderer:null}),new GridColumn({flex:1,dataIndex:"osVersion",hidden:!1,header:this.getString("ms_osVersion"),tooltip:this.getString("ms_osVersion"),renderer:null}),new GridColumn({flex:1,dataIndex:"carrier",hidden:!0,header:this.getString("ms_carrier"),tooltip:this.getString("ms_carrier"),renderer:null}),new GridColumn({flex:1,dataIndex:"connectionType",hidden:!0,header:this.getString("ms_connectionType"),tooltip:this.getString("ms_connectionType"),renderer:null}),new GridColumn({flex:1,dataIndex:"httpStatusCode",hidden:!1,header:this.getString("ms_httpStatusCode"),tooltip:this.getString("ms_httpStatusCode"),renderer:EUMCommonGridRenderers.HTTP_STATUS_RENDERER}),new GridColumn({flex:.75,dataIndex:"networkError",hidden:!1,header:this.getString("ms_networkError"),tooltip:this.getString("ms_networkError"),renderer:EUMCommonGridRenderers.NETWORK_ERROR_RENDERER}),new GridColumn({flex:.75,dataIndex:"archived",hidden:!0,header:"",tooltip:this.getString("ms_archived"),renderer:EUMCommonGridRenderers.ARCHIVED_RENDERER})];this.configureDeviceModelColumnVisibilityForPlatform(columns,this.viewState,this.viewStateWasSamePlatform),this.gridOptions=new GridOptions,this.gridOptions.useBufferedRenderer=!0,this.gridOptions.columnProvider=columns,this.gridOptions.compileRenderers=!1,this.gridOptions.dataProvider=[],this.gridOptions.filterString=this.viewState.filterString,this.gridOptions.sortFields=[{property:this.viewState.initialSortField,direction:this.viewState.initialSortDirection}],this.gridOptions.stateful=!0,this.gridOptions.stateId="EUMMobileNetworkRequestSnapshotList-stateId",this.gridOptions.filterSummaryFunction=function(shown){controller.gridVisibleCount=shown,controller.viewState.filterString=controller.gridOptions.filterString.toString()}},MobileSnapshotListController.prototype.on_UEV_GRID_COLUMN_SORT_EVENT=function(gridColumnSortEvent){this.viewState.initialSortDirection=gridColumnSortEvent.direction,this.viewState.initialSortField=gridColumnSortEvent.column.dataIndex},MobileSnapshotListController.prototype.onGridSelectionChange=function(eumMobileCrashSummaryData){eumMobileCrashSummaryData?(this.viewDetailsDisabled=!1,this.archiveDisabled=eumMobileCrashSummaryData.archived):(this.viewDetailsDisabled=!0,this.archiveDisabled=!0),this.updateContextMenuOptions()},MobileSnapshotListController.prototype.handleGridClick=function(event){if(WebUtil.isSpan(event.target)&&"networkRequestName"==this.gridOptions.columnProvider[event.columnIndex].dataIndex){var rowData=event.raw;if(!rowData.networkRequestId)return void ADLoggerService.error("Could not navigate to request dashboard because networkRequestId unset");this.isMobileAppMode?this.eumViewService.viewRequestDashboardForMobileApp(this.applicationId,this.platform,this.mobileAppId,rowData.networkRequestId):this.eumViewService.viewRequestDashboardForPlatform(this.applicationId,this.platform,rowData.networkRequestId)}},MobileSnapshotListController.prototype.afterGetViewData=function(){this.networkRequestPageNameFilterBy&&this.filterService.selectFilterWithValue(this.networkRequestPageNameFilterBy,"networkRequestNames",this.filters,!0),_super.prototype.afterGetViewData.call(this)},MobileSnapshotListController.prototype.fetchViewData=function(){var _this=this;this.showLoading=!0,this.isMobileAppMode?this.mobileSnapshotListUiService.getMobileApplicationViewData(this.applicationId.toString(),this.mobileAppId.toString()).then(function(response){_this.viewData=_this.mobileSnapshotListUiService.getMobileApplicationViewData_response(response),_this.platform=_this.viewData.platform,_this.mobileAppName=_this.viewData.mobileApp.name,_this.onFetchViewData()}):this.mobileSnapshotListUiService.getPlatformViewData(this.applicationId.toString(),this.platform).then(function(response){_this.viewData=_this.mobileSnapshotListUiService.getPlatformViewData_response(response),_this.onFetchViewData()})},MobileSnapshotListController.prototype.onFetchViewData=function(){this.applicationName=this.viewData.application.name,this.filters=this.viewData.mobileSnapshotFilterData,this.viewState&&this.viewState.filters&&this.filterService.copyFilterValuesToNewObject(this.viewState.filters,this.filters),this.filterService.attachFiltersToViewState(this.viewState,"filters",this.$scope),this.afterGetViewData()},MobileSnapshotListController.prototype.fetchData=function(){var _this=this;this.showLoading=!0;var searchQuery=this.viewData.mobileSnapshotQuery;this.filterService.populateMobileSearchQuery(this.applicationId,this.mobileAppId,this.platform,this.timeRangeService.getCurrentTimeRangeString(),this.filters,searchQuery),this.updateNetworkRequestFilter(searchQuery),this.mobileSnapshotListUiService.getMobileSnapshotSummaries(searchQuery).then(function(response){_this.gridOptions.dataProvider=_this.mobileSnapshotListUiService.getMobileSnapshotSummaries_response(response),_this.showLoading=!1,_this.gridVisibleCount=_this.gridOptions.dataProvider.length,_this.gridOptions.filterString=""+_this.gridOptions.filterString})},MobileSnapshotListController.$inject=["$scope","$rootScope","$location","$timeout","resourceManager","notificationService","mobileSnapshotListUiService","filterService","timeRangeService","injectorService","applicationViewService","eumViewService","userPreferenceUiService","globalCacheService"],MobileSnapshotListController}(MobileControllerBase.MobileControllerBase);exports.MobileSnapshotListController=MobileSnapshotListController,appdynamicsModule.controller("MobileSnapshotListController",MobileSnapshotListController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/common/userData/UserDataCardController",["require","exports","app/view/eum/EUMControllerBase"],function(require,exports,EUMControllerBase){var UserDataCardController=function(_super){function UserDataCardController($scope,$location,resourceManager,notificationService,injectorService,applicationViewService,eumViewService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService,applicationViewService,eumViewService),this.$scope=$scope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.applicationViewService=applicationViewService,this.eumViewService=eumViewService,_super.prototype.setCommonProperties.call(this,$location.path()),$scope.controller=this,this.initializeGrid(),$scope.$watch(function(){return $scope.userData},function(){_this.onDataChange()})}return __extends(UserDataCardController,_super),UserDataCardController.prototype.initializeGrid=function(){var columns=[new GridColumn({flex:1,align:"left",dataIndex:"key",sortable:!0,header:this.getString("ms_key")}),new GridColumn({flex:1,align:"left",dataIndex:"value",sortable:!0,header:this.getString("ms_value")})];this.gridOptions=new GridOptions,this.gridOptions.compileRenderers=!0,this.gridOptions.useBufferedRenderer=!0,this.gridOptions.useDataLoadReader=!0,this.gridOptions.columnProvider=columns,this.gridOptions.dataProvider=[]},UserDataCardController.prototype.onDataChange=function(){this.gridOptions.loading=this.$scope.loading,this.$scope.userData&&(this.gridOptions.dataProvider=this.$scope.userData)},UserDataCardController}(EUMControllerBase.EUMControllerBase);
exports.UserDataCardController=UserDataCardController}),define("app/view/eum/common/userData/UserDataCard",["require","exports","./UserDataCardController"],function(require,exports,UserDataCardController){var UserDataCard=function(){function UserDataCard(){return{restrict:"E",replace:!1,templateUrl:"app/view/eum/common/userData/UserDataCard.html",scope:{requestSuccess:"=",loading:"=",userData:"="},controller:UserDataCardController.UserDataCardController}}return UserDataCard}();exports.UserDataCard=UserDataCard,appdynamicsModule.directive(StringUtils.toCamelCase("ad-eum-user-data-card"),UserDataCard)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/mobile/mobileSnapshots/details/MobileSnapshotDetailsController",["require","exports","app/view/eum/mobile/MobileControllerBase","app/view/eum/common/userData/UserDataCard"],function(require,exports,MobileControllerBase,UserDataCard){var MobileSnapshotDetailsController=function(_super){function MobileSnapshotDetailsController($scope,resourceManager,notificationService,injectorService,$location,$modalInstance,mobileSnapshotDetailsUiService,timeRangeService,applicationViewService,eumViewService,dialogData){var _this=this;_super.call(this,$scope,$modalInstance),this.$location=$location,this.$modalInstance=$modalInstance,this.mobileSnapshotDetailsUiService=mobileSnapshotDetailsUiService,this.timeRangeService=timeRangeService,this.applicationViewService=applicationViewService,this.eumViewService=eumViewService,this.dialogData=dialogData,$scope.controller=this,this.initModal().then(function(){_this.initialize()})}return __extends(MobileSnapshotDetailsController,_super),MobileSnapshotDetailsController.prototype.initializeProperties=function(){this.setCommonProperties(this.$location.path()),this.mobileSnapshotId=+new URLParams(this.$location.path()).mobileSnapshotId()},MobileSnapshotDetailsController.prototype.initializeEventListeners=function(){_super.prototype.initializeEventListeners.call(this);var thisRef=this;this.$scope.$on(App.UEV_COPY_LINK_TO_CLIPBOARD,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var trs=thisRef.timeRangeService.createTimeRangeAroundTimestamp(thisRef.snapshotData.timestamp),params=new URLParams(thisRef.$location.path()),newTimeRangeAsString=thisRef.timeRangeService.convertToPreferenceString(trs,".");params.setParam(UrlConstants.TIME_RANGE,newTimeRangeAsString);var newUrl=thisRef.$location.absUrl().replace(thisRef.$location.path(),params.toString());WebUtil.copyToClipboard(newUrl)})},MobileSnapshotDetailsController.prototype.replaceURLForModal=function(){if(this.dialogData){var params=new URLParams;return params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_REQUEST_SNAPSHOT_DETAILS),params.setNumberParam(UrlConstants.APPLICATION_ID,this.dialogData.applicationId),params.setParam(UrlConstants.EUM_PLATFORM,this.dialogData.platform),params.setNumberParam(UrlConstants.EUM_MOBILE_SNAPSHOT,this.dialogData.mobileSnapshotId),params.setNumberParam(UrlConstants.EUM_MOBILE_SNAPSHOT_TIMESTAMP,this.dialogData.mobileSnapshotTimestamp),this.dialogData.mobileAppId&&params.setNumberParam(UrlConstants.EUM_MOBILE_APP,this.dialogData.mobileAppId),this.setUrlLocation(params)}return this.dialogData={applicationId:URLParams.getCurrentUrlParams().getNumberParam(UrlConstants.APPLICATION_ID),platform:URLParams.getCurrentUrlParams().getParam(UrlConstants.EUM_PLATFORM),mobileAppId:URLParams.getCurrentUrlParams().getNumberParam(UrlConstants.EUM_MOBILE_APP),mobileSnapshotId:URLParams.getCurrentUrlParams().getNumberParam(UrlConstants.EUM_MOBILE_SNAPSHOT),mobileSnapshotTimestamp:URLParams.getCurrentUrlParams().getNumberParam(UrlConstants.EUM_MOBILE_SNAPSHOT_TIMESTAMP),openedFromSessionDetails:!1},InjectorService.instance().$q().when()},MobileSnapshotDetailsController.prototype.fetchViewData=function(){var _this=this;if(this.mobileAppId){this.isMobileAppMode=!0;var resultHandler=function(response){var crashDetailsViewData=_this.mobileSnapshotDetailsUiService.getMobileApplicationViewData_response(response);_this.viewData=crashDetailsViewData,_this.platform=_this.viewData.platform,_this.applicationName=_this.viewData.application.name,_this.mobileAppName=_this.viewData.mobileApp.name,_this.afterGetViewData()};this.mobileSnapshotDetailsUiService.getMobileApplicationViewData(this.applicationId.toString(),this.mobileAppId.toString()).then(resultHandler)}else{this.isMobileAppMode=!1;var resultHandler=function(response){var crashDetailsViewData=_this.mobileSnapshotDetailsUiService.getPlatformViewData_response(response);_this.viewData=crashDetailsViewData,_this.applicationName=_this.viewData.application.name,_this.afterGetViewData()};this.mobileSnapshotDetailsUiService.getPlatformViewData(this.applicationId.toString(),this.platform).then(resultHandler)}},MobileSnapshotDetailsController.prototype.fetchData=function(){var _this=this,eventTimestamp=+new URLParams(this.$location.path()).mobileSnapshotTimestamp(),timeRange=this.timeRangeService.createTimeRangeAroundTimestamp(eventTimestamp),timeRangeString=this.timeRangeService.convertToPreferenceString(timeRange),searchQuery={applicationId:this.applicationId,platform:this.platform,mobileAppId:this.mobileAppId?this.mobileAppId:0,timeRangeString:timeRangeString,snapshotId:this.mobileSnapshotId},resultHandler=function(response){var eumMobileSnapshotData=_this.mobileSnapshotDetailsUiService.getMobileSnapshot_response(response);_this.snapshotData=eumMobileSnapshotData,_this.requestSuccess=!0,_this.loading=!1};this.loading=!0,this.mobileSnapshotDetailsUiService.getMobileSnapshot(searchQuery).then(resultHandler)},MobileSnapshotDetailsController.prototype.deepLinkedModalClosedHandler=function(){EumViewService.instance().viewMobileSnapshotList(this.applicationId,this.platform,this.mobileAppId)},MobileSnapshotDetailsController.$inject=["$scope","resourceManager","notificationService","injectorService","$location","$modalInstance","mobileSnapshotDetailsUiService","timeRangeService","applicationViewService","eumViewService","dialogData"],MobileSnapshotDetailsController}(MobileControllerBase.MobileDialogControllerBase);exports.MobileSnapshotDetailsController=MobileSnapshotDetailsController,appdynamicsModule.controller("MobileSnapshotDetailsController",MobileSnapshotDetailsController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/web/browserSnapshot/details/resourceWaterfall/ResourceWaterfallController",["require","exports"],function(require,exports){var ResourceWaterfallController=function(_super){function ResourceWaterfallController($scope,$rootScope,$location,resourceManager,notificationService,injectorService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.showCrossOriginMessage=!1,this.filter=_.debounce(function(){_this.resourceWaterfall.updateFilter()},300),$scope.controller=this;var gridOptions=new GridOptions;gridOptions.compileRenderers=!0,gridOptions.dataProvider=[],gridOptions.updateFilter=function(){},this.resourceWaterfall=gridOptions,this.initScope($scope)}return __extends(ResourceWaterfallController,_super),ResourceWaterfallController.prototype.initScope=function($scope){var _this=this;this.rtData=$scope.rtData,this.rtData&&(this.resourceTimingData=this.rtData.resourceTimingData,this.init()),this.setUpColumns(),$scope.$watch("rtData",function(){_this.rtData=$scope.rtData,null!=$scope.rtData&&(_this.resourceTimingData=$scope.rtData.resourceTimingData)}),$scope.$watch("controller.resourceTimingData",function(){_this.init()}),$scope.$watch("controller.nameQuery",function(){_this.filter()}),$scope.$watch("controller.typeOption",function(){_this.filter()}),$scope.$on("nameQuery",function(response){_this.nameQuery=response.targetScope.$eval("nameQuery")}),$scope.$on("layoutChanged",function(){_this.relayout()})},ResourceWaterfallController.prototype.init=function(){var _this=this;if(this.resourceTimingData){this.waterfallData=this.rtData.resourceWaterfallData,this.markerData=this.rtData.resourceMarkerData,this.summary=this.resourceTimingData.summary,this.markerHeight=400,this.typeList=[];for(var i=0;i<this.resourceTimingData.resourceTypeOptionsList.length;i++)this.typeList.push({value:this.resourceTimingData.resourceTypeOptionsList[i].type,name:this.getString(this.resourceTimingData.resourceTypeOptionsList[i].name)});this.resourceWaterfall.dataProvider=this.resourceTimingData.resources,this.resourceWaterfall.filterFunction=function(item){return _this.gridFilterFunction(item)};var topHeight=50,rowHeight=24,gridTopRowHeight=38,gridHeight=rowHeight*this.resourceWaterfall.dataProvider.length+topHeight;this.tableHeight={height:gridHeight+"px"},this.markerHeight=gridHeight-gridTopRowHeight,window.setTimeout(function(){_this.$scope.$broadcast("layoutChanged")},1)}},ResourceWaterfallController.prototype.relayout=function(){this.renderMarkers()},ResourceWaterfallController.prototype.getOverviewChartDataPosition=function(offsetBase,duration,startTime,endTime){return"left:"+100*(offsetBase-startTime)/(endTime-startTime)+"%; width:"+100*duration/(endTime-startTime)+"%"},ResourceWaterfallController.prototype.getDetailChartDataPosition=function(startTime,endTime,totalTime){return"left:"+100*startTime/totalTime+"%; width:"+100*(endTime-startTime)/totalTime+"%"},ResourceWaterfallController.prototype.positionTheDetailsDialog=function(waterfallRowElem,isCrossOrigin,numberOfLines){if(waterfallRowElem){for(;waterfallRowElem.className.indexOf("adsWaterfall")>=0;)waterfallRowElem=waterfallRowElem.parentElement;for(waterfallRowElem.className.indexOf("resourceWaterfallBarSameOrigin")>=0&&(waterfallRowElem=waterfallRowElem.parentElement);-1==waterfallRowElem.className.indexOf("resourceWaterfall");)waterfallRowElem=waterfallRowElem.children[0];var detailsElem=document.getElementById("resourceTimingDetailGraph"),defaultDetailsWidth=500,topBarHeight=38,heightOfOneRow=25,heightOfTheDetails=isCrossOrigin?60:heightOfOneRow*numberOfLines,spaceBetweenTheWaterfallElemAndItsContainer=(heightOfOneRow-$(waterfallRowElem).height())/2,detailsWidth=detailsElem.children[0].clientWidth>0?detailsElem.children[0].clientWidth:defaultDetailsWidth,theGrid=waterfallRowElem.offsetParent,waterfallLeftPositionAfterScroll=waterfallRowElem.offsetLeft-theGrid.scrollLeft+waterfallRowElem.clientLeft,waterfallVertPositionAfterScroll=waterfallRowElem.offsetTop-theGrid.scrollTop+waterfallRowElem.clientTop+topBarHeight-spaceBetweenTheWaterfallElemAndItsContainer+heightOfOneRow;detailsElem.style.width=(waterfallRowElem.clientWidth>defaultDetailsWidth?waterfallRowElem.clientWidth:defaultDetailsWidth)+"px",detailsElem.style.height=heightOfTheDetails+"px",detailsElem.style.top=theGrid.clientHeight-waterfallVertPositionAfterScroll<heightOfTheDetails?waterfallVertPositionAfterScroll-heightOfTheDetails-heightOfOneRow+"px":waterfallVertPositionAfterScroll+"px",detailsElem.style.left=theGrid.clientWidth-waterfallLeftPositionAfterScroll<detailsWidth?theGrid.clientWidth-detailsWidth+"px":waterfallLeftPositionAfterScroll+"px"}},ResourceWaterfallController.prototype.showOrHideDetail=function(event){if(4!=event.columnIndex)this.isDetailDisplayed=!1,this.detailResource=null,this.showCrossOriginMessage=!1;else if(this.isDetailDisplayed&&this.detailResource==event.raw)this.isDetailDisplayed=!1,this.detailResource=null,this.showCrossOriginMessage=!1;else{var waterfallRowElem=event.e.target,detailResource=event.raw,isCrossOrigin=detailResource.crossOriginAllowCheckFailed&&!this.rtData.snapshotData.synthetic;if(this.detailResource=detailResource,this.isDetailDisplayed=!0,this.detailWaterfallData=[],isCrossOrigin)this.showCrossOriginMessage=!0;else{if(this.showCrossOriginMessage=!1,!this.rtData.snapshotData.synthetic&&detailResource.redirectEnd>-1&&detailResource.redirectStart>-1){this.detailWaterfallData.push({"class":"resourceRedirectBar",title:"Redirect",waterfall:[{id:"detailWaterfall",displayType:AdWaterfallEvent.displayTypes.EVENT,duration:detailResource.redirectEnd-detailResource.redirectStart,startTime:detailResource.redirectStart}]});var waitTimeAfterRedirect=detailResource.redirectEnd>-1?detailResource.fetchStart-detailResource.redirectEnd:0;waitTimeAfterRedirect>0&&this.detailWaterfallData.push({"class":"resourceQueueBar",title:"Browser Wait",waterfall:[{id:"detailWaterfall",displayType:AdWaterfallEvent.displayTypes.EVENT,duration:waitTimeAfterRedirect,startTime:detailResource.redirectEnd}]})}var waitTimeBeforeDNS=detailResource.fetchStart>-1?detailResource.domainLookupStart-detailResource.fetchStart:0;waitTimeBeforeDNS>0&&this.detailWaterfallData.push({"class":"resourceQueueBar",title:"Browser Wait",waterfall:[{id:"detailWaterfall",displayType:AdWaterfallEvent.displayTypes.EVENT,duration:waitTimeBeforeDNS,startTime:detailResource.fetchStart}]}),this.detailWaterfallData.push({"class":"resourceDNSBar",title:"DNS Lookup",waterfall:[{id:"detailWaterfall",displayType:AdWaterfallEvent.displayTypes.EVENT,text:"(DNS is cached)",duration:detailResource.domainLookupEnd>-1&&detailResource.domainLookupStart>-1?detailResource.domainLookupEnd-detailResource.domainLookupStart:0,startTime:detailResource.domainLookupStart}]});var waitTimeBeforeConnection=detailResource.domainLookupEnd>-1?detailResource.connectStart-detailResource.domainLookupEnd:0;waitTimeBeforeConnection>0&&this.detailWaterfallData.push({"class":"resourceQueueBar",title:"Browser Wait",waterfall:[{id:"detailWaterfall",displayType:AdWaterfallEvent.displayTypes.EVENT,duration:waitTimeBeforeConnection,startTime:detailResource.domainLookupEnd}]}),this.detailWaterfallData.push({"class":"resourceTCPBar",title:"TCP Connection",waterfall:[{id:"detailWaterfall",displayType:AdWaterfallEvent.displayTypes.EVENT,text:"(Persistent connection is used)",duration:detailResource.connectEnd>-1&&detailResource.connectStart>-1?detailResource.connectEnd-detailResource.connectStart:0,startTime:detailResource.connectStart}]});var waitTimeBeforeRequest=detailResource.connectEnd>-1?detailResource.requestStart-detailResource.connectEnd:0;waitTimeBeforeRequest>0&&this.detailWaterfallData.push({"class":"resourceQueueBar",title:"Browser Wait",waterfall:[{id:"detailWaterfall",displayType:AdWaterfallEvent.displayTypes.EVENT,duration:waitTimeBeforeRequest,startTime:detailResource.connectEnd}]}),this.detailWaterfallData.push({"class":"resourceRequestBar",title:"Request and Wait",waterfall:[{id:"detailWaterfall",displayType:AdWaterfallEvent.displayTypes.EVENT,text:"(Fetched from cache)",duration:detailResource.responseStart>-1&&detailResource.requestStart>-1?detailResource.responseStart-detailResource.requestStart:0,startTime:detailResource.requestStart}]}),this.detailWaterfallData.push({"class":"resourceResponseBar",title:"Response",waterfall:[{id:"detailWaterfall",displayType:AdWaterfallEvent.displayTypes.EVENT,text:"",duration:detailResource.responseEnd>-1&&detailResource.responseStart>-1?detailResource.responseEnd-detailResource.responseStart:0,startTime:detailResource.responseStart}]})}this.positionTheDetailsDialog(waterfallRowElem,isCrossOrigin,this.detailWaterfallData.length)}},ResourceWaterfallController.prototype.renderMarkers=function(){var element=$(".resourceWaterfall")[0],markerElement=document.getElementById("resourceTimingMarker");markerElement&&(element&&element.offsetParent?(markerElement.style.left=element.offsetLeft-element.offsetParent.scrollLeft+element.clientLeft+"px",markerElement.style.visibility="visible"):markerElement.style.visibility="hidden")},ResourceWaterfallController.prototype.renderName=function(name,metaData,record){return'<div popover="'+record.data.url+'" popover-append-to-body="true" popover-trigger="mouseenter" ><a target="_blank" href="'+record.data.url+'">'+name+"</a></div>"},ResourceWaterfallController.prototype.renderType=function(type){return"<div class='adsResourceTypeSymbol adsJS_RES_TYPE_"+type+"'></div>"+this.getString(type)},ResourceWaterfallController.prototype.renderDuration=function(duration){return'<div style="float: right;">'+duration+" ms</div>"},ResourceWaterfallController.prototype.renderWaterfall=function(offsetBase,metaData,record){var id=record.data.id,duration=this.resourceTimingData.summary.lastEndTime-this.resourceTimingData.summary.earliestStartTime,htmlResult="";return htmlResult+=record.data.domainLookupStart>=0||this.rtData.snapshotData.synthetic?'<a><div class="resourceWaterfall resourceWaterfallBarSameOrigin"><div class="adsWaterfallCell" ad-waterfall-event="$parent.$parent.controller.rtData.resourceWaterfallData['+id+']" sv-total-time-length="'+duration+'" sv-hide-overflow="false"></div></div></a>':'<div class="resourceWaterfall resourceWaterfallBarCrossOrigin"><div class="adsWaterfallCell" ad-waterfall-event="$parent.$parent.controller.rtData.resourceWaterfallData['+id+']" sv-total-time-length="'+duration+'" sv-hide-overflow="false"></div></div>'},ResourceWaterfallController.prototype.setUpColumns=function(){var _this=this,columnConfig={columns:[{flex:0,width:150,dataIndex:"name",header:"Resource",hidden:!1,sortable:!0,filter:null,renderer:function(name,metaData,record){return _this.renderName(name,metaData,record)}},{flex:0,width:150,dataIndex:"domain",header:"Domain",hidden:!1,sortable:!0,filter:null,renderer:null},{flex:0,width:80,dataIndex:"resourceType",header:"Type",hidden:!1,sortable:!0,filter:null,renderer:function(type){return _this.renderType(type)}},{flex:0,width:70,dataIndex:"duration",header:"Duration",hidden:!1,sortable:!0,filter:null,renderer:function(duration,metaData,record){return _this.renderDuration(duration,metaData,record)}},{flex:1,width:100,dataIndex:"offsetBase",header:"Timeline",hidden:!1,sortable:!0,filter:null,renderer:function(offsetBase,metaData,record,row,col,store,gridView){return _this.renderWaterfall(offsetBase,metaData,record,row,col,store,gridView)}},{flex:0,width:0,dataIndex:"url",header:"Url",hidden:!0,sortable:!1,filter:null,renderer:null},{flex:0,width:0,dataIndex:"domainLookupStart",header:"DomainLookupStart",hidden:!0,sortable:!1,filter:null,renderer:null}]},gridOptions=this.resourceWaterfall,columns=[];for(var index in columnConfig.columns){var settings=columnConfig.columns[index];columns.push(new GridColumn({flex:settings.flex,align:"left",width:settings.width,dataIndex:settings.dataIndex,dataIndexMapping:"",hidden:settings.hidden,header:settings.header,draggable:!1,menuDisabled:!0,sortable:settings.sortable,filter:settings.filter,renderer:settings.renderer}))}gridOptions.columnProvider=columns,gridOptions.sortFields=[{property:"offsetBase",direction:"ASC"}],gridOptions.filterSummaryFunction=function(shown){_this.numOfResourcesShown=shown}},ResourceWaterfallController.prototype.nameFilter=function(item){return null!=this.nameQuery&&-1==item.name.toLowerCase().indexOf(this.nameQuery.toLowerCase())&&-1==item.domain.toLowerCase().indexOf(this.nameQuery.toLowerCase())?!1:!0},ResourceWaterfallController.prototype.typeFilter=function(item){return null!=this.typeOption&&null!=this.typeOption.value&&this.getString(item.resourceType)!=this.typeOption.name?!1:!0},ResourceWaterfallController.prototype.gridFilterFunction=function(item){return this.nameFilter(item.data)&&this.typeFilter(item.data)?!0:!1},ResourceWaterfallController.$inject=["$scope","$rootScope","$location","resourceManager","notificationService","injectorService"],ResourceWaterfallController}(ControllerBase);exports.ResourceWaterfallController=ResourceWaterfallController,appdynamicsModule.controller("ResourceWaterfallController",ResourceWaterfallController)}),define("app/view/eum/web/browserSnapshot/details/resourceWaterfall/ResourceWaterfallDirective",["require","exports"],function(require,exports){var ResourceWaterfallDirective=function(){function ResourceWaterfallDirective(){return{restrict:"A",replace:!1,templateUrl:"app/view/eum/web/browserSnapshot/details/resourceWaterfall/ResourceWaterfall.html",scope:{rtData:"=adResourceWaterfall",svLoading:"&"},controller:"ResourceWaterfallController"}}return ResourceWaterfallDirective.$inject=[],ResourceWaterfallDirective}();exports.ResourceWaterfallDirective=ResourceWaterfallDirective,appdynamicsModule.directive(StringUtils.toCamelCase("ad-resource-waterfall"),ResourceWaterfallDirective)}),define("app/view/eum/mobile/crashes/details/cards/breadcrumbs/BreadcrumbCard",["require","exports"],function(require,exports){var BreadcrumbCard=function(){function BreadcrumbCard(){return{restrict:"E",replace:!1,templateUrl:"app/view/eum/mobile/crashes/details/cards/breadcrumbs/BreadcrumbCard.html",scope:{breadcrumbs:"="},controller:"BreadcrumbCardController",link:function(){}}}return BreadcrumbCard}();exports.BreadcrumbCard=BreadcrumbCard,appdynamicsModule.directive(StringUtils.toCamelCase("ad-crash-details-breadcrumb-card"),BreadcrumbCard)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/mobile/crashes/details/cards/breadcrumbs/BreadcrumbCardController",["require","exports"],function(require,exports){var BreadcrumbCardController=function(_super){function BreadcrumbCardController($scope,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,$scope.controller=this}return __extends(BreadcrumbCardController,_super),BreadcrumbCardController.prototype.formatTime=function(timestampToFormat){return DateTimeUtil.getDateTimeString(timestampToFormat,2)},BreadcrumbCardController.$inject=["$scope","resourceManager","notificationService","injectorService"],BreadcrumbCardController}(ControllerBase);exports.BreadcrumbCardController=BreadcrumbCardController,appdynamicsModule.controller("BreadcrumbCardController",BreadcrumbCardController)}),define("app/view/eum/mobile/crashes/details/cards/stacktrace/StackTraceCard",["require","exports"],function(require,exports){var StackTraceCard=function(){function StackTraceCard(){return{restrict:"E",replace:!1,templateUrl:"app/view/eum/mobile/crashes/details/cards/stacktrace/StackTraceCard.html",scope:{applicationId:"=",details:"="},controller:"StackTraceCardController",link:function(){}}}return StackTraceCard}();exports.StackTraceCard=StackTraceCard,appdynamicsModule.directive(StringUtils.toCamelCase("ad-crash-details-stack-trace-card"),StackTraceCard)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/mobile/crashes/details/cards/stacktrace/StackTraceCardController",["require","exports"],function(require,exports){var StackTraceCardController=function(_super){function StackTraceCardController($scope,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,$scope.controller=this}return __extends(StackTraceCardController,_super),StackTraceCardController.$inject=["$scope","resourceManager","notificationService","injectorService"],StackTraceCardController}(ControllerBase);exports.StackTraceCardController=StackTraceCardController,appdynamicsModule.controller("StackTraceCardController",StackTraceCardController)}),define("app/view/eum/mobile/crashes/details/cards/summary/SummaryCard",["require","exports"],function(require,exports){var SummaryCard=function(){function SummaryCard(){return{restrict:"E",replace:!1,templateUrl:"app/view/eum/mobile/crashes/details/cards/summary/SummaryCard.html",scope:{applicationId:"=",requestSuccess:"=",isAndroid:"=",openedFromSessionDetails:"=",details:"=",summary:"="},controller:"SummaryCardController",link:function(){}}}return SummaryCard}();exports.SummaryCard=SummaryCard,appdynamicsModule.directive(StringUtils.toCamelCase("ad-crash-details-summary-card"),SummaryCard)}),define("app/view/eum/common/waterfall/WaterfallDirectiveDefinitions",["require","exports"],function(require,exports){var WaterfallDirectiveDataTypes=function(){function WaterfallDirectiveDataTypes(){}return WaterfallDirectiveDataTypes}();exports.WaterfallDirectiveDataTypes=WaterfallDirectiveDataTypes;var WaterfallMarkers=function(){function WaterfallMarkers(){}return WaterfallMarkers}();exports.WaterfallMarkers=WaterfallMarkers;var WaterfallData=function(){function WaterfallData(){}return WaterfallData}();exports.WaterfallData=WaterfallData,exports.waterfallDirectiveDataTypes={},exports.waterfallDirectiveDataTypes.AJAX={name:"Ajax",color:"#FC9644"},exports.waterfallDirectiveDataTypes.RESOURCE={name:"Resource",color:AdColorPalette.COLOR_PALETTE_A20_BLUE},exports.waterfallDirectiveDataTypes.IFRAME={name:"iFrame",color:AdColorPalette.COLOR_PALETTE_A20_GREEN},exports.waterfallDirectiveDataTypes.BROWSER_EVENT={name:"Browser Event",color:AdColorPalette.COLOR_PALETTE_A20_INDIGO},exports.waterfallDirectiveDataTypes.NETWORK_REQUEST={name:"Network Request",color:AdColorPalette.COLOR_PALETTE_A20_INDIGO},exports.waterfallDirectiveDataTypes.CRASH={name:"Crash Event",color:AdColorPalette.COLOR_PALETTE_A20_RED},exports.waterfallDirectiveDataTypes.CUSTOM_TIMER={name:"Custom Timer",color:AdColorPalette.COLOR_PALETTE_A20_PISTACHIO},exports.waterfallDirectiveDataTypes.CUSTOM_METRIC={name:"Custom Metric",color:AdColorPalette.COLOR_PALETTE_A20_PISTACHIO},exports.waterfallDirectiveDataTypes.BREADCRUMB={name:"Breadcrumb",color:AdColorPalette.COLOR_PALETTE_A20_LIME},exports.waterfallDirectiveDataTypes.INFO_POINT={name:"Infopoint",color:AdColorPalette.COLOR_PALETTE_A20_BERMUDA_GRAY},exports.WaterfallHighlightBarSequence={},exports.WaterfallHighlightBarSequence.RESOURCE=0,exports.WaterfallHighlightBarSequence.BROWSER_EVENT=1,exports.WaterfallHighlightBarSequence.AJAX=2,exports.WaterfallHighlightBarSequence.IFRAME=3,exports.WaterfallHighlightBarSequence.NETWORK_REQUEST=0,exports.WaterfallHighlightBarSequence.CRASH=1,exports.WaterfallHighlightBarSequence.CUSTOM_TIMER=2,exports.WaterfallHighlightBarSequence.CUSTOM_METRIC=3,exports.WaterfallHighlightBarSequence.BREADCRUMB=4,exports.WaterfallHighlightBarSequence.INFO_POINT=5,exports.SignificantResourceTimingEventMarkers={"First Byte":UiConfig.getColor("EUM_SESSIONS_FIRST_BYTE"),"DOM Ready":UiConfig.getColor("EUM_SESSIONS_DOM_READY"),Onload:UiConfig.getColor("EUM_SESSIONS_ONLOAD"),"Visually Complete Time":UiConfig.getColor("EUM_SESSIONS_VISUALLY_COMPLETE")}});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/web/sessions/EUMSessionDetailsControllerBase",["require","exports","app/view/eum/EUMControllerBase","app/view/eum/common/waterfall/WaterfallDirectiveDefinitions"],function(require,exports,EUMControllerBase,WaterfallDirectiveDefinitions){var EUMSessionDetailsControllerBase=function(_super){function EUMSessionDetailsControllerBase($scope,$modalInstance,dialogData,navigationService){_super.call(this,$scope,$modalInstance),this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.navigationService=navigationService,this.globalCacheService=GlobalCacheService.instance(),this.showSessionLeftPanel=!0,this.waterfallDirectiveDataTypeKeys=[]}return __extends(EUMSessionDetailsControllerBase,_super),EUMSessionDetailsControllerBase.prototype.initWaterfallDataTypes=function(){for(var sessionWaterfallHighlightBarSequence=[],i=0;i<this.waterfallDirectiveDataTypeKeys.length;i++){var keyName=this.waterfallDirectiveDataTypeKeys[i];sessionWaterfallHighlightBarSequence.push(WaterfallDirectiveDefinitions.waterfallDirectiveDataTypes[keyName])}this.waterfallDataTypes=sessionWaterfallHighlightBarSequence},EUMSessionDetailsControllerBase.prototype.initViewState=function(){if(this.viewStateId){var viewStateFullId=this.viewStateId+".viewState";this.globalCacheService[viewStateFullId]?this.viewState=this.globalCacheService[viewStateFullId]:(this.viewState={viewOptionsColumnStates:[]},this.globalCacheService[viewStateFullId]=this.viewState)}},EUMSessionDetailsControllerBase.prototype.initializeGrid=function(){ADLoggerService.warn("EUMSessionDetailsControllerBase.initializeGrid should be overridden","Warning")},EUMSessionDetailsControllerBase.prototype.initialize=function(){var _this=this;this.isDeepLinkableDialog=!0,this.initModal().then(function(){_this.initViewState(),_this.initWaterfallDataTypes(),_this.initializeGrid(),_this.fetchData()})},EUMSessionDetailsControllerBase.prototype.onToggleLeftPanelVisibility=function(){var _this=this;this.showSessionLeftPanel=!this.showSessionLeftPanel,InjectorService.instance().$timeout()(function(){_this.$scope.$broadcast(EventConstants.UEV_LAYOUT_CHANGED)},20)},EUMSessionDetailsControllerBase.$inject=["$scope","$modalInstance","dialogData","navigationService"],EUMSessionDetailsControllerBase}(EUMControllerBase.EUMDialogControllerBase);exports.EUMSessionDetailsControllerBase=EUMSessionDetailsControllerBase});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/common/waterfall/WaterfallDirectiveController",["require","exports","./WaterfallDirectiveDefinitions"],function(require,exports,WaterfallDirectiveDefinitions){{var SORT_BY_OPTIONS;!function(){function WaterfallElementSequence(){}return WaterfallElementSequence}()}!function(SORT_BY_OPTIONS){SORT_BY_OPTIONS[SORT_BY_OPTIONS.START_TIME=0]="START_TIME",SORT_BY_OPTIONS[SORT_BY_OPTIONS.DURATION=1]="DURATION"}(SORT_BY_OPTIONS||(SORT_BY_OPTIONS={}));var WaterfallDirectiveController=function(_super){function WaterfallDirectiveController($scope,$timeout,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$timeout=$timeout,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.waterfallSearchStr="",this.pageSearchStr="",this.waterfallSearchResultsCount=0,this.labelWidth=300,this.tooltipHeight=200,this.minWaterfallElementWidth=3,this.arrowSize=10,this.markerSequences=[],this.selectedTab=0,this.sortByOptions=[{name:"Start Time",value:0..toString()},{name:"Duration",value:1..toString()}],this.selectedSortBy=this.sortByOptions[0],this.svgXAxisHighlightBarHeight=0,this.backgroundBarHeight=36,this.contentBarHeight=30,this.backgroundBarHeightHighlight=30,this.contentBarHeightHighlight=24,this.contentBarOffset=(this.backgroundBarHeight-this.contentBarHeight)/2,this.labelTooltipTemplate=_.template("<title><%= fullUrl %></title><%= fullName %><%= errorHttpStatus %>"),this.labelTooltipTemplateIE=_.template("<%= fullUrl %><%= fullName %><%= errorHttpStatus %>"),this.timingBreakdownTemplate=_.template("<div class='ad-waterfall-tooltip-row ad-waterfall-tooltip-legend-row'><div style='background-color: <%= stackedElementColor %>' class='ad-waterfall-resource-timing-legend-color-box'></div><span style='color: #aeaeae;' class='ad-waterfall-tooltip-row-cell'><%= resourceTimingKey %></span><span class='ad-waterfall-tooltip-row-cell-legend-value'><%= resourceTimingValue %></span></div>"),$scope.controller=this;var params=new URLParams(URLUtil.path());this.applicationId=params.applicationId(),this.mobileAppId=parseInt(params.mobileApp()),this.platform=params.platform(),this.isAndroid=this.platform===MobilePlatform.ANDROID,this.setupWatchers()
}return __extends(WaterfallDirectiveController,_super),WaterfallDirectiveController.prototype.onViewDashboard=function(waterfallElement){waterfallElement&&(waterfallElement.type===WaterfallDataType.NETWORK_REQUEST&&waterfallElement.addId?EumViewService.instance().viewRequestDashboardForMobileApp(this.applicationId,this.platform,this.mobileAppId,waterfallElement.addId):waterfallElement.type===WaterfallDataType.CRASH&&waterfallElement.crashGroupName&&waterfallElement.crashGroupId&&EumViewService.instance().viewCrashGroupDashboardForMobileApp(this.applicationId,this.platform,this.mobileAppId,waterfallElement.crashGroupName,waterfallElement.crashGroupId))},WaterfallDirectiveController.prototype.onViewSnapshot=function(waterfallElement){waterfallElement&&(waterfallElement.type===WaterfallDataType.NETWORK_REQUEST&&waterfallElement.snapshotId&&waterfallElement.snapshotTimestamp?EumViewService.instance().viewMobileSnapshotDetailsForMobileApp(this.applicationId,this.platform,this.mobileAppId,waterfallElement.snapshotId,waterfallElement.snapshotTimestamp,!0):waterfallElement.type===WaterfallDataType.CRASH&&waterfallElement.crashId&&EumViewService.instance().viewCrashDetailsForMobileApp(this.applicationId,this.platform,this.mobileAppId,waterfallElement.crashId,!0))},WaterfallDirectiveController.prototype.onCopyResourceName=function(){return this.currentWaterfallElement?this.currentWaterfallElement.fullUrl?void WebUtil.copyToClipboard(this.currentWaterfallElement.fullUrl):void WebUtil.copyToClipboard(this.currentWaterfallElement.label):void 0},WaterfallDirectiveController.prototype.getLegendBgColor=function(eventName){return WaterfallDirectiveDefinitions.SignificantResourceTimingEventMarkers[eventName]?WaterfallDirectiveDefinitions.SignificantResourceTimingEventMarkers[eventName]:"#FFF"},WaterfallDirectiveController.prototype.isSignificantResourceTimingEvent=function(eventName){return WaterfallDirectiveDefinitions.SignificantResourceTimingEventMarkers[eventName]?!0:!1},WaterfallDirectiveController.prototype.createClickOutHideTooltipHandler=function(){var _this=this,tooltipContainer=$(".ads-waterfall-tooltip");!this.clickOutHideTooltipHandler&&tooltipContainer&&(this.clickOutHideTooltipHandler=$(document).mouseup(function(eventObject){if(!tooltipContainer.is(eventObject.target)&&0===tooltipContainer.has(eventObject.target).length){if(-1!=Util.get(eventObject,["target","className","baseVal"]).indexOf("ads-waterfall-bar-selected"))return void eventObject.preventDefault();_this.onContentBarMouseOut(),_this.clickOutHideTooltipHandler=null}}))},WaterfallDirectiveController.prototype.showTooltip=function(){this.createClickOutHideTooltipHandler(),this.tooltipDisplayed=!0,this.tooltip.style("opacity",1),this.tooltip.style("z-index",1e3)},WaterfallDirectiveController.prototype.hideTooltip=function(){this.tooltipDisplayed=!1,this.tooltip&&(this.tooltip.style("opacity",0),this.tooltip.style("z-index",-1))},WaterfallDirectiveController.prototype.getTimeFormat=function(){var timeFormat="";return this.waterfallData.duration/DateTimeUtil.MILLISEC_PER_SEC>=DateTimeUtil.SECONDS_PER_MIN&&(timeFormat+="%Mm"),timeFormat+="%S",this.waterfallData.duration/DateTimeUtil.MILLISEC_PER_SEC<5&&(timeFormat+=".%L"),timeFormat+="s"},WaterfallDirectiveController.prototype.onClickTooltipTab=function(tabNumber){this.selectedTab=tabNumber},WaterfallDirectiveController.prototype.showMarkerLabelsAndLines=function(){for(var _this=this,i=0;i<this.markerSequences.length;i++){var contentBar=d3.selectAll(".ads-svg-waterfall  [ad-waterfall-element-sequence='"+this.markerSequences[i].i+"']");if(contentBar){var contentBarNode=contentBar.node();if(contentBarNode){var contentBarX=contentBarNode.getBBox().x,contentBarY=contentBarNode.getBBox().y,textValue=EUMCommonGridRenderers.GRID_LARGE_NUMBER_RENDERER(this.waterfallData.elements[this.markerSequences[i].i].startTime);if(this.svgWaterfall.append("text").attr("y",contentBarY+5).attr("x",function(){return _this.markerSequences[i].i<Math.floor(_this.waterfallData.elements.length/2)?_this.labelWidth+contentBarX+5:_this.labelWidth+contentBarX-80}).attr("dy","16").attr("dx","10").attr("height",this.backgroundBarHeight).attr("width",this.labelWidth+"px").text(textValue+" ms"),WaterfallDirectiveDefinitions.SignificantResourceTimingEventMarkers[this.markerSequences[i].d.label]){this.showSignificantEventMarkerLegend=!0;{var lenY=(d3.select(".ads-svg-x-axis-highlight #ad-waterfall-highlight-bars-container").append("line").attr("x1",this.labelWidth+this.xScale.call(null,new Date(this.markerSequences[i].d.startTime).getTime())).attr("y1",0).attr("x2",this.labelWidth+this.xScale.call(null,new Date(this.markerSequences[i].d.startTime).getTime())).attr("y2",this.svgXAxisHighlightBarHeight).style("stroke",WaterfallDirectiveDefinitions.SignificantResourceTimingEventMarkers[this.markerSequences[i].d.label]).style("stroke-width","1px"),parseInt(d3.select(".ads-svg-waterfall").style("height")));d3.select(".ads-svg-waterfall > g").append("line").attr("x1",this.labelWidth+this.xScale.call(null,new Date(this.markerSequences[i].d.startTime).getTime())).attr("y1",0).attr("x2",this.labelWidth+this.xScale.call(null,new Date(this.markerSequences[i].d.startTime).getTime())).attr("y2",lenY).style("stroke",WaterfallDirectiveDefinitions.SignificantResourceTimingEventMarkers[this.markerSequences[i].d.label]).style("stroke-width","1px")}}}}}},WaterfallDirectiveController.prototype.setChartDetailsHeight=function(){if(!this.heightStyleSvgAxisHighlight){var getXAxisHighlightSearchBarOuterHeight=function(){var outerHeight=$("#ads-waterfall-chart-axis-highlight").outerHeight(!0);return outerHeight};this.heightStyleSvgAxisHighlight={height:"calc(100% - "+getXAxisHighlightSearchBarOuterHeight()+"px)"}}},WaterfallDirectiveController.prototype.setupWatchers=function(){var _this=this;this.$scope.$watch("adWaterfallDataTypes",function(){_this.waterfallDataTypes=_this.$scope.adWaterfallDataTypes}),this.$scope.$watch("adWaterfallData",function(newData,oldData){if(void 0!==newData||void 0!==oldData){var tooltip=d3.select(".ads-waterfall-tooltip");tooltip&&tooltip.style("left","0px").style("top","0px"),_this.durationSortedWaterfallElements&&(_this.durationSortedWaterfallElements=null),_this.waterfallData=newData,_this.selectedSortBy=_this.sortByOptions[0],_this.deleteWaterfallSvgs(),_this.waterfallData&&_this.waterfallData.elements.length>0?(_this.drawWaterfallDetails(!1),_this.noWaterfallElements=!1):_this.noWaterfallElements=!0}}),this.$scope.$on(EventConstants.UEV_LAYOUT_CHANGED,function(){_.throttle(function(){resizeHandler()},200)()});var resizeHandler=this.onResizeHandler.bind(this);$(window).on("resize",function(){_.throttle(function(){resizeHandler()},200)()})},WaterfallDirectiveController.prototype.onResizeHandler=function(){this.redrawWaterfall()},WaterfallDirectiveController.prototype.redrawWaterfall=function(preventRescale){this.deleteWaterfallSvgs(),this.drawWaterfallDetails(preventRescale)},WaterfallDirectiveController.prototype.onContentBarMouseOver=function(sequence){var highlightBar=d3.selectAll(".ads-svg-x-axis-highlight  [ad-waterfall-element-sequence='"+sequence+"']"),highlightBarNode=highlightBar.node(),highlightBarX=highlightBarNode.getBBox().x,contentBar=d3.selectAll(".ads-svg-waterfall  [ad-waterfall-element-sequence='"+sequence+"']"),contentBarNode=contentBar.node(),contentBarX=contentBarNode.getBBox().x,contentBarY=contentBarNode.getBBox().y;contentBar.classed("ads-waterfall-bar-selected",!0),highlightBar.classed("ads-waterfall-bar-selected",!0),this.cueLineWaterfallSvg||(this.cueLineWaterfallSvg=this.svgWaterfall.append("line"),this.cueLineWaterfallSvg.style("stroke-dasharray","1, 5")),this.cueLineHighlightSvg||(this.cueLineHighlightSvg=this.svgXAxisHighlight.append("line"),this.cueLineHighlightSvg.style("stroke-dasharray","1, 5")),this.cueLineWaterfallSvg.attr("x1",contentBarX+this.labelWidth).attr("y1",0).attr("x2",contentBarX+this.labelWidth).attr("y2",contentBarY).attr("stroke-width",1).attr("stroke","black"),this.cueLineHighlightSvg.attr("x1",highlightBarX+this.labelWidth).attr("y1",this.xAxisHeight).attr("x2",highlightBarX+this.labelWidth).attr("y2",500).attr("stroke-width",1).attr("stroke","black"),this.cueLineWaterfallSvg.style("opacity",1),this.cueLineHighlightSvg.style("opacity",1)},WaterfallDirectiveController.prototype.onContentBarMouseOut=function(){var bars=d3.selectAll(".ads-waterfall-bar-selected");bars.classed("ads-waterfall-bar-selected",!1);var breakdownBars=d3.selectAll(".ads-waterfall-breakdown-bar");breakdownBars.remove(),this.cueLineWaterfallSvg&&this.cueLineWaterfallSvg.style("opacity",0),this.cueLineHighlightSvg&&this.cueLineHighlightSvg.style("opacity",0),this.hideTooltip()},WaterfallDirectiveController.prototype.onMouseMoveDelayed=function(d,i){var _this=this;this.mousemoveTimeoutPromise&&this.$timeout.cancel(this.mousemoveTimeoutPromise),this.mousemoveTimeoutPromise=this.$timeout(function(){_this.onMouseMove(d,i)},350),this.mousemoveTimeoutPromise.then(function(){_this.mousemoveTimeoutPromise=null})},WaterfallDirectiveController.prototype.onMouseMove=function(d,i){var _this=this;this.currentWaterfallElement=d,this.tooltip||(this.tooltip=d3.select(".ads-waterfall-tooltip")),this.hideTooltip();var waterfallContentBar=d3.select(".ads-waterfall-content-bar[ad-waterfall-element-sequence='"+i+"']");if(waterfallContentBar&&waterfallContentBar.node()){var barNode=waterfallContentBar.node(),barNodeX=barNode.getBBox().x,barNodeY=barNode.getBBox().y,barNodeWidth=barNode.getBBox().width,createTooltipHTML=function(d){var totalBreakdownTime=0;if(_this.tooltipResourceTimingBreakdownLegend="",d.requestHeaders&&(_this.showRequestHeadersTab=!0),d.responseHeaders&&(_this.showResponseHeadersTab=!0),d.tooltipBreakdownData)for(var it in d.tooltipBreakdownData){var datum=d.tooltipBreakdownData[it],isDatumValueNumeric=Number(datum.value);_this.tooltipResourceTimingBreakdownLegend+=_this.timingBreakdownTemplate({resourceTimingKey:datum.name,resourceTimingValue:isDatumValueNumeric?EUMCommonGridRenderers.GRID_LARGE_NUMBER_RENDERER(datum.value)+" ms":datum.value,stackedElementColor:AdColorPalette.COLOR_PALETTE_A_20[2*it]}),isDatumValueNumeric&&(totalBreakdownTime+=Number(datum.value))}if(d.tooltipBreakdownData){var offset=0;for(var it in d.tooltipBreakdownData){var datum=d.tooltipBreakdownData[it],isDatumValueNumeric=Number(datum.value),percentage=isDatumValueNumeric?Number(datum.value)/totalBreakdownTime:0,currentWidth=percentage*barNodeWidth,color=AdColorPalette.COLOR_PALETTE_A_20[2*it];_this.svgWaterfall.append("rect").attr("transform","translate("+_this.labelWidth+",0)").attr("x",barNodeX+offset).attr("y",barNodeY).attr("height",_this.contentBarHeight).attr("width",currentWidth).attr("class","ads-waterfall-breakdown-bar").style("fill",color).on("click",function(){_this.onContentBarMouseOut()}),offset+=currentWidth}}};createTooltipHTML(d,i);var waterfallChartEl=$("#ads-waterfall-chart-details"),topOffset=waterfallChartEl.scrollTop(),offsetNumberOfBars=topOffset/this.backgroundBarHeight,displayedChartDetailsHeight=waterfallChartEl.height(),numberOfDisplayedBars=displayedChartDetailsHeight/this.backgroundBarHeight,lastDisplayedBar=offsetNumberOfBars+numberOfDisplayedBars;this.displayOnTopOfBar=i-offsetNumberOfBars>lastDisplayedBar-i;var outerArrow=d3.select("#ad-waterfall-tooltip-arrow-outer"),innerArrow=d3.select("#ad-waterfall-tooltip-arrow-inner");outerArrow.style("left",barNodeX+"px"),innerArrow.style("left",barNodeX+"px"),this.tooltip.style("left",this.labelWidth+"px").style("top",(this.displayOnTopOfBar?barNodeY-(this.tooltipHeight+this.arrowSize):barNodeY+this.contentBarHeight+this.arrowSize)+"px"),this.showTooltip()}},WaterfallDirectiveController.prototype.deleteWaterfallSvgs=function(){this.cueLineHighlightSvg&&(this.cueLineHighlightSvg=null),this.cueLineWaterfallSvg&&(this.cueLineWaterfallSvg=null),d3.select(".ads-svg-x-axis-highlight")&&d3.select(".ads-svg-x-axis-highlight").remove(),d3.select(".ads-svg-waterfall")&&d3.select(".ads-svg-waterfall").remove()},WaterfallDirectiveController.prototype.drawWaterfallDetails=function(preventRescale){var _this=this;if(!preventRescale){var lastEndTime=0;for(var iterator in this.waterfallData.elements){var currentElement=this.waterfallData.elements[iterator],endTimeForCurrentElement=currentElement.startTime+currentElement.duration;endTimeForCurrentElement>lastEndTime&&(lastEndTime=endTimeForCurrentElement)}var duration=1.05*lastEndTime;this.waterfallData={duration:duration,elements:this.waterfallData.elements}}if(this.markerSequences=[],this.waterfallData&&0!=this.waterfallData.elements.length){this.svgXAxisHighlightBarHeight=(Object.keys(this.waterfallDataTypes).length+1)*this.backgroundBarHeightHighlight+10,this.svgXAxisHighlight=d3.select("#ads-waterfall-chart-axis-highlight").append("svg").attr("class","ads-svg-x-axis-highlight").attr("width","100%").attr("height",this.svgXAxisHighlightBarHeight);var svgWaterfallHeight=this.waterfallData.elements.length*this.backgroundBarHeight;this.svgWaterfall=d3.select("#ads-waterfall-chart-details").append("svg").attr("class","ads-svg-waterfall").attr("width","100%").attr("height",svgWaterfallHeight),this.svgWaterfallWidth=+this.svgWaterfall.style("width").replace("px","");var backgroundBarsWidth=this.svgWaterfallWidth-this.labelWidth;this.xScale=d3.time.scale().domain([0,this.waterfallData.duration]).range([0,backgroundBarsWidth]);var xAxis=d3.svg.axis().scale(this.xScale).orient("top").ticks(8).tickFormat(d3.time.format(this.getTimeFormat())),xAxisGroup=this.svgXAxisHighlight.append("g");xAxisGroup.attr("class","x axis").call(xAxis);var xAxisNode=d3.select(".x.axis").node();this.xAxisHeight=xAxisNode.getBBox().height,xAxisGroup.attr("transform","translate("+this.labelWidth+","+this.xAxisHeight+")");var typeLabelsGroup=this.svgXAxisHighlight.append("g").attr("id","ad-waterfall-highlight-bars-container").attr("transform","translate(0,"+this.xAxisHeight+")").selectAll("typeLabels").data(this.waterfallDataTypes).enter();typeLabelsGroup.append("rect").attr("y",function(d,i){return i*_this.backgroundBarHeightHighlight}).attr("height",this.backgroundBarHeightHighlight).attr("width",this.labelWidth+"px").attr("class","ads-waterfall-highlight-bar-background");{typeLabelsGroup.append("text").attr("y",function(d,i){return i*_this.backgroundBarHeightHighlight}).attr("dy","20").attr("dx","10").attr("height",this.backgroundBarHeightHighlight).attr("width",this.labelWidth+"px").text(function(d){return d.name})}typeLabelsGroup.append("rect").attr("transform","translate("+this.labelWidth+",0)").attr("x",0).attr("y",function(d,i){return i*_this.backgroundBarHeightHighlight}).attr("width",backgroundBarsWidth).attr("height",this.backgroundBarHeightHighlight).attr("class","ads-waterfall-highlight-bar-background"),this.svgXAxisHighlight.append("g").attr("width","100%").attr("transform","translate("+this.labelWidth+","+this.xAxisHeight+")").attr("id","ad-highlight-bar").selectAll("highlight").data(this.waterfallData.elements).enter().append("rect").attr("x",function(d){return _this.xScale.call(null,new Date(d.startTime).getTime())}).attr("y",function(d){return WaterfallDirectiveDefinitions.WaterfallHighlightBarSequence[d.type]*_this.backgroundBarHeightHighlight}).attr("height",this.backgroundBarHeightHighlight).attr("width",function(d,i){if(d.marker)return _this.markerSequences.push({d:d,i:i}),_this.minWaterfallElementWidth;var scaledWidth=_this.xScale.call(null,new Date(d.duration).getTime());return scaledWidth<=_this.minWaterfallElementWidth?_this.minWaterfallElementWidth:scaledWidth}).attr("ad-waterfall-element-sequence",function(d,i){return i}).attr("class",function(d){return d.marker?"ads-waterfall-bar-solid":"ads-waterfall-highlight-bar"}).style("fill",function(d){return d.marker&&WaterfallDirectiveDefinitions.SignificantResourceTimingEventMarkers[d.label]?WaterfallDirectiveDefinitions.SignificantResourceTimingEventMarkers[d.label]:WaterfallDirectiveDefinitions.waterfallDirectiveDataTypes[d.type].color}).style("cursor","pointer").on("mouseover",function(d,i){var highlightBar=d3.selectAll(".ads-svg-x-axis-highlight  [ad-waterfall-element-sequence='"+i+"']");highlightBar.classed("ads-waterfall-bar-selected",!0),_this.onContentBarMouseOver(i)}).on("click",function(d,i){if(_this.tooltipDisplayed)return _this.onContentBarMouseOut(),void _this.hideTooltip();var waterfallChartEl=$("#ads-waterfall-chart-details");if(waterfallChartEl){var waterfallChartDetailsHeight=waterfallChartEl.outerHeight(!0);waterfallChartEl.scrollTop((i+4)*_this.backgroundBarHeight-waterfallChartDetailsHeight),_this.onMouseMoveDelayed(d,i)}}),this.setChartDetailsHeight(),this.svgWaterfallGroup=this.svgWaterfall.append("g").selectAll("waterfall").data(this.waterfallData.elements).enter(),this.svgWaterfallGroup.append("rect").attr("y",function(d,i){return i*_this.backgroundBarHeight}).attr("height",this.backgroundBarHeight).attr("width",this.labelWidth+"px").attr("class",function(d,i){return i%2==0?"ads-waterfall-bar-background-rect-striped-color":"ads-waterfall-bar-background-rect"});var labelSelection=this.svgWaterfallGroup.append("text").attr("y",function(d,i){return i*_this.backgroundBarHeight}).attr("dy",function(d){return d.marker?"22":"16"}).attr("dx","10").attr("height",this.backgroundBarHeight).attr("width",this.labelWidth+"px").style("fill",function(d){return d.httpStatus&&d.httpStatus>=400?AdColorPalette.COLOR_PALETTE_A20_RED:AdColorPalette.COLOR_PALETTE_A20_GRAY});BrowserUtils.isBrowserInternetExplorer11orLess()?labelSelection.text(function(d){if(!d.fullUrl)return d.label;var httpStatus=d.httpStatus>=400?" ("+d.httpStatus+")":"";return _this.labelTooltipTemplateIE({fullName:d.label,errorHttpStatus:httpStatus,fullUrl:d.fullUrl})}):labelSelection.html(function(d){if(!d.fullUrl)return d.label;var httpStatus=d.httpStatus>=400?" ("+d.httpStatus+")":"";return _this.labelTooltipTemplate({fullName:d.label,errorHttpStatus:httpStatus,fullUrl:d.fullUrl})}),labelSelection.append("tspan").attr("dy","1.2em").attr("x",function(d){return d.correlated&&d.correlationSnapshotGuid?36:d.correlated&&!d.correlationSnapshotGuid?24:10}).style("fill",AdColorPalette.COLOR_PALETTE_A20_BERMUDA_GRAY).text(function(d){return d.domain}),this.svgWaterfallGroup.append("image").attr("xlink:href",function(d){return d.correlated?ImageUtil.iconBTSnapshot:""}).attr("width",12).attr("height",12).attr("x",8).attr("y",function(d,i){return i*_this.backgroundBarHeight+20}),this.svgWaterfallGroup.append("image").attr("xlink:href",function(d){return d.correlationSnapshotGuid?ImageUtil.iconCallGraph:""}).attr("width",12).attr("height",12).attr("x",22).attr("y",function(d,i){return i*_this.backgroundBarHeight+20}).style("cursor",function(d){return d.correlationSnapshotGuid?"pointer":"auto"}).on("click",function(d){d.correlationSnapshotGuid&&SnapshotViewService.instance().viewRequestSegmentData({requestGUID:d.correlationSnapshotGuid,applicationId:_this.applicationId,serverStartTime:d.snapshotTimestamp,firstInChain:!1})}),this.svgWaterfallGroup.append("rect").attr("transform","translate("+this.labelWidth+",0)").attr("x",0).attr("y",function(d,i){return i*_this.backgroundBarHeight}).attr("height",this.backgroundBarHeight).attr("class",function(d,i){return i%2==0?"ads-waterfall-bar-background-rect-striped-color":"ads-waterfall-bar-background-rect"}).attr("width",backgroundBarsWidth),this.svgWaterfallGroup.append("rect").attr("transform","translate("+this.labelWidth+",0)").attr("x",function(d){return _this.selectedSortBy.value==1..toString()?0:_this.xScale.call(null,new Date(d.startTime).getTime())}).attr("y",function(d,i){return i*_this.backgroundBarHeight+_this.contentBarOffset}).attr("height",this.contentBarHeight).attr("width",function(d){if(d.marker)return _this.minWaterfallElementWidth;var scaledWidth=_this.xScale.call(null,new Date(d.duration).getTime());return scaledWidth<=_this.minWaterfallElementWidth?_this.minWaterfallElementWidth:scaledWidth}).attr("value",function(d){return d.type}).attr("ad-waterfall-element-sequence",function(d,i){return i}).attr("class",function(d){return d.marker?"ads-waterfall-bar-solid":"ads-waterfall-content-bar"}).style("fill",function(d){return d.marker&&WaterfallDirectiveDefinitions.SignificantResourceTimingEventMarkers[d.label]?WaterfallDirectiveDefinitions.SignificantResourceTimingEventMarkers[d.label]:WaterfallDirectiveDefinitions.waterfallDirectiveDataTypes[d.type].color}).on("mouseover",function(d,i){var bars=d3.selectAll(".ads-waterfall-bar-selected");bars.classed("ads-waterfall-bar-selected",!1),_this.onContentBarMouseOver(i)}).on("click",function(d,i){_this.tooltipDisplayed&&!d.tooltipBreakdownData?_this.onContentBarMouseOut():_this.onMouseMoveDelayed(d,i)}),this.showMarkerLabelsAndLines()}},WaterfallDirectiveController.prototype.onWaterfallSearch=function(){if(this.selectedSortBy.value==1..toString()?(null==this.durationSortedWaterfallElements&&(this.durationSortedWaterfallElements=this.sortWaterfallElementsByDuration(this.$scope.adWaterfallData.elements)),this.waterfallData={duration:this.waterfallData.duration,elements:this.durationSortedWaterfallElements}):this.waterfallData=this.$scope.adWaterfallData,this.waterfallSearchStr){for(var elements=this.waterfallData.elements,searchedElements=[],i=0;i<elements.length;i++){var label=elements[i].label?elements[i].label:"",domain=elements[i].domain?elements[i].domain:"";(-1!=label.search(this.waterfallSearchStr)||-1!=domain.search(this.waterfallSearchStr))&&searchedElements.push(elements[i])}this.waterfallSearchResultsCount=searchedElements.length;var newSearchedElementsWaterfallDataObj={duration:this.waterfallData.duration,elements:searchedElements};this.waterfallData=newSearchedElementsWaterfallDataObj}this.redrawWaterfall()},WaterfallDirectiveController.prototype.onWaterfallSearchDelayed=function(){var _this=this;this.searchTermEntered&&this.$timeout.cancel(this.searchTermEntered),this.searchTermEntered=this.$timeout(function(){_this.onWaterfallSearch()},350),this.searchTermEntered.then(function(){_this.searchTermEntered=null})},WaterfallDirectiveController.prototype.onWaterfallSort=function(){if(this.selectedSortBy.value==1..toString()){var sortedCopy=this.sortWaterfallElementsByDuration(this.waterfallData.elements);this.waterfallData={duration:this.waterfallData.duration,elements:sortedCopy}}else this.selectedSortBy.value==0..toString()&&(this.waterfallData={duration:this.waterfallData.duration,elements:this.sortWaterfallElementsByStartTime(this.waterfallData.elements)});this.redrawWaterfall(!0)},WaterfallDirectiveController.prototype.sortWaterfallElementsByDuration=function(toSort){var sortedCopy=toSort.slice(0);return sortedCopy.sort(function(a,b){return b.duration-a.duration}),sortedCopy},WaterfallDirectiveController.prototype.sortWaterfallElementsByStartTime=function(toSort){var sortedCopy=toSort.slice(0);return sortedCopy.sort(function(a,b){return a.startTime-b.startTime}),sortedCopy},WaterfallDirectiveController.EUM_WEB_DASHBOARD_VERSION=0,WaterfallDirectiveController.$inject=["$scope","$timeout","resourceManager","notificationService","injectorService"],WaterfallDirectiveController}(ControllerBase);exports.WaterfallDirectiveController=WaterfallDirectiveController,appdynamicsModule.controller("WaterfallDirectiveController",WaterfallDirectiveController)}),define("app/view/eum/common/waterfall/WaterfallDirective",["require","exports","./WaterfallDirectiveController"],function(require,exports,WaterfallDirectiveController){var WaterfallDirective=function(){function WaterfallDirective(){return{restrict:"E",replace:!0,scope:{adWaterfallDataTypes:"=",adWaterfallData:"=",adWaterfallMarkers:"="},templateUrl:"app/view/eum/common/waterfall/WaterfallView.html",controller:WaterfallDirectiveController.WaterfallDirectiveController}}return WaterfallDirective}();return appdynamicsModule.directive(StringUtils.toCamelCase("ad-waterfall-chart"),WaterfallDirective),WaterfallDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("lib/controller/services/eum/common/EumSessionsUiService",["require","exports"],function(){var EumSessionsUiService=function(_super){function EumSessionsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(EumSessionsUiService,_super),EumSessionsUiService.instance=function(){return AngularUtil.getADInjector().get("eumSessionsUiService")},EumSessionsUiService.prototype.getMobileSession=function(applicationId,mobileAppId,sessionId){var path="restui/eumSessionsUiService/getMobileSession/"+applicationId+"/"+mobileAppId+"/"+sessionId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumSessionsUiService","getMobileSession",path,[applicationId,mobileAppId,sessionId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumSessionsUiService.prototype.getMobileSession_response=function(response){return response},EumSessionsUiService.prototype.getWebViewData=function(applicationId){var path="restui/eumSessionsUiService/getWebViewData?applicationId="+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumSessionsUiService","getWebViewData",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},EumSessionsUiService.prototype.getWebViewData_response=function(response){return response},EumSessionsUiService.prototype.getScriptOutput=function(applicationId,measurementId){var path="restui/eumSessionsUiService/getSyntheticScriptOutput/"+applicationId+"/"+measurementId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumSessionsUiService","getScriptOutput",path,[applicationId,measurementId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumSessionsUiService.prototype.getScriptOutput_response=function(response){return response},EumSessionsUiService.prototype.getSyntheticSessionDetails=function(applicationId,synthMeasurementId){var path="restui/eumSessionsUiService/getSyntheticSessionDetails/"+applicationId+"/"+synthMeasurementId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumSessionsUiService","getSyntheticSessionDetails",path,[applicationId,synthMeasurementId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumSessionsUiService.prototype.getSyntheticSessionDetails_response=function(response){return response},EumSessionsUiService.prototype.getWebSessionDetails=function(applicationId,sessionId){var path="restui/eumSessionsUiService/getWebSessionDetails/"+applicationId+"/"+sessionId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumSessionsUiService","getWebSessionDetails",path,[applicationId,sessionId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumSessionsUiService.prototype.getWebSessionDetails_response=function(response){return response},EumSessionsUiService.prototype.getPageViewDetailsForSynthetic=function(browserRecordGuid,resourceTimingDescriptor,applicationId){var path="restui/eumSessionsUiService/getPageViewTimelineForSynthetic/"+browserRecordGuid+"/"+resourceTimingDescriptor+"/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumSessionsUiService","getPageViewDetailsForSynthetic",path,[browserRecordGuid,resourceTimingDescriptor,applicationId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumSessionsUiService.prototype.getPageViewDetailsForSynthetic_response=function(response){return response},EumSessionsUiService.prototype.getPageViewDetails=function(arg0){var path="restui/eumSessionsUiService/getPageViewTimeline",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumSessionsUiService","getPageViewDetails",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumSessionsUiService.prototype.getPageViewDetails_response=function(response){return response},EumSessionsUiService.prototype.describe=function(){var path="restui/eumSessionsUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumSessionsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumSessionsUiService.prototype.describe_response=function(response){return response},EumSessionsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],EumSessionsUiService}(ControllerUiServiceBase);return appdynamicsModule.service("eumSessionsUiService",EumSessionsUiService),EumSessionsUiService});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/web/browserSnapshot/details/BrowserSnapshotDetailsController",["require","exports","app/view/eum/EUMControllerBase","app/services/QuestStateService","app/view/home/quests/QuestConstants"],function(require,exports,EUMControllerBase,QuestStateService,QuestConstants){var BrowserSnapshotDetailsController=function(_super){function BrowserSnapshotDetailsController($scope,$location,$timeout,$modalInstance,resourceManager,notificationService,timeRangeService,injectorService,applicationViewService,eumViewService,businessTransactionViewService,nodeViewService,componentViewService,snapshotViewService,browserSnapshotDetailsService,appConfig,dialogData){var _this=this;_super.call(this,$scope,$modalInstance),this.$scope=$scope,this.$location=$location,this.$timeout=$timeout,this.$modalInstance=$modalInstance,this.resourceManager=resourceManager,this.notificationService=notificationService,this.timeRangeService=timeRangeService,this.injectorService=injectorService,this.applicationViewService=applicationViewService,this.eumViewService=eumViewService,this.businessTransactionViewService=businessTransactionViewService,this.nodeViewService=nodeViewService,this.componentViewService=componentViewService,this.snapshotViewService=snapshotViewService,this.browserSnapshotDetailsService=browserSnapshotDetailsService,this.appConfig=appConfig,this.dialogData=dialogData,this.helpLink=ExternalUrls.HELP_URL_EUM_PAGE_DASHBOARD,this.noDataAvailable=!0,this.showLoading=!0,this.resourceDataAvailable=!1,this.resourceViewRendered=!1,this.showServerSide=!1,this.showErrors=!1,this.showRelatedSnapshots=!1,this.isSyntheticSnapshot=!1,this.isErrorSnapshot=!1,this.hasWaterfall=!1,this.btGridHeight={height:"100px"},this.relatedSnapshotGridHeight={height:"100px"},this.btSnapshotGridHeight={height:"100px"},this.errorGridHeight={height:"100px"},this.gridIconColWidth=40,this.featureService=FeatureService.instance(),this.tabs={SUMMARY:"PAGE_SUMMARY",RESOURCE_DETAILS:"RESOURCE_DETAILS"},this.selectedTab=this.tabs.SUMMARY,$scope.controller=this,this.initModal().then(function(){_this.initialize()
}),ViewUtil.setContentAreaHeight($scope,$timeout,!1)}return __extends(BrowserSnapshotDetailsController,_super),BrowserSnapshotDetailsController.prototype.replaceURLForModal=function(){if(this.dialogData){var params=new URLParams;return params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_SNAPSHOT_DATA),params.setNumberParam(UrlConstants.APPLICATION_ID,this.dialogData.applicationId),params.setNumberParam(UrlConstants.EUM_BROWSER_SNAPSHOT,this.dialogData.snapshotId),params.setNumberParam(UrlConstants.EUM_SNAPSHOT_TIMESTAMP,this.dialogData.snapshotTimeStamp),QuestStateService.instance().completeQuest(QuestConstants.EUM_WEB.BROWSER_SNAPSHOT),this.setUrlLocation(params)}return this.dialogData={applicationId:URLParams.getCurrentUrlParams().getNumberParam(UrlConstants.APPLICATION_ID),snapshotId:URLParams.getCurrentUrlParams().getNumberParam(UrlConstants.EUM_BROWSER_SNAPSHOT),snapshotTimeStamp:URLParams.getCurrentUrlParams().getNumberParam(UrlConstants.EUM_SNAPSHOT_TIMESTAMP)},InjectorService.instance().$q().when()},BrowserSnapshotDetailsController.prototype.initializeProperties=function(){var urlParams=new URLParams(this.$location.path());this.snapshotId=parseInt(urlParams.snapshotId()),this.snapshotTimestamp=parseInt(urlParams.snapshotTimestamp()),this.applicationId=parseInt(urlParams.application()),this.addId=parseInt(urlParams.addId()),this.showSyntheticLaunchButton=FeatureService.instance().isSyntheticVisible(),this.initializeGrid()},BrowserSnapshotDetailsController.prototype.initializeGrid=function(){this.btGridOptions=BrowserSnapshotDetailsController.initBTGrid(this.gridIconColWidth),this.initBTSnapshotGrid(),this.initErrorGrid(),this.initRelatedSnapshotGrid()},BrowserSnapshotDetailsController.prototype.fetchViewData=function(){this.afterGetViewData()},BrowserSnapshotDetailsController.prototype.fetchData=function(){var _this=this;this.showLoading=!0,this.selectedTab!==this.tabs.RESOURCE_DETAILS&&(this.resourceViewRendered=!1),this.browserSnapshotDetailsService.getBrowserSnapshot(this.applicationId,this.snapshotId,this.snapshotTimestamp).then(function(data){_this.viewData=data,_this.showLoading=!1,data&&data.snapshotData?(_this.noDataAvailable=!1,_this.userExperienceIcon=ImageUtil.getRequestExperienceIconURL(_this.viewData.snapshotData.userExperience),_this.applicationName=_this.viewData.application.name,_this.pageIcon=_this.getPageIcon(),_this.isSyntheticSnapshot=""!=_this.viewData.snapshotData.synthMeasurementId&&null!=_this.viewData.snapshotData.synthMeasurementId,_this.snapshotTime=DateTimeUtil.getDateTimeString(_this.viewData.snapshotData.time),_this.hasWaterfall=Util.get(_this.viewData,["pageLoadWaterfallData","groups","length"])>0,!_this.viewData.snapshotData.errorOccurred||!_this.viewData.snapshotData.pageLoadError&&_this.hasWaterfall||(_this.isErrorSnapshot=!0,_this.userExperienceIcon=ImageUtil.request_error),_this.viewData.relatedBts&&_this.viewData.relatedBts.length>0&&(_this.showServerSide=!0,_this.btGridOptions.dataProvider=_this.viewData.relatedBts,_this.btSnapshotGridOptions.dataProvider=_this.viewData.relatedBTRSDs),_this.viewData.snapshotData.resourceTimingSnapshotDescriptor&&_this.viewData.snapshotData.resourceTimingSnapshotDescriptor.guid&&(_this.resourceDataAvailable=!0),_this.viewData.errorEventData&&_this.viewData.errorEventData.length>0&&(_this.showErrors=!0,_this.errorGridOptions.dataProvider=_this.viewData.errorEventData),_this.viewData.relatedSnapshots&&_this.viewData.relatedSnapshots.length>0&&(_this.showRelatedSnapshots=!0,_this.relatedSnapshotGridOptions.dataProvider=_this.viewData.relatedSnapshots),_this.updateLayout()):_this.noDataAvailable=!0},function(){_this.viewData=void 0,_this.showLoading=!1,_this.noDataAvailable=!0,_this.notificationService.displayError("","Data for this page could not be retrieved")})},BrowserSnapshotDetailsController.prototype.deepLinkedModalClosedHandler=function(){EumViewService.instance().viewWebBrowserSnapshotList(this.applicationId)},BrowserSnapshotDetailsController.prototype.getPageIcon=function(){return"object"==typeof this.viewData?this.getSmallPageIcon(this.viewData.pageType):""},BrowserSnapshotDetailsController.prototype.getSmallPageIcon=function(page){if(page){if("AJAX_REQUEST"===page||"AJAX"===page)return"images/eum/eum_ajax.svg";if("BASE_PAGE"===page||"Base Page"===page)return"images/eum/eum_page.svg";if("IFRAME"===page||"IFrame"===page)return"images/eum/eum_iframe.svg";if("VIRTUAL_PAGE"===page||"Virtual Page"===page)return"images/eum/eum_vpage.svg"}return""},BrowserSnapshotDetailsController.prototype.getValueOrDash=function(metric){return"object"!=typeof metric||-1==metric.value?"—":""+metric.value},BrowserSnapshotDetailsController.prototype.onViewSummary=function(){this.selectedTab=this.tabs.SUMMARY},BrowserSnapshotDetailsController.prototype.onViewResourceDetails=function(){this.viewData.resourceWaterfallData&&this.viewData.resourceWaterfallData.length>0?(this.selectedTab=this.tabs.RESOURCE_DETAILS,this.resourceViewRendered=!0):this.notificationService.displayError("The resource timing data was corrupt or could not be downloaded for this snapshot.","Cannot Show Resource Details")},BrowserSnapshotDetailsController.prototype.goToSyntheticLaunch=function(){this.eumViewService.viewSyntheticLaunch(this.applicationId,this.viewData.snapshotData.pageUrl)},BrowserSnapshotDetailsController.prototype.goToSchedule=function(scheduleId){this.eumViewService.editSyntheticSchedule(this.applicationId,scheduleId)},BrowserSnapshotDetailsController.prototype.viewRelatedSessionDetails=function(){this.eumViewService.viewRelatedWebSessionDetails(this.viewData.sessionGuid,this.applicationId)},BrowserSnapshotDetailsController.prototype.gridClickGoToBT=function(event){var bt=event.data;this.goToBT(bt.applicationId,bt.btId)},BrowserSnapshotDetailsController.prototype.gridClickGoToBTSnapshot=function(event){var snapshot=event.data;this.snapshotViewService.viewRequestSegmentDataByGuid(snapshot.requestGUID,snapshot.applicationId)},BrowserSnapshotDetailsController.prototype.gridClickGoToSnapshot=function(event){var snapshot=event.data;this.eumViewService.viewBrowserSnapshot(this.applicationId,snapshot.id,snapshot.time.getTime())},BrowserSnapshotDetailsController.renderBTName=function(bt){return"<a href='' ng-click='$parent.$parent.controller.goToBT("+bt.applicationId+","+bt.btId+")'>"+bt.name+"</a>"},BrowserSnapshotDetailsController.prototype.renderRequestBTName=function(rsd){return"<a href='' ng-click='controller.goToBT("+rsd.applicationId+","+rsd.businessTransactionId+")'>"+rsd.businessTransactionName+"</a>"},BrowserSnapshotDetailsController.prototype.renderNode=function(snapshot){return"<a href='' ng-click='controller.goToNode("+snapshot.applicationId+","+snapshot.applicationComponentNodeId+")'>"+snapshot.applicationComponentNodeName+"</a>"},BrowserSnapshotDetailsController.prototype.renderTier=function(snapshot){return"<a href='' ng-click='controller.goToTier("+snapshot.applicationId+","+snapshot.applicationComponentId+")'>"+snapshot.applicationComponentName+"</a>"},BrowserSnapshotDetailsController.prototype.goToBT=function(btAppId,btId){this.businessTransactionViewService.viewBusinessTransaction(btAppId,btId)},BrowserSnapshotDetailsController.prototype.goToNode=function(snapshotAppId,nodeId){this.nodeViewService.viewNode(snapshotAppId,nodeId)},BrowserSnapshotDetailsController.prototype.goToTier=function(snapshotAppId,tierId){this.componentViewService.viewComponent(snapshotAppId,tierId)},BrowserSnapshotDetailsController.prototype.goToPage=function(addId){this.eumViewService.viewPageDashboardForAddId(this.applicationId,addId)},BrowserSnapshotDetailsController.prototype.goToSnapshot=function(snapshotId,timestamp){this.eumViewService.viewBrowserSnapshot(this.applicationId,snapshotId,timestamp)},BrowserSnapshotDetailsController.prototype.renderSnapshotPageName=function(snapshot){return"<img class='adsSvgIconSmall' src='"+this.getSmallPageIcon(snapshot.pageType)+"'><a style='padding-left: 3px;' href='' ng-click='controller.goToPage("+snapshot.pageAddId+")'>"+snapshot.pageName+"</a>"},BrowserSnapshotDetailsController.prototype.initBTSnapshotGrid=function(){var _this=this,columnConfig=[{flex:0,width:this.gridIconColWidth,dataIndex:"userExperience",header:"",tooltip:"User Experience",hidden:!1,sortable:!0,filter:null,renderer:EUMCommonGridRenderers.EXPERIENCE_RENDERER},{flex:0,width:this.gridIconColWidth,dataIndex:"errorOccurred",header:"",tooltip:"Error Occurred",hidden:!1,sortable:!0,filter:null,renderer:EUMCommonGridRenderers.ERROR_RENDERER},{flex:0,width:this.gridIconColWidth,dataIndex:"fullCallgraph",header:"",tooltip:this.getString("ms_hasFullPartialCallGraph"),hidden:!1,sortable:!0,filter:null,renderer:EUMCommonGridRenderers.RSD_LIST_ITEM_CALL_GRAPH_RENDERER},{flex:0,width:164,dataIndex:"serverStartTime",header:this.getString("ms_time"),hidden:!1,sortable:!0,filter:null,renderer:EUMCommonGridRenderers.DATE_RENDERER},{flex:0,width:80,dataIndex:"timeTakenInMilliSecs",header:"Exe Time (ms)",hidden:!1,sortable:!0,filter:null},{flex:50,width:180,dataIndex:"url",header:"URL",hidden:!1,sortable:!0,filter:null},{flex:0,width:24,dataIndex:"businessTransactionId",header:"",hidden:!0,sortable:!0,filter:null},{flex:50,width:180,dataIndex:"businessTransactionName",header:this.getString("ms_businessTransaction"),hidden:!1,sortable:!0,filter:null,renderer:function(value,metaData,record){return _this.renderRequestBTName(record.data)}},{flex:0,width:120,dataIndex:"applicationComponentName",header:this.getString("ms_tier"),hidden:!1,sortable:!0,filter:null,renderer:function(value,metaData,record){return _this.renderTier(record.data)}},{flex:0,width:120,dataIndex:"applicationComponentNodeName",header:this.getString("ms_node"),hidden:!1,sortable:!0,filter:null,renderer:function(value,metaData,record){return _this.renderNode(record.data)}},{flex:0,width:this.gridIconColWidth,dataIndex:"archived",header:"",tooltip:"Archived",hidden:!1,sortable:!0,filter:null,renderer:EUMCommonGridRenderers.ARCHIVED_RENDERER},{flex:0,width:24,dataIndex:"hotSpotCallGraph",header:"",hidden:!0,sortable:!0,filter:null},{flex:0,width:24,dataIndex:"delayedCallGraph",header:"",hidden:!0,sortable:!0,filter:null},{flex:0,width:24,dataIndex:"applicationComponentId",header:"",hidden:!0,sortable:!0,filter:null},{flex:0,width:24,dataIndex:"applicationComponentNodeId",header:"",hidden:!0,sortable:!0,filter:null},{flex:0,width:24,dataIndex:"requestGUID",header:"",hidden:!0,sortable:!0,filter:null},{flex:0,width:24,dataIndex:"applicationId",header:"",hidden:!0,sortable:!0,filter:null}],columns=[];for(var index in columnConfig){var settings=columnConfig[index];columns.push(new GridColumn({flex:settings.flex,align:"left",width:settings.width,dataIndex:settings.dataIndex,dataIndexMapping:"",hidden:settings.hidden,header:settings.header,draggable:!1,menuDisabled:!0,sortable:settings.sortable,tooltip:settings.tooltip,type:"any",filter:settings.filter,renderer:settings.renderer}))}var gridOptions=new GridOptions;gridOptions.compileRenderers=!0,gridOptions.rendererController=this,gridOptions.dataProvider=[],gridOptions.updateFilter=function(){},gridOptions.columnProvider=columns,gridOptions.sortFields=[{property:"serverStartTime",direction:"ASC"}],gridOptions.emptyText="No Related Transaction Snapshots Found",this.btSnapshotGridOptions=gridOptions},BrowserSnapshotDetailsController.initBTGrid=function(btGridIconColWidth){var columnConfig={columns:[{flex:0,width:btGridIconColWidth,dataIndex:"entryPointType",header:"",tooltip:"Type",hidden:!1,sortable:!0,filter:null,renderer:EUMCommonGridRenderers.BT_ICON_RENDERER},{flex:100,width:150,dataIndex:"name",header:"Name",hidden:!1,sortable:!0,filter:null,renderer:function(name,metaData,record){return BrowserSnapshotDetailsController.renderBTName(record.data)}},{flex:0,width:100,dataIndex:"time",header:"Time (ms)",hidden:!1,sortable:!0,filter:null,renderer:EUMCommonGridRenderers.METRIC_TIME_RENDERER},{flex:0,width:24,dataIndex:"btId",header:"",hidden:!0,sortable:!0,filter:null},{flex:0,width:24,dataIndex:"applicationId",header:"",hidden:!0,sortable:!0,filter:null}]},columns=[];for(var index in columnConfig.columns){var settings=columnConfig.columns[index];columns.push(new GridColumn({flex:settings.flex,align:"left",width:settings.width,dataIndex:settings.dataIndex,dataIndexMapping:"",hidden:settings.hidden,header:settings.header,draggable:!1,menuDisabled:!0,sortable:settings.sortable,filter:settings.filter,tooltip:"",type:"any",renderer:settings.renderer}))}var gridOptions=new GridOptions;return gridOptions.compileRenderers=!0,gridOptions.dataProvider=[],gridOptions.updateFilter=function(){},gridOptions.columnProvider=columns,gridOptions.sortFields=[{property:"name",direction:"ASC"}],gridOptions.emptyText="No Related Business Transactions Found",gridOptions},BrowserSnapshotDetailsController.prototype.initErrorGrid=function(){var columnConfig={columns:[{flex:40,width:200,dataIndex:"scriptOrigin",header:"Script Origin",hidden:!1,sortable:!0,filter:null},{flex:0,width:60,dataIndex:"lineNumber",header:"Line #",hidden:!1,sortable:!0,filter:null},{flex:60,width:200,dataIndex:"message",header:"Message",hidden:!1,sortable:!0,filter:null}]},columns=[];for(var index in columnConfig.columns){var settings=columnConfig.columns[index];columns.push(new GridColumn({flex:settings.flex,align:"left",width:settings.width,dataIndex:settings.dataIndex,dataIndexMapping:"",hidden:settings.hidden,header:settings.header,draggable:!1,menuDisabled:!0,sortable:settings.sortable,filter:settings.filter,tooltip:"",type:"any",renderer:settings.renderer}))}var gridOptions=new GridOptions;gridOptions.compileRenderers=!0,gridOptions.dataProvider=[],gridOptions.updateFilter=function(){},gridOptions.columnProvider=columns,gridOptions.emptyText="No JavaScript Errors",this.errorGridOptions=gridOptions},BrowserSnapshotDetailsController.prototype.frontEndTimeRenderer=function(v,meta,record){if("AJAX"===record.data.pageType){var ajaxCallbackExecutionTime=record.raw.ajaxCallbackExecutionTime,ajaxResponseDownloadTime=record.raw.ajaxResponseDownloadTime;return EUMCommonGridRenderers.METRIC_TIME_RENDERER(ajaxCallbackExecutionTime+ajaxResponseDownloadTime)}return EUMCommonGridRenderers.METRIC_TIME_RENDERER(v)},BrowserSnapshotDetailsController.prototype.errorRenderer=function(v,meta,record){return record.data.errorOccurred?record.raw.ajaxError?record.raw.ajaxError.status:record.raw.pageError?record.raw.pageError:"Unkown Error":""},BrowserSnapshotDetailsController.prototype.initRelatedSnapshotGrid=function(){var _this=this,columnConfig=[{flex:0,width:this.gridIconColWidth,dataIndex:"userExperience",header:"",tooltip:"User Experience",hidden:!1,sortable:!0,filter:null,renderer:EUMCommonGridRenderers.EXPERIENCE_RENDERER},{flex:0,width:this.gridIconColWidth,dataIndex:"errorOccurred",header:"",tooltip:"Error Occurred",hidden:!1,sortable:!0,filter:null,renderer:EUMCommonGridRenderers.ERROR_RENDERER},{flex:0,width:this.gridIconColWidth,dataIndex:"serverSnapshotCg",header:"",tooltip:this.getString("ms_hasServerSnapshot"),hidden:!1,sortable:!0,filter:null,renderer:EUMCommonGridRenderers.BROWSER_SNAPSHOT_CALL_GRAPH_RENDERER},{flex:0,width:164,dataIndex:"time",header:this.getString("ms_time"),hidden:!1,sortable:!0,filter:null,renderer:EUMCommonGridRenderers.DATE_RENDERER},{flex:0,width:100,dataIndex:"responseTime",header:this.getString("ms_RUM_PAGE_LOAD_TIME_LONG"),hidden:!1,sortable:!0,align:"right",filter:null,renderer:EUMCommonGridRenderers.METRIC_TIME_RENDERER},{flex:0,width:100,dataIndex:"firstByteTime",header:this.getString("ms_RUM_FIRST_BYTE_TIME_LONG"),hidden:!1,sortable:!0,align:"right",filter:null,renderer:EUMCommonGridRenderers.METRIC_TIME_RENDERER},{flex:0,width:100,dataIndex:"frontEndTime",header:this.getString("ms_RUM_FRONT_END_TIME_LONG"),hidden:!1,sortable:!0,align:"right",filter:null,renderer:this.frontEndTimeRenderer},{flex:0,width:150,dataIndex:"documentReadyTime",header:this.getString("ms_RUM_DOCUMENT_READY_TIME_LONG"),hidden:!1,sortable:!0,align:"right",filter:null,renderer:EUMCommonGridRenderers.METRIC_TIME_RENDERER},{flex:50,width:180,dataIndex:"pageName",header:this.getString("ms_pageIframeAjaxOrVirtualPage"),hidden:!1,sortable:!0,filter:null,renderer:function(pageName,metaData,record){return _this.renderSnapshotPageName(record.data)}},{flex:0,width:80,dataIndex:"pageType",header:"Page Type",hidden:!1,sortable:!0,filter:null},{flex:0,width:80,dataIndex:"errorOccurred",header:"Error",hidden:!1,sortable:!0,filter:null,renderer:this.errorRenderer},{flex:0,width:0,dataIndex:"pageAddId",header:"",hidden:!0,sortable:!0,filter:null},{flex:0,width:0,dataIndex:"id",header:"",hidden:!0,sortable:!0,filter:null}],columns=[];for(var index in columnConfig){var settings=columnConfig[index];columns.push(new GridColumn({flex:settings.flex,align:settings.align||"left",width:settings.width,dataIndex:settings.dataIndex,dataIndexMapping:"",hidden:settings.hidden,header:settings.header,draggable:!1,menuDisabled:!0,sortable:settings.sortable,tooltip:settings.tooltip,type:"any",filter:settings.filter,renderer:settings.renderer}))}var gridOptions=new GridOptions;gridOptions.compileRenderers=!0,gridOptions.rendererController=this,gridOptions.dataProvider=[],gridOptions.updateFilter=function(){},gridOptions.columnProvider=columns,gridOptions.sortFields=[{property:"time",direction:"ASC"}],gridOptions.emptyText="No Related Snapshots Found",this.relatedSnapshotGridOptions=gridOptions},BrowserSnapshotDetailsController.prototype.updateLayout=function(){var _this=this,rowHeight=38,headerRowHeight=20,btGridHeight=rowHeight*this.btGridOptions.dataProvider.length+3*headerRowHeight;100>btGridHeight&&(btGridHeight=100),this.btGridHeight.height=btGridHeight+"px";var relatedSnapshotGridHeight=rowHeight*this.relatedSnapshotGridOptions.dataProvider.length+3*headerRowHeight;100>relatedSnapshotGridHeight&&(relatedSnapshotGridHeight=100),this.relatedSnapshotGridHeight.height=relatedSnapshotGridHeight+"px";var btSnapshotGridHeight=rowHeight*this.btSnapshotGridOptions.dataProvider.length+3*headerRowHeight;100>btSnapshotGridHeight&&(btSnapshotGridHeight=100),this.btGridHeight.height=btSnapshotGridHeight+"px";var errorGridHeight=rowHeight*this.errorGridOptions.dataProvider.length+2*headerRowHeight;100>errorGridHeight&&(errorGridHeight=100),this.errorGridHeight.height=errorGridHeight+"px",window.setTimeout(function(){_this.$scope.$broadcast("layoutChanged")},1)},BrowserSnapshotDetailsController.$inject=["$scope","$location","$timeout","$modalInstance","resourceManager","notificationService","timeRangeService","injectorService","applicationViewService","eumViewService","businessTransactionViewService","nodeViewService","componentViewService","snapshotViewService","browserSnapshotDetailsService","AppConfig","dialogData"],BrowserSnapshotDetailsController}(EUMControllerBase.EUMDialogControllerBase);exports.BrowserSnapshotDetailsController=BrowserSnapshotDetailsController,appdynamicsModule.controller("BrowserSnapshotDetailsController",BrowserSnapshotDetailsController)}),!function(){function n(n,t){return t>n?-1:n>t?1:n>=t?0:0/0}function t(n){return null!=n&&!isNaN(n)}function e(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function r(n){return n.length}function u(n){for(var t=1;n*t%1;)t*=10;return t}function i(n,t){try{for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}catch(r){n.prototype=t}}function o(){}function a(n){return ia+n in this}function c(n){return n=ia+n,n in this&&delete this[n]}function s(){var n=[];return this.forEach(function(t){n.push(t)}),n}function l(){var n=0;for(var t in this)t.charCodeAt(0)===oa&&++n;return n}function f(){for(var n in this)if(n.charCodeAt(0)===oa)return!1;return!0}function h(){}function g(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function p(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var e=0,r=aa.length;r>e;++e){var u=aa[e]+t;if(u in n)return u}}function v(){}function d(){}function m(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new o;return t.on=function(t,u){var i,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function y(){Zo.event.preventDefault()}function x(){for(var n,t=Zo.event;n=t.sourceEvent;)t=n;return t}function M(n){for(var t=new d,e=0,r=arguments.length;++e<r;)t[arguments[e]]=m(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=Zo.event;u.target=n,Zo.event=u,t[u.type].apply(e,r)}finally{Zo.event=i}}},t}function _(n){return sa(n,pa),n}function b(n){return"function"==typeof n?n:function(){return la(n,this)}}function w(n){return"function"==typeof n?n:function(){return fa(n,this)}}function S(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=Zo.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?i:u}function k(n){return n.trim().replace(/\s+/g," ")}function E(n){return new RegExp("(?:^|\\s+)"+Zo.requote(n)+"(?:\\s+|$)","g")}function A(n){return(n+"").trim().split(/^|\s+/)}function C(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=A(n).map(N);var u=n.length;return"function"==typeof t?r:e}function N(n){var t=E(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||e.setAttribute("class",k(u+" "+n))):e.setAttribute("class",k(u.replace(t," ")))}}function z(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?i:u}function L(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?u:r}function T(n){return"function"==typeof n?n:(n=Zo.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,n)}}function q(n){return{__data__:n}}function R(n){return function(){return ga(this,n)}}function D(t){return arguments.length||(t=n),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function P(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],o=0,a=i.length;a>o;o++)(u=i[o])&&t(u,o,e);return n}function U(n){return sa(n,da),n}function j(n){var t,e;return function(r,u,i){var o,a=n[i].update,c=a.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(o=a[t])&&++t<c;);return o}}function H(){var n=this.__transition__;n&&++n.active}function F(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function u(){var u=c(t,Xo(arguments));r.call(this),this.addEventListener(n,this[o]=u,u.$=e),u._=t}function i(){var t,e=new RegExp("^__on([^.]+)"+Zo.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),c=O;a>0&&(n=n.substring(0,a));var s=ya.get(n);return s&&(n=s,c=Y),a?t?u:r:t?v:i}function O(n,t){return function(e){var r=Zo.event;Zo.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{Zo.event=r}}}function Y(n,t){var e=O(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function I(){var n=".dragsuppress-"+ ++Ma,t="click"+n,e=Zo.select(Wo).on("touchmove"+n,y).on("dragstart"+n,y).on("selectstart"+n,y);if(xa){var r=Bo.style,u=r[xa];r[xa]="none"}return function(i){function o(){e.on(t,null)}e.on(n,null),xa&&(r[xa]=u),i&&(e.on(t,function(){y(),o()},!0),setTimeout(o,0))}}function Z(n,t){t.changedTouches&&(t=t.changedTouches[0]);var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();if(0>_a&&(Wo.scrollX||Wo.scrollY)){e=Zo.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var u=e[0][0].getScreenCTM();_a=!(u.f||u.e),e.remove()}return _a?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}function V(){return Zo.event.changedTouches[0].identifier}function X(){return Zo.event.target}function $(){return Wo}function B(n){return n>0?1:0>n?-1:0}function W(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function J(n){return n>1?0:-1>n?ba:Math.acos(n)}function G(n){return n>1?Sa:-1>n?-Sa:Math.asin(n)}function K(n){return((n=Math.exp(n))-1/n)/2}function Q(n){return((n=Math.exp(n))+1/n)/2}function nt(n){return((n=Math.exp(2*n))-1)/(n+1)}function tt(n){return(n=Math.sin(n/2))*n}function et(){}function rt(n,t,e){return this instanceof rt?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof rt?new rt(n.h,n.s,n.l):mt(""+n,yt,rt):new rt(n,t,e)}function ut(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(o-i)*n/60:180>n?o:240>n?i+(o-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+t):e+t-e*t,i=2*e-o,new gt(u(n+120),u(n),u(n-120))}function it(n,t,e){return this instanceof it?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof it?new it(n.h,n.c,n.l):n instanceof at?st(n.l,n.a,n.b):st((n=xt((n=Zo.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new it(n,t,e)}function ot(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new at(e,Math.cos(n*=Aa)*t,Math.sin(n)*t)}function at(n,t,e){return this instanceof at?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof at?new at(n.l,n.a,n.b):n instanceof it?ot(n.l,n.c,n.h):xt((n=gt(n)).r,n.g,n.b):new at(n,t,e)}function ct(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=lt(u)*ja,r=lt(r)*Ha,i=lt(i)*Fa,new gt(ht(3.2404542*u-1.5371385*r-.4985314*i),ht(-.969266*u+1.8760108*r+.041556*i),ht(.0556434*u-.2040259*r+1.0572252*i))}function st(n,t,e){return n>0?new it(Math.atan2(e,t)*Ca,Math.sqrt(t*t+e*e),n):new it(0/0,0/0,n)}function lt(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function ft(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function ht(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function gt(n,t,e){return this instanceof gt?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof gt?new gt(n.r,n.g,n.b):mt(""+n,gt,ut):new gt(n,t,e)}function pt(n){return new gt(n>>16,n>>8&255,255&n)}function vt(n){return pt(n)+""}function dt(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function mt(n,t,e){var r,u,i,o=0,a=0,c=0;if(r=/([a-z]+)\((.*)\)/i.exec(n))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(_t(u[0]),_t(u[1]),_t(u[2]))}return(i=Ia.get(n))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.substring(1),16))||(4===n.length?(o=(3840&i)>>4,o=o>>4|o,a=240&i,a=a>>4|a,c=15&i,c=c<<4|c):7===n.length&&(o=(16711680&i)>>16,a=(65280&i)>>8,c=255&i)),t(o,a,c))}function yt(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-i,c=(o+i)/2;return a?(u=.5>c?a/(o+i):a/(2-o-i),r=n==o?(t-e)/a+(e>t?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=0/0,u=c>0&&1>c?0:r),new rt(r,u,c)}function xt(n,t,e){n=Mt(n),t=Mt(t),e=Mt(e);var r=ft((.4124564*n+.3575761*t+.1804375*e)/ja),u=ft((.2126729*n+.7151522*t+.072175*e)/Ha),i=ft((.0193339*n+.119192*t+.9503041*e)/Fa);return at(116*u-16,500*(r-u),200*(u-i))}function Mt(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function _t(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function bt(n){return"function"==typeof n?n:function(){return n}}function wt(n){return n}function St(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),kt(t,e,n,r)}}function kt(n,t,e,r){function u(){var n,t=c.status;if(!t&&c.responseText||t>=200&&300>t||304===t){try{n=e.call(i,c)}catch(r){return void o.error.call(i,r)}o.load.call(i,n)}else o.error.call(i,c)}var i={},o=Zo.dispatch("beforesend","progress","load","error"),a={},c=new XMLHttpRequest,s=null;return!Wo.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=u:c.onreadystatechange=function(){c.readyState>3&&u()},c.onprogress=function(n){var t=Zo.event;Zo.event=n;try{o.progress.call(i,c)}finally{Zo.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(s=n,i):s},i.response=function(n){return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(Xo(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),c.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),c.setRequestHeader)for(var l in a)c.setRequestHeader(l,a[l]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=s&&(c.responseType=s),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},Zo.rebind(i,o,"on"),null==r?i:i.get(Et(r))}function Et(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function At(){var n=Ct(),t=Nt()-n;t>24?(isFinite(t)&&(clearTimeout($a),$a=setTimeout(At,t)),Xa=0):(Xa=1,Wa(At))}function Ct(){var n=Date.now();for(Ba=Za;Ba;)n>=Ba.t&&(Ba.f=Ba.c(n-Ba.t)),Ba=Ba.n;return n}function Nt(){for(var n,t=Za,e=1/0;t;)t.f?t=n?n.n=t.n:Za=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return Va=n,e}function zt(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Lt(n,t){var e=Math.pow(10,3*ua(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Tt(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r?function(n){for(var t=n.length,u=[],i=0,o=r[0];t>0&&o>0;)u.push(n.substring(t-=o,t+o)),o=r[i=(i+1)%r.length];return u.reverse().join(e)}:wt;return function(n){var e=Ga.exec(n),r=e[1]||" ",o=e[2]||">",a=e[3]||"",c=e[4]||"",s=e[5],l=+e[6],f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1;switch(h&&(h=+h.substring(1)),(s||"0"===r&&"="===o)&&(s=r="0",o="=",f&&(l-=Math.floor((l-1)/4))),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===c&&(v="0"+g.toLowerCase());case"c":case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===c&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=Ka.get(g)||qt;var y=s&&f;return function(n){var e=d;if(m&&n%1)return"";var u=0>n||0===n&&0>1/n?(n=-n,"-"):a;if(0>p){var c=Zo.formatPrefix(n,h);n=c.scale(n),e=c.symbol+d}else n*=p;n=g(n,h);var x=n.lastIndexOf("."),M=0>x?n:n.substring(0,x),_=0>x?"":t+n.substring(x+1);!s&&f&&(M=i(M));var b=v.length+M.length+_.length+(y?0:u.length),w=l>b?new Array(b=l-b+1).join(r):"";return y&&(M=i(w+M)),u+=v,n=M+_,("<"===o?u+n+w:">"===o?w+u+n:"^"===o?w.substring(0,b>>=1)+u+n+w.substring(b):u+(y?n:w+n))+e}}}function qt(n){return n+""}function Rt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])
}function Dt(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new nc(e-1)),1),e}function i(n,e){return t(n=new nc(+n),e),n}function o(n,r,i){var o=u(n),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),t(o,1);else for(;r>o;)a.push(new Date(+o)),t(o,1);return a}function a(n,t,e){try{nc=Rt;var r=new Rt;return r._=n,o(r,t,e)}finally{nc=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=o;var c=n.utc=Pt(n);return c.floor=c,c.round=Pt(r),c.ceil=Pt(u),c.offset=Pt(i),c.range=a,n}function Pt(n){return function(t,e){try{nc=Rt;var r=new Rt;return r._=t,n(r,e)._}finally{nc=Date}}}function Ut(n){function t(n){function t(t){for(var e,u,i,o=[],a=-1,c=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.substring(c,a)),null!=(u=ec[e=n.charAt(++a)])&&(e=n.charAt(++a)),(i=C[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),o.push(e),c=a+1);return o.push(n.substring(c,a)),o.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&nc!==Rt,o=new(i?Rt:nc);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+Math.floor(r.Z/100),r.M+r.Z%100,r.S,r.L),i?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,o,a=0,c=t.length,s=e.length;c>a;){if(r>=s)return-1;if(u=t.charCodeAt(a++),37===u){if(o=t.charAt(a++),i=N[o in ec?t.charAt(a++):o],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){b.lastIndex=0;var r=b.exec(t.substring(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){M.lastIndex=0;var r=M.exec(t.substring(e));return r?(n.w=_.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){E.lastIndex=0;var r=E.exec(t.substring(e));return r?(n.m=A.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.substring(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,C.c.toString(),t,r)}function c(n,t,r){return e(n,C.x.toString(),t,r)}function s(n,t,r){return e(n,C.X.toString(),t,r)}function l(n,t,e){var r=x.get(t.substring(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{nc=Rt;var t=new nc;return t._=n,r(t)}finally{nc=Date}}var r=t(n);return e.parse=function(n){try{nc=Rt;var t=r.parse(n);return t&&t._}finally{nc=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=re;var x=Zo.map(),M=Ht(v),_=Ft(v),b=Ht(d),w=Ft(d),S=Ht(m),k=Ft(m),E=Ht(y),A=Ft(y);p.forEach(function(n,t){x.set(n.toLowerCase(),t)});var C={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return jt(n.getDate(),t,2)},e:function(n,t){return jt(n.getDate(),t,2)},H:function(n,t){return jt(n.getHours(),t,2)},I:function(n,t){return jt(n.getHours()%12||12,t,2)},j:function(n,t){return jt(1+Qa.dayOfYear(n),t,3)},L:function(n,t){return jt(n.getMilliseconds(),t,3)},m:function(n,t){return jt(n.getMonth()+1,t,2)},M:function(n,t){return jt(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return jt(n.getSeconds(),t,2)},U:function(n,t){return jt(Qa.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return jt(Qa.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return jt(n.getFullYear()%100,t,2)},Y:function(n,t){return jt(n.getFullYear()%1e4,t,4)},Z:te,"%":function(){return"%"}},N={a:r,A:u,b:i,B:o,c:a,d:Wt,e:Wt,H:Gt,I:Gt,j:Jt,L:ne,m:Bt,M:Kt,p:l,S:Qt,U:Yt,w:Ot,W:It,x:c,X:s,y:Vt,Y:Zt,Z:Xt,"%":ee};return t}function jt(n,t,e){var r=0>n?"-":"",u=(r?-n:n)+"",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function Ht(n){return new RegExp("^(?:"+n.map(Zo.requote).join("|")+")","i")}function Ft(n){for(var t=new o,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function Ot(n,t,e){rc.lastIndex=0;var r=rc.exec(t.substring(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Yt(n,t,e){rc.lastIndex=0;var r=rc.exec(t.substring(e));return r?(n.U=+r[0],e+r[0].length):-1}function It(n,t,e){rc.lastIndex=0;var r=rc.exec(t.substring(e));return r?(n.W=+r[0],e+r[0].length):-1}function Zt(n,t,e){rc.lastIndex=0;var r=rc.exec(t.substring(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Vt(n,t,e){rc.lastIndex=0;var r=rc.exec(t.substring(e,e+2));return r?(n.y=$t(+r[0]),e+r[0].length):-1}function Xt(n,t,e){return/^[+-]\d{4}$/.test(t=t.substring(e,e+5))?(n.Z=-t,e+5):-1}function $t(n){return n+(n>68?1900:2e3)}function Bt(n,t,e){rc.lastIndex=0;var r=rc.exec(t.substring(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Wt(n,t,e){rc.lastIndex=0;var r=rc.exec(t.substring(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function Jt(n,t,e){rc.lastIndex=0;var r=rc.exec(t.substring(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function Gt(n,t,e){rc.lastIndex=0;var r=rc.exec(t.substring(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function Kt(n,t,e){rc.lastIndex=0;var r=rc.exec(t.substring(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function Qt(n,t,e){rc.lastIndex=0;var r=rc.exec(t.substring(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ne(n,t,e){rc.lastIndex=0;var r=rc.exec(t.substring(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function te(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=~~(ua(t)/60),u=ua(t)%60;return e+jt(r,"0",2)+jt(u,"0",2)}function ee(n,t,e){uc.lastIndex=0;var r=uc.exec(t.substring(e,e+1));return r?e+r[0].length:-1}function re(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ue(){}function ie(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function oe(n,t){n&&cc.hasOwnProperty(n.type)&&cc[n.type](n,t)}function ae(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function ce(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)ae(n[e],t,1);t.polygonEnd()}function se(){function n(n,t){n*=Aa,t=t*Aa/2+ba/4;var e=n-r,o=e>=0?1:-1,a=o*e,c=Math.cos(t),s=Math.sin(t),l=i*s,f=u*c+l*Math.cos(a),h=l*o*Math.sin(a);lc.add(Math.atan2(h,f)),r=n,u=c,i=s}var t,e,r,u,i;fc.point=function(o,a){fc.point=n,r=(t=o)*Aa,u=Math.cos(a=(e=a)*Aa/2+ba/4),i=Math.sin(a)},fc.lineEnd=function(){n(t,e)}}function le(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function fe(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function he(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function ge(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function pe(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function ve(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function de(n){return[Math.atan2(n[1],n[0]),G(n[2])]}function me(n,t){return ua(n[0]-t[0])<ka&&ua(n[1]-t[1])<ka}function ye(n,t){n*=Aa;var e=Math.cos(t*=Aa);xe(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function xe(n,t,e){++hc,pc+=(n-pc)/hc,vc+=(t-vc)/hc,dc+=(e-dc)/hc}function Me(){function n(n,u){n*=Aa;var i=Math.cos(u*=Aa),o=i*Math.cos(n),a=i*Math.sin(n),c=Math.sin(u),s=Math.atan2(Math.sqrt((s=e*c-r*a)*s+(s=r*o-t*c)*s+(s=t*a-e*o)*s),t*o+e*a+r*c);gc+=s,mc+=s*(t+(t=o)),yc+=s*(e+(e=a)),xc+=s*(r+(r=c)),xe(t,e,r)}var t,e,r;wc.point=function(u,i){u*=Aa;var o=Math.cos(i*=Aa);t=o*Math.cos(u),e=o*Math.sin(u),r=Math.sin(i),wc.point=n,xe(t,e,r)}}function _e(){wc.point=ye}function be(){function n(n,t){n*=Aa;var e=Math.cos(t*=Aa),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),s=u*c-i*a,l=i*o-r*c,f=r*a-u*o,h=Math.sqrt(s*s+l*l+f*f),g=r*o+u*a+i*c,p=h&&-J(g)/h,v=Math.atan2(h,g);Mc+=p*s,_c+=p*l,bc+=p*f,gc+=v,mc+=v*(r+(r=o)),yc+=v*(u+(u=a)),xc+=v*(i+(i=c)),xe(r,u,i)}var t,e,r,u,i;wc.point=function(o,a){t=o,e=a,wc.point=n,o*=Aa;var c=Math.cos(a*=Aa);r=c*Math.cos(o),u=c*Math.sin(o),i=Math.sin(a),xe(r,u,i)},wc.lineEnd=function(){n(t,e),wc.lineEnd=_e,wc.point=ye}}function we(){return!0}function Se(n,t,e,r,u){var i=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(me(e,r)){u.lineStart();for(var a=0;t>a;++a)u.point((e=n[a])[0],e[1]);return void u.lineEnd()}var c=new Ee(e,n,null,!0),s=new Ee(e,null,c,!1);c.o=s,i.push(c),o.push(s),c=new Ee(r,n,null,!1),s=new Ee(r,null,c,!0),c.o=s,i.push(c),o.push(s)}}),o.sort(t),ke(i),ke(o),i.length){for(var a=0,c=e,s=o.length;s>a;++a)o[a].e=c=!c;for(var l,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;l=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var a=0,s=l.length;s>a;++a)u.point((f=l[a])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){l=g.p.z;for(var a=l.length-1;a>=0;--a)u.point((f=l[a])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,l=g.z,p=!p}while(!g.v);u.lineEnd()}}}function ke(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function Ee(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Ae(n,t,e,r){return function(u,i){function o(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function a(n,t){var e=u(n,t);d.point(e[0],e[1])}function c(){y.point=a,d.lineStart()}function s(){y.point=o,d.lineEnd()}function l(n,t){v.push([n,t]);var e=u(n,t);M.point(e[0],e[1])}function f(){M.lineStart(),v=[]}function h(){l(v[0][0],v[0][1]),M.lineEnd();var n,t=M.clean(),e=x.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){n=e[0];var u,r=n.length-1,o=-1;if(r>0){for(_||(i.polygonStart(),_=!0),i.lineStart();++o<r;)i.point((u=n[o])[0],u[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Ce))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:o,lineStart:c,lineEnd:s,polygonStart:function(){y.point=l,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=c,y.lineEnd=s,g=Zo.merge(g);var n=Le(m,p);g.length?(_||(i.polygonStart(),_=!0),Se(g,ze,n,e,i)):n&&(_||(i.polygonStart(),_=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),_&&(i.polygonEnd(),_=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},x=Ne(),M=t(x),_=!1;return y}}function Ce(n){return n.length>1}function Ne(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:v,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function ze(n,t){return((n=n.x)[0]<0?n[1]-Sa-ka:Sa-n[1])-((t=t.x)[0]<0?t[1]-Sa-ka:Sa-t[1])}function Le(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,o=0;lc.reset();for(var a=0,c=t.length;c>a;++a){var s=t[a],l=s.length;if(l)for(var f=s[0],h=f[0],g=f[1]/2+ba/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===l&&(d=0),n=s[d];var m=n[0],y=n[1]/2+ba/4,x=Math.sin(y),M=Math.cos(y),_=m-h,b=_>=0?1:-1,w=b*_,S=w>ba,k=p*x;if(lc.add(Math.atan2(k*b*Math.sin(w),v*M+k*Math.cos(w))),i+=S?_+b*wa:_,S^h>=e^m>=e){var E=he(le(f),le(n));ve(E);var A=he(u,E);ve(A);var C=(S^_>=0?-1:1)*G(A[2]);(r>C||r===C&&(E[0]||E[1]))&&(o+=S^_>=0?1:-1)}if(!d++)break;h=m,p=x,v=M,f=n}}return(-ka>i||ka>i&&0>lc)^1&o}function Te(n){var t,e=0/0,r=0/0,u=0/0;return{lineStart:function(){n.lineStart(),t=1},point:function(i,o){var a=i>0?ba:-ba,c=ua(i-e);ua(c-ba)<ka?(n.point(e,r=(r+o)/2>0?Sa:-Sa),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(i,r),t=0):u!==a&&c>=ba&&(ua(e-u)<ka&&(e-=u*ka),ua(i-a)<ka&&(i-=a*ka),r=qe(e,r,i,o),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=i,r=o),u=a},lineEnd:function(){n.lineEnd(),e=r=0/0},clean:function(){return 2-t}}}function qe(n,t,e,r){var u,i,o=Math.sin(n-e);return ua(o)>ka?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*o)):(t+r)/2}function Re(n,t,e,r){var u;if(null==n)u=e*Sa,r.point(-ba,u),r.point(0,u),r.point(ba,u),r.point(ba,0),r.point(ba,-u),r.point(0,-u),r.point(-ba,-u),r.point(-ba,0),r.point(-ba,u);else if(ua(n[0]-t[0])>ka){var i=n[0]<t[0]?ba:-ba;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function De(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,c,s,l;return{lineStart:function(){s=c=!1,l=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=o?v?0:u(f,h):v?u(f+(0>f?ba:-ba),h):0;if(!e&&(s=c=v)&&n.lineStart(),v!==c&&(g=r(e,p),(me(e,g)||me(p,g))&&(p[0]+=ka,p[1]+=ka,v=t(p[0],p[1]))),v!==c)l=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(a&&e&&o^v){var m;d&i||!(m=r(p,e,!0))||(l=0,o?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&me(e,p)||n.point(p[0],p[1]),e=p,c=v,i=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return l|(s&&c)<<1}}}function r(n,t,e){var r=le(n),u=le(t),o=[1,0,0],a=he(r,u),c=fe(a,a),s=a[0],l=c-s*s;if(!l)return!e&&n;var f=i*c/l,h=-i*s/l,g=he(o,a),p=pe(o,f),v=pe(a,h);ge(p,v);var d=g,m=fe(p,d),y=fe(d,d),x=m*m-y*(fe(p,p)-1);if(!(0>x)){var M=Math.sqrt(x),_=pe(d,(-m-M)/y);if(ge(_,p),_=de(_),!e)return _;var b,w=n[0],S=t[0],k=n[1],E=t[1];w>S&&(b=w,w=S,S=b);var A=S-w,C=ua(A-ba)<ka,N=C||ka>A;if(!C&&k>E&&(b=k,k=E,E=b),N?C?k+E>0^_[1]<(ua(_[0]-w)<ka?k:E):k<=_[1]&&_[1]<=E:A>ba^(w<=_[0]&&_[0]<=S)){var z=pe(d,(-m+M)/y);return ge(z,p),[_,de(z)]}}}function u(t,e){var r=o?n:ba-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),o=i>0,a=ua(i)>ka,c=sr(n,6*Aa);return Ae(t,e,c,o?[0,-n]:[-ba,n-ba])}function Pe(n,t,e,r){return function(u){var i,o=u.a,a=u.b,c=o.x,s=o.y,l=a.x,f=a.y,h=0,g=1,p=l-c,v=f-s;if(i=n-c,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-c,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-s,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-s,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:c+h*p,y:s+h*v}),1>g&&(u.b={x:c+g*p,y:s+g*v}),u}}}}}}function Ue(n,t,e,r){function u(r,u){return ua(r[0]-n)<ka?u>0?0:3:ua(r[0]-e)<ka?u>0?2:1:ua(r[1]-t)<ka?u>0?1:0:u>0?3:2}function i(n,t){return o(n.x,t.x)}function o(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,o=1,a=d[u],c=a.length,s=a[0];c>o;++o)i=a[o],s[1]<=r?i[1]>r&&W(s,i,n)>0&&++t:i[1]<=r&&W(s,i,n)<0&&--t,s=i;return 0!==t}function s(i,a,c,s){var l=0,f=0;if(null==i||(l=u(i,c))!==(f=u(a,c))||o(i,a)<0^c>0){do s.point(0===l||3===l?n:e,l>1?r:t);while((l=(l+c+4)%4)!==f)}else s.point(a[0],a[1])}function l(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){l(n,t)&&a.point(n,t)}function h(){N.point=p,d&&d.push(m=[]),S=!0,w=!1,_=b=0/0}function g(){v&&(p(y,x),M&&w&&A.rejoin(),v.push(A.buffer())),N.point=f,w&&a.lineEnd()}function p(n,t){n=Math.max(-kc,Math.min(kc,n)),t=Math.max(-kc,Math.min(kc,t));var e=l(n,t);if(d&&m.push([n,t]),S)y=n,x=t,M=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:_,y:b},b:{x:n,y:t}};C(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}_=n,b=t,w=e}var v,d,m,y,x,M,_,b,w,S,k,E=a,A=Ne(),C=Pe(n,t,e,r),N={point:f,lineStart:h,lineEnd:g,polygonStart:function(){a=A,v=[],d=[],k=!0},polygonEnd:function(){a=E,v=Zo.merge(v);var t=c([n,r]),e=k&&t,u=v.length;(e||u)&&(a.polygonStart(),e&&(a.lineStart(),s(null,null,1,a),a.lineEnd()),u&&Se(v,i,t,s,a),a.polygonEnd()),v=d=m=null}};return N}}function je(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function He(n){var t=0,e=ba/3,r=tr(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*ba/180,e=n[1]*ba/180):[t/ba*180,e/ba*180]},u}function Fe(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),o-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),o=Math.sqrt(i)/u;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/u,G((i-(n*n+e*e)*u*u)/(2*u))]},e}function Oe(){function n(n,t){Ac+=u*n-r*t,r=n,u=t}var t,e,r,u;Tc.point=function(i,o){Tc.point=n,t=r=i,e=u=o},Tc.lineEnd=function(){n(t,e)}}function Ye(n,t){Cc>n&&(Cc=n),n>zc&&(zc=n),Nc>t&&(Nc=t),t>Lc&&(Lc=t)}function Ie(){function n(n,t){o.push("M",n,",",t,i)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function u(){o.push("Z")}var i=Ze(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return i=Ze(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function Ze(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Ve(n,t){pc+=n,vc+=t,++dc}function Xe(){function n(n,r){var u=n-t,i=r-e,o=Math.sqrt(u*u+i*i);mc+=o*(t+n)/2,yc+=o*(e+r)/2,xc+=o,Ve(t=n,e=r)}var t,e;Rc.point=function(r,u){Rc.point=n,Ve(t=r,e=u)}}function $e(){Rc.point=Ve}function Be(){function n(n,t){var e=n-r,i=t-u,o=Math.sqrt(e*e+i*i);mc+=o*(r+n)/2,yc+=o*(u+t)/2,xc+=o,o=u*n-r*t,Mc+=o*(r+n),_c+=o*(u+t),bc+=3*o,Ve(r=n,u=t)}var t,e,r,u;Rc.point=function(i,o){Rc.point=n,Ve(t=r=i,e=u=o)},Rc.lineEnd=function(){n(t,e)}}function We(n){function t(t,e){n.moveTo(t,e),n.arc(t,e,o,0,wa)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function u(){a.point=t}function i(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:u,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=u,a.point=t},pointRadius:function(n){return o=n,a},result:v};return a}function Je(n){function t(n){return(a?r:e)(n)}function e(t){return Qe(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){x=0/0,S.point=i,t.lineStart()}function i(e,r){var i=le([e,r]),o=n(e,r);u(x,M,y,_,b,w,x=o[0],M=o[1],y=e,_=i[0],b=i[1],w=i[2],a,t),t.point(x,M)}function o(){S.point=e,t.lineEnd()}function c(){r(),S.point=s,S.lineEnd=l}function s(n,t){i(f=n,h=t),g=x,p=M,v=_,d=b,m=w,S.point=i}function l(){u(x,M,y,_,b,w,g,p,f,v,d,m,a,t),S.lineEnd=o,o()}var f,h,g,p,v,d,m,y,x,M,_,b,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=c},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,a,c,s,l,f,h,g,p,v,d,m){var y=l-t,x=f-e,M=y*y+x*x;if(M>4*i&&d--){var _=a+g,b=c+p,w=s+v,S=Math.sqrt(_*_+b*b+w*w),k=Math.asin(w/=S),E=ua(ua(w)-1)<ka||ua(r-h)<ka?(r+h)/2:Math.atan2(b,_),A=n(E,k),C=A[0],N=A[1],z=C-t,L=N-e,T=x*z-y*L;(T*T/M>i||ua((y*z+x*L)/M-.5)>.3||o>a*g+c*p+s*v)&&(u(t,e,r,a,c,s,C,N,E,_/=S,b/=S,w,d,m),m.point(C,N),u(C,N,E,_,b,w,l,f,h,g,p,v,d,m))}}var i=.5,o=Math.cos(30*Aa),a=16;return t.precision=function(n){return arguments.length?(a=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function Ge(n){var t=Je(function(t,e){return n([t*Ca,e*Ca])});return function(n){return er(t(n))}}function Ke(n){this.stream=n}function Qe(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function nr(n){return tr(function(){return n})()}function tr(n){function t(n){return n=a(n[0]*Aa,n[1]*Aa),[n[0]*h+c,s-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(s-n[1])/h),n&&[n[0]*Ca,n[1]*Ca]}function r(){a=je(o=ir(m,y,x),i);var n=i(v,d);return c=g-n[0]*h,s=p+n[1]*h,u()}function u(){return l&&(l.valid=!1,l=null),t}var i,o,a,c,s,l,f=Je(function(n,t){return n=i(n,t),[n[0]*h+c,s-n[1]*h]}),h=150,g=480,p=250,v=0,d=0,m=0,y=0,x=0,M=Sc,_=wt,b=null,w=null;return t.stream=function(n){return l&&(l.valid=!1),l=er(M(o,f(_(n)))),l.valid=!0,l},t.clipAngle=function(n){return arguments.length?(M=null==n?(b=n,Sc):De((b=+n)*Aa),u()):b},t.clipExtent=function(n){return arguments.length?(w=n,_=n?Ue(n[0][0],n[0][1],n[1][0],n[1][1]):wt,u()):w},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*Aa,d=n[1]%360*Aa,r()):[v*Ca,d*Ca]},t.rotate=function(n){return arguments.length?(m=n[0]%360*Aa,y=n[1]%360*Aa,x=n.length>2?n[2]%360*Aa:0,r()):[m*Ca,y*Ca,x*Ca]},Zo.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function er(n){return Qe(n,function(t,e){n.point(t*Aa,e*Aa)})}function rr(n,t){return[n,t]}function ur(n,t){return[n>ba?n-wa:-ba>n?n+wa:n,t]}function ir(n,t,e){return n?t||e?je(ar(n),cr(t,e)):ar(n):t||e?cr(t,e):ur}function or(n){return function(t,e){return t+=n,[t>ba?t-wa:-ba>t?t+wa:t,e]}}function ar(n){var t=or(n);return t.invert=or(-n),t}function cr(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,s=Math.sin(t),l=s*r+a*u;return[Math.atan2(c*i-l*o,a*r-s*u),G(l*i+c*o)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,s=Math.sin(t),l=s*i-c*o;return[Math.atan2(c*i+s*o,a*r+l*u),G(l*r-a*u)]},e}function sr(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,o,a){var c=o*t;null!=u?(u=lr(e,u),i=lr(e,i),(o>0?i>u:u>i)&&(u+=o*wa)):(u=n+o*wa,i=n-.5*c);for(var s,l=u;o>0?l>i:i>l;l-=c)a.point((s=de([e,-r*Math.cos(l),-r*Math.sin(l)]))[0],s[1])}}function lr(n,t){var e=le(t);e[0]-=n,ve(e);var r=J(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-ka)%(2*Math.PI)}function fr(n,t,e){var r=Zo.range(n,t-ka,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function hr(n,t,e){var r=Zo.range(n,t-ka,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function gr(n){return n.source}function pr(n){return n.target}function vr(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=u*Math.cos(n),s=u*Math.sin(n),l=o*Math.cos(e),f=o*Math.sin(e),h=2*Math.asin(Math.sqrt(tt(r-t)+u*o*tt(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*c+t*l,u=e*s+t*f,o=e*i+t*a;return[Math.atan2(u,r)*Ca,Math.atan2(o,Math.sqrt(r*r+u*u))*Ca]}:function(){return[n*Ca,t*Ca]};return p.distance=h,p}function dr(){function n(n,u){var i=Math.sin(u*=Aa),o=Math.cos(u),a=ua((n*=Aa)-t),c=Math.cos(a);Dc+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*i-e*o*c)*a),e*i+r*o*c),t=n,e=i,r=o}var t,e,r;Pc.point=function(u,i){t=u*Aa,e=Math.sin(i*=Aa),r=Math.cos(i),Pc.point=n},Pc.lineEnd=function(){Pc.point=Pc.lineEnd=v}}function mr(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),o=Math.cos(u);return[Math.atan2(n*i,r*o),Math.asin(r&&e*i/r)]},e}function yr(n,t){function e(n,t){o>0?-Sa+ka>t&&(t=-Sa+ka):t>Sa-ka&&(t=Sa-ka);var e=o/Math.pow(u(t),i);return[e*Math.sin(i*n),o-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(ba/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),o=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=o-t,r=B(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(o/r,1/i))-Sa]},e):Mr}function xr(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return ua(u)<ka?rr:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-B(u)*Math.sqrt(n*n+e*e)]},e)}function Mr(n,t){return[n,Math.log(Math.tan(ba/4+t/2))]}function _r(n){var t,e=nr(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=i.apply(e,arguments);if(o===e){if(t=null==n){var a=ba*r(),c=u();i([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function br(n,t){return[Math.log(Math.tan(ba/4+t/2)),-n]}function wr(n){return n[0]}function Sr(n){return n[1]}function kr(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&W(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function Er(n,t){return n[0]-t[0]||n[1]-t[1]}function Ar(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Cr(n,t,e,r){var u=n[0],i=e[0],o=t[0]-u,a=r[0]-i,c=n[1],s=e[1],l=t[1]-c,f=r[1]-s,h=(a*(c-s)-f*(u-i))/(f*o-a*l);return[u+h*o,c+h*l]}function Nr(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function zr(){Gr(this),this.edge=this.site=this.circle=null}function Lr(n){var t=Bc.pop()||new zr;return t.site=n,t}function Tr(n){Yr(n),Vc.remove(n),Bc.push(n),Gr(n)}function qr(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,o=n.N,a=[n];Tr(n);for(var c=i;c.circle&&ua(e-c.circle.x)<ka&&ua(r-c.circle.cy)<ka;)i=c.P,a.unshift(c),Tr(c),c=i;a.unshift(c),Yr(c);for(var s=o;s.circle&&ua(e-s.circle.x)<ka&&ua(r-s.circle.cy)<ka;)o=s.N,a.push(s),Tr(s),s=o;a.push(s),Yr(s);var l,f=a.length;for(l=1;f>l;++l)s=a[l],c=a[l-1],Br(s.edge,c.site,s.site,u);c=a[0],s=a[f-1],s.edge=Xr(c.site,s.site,null,u),Or(c),Or(s)}function Rr(n){for(var t,e,r,u,i=n.x,o=n.y,a=Vc._;a;)if(r=Dr(a,o)-i,r>ka)a=a.L;else{if(u=i-Pr(a,o),!(u>ka)){r>-ka?(t=a.P,e=a):u>-ka?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Lr(n);if(Vc.insert(t,c),t||e){if(t===e)return Yr(t),e=Lr(t.site),Vc.insert(c,e),c.edge=e.edge=Xr(t.site,c.site),Or(t),void Or(e);if(!e)return void(c.edge=Xr(t.site,c.site));Yr(t),Yr(e);var s=t.site,l=s.x,f=s.y,h=n.x-l,g=n.y-f,p=e.site,v=p.x-l,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,x=v*v+d*d,M={x:(d*y-g*x)/m+l,y:(h*x-v*y)/m+f};Br(e.edge,s,p,M),c.edge=Xr(s,n,null,M),e.edge=Xr(n,p,null,M),Or(t),Or(e)}}function Dr(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var o=n.P;if(!o)return-1/0;e=o.site;var a=e.x,c=e.y,s=c-t;if(!s)return a;var l=a-r,f=1/i-1/s,h=l/s;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*s)-c+s/2+u-i/2)))/f+r:(r+a)/2}function Pr(n,t){var e=n.N;if(e)return Dr(e,t);var r=n.site;return r.y===t?r.x:1/0}function Ur(n){this.site=n,this.edges=[]}function jr(n){for(var t,e,r,u,i,o,a,c,s,l,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=Zc,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(a=i.edges,c=a.length,o=0;c>o;)l=a[o].end(),r=l.x,u=l.y,s=a[++o%c].start(),t=s.x,e=s.y,(ua(r-t)>ka||ua(u-e)>ka)&&(a.splice(o,0,new Wr($r(i.site,l,ua(r-f)<ka&&p-u>ka?{x:f,y:ua(t-f)<ka?e:p}:ua(u-p)<ka&&h-r>ka?{x:ua(e-p)<ka?t:h,y:p}:ua(r-h)<ka&&u-g>ka?{x:h,y:ua(t-h)<ka?e:g}:ua(u-g)<ka&&r-f>ka?{x:ua(e-g)<ka?t:f,y:g}:null),i.site,null)),++c)}function Hr(n,t){return t.angle-n.angle}function Fr(){Gr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Or(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var o=u.x,a=u.y,c=r.x-o,s=r.y-a,l=i.x-o,f=i.y-a,h=2*(c*f-s*l);if(!(h>=-Ea)){var g=c*c+s*s,p=l*l+f*f,v=(f*g-s*p)/h,d=(c*p-l*g)/h,f=d+a,m=Wc.pop()||new Fr;m.arc=n,m.site=u,m.x=v+o,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,x=$c._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}$c.insert(y,m),y||(Xc=m)}}}}function Yr(n){var t=n.circle;t&&(t.P||(Xc=t.N),$c.remove(t),Wc.push(t),Gr(t),n.circle=null)}function Ir(n){for(var t,e=Ic,r=Pe(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Zr(t,n)||!r(t)||ua(t.a.x-t.b.x)<ka&&ua(t.a.y-t.b.y)<ka)&&(t.a=t.b=null,e.splice(u,1))}function Zr(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,o=t[0][0],a=t[1][0],c=t[0][1],s=t[1][1],l=n.l,f=n.r,h=l.x,g=l.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(o>d||d>=a)return;if(h>p){if(i){if(i.y>=s)return}else i={x:d,y:c};e={x:d,y:s}}else{if(i){if(i.y<c)return}else i={x:d,y:s};e={x:d,y:c}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=s)return}else i={x:(c-u)/r,y:c};e={x:(s-u)/r,y:s}}else{if(i){if(i.y<c)return}else i={x:(s-u)/r,y:s};e={x:(c-u)/r,y:c}}else if(v>g){if(i){if(i.x>=a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}else{if(i){if(i.x<o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}return n.a=i,n.b=e,!0}function Vr(n,t){this.l=n,this.r=t,this.a=this.b=null}function Xr(n,t,e,r){var u=new Vr(n,t);return Ic.push(u),e&&Br(u,n,t,e),r&&Br(u,t,n,r),Zc[n.i].edges.push(new Wr(u,n,t)),Zc[t.i].edges.push(new Wr(u,t,n)),u}function $r(n,t,e){var r=new Vr(n,null);return r.a=t,r.b=e,Ic.push(r),r}function Br(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function Wr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function Jr(){this._=null}function Gr(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function Kr(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function Qr(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function nu(n){for(;n.L;)n=n.L;return n}function tu(n,t){var e,r,u,i=n.sort(eu).pop();for(Ic=[],Zc=new Array(n.length),Vc=new Jr,$c=new Jr;;)if(u=Xc,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(Zc[i.i]=new Ur(i),Rr(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;qr(u.arc)}t&&(Ir(t),jr(t));var o={cells:Zc,edges:Ic};return Vc=$c=Ic=Zc=null,o}function eu(n,t){return t.y-n.y||t.x-n.x}function ru(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function uu(n){return n.x}function iu(n){return n.y}function ou(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function au(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var o=.5*(e+u),a=.5*(r+i),c=t.nodes;c[0]&&au(n,c[0],e,r,o,a),c[1]&&au(n,c[1],o,r,u,a),c[2]&&au(n,c[2],e,a,o,i),c[3]&&au(n,c[3],o,a,u,i)}}function cu(n,t){n=Zo.rgb(n),t=Zo.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,o=t.g-r,a=t.b-u;return function(n){return"#"+dt(Math.round(e+i*n))+dt(Math.round(r+o*n))+dt(Math.round(u+a*n))}}function su(n,t){var e,r={},u={};for(e in n)e in t?r[e]=hu(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function lu(n,t){return t-=n=+n,function(e){return n+t*e}}function fu(n,t){var e,r,u,i=Gc.lastIndex=Kc.lastIndex=0,o=-1,a=[],c=[];for(n+="",t+="";(e=Gc.exec(n))&&(r=Kc.exec(t));)(u=r.index)>i&&(u=t.substring(i,u),a[o]?a[o]+=u:a[++o]=u),(e=e[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:lu(e,r)})),i=Kc.lastIndex;return i<t.length&&(u=t.substring(i),a[o]?a[o]+=u:a[++o]=u),a.length<2?c[0]?(t=c[0].x,function(n){return t(n)+""}):function(){return t}:(t=c.length,function(n){for(var e,r=0;t>r;++r)a[(e=c[r]).i]=e.x(n);return a.join("")})}function hu(n,t){for(var e,r=Zo.interpolators.length;--r>=0&&!(e=Zo.interpolators[r](n,t)););return e}function gu(n,t){var e,r=[],u=[],i=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;a>e;++e)r.push(hu(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;o>e;++e)u[e]=t[e];return function(n){for(e=0;a>e;++e)u[e]=r[e](n);return u}}function pu(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function vu(n){return function(t){return 1-n(1-t)}}function du(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function mu(n){return n*n}function yu(n){return n*n*n}function xu(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function Mu(n){return function(t){return Math.pow(t,n)}}function _u(n){return 1-Math.cos(n*Sa)}function bu(n){return Math.pow(2,10*(n-1))}function wu(n){return 1-Math.sqrt(1-n*n)}function Su(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/wa*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*wa/t)}}function ku(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function Eu(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Au(n,t){n=Zo.hcl(n),t=Zo.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,o=t.c-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return ot(e+i*n,r+o*n,u+a*n)+""
}}function Cu(n,t){n=Zo.hsl(n),t=Zo.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,o=t.s-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return ut(e+i*n,r+o*n,u+a*n)+""}}function Nu(n,t){n=Zo.lab(n),t=Zo.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,o=t.a-r,a=t.b-u;return function(n){return ct(e+i*n,r+o*n,u+a*n)+""}}function zu(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Lu(n){var t=[n.a,n.b],e=[n.c,n.d],r=qu(t),u=Tu(t,e),i=qu(Ru(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Ca,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Ca:0}function Tu(n,t){return n[0]*t[0]+n[1]*t[1]}function qu(n){var t=Math.sqrt(Tu(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Ru(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Du(n,t){var e,r=[],u=[],i=Zo.transform(n),o=Zo.transform(t),a=i.translate,c=o.translate,s=i.rotate,l=o.rotate,f=i.skew,h=o.skew,g=i.scale,p=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push("translate(",null,",",null,")"),u.push({i:1,x:lu(a[0],c[0])},{i:3,x:lu(a[1],c[1])})):r.push(c[0]||c[1]?"translate("+c+")":""),s!=l?(s-l>180?l+=360:l-s>180&&(s+=360),u.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:lu(s,l)})):l&&r.push(r.pop()+"rotate("+l+")"),f!=h?u.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:lu(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),g[0]!=p[0]||g[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),u.push({i:e-4,x:lu(g[0],p[0])},{i:e-2,x:lu(g[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=u.length,function(n){for(var t,i=-1;++i<e;)r[(t=u[i]).i]=t.x(n);return r.join("")}}function Pu(n,t){return t=t-(n=+n)?1/(t-n):0,function(e){return(e-n)*t}}function Uu(n,t){return t=t-(n=+n)?1/(t-n):0,function(e){return Math.max(0,Math.min(1,(e-n)*t))}}function ju(n){for(var t=n.source,e=n.target,r=Fu(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Hu(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Fu(n,t){if(n===t)return n;for(var e=Hu(n),r=Hu(t),u=e.pop(),i=r.pop(),o=null;u===i;)o=u,u=e.pop(),i=r.pop();return o}function Ou(n){n.fixed|=2}function Yu(n){n.fixed&=-7}function Iu(n){n.fixed|=4,n.px=n.x,n.py=n.y}function Zu(n){n.fixed&=-5}function Vu(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,o=n.nodes,a=o.length,c=-1;++c<a;)i=o[c],null!=i&&(Vu(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var s=t*e[n.point.index];n.charge+=n.pointCharge=s,r+=s*n.point.x,u+=s*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function Xu(n,t){return Zo.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=Ku,n}function $u(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;--r>=0;)e.push(u[r])}function Bu(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,o=-1;++o<u;)e.push(i[o]);for(;null!=(n=r.pop());)t(n)}function Wu(n){return n.children}function Ju(n){return n.value}function Gu(n,t){return t.value-n.value}function Ku(n){return Zo.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function Qu(n){return n.x}function ni(n){return n.y}function ti(n,t,e){n.y0=t,n.y=e}function ei(n){return Zo.range(n.length)}function ri(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function ui(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function ii(n){return n.reduce(oi,0)}function oi(n,t){return n+t[1]}function ai(n,t){return ci(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ci(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function si(n){return[Zo.min(n),Zo.max(n)]}function li(n,t){return n.value-t.value}function fi(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function hi(n,t){n._pack_next=t,t._pack_prev=n}function gi(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function pi(n){function t(n){l=Math.min(n.x-n.r,l),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(s=e.length)){var e,r,u,i,o,a,c,s,l=1/0,f=-1/0,h=1/0,g=-1/0;if(e.forEach(vi),r=e[0],r.x=-r.r,r.y=0,t(r),s>1&&(u=e[1],u.x=u.r,u.y=0,t(u),s>2))for(i=e[2],yi(r,u,i),t(i),fi(r,i),r._pack_prev=i,fi(i,u),u=r._pack_next,o=3;s>o;o++){yi(r,u,i=e[o]);var p=0,v=1,d=1;for(a=u._pack_next;a!==u;a=a._pack_next,v++)if(gi(a,i)){p=1;break}if(1==p)for(c=r._pack_prev;c!==a._pack_prev&&!gi(c,i);c=c._pack_prev,d++);p?(d>v||v==d&&u.r<r.r?hi(r,u=a):hi(r=c,u),o--):(fi(r,i),u=i,t(i))}var m=(l+f)/2,y=(h+g)/2,x=0;for(o=0;s>o;o++)i=e[o],i.x-=m,i.y-=y,x=Math.max(x,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=x,e.forEach(di)}}function vi(n){n._pack_next=n._pack_prev=n}function di(n){delete n._pack_next,delete n._pack_prev}function mi(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,o=u.length;++i<o;)mi(u[i],t,e,r)}function yi(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var o=t.r+e.r,a=u*u+i*i;o*=o,r*=r;var c=.5+(r-o)/(2*a),s=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*u+s*i,e.y=n.y+c*i-s*u}else e.x=n.x+r,e.y=n.y}function xi(n,t){return n.parent==t.parent?1:2}function Mi(n){var t=n.children;return t.length?t[0]:n.t}function _i(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function bi(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function wi(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Si(n,t,e){return n.a.parent===t.parent?n.a:e}function ki(n){return 1+Zo.max(n,function(n){return n.y})}function Ei(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Ai(n){var t=n.children;return t&&t.length?Ai(t[0]):n}function Ci(n){var t,e=n.children;return e&&(t=e.length)?Ci(e[t-1]):n}function Ni(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function zi(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Li(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Ti(n){return n.rangeExtent?n.rangeExtent():Li(n.range())}function qi(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function Ri(n,t){var e,r=0,u=n.length-1,i=n[r],o=n[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),n[r]=t.floor(i),n[u]=t.ceil(o),n}function Di(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:ss}function Pi(n,t,e,r){var u=[],i=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)u.push(e(n[o-1],n[o])),i.push(r(t[o-1],t[o]));return function(t){var e=Zo.bisect(n,t,1,a)-1;return i[e](u[e](t))}}function Ui(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Pi:qi,c=r?Uu:Pu;return o=u(n,t,c,e),a=u(t,n,c,hu),i}function i(n){return o(n)}var o,a;return i.invert=function(n){return a(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(zu)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return Oi(n,t)},i.tickFormat=function(t,e){return Yi(n,t,e)},i.nice=function(t){return Hi(n,t),u()},i.copy=function(){return Ui(n,t,e,r)},u()}function ji(n,t){return Zo.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Hi(n,t){return Ri(n,Di(Fi(n,t)[2]))}function Fi(n,t){null==t&&(t=10);var e=Li(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Oi(n,t){return Zo.range.apply(Zo,Fi(n,t))}function Yi(n,t,e){var r=Fi(n,t);if(e){var u=Ga.exec(e);if(u.shift(),"s"===u[8]){var i=Zo.formatPrefix(Math.max(ua(r[0]),ua(r[1])));return u[7]||(u[7]="."+Ii(i.scale(r[2]))),u[8]="f",e=Zo.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]="."+Zi(u[8],r)),e=u.join("")}else e=",."+Ii(r[2])+"f";return Zo.format(e)}function Ii(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function Zi(n,t){var e=Ii(t[2]);return n in ls?Math.abs(e-Ii(Math.max(ua(t[0]),ua(t[1]))))+ +("e"!==n):e-2*("%"===n)}function Vi(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(u(t))}return o.invert=function(t){return i(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),o):t},o.nice=function(){var t=Ri(r.map(u),e?Math:hs);return n.domain(t),r=t.map(i),o},o.ticks=function(){var n=Li(r),o=[],a=n[0],c=n[1],s=Math.floor(u(a)),l=Math.ceil(u(c)),f=t%1?2:t;if(isFinite(l-s)){if(e){for(;l>s;s++)for(var h=1;f>h;h++)o.push(i(s)*h);o.push(i(s))}else for(o.push(i(s));s++<l;)for(var h=f-1;h>0;h--)o.push(i(s)*h);for(s=0;o[s]<a;s++);for(l=o.length;o[l-1]>c;l--);o=o.slice(s,l)}return o},o.tickFormat=function(n,t){if(!arguments.length)return fs;arguments.length<2?t=fs:"function"!=typeof t&&(t=Zo.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/i(c(u(n)+r))<=a?t(n):""}},o.copy=function(){return Vi(n.copy(),t,e,r)},ji(o,n)}function Xi(n,t,e){function r(t){return n(u(t))}var u=$i(t),i=$i(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Oi(e,n)},r.tickFormat=function(n,t){return Yi(e,n,t)},r.nice=function(n){return r.domain(Hi(e,n))},r.exponent=function(o){return arguments.length?(u=$i(t=o),i=$i(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return Xi(n.copy(),t,e)},ji(r,n)}function $i(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function Bi(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):0/0))-1)%i.length]}function r(t,e){return Zo.range(n.length).map(function(n){return t+e*n})}var u,i,a;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new o;for(var i,a=-1,c=r.length;++a<c;)u.has(i=r[a])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,a=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,o){arguments.length<2&&(o=0);var c=u[0],s=u[1],l=(s-c)/(Math.max(1,n.length-1)+o);return i=r(n.length<2?(c+s)/2:c+l*o/2,l),a=0,t={t:"rangePoints",a:arguments},e},e.rangeBands=function(u,o,c){arguments.length<2&&(o=0),arguments.length<3&&(c=o);var s=u[1]<u[0],l=u[s-0],f=u[1-s],h=(f-l)/(n.length-o+2*c);return i=r(l+h*c,h),s&&i.reverse(),a=h*(1-o),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,o,c){arguments.length<2&&(o=0),arguments.length<3&&(c=o);var s=u[1]<u[0],l=u[s-0],f=u[1-s],h=Math.floor((f-l)/(n.length-o+2*c)),g=f-l-(n.length-o)*h;return i=r(l+Math.round(g/2),h),s&&i.reverse(),a=Math.round(h*(1-o)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return Li(t.a[0])},e.copy=function(){return Bi(n,t)},e.domain(n)}function Wi(e,r){function u(){var n=0,t=r.length;for(o=[];++n<t;)o[n-1]=Zo.quantile(e,n/t);return i}function i(n){return isNaN(n=+n)?void 0:r[Zo.bisect(o,n)]}var o;return i.domain=function(r){return arguments.length?(e=r.filter(t).sort(n),u()):e},i.range=function(n){return arguments.length?(r=n,u()):r},i.quantiles=function(){return o},i.invertExtent=function(n){return n=r.indexOf(n),0>n?[0/0,0/0]:[n>0?o[n-1]:e[0],n<o.length?o[n]:e[e.length-1]]},i.copy=function(){return Wi(e,r)},u()}function Ji(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),o=e.length-1,r}var i,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?0/0:t/i+n,[t,t+1/i]},r.copy=function(){return Ji(n,t,e)},u()}function Gi(n,t){function e(e){return e>=e?t[Zo.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return Gi(n,t)},e}function Ki(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Oi(n,t)},t.tickFormat=function(t,e){return Yi(n,t,e)},t.copy=function(){return Ki(n)},t}function Qi(n){return n.innerRadius}function no(n){return n.outerRadius}function to(n){return n.startAngle}function eo(n){return n.endAngle}function ro(n){function t(t){function o(){s.push("M",i(n(l),a))}for(var c,s=[],l=[],f=-1,h=t.length,g=bt(e),p=bt(r);++f<h;)u.call(this,c=t[f],f)?l.push([+g.call(this,c,f),+p.call(this,c,f)]):l.length&&(o(),l=[]);return l.length&&o(),s.length?s.join(""):null}var e=wr,r=Sr,u=we,i=uo,o=i.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?i=n:(i=xs.get(n)||uo).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function uo(n){return n.join("L")}function io(n){return uo(n)+"Z"}function oo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&u.push("H",r[0]),u.join("")}function ao(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function co(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function so(n,t){return n.length<4?uo(n):n[1]+ho(n.slice(1,n.length-1),go(n,t))}function lo(n,t){return n.length<3?uo(n):n[0]+ho((n.push(n[0]),n),go([n[n.length-2]].concat(n,[n[1]]),t))}function fo(n,t){return n.length<3?uo(n):n[0]+ho(n,go(n,t))}function ho(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return uo(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],o=t[0],a=o,c=1;if(e&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],u=n[1],c=2),t.length>1){a=t[1],i=n[c],c++,r+="C"+(u[0]+o[0])+","+(u[1]+o[1])+","+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1];for(var s=2;s<t.length;s++,c++)i=n[c],a=t[s],r+="S"+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1]}if(e){var l=n[c];r+="Q"+(i[0]+2*a[0]/3)+","+(i[1]+2*a[1]/3)+","+l[0]+","+l[1]}return r}function go(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],o=n[1],a=1,c=n.length;++a<c;)e=i,i=o,o=n[a],r.push([u*(o[0]-e[0]),u*(o[1]-e[1])]);return r}function po(n){if(n.length<3)return uo(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],o=[u,u,u,(r=n[1])[0]],a=[i,i,i,r[1]],c=[u,",",i,"L",xo(bs,o),",",xo(bs,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),Mo(c,o,a);return n.pop(),c.push("L",r),c.join("")}function vo(n){if(n.length<4)return uo(n);for(var t,e=[],r=-1,u=n.length,i=[0],o=[0];++r<3;)t=n[r],i.push(t[0]),o.push(t[1]);for(e.push(xo(bs,i)+","+xo(bs,o)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),Mo(e,i,o);return e.join("")}function mo(n){for(var t,e,r=-1,u=n.length,i=u+4,o=[],a=[];++r<4;)e=n[r%u],o.push(e[0]),a.push(e[1]);for(t=[xo(bs,o),",",xo(bs,a)],--r;++r<i;)e=n[r%u],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Mo(t,o,a);return t.join("")}function yo(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],o=n[0][1],a=n[e][0]-i,c=n[e][1]-o,s=-1;++s<=e;)r=n[s],u=s/e,r[0]=t*r[0]+(1-t)*(i+u*a),r[1]=t*r[1]+(1-t)*(o+u*c);return po(n)}function xo(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Mo(n,t,e){n.push("C",xo(Ms,t),",",xo(Ms,e),",",xo(_s,t),",",xo(_s,e),",",xo(bs,t),",",xo(bs,e))}function _o(n,t){return(t[1]-n[1])/(t[0]-n[0])}function bo(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],o=r[0]=_o(u,i);++t<e;)r[t]=(o+(o=_o(u=i,i=n[t+1])))/2;return r[t]=o,r}function wo(n){for(var t,e,r,u,i=[],o=bo(n),a=-1,c=n.length-1;++a<c;)t=_o(n[a],n[a+1]),ua(t)<ka?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),o[a]=u*e,o[a+1]=u*r));for(a=-1;++a<=c;)u=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),i.push([u||0,o[a]*u||0]);return i}function So(n){return n.length<3?uo(n):n[0]+ho(n,wo(n))}function ko(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]+ms,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Eo(n){function t(t){function c(){v.push("M",a(n(m),f),l,s(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,x=t.length,M=bt(e),_=bt(u),b=e===r?function(){return g}:bt(r),w=u===i?function(){return p}:bt(i);++y<x;)o.call(this,h=t[y],y)?(d.push([g=+M.call(this,h,y),p=+_.call(this,h,y)]),m.push([+b.call(this,h,y),+w.call(this,h,y)])):d.length&&(c(),d=[],m=[]);return d.length&&c(),v.length?v.join(""):null}var e=wr,r=wr,u=0,i=Sr,o=we,a=uo,c=a.key,s=a,l="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?a=n:(a=xs.get(n)||uo).key,s=a.reverse||a,l=a.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Ao(n){return n.radius}function Co(n){return[n.x,n.y]}function No(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]+ms;return[e*Math.cos(r),e*Math.sin(r)]}}function zo(){return 64}function Lo(){return"circle"}function To(n){var t=Math.sqrt(n/ba);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function qo(n,t){return sa(n,Cs),n.id=t,n}function Ro(n,t,e,r){var u=n.id;return P(n,"function"==typeof e?function(n,i,o){n.__transition__[u].tween.set(t,r(e.call(n,n.__data__,i,o)))}:(e=r(e),function(n){n.__transition__[u].tween.set(t,e)}))}function Do(n){return null==n&&(n=""),function(){this.textContent=n}}function Po(n,t,e,r){var u=n.__transition__||(n.__transition__={active:0,count:0}),i=u[e];if(!i){var a=r.time;i=u[e]={tween:new o,time:a,ease:r.ease,delay:r.delay,duration:r.duration},++u.count,Zo.timer(function(r){function o(r){return u.active>e?s():(u.active=e,i.event&&i.event.start.call(n,l,t),i.tween.forEach(function(e,r){(r=r.call(n,l,t))&&v.push(r)}),void Zo.timer(function(){return p.c=c(r||1)?we:c,1},0,a))}function c(r){if(u.active!==e)return s();for(var o=r/g,a=f(o),c=v.length;c>0;)v[--c].call(n,a);return o>=1?(i.event&&i.event.end.call(n,l,t),s()):void 0}function s(){return--u.count?delete u[e]:delete n.__transition__,1}var l=n.__data__,f=i.ease,h=i.delay,g=i.duration,p=Ba,v=[];return p.t=h+a,r>=h?o(r-h):void(p.c=o)},0,a)}}function Uo(n,t){n.attr("transform",function(n){return"translate("+t(n)+",0)"})}function jo(n,t){n.attr("transform",function(n){return"translate(0,"+t(n)+")"})}function Ho(n){return n.toISOString()}function Fo(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=Zo.bisect(Us,u);return i==Us.length?[t.year,Fi(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Us[i-1]<Us[i]/u?i-1:i]:[Fs,Fi(n,e)[2]]}return r.invert=function(t){return Oo(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Oo)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Oo(+e+1),t).length}var i=r.domain(),o=Li(i),a=null==n?u(o,10):"number"==typeof n&&u(o,n);return a&&(n=a[0],t=a[1]),r.domain(Ri(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Oo(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Oo(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Li(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],Oo(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Fo(n.copy(),t,e)},ji(r,n)}function Oo(n){return new Date(n)}function Yo(n){return JSON.parse(n.responseText)}function Io(n){var t=$o.createRange();return t.selectNode($o.body),t.createContextualFragment(n.responseText)}var Zo={version:"3.4.8"};Date.now||(Date.now=function(){return+new Date});var Vo=[].slice,Xo=function(n){return Vo.call(n)},$o=document,Bo=$o.documentElement,Wo=window;try{Xo(Bo.childNodes)[0].nodeType}catch(Jo){Xo=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}try{$o.createElement("div").style.setProperty("opacity",0,"")}catch(Go){var Ko=Wo.Element.prototype,Qo=Ko.setAttribute,na=Ko.setAttributeNS,ta=Wo.CSSStyleDeclaration.prototype,ea=ta.setProperty;Ko.setAttribute=function(n,t){Qo.call(this,n,t+"")},Ko.setAttributeNS=function(n,t,e){na.call(this,n,t,e+"")},ta.setProperty=function(n,t,e){ea.call(this,n,t+"",e)}}Zo.ascending=n,Zo.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:0/0},Zo.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i&&!(null!=(e=n[u])&&e>=e);)e=void 0;for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i&&!(null!=(e=t.call(n,n[u],u))&&e>=e);)e=void 0;for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},Zo.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i&&!(null!=(e=n[u])&&e>=e);)e=void 0;for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i&&!(null!=(e=t.call(n,n[u],u))&&e>=e);)e=void 0;for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},Zo.extent=function(n,t){var e,r,u,i=-1,o=n.length;if(1===arguments.length){for(;++i<o&&!(null!=(e=u=n[i])&&e>=e);)e=u=void 0;for(;++i<o;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<o&&!(null!=(e=u=t.call(n,n[i],i))&&e>=e);)e=void 0;for(;++i<o;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},Zo.sum=function(n,t){var e,r=0,u=n.length,i=-1;if(1===arguments.length)for(;++i<u;)isNaN(e=+n[i])||(r+=e);else for(;++i<u;)isNaN(e=+t.call(n,n[i],i))||(r+=e);return r},Zo.mean=function(n,e){var r,u=0,i=n.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)t(r=n[o])?u+=r:--a;else for(;++o<i;)t(r=e.call(n,n[o],o))?u+=r:--a;return a?u/a:void 0},Zo.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},Zo.median=function(e,r){return arguments.length>1&&(e=e.map(r)),e=e.filter(t),e.length?Zo.quantile(e.sort(n),.5):void 0};var ra=e(n);Zo.bisectLeft=ra.left,Zo.bisect=Zo.bisectRight=ra.right,Zo.bisector=function(t){return e(1===t.length?function(e,r){return n(t(e),r)}:t)},Zo.shuffle=function(n){for(var t,e,r=n.length;r;)e=Math.random()*r--|0,t=n[r],n[r]=n[e],n[e]=t;return n},Zo.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},Zo.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},Zo.zip=function(){if(!(u=arguments.length))return[];for(var n=-1,t=Zo.min(arguments,r),e=new Array(t);++n<t;)for(var u,i=-1,o=e[n]=new Array(u);++i<u;)o[i]=arguments[i][n];return e},Zo.transpose=function(n){return Zo.zip.apply(Zo,n)},Zo.keys=function(n){var t=[];for(var e in n)t.push(e);return t},Zo.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},Zo.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},Zo.merge=function(n){for(var t,e,r,u=n.length,i=-1,o=0;++i<u;)o+=n[i].length;for(e=new Array(o);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--o]=r[t];return e};var ua=Math.abs;Zo.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range");var r,i=[],o=u(ua(e)),a=-1;if(n*=o,t*=o,e*=o,0>e)for(;(r=n+e*++a)>t;)i.push(r/o);else for(;(r=n+e*++a)<t;)i.push(r/o);return i},Zo.map=function(n){var t=new o;if(n instanceof o)n.forEach(function(n,e){t.set(n,e)});else for(var e in n)t.set(e,n[e]);return t},i(o,{has:a,get:function(n){return this[ia+n]},set:function(n,t){return this[ia+n]=t},remove:c,keys:s,values:function(){var n=[];return this.forEach(function(t,e){n.push(e)}),n},entries:function(){var n=[];return this.forEach(function(t,e){n.push({key:t,value:e})}),n},size:l,empty:f,forEach:function(n){for(var t in this)t.charCodeAt(0)===oa&&n.call(this,t.substring(1),this[t])}});var ia="\x00",oa=ia.charCodeAt(0);Zo.nest=function(){function n(t,a,c){if(c>=i.length)return r?r.call(u,a):e?a.sort(e):a;for(var s,l,f,h,g=-1,p=a.length,v=i[c++],d=new o;++g<p;)(h=d.get(s=v(l=a[g])))?h.push(l):d.set(s,[l]);return t?(l=t(),f=function(e,r){l.set(e,n(t,r,c))}):(l={},f=function(e,r){l[e]=n(t,r,c)}),d.forEach(f),l}function t(n,e){if(e>=i.length)return n;var r=[],u=a[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],a=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(Zo.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return a[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},Zo.set=function(n){var t=new h;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},i(h,{has:a,add:function(n){return this[ia+n]=!0,n},remove:function(n){return n=ia+n,n in this&&delete this[n]},values:s,size:l,empty:f,forEach:function(n){for(var t in this)t.charCodeAt(0)===oa&&n.call(this,t.substring(1))}}),Zo.behavior={},Zo.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=g(n,t,t[e]);return n};var aa=["webkit","ms","moz","Moz","o","O"];Zo.dispatch=function(){for(var n=new d,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=m(n);return n},d.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.substring(e+1),n=n.substring(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},Zo.event=null,Zo.requote=function(n){return n.replace(ca,"\\$&")};var ca=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,sa={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},la=function(n,t){return t.querySelector(n)},fa=function(n,t){return t.querySelectorAll(n)},ha=Bo.matches||Bo[p(Bo,"matchesSelector")],ga=function(n,t){return ha.call(n,t)};"function"==typeof Sizzle&&(la=function(n,t){return Sizzle(n,t)[0]||null},fa=Sizzle,ga=Sizzle.matchesSelector),Zo.selection=function(){return ma};var pa=Zo.selection.prototype=[];pa.select=function(n){var t,e,r,u,i=[];n=b(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,s=r.length;++c<s;)(u=r[c])?(t.push(e=n.call(u,u.__data__,c,o)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return _(i)},pa.selectAll=function(n){var t,e,r=[];n=w(n);for(var u=-1,i=this.length;++u<i;)for(var o=this[u],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=Xo(n.call(e,e.__data__,a,u))),t.parentNode=e);return _(r)};var va={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Zo.ns={prefix:va,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&(e=n.substring(0,t),n=n.substring(t+1)),va.hasOwnProperty(e)?{space:va[e],local:n}:n}},pa.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=Zo.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(S(t,n[t]));return this}return this.each(S(n,t))},pa.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=A(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute("class");++u<r;)if(!E(n[u]).test(t))return!1;return!0}for(t in n)this.each(C(t,n[t]));return this}return this.each(C(n,t))},pa.style=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t="");for(e in n)this.each(z(e,n[e],t));return this}if(2>r)return Wo.getComputedStyle(this.node(),null).getPropertyValue(n);e=""}return this.each(z(n,t,e))},pa.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(L(t,n[t]));return this}return this.each(L(n,t))},pa.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},pa.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},pa.append=function(n){return n=T(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},pa.insert=function(n,t){return n=T(n),t=b(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},pa.remove=function(){return this.each(function(){var n=this.parentNode;n&&n.removeChild(this)})},pa.data=function(n,t){function e(n,e){var r,u,i,a=n.length,f=e.length,h=Math.min(a,f),g=new Array(f),p=new Array(f),v=new Array(a);if(t){var d,m=new o,y=new o,x=[];for(r=-1;++r<a;)d=t.call(u=n[r],u.__data__,r),m.has(d)?v[r]=u:m.set(d,u),x.push(d);for(r=-1;++r<f;)d=t.call(e,i=e[r],r),(u=m.get(d))?(g[r]=u,u.__data__=i):y.has(d)||(p[r]=q(i)),y.set(d,i),m.remove(d);for(r=-1;++r<a;)m.has(x[r])&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=q(i);for(;f>r;++r)p[r]=q(e[r]);for(;a>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,c.push(p),s.push(g),l.push(v)}var r,u,i=-1,a=this.length;if(!arguments.length){for(n=new Array(a=(r=this[0]).length);++i<a;)(u=r[i])&&(n[i]=u.__data__);return n}var c=U([]),s=_([]),l=_([]);if("function"==typeof n)for(;++i<a;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<a;)e(r=this[i],n);return s.enter=function(){return c},s.exit=function(){return l},s},pa.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},pa.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=R(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return _(u)},pa.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},pa.sort=function(n){n=D.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},pa.each=function(n){return P(this,function(t,e,r){n.call(t,t.__data__,e,r)})},pa.call=function(n){var t=Xo(arguments);return n.apply(t[0]=this,t),this},pa.empty=function(){return!this.node()},pa.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},pa.size=function(){var n=0;return this.each(function(){++n}),n};var da=[];Zo.selection.enter=U,Zo.selection.enter.prototype=da,da.append=pa.append,da.empty=pa.empty,da.node=pa.node,da.call=pa.call,da.size=pa.size,da.select=function(n){for(var t,e,r,u,i,o=[],a=-1,c=this.length;++a<c;){r=(u=this[a]).update,o.push(t=[]),t.parentNode=u.parentNode;for(var s=-1,l=u.length;++s<l;)(i=u[s])?(t.push(r[s]=e=n.call(u.parentNode,i.__data__,s,a)),e.__data__=i.__data__):t.push(null)}return _(o)},da.insert=function(n,t){return arguments.length<2&&(t=j(this)),pa.insert.call(this,n,t)},pa.transition=function(){for(var n,t,e=Ss||++Ns,r=[],u=ks||{time:Date.now(),ease:xu,delay:0,duration:250},i=-1,o=this.length;++i<o;){r.push(n=[]);for(var a=this[i],c=-1,s=a.length;++c<s;)(t=a[c])&&Po(t,c,e,u),n.push(t)
}return qo(r,e)},pa.interrupt=function(){return this.each(H)},Zo.select=function(n){var t=["string"==typeof n?la(n,$o):n];return t.parentNode=Bo,_([t])},Zo.selectAll=function(n){var t=Xo("string"==typeof n?fa(n,$o):n);return t.parentNode=Bo,_([t])};var ma=Zo.select(Bo);pa.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(F(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(F(n,t,e))};var ya=Zo.map({mouseenter:"mouseover",mouseleave:"mouseout"});ya.forEach(function(n){"on"+n in $o&&ya.remove(n)});var xa="onselectstart"in $o?null:p(Bo.style,"userSelect"),Ma=0;Zo.mouse=function(n){return Z(n,x())};var _a=/WebKit/.test(Wo.navigator.userAgent)?-1:0;Zo.touches=function(n,t){return arguments.length<2&&(t=x().touches),t?Xo(t).map(function(t){var e=Z(n,t);return e.identifier=t.identifier,e}):[]},Zo.behavior.drag=function(){function n(){this.on("mousedown.drag",u).on("touchstart.drag",i)}function t(n,t,u,i,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-x[0],e=r[1]-x[1],p|=n|e,x=r,g({type:"drag",x:r[0]+s[0],y:r[1]+s[1],dx:n,dy:e}))}function c(){t(h,v)&&(m.on(i+d,null).on(o+d,null),y(p&&Zo.event.target===f),g({type:"dragend"}))}var s,l=this,f=Zo.event.target,h=l.parentNode,g=e.of(l,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=Zo.select(u()).on(i+d,a).on(o+d,c),y=I(),x=t(h,v);r?(s=r.apply(l,arguments),s=[s.x-x[0],s.y-x[1]]):s=[0,0],g({type:"dragstart"})}}var e=M(n,"drag","dragstart","dragend"),r=null,u=t(v,Zo.mouse,$,"mousemove","mouseup"),i=t(V,Zo.touch,X,"touchmove","touchend");return n.origin=function(t){return arguments.length?(r=t,n):r},Zo.rebind(n,e,"on")};var ba=Math.PI,wa=2*ba,Sa=ba/2,ka=1e-6,Ea=ka*ka,Aa=ba/180,Ca=180/ba,Na=Math.SQRT2,za=2,La=4;Zo.interpolateZoom=function(n,t){function e(n){var t=n*y;if(m){var e=Q(v),o=i/(za*h)*(e*nt(Na*t+v)-K(v));return[r+o*s,u+o*l,i*e/Q(Na*t+v)]}return[r+n*s,u+n*l,i*Math.exp(Na*t)]}var r=n[0],u=n[1],i=n[2],o=t[0],a=t[1],c=t[2],s=o-r,l=a-u,f=s*s+l*l,h=Math.sqrt(f),g=(c*c-i*i+La*f)/(2*i*za*h),p=(c*c-i*i-La*f)/(2*c*za*h),v=Math.log(Math.sqrt(g*g+1)-g),d=Math.log(Math.sqrt(p*p+1)-p),m=d-v,y=(m||Math.log(c/i))/Na;return e.duration=1e3*y,e},Zo.behavior.zoom=function(){function n(n){n.on(A,s).on(Ra+".zoom",f).on("dblclick.zoom",h).on(z,l)}function t(n){return[(n[0]-S.x)/S.k,(n[1]-S.y)/S.k]}function e(n){return[n[0]*S.k+S.x,n[1]*S.k+S.y]}function r(n){S.k=Math.max(E[0],Math.min(E[1],n))}function u(n,t){t=e(t),S.x+=n[0]-t[0],S.y+=n[1]-t[1]}function i(){_&&_.domain(x.range().map(function(n){return(n-S.x)/S.k}).map(x.invert)),w&&w.domain(b.range().map(function(n){return(n-S.y)/S.k}).map(b.invert))}function o(n){n({type:"zoomstart"})}function a(n){i(),n({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(n){n({type:"zoomend"})}function s(){function n(){l=1,u(Zo.mouse(r),h),a(s)}function e(){f.on(C,null).on(N,null),g(l&&Zo.event.target===i),c(s)}var r=this,i=Zo.event.target,s=L.of(r,arguments),l=0,f=Zo.select(Wo).on(C,n).on(N,e),h=t(Zo.mouse(r)),g=I();H.call(r),o(s)}function l(){function n(){var n=Zo.touches(g);return h=S.k,n.forEach(function(n){n.identifier in v&&(v[n.identifier]=t(n))}),n}function e(){var t=Zo.event.target;Zo.select(t).on(M,i).on(_,f),b.push(t);for(var e=Zo.event.changedTouches,o=0,c=e.length;c>o;++o)v[e[o].identifier]=null;var s=n(),l=Date.now();if(1===s.length){if(500>l-m){var h=s[0],g=v[h.identifier];r(2*S.k),u(h,g),y(),a(p)}m=l}else if(s.length>1){var h=s[0],x=s[1],w=h[0]-x[0],k=h[1]-x[1];d=w*w+k*k}}function i(){for(var n,t,e,i,o=Zo.touches(g),c=0,s=o.length;s>c;++c,i=null)if(e=o[c],i=v[e.identifier]){if(t)break;n=e,t=i}if(i){var l=(l=e[0]-n[0])*l+(l=e[1]-n[1])*l,f=d&&Math.sqrt(l/d);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+i[0])/2,(t[1]+i[1])/2],r(f*h)}m=null,u(n,t),a(p)}function f(){if(Zo.event.touches.length){for(var t=Zo.event.changedTouches,e=0,r=t.length;r>e;++e)delete v[t[e].identifier];for(var u in v)return void n()}Zo.selectAll(b).on(x,null),w.on(A,s).on(z,l),k(),c(p)}var h,g=this,p=L.of(g,arguments),v={},d=0,x=".zoom-"+Zo.event.changedTouches[0].identifier,M="touchmove"+x,_="touchend"+x,b=[],w=Zo.select(g).on(A,null).on(z,e),k=I();H.call(g),e(),o(p)}function f(){var n=L.of(this,arguments);d?clearTimeout(d):(g=t(p=v||Zo.mouse(this)),H.call(this),o(n)),d=setTimeout(function(){d=null,c(n)},50),y(),r(Math.pow(2,.002*Ta())*S.k),u(p,g),a(n)}function h(){var n=L.of(this,arguments),e=Zo.mouse(this),i=t(e),s=Math.log(S.k)/Math.LN2;o(n),r(Math.pow(2,Zo.event.shiftKey?Math.ceil(s)-1:Math.floor(s)+1)),u(e,i),a(n),c(n)}var g,p,v,d,m,x,_,b,w,S={x:0,y:0,k:1},k=[960,500],E=qa,A="mousedown.zoom",C="mousemove.zoom",N="mouseup.zoom",z="touchstart.zoom",L=M(n,"zoomstart","zoom","zoomend");return n.event=function(n){n.each(function(){var n=L.of(this,arguments),t=S;Ss?Zo.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},o(n)}).tween("zoom:zoom",function(){var e=k[0],r=k[1],u=e/2,i=r/2,o=Zo.interpolateZoom([(u-S.x)/S.k,(i-S.y)/S.k,e/S.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=o(t),c=e/r[2];this.__chart__=S={x:u-r[0]*c,y:i-r[1]*c,k:c},a(n)}}).each("end.zoom",function(){c(n)}):(this.__chart__=S,o(n),a(n),c(n))})},n.translate=function(t){return arguments.length?(S={x:+t[0],y:+t[1],k:S.k},i(),n):[S.x,S.y]},n.scale=function(t){return arguments.length?(S={x:S.x,y:S.y,k:+t},i(),n):S.k},n.scaleExtent=function(t){return arguments.length?(E=null==t?qa:[+t[0],+t[1]],n):E},n.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],n):v},n.size=function(t){return arguments.length?(k=t&&[+t[0],+t[1]],n):k},n.x=function(t){return arguments.length?(_=t,x=t.copy(),S={x:0,y:0,k:1},n):_},n.y=function(t){return arguments.length?(w=t,b=t.copy(),S={x:0,y:0,k:1},n):w},Zo.rebind(n,L,"on")};var Ta,qa=[0,1/0],Ra="onwheel"in $o?(Ta=function(){return-Zo.event.deltaY*(Zo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in $o?(Ta=function(){return Zo.event.wheelDelta},"mousewheel"):(Ta=function(){return-Zo.event.detail},"MozMousePixelScroll");Zo.color=et,et.prototype.toString=function(){return this.rgb()+""},Zo.hsl=rt;var Da=rt.prototype=new et;Da.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new rt(this.h,this.s,this.l/n)},Da.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new rt(this.h,this.s,n*this.l)},Da.rgb=function(){return ut(this.h,this.s,this.l)},Zo.hcl=it;var Pa=it.prototype=new et;Pa.brighter=function(n){return new it(this.h,this.c,Math.min(100,this.l+Ua*(arguments.length?n:1)))},Pa.darker=function(n){return new it(this.h,this.c,Math.max(0,this.l-Ua*(arguments.length?n:1)))},Pa.rgb=function(){return ot(this.h,this.c,this.l).rgb()},Zo.lab=at;var Ua=18,ja=.95047,Ha=1,Fa=1.08883,Oa=at.prototype=new et;Oa.brighter=function(n){return new at(Math.min(100,this.l+Ua*(arguments.length?n:1)),this.a,this.b)},Oa.darker=function(n){return new at(Math.max(0,this.l-Ua*(arguments.length?n:1)),this.a,this.b)},Oa.rgb=function(){return ct(this.l,this.a,this.b)},Zo.rgb=gt;var Ya=gt.prototype=new et;Ya.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),new gt(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new gt(u,u,u)},Ya.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new gt(n*this.r,n*this.g,n*this.b)},Ya.hsl=function(){return yt(this.r,this.g,this.b)},Ya.toString=function(){return"#"+dt(this.r)+dt(this.g)+dt(this.b)};var Ia=Zo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ia.forEach(function(n,t){Ia.set(n,pt(t))}),Zo.functor=bt,Zo.xhr=St(wt),Zo.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var o=kt(n,t,null==e?r:u(e),i);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:u(n)):e},o}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(o).join(n)}function o(n){return a.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var a=new RegExp('["'+n+"\n]"),c=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(l>=s)return o;if(u)return u=!1,i;var t=l;if(34===n.charCodeAt(t)){for(var e=t;e++<s;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}l=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++l):10===r&&(u=!0),n.substring(t+1,e).replace(/""/g,'"')}for(;s>l;){var r=n.charCodeAt(l++),a=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(l)&&(++l,++a);else if(r!==c)continue;return n.substring(t,l-a)}return n.substring(t)}for(var r,u,i={},o={},a=[],s=n.length,l=0,f=0;(r=e())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=e();(!t||(h=t(h,f++)))&&a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new h,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(o).join(n)].concat(t.map(function(t){return u.map(function(n){return o(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},Zo.csv=Zo.dsv(",","text/csv"),Zo.tsv=Zo.dsv("	","text/tab-separated-values"),Zo.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=x().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return Z(n,r)};var Za,Va,Xa,$a,Ba,Wa=Wo[p(Wo,"requestAnimationFrame")]||function(n){setTimeout(n,17)};Zo.timer=function(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,f:!1,n:null};Va?Va.n=i:Za=i,Va=i,Xa||($a=clearTimeout($a),Xa=1,Wa(At))},Zo.timer.flush=function(){Ct(),Nt()},Zo.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var Ja=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Lt);Zo.formatPrefix=function(n,t){var e=0;return n&&(0>n&&(n*=-1),t&&(n=Zo.round(n,zt(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),Ja[8+e/3]};var Ga=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ka=Zo.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=Zo.round(n,zt(n,t))).toFixed(Math.max(0,Math.min(20,zt(n*(1+1e-15),t))))}}),Qa=Zo.time={},nc=Date;Rt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){tc.setUTCDate.apply(this._,arguments)},setDay:function(){tc.setUTCDay.apply(this._,arguments)},setFullYear:function(){tc.setUTCFullYear.apply(this._,arguments)},setHours:function(){tc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){tc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){tc.setUTCMinutes.apply(this._,arguments)},setMonth:function(){tc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){tc.setUTCSeconds.apply(this._,arguments)},setTime:function(){tc.setTime.apply(this._,arguments)}};var tc=Date.prototype;Qa.year=Dt(function(n){return n=Qa.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),Qa.years=Qa.year.range,Qa.years.utc=Qa.year.utc.range,Qa.day=Dt(function(n){var t=new nc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),Qa.days=Qa.day.range,Qa.days.utc=Qa.day.utc.range,Qa.dayOfYear=function(n){var t=Qa.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=Qa[n]=Dt(function(n){return(n=Qa.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=Qa.year(n).getDay();return Math.floor((Qa.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});Qa[n+"s"]=e.range,Qa[n+"s"].utc=e.utc.range,Qa[n+"OfYear"]=function(n){var e=Qa.year(n).getDay();return Math.floor((Qa.dayOfYear(n)+(e+t)%7)/7)}}),Qa.week=Qa.sunday,Qa.weeks=Qa.sunday.range,Qa.weeks.utc=Qa.sunday.utc.range,Qa.weekOfYear=Qa.sundayOfYear;var ec={"-":"",_:" ",0:"0"},rc=/^\s*\d+/,uc=/^%/;Zo.locale=function(n){return{numberFormat:Tt(n),timeFormat:Ut(n)}};var ic=Zo.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Zo.format=ic.numberFormat,Zo.geo={},ue.prototype={s:0,t:0,add:function(n){ie(n,this.t,oc),ie(oc.s,this.s,this),this.s?this.t+=oc.t:this.s=oc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var oc=new ue;Zo.geo.stream=function(n,t){n&&ac.hasOwnProperty(n.type)?ac[n.type](n,t):oe(n,t)};var ac={Feature:function(n,t){oe(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)oe(e[r].geometry,t)}},cc={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){ae(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)ae(e[r],t,0)},Polygon:function(n,t){ce(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)ce(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)oe(e[r],t)}};Zo.geo.area=function(n){return sc=0,Zo.geo.stream(n,fc),sc};var sc,lc=new ue,fc={sphere:function(){sc+=4*ba},point:v,lineStart:v,lineEnd:v,polygonStart:function(){lc.reset(),fc.lineStart=se},polygonEnd:function(){var n=2*lc;sc+=0>n?4*ba+n:n,fc.lineStart=fc.lineEnd=fc.point=v}};Zo.geo.bounds=function(){function n(n,t){x.push(M=[l=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=le([t*Aa,e*Aa]);if(m){var u=he(m,r),i=[u[1],-u[0],0],o=he(i,u);ve(o),o=de(o);var c=t-p,s=c>0?1:-1,v=o[0]*Ca*s,d=ua(c)>180;if(d^(v>s*p&&s*t>v)){var y=o[1]*Ca;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>s*p&&s*t>v)){var y=-o[1]*Ca;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?a(l,t)>a(l,h)&&(h=t):a(t,h)>a(l,h)&&(l=t):h>=l?(l>t&&(l=t),t>h&&(h=t)):t>p?a(l,t)>a(l,h)&&(h=t):a(t,h)>a(l,h)&&(l=t)}else n(t,e);m=r,p=t}function e(){_.point=t}function r(){M[0]=l,M[1]=h,_.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=ua(r)>180?r+(r>0?360:-360):r}else v=n,d=e;fc.point(n,e),t(n,e)}function i(){fc.lineStart()}function o(){u(v,d),fc.lineEnd(),ua(y)>ka&&(l=-(h=180)),M[0]=l,M[1]=h,m=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function s(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var l,f,h,g,p,v,d,m,y,x,M,_={point:n,lineStart:e,lineEnd:r,polygonStart:function(){_.point=u,_.lineStart=i,_.lineEnd=o,y=0,fc.polygonStart()},polygonEnd:function(){fc.polygonEnd(),_.point=n,_.lineStart=e,_.lineEnd=r,0>lc?(l=-(h=180),f=-(g=90)):y>ka?g=90:-ka>y&&(f=-90),M[0]=l,M[1]=h}};return function(n){g=h=-(l=f=1/0),x=[],Zo.geo.stream(n,_);var t=x.length;if(t){x.sort(c);for(var e,r=1,u=x[0],i=[u];t>r;++r)e=x[r],s(e[0],u)||s(e[1],u)?(a(u[0],e[1])>a(u[0],u[1])&&(u[1]=e[1]),a(e[0],u[1])>a(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var o,e,p=-1/0,t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(o=a(u[1],e[0]))>p&&(p=o,l=e[0],h=u[1])}return x=M=null,1/0===l||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[l,f],[h,g]]}}(),Zo.geo.centroid=function(n){hc=gc=pc=vc=dc=mc=yc=xc=Mc=_c=bc=0,Zo.geo.stream(n,wc);var t=Mc,e=_c,r=bc,u=t*t+e*e+r*r;return Ea>u&&(t=mc,e=yc,r=xc,ka>gc&&(t=pc,e=vc,r=dc),u=t*t+e*e+r*r,Ea>u)?[0/0,0/0]:[Math.atan2(e,t)*Ca,G(r/Math.sqrt(u))*Ca]};var hc,gc,pc,vc,dc,mc,yc,xc,Mc,_c,bc,wc={sphere:v,point:ye,lineStart:Me,lineEnd:_e,polygonStart:function(){wc.lineStart=be},polygonEnd:function(){wc.lineStart=Me}},Sc=Ae(we,Te,Re,[-ba,-ba/2]),kc=1e9;Zo.geo.clipExtent=function(){var n,t,e,r,u,i,o={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(a){return arguments.length?(i=Ue(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),u&&(u.valid=!1,u=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(Zo.geo.conicEqualArea=function(){return He(Fe)}).raw=Fe,Zo.geo.albers=function(){return Zo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Zo.geo.albersUsa=function(){function n(n){var i=n[0],o=n[1];return t=null,e(i,o),t||(r(i,o),t)||u(i,o),t}var t,e,r,u,i=Zo.geo.albers(),o=Zo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=Zo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?o:u>=.166&&.234>u&&r>=-.214&&-.115>r?a:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),a.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),a.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var s=i.scale(),l=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[l-.455*s,f-.238*s],[l+.455*s,f+.238*s]]).stream(c).point,r=o.translate([l-.307*s,f+.201*s]).clipExtent([[l-.425*s+ka,f+.12*s+ka],[l-.214*s-ka,f+.234*s-ka]]).stream(c).point,u=a.translate([l-.205*s,f+.212*s]).clipExtent([[l-.214*s+ka,f+.166*s+ka],[l-.115*s-ka,f+.234*s-ka]]).stream(c).point,n},n.scale(1070)};var Ec,Ac,Cc,Nc,zc,Lc,Tc={point:v,lineStart:v,lineEnd:v,polygonStart:function(){Ac=0,Tc.lineStart=Oe},polygonEnd:function(){Tc.lineStart=Tc.lineEnd=Tc.point=v,Ec+=ua(Ac/2)}},qc={point:Ye,lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},Rc={point:Ve,lineStart:Xe,lineEnd:$e,polygonStart:function(){Rc.lineStart=Be},polygonEnd:function(){Rc.point=Ve,Rc.lineStart=Xe,Rc.lineEnd=$e}};Zo.geo.path=function(){function n(n){return n&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=u(i)),Zo.geo.stream(n,o)),i.result()}function t(){return o=null,n}var e,r,u,i,o,a=4.5;return n.area=function(n){return Ec=0,Zo.geo.stream(n,u(Tc)),Ec},n.centroid=function(n){return pc=vc=dc=mc=yc=xc=Mc=_c=bc=0,Zo.geo.stream(n,u(Rc)),bc?[Mc/bc,_c/bc]:xc?[mc/xc,yc/xc]:dc?[pc/dc,vc/dc]:[0/0,0/0]},n.bounds=function(n){return zc=Lc=-(Cc=Nc=1/0),Zo.geo.stream(n,u(qc)),[[Cc,Nc],[zc,Lc]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||Ge(n):wt,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new Ie:new We(n),"function"!=typeof a&&i.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),n):a},n.projection(Zo.geo.albersUsa()).context(null)},Zo.geo.transform=function(n){return{stream:function(t){var e=new Ke(t);for(var r in n)e[r]=n[r];return e}}},Ke.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Zo.geo.projection=nr,Zo.geo.projectionMutator=tr,(Zo.geo.equirectangular=function(){return nr(rr)}).raw=rr.invert=rr,Zo.geo.rotation=function(n){function t(t){return t=n(t[0]*Aa,t[1]*Aa),t[0]*=Ca,t[1]*=Ca,t}return n=ir(n[0]%360*Aa,n[1]*Aa,n.length>2?n[2]*Aa:0),t.invert=function(t){return t=n.invert(t[0]*Aa,t[1]*Aa),t[0]*=Ca,t[1]*=Ca,t},t},ur.invert=rr,Zo.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=ir(-n[0]*Aa,-n[1]*Aa,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Ca,n[1]*=Ca}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=sr((t=+r)*Aa,u*Aa),n):t},n.precision=function(r){return arguments.length?(e=sr(t*Aa,(u=+r)*Aa),n):u},n.angle(90)},Zo.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Aa,u=n[1]*Aa,i=t[1]*Aa,o=Math.sin(r),a=Math.cos(r),c=Math.sin(u),s=Math.cos(u),l=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*o)*e+(e=s*l-c*f*a)*e),c*l+s*f*a)},Zo.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return Zo.range(Math.ceil(i/d)*d,u,d).map(h).concat(Zo.range(Math.ceil(s/m)*m,c,m).map(g)).concat(Zo.range(Math.ceil(r/p)*p,e,p).filter(function(n){return ua(n%d)>ka}).map(l)).concat(Zo.range(Math.ceil(a/v)*v,o,v).filter(function(n){return ua(n%m)>ka}).map(f))}var e,r,u,i,o,a,c,s,l,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(c).slice(1),h(u).reverse().slice(1),g(s).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],s=+t[0][1],c=+t[1][1],i>u&&(t=i,i=u,u=t),s>c&&(t=s,s=c,c=t),n.precision(y)):[[i,s],[u,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(y)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,l=fr(a,o,90),f=hr(r,e,y),h=fr(s,c,90),g=hr(i,u,y),n):y},n.majorExtent([[-180,-90+ka],[180,90-ka]]).minorExtent([[-180,-80-ka],[180,80+ka]])},Zo.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=gr,u=pr;return n.distance=function(){return Zo.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e="function"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},Zo.geo.interpolate=function(n,t){return vr(n[0]*Aa,n[1]*Aa,t[0]*Aa,t[1]*Aa)},Zo.geo.length=function(n){return Dc=0,Zo.geo.stream(n,Pc),Dc};var Dc,Pc={sphere:v,point:v,lineStart:dr,lineEnd:v,polygonStart:v,polygonEnd:v},Uc=mr(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(Zo.geo.azimuthalEqualArea=function(){return nr(Uc)}).raw=Uc;var jc=mr(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},wt);(Zo.geo.azimuthalEquidistant=function(){return nr(jc)}).raw=jc,(Zo.geo.conicConformal=function(){return He(yr)}).raw=yr,(Zo.geo.conicEquidistant=function(){return He(xr)}).raw=xr;var Hc=mr(function(n){return 1/n},Math.atan);(Zo.geo.gnomonic=function(){return nr(Hc)}).raw=Hc,Mr.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Sa]},(Zo.geo.mercator=function(){return _r(Mr)}).raw=Mr;var Fc=mr(function(){return 1},Math.asin);(Zo.geo.orthographic=function(){return nr(Fc)}).raw=Fc;var Oc=mr(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(Zo.geo.stereographic=function(){return nr(Oc)}).raw=Oc,br.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Sa]},(Zo.geo.transverseMercator=function(){var n=_r(br),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=br,Zo.geom={},Zo.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=bt(e),i=bt(r),o=n.length,a=[],c=[];for(t=0;o>t;t++)a.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(a.sort(Er),t=0;o>t;t++)c.push([a[t][0],-a[t][1]]);var s=kr(a),l=kr(c),f=l[0]===s[0],h=l[l.length-1]===s[s.length-1],g=[];for(t=s.length-1;t>=0;--t)g.push(n[a[s[t]][2]]);for(t=+f;t<l.length-h;++t)g.push(n[a[l[t]][2]]);return g}var e=wr,r=Sr;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},Zo.geom.polygon=function(n){return sa(n,Yc),n};var Yc=Zo.geom.polygon.prototype=[];Yc.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},Yc.centroid=function(n){var t,e,r=-1,u=this.length,i=0,o=0,a=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],i+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[i*n,o*n]},Yc.clip=function(n){for(var t,e,r,u,i,o,a=Nr(n),c=-1,s=this.length-Nr(this),l=this[s-1];++c<s;){for(t=n.slice(),n.length=0,u=this[c],i=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],Ar(o,l,u)?(Ar(i,l,u)||n.push(Cr(i,o,l,u)),n.push(o)):Ar(i,l,u)&&n.push(Cr(i,o,l,u)),i=o;a&&n.push(n[0]),l=u}return n};var Ic,Zc,Vc,Xc,$c,Bc=[],Wc=[];Ur.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Hr),t.length},Wr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Jr.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=nu(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(Kr(this,e),n=e,e=n.U),e.C=!1,r.C=!0,Qr(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(Qr(this,e),n=e,e=n.U),e.C=!1,r.C=!0,Kr(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,o=n.R;if(e=i?o?nu(o):i:o,u?u.L===n?u.L=e:u.R=e:this._=e,i&&o?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==o?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=o,o.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,Kr(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Qr(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,Kr(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,Qr(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Kr(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,Qr(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},Zo.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],u=a[0][1],i=a[1][0],o=a[1][1];return tu(e(n),a).cells.forEach(function(e,a){var c=e.edges,s=e.site,l=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):s.x>=r&&s.x<=i&&s.y>=u&&s.y<=o?[[r,o],[i,o],[i,u],[r,u]]:[];l.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/ka)*ka,y:Math.round(o(n,t)/ka)*ka,i:t}})}var r=wr,u=Sr,i=r,o=u,a=Jc;return n?t(n):(t.links=function(n){return tu(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return tu(e(n)).cells.forEach(function(e,r){for(var u,i,o=e.site,a=e.edges.sort(Hr),c=-1,s=a.length,l=a[s-1].edge,f=l.l===o?l.r:l.l;++c<s;)u=l,i=f,l=a[c].edge,f=l.l===o?l.r:l.l,r<i.i&&r<f.i&&ru(o,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=bt(r=n),t):r},t.y=function(n){return arguments.length?(o=bt(u=n),t):u},t.clipExtent=function(n){return arguments.length?(a=null==n?Jc:n,t):a===Jc?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===Jc?null:a&&a[1]},t)};var Jc=[[-1e6,-1e6],[1e6,1e6]];Zo.geom.delaunay=function(n){return Zo.geom.voronoi().triangles(n)},Zo.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,l=n.y;if(null!=c)if(ua(c-e)+ua(l-r)<.01)s(n,t,e,r,u,i,o,a);
else{var f=n.point;n.x=n.y=n.point=null,s(n,f,c,l,u,i,o,a),s(n,t,e,r,u,i,o,a)}else n.x=e,n.y=r,n.point=t}else s(n,t,e,r,u,i,o,a)}function s(n,t,e,r,u,o,a,c){var s=.5*(u+a),l=.5*(o+c),f=e>=s,h=r>=l,g=(h<<1)+f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=ou()),f?u=s:a=s,h?o=l:c=l,i(n,t,e,r,u,o,a,c)}var l,f,h,g,p,v,d,m,y,x=bt(a),M=bt(c);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,o)for(g=0;p>g;++g)l=n[g],l.x<v&&(v=l.x),l.y<d&&(d=l.y),l.x>m&&(m=l.x),l.y>y&&(y=l.y),f.push(l.x),h.push(l.y);else for(g=0;p>g;++g){var _=+x(l=n[g],g),b=+M(l,g);v>_&&(v=_),d>b&&(d=b),_>m&&(m=_),b>y&&(y=b),f.push(_),h.push(b)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=ou();if(k.add=function(n){i(k,n,+x(n,++g),+M(n,g),v,d,m,y)},k.visit=function(n){au(n,k,v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=l=null,k}var o,a=wr,c=Sr;return(o=arguments.length)?(a=uu,c=iu,3===o&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(a=n,i):a},i.y=function(n){return arguments.length?(c=n,i):c},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},Zo.interpolateRgb=cu,Zo.interpolateObject=su,Zo.interpolateNumber=lu,Zo.interpolateString=fu;var Gc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kc=new RegExp(Gc.source,"g");Zo.interpolate=hu,Zo.interpolators=[function(n,t){var e=typeof t;return("string"===e?Ia.has(t)||/^(#|rgb\(|hsl\()/.test(t)?cu:fu:t instanceof et?cu:Array.isArray(t)?gu:"object"===e&&isNaN(t)?su:lu)(n,t)}],Zo.interpolateArray=gu;var Qc=function(){return wt},ns=Zo.map({linear:Qc,poly:Mu,quad:function(){return mu},cubic:function(){return yu},sin:function(){return _u},exp:function(){return bu},circle:function(){return wu},elastic:Su,back:ku,bounce:function(){return Eu}}),ts=Zo.map({"in":wt,out:vu,"in-out":du,"out-in":function(n){return du(vu(n))}});Zo.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.substring(0,t):n,r=t>=0?n.substring(t+1):"in";return e=ns.get(e)||Qc,r=ts.get(r)||wt,pu(r(e.apply(null,Vo.call(arguments,1))))},Zo.interpolateHcl=Au,Zo.interpolateHsl=Cu,Zo.interpolateLab=Nu,Zo.interpolateRound=zu,Zo.transform=function(n){var t=$o.createElementNS(Zo.ns.prefix.svg,"g");return(Zo.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new Lu(e?e.matrix:es)})(n)},Lu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var es={a:1,b:0,c:0,d:1,e:0,f:0};Zo.interpolateTransform=Du,Zo.layout={},Zo.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(ju(n[e]));return t}},Zo.layout.chord=function(){function n(){var n,s,f,h,g,p={},v=[],d=Zo.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(s=0,g=-1;++g<i;)s+=u[h][g];v.push(s),m.push(Zo.range(i)),n+=s}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&m.forEach(function(n,t){n.sort(function(n,e){return a(u[t][n],u[t][e])})}),n=(wa-l*i)/n,s=0,h=-1;++h<i;){for(f=s,g=-1;++g<i;){var y=d[h],x=m[y][g],M=u[y][x],_=s,b=s+=M*n;p[y+"-"+x]={index:y,subindex:x,startAngle:_,endAngle:b,value:M}}r[y]={index:y,startAngle:f,endAngle:s,value:(s-f)/n},s+=l}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,o,a,c,s={},l=0;return s.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,s):u},s.padding=function(n){return arguments.length?(l=n,e=r=null,s):l},s.sortGroups=function(n){return arguments.length?(o=n,e=r=null,s):o},s.sortSubgroups=function(n){return arguments.length?(a=n,e=null,s):a},s.sortChords=function(n){return arguments.length?(c=n,e&&t(),s):c},s.chords=function(){return e||n(),e},s.groups=function(){return r||n(),r},s},Zo.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,o=t.cy-n.y,a=u-e,c=i*i+o*o;if(c>a*a/d){if(p>c){var s=t.charge/c;n.px-=i*s,n.py-=o*s}return!0}if(t.point&&c&&p>c){var s=t.pointCharge/c;n.px-=i*s,n.py-=o*s}}return!t.charge}}function t(n){n.px=Zo.event.x,n.py=Zo.event.y,a.resume()}var e,r,u,i,o,a={},c=Zo.dispatch("start","tick","end"),s=[1,1],l=.9,f=rs,h=us,g=-30,p=is,v=.1,d=.64,m=[],y=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var t,e,a,f,h,p,d,x,M,_=m.length,b=y.length;for(e=0;b>e;++e)a=y[e],f=a.source,h=a.target,x=h.x-f.x,M=h.y-f.y,(p=x*x+M*M)&&(p=r*i[e]*((p=Math.sqrt(p))-u[e])/p,x*=p,M*=p,h.x-=x*(d=f.weight/(h.weight+f.weight)),h.y-=M*d,f.x+=x*(d=1-d),f.y+=M*d);if("function"==typeof v)for(e=-1;++e<_;)a=m[e],v(a,r);else if((d=r*v)&&(x=s[0]/2,M=s[1]/2,e=-1,d))for(;++e<_;)a=m[e],a.x+=(x-a.x)*d,a.y+=(M-a.y)*d;if(g)for(Vu(t=Zo.geom.quadtree(m),r,o),e=-1;++e<_;)(a=m[e]).fixed||t.visit(n(a));for(e=-1;++e<_;)a=m[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*l,a.y-=(a.py-(a.py=a.y))*l);c.tick({type:"tick",alpha:r})},a.nodes=function(n){return arguments.length?(m=n,a):m},a.links=function(n){return arguments.length?(y=n,a):y},a.size=function(n){return arguments.length?(s=n,a):s},a.linkDistance=function(n){return arguments.length?(f="function"==typeof n?n:+n,a):f},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(l=+n,a):l},a.charge=function(n){return arguments.length?(g="function"==typeof n?n:+n,a):g},a.chargeDistance=function(n){return arguments.length?(p=n*n,a):Math.sqrt(p)},a.gravity=function(n){return arguments.length?(v="function"==typeof n?n:+n,a):v},a.theta=function(n){return arguments.length?(d=n*n,a):Math.sqrt(d)},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:"start",alpha:r=n}),Zo.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;c>a;++a)e[a]=[];for(a=0;s>a;++a){var u=y[a];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var i,o=e[t],a=-1,s=o.length;++a<s;)if(!isNaN(i=o[a][n]))return i;return Math.random()*r}var t,e,r,c=m.length,l=y.length,p=s[0],v=s[1];for(t=0;c>t;++t)(r=m[t]).index=t,r.weight=0;for(t=0;l>t;++t)r=y[t],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;c>t;++t)r=m[t],isNaN(r.x)&&(r.x=n("x",p)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof f)for(t=0;l>t;++t)u[t]=+f.call(this,y[t],t);else for(t=0;l>t;++t)u[t]=f;if(i=[],"function"==typeof h)for(t=0;l>t;++t)i[t]=+h.call(this,y[t],t);else for(t=0;l>t;++t)i[t]=h;if(o=[],"function"==typeof g)for(t=0;c>t;++t)o[t]=+g.call(this,m[t],t);else for(t=0;c>t;++t)o[t]=g;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=Zo.behavior.drag().origin(wt).on("dragstart.force",Ou).on("drag.force",t).on("dragend.force",Yu)),arguments.length?void this.on("mouseover.force",Iu).on("mouseout.force",Zu).call(e):e},Zo.rebind(a,c,"on")};var rs=20,us=1,is=1/0;Zo.layout.hierarchy=function(){function n(u){var i,o=[u],a=[];for(u.depth=0;null!=(i=o.pop());)if(a.push(i),(s=e.call(n,i,i.depth))&&(c=s.length)){for(var c,s,l;--c>=0;)o.push(l=s[c]),l.parent=i,l.depth=i.depth+1;r&&(i.value=0),i.children=s}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return Bu(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),a}var t=Gu,e=Wu,r=Ju;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&($u(t,function(n){n.children&&(n.value=0)}),Bu(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},Zo.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(o=i.length)){var o,a,c,s=-1;for(r=t.value?r/t.value:0;++s<o;)n(a=i[s],e,c=a.value*r,u),e+=c}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var o=r.call(this,e,i);return n(o[0],0,u[0],u[1]/t(o[0])),o}var r=Zo.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},Xu(e,r)},Zo.layout.pie=function(){function n(i){var o=i.map(function(e,r){return+t.call(n,e,r)}),a=+("function"==typeof r?r.apply(this,arguments):r),c=(("function"==typeof u?u.apply(this,arguments):u)-a)/Zo.sum(o),s=Zo.range(i.length);null!=e&&s.sort(e===os?function(n,t){return o[t]-o[n]}:function(n,t){return e(i[n],i[t])});var l=[];return s.forEach(function(n){var t;l[n]={data:i[n],value:t=o[n],startAngle:a,endAngle:a+=t*c}}),l}var t=Number,e=os,r=0,u=wa;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n};var os={};Zo.layout.stack=function(){function n(a,c){var s=a.map(function(e,r){return t.call(n,e,r)}),l=s.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),o.call(n,t,e)]})}),f=e.call(n,l,c);s=Zo.permute(s,f),l=Zo.permute(l,f);var h,g,p,v=r.call(n,l,c),d=s.length,m=s[0].length;for(g=0;m>g;++g)for(u.call(n,s[0][g],p=v[g],l[0][g][1]),h=1;d>h;++h)u.call(n,s[h][g],p+=l[h-1][g][1],l[h][g][1]);return a}var t=wt,e=ei,r=ri,u=ti,i=Qu,o=ni;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:as.get(t)||ei,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:cs.get(t)||ri,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(u=t,n):u},n};var as=Zo.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(ui),i=n.map(ii),o=Zo.range(r).sort(function(n,t){return u[n]-u[t]}),a=0,c=0,s=[],l=[];for(t=0;r>t;++t)e=o[t],c>a?(a+=i[e],s.push(e)):(c+=i[e],l.push(e));return l.reverse().concat(s)},reverse:function(n){return Zo.range(n.length).reverse()},"default":ei}),cs=Zo.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,o=[],a=0,c=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;i>e;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,u,i,o,a,c,s,l=n.length,f=n[0],h=f.length,g=[];for(g[0]=c=s=0,e=1;h>e;++e){for(t=0,u=0;l>t;++t)u+=n[t][e][1];for(t=0,i=0,a=f[e][0]-f[e-1][0];l>t;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);t>r;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;i+=o*n[t][e][1]}g[e]=c-=u?i/u*a:0,s>c&&(s=c)}for(e=0;h>e;++e)g[e]-=s;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,o=1/u,a=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=o}for(e=0;i>e;++e)a[e]=0;return a},zero:ri});Zo.layout.histogram=function(){function n(n,i){for(var o,a,c=[],s=n.map(e,this),l=r.call(this,s,i),f=u.call(this,l,s,i),i=-1,h=s.length,g=f.length-1,p=t?1:1/h;++i<g;)o=c[i]=[],o.dx=f[i+1]-(o.x=f[i]),o.y=0;if(g>0)for(i=-1;++i<h;)a=s[i],a>=l[0]&&a<=l[1]&&(o=c[Zo.bisect(f,a,1,g)-1],o.y+=p,o.push(n[i]));return c}var t=!0,e=Number,r=si,u=ai;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=bt(t),n):r},n.bins=function(t){return arguments.length?(u="number"==typeof t?function(n){return ci(n,t)}:bt(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},Zo.layout.pack=function(){function n(n,i){var o=e.call(this,n,i),a=o[0],c=u[0],s=u[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,Bu(a,function(n){n.r=+l(n.value)}),Bu(a,pi),r){var f=r*(t?1:Math.max(2*a.r/c,2*a.r/s))/2;Bu(a,function(n){n.r+=f}),Bu(a,pi),Bu(a,function(n){n.r-=f})}return mi(a,c/2,s/2,t?1:1/Math.max(2*a.r/c,2*a.r/s)),o}var t,e=Zo.layout.hierarchy().sort(li),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},Xu(n,e)},Zo.layout.tree=function(){function n(n,u){var l=o.call(this,n,u),f=l[0],h=t(f);if(Bu(h,e),h.parent.m=-h.z,$u(h,r),s)$u(f,i);else{var g=f,p=f,v=f;$u(f,function(n){n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=a(g,p)/2-g.x,m=c[0]/(p.x+a(p,g)/2+d),y=c[1]/(v.depth||1);$u(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return l}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,o=0,a=i.length;a>o;++o)r.push((i[o]=u={_:i[o],parent:t,children:(u=i[o].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=u);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){wi(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+a(n._,r._));n.parent.A=u(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function u(n,t,e){if(t){for(var r,u=n,i=n,o=t,c=u.parent.children[0],s=u.m,l=i.m,f=o.m,h=c.m;o=_i(o),u=Mi(u),o&&u;)c=Mi(c),i=_i(i),i.a=n,r=o.z+f-u.z-s+a(o._,u._),r>0&&(bi(Si(o,n,e),n,r),s+=r,l+=r),f+=o.m,s+=u.m,h+=c.m,l+=i.m;o&&!_i(i)&&(i.t=o,i.m+=f-l),u&&!Mi(c)&&(c.t=u,c.m+=s-h,e=n)}return e}function i(n){n.x*=c[0],n.y=n.depth*c[1]}var o=Zo.layout.hierarchy().sort(null).value(null),a=xi,c=[1,1],s=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(s=null==(c=t)?i:null,n):s?null:c},n.nodeSize=function(t){return arguments.length?(s=null==(c=t)?null:i,n):s?c:null},Xu(n,o)},Zo.layout.cluster=function(){function n(n,i){var o,a=t.call(this,n,i),c=a[0],s=0;Bu(c,function(n){var t=n.children;t&&t.length?(n.x=Ei(t),n.y=ki(t)):(n.x=o?s+=e(n,o):0,n.y=0,o=n)});var l=Ai(c),f=Ci(c),h=l.x-e(l,f)/2,g=f.x+e(f,l)/2;return Bu(c,u?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=Zo.layout.hierarchy().sort(null).value(null),e=xi,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},Xu(n,t)},Zo.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var o,a,c,s=f(e),l=[],h=i.slice(),p=1/0,v="slice"===g?s.dx:"dice"===g?s.dy:"slice-dice"===g?1&e.depth?s.dy:s.dx:Math.min(s.dx,s.dy);for(n(h,s.dx*s.dy/e.value),l.area=0;(c=h.length)>0;)l.push(o=h[c-1]),l.area+=o.area,"squarify"!==g||(a=r(l,v))<=p?(h.pop(),p=a):(l.area-=l.pop().area,u(l,v,s,!1),v=Math.min(s.dx,s.dy),l.length=l.area=0,p=1/0);l.length&&(u(l,v,s,!0),l.length=l.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,o=f(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;i=a.pop();)c.push(i),c.area+=i.area,null!=i.z&&(u(c,i.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,o=n.length,a=e.x,s=e.y,l=t?c(n.area/t):0;if(t==e.dx){for((r||l>e.dy)&&(l=e.dy);++i<o;)u=n[i],u.x=a,u.y=s,u.dy=l,a+=u.dx=Math.min(e.x+e.dx-a,l?c(u.area/l):0);u.z=!0,u.dx+=e.x+e.dx-a,e.y+=l,e.dy-=l}else{for((r||l>e.dx)&&(l=e.dx);++i<o;)u=n[i],u.x=a,u.y=s,u.dx=l,s+=u.dy=Math.min(e.y+e.dy-s,l?c(u.area/l):0);u.z=!1,u.dy+=e.y+e.dy-s,e.x+=l,e.dx-=l}}function i(r){var u=o||a(r),i=u[0];return i.x=0,i.y=0,i.dx=s[0],i.dy=s[1],o&&a.revalue(i),n([i],i.dx*i.dy/i.value),(o?e:t)(i),h&&(o=u),u}var o,a=Zo.layout.hierarchy(),c=Math.round,s=[1,1],l=null,f=Ni,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(n){return arguments.length?(s=n,i):s},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?Ni(t):zi(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return zi(t,n)}if(!arguments.length)return l;var r;return f=null==(l=n)?Ni:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(c=n?Math.round:Number,i):c!=Number},i.sticky=function(n){return arguments.length?(h=n,o=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},Xu(i,a)},Zo.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=Zo.random.normal.apply(Zo,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=Zo.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},Zo.scale={};var ss={floor:wt,ceil:wt};Zo.scale.linear=function(){return Ui([0,1],[0,1],hu,!1)};var ls={s:1,g:1,p:1,r:1,e:1};Zo.scale.log=function(){return Vi(Zo.scale.linear().domain([0,1]),10,!0,[1,10])};var fs=Zo.format(".0e"),hs={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};Zo.scale.pow=function(){return Xi(Zo.scale.linear(),1,[0,1])},Zo.scale.sqrt=function(){return Zo.scale.pow().exponent(.5)},Zo.scale.ordinal=function(){return Bi([],{t:"range",a:[[]]})},Zo.scale.category10=function(){return Zo.scale.ordinal().range(gs)},Zo.scale.category20=function(){return Zo.scale.ordinal().range(ps)},Zo.scale.category20b=function(){return Zo.scale.ordinal().range(vs)},Zo.scale.category20c=function(){return Zo.scale.ordinal().range(ds)};var gs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(vt),ps=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(vt),vs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(vt),ds=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(vt);Zo.scale.quantile=function(){return Wi([],[])},Zo.scale.quantize=function(){return Ji(0,1,[0,1])},Zo.scale.threshold=function(){return Gi([.5],[0,1])},Zo.scale.identity=function(){return Ki([0,1])},Zo.svg={},Zo.svg.arc=function(){function n(){var n=t.apply(this,arguments),i=e.apply(this,arguments),o=r.apply(this,arguments)+ms,a=u.apply(this,arguments)+ms,c=(o>a&&(c=o,o=a,a=c),a-o),s=ba>c?"0":"1",l=Math.cos(o),f=Math.sin(o),h=Math.cos(a),g=Math.sin(a);return c>=ys?n?"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"M0,"+n+"A"+n+","+n+" 0 1,0 0,"+-n+"A"+n+","+n+" 0 1,0 0,"+n+"Z":"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"Z":n?"M"+i*l+","+i*f+"A"+i+","+i+" 0 "+s+",1 "+i*h+","+i*g+"L"+n*h+","+n*g+"A"+n+","+n+" 0 "+s+",0 "+n*l+","+n*f+"Z":"M"+i*l+","+i*f+"A"+i+","+i+" 0 "+s+",1 "+i*h+","+i*g+"L0,0Z"}var t=Qi,e=no,r=to,u=eo;return n.innerRadius=function(e){return arguments.length?(t=bt(e),n):t},n.outerRadius=function(t){return arguments.length?(e=bt(t),n):e},n.startAngle=function(t){return arguments.length?(r=bt(t),n):r},n.endAngle=function(t){return arguments.length?(u=bt(t),n):u},n.centroid=function(){var n=(t.apply(this,arguments)+e.apply(this,arguments))/2,i=(r.apply(this,arguments)+u.apply(this,arguments))/2+ms;return[Math.cos(i)*n,Math.sin(i)*n]},n};var ms=-Sa,ys=wa-ka;Zo.svg.line=function(){return ro(wt)};var xs=Zo.map({linear:uo,"linear-closed":io,step:oo,"step-before":ao,"step-after":co,basis:po,"basis-open":vo,"basis-closed":mo,bundle:yo,cardinal:fo,"cardinal-open":so,"cardinal-closed":lo,monotone:So});xs.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Ms=[0,2/3,1/3,0],_s=[0,1/3,2/3,0],bs=[0,1/6,2/3,1/6];Zo.svg.line.radial=function(){var n=ro(ko);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},ao.reverse=co,co.reverse=ao,Zo.svg.area=function(){return Eo(wt)},Zo.svg.area.radial=function(){var n=Eo(ko);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},Zo.svg.chord=function(){function n(n,a){var c=t(this,i,n,a),s=t(this,o,n,a);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,s)?u(c.r,c.p1,c.r,c.p0):u(c.r,c.p1,s.r,s.p0)+r(s.r,s.p1,s.a1-s.a0)+u(s.r,s.p1,c.r,c.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=a.call(n,u,r),o=c.call(n,u,r)+ms,l=s.call(n,u,r)+ms;return{r:i,a0:o,a1:l,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(l),i*Math.sin(l)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>ba)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=gr,o=pr,a=Ao,c=to,s=eo;return n.radius=function(t){return arguments.length?(a=bt(t),n):a},n.source=function(t){return arguments.length?(i=bt(t),n):i},n.target=function(t){return arguments.length?(o=bt(t),n):o},n.startAngle=function(t){return arguments.length?(c=bt(t),n):c},n.endAngle=function(t){return arguments.length?(s=bt(t),n):s},n},Zo.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),o=e.call(this,n,u),a=(i.y+o.y)/2,c=[i,{x:i.x,y:a},{x:o.x,y:a},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var t=gr,e=pr,r=Co;return n.source=function(e){return arguments.length?(t=bt(e),n):t},n.target=function(t){return arguments.length?(e=bt(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},Zo.svg.diagonal.radial=function(){var n=Zo.svg.diagonal(),t=Co,e=n.projection;return n.projection=function(n){return arguments.length?e(No(t=n)):t},n},Zo.svg.symbol=function(){function n(n,r){return(ws.get(t.call(this,n,r))||To)(e.call(this,n,r))}var t=Lo,e=zo;return n.type=function(e){return arguments.length?(t=bt(e),n):t},n.size=function(t){return arguments.length?(e=bt(t),n):e},n};var ws=Zo.map({circle:To,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*As)),e=t*As;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/Es),e=t*Es/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/Es),e=t*Es/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});Zo.svg.symbolTypes=ws.keys();var Ss,ks,Es=Math.sqrt(3),As=Math.tan(30*Aa),Cs=[],Ns=0;Cs.call=pa.call,Cs.empty=pa.empty,Cs.node=pa.node,Cs.size=pa.size,Zo.transition=function(n){return arguments.length?Ss?n.transition():n:ma.transition()},Zo.transition.prototype=Cs,Cs.select=function(n){var t,e,r,u=this.id,i=[];n=b(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]);for(var c=this[o],s=-1,l=c.length;++s<l;)(r=c[s])&&(e=n.call(r,r.__data__,s,o))?("__data__"in r&&(e.__data__=r.__data__),Po(e,s,u,r.__transition__[u]),t.push(e)):t.push(null)}return qo(i,u)},Cs.selectAll=function(n){var t,e,r,u,i,o=this.id,a=[];n=w(n);for(var c=-1,s=this.length;++c<s;)for(var l=this[c],f=-1,h=l.length;++f<h;)if(r=l[f]){i=r.__transition__[o],e=n.call(r,r.__data__,f,c),a.push(t=[]);for(var g=-1,p=e.length;++g<p;)(u=e[g])&&Po(u,g,o,i),t.push(u)}return qo(a,o)},Cs.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=R(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]);for(var e=this[i],a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return qo(u,this.id)},Cs.tween=function(n,t){var e=this.id;return arguments.length<2?this.node().__transition__[e].tween.get(n):P(this,null==t?function(t){t.__transition__[e].tween.remove(n)}:function(r){r.__transition__[e].tween.set(n,t)})},Cs.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function u(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function i(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?Du:hu,a=Zo.ns.qualify(n);return Ro(this,"attr."+n,t,a.local?i:u)},Cs.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=Zo.ns.qualify(n);return this.tween("attr."+n,u.local?r:e)},Cs.style=function(n,t,e){function r(){this.style.removeProperty(n)}function u(t){return null==t?r:(t+="",function(){var r,u=Wo.getComputedStyle(this,null).getPropertyValue(n);return u!==t&&(r=hu(u,t),function(t){this.style.setProperty(n,r(t),e)})})}var i=arguments.length;if(3>i){if("string"!=typeof n){2>i&&(t="");for(e in n)this.style(e,n[e],t);return this}e=""}return Ro(this,"style."+n,t,u)},Cs.styleTween=function(n,t,e){function r(r,u){var i=t.call(this,r,u,Wo.getComputedStyle(this,null).getPropertyValue(n));return i&&function(t){this.style.setProperty(n,i(t),e)}}return arguments.length<3&&(e=""),this.tween("style."+n,r)},Cs.text=function(n){return Ro(this,"text",n,Do)},Cs.remove=function(){return this.each("end.transition",function(){var n;this.__transition__.count<2&&(n=this.parentNode)&&n.removeChild(this)})},Cs.ease=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof n&&(n=Zo.ease.apply(Zo,arguments)),P(this,function(e){e.__transition__[t].ease=n}))},Cs.delay=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].delay:P(this,"function"==typeof n?function(e,r,u){e.__transition__[t].delay=+n.call(e,e.__data__,r,u)}:(n=+n,function(e){e.__transition__[t].delay=n}))},Cs.duration=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].duration:P(this,"function"==typeof n?function(e,r,u){e.__transition__[t].duration=Math.max(1,n.call(e,e.__data__,r,u))}:(n=Math.max(1,n),function(e){e.__transition__[t].duration=n}))},Cs.each=function(n,t){var e=this.id;if(arguments.length<2){var r=ks,u=Ss;Ss=e,P(this,function(t,r,u){ks=t.__transition__[e],n.call(t,t.__data__,r,u)}),ks=r,Ss=u}else P(this,function(r){var u=r.__transition__[e];(u.event||(u.event=Zo.dispatch("start","end"))).on(n,t)});return this},Cs.transition=function(){for(var n,t,e,r,u=this.id,i=++Ns,o=[],a=0,c=this.length;c>a;a++){o.push(n=[]);for(var t=this[a],s=0,l=t.length;l>s;s++)(e=t[s])&&(r=Object.create(e.__transition__[u]),r.delay+=r.duration,Po(e,s,i,r)),n.push(e)}return qo(o,i)},Zo.svg.axis=function(){function n(n){n.each(function(){var n,s=Zo.select(this),l=this.__chart__||e,f=this.__chart__=e.copy(),h=null==c?f.ticks?f.ticks.apply(f,a):f.domain():c,g=null==t?f.tickFormat?f.tickFormat.apply(f,a):wt:t,p=s.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",ka),d=Zo.transition(p.exit()).style("opacity",ka).remove(),m=Zo.transition(p.order()).style("opacity",1),y=Ti(f),x=s.selectAll(".domain").data([0]),M=(x.enter().append("path").attr("class","domain"),Zo.transition(x));v.append("line"),v.append("text");var _=v.select("line"),b=m.select("line"),w=p.select("text").text(g),S=v.select("text"),k=m.select("text");switch(r){case"bottom":n=Uo,_.attr("y2",u),S.attr("y",Math.max(u,0)+o),b.attr("x2",0).attr("y2",u),k.attr("x",0).attr("y",Math.max(u,0)+o),w.attr("dy",".71em").style("text-anchor","middle"),M.attr("d","M"+y[0]+","+i+"V0H"+y[1]+"V"+i);break;case"top":n=Uo,_.attr("y2",-u),S.attr("y",-(Math.max(u,0)+o)),b.attr("x2",0).attr("y2",-u),k.attr("x",0).attr("y",-(Math.max(u,0)+o)),w.attr("dy","0em").style("text-anchor","middle"),M.attr("d","M"+y[0]+","+-i+"V0H"+y[1]+"V"+-i);break;case"left":n=jo,_.attr("x2",-u),S.attr("x",-(Math.max(u,0)+o)),b.attr("x2",-u).attr("y2",0),k.attr("x",-(Math.max(u,0)+o)).attr("y",0),w.attr("dy",".32em").style("text-anchor","end"),M.attr("d","M"+-i+","+y[0]+"H0V"+y[1]+"H"+-i);break;case"right":n=jo,_.attr("x2",u),S.attr("x",Math.max(u,0)+o),b.attr("x2",u).attr("y2",0),k.attr("x",Math.max(u,0)+o).attr("y",0),w.attr("dy",".32em").style("text-anchor","start"),M.attr("d","M"+i+","+y[0]+"H0V"+y[1]+"H"+i)}if(f.rangeBand){var E=f,A=E.rangeBand()/2;l=f=function(n){return E(n)+A}}else l.rangeBand?l=f:d.call(n,f);v.call(n,l),m.call(n,f)})}var t,e=Zo.scale.linear(),r=zs,u=6,i=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Ls?t+"":zs,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var zs="bottom",Ls={top:1,right:1,bottom:1,left:1};Zo.svg.brush=function(){function n(i){i.each(function(){var i=Zo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",u).on("touchstart.brush",u),o=i.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=i.selectAll(".resize").data(p,wt);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return Ts[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var l,f=Zo.transition(i),h=Zo.transition(o);c&&(l=Ti(c),h.attr("x",l[0]).attr("width",l[1]-l[0]),e(f)),s&&(l=Ti(s),h.attr("y",l[0]).attr("height",l[1]-l[0]),r(f)),t(f)})}function t(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+l[+/e$/.test(n)]+","+f[+/^s/.test(n)]+")"})}function e(n){n.select(".extent").attr("x",l[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function r(n){n.select(".extent").attr("y",f[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function u(){function u(){32==Zo.event.keyCode&&(C||(x=null,z[0]-=l[1],z[1]-=f[1],C=2),y())}function p(){32==Zo.event.keyCode&&2==C&&(z[0]+=l[1],z[1]+=f[1],C=0,y())}function v(){var n=Zo.mouse(_),u=!1;M&&(n[0]+=M[0],n[1]+=M[1]),C||(Zo.event.altKey?(x||(x=[(l[0]+l[1])/2,(f[0]+f[1])/2]),z[0]=l[+(n[0]<x[0])],z[1]=f[+(n[1]<x[1])]):x=null),E&&d(n,c,0)&&(e(S),u=!0),A&&d(n,s,1)&&(r(S),u=!0),u&&(t(S),w({type:"brush",mode:C?"move":"resize"}))}function d(n,t,e){var r,u,a=Ti(t),c=a[0],s=a[1],p=z[e],v=e?f:l,d=v[1]-v[0];return C&&(c-=p,s-=d+p),r=(e?g:h)?Math.max(c,Math.min(s,n[e])):n[e],C?u=(r+=p)+d:(x&&(p=Math.max(c,Math.min(s,2*x[e]-r))),r>p?(u=r,r=p):u=p),v[0]!=r||v[1]!=u?(e?o=null:i=null,v[0]=r,v[1]=u,!0):void 0
}function m(){v(),S.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),Zo.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),N(),w({type:"brushend"})}var x,M,_=this,b=Zo.select(Zo.event.target),w=a.of(_,arguments),S=Zo.select(_),k=b.datum(),E=!/^(n|s)$/.test(k)&&c,A=!/^(e|w)$/.test(k)&&s,C=b.classed("extent"),N=I(),z=Zo.mouse(_),L=Zo.select(Wo).on("keydown.brush",u).on("keyup.brush",p);if(Zo.event.changedTouches?L.on("touchmove.brush",v).on("touchend.brush",m):L.on("mousemove.brush",v).on("mouseup.brush",m),S.interrupt().selectAll("*").interrupt(),C)z[0]=l[0]-z[0],z[1]=f[0]-z[1];else if(k){var T=+/w$/.test(k),q=+/^n/.test(k);M=[l[1-T]-z[0],f[1-q]-z[1]],z[0]=l[T],z[1]=f[q]}else Zo.event.altKey&&(x=z.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),Zo.select("body").style("cursor",b.style("cursor")),w({type:"brushstart"}),v()}var i,o,a=M(n,"brushstart","brush","brushend"),c=null,s=null,l=[0,0],f=[0,0],h=!0,g=!0,p=qs[0];return n.event=function(n){n.each(function(){var n=a.of(this,arguments),t={x:l,y:f,i:i,j:o},e=this.__chart__||t;this.__chart__=t,Ss?Zo.select(this).transition().each("start.brush",function(){i=e.i,o=e.j,l=e.x,f=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=gu(l,t.x),r=gu(f,t.y);return i=o=null,function(u){l=t.x=e(u),f=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=t.i,o=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,p=qs[!c<<1|!s],n):c},n.y=function(t){return arguments.length?(s=t,p=qs[!c<<1|!s],n):s},n.clamp=function(t){return arguments.length?(c&&s?(h=!!t[0],g=!!t[1]):c?h=!!t:s&&(g=!!t),n):c&&s?[h,g]:c?h:s?g:null},n.extent=function(t){var e,r,u,a,h;return arguments.length?(c&&(e=t[0],r=t[1],s&&(e=e[0],r=r[0]),i=[e,r],c.invert&&(e=c(e),r=c(r)),e>r&&(h=e,e=r,r=h),(e!=l[0]||r!=l[1])&&(l=[e,r])),s&&(u=t[0],a=t[1],c&&(u=u[1],a=a[1]),o=[u,a],s.invert&&(u=s(u),a=s(a)),u>a&&(h=u,u=a,a=h),(u!=f[0]||a!=f[1])&&(f=[u,a])),n):(c&&(i?(e=i[0],r=i[1]):(e=l[0],r=l[1],c.invert&&(e=c.invert(e),r=c.invert(r)),e>r&&(h=e,e=r,r=h))),s&&(o?(u=o[0],a=o[1]):(u=f[0],a=f[1],s.invert&&(u=s.invert(u),a=s.invert(a)),u>a&&(h=u,u=a,a=h))),c&&s?[[e,u],[r,a]]:c?[e,r]:s&&[u,a])},n.clear=function(){return n.empty()||(l=[0,0],f=[0,0],i=o=null),n},n.empty=function(){return!!c&&l[0]==l[1]||!!s&&f[0]==f[1]},Zo.rebind(n,a,"on")};var Ts={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},qs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Rs=Qa.format=ic.timeFormat,Ds=Rs.utc,Ps=Ds("%Y-%m-%dT%H:%M:%S.%LZ");Rs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ho:Ps,Ho.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},Ho.toString=Ps.toString,Qa.second=Dt(function(n){return new nc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),Qa.seconds=Qa.second.range,Qa.seconds.utc=Qa.second.utc.range,Qa.minute=Dt(function(n){return new nc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),Qa.minutes=Qa.minute.range,Qa.minutes.utc=Qa.minute.utc.range,Qa.hour=Dt(function(n){var t=n.getTimezoneOffset()/60;return new nc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),Qa.hours=Qa.hour.range,Qa.hours.utc=Qa.hour.utc.range,Qa.month=Dt(function(n){return n=Qa.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),Qa.months=Qa.month.range,Qa.months.utc=Qa.month.utc.range;var Us=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],js=[[Qa.second,1],[Qa.second,5],[Qa.second,15],[Qa.second,30],[Qa.minute,1],[Qa.minute,5],[Qa.minute,15],[Qa.minute,30],[Qa.hour,1],[Qa.hour,3],[Qa.hour,6],[Qa.hour,12],[Qa.day,1],[Qa.day,2],[Qa.week,1],[Qa.month,1],[Qa.month,3],[Qa.year,1]],Hs=Rs.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",we]]),Fs={range:function(n,t,e){return Zo.range(Math.ceil(n/e)*e,+t,e).map(Oo)},floor:wt,ceil:wt};js.year=Qa.year,Qa.scale=function(){return Fo(Zo.scale.linear(),js,Hs)};var Os=js.map(function(n){return[n[0].utc,n[1]]}),Ys=Ds.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",we]]);Os.year=Qa.year.utc,Qa.scale.utc=function(){return Fo(Zo.scale.linear(),Os,Ys)},Zo.text=St(function(n){return n.responseText}),Zo.json=function(n,t){return kt(n,"application/json",Yo,t)},Zo.html=function(n,t){return kt(n,"text/html",Io,t)},Zo.xml=St(function(n){return n.responseXML}),"function"==typeof define&&define.amd?define("lib/d3/d3.min.js",Zo):"object"==typeof module&&module.exports&&(module.exports=Zo),this.d3=Zo}();var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/web/sessions/EUMMobileSessionDetailsController",["require","exports","app/view/eum/web/sessions/EUMSessionDetailsControllerBase","app/view/eum/common/waterfall/WaterfallDirective","app/view/eum/common/waterfall/WaterfallDirectiveDefinitions","lib/controller/services/eum/common/EumSessionsUiService","app/view/eum/web/browserSnapshot/details/BrowserSnapshotDetailsController"],function(require,exports,EUMSessionDetailsControllerBase,WaterfallDirective,WaterfallDirectiveDefinitions,EumSessionsUiService,BrowserSnapshotDetailsController){var EUMMobileSessionDetailsController=function(_super){function EUMMobileSessionDetailsController($scope,$modalInstance,dialogData,$location,$timeout,resourceManager,sharedInjectorService,notificationService,navigationService,timeRangeService,injectorService){_super.call(this,$scope,$modalInstance,dialogData,navigationService),this.$scope=$scope,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.$location=$location,this.$timeout=$timeout,this.resourceManager=resourceManager,this.sharedInjectorService=sharedInjectorService,this.notificationService=notificationService,this.navigationService=navigationService,this.timeRangeService=timeRangeService,this.injectorService=injectorService,this.d3Loaded=!1,this.errorIcon=ImageUtil.request_error,this.tabs={WATERFALL:"WATERFALL",BT:"BT"},this.selectedTab=this.tabs.WATERFALL,this.waterfallDirectiveDataTypeKeys=["NETWORK_REQUEST","CRASH","CUSTOM_TIMER","CUSTOM_METRIC","BREADCRUMB","INFO_POINT"],this.infoBarCollapsed=!0,this.redrawWaterfall=!1,this.btGridIconColWidth=40,this.DISABLED_SCREEN_VIEW_TPL=_.template("<span style='color: #757575;'> <%= value %> </span>"),$scope.controller=this;var urlParams=new URLParams(this.$location.path());this.applicationId=parseInt(urlParams.application()),this.mobileAppId=parseInt(urlParams.mobileApp()),this.platform=urlParams.platform(),this.downloadD3(),this.gridRendererData={sessionStartTime:0},this.viewStateId="EUMMobileSessionDetailsController",this.initialize()}return __extends(EUMMobileSessionDetailsController,_super),EUMMobileSessionDetailsController.prototype.replaceURLForModal=function(){if(this.dialogData){var params=new URLParams;return params.setParam("location",NavigationDataConstants.EUM_MOBILE_SESSION_DETAILS),params.setParam("sessionguid",this.dialogData.sessionguid),params.setParam("application",this.dialogData.applicationId),this.applicationId=this.dialogData.applicationId,this.setUrlLocation(params)}return this.dialogData={},this.dialogData.sessionguid=URLParams.getCurrentUrlParams().getParam("sessionguid"),InjectorService.instance().$q().when()},EUMMobileSessionDetailsController.prototype.deepLinkedModalClosedHandler=function(){EumViewService.instance().viewMobileSessionAnalyze(this.applicationId,this.platform,this.mobileAppId)},EUMMobileSessionDetailsController.prototype.goToBT=function(btAppId,btId){BusinessTransactionViewService.instance().viewBusinessTransaction(btAppId,btId)},EUMMobileSessionDetailsController.prototype.onScreenViewGridSelectionChange=function(event){if(event.selected.items[0]){var waterfallData={duration:this.selectedScreenView.duration,elements:this.selectedScreenView.waterfallElements};this.btGridOptions.dataProvider=this.selectedScreenView.btData,this.waterfallData=waterfallData}},EUMMobileSessionDetailsController.prototype.setSessionDetailsTitleStr=function(){this.sessionDetailsTitleString="Session - "+DateTimeUtil.getDateTimeString(this.sessionDetails.startTime)+" to "+DateTimeUtil.getDateTimeString(this.sessionDetails.startTime+this.sessionDetails.sessionDuration),this.title=this.sessionDetailsTitleString},EUMMobileSessionDetailsController.prototype.downloadD3=function(){var _this=this;require(["lib/d3/d3.min.js"],function(){_this.d3Loaded=!0})},EUMMobileSessionDetailsController.prototype.fetchData=function(){var _this=this;this.dialogData.sessionguid&&(this.isSessionDetailsLoading=!0,EumSessionsUiService.instance().getMobileSession(this.applicationId,this.mobileAppId,this.dialogData.sessionguid).then(function(response){_this.sessionDetails=response,_this.setSessionDetailsTitleStr(),_this.gridRendererData.sessionStartTime=_this.sessionDetails.startTime,_this.sceenViewsGridOptions.dataProvider=_this.screenViews=response.screenViews,_this.isSessionDetailsLoading=!1},function(){_this.isSessionDetailsLoading=!1}),this.$timeout(function(){_this.screenViews&&_this.screenViews.length>0&&$(".ads-session-left-panel-container .x-grid-row:first").click()},450))},EUMMobileSessionDetailsController.prototype.initializeGrid=function(){var _this=this,columns=[new GridColumn({flex:5,dataIndex:"screenName",header:"Activity",tooltip:"Activity Name",sortable:!0,renderer:function(val,meta){if(!val)return"";if(_this.platform===MobilePlatform.ANDROID){var lastIndexOfSeparator=val.lastIndexOf(".");val=val.substring(lastIndexOfSeparator+1)}return meta.record.raw.waterfallElements&&0===meta.record.raw.waterfallElements.length&&(val=_this.DISABLED_SCREEN_VIEW_TPL({value:val})),meta&&Util.get(meta,["record","raw","crashed"])===!0&&(val="<span style='color: "+AdColorPalette.COLOR_PALETTE_A20_RED+"'>"+val+"</span>"),val}}),new GridColumn({flex:4,dataIndex:"startTime",header:"Timeline",tooltip:"Timeline",sortable:!0,align:"right",renderer:EUMCommonGridRenderers.CREATE_SESSION_RELATIVE_START_TIME_RENDERER(this.gridRendererData)})];this.sceenViewsGridOptions=new GridOptions,this.sceenViewsGridOptions.columnProvider=columns,this.sceenViewsGridOptions.useBufferedRenderer=!0,this.sceenViewsGridOptions.compileRenderers=!1,this.sceenViewsGridOptions.dataProvider=[],this.sceenViewsGridOptions.stateful=!0,this.sceenViewsGridOptions.stateId="EumMobileSessionDetails-stateId",this.btGridOptions=BrowserSnapshotDetailsController.BrowserSnapshotDetailsController.initBTGrid(this.btGridIconColWidth),this.btGridOptions.columnProvider.unshift({flex:0,width:30,dataIndex:"pageType",header:"",tooltip:"Affected Event Type",hidden:!1,sortable:!0,filter:null,renderer:EUMCommonGridRenderers.WEB_REQUEST_TYPE_ICON_RENDERER})},EUMMobileSessionDetailsController.prototype.toggleCollapsed=function(){this.infoBarCollapsed=!this.infoBarCollapsed,this.waterfallContainerJQuery||(this.waterfallContainerJQuery=jQuery(".ads-waterfall-and-page-views-container")),this.infoBarCollapsed?this.waterfallContainerJQuery.addClass("ads-waterfall-stretched"):this.waterfallContainerJQuery.removeClass("ads-waterfall-stretched"),this.$scope.$broadcast(EventConstants.UEV_LAYOUT_CHANGED)},EUMMobileSessionDetailsController.prototype.onViewWaterfall=function(){this.selectedTab=this.tabs.WATERFALL},EUMMobileSessionDetailsController.prototype.onViewBT=function(){this.selectedTab=this.tabs.BT,this.waterfallContainerJQuery=null},EUMMobileSessionDetailsController.$inject=["$scope","$modalInstance","dialogData","$location","$timeout","resourceManager","sharedInjectorService","notificationService","navigationService","timeRangeService","injectorService"],EUMMobileSessionDetailsController}(EUMSessionDetailsControllerBase.EUMSessionDetailsControllerBase);exports.EUMMobileSessionDetailsController=EUMMobileSessionDetailsController,appdynamicsModule.controller("EUMMobileSessionDetailsController",EUMMobileSessionDetailsController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/mobile/crashes/details/cards/summary/SummaryCardController",["require","exports","app/view/eum/web/sessions/EUMMobileSessionDetailsController"],function(require,exports,EUMMobileSessionDetailsController){var SummaryCardController=function(_super){function SummaryCardController($scope,resourceManager,notificationService,injectorService,eumViewService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.eumViewService=eumViewService,this.featureService=FeatureService.instance(),$scope.controller=this}return __extends(SummaryCardController,_super),SummaryCardController.prototype.buildFileLineFunctionValue=function(){if(!this.$scope.summary)return"-";var str="",file=this.$scope.summary.crashedFile;str+=file?file:"Unknown File",str+=" in line ";var line=this.$scope.summary.crashedFileLineNumber;str+=line?line:"Unknown Line",str+=" ";var func=this.$scope.summary.crashedFunction;return str+=func?func:"Unknown Function"},SummaryCardController.prototype.buildDownloadFilename=function(){return this.$scope.summary?this.$scope.summary.crashId+".txt":null},SummaryCardController.prototype.viewRelatedSessionDetails=function(){this.eumViewService.viewRelatedMobileSessionDetails(this.$scope.summary.sessionGuid,this.$scope.applicationId)},SummaryCardController.prototype.openDownloadURL=function(){location.href="restui/crashDetails/download/"+this.$scope.applicationId+"/"+this.$scope.summary.crashId},SummaryCardController.prototype.formatDate=function(timestampToFormat){return timestampToFormat?DateTimeUtil.getDateTimeString(timestampToFormat):"-"},SummaryCardController.prototype.elseDash=function(str){return str?str:"-"},SummaryCardController.$inject=["$scope","resourceManager","notificationService","injectorService","eumViewService"],SummaryCardController}(ControllerBase);exports.SummaryCardController=SummaryCardController,appdynamicsModule.controller("SummaryCardController",SummaryCardController)}),define("app/view/eum/mobile/mobileSnapshots/details/cards/businessTransactions/BusinessTransactionsCard",["require","exports"],function(require,exports){var MobileSnapshotDetailsBusinessTransactionsCard=function(){function MobileSnapshotDetailsBusinessTransactionsCard(){return{restrict:"E",replace:!1,templateUrl:"app/view/eum/mobile/mobileSnapshots/details/cards/businessTransactions/BusinessTransactionsCard.html",scope:{requestSuccess:"=",loading:"=",snapshotData:"="},controller:"MobileSnapshotDetailsBusinessTransactionsCardController",link:function(){}}}return MobileSnapshotDetailsBusinessTransactionsCard}();exports.MobileSnapshotDetailsBusinessTransactionsCard=MobileSnapshotDetailsBusinessTransactionsCard,appdynamicsModule.directive(StringUtils.toCamelCase("ad-mobile-snapshot-details-business-transactions-card"),MobileSnapshotDetailsBusinessTransactionsCard)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/mobile/mobileSnapshots/details/cards/businessTransactions/BusinessTransactionsCardController",["require","exports","app/view/eum/mobile/MobileControllerBase"],function(require,exports,MobileControllerBase){var MobileSnapshotDetailsBusinessTransactionsCardController=function(_super){function MobileSnapshotDetailsBusinessTransactionsCardController($scope,$log,$location,resourceManager,notificationService,injectorService,applicationViewService,eumViewService,businessTransactionViewService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService,applicationViewService,eumViewService),this.$scope=$scope,this.$log=$log,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.applicationViewService=applicationViewService,this.eumViewService=eumViewService,this.businessTransactionViewService=businessTransactionViewService,_super.prototype.setCommonProperties.call(this,$location.path()),$scope.controller=this,this.initializeGrid(),$scope.$watch(function(){return $scope.snapshotData},function(){_this.onDataChange()})}return __extends(MobileSnapshotDetailsBusinessTransactionsCardController,_super),MobileSnapshotDetailsBusinessTransactionsCardController.prototype.onDataChange=function(){this.gridOptionsBusinessTransactions.loading=this.$scope.loading,this.$scope.snapshotData&&(this.gridOptionsBusinessTransactions.dataProvider=this.$scope.snapshotData.businessTransactionData)},MobileSnapshotDetailsBusinessTransactionsCardController.prototype.initializeGrid=function(){var gridOptionsBusinessTransactions=new GridOptions;gridOptionsBusinessTransactions.compileRenderers=!0,gridOptionsBusinessTransactions.dataProvider=[],this.gridOptionsBusinessTransactions=gridOptionsBusinessTransactions;var columns=[new GridColumn({flex:2,align:"left",dataIndex:"businessTransactionName",hidden:!1,sortable:!0,renderer:EUMCommonGridRenderers.LINK_RENDERER,header:this.getString("ms_name")}),new GridColumn({flex:.5,align:"right",dataIndex:"time",sortable:!0,type:"any",renderer:EUMCommonGridRenderers.METRIC_TIME_RENDERER,header:this.getString("ms_timeMs")})];this.columnsBusinessTransactions=columns,gridOptionsBusinessTransactions.compileRenderers=!1,gridOptionsBusinessTransactions.useBufferedRenderer=!0,gridOptionsBusinessTransactions.useDataLoadReader=!0,gridOptionsBusinessTransactions.columnProvider=columns},MobileSnapshotDetailsBusinessTransactionsCardController.prototype.handleBTGridClick=function(event){if("businessTransactionName"==this.columnsBusinessTransactions[event.columnIndex].dataIndex){var rowData=event.raw;rowData.businessTransactionId&&this.businessTransactionViewService.viewBusinessTransaction(this.applicationId,rowData.businessTransactionId)}},MobileSnapshotDetailsBusinessTransactionsCardController.$inject=["$scope","$log","$location","resourceManager","notificationService","injectorService","applicationViewService","eumViewService","businessTransactionViewService"],MobileSnapshotDetailsBusinessTransactionsCardController}(MobileControllerBase.MobileControllerBase);exports.MobileSnapshotDetailsBusinessTransactionsCardController=MobileSnapshotDetailsBusinessTransactionsCardController,appdynamicsModule.controller("MobileSnapshotDetailsBusinessTransactionsCardController",MobileSnapshotDetailsBusinessTransactionsCardController)}),define("app/view/eum/mobile/mobileSnapshots/details/cards/summary/SummaryCard",["require","exports"],function(require,exports){var MobileSnapshotDetailsSummaryCard=function(){function MobileSnapshotDetailsSummaryCard(){return{restrict:"E",replace:!1,templateUrl:"app/view/eum/mobile/mobileSnapshots/details/cards/summary/SummaryCard.html",scope:{requestSuccess:"=",isAndroid:"=",openedFromSessionDetails:"=",snapshotData:"="},controller:"MobileSnapshotDetailsSummaryCardController",link:function(){}}}return MobileSnapshotDetailsSummaryCard}();exports.MobileSnapshotDetailsSummaryCard=MobileSnapshotDetailsSummaryCard,appdynamicsModule.directive(StringUtils.toCamelCase("ad-mobile-snapshot-details-summary-card"),MobileSnapshotDetailsSummaryCard)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/mobile/mobileSnapshots/details/cards/summary/SummaryCardController",["require","exports","app/view/eum/mobile/MobileControllerBase","app/view/eum/web/sessions/EUMMobileSessionDetailsController"],function(require,exports,MobileControllerBase,EUMMobileSessionDetailsController){var MobileSnapshotDetailsSummaryCardController=function(_super){function MobileSnapshotDetailsSummaryCardController($scope,$location,resourceManager,notificationService,injectorService,applicationViewService,eumViewService,mobileSnapshotDetailsUiService){_super.call(this,$scope,resourceManager,notificationService,injectorService,applicationViewService,eumViewService),this.$scope=$scope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.applicationViewService=applicationViewService,this.eumViewService=eumViewService,this.mobileSnapshotDetailsUiService=mobileSnapshotDetailsUiService,this.featureService=FeatureService.instance(),_super.prototype.setCommonProperties.call(this,$location.path()),$scope.controller=this}return __extends(MobileSnapshotDetailsSummaryCardController,_super),MobileSnapshotDetailsSummaryCardController.prototype.archiveMobileSnapshotDetails=function(){var _this=this,archiveRequest={eventId:this.$scope.snapshotData.eventSummary.id,eventTimestamp:this.$scope.snapshotData.timestamp},resultHandler=function(response){_this.mobileSnapshotDetailsUiService.archiveEvent_response(response);_this.notificationService.displayMessage("Success","The mobile snapshot has been archived."),_this.$scope.snapshotData.archived=!0},errorHandler=function(){_this.notificationService.displayMessage("Error","The mobile snapshot could not be archived.")};this.mobileSnapshotDetailsUiService.archiveEvent(archiveRequest).then(resultHandler,errorHandler)},MobileSnapshotDetailsSummaryCardController.prototype.viewRelatedSessionDetails=function(){this.eumViewService.viewRelatedMobileSessionDetails(this.$scope.snapshotData.sessionGuid,this.applicationId)},MobileSnapshotDetailsSummaryCardController.prototype.getTimestamp=function(timestamp){return timestamp?DateTimeUtil.getDateTimeString(timestamp):"-"},MobileSnapshotDetailsSummaryCardController.prototype.getExperienceImage=function(networkRequestExperience){return"<img src='"+ImageUtil.getRequestExperienceIconURL(networkRequestExperience)+"'/>"},MobileSnapshotDetailsSummaryCardController.prototype.navigateToBasePage=function(){this.isMobileAppMode?this.eumViewService.viewRequestDashboardForMobileApp(this.applicationId,this.platform,this.mobileAppId,this.$scope.snapshotData.networkRequestId):this.eumViewService.viewRequestDashboardForPlatform(this.applicationId,this.platform,this.$scope.snapshotData.networkRequestId)},MobileSnapshotDetailsSummaryCardController.prototype.isHttpErrorCode=function(){return this.$scope.snapshotData?this.$scope.snapshotData.httpStatusCode>=400&&this.$scope.snapshotData.httpStatusCode<=599:!1},MobileSnapshotDetailsSummaryCardController.prototype.elseDash=function(str){return str?str:"-"},MobileSnapshotDetailsSummaryCardController.$inject=["$scope","$location","resourceManager","notificationService","injectorService","applicationViewService","eumViewService","mobileSnapshotDetailsUiService"],MobileSnapshotDetailsSummaryCardController}(MobileControllerBase.MobileControllerBase);exports.MobileSnapshotDetailsSummaryCardController=MobileSnapshotDetailsSummaryCardController,appdynamicsModule.controller("MobileSnapshotDetailsSummaryCardController",MobileSnapshotDetailsSummaryCardController)}),define("app/view/eum/mobile/mobileSnapshots/details/cards/transactionSnapshots/TransactionSnapshotsCard",["require","exports"],function(require,exports){var MobileSnapshotDetailsTransactionSnapshotsCard=function(){function MobileSnapshotDetailsTransactionSnapshotsCard(){return{restrict:"E",replace:!1,templateUrl:"app/view/eum/mobile/mobileSnapshots/details/cards/transactionSnapshots/TransactionSnapshotsCard.html",scope:{requestSuccess:"=",loading:"=",snapshotData:"="},controller:"MobileSnapshotDetailsTransactionSnapshotsCardController",link:function(){}}}return MobileSnapshotDetailsTransactionSnapshotsCard}();exports.MobileSnapshotDetailsTransactionSnapshotsCard=MobileSnapshotDetailsTransactionSnapshotsCard,appdynamicsModule.directive(StringUtils.toCamelCase("ad-mobile-snapshot-details-transaction-snapshots-card"),MobileSnapshotDetailsTransactionSnapshotsCard)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/mobile/mobileSnapshots/details/cards/transactionSnapshots/TransactionSnapshotsCardController",["require","exports","app/view/eum/mobile/MobileControllerBase"],function(require,exports,MobileControllerBase){var MobileSnapshotDetailsTransactionSnapshotsCardController=function(_super){function MobileSnapshotDetailsTransactionSnapshotsCardController($scope,$location,resourceManager,notificationService,injectorService,applicationViewService,eumViewService,businessTransactionViewService,componentViewService,nodeViewService,snapshotViewService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService,applicationViewService,eumViewService),this.$scope=$scope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.applicationViewService=applicationViewService,this.eumViewService=eumViewService,this.businessTransactionViewService=businessTransactionViewService,this.componentViewService=componentViewService,this.nodeViewService=nodeViewService,this.snapshotViewService=snapshotViewService,_super.prototype.setCommonProperties.call(this,$location.path()),$scope.controller=this,this.initializeGrid(),$scope.$watch(function(){return $scope.snapshotData},function(){_this.onDataChange()})}return __extends(MobileSnapshotDetailsTransactionSnapshotsCardController,_super),MobileSnapshotDetailsTransactionSnapshotsCardController.prototype.onDataChange=function(){this.gridOptionsTransactionSnapshots.loading=this.$scope.loading,this.$scope.snapshotData&&(this.gridOptionsTransactionSnapshots.dataProvider=this.$scope.snapshotData.requestSegmentData)},MobileSnapshotDetailsTransactionSnapshotsCardController.prototype.initializeGrid=function(){var snapshotRenderer=function(){return"<img src='images/iconNavRequestSnapshots.png'/>"},gridOptionsTransactionSnapshots=new GridOptions;gridOptionsTransactionSnapshots.compileRenderers=!0,gridOptionsTransactionSnapshots.dataProvider=[],this.gridOptionsTransactionSnapshots=gridOptionsTransactionSnapshots;var columns=[new GridColumn({flex:.1,align:"center",dataIndex:"",hidden:!1,sortable:!0,renderer:snapshotRenderer,header:""}),new GridColumn({flex:.1,align:"center",dataIndex:"userExperience",hidden:!1,sortable:!0,renderer:EUMCommonGridRenderers.MOBILE_RELATED_RSD_EXPERIENCE_RENDERER,header:""}),new GridColumn({flex:.1,align:"center",dataIndex:"",hidden:!1,sortable:!0,renderer:EUMCommonGridRenderers.MOBILE_RSD_CALL_GRAPH_RENDERER,header:""}),new GridColumn({flex:.4,align:"left",dataIndex:"serverStartTime",hidden:!1,sortable:!0,renderer:EUMCommonGridRenderers.DATE_RENDERER,header:"Time"}),new GridColumn({flex:.15,align:"right",dataIndex:"timeTakenInMilliSecs",hidden:!1,sortable:!0,renderer:EUMCommonGridRenderers.METRIC_LARGE_NUMBER_RENDERER,header:"Exe Time (ms)"}),new GridColumn({flex:.5,align:"left",dataIndex:"businessTransactionName",hidden:!1,sortable:!0,renderer:EUMCommonGridRenderers.LINK_RENDERER,header:"Business Transaction"}),new GridColumn({flex:.4,align:"left",dataIndex:"applicationComponentName",hidden:!1,sortable:!0,renderer:EUMCommonGridRenderers.LINK_RENDERER,header:"Tier"}),new GridColumn({flex:.35,align:"left",dataIndex:"nodeName",hidden:!1,sortable:!0,renderer:EUMCommonGridRenderers.LINK_RENDERER,header:"Node"})];this.columnsTransactionSnapshots=columns,gridOptionsTransactionSnapshots.compileRenderers=!1,gridOptionsTransactionSnapshots.useBufferedRenderer=!0,gridOptionsTransactionSnapshots.useDataLoadReader=!0,gridOptionsTransactionSnapshots.columnProvider=columns},MobileSnapshotDetailsTransactionSnapshotsCardController.prototype.handleTransactionSnapshotGridClick=function(event){if("businessTransactionName"==this.columnsTransactionSnapshots[event.columnIndex].dataIndex){var rowData=event.raw;rowData.businessTransactionId>0&&this.businessTransactionViewService.viewBusinessTransaction(this.applicationId,rowData.businessTransactionId)}else if("applicationComponentName"==this.columnsTransactionSnapshots[event.columnIndex].dataIndex){var rowData=event.raw;rowData.applicationComponentId>0&&this.componentViewService.viewComponent(this.applicationId,rowData.applicationComponentId)}else if("nodeName"==this.columnsTransactionSnapshots[event.columnIndex].dataIndex){var rowData=event.raw;rowData.nodeId>0&&this.nodeViewService.viewNode(this.applicationId,rowData.nodeId)}else{var rowData=event.raw;rowData.requestGUID&&rowData.requestGUID.length>0&&this.snapshotViewService.viewRequestSegmentDataByGuid(rowData.requestGUID,this.applicationId)}},MobileSnapshotDetailsTransactionSnapshotsCardController.$inject=["$scope","$location","resourceManager","notificationService","injectorService","applicationViewService","eumViewService","businessTransactionViewService","componentViewService","nodeViewService","snapshotViewService"],MobileSnapshotDetailsTransactionSnapshotsCardController}(MobileControllerBase.MobileControllerBase);exports.MobileSnapshotDetailsTransactionSnapshotsCardController=MobileSnapshotDetailsTransactionSnapshotsCardController,appdynamicsModule.controller("MobileSnapshotDetailsTransactionSnapshotsCardController",MobileSnapshotDetailsTransactionSnapshotsCardController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/eum/web/browserSnapshot/details/ResourceTimingController",["require","exports"],function(require,exports){var ResourceTimingController=function(_super){function ResourceTimingController($scope,$rootScope,$location,resourceManager,notificationService,browserSnapshotDetailsService,timeRangeService,injectorService,applicationViewService,eumViewService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.browserSnapshotDetailsService=browserSnapshotDetailsService,this.timeRangeService=timeRangeService,this.injectorService=injectorService,this.applicationViewService=applicationViewService,this.eumViewService=eumViewService,this.pageName="Resource Timing Snapshot",this.platform="Web",this.detailResource=null,this.domainGridHeight={height:"100px"},$scope.controller=this,$scope.getString=this._scope.getString,this.initialize(),this.setUpDomainGrid(),this.initScope($scope)}return __extends(ResourceTimingController,_super),ResourceTimingController.setupDomainGridOptions=function(){function renderName(name){return'<div popover="'+name+'" popover-trigger="mouseenter" popover-append-to-body="true">'+name+"</div>"
}var columnConfig={columns:[{flex:1.5,dataIndex:"name",header:"Name",align:"left",renderer:renderName},{flex:.5,dataIndex:"hit",header:"#",align:"right",renderer:EUMCommonGridRenderers.GRID_LARGE_NUMBER_RENDERER},{flex:1,dataIndex:"totalTime",header:"Total Time (ms)",align:"right",renderer:EUMCommonGridRenderers.GRID_LARGE_NUMBER_RENDERER},{flex:1,dataIndex:"averageTime",header:"Average Time (ms)",align:"right",renderer:EUMCommonGridRenderers.GRID_LARGE_NUMBER_RENDERER},{flex:1,dataIndex:"displayDNS",header:"DNS (ms)",align:"right",renderer:EUMCommonGridRenderers.GRID_LARGE_NUMBER_RENDERER}]},gridOptions=new GridOptions;gridOptions.compileRenderers=!0,gridOptions.dataProvider=[];var columns=[];for(var index in columnConfig.columns){var settings=columnConfig.columns[index];columns.push(new GridColumn({flex:settings.flex,align:settings.align,dataIndex:settings.dataIndex,hidden:!1,header:settings.header,sortable:!0,draggable:!1,menuDisabled:!0,renderer:settings.renderer}))}return gridOptions.columnProvider=columns,gridOptions.sortFields=[{property:"hit",direction:"DESC"}],gridOptions},ResourceTimingController.prototype.initialize=function(){var _this=this,urlParams=new URLParams(this.$location.path());this.applicationId=parseInt(urlParams.application()),this.addId=parseInt(urlParams.addId()),this.snapshotId=parseInt(urlParams.snapshotId()),this.snapshotTimestamp=parseInt(urlParams.snapshotTimestamp()),this.resourcesLoaded=!1,this.browserSnapshotDetailsService.getBrowserSnapshot(this.applicationId,this.snapshotId,this.snapshotTimestamp).then(function(rtData){_this.rtData=rtData,_this.pageUrl=rtData.pageName,_this.resourcesLoaded=!0,_this.resourceTimingData=rtData.resourceTimingData,_this.resourceTypeOptionsList=_this.resourceTimingData.resourceTypeOptionsList,_this.domainGridOptions.dataProvider=_this.resourceTimingData.domains,_this.initLocationBar(),_this.updateCharts(),_this.updateLayout()},function(){this.resourcesLoaded=!1})},ResourceTimingController.prototype.initScope=function($scope){var _this=this;$scope.$on(TimeRangeService.UEV_TIME_RANGE_CHANGE_TR_SERVICE,function(){_this.initialize()}),$scope.$on("refreshForNewPage",function(){_this.handleRefresh()}),$scope.$watch("resourceTimingData",function(){_this.updateCharts()})},ResourceTimingController.prototype.scrollToDomainTable=function(){var element=$(".ad_scroll_domain_table"),container=$(".browserSnapshotContent");null!=element&&0!=element.length&&null!=container&&0!=container.length&&container.scrollTop(element.position().top+container.scrollTop()-container.position().top)},ResourceTimingController.prototype.navigateTo=function(location){switch(location){case NavigationDataConstants.APP_DASHBOARD:this.applicationViewService.viewApplicationDashboard(this.applicationId);break;case NavigationDataConstants.EUM_GEO_MASTER:this.eumViewService.viewEumGeoMaster(this.applicationId);break;case NavigationDataConstants.EUM_DASHBOARD:this.eumViewService.viewWebGeo(this.applicationId);break;case NavigationDataConstants.EUM_SYNTHETIC_LAUNCH:this.eumViewService.viewSyntheticLaunch(this.applicationId,this.pageUrl)}},ResourceTimingController.prototype.initLocationBar=function(){this.locationEntries=[{label:this.rtData.application.name,clickFn:this.navigateTo,fnArg:NavigationDataConstants.APP_DASHBOARD},{label:this.getString("ms_eumNavItemAndScreenTitle"),clickFn:this.navigateTo,fnArg:NavigationDataConstants.EUM_GEO_MASTER},{label:this.platform,clickFn:this.navigateTo,fnArg:NavigationDataConstants.EUM_DASHBOARD},{label:this.getString("ms_eumSnapshotsTabLabel"),clickFn:this.navigateTo,fnArg:NavigationDataConstants.EUM_BROWSER_SNAPSHOTS},{label:this.pageName,clickFn:null,fnArg:null}]},ResourceTimingController.prototype.domainFilter=function(event){var domain=event.raw;domain&&(this.nameQuery=domain.name,this.$scope.$broadcast("nameQuery",domain.name))},ResourceTimingController.prototype.setUpDomainGrid=function(){this.domainGridOptions=ResourceTimingController.setupDomainGridOptions()},ResourceTimingController.prototype.handleRefresh=function(){this.browserSnapshotDetailsService.clearCache(),this.initialize()},ResourceTimingController.prototype.updateCharts=function(){if(this.resourceTimingData){var typeBarChartNames=[],typeBarChartData=[],domainBarChartNames=[],domainBarChartData=[],maxData=0,i=0;for(i=0;i<this.resourceTypeOptionsList.length;i++)typeBarChartNames.push(this.getString(this.resourceTypeOptionsList[i].name)),typeBarChartData.push({y:this.resourceTypeOptionsList[i].count,color:UiConfig.getColor("RES_TYPE_"+this.resourceTypeOptionsList[i].name)}),this.resourceTypeOptionsList[i].count>maxData&&(maxData=this.resourceTypeOptionsList[i].count);var otherDomainHit=0,sortedDomains=_.sortBy(this.resourceTimingData.domains,function(domain){return domain.hit});for(i=sortedDomains.length-1;i>-1&&(domainBarChartData.length<7||8==sortedDomains.length);i--)domainBarChartData.push({name:sortedDomains[i].name.length>40?"..."+sortedDomains[i].name.slice(sortedDomains[i].name.length-40):sortedDomains[i].name,y:sortedDomains[i].hit});if(i>-1){for(i;i>-1;i--)otherDomainHit+=sortedDomains[i].hit;otherDomainHit>0&&domainBarChartData.push({name:"Other",y:otherDomainHit})}domainBarChartData=_.sortBy(domainBarChartData,function(data){return data.y}).reverse(),domainBarChartNames=_.pluck(domainBarChartData,"name"),this.typeBarChart={chart:{type:"bar",marginLeft:50,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,animation:!1,backgroundColor:"rgba(255,255,255,0.1)"},credits:!1,title:{text:null},xAxis:{categories:typeBarChartNames,labels:{enabled:!0}},yAxis:{gridLineWidth:0,labels:{enabled:!1},allowDecimals:!1,title:{text:null},min:0,max:maxData+1},tooltip:{enabled:!1},plotOptions:{bar:{dataLabels:{enabled:!0}}},legend:{enabled:!1},series:[{data:typeBarChartData}]},this.domainBarChart={chart:{type:"bar",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,animation:!1,backgroundColor:"rgba(255,255,255,0.1)"},credits:!1,title:{text:null},xAxis:{categories:domainBarChartNames,labels:{enabled:!0}},yAxis:{gridLineWidth:0,labels:{enabled:!1},allowDecimals:!1,title:{text:null},min:0},tooltip:{enabled:!1},plotOptions:{bar:{dataLabels:{enabled:!0}}},legend:{enabled:!1},series:[{data:domainBarChartData}]}}},ResourceTimingController.prototype.updateLayout=function(){var _this=this,topHeight=50,rowHeight=32,domainGridHeight=rowHeight*this.domainGridOptions.dataProvider.length+topHeight;100>domainGridHeight&&(domainGridHeight=100),this.domainGridHeight.height=domainGridHeight+"px",window.setTimeout(function(){_this.$scope.$broadcast("layoutChanged")},1)},ResourceTimingController.$inject=["$scope","$rootScope","$location","resourceManager","notificationService","browserSnapshotDetailsService","timeRangeService","injectorService","applicationViewService","eumViewService"],ResourceTimingController}(ControllerBase);exports.ResourceTimingController=ResourceTimingController,appdynamicsModule.controller("ResourceTimingController",ResourceTimingController)});var BrowserSnapshotDetailsService=function(){function BrowserSnapshotDetailsService($q,$timeout,browserSnapshotDetailsUiService){this.$q=$q,this.$timeout=$timeout,this.browserSnapshotDetailsUiService=browserSnapshotDetailsUiService,this.lastSnapshotData=null}return BrowserSnapshotDetailsService.prototype.clearCache=function(){this.lastSnapshotData=null,this.lastSnapshotId=-1},BrowserSnapshotDetailsService.prototype.getBrowserSnapshot=function(applicationId,snapshotId,snapshotTimestamp){var _this=this,deferred=this.$q.defer();return this.lastSnapshotId===snapshotId&&null!=this.lastSnapshotData?this.$timeout(function(){deferred.resolve(_this.lastSnapshotData)},1):this.browserSnapshotDetailsUiService.getBrowserSnapshot({applicationId:applicationId,snapshotId:snapshotId,snapshotTimestamp:snapshotTimestamp}).then(function(data){var snapshot=_this.browserSnapshotDetailsUiService.getBrowserSnapshot_response(data);_this.lastSnapshotId=snapshotId,_this.lastSnapshotData=snapshot,deferred.resolve(snapshot)}),deferred.promise},BrowserSnapshotDetailsService.$inject=["$q","$timeout","browserSnapshotDetailsUiService"],BrowserSnapshotDetailsService}();adComponentsModule.service("browserSnapshotDetailsService",BrowserSnapshotDetailsService),define("app/view/eum/web/browserSnapshot/details/BrowserSnapshotDetailsService",function(){});var EUMTimingTrends=function(){function EUMTimingTrends(){return{restrict:"A",replace:!0,scope:{config:"=adEumTimingTrends",loading:"=svLoading"},templateUrl:"app/view/eum/dashboardCharts/EUMTimingTrends.html",link:function(){},controller:["$scope","metricBrowserViewService",function($scope,metricBrowserViewService){$scope.noData=!0,$scope.updateChartData=function(){if($scope.noData=!0,$scope.config){$scope.units=" ms",$scope.config.units&&($scope.units=" "===$scope.config.units.charAt(0)?$scope.config.units:" "+$scope.config.units),$scope.chartData=ChartUtil.getTwoDTimeChartConfig("",$scope.units),$scope.chartData.plotOptions.area={},$scope.chartData.plotOptions.area.fillColor=UiConfig.getColor("WHITE"),$scope.chartData.yAxis.plotBands&&($scope.chartData.yAxis.plotBands[0].color=UiConfig.getColor("WHITE")),$scope.chartData.chart.spacing=[10,0,50,0],$scope.chartData.chart.marginLeft=100,$scope.chartData.chart.marginRight=75,$scope.chartData.plotOptions.series={},$scope.chartData.plotOptions.series.marker={enabled:!0,radius:1},$scope.chartData.series=[],"line"===$scope.config.type?($scope.chartData.yAxis.gridLineColor=UiConfig.getColor("DASHBOARD_SEPARATOR_LINE_COLOR"),$scope.chartData.chart.type="line"):"stacked"===$scope.config.type&&($scope.chartData.yAxis.gridLineColor=UiConfig.getColor("EUM_PD_GRAPH_LINE_COLOR"),$scope.chartData.chart.type="area",$scope.chartData.plotOptions.area={stacking:"normal",lineWidth:1,marker:{lineWidth:1}}),$scope.config.connectNulls&&($scope.chartData.plotOptions.series.connectNulls=!0);var plotOptionsSet=!1;for(var i in $scope.config.series)if($scope.config.series.hasOwnProperty(i)){var series=$scope.config.series[i];if(!series.doNotGraph&&series.metricViewData.graphData){var viewData=series.metricViewData;plotOptionsSet||(plotOptionsSet=!0,$scope.chartData.plotOptions.series.pointStart=viewData.graphData.startTime,$scope.chartData.plotOptions.series.pointInterval=viewData.graphData.interval*ChartUtil.MILLISECONDS_PER_MINUTE,"stacked"==$scope.config.type&&($scope.chartData.plotOptions.area.lineColor=series.color,$scope.chartData.plotOptions.area.marker.lineColor=series.color)),null!=viewData.graphData.data&&void 0!==viewData.graphData.data&&viewData.graphData.data.length>0&&($scope.noData=!1),(null==series.seriesName||""===series.seriesName)&&(series.seriesName=series.name);var currentSeries={name:series.seriesName,color:series.color,data:viewData.graphData.data,type:"",marker:{enabled:!0,radius:2},tooltip:{valueSuffix:$scope.units}};"line"==$scope.config.type&&(currentSeries.type="spline"),$scope.chartData.series.push(currentSeries)}}}},$scope.getStyleForSeries=function(series){return series.color&&""!=series.color?{"background-color":series.color}:{}},$scope.$watch("config",$scope.updateChartData),$scope.openMetricBrowserForMetric=function(metricID){void 0!=metricID&&null!=metricID&&-1!=metricID&&metricBrowserViewService.openMetricBrowserDialogForMetric($scope.config.appId,metricID)}}]}}return EUMTimingTrends}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-eum-timing-trends"),EUMTimingTrends),define("app/view/eum/dashboardCharts/EUMTimingTrends",function(){});var EUMLoadTrends=function(){function EUMLoadTrends(){return{restrict:"A",replace:!0,scope:{config:"=adEumLoadTrends"},templateUrl:"app/view/eum/dashboardCharts/EUMLoadTrends.html",link:function(){},controller:["$scope","metricBrowserViewService",function($scope,metricBrowserViewService){$scope.noData=!0,$scope.updateChartData=function(){if($scope.noData=!0,$scope.config){$scope.chartData=ChartUtil.getTwoDTimeChartConfig(""," "+$scope.config.units+"/Min"),$scope.chartData.plotOptions.area={},$scope.chartData.plotOptions.area.fillColor=UiConfig.getColor("WHITE"),$scope.chartData.yAxis.gridLineColor=UiConfig.getColor("DASHBOARD_SEPARATOR_LINE_COLOR"),$scope.chartData.yAxis.plotBands&&($scope.chartData.yAxis.plotBands[0].color=UiConfig.getColor("WHITE")),$scope.chartData.chart.spacing=[10,0,50,0],$scope.chartData.chart.marginLeft=100,$scope.chartData.chart.marginRight=75,$scope.chartData.chart.type="line",$scope.chartData.plotOptions.series={},$scope.chartData.plotOptions.series.marker={enabled:!0,radius:1},$scope.chartData.series=[];for(var i in $scope.config.series)if($scope.config.series.hasOwnProperty(i)){var series=$scope.config.series[i],viewData=series.perMinViewData;0==i&&($scope.chartData.plotOptions.series.pointStart=viewData.graphData.startTime,$scope.chartData.plotOptions.series.pointInterval=viewData.graphData.interval*ChartUtil.MILLISECONDS_PER_MINUTE),null!=viewData.graphData.data&&void 0!==viewData.graphData.data&&viewData.graphData.data.length>0&&($scope.noData=!1);var currentSeries={name:series.name,color:series.color,data:viewData.graphData.data,type:"column",marker:{enabled:!0,radius:2},tooltip:{valueSuffix:" "+$scope.config.units+"/Min"}};$scope.chartData.series.push(currentSeries)}}},$scope.getStyleForSeries=function(series){return{"background-color":series.color}},$scope.showSubTitleForSeries=function(series){return"string"==typeof series.title&&""!=series.title},$scope.$watch("config",$scope.updateChartData),$scope.openMetricBrowserForMetric=function(metricID){void 0!=metricID&&null!=metricID&&-1!=metricID&&metricBrowserViewService.openMetricBrowserDialogForMetric($scope.config.appId,metricID)}}]}}return EUMLoadTrends}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-eum-load-trends"),EUMLoadTrends),define("app/view/eum/dashboardCharts/EUMLoadTrends",function(){});var EUMRelatedBTTrends=function(){function EUMRelatedBTTrends(){return{restrict:"A",replace:!0,scope:{config:"=adEumRelatedBtTrends",showBTWithoutLoad:"=svShowWithoutLoad"},templateUrl:"app/view/eum/dashboardCharts/EUMRelatedBTTrends.html",link:function(){},controller:["$scope","metricBrowserViewService","resourceManager","businessTransactionViewService",function($scope,metricBrowserViewService,resourceManager,businessTransactionViewService){$scope.btMeterChartConfigMap={},$scope.btTrendChartConfigMap={},$scope.noData=!0,$scope.controller=$scope,$scope.updateChartData=function(){if($scope.noData=!0,$scope.btMeterChartConfigMap={},$scope.btTrendChartConfigMap={},$scope.config){if(ADLoggerService.log("EUMRelatedBTTrends.updateChartData Debug: eumPageRelatedBusinessTransactionData is "+$scope.config.seriesMap),$scope.config.seriesMap){var numBts=0;for(var index in $scope.config.seriesMap)if($scope.config.seriesMap.hasOwnProperty(index)){var series=$scope.config.seriesMap[index];($scope.showBTWithoutLoad||!$scope.showBTWithoutLoad&&series.hasLoad)&&numBts++}numBts>0&&($scope.noData=!1)}$scope.eumPageRelatedBusinessTransactionData=$scope.config.seriesMap}},$scope.openMetricBrowserForBT=function(componentId,metricId){void 0!=componentId&&null!=componentId&&-1!=componentId&&void 0!=metricId&&null!=metricId&&-1!=metricId&&metricBrowserViewService.openMetricBrowserDialogForBT($scope.config.appId,componentId,metricId)},$scope.goToDashboardForBT=function(btId){null!=btId&&-1!=btId&&businessTransactionViewService.viewBusinessTransaction($scope.config.appId,btId)},$scope.getBTMeterChartConfig=function(btId,eumPageRelatedBusinessTransactionData){var relatedBTMeterConfig;return $scope.btMeterChartConfigMap[btId]?relatedBTMeterConfig=$scope.btMeterChartConfigMap[btId]:(relatedBTMeterConfig=ChartUtil.getStackedBarChartConfig(),$scope.btMeterChartConfigMap[btId]=relatedBTMeterConfig),relatedBTMeterConfig.series=[{name:$scope.getString("ms_stalls"),data:[eumPageRelatedBusinessTransactionData.numberOfStalls],color:"#EF5C5D",shadow:!1},{name:$scope.getString("ms_verySlow"),data:[eumPageRelatedBusinessTransactionData.numberOfVerySlowCalls],color:"#FFD24D",shadow:!1},{name:$scope.getString("ms_slow"),data:[eumPageRelatedBusinessTransactionData.numberOfSlowCalls],color:"#FFD24D",shadow:!1},{name:$scope.getString("ms_normal"),data:[eumPageRelatedBusinessTransactionData.numberOfNormalCalls],color:"#79DD1B",shadow:!1}],relatedBTMeterConfig},$scope.getBTTrendChartConfig=function(btId,eumPageRelatedBusinessTransactionData){{var relatedBTTrendConfig;$scope.getString("ms_ms")}$scope.btTrendChartConfigMap[btId]?relatedBTTrendConfig=$scope.btTrendChartConfigMap[btId]:(relatedBTTrendConfig=ChartUtil.getTwoAxisTwoDTimeChartConfig(""," Req/Min"," ms"),$scope.btTrendChartConfigMap[btId]=relatedBTTrendConfig),relatedBTTrendConfig.xAxis.tickLength=10,relatedBTTrendConfig.xAxis.tickWidth=1,relatedBTTrendConfig.chart.spacing=[10,0,10,0],relatedBTTrendConfig.chart.marginLeft=100,relatedBTTrendConfig.chart.marginRight=75,relatedBTTrendConfig.chart.type="line",relatedBTTrendConfig.plotOptions.series.marker={enabled:!0,radius:1},relatedBTTrendConfig.series=[];var callsPerMinute=eumPageRelatedBusinessTransactionData.callsPerMinute;if(callsPerMinute&&null!=callsPerMinute.graphData){-1!=callsPerMinute.graphData.startTime&&(relatedBTTrendConfig.plotOptions.series.pointStart=callsPerMinute.graphData.startTime,relatedBTTrendConfig.plotOptions.series.pointInterval=callsPerMinute.graphData.interval*ChartUtil.MILLISECONDS_PER_MINUTE);var relatedBTTimeSeries={name:eumPageRelatedBusinessTransactionData.businessTransactionName,color:UiConfig.getColor("EUM_PD_BT_LOAD_CHART_COLOR"),type:"column",data:callsPerMinute.graphData.data,marker:{enabled:!0,radius:2},yAxis:0,zIndex:1,stickyTracking:!1,tooltip:{valueSuffix:" Call/Min"}};relatedBTTrendConfig.series.push(relatedBTTimeSeries)}var averageResponseTime=eumPageRelatedBusinessTransactionData.averageResponseTime;if(averageResponseTime&&null!=averageResponseTime.graphData){-1!=averageResponseTime.graphData.startTime&&(relatedBTTrendConfig.plotOptions.series.pointStart=averageResponseTime.graphData.startTime,relatedBTTrendConfig.plotOptions.series.pointInterval=averageResponseTime.graphData.interval*ChartUtil.MILLISECONDS_PER_MINUTE);var relatedBTTimeSeries={name:eumPageRelatedBusinessTransactionData.businessTransactionName,color:UiConfig.getColor("EUM_PD_BT_RESPONSE_TIME_CHART_COLOR"),type:"spline",data:averageResponseTime.graphData.data,marker:{enabled:!0,radius:2},yAxis:1,zIndex:2,stickyTracking:!1,tooltip:{valueSuffix:" ms"}};relatedBTTrendConfig.series.push(relatedBTTimeSeries)}return relatedBTTrendConfig},$scope.getIcon=function(data){return data&&data.performanceState?data.performanceState==PerformanceState.NORMAL?"images/PI_NORMAL_small.png":data.performanceState==PerformanceState.WARNING?"images/PI_WARNING_small.png":data.performanceState==PerformanceState.CRITICAL?"images/PI_CRITICAL_small.png":data.performanceState==PerformanceState.UNKNOWN?"images/PI_UNKNOWN_small.png":"images/PI_UNDEFINED_small.png":"images/PI_UNDEFINED_medium.png"},$scope.getStyleForART=function(){return{"background-color":UiConfig.getColor("EUM_PD_BT_RESPONSE_TIME_CHART_COLOR")}},$scope.getStyleForRPM=function(){return{"background-color":UiConfig.getColor("EUM_PD_BT_LOAD_CHART_COLOR")}},$scope.getNumOrZero=function(value){return"number"!=typeof value||-1==value?0:value},$scope.getString=function(key){return resourceManager?resourceManager.getString("ui",key):""},$scope.$watch("config",$scope.updateChartData),$scope.$watch("showBTWithoutLoad",$scope.updateChartData)}]}}return EUMRelatedBTTrends}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-eum-related-bt-trends"),EUMRelatedBTTrends),define("app/view/eum/dashboardCharts/EUMRelatedBTTrends",function(){});var EUMPageRequestSection=function(){function EUMPageRequestSection(){return{restrict:"A",replace:!0,scope:{config:"=adEumPageRequestSection",showReqWithoutLoad:"=svShowWithoutLoad"},templateUrl:"app/view/eum/dashboardCharts/EUMPageRequestSection.html",link:function(){},controller:["$scope","metricBrowserViewService","resourceManager",function($scope,metricBrowserViewService,resourceManager){$scope.requestPieChartConfigMap={},$scope.noRequestData=!0,$scope.noPhaseData=!0,$scope.controller=$scope,$scope.phaseConfig={AFTER_FIRST_BYTE:{name:"After First Byte",color:UiConfig.getColor("EUM_PD_REQUEST_PHASE_AFTER_FIRST_BYTE_CHART_COLOR")},AFTER_DOM_INTERACTIVE:{name:"After DOM Ready",color:UiConfig.getColor("EUM_PD_REQUEST_PHASE_AFTER_DOM_INTERACTIVE_CHART_COLOR")},AT_ONLOAD:{name:"At Onload",color:UiConfig.getColor("EUM_PD_REQUEST_PHASE_AT_ONLOAD_CHART_COLOR")},AFTER_ONLOAD:{name:"After Onload",color:UiConfig.getColor("EUM_PD_REQUEST_PHASE_AFTER_ONLOAD_CHART_COLOR")},UNKNOWN:{name:"Unknown Phase",color:UiConfig.getColor("EUM_PD_REQUEST_PHASE_UNKNOWN_CHART_COLOR")}},$scope.chartTypeOptions=[{name:"Load - Requests Per Minute",value:"requestsPerMinute"},{name:"Response Time",value:"averageResponseTime"}],$scope.displayedChartType=$scope.chartTypeOptions[0],$scope.getDisplayedChartType=function(){return"object"==typeof $scope.displayedChartType&&null!=$scope.displayedChartType?$scope.displayedChartType.value:""},$scope.updateChartData=function(){if($scope.config){$scope.requestPieChartConfigMap={},ADLoggerService.log("EUMPageRequestTrends.updateChartData Debug: eumPageRequestData is "+$scope.config.seriesMap),$scope.eumPageRequestData=$scope.config.seriesMap;var eumPageRequestData=$scope.eumPageRequestData;if($scope.noPhaseData=!0,$scope.noRequestData=!0,$scope.noRequests=!0,!eumPageRequestData||$.isEmptyObject(eumPageRequestData))return void ADLoggerService.warn("EUMPageRequestTrends.updateChartData Warning: eumPageRequestData is empty.");$scope.showAjaxInitPie=!1,$scope.showIFrameInitPie=!1,$scope.ajaxInitChartConfig=ChartUtil.simplePieChart(),$scope.ajaxInitChartConfig.chart.spacing=[0,0,0,0],$scope.ajaxInitChartConfig.chart.type="pie",$scope.ajaxInitChartConfig.series=[],$scope.iframeInitChartConfig=ChartUtil.simplePieChart(),$scope.iframeInitChartConfig.chart.spacing=[0,0,0,0],$scope.iframeInitChartConfig.chart.type="pie",$scope.iframeInitChartConfig.series=[];var ajaxRequestPhaseMap={},ajaxRequestTotalInAllPhases=0,iframeRequestPhaseMap={},iframeRequestTotalInAllPhases=0;$scope.totalRequestPhaseMap={};for(var key in eumPageRequestData){var eumPageRequestDataItem=eumPageRequestData[key];$scope.noRequests=!1;var phases=eumPageRequestDataItem.phases;if($scope.showReqWithoutLoad||!$scope.showReqWithoutLoad&&eumPageRequestDataItem.hasLoad)switch($scope.noRequestData=!1,eumPageRequestDataItem.addType){case"AJAX_REQUEST":for(var phase in phases)ajaxRequestPhaseMap[phase]||(ajaxRequestPhaseMap[phase]=0),$scope.totalRequestPhaseMap[phase]||($scope.totalRequestPhaseMap[phase]=0),ajaxRequestPhaseMap[phase]+=phases[phase].totalNumberOfRequests.value,ajaxRequestTotalInAllPhases+=phases[phase].totalNumberOfRequests.value,$scope.totalRequestPhaseMap[phase]+=phases[phase].totalNumberOfRequests.value;break;case"IFRAME":for(var phase in phases)iframeRequestPhaseMap[phase]||(iframeRequestPhaseMap[phase]=0),$scope.totalRequestPhaseMap[phase]||($scope.totalRequestPhaseMap[phase]=0),iframeRequestPhaseMap[phase]+=phases[phase].totalNumberOfRequests.value,iframeRequestTotalInAllPhases+=phases[phase].totalNumberOfRequests.value,$scope.totalRequestPhaseMap[phase]+=phases[phase].totalNumberOfRequests.value}}if(ajaxRequestTotalInAllPhases>0){$scope.noPhaseData=!1;var ajaxInitData=[];for(var phase in ajaxRequestPhaseMap){var data={name:$scope.getPhaseName(phase),color:$scope.getPhaseColor(phase),y:100*(ajaxRequestPhaseMap[phase]/ajaxRequestTotalInAllPhases),shadow:!1};ajaxInitData.push(data)}$scope.ajaxInitChartConfig.series=[{type:"pie",name:$scope.getString("ms_overallAjaxPhaseDist"),data:ajaxInitData}],$scope.showAjaxInitPie=!0}if(iframeRequestTotalInAllPhases>0){$scope.noPhaseData=!1;var iframeInitData=[];for(var phase in iframeRequestPhaseMap){var data={name:$scope.getPhaseName(phase),color:$scope.getPhaseColor(phase),y:100*(iframeRequestPhaseMap[phase]/iframeRequestTotalInAllPhases),shadow:!1};iframeInitData.push(data)}$scope.iframeInitChartConfig.series=[{type:"pie",name:$scope.getString("ms_overallIFramePhaseDist"),data:iframeInitData}],$scope.showIFrameInitPie=!0}}else $scope.eumPageRequestData=null,$scope.noRequestData=!0,$scope.noRequests=!0},$scope.getPhaseCircleStyle=function(phase){return void 0!==$scope.phaseConfig[phase]?{"background-color":$scope.phaseConfig[phase].color,"border-color":$scope.phaseConfig[phase].color}:{"background-color":$scope.phaseConfig.UNKNOWN.color,"border-color":$scope.phaseConfig.UNKNOWN.color}},$scope.getPhaseName=function(phase){return void 0!==$scope.phaseConfig[phase]?$scope.phaseConfig[phase].name:$scope.phaseConfig.UNKNOWN.name},$scope.getPhaseColor=function(phase){return void 0!==$scope.phaseConfig[phase]?$scope.phaseConfig[phase].color:$scope.phaseConfig.UNKNOWN.color},$scope.getString=function(key){return resourceManager?resourceManager.getString("ui",key):""},$scope.$watch("config",$scope.updateChartData),$scope.$watch("showReqWithoutLoad",$scope.updateChartData)}]}}return EUMPageRequestSection}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-eum-page-request-section"),EUMPageRequestSection),define("app/view/eum/dashboardCharts/EUMPageRequestSection",function(){});var EUMPageRequestTrends=function(){function EUMPageRequestTrends(){return{restrict:"A",replace:!0,scope:{data:"=adEumPageRequestTrends",addId:"=svAddId",applicationId:"=svApplicationId",async:"=svAsync"},templateUrl:"app/view/eum/dashboardCharts/EUMPageRequestTrends.html",controller:["$scope","resourceManager","eumViewService","$timeout",function($scope,resourceManager,eumViewService){$scope.pieChartConfig={},$scope.chartConfig={},$scope.icon="",$scope.noData=!0,$scope.showChart=$scope.async!==!0,$scope.async===!0&&window.setTimeout(function(){$scope.showChart=!0,ViewUtil.safeDigest($scope)},1),$scope.phaseConfig={AFTER_FIRST_BYTE:{name:"After First Byte",color:UiConfig.getColor("EUM_PD_REQUEST_PHASE_AFTER_FIRST_BYTE_CHART_COLOR")},AFTER_DOM_INTERACTIVE:{name:"After DOM Ready",color:UiConfig.getColor("EUM_PD_REQUEST_PHASE_AFTER_DOM_INTERACTIVE_CHART_COLOR")},AT_ONLOAD:{name:"At Onload",color:UiConfig.getColor("EUM_PD_REQUEST_PHASE_AT_ONLOAD_CHART_COLOR")},AFTER_ONLOAD:{name:"After Onload",color:UiConfig.getColor("EUM_PD_REQUEST_PHASE_AFTER_ONLOAD_CHART_COLOR")},UNKNOWN:{name:"Unknown Phase",color:UiConfig.getColor("EUM_PD_REQUEST_PHASE_UNKNOWN_CHART_COLOR")}},$scope.updateRequestPieChartConfig=function(){$scope.pieChartConfig=ChartUtil.simplePieChart(),$scope.pieChartConfig.plotOptions.pie.animation=!1;var phases=$scope.data.phases,pageRequestPieSeriesData=[];for(var phase in phases){var pageRequestPieSeriesDataItem={name:$scope.getPhaseName(phase),color:$scope.getPhaseColor(phase),y:100*(phases[phase].totalNumberOfRequests.value/$scope.data.totalNumberOfRequests.value),shadow:!1};pageRequestPieSeriesData.push(pageRequestPieSeriesDataItem)}$scope.pieChartConfig.series=[{type:"pie",name:"",data:pageRequestPieSeriesData}]},$scope.updateChartConfig=function(){$scope.chartConfig=ChartUtil.getTwoAxisTwoDTimeChartConfig(""," Req/Min"," ms"),$scope.chartConfig.chart.spacing=[10,0,10,0],$scope.chartConfig.chart.marginLeft=100,$scope.chartConfig.chart.marginRight=75,$scope.chartConfig.plotOptions.series.marker={enabled:!0,radius:2},$scope.chartConfig.plotOptions.series.animation=!1,$scope.chartConfig.plotOptions.column={stacking:"normal"},$scope.chartConfig.series=[],$scope.noData=!0,$scope.chartConfig.xAxis.tickLength=10,$scope.chartConfig.xAxis.tickWidth=1;for(var phase in $scope.data.phases)if($scope.data.phases.hasOwnProperty(phase)){var pageRequestLoadSeries={name:$scope.getPhaseName(phase),color:$scope.getPhaseColor(phase),type:"column",yAxis:0,zIndex:1,data:$scope.data.phases[phase].requestsPerMinute.graphData.data,tooltip:{valueSuffix:" Req/Min"}};pageRequestLoadSeries.data&&pageRequestLoadSeries.data.length>0&&($scope.noData=!1),$scope.chartConfig.plotOptions.series.pointStart=$scope.data.phases[phase].requestsPerMinute.graphData.startTime,$scope.chartConfig.plotOptions.series.pointInterval=$scope.data.phases[phase].requestsPerMinute.graphData.interval*ChartUtil.MILLISECONDS_PER_MINUTE,void 0!=$scope.phaseConfig[phase]&&(pageRequestLoadSeries.name=$scope.phaseConfig[phase].name,pageRequestLoadSeries.color=$scope.phaseConfig[phase].color),$scope.chartConfig.series.push(pageRequestLoadSeries)}var averageResponseTime=$scope.data.averageResponseTime,averageResponseTimeData=[];if(averageResponseTime&&null!=averageResponseTime.graphData){var averageResponseTimeChartData=averageResponseTime.graphData;averageResponseTimeData=averageResponseTimeChartData.data,$scope.chartConfig.plotOptions.series.pointStart=averageResponseTimeChartData.startTime,$scope.chartConfig.plotOptions.series.pointInterval=averageResponseTimeChartData.interval*ChartUtil.MILLISECONDS_PER_MINUTE}averageResponseTimeData&&averageResponseTimeData.length>0&&($scope.noData=!1);var pageRequestResponseTimeSeries={name:"Response Time",color:UiConfig.getColor("EUM_PD_REQUEST_RESPONSE_TIME_CHART_COLOR"),type:"spline",yAxis:1,zIndex:2,data:averageResponseTimeData,tooltip:{valueSuffix:" ms"}};$scope.chartConfig.series.push(pageRequestResponseTimeSeries)},$scope.updateIcon=function(){"object"==typeof $scope.data?"AJAX_REQUEST"==$scope.data.addType?$scope.icon="images/icon_eum_ajax_18x18.png":"IFRAME"===$scope.data.addType&&($scope.icon="images/icon_eum_iframe_18x18.png"):$scope.icon=""},$scope.getStyleForART=function(){return{"background-color":UiConfig.getColor("EUM_PD_REQUEST_RESPONSE_TIME_CHART_COLOR")}},$scope.getStyleForRPM=function(){return{"background-color":UiConfig.getColor("EUM_PD_REQUEST_LOAD_CHART_COLOR")}},$scope.getPhaseLineStyle=function(phase){return void 0!==$scope.phaseConfig[phase]?{"background-color":$scope.phaseConfig[phase].color}:{"background-color":$scope.phaseConfig.UNKNOWN.color}},$scope.getPhaseName=function(phase){return void 0!==$scope.phaseConfig[phase]?$scope.phaseConfig[phase].name:$scope.phaseConfig.UNKNOWN.name},$scope.getPhaseColor=function(phase){return void 0!==$scope.phaseConfig[phase]?$scope.phaseConfig[phase].color:$scope.phaseConfig.UNKNOWN.color},$scope.getString=function(key){return resourceManager?resourceManager.getString("ui",key):""},$scope.goToDashboardForPage=function(addId){void 0!=addId&&null!=addId&&-1!=addId&&(eumViewService.viewPageDashboardForAddId($scope.applicationId,addId),$scope.$emit("refreshForNewPage"))},$scope.getNumOfBlocking=function(){return"object"==typeof $scope.data.phases.BLOCKING?$scope.data.phases.BLOCKING.totalNumberOfRequests:0},$scope.getNumOfNonBlocking=function(){return"object"==typeof $scope.data.phases.NON_BLOCKING?$scope.data.phases.NON_BLOCKING.totalNumberOfRequests:0},$scope.updateChartData=function(){$scope.updateChartConfig(),$scope.updateRequestPieChartConfig(),$scope.updateIcon()},$scope.$watch("data",$scope.updateChartData)}]}}return EUMPageRequestTrends}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-eum-page-request-trends"),EUMPageRequestTrends),define("app/view/eum/dashboardCharts/EUMPageRequestTrends",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EUMWebSections;!function(EUMWebSections){EUMWebSections[EUMWebSections.OVERVIEW=0]="OVERVIEW",EUMWebSections[EUMWebSections.SESSIONS=1]="SESSIONS",EUMWebSections[EUMWebSections.PAGE_VIEWS=2]="PAGE_VIEWS",EUMWebSections[EUMWebSections.SYNTHETIC_JOBS=3]="SYNTHETIC_JOBS",EUMWebSections[EUMWebSections.SYNTHETIC_SNAPSHOTS=4]="SYNTHETIC_SNAPSHOTS",EUMWebSections[EUMWebSections.SYNTHETIC_PAGES=5]="SYNTHETIC_PAGES",EUMWebSections[EUMWebSections.SYNTHETIC_ON_DEMAND=6]="SYNTHETIC_ON_DEMAND"}(EUMWebSections||(EUMWebSections={}));var EumViewService=function(_super){function EumViewService($location,navigationService,notificationService,resourceManager,filterService){var _this=this;
_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.filterService=filterService,this.viewRequestSnapshotDetails=function(applicationId,platform,mobileAppId,mobileSnapshotId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_REQUEST_SNAPSHOT_DETAILS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),params.setNumberParam(UrlConstants.EUM_MOBILE_SNAPSHOT,mobileSnapshotId),this.navigationService.navigateTo(params.toString())},this.overviewNavigationTabs=[NavigationDataConstants.EUM_WEB_MAIN_DASHBOARD,NavigationDataConstants.EUM_DASHBOARD,NavigationDataConstants.EUM_BROWSER_SNAPSHOTS,NavigationDataConstants.EUM_BROWSERS_AND_DEVICES],this.overviewNavigationTabsLite=[NavigationDataConstants.EUM_WEB_MAIN_DASHBOARD,NavigationDataConstants.EUM_DASHBOARD,NavigationDataConstants.EUM_BROWSERS_AND_DEVICES],this.sessionNavigationTabs=[NavigationDataConstants.EUM_WEB_SESSION_ANALYTICS],this.pageViewsNavigationTabs=[NavigationDataConstants.EUM_PAGES_LIST,NavigationDataConstants.EUM_BROWSER_SNAPSHOTS],this.pageViewsNavigationTabsLite=[NavigationDataConstants.EUM_PAGES_LIST,NavigationDataConstants.EUM_BROWSER_SNAPSHOTS],this.syntheticJobsNavigationTabs=[NavigationDataConstants.EUM_SYNTHETIC_SCHEDULE_LIST],this.syntheticSnapshotsNavigationTabs=[NavigationDataConstants.EUM_SYNTHETIC_SESSION_ANALYTICS],this.syntheticPagesNavigationTabs=[NavigationDataConstants.EUM_SYNTHETIC_PAGES_LIST],this.syntheticOnDemandNavigationTabs=[NavigationDataConstants.EUM_SYNTHETIC_LAUNCH],this.mapOfWebLocationsToTabs={EUM_WEB_MAIN_DASHBOARD:{group:0,tabFn:function(appId){return _this.getWebOverviewTab(appId)}},EUM_DASHBOARD:{group:0,tabFn:function(appId){return _this.getEumDashboardTab(appId)}},EUM_BROWSER_SNAPSHOTS:{group:0,tabFn:function(appId){return _this.getBrowserSnapshotsTab(appId)}},EUM_BROWSERS_AND_DEVICES:{group:0,tabFn:function(appId){return _this.getWebUsageStatsTab(appId)}},EUM_PAGES_LIST:{group:2,tabFn:function(appId){return _this.getPageListTab(appId)}},EUM_WEB_ANALYZE:{group:2,tabFn:function(appId){return _this.getWebAnalyzeTab(appId)}},EUM_SYNTHETIC_SCHEDULE_LIST:{group:3,tabFn:function(appId){return _this.getSyntheticTab(appId)}},EUM_SYNTHETIC_LAUNCH:{group:6,tabFn:function(appId){return _this.getSyntheticLaunchTab(appId)}},EUM_SYNTHETIC_SCHEDULE:{group:3,tabFn:function(appId){return _this.getSyntheticScheduleTab(appId)}},EUM_SYNTHETIC_SESSION_ANALYTICS:{group:4,tabFn:function(appId){return _this.getSyntheticAnalyzeTab(appId)}},EUM_WEB_SESSION_ANALYTICS:{group:1,tabFn:function(appId){return _this.getWebSessionsAnalyzeTab(appId)}},EUM_SYNTHETIC_PAGES_LIST:{group:5,tabFn:function(appId){return _this.getSyntheticPageListTab(appId)}}},this.lastViewedMobileApp={},this.lastViewedAllAppsLocation=null,InjectorService.instance().$rootScope().$on(NavigationService.UEV_NAV_ACTION_HTML,function(){_this.on_UEV_NAV_ACTION()}),InjectorService.instance().$rootScope().$on(NavigationService.UEV_NAV_ACTION_FLASH,function(){_this.on_UEV_NAV_ACTION()})}return __extends(EumViewService,_super),EumViewService.instance=function(){return AngularUtil.getADInjector().get(EumViewService.SERVICE_NAME)},EumViewService.prototype.viewEumGeoMaster=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_GEO_MASTER),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewHome=function(){this.lastViewedAllAppsLocation||(this.lastViewedAllAppsLocation=UserService.instance().getUserPreferenceValue(EumViewService.EUM_LAST_VIEWED_ALL_APPS_LOCATION)),this.lastViewedAllAppsLocation?this.lastViewedAllAppsLocation===NavigationDataConstants.EUM_WEB_ALL_APPS?this.viewWebAllApps():this.lastViewedAllAppsLocation===NavigationDataConstants.EUM_MOBILE_ALL_APPS&&this.viewMobileAllApps():this.viewWebAllApps()},EumViewService.prototype.viewWebAllApps=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_WEB_ALL_APPS),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewMobileAllApps=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_MOBILE_ALL_APPS),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewEumWebHome=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.EUM_WEB_HOME,applicationId)},EumViewService.prototype.viewWebGeo=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewEumWebMainDashboard=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_WEB_MAIN_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewWebBrowserSnapshotList=function(applicationId,filters,addId){void 0===addId&&(addId=null);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_BROWSER_SNAPSHOTS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.SELECTED_TAB,EumViewService.EUMDashboardView_TAB_SNAPSHOTS),this.filterService.populateUrlParamFromFilters(filters,params),addId&&params.setParam(UrlConstants.APPLICATION_DIAGNOSTIC_DATA_ID,addId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewWebBrowserSnapshotListForPage=function(applicationId,addId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_PAGE_BROWSER_SNAPSHOTS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.APPLICATION_DIAGNOSTIC_DATA_ID,addId);var pageFilter={name:"pages",type:ParameterTypes.FLY_OUT_SELECT,values:[]};pageFilter.values.push({icon:null,name:null,value:[addId.toString()]});var isRumPageFilter={name:"realUserSnapshots",type:ParameterTypes.BOOLEAN,value:!0},filters={};filters[pageFilter.name]=pageFilter,filters[isRumPageFilter.name]=isRumPageFilter,this.filterService.populateUrlParamFromFilters(filters,params),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewBrowserSnapshot=function(applicationId,snapshotId,snapshotTimeStamp){var params={applicationId:applicationId,snapshotId:snapshotId,snapshotTimeStamp:snapshotTimeStamp};DialogService.instance().showDialog("BrowserSnapshotDetailsController","app/view/eum/web/browserSnapshot/details/BrowserSnapshotDetailsController","app/view/eum/web/browserSnapshot/details/BrowserSnapshotDetailsView.html",params)},EumViewService.prototype.viewWebPagesList=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_PAGES_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewSyntheticWebPagesList=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_SYNTHETIC_PAGES_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewWebEndUserStats=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_BROWSERS_AND_DEVICES),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewEumWebSessions=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_WEB_SESSION_ANALYTICS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewEumWebSessionsVisualization=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_WEB_SESSION_ANALYTICS),params.setParam(UrlConstants.TAB_ID,UrlConstants.EUM_TAB_VISUALIZATION),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewWebAnalyze=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_WEB_ANALYZE),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewWebAnalyzeForPresetFilters=function(applicationId,filters){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_WEB_ANALYZE),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.filterService.populateUrlParamFromFilters(filters,params),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewPageDashboardForAddId=function(applicationId,addid){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_PAGE_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.APPLICATION_DIAGNOSTIC_DATA_ID,addid),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewWebConfig=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_WEB_CONFIG),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewEumMobileHome=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.EUM_MOBILE_HOME,applicationId)},EumViewService.prototype.viewPlatformGeo=function(applicationId,platform){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_PLATFORM),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewEumMobileMainDashboard=function(applicationId,platform,mobileAppId){var idAndPlatform,_this=this,navigateCallback=function(){idAndPlatform||(idAndPlatform=[0,MobilePlatform.IOS]);var params=_this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_MOBILE_MAIN_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,idAndPlatform[1]),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,idAndPlatform[0]),_this.navigationService.navigateTo(params.toString())};idAndPlatform=this.getMobileAppIdAndPlatform(applicationId,mobileAppId,platform),idAndPlatform?navigateCallback():ApplicationsCache.instance().getMobileApps(applicationId).then(function(){idAndPlatform=_this.getDefaultMobileAppIdAndPlatformForApp(applicationId),navigateCallback()})},EumViewService.prototype.viewMobileAppGeo=function(applicationId,platform,mobileAppId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_MOBILE_APPLICATION),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewSyntheticOnDemand=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_SYNTHETIC_ON_DEMAND),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewSyntheticLaunch=function(applicationId,requestURL,requestId){void 0===requestURL&&(requestURL=""),void 0===requestId&&(requestId="");var params={applicationId:applicationId,requestURL:requestURL,requestId:requestId};DialogService.instance().showDialog("SyntheticLaunchController","app/view/eum/web/synthetic/SyntheticLaunchController","app/view/eum/web/synthetic/SyntheticLaunch.html",params)},EumViewService.prototype.editSyntheticSchedule=function(applicationId,scheduleId,doClone){void 0===scheduleId&&(scheduleId=""),void 0===doClone&&(doClone=!1);var params={applicationId:applicationId,scheduleId:scheduleId,doClone:doClone};DialogService.instance().showDialog("SyntheticScheduleEditorController","app/view/eum/web/synthetic/scheduleEditor/SyntheticScheduleEditorController","app/view/eum/web/synthetic/scheduleEditor/SyntheticScheduleEditor.html",params)},EumViewService.prototype.viewRumSynthPDComp=function(applicationId,addId){var params={applicationId:applicationId,addId:addId};DialogService.instance().showDialog("RumSynthPDCompController","app/view/eum/web/pageDashboard/RumSynthPDCompController","app/view/eum/web/pageDashboard/RumSynthPDComp.html",params)},EumViewService.prototype.viewSyntheticScheduleList=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_SYNTHETIC_SCHEDULE_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewSyntheticAnalyze=function(applicationId,filtersInUrl){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_SYNTHETIC_SESSION_ANALYTICS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),Util.isDefAndNotNull(filtersInUrl)&&this.filterService.populateUrlParamFromFilters(filtersInUrl,params),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewSyntheticAnalyzeForTimerange=function(applicationId,timeRangeSpecifier,filtersInUrl){var params=URLParams.createEmptyUrlParams();params.setParam(UrlConstants.TIME_RANGE,TimeRangeService.instance().convertToPreferenceString(timeRangeSpecifier,".")),params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_SYNTHETIC_SESSION_ANALYTICS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),Util.isDefAndNotNull(filtersInUrl)&&this.filterService.populateUrlParamFromFilters(filtersInUrl,params),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewSyntheticVisualization=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_SYNTHETIC_SESSION_ANALYTICS),params.setParam(UrlConstants.TAB_ID,UrlConstants.EUM_TAB_VISUALIZATION),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewSyntheticPageDashboardForAddId=function(applicationId,addId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_SYNTHETIC_PAGE_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.APPLICATION_DIAGNOSTIC_DATA_ID,addId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewMobileConfig=function(applicationId,platform,mobileAppId,showMissingDSymModal){void 0===showMissingDSymModal&&(showMissingDSymModal=!1);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_MOBILE_CONFIG),params.setParam(UrlConstants.EUM_PLATFORM,platform),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),showMissingDSymModal&&params.setParam(UrlConstants.EUM_CONFIG_SHOW_DSYM,"true"),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewRequestDashboardForPlatform=function(applicationId,platform,addId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_REQUEST_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),params.setNumberParam(UrlConstants.APPLICATION_DIAGNOSTIC_DATA_ID,addId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewRequestDashboardForMobileApp=function(applicationId,platform,mobileAppId,addId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_REQUEST_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),params.setNumberParam(UrlConstants.APPLICATION_DIAGNOSTIC_DATA_ID,addId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewRequestListForPlatform=function(applicationId,platform){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_REQUEST_SNAPSHOT_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewRequestListForMobileApp=function(applicationId,platform,mobileAppId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_REQUEST_SNAPSHOT_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewMobileSnapshotDetailsForPlatform=function(applicationId,platform,mobileSnapshotId,snapshotTimestamp){var params={applicationId:applicationId,platform:platform,mobileAppId:void 0,mobileSnapshotId:mobileSnapshotId,mobileSnapshotTimestamp:snapshotTimestamp,openedFromSessionDetails:!1};DialogService.instance().showDialog("MobileSnapshotDetailsController","app/view/eum/mobile/mobileSnapshots/details/MobileSnapshotDetailsController","app/view/eum/mobile/mobileSnapshots/details/MobileSnapshotDetails.html",params)},EumViewService.prototype.viewMobileSnapshotDetailsForMobileApp=function(applicationId,platform,mobileAppId,mobileSnapshotId,snapshotTimestamp,openedFromSessionDetails){void 0===openedFromSessionDetails&&(openedFromSessionDetails=!1);var params={applicationId:applicationId,platform:platform,mobileAppId:mobileAppId,mobileSnapshotId:mobileSnapshotId,mobileSnapshotTimestamp:snapshotTimestamp,openedFromSessionDetails:openedFromSessionDetails};DialogService.instance().showDialog("MobileSnapshotDetailsController","app/view/eum/mobile/mobileSnapshots/details/MobileSnapshotDetailsController","app/view/eum/mobile/mobileSnapshots/details/MobileSnapshotDetails.html",params),EventBusService.instance().dispatchEvent(EventConstants.UEV_EUM_MOBILE_REQUEST_SNAPSHOT,null)},EumViewService.prototype.viewMobileInfoPoints=function(applicationId,platform,mobileAppId){var idAndPlatform,_this=this,navigateCallback=function(){idAndPlatform||(idAndPlatform=[0,MobilePlatform.IOS]);var params=_this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_MOBILE_INFO_POINT_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,idAndPlatform[1]),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,idAndPlatform[0]),_this.navigationService.navigateTo(params.toString())};idAndPlatform=this.getMobileAppIdAndPlatform(applicationId,mobileAppId,platform),idAndPlatform?navigateCallback():ApplicationsCache.instance().getMobileApps(applicationId).then(function(){idAndPlatform=_this.getDefaultMobileAppIdAndPlatformForApp(applicationId),navigateCallback()})},EumViewService.prototype.viewMobileInfoPointsOnly=function(applicationId,platform,mobileAppId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_MOBILE_INFO_POINTS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),isNaN(mobileAppId)||params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewMobileCustomMetrics=function(applicationId,platform,mobileAppId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_MOBILE_CUSTOM_METRIC_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),isNaN(mobileAppId)||params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewCrashDashboardForPlatform=function(applicationId,platform){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_ANALYTICS_CRASH_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewCrashDashboardForMobileApp=function(applicationId,platform,mobileAppId){var idAndPlatform,_this=this,navigateCallback=function(){idAndPlatform||(idAndPlatform=[0,MobilePlatform.IOS]);var params=_this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_ANALYTICS_CRASH_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,idAndPlatform[1]),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,idAndPlatform[0]),_this.navigationService.navigateTo(params.toString())};idAndPlatform=this.getMobileAppIdAndPlatform(applicationId,mobileAppId,platform),idAndPlatform?navigateCallback():ApplicationsCache.instance().getMobileApps(applicationId).then(function(){idAndPlatform=_this.getDefaultMobileAppIdAndPlatformForApp(applicationId),navigateCallback()})},EumViewService.prototype.viewCrashListForPlatform=function(applicationId,platform,crashGroupId,filters){void 0===crashGroupId&&(crashGroupId=null),void 0===filters&&(filters=null);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_CRASH_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),crashGroupId&&params.setParam(UrlConstants.EUM_MOBILE_CRASH_GROUP_ID,crashGroupId),Util.isDefAndNotNull(filters)&&this.filterService.populateUrlParamFromFilters(filters,params),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewCrashListForMobileApp=function(applicationId,platform,mobileAppId,crashGroupId,crashName,filters){void 0===crashGroupId&&(crashGroupId=null),void 0===crashName&&(crashName=null),void 0===filters&&(filters=null);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_CRASH_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),crashGroupId&&params.setParam(UrlConstants.EUM_MOBILE_CRASH_GROUP_ID,crashGroupId),crashName&&params.setParam(UrlConstants.EUM_MOBILE_CRASH_NAME,crashName),Util.isDefAndNotNull(filters)&&this.filterService.populateUrlParamFromFilters(filters,params),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewAnalyticsCrashDashboardForPlatform=function(applicationId,platform){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_ANALYTICS_CRASH_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewAnalyticsCrashDashboardForMobileApp=function(applicationId,platform,mobileAppId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_ANALYTICS_CRASH_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewCrashGroupDashboardForPlatform=function(applicationId,platform,crashName,crashId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_CRASH_GROUP_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),params.setParam("CRASH_GROUP_NAME",crashName),params.setParam("CRASH_GROUP_ID",crashId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewCrashGroupDashboardForMobileApp=function(applicationId,platform,mobileAppId,crashName,crashId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_CRASH_GROUP_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),params.setParam("CRASH_GROUP_NAME",crashName),params.setParam("CRASH_GROUP_ID",crashId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewCrashDetailsForPlatform=function(applicationId,platform,crashId){var params={applicationId:applicationId,platform:platform,mobileAppId:void 0,crashId:crashId,openedFromSessionDetails:!1};DialogService.instance().showDialog("CrashDetailsController","app/view/eum/mobile/crashes/details/CrashDetailsController","app/view/eum/mobile/crashes/details/CrashDetails.html",params)},EumViewService.prototype.viewCrashDetailsForMobileApp=function(applicationId,platform,mobileAppId,crashId,openedFromSessionDetails){void 0===openedFromSessionDetails&&(openedFromSessionDetails=!1);var params={applicationId:applicationId,platform:platform,mobileAppId:void 0,crashId:crashId,openedFromSessionDetails:openedFromSessionDetails};DialogService.instance().showDialog("CrashDetailsController","app/view/eum/mobile/crashes/details/CrashDetailsController","app/view/eum/mobile/crashes/details/CrashDetails.html",params)},EumViewService.prototype.viewMobileNetworkRequestList=function(applicationId,platform,mobileAppId){var idAndPlatform,_this=this,navigateCallback=function(){idAndPlatform||(idAndPlatform=[0,MobilePlatform.IOS]);var params=_this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_REQUESTS_EPISODES),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,idAndPlatform[1]),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,idAndPlatform[0]),_this.navigationService.navigateTo(params.toString())};idAndPlatform=this.getMobileAppIdAndPlatform(applicationId,mobileAppId,platform),idAndPlatform?navigateCallback():ApplicationsCache.instance().getMobileApps(applicationId).then(function(){idAndPlatform=_this.getDefaultMobileAppIdAndPlatformForApp(applicationId),navigateCallback()})},EumViewService.prototype.viewMobileSessionAnalyze=function(applicationId,platform,mobileAppId,filters){var idAndPlatform,_this=this,navigateCallback=function(){idAndPlatform||(idAndPlatform=[0,MobilePlatform.IOS]);var params=_this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_MOBILE_SESSION_ANALYTICS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,idAndPlatform[1]),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,idAndPlatform[0]),filters&&_this.filterService.populateUrlParamFromFilters(filters,params),_this.navigationService.navigateTo(params.toString())};idAndPlatform=this.getMobileAppIdAndPlatform(applicationId,mobileAppId,platform),idAndPlatform?navigateCallback():ApplicationsCache.instance().getMobileApps(applicationId).then(function(){idAndPlatform=_this.getDefaultMobileAppIdAndPlatformForApp(applicationId),navigateCallback()})},EumViewService.prototype.viewNetworkRequestAnalyze=function(applicationId,platform,mobileAppId){var idAndPlatform,_this=this,navigateCallback=function(){idAndPlatform||(idAndPlatform=[0,MobilePlatform.IOS]);var params=_this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_NETWORK_REQUEST_ANALYTICS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,idAndPlatform[1]),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,idAndPlatform[0]),_this.navigationService.navigateTo(params.toString())};idAndPlatform=this.getMobileAppIdAndPlatform(applicationId,mobileAppId,platform),idAndPlatform?navigateCallback():ApplicationsCache.instance().getMobileApps(applicationId).then(function(){idAndPlatform=_this.getDefaultMobileAppIdAndPlatformForApp(applicationId),navigateCallback()})},EumViewService.prototype.viewMobileSnapshotList=function(applicationId,platform,mobileAppId){var idAndPlatform,_this=this,navigateCallback=function(){idAndPlatform||(idAndPlatform=[0,MobilePlatform.IOS]);var params=_this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_REQUEST_SNAPSHOT_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,idAndPlatform[1]),params.setNumberParam(UrlConstants.EUM_MOBILE_APP,idAndPlatform[0]),_this.navigationService.navigateTo(params.toString())};idAndPlatform=this.getMobileAppIdAndPlatform(applicationId,mobileAppId,platform),idAndPlatform?navigateCallback():ApplicationsCache.instance().getMobileApps(applicationId).then(function(){idAndPlatform=_this.getDefaultMobileAppIdAndPlatformForApp(applicationId),navigateCallback()})},EumViewService.prototype.viewRelatedMobileSnapshotList=function(applicationId,platform,mobileAppId,addId,networkRequestName){void 0===networkRequestName&&(networkRequestName=null);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_REQUEST_SNAPSHOT_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),params.setParam(UrlConstants.APPLICATION_DIAGNOSTIC_DATA_ID,""+addId),isNaN(mobileAppId)||params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),networkRequestName&&params.setParam(UrlConstants.EUM_MOBILE_NETWORK_REQUEST_NAME,networkRequestName),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewMobileNetworkRequestAnalyze=function(applicationId,platform,mobileAppId,filters){var params=this.createUrlParamsWithCurrentTimeRange();
params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_NETWORK_REQUEST_ANALYTICS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),isNaN(mobileAppId)||params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),this.filterService.populateUrlParamFromFilters(filters,params),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewMobileCrashes=function(applicationId,platform,mobileAppId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_CRASH_DASHBOARD),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),isNaN(mobileAppId)||params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewMobileEndUserStats=function(applicationId,platform,mobileAppId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_DEVICES_CARRRIERS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),isNaN(mobileAppId)||params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewRelatedWebSessionDetails=function(sessionGuid,applicationId){if(sessionGuid&&applicationId){var params={sessionguid:sessionGuid,applicationId:applicationId};DialogService.instance().showDialog("EUMWebSessionDetailsController","app/view/eum/web/sessions/EUMWebSessionDetailsController","app/view/eum/web/sessions/EUMWebSessionDetails.html",params)}},EumViewService.prototype.viewRelatedMobileSessionDetails=function(sessionGuid,applicationId){if(sessionGuid&&applicationId){var params={sessionguid:sessionGuid,applicationId:applicationId};DialogService.instance().showDialog("EUMMobileSessionDetailsController","app/view/eum/web/sessions/EUMMobileSessionDetailsController","app/view/eum/web/sessions/EUMMobileSessionDetails.html",params)}},EumViewService.prototype.viewRelatedSyntheticSessionDetails=function(synthMeasurementId,applicationId){if(synthMeasurementId&&applicationId){var params={synthMeasurementId:synthMeasurementId,applicationId:applicationId};DialogService.instance().showDialog("EUMSyntheticSessionDetailsController","app/view/eum/web/sessions/EUMSyntheticSessionDetailsController","app/view/eum/web/sessions/EUMSyntheticSessionDetails.html",params)}},EumViewService.prototype.viewWebEventsList=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_WEB_EVENTS_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewMobileEventsList=function(applicationId,platform,mobileAppId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_MOBILE_EVENTS_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),isNaN(mobileAppId)||params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewWebHealthRuleViolations=function(applicationId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_WEB_HEALTH_RULE_VIOLATIONS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.viewMobileHealthRuleViolations=function(applicationId,platform,mobileAppId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.EUM_MOBILE_HEALTH_RULE_VIOLATIONS),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.EUM_PLATFORM,platform),isNaN(mobileAppId)||params.setNumberParam(UrlConstants.EUM_MOBILE_APP,mobileAppId),this.navigationService.navigateTo(params.toString())},EumViewService.prototype.getLocationBarConfigsForWebApp=function(applicationId,appName,screenName){var _this=this,locationEntries=[];return locationEntries.push({label:this.getString("ms_eumTopLevelNavZoneLabel")+" - "+this.getString("ms_eumWebAppsNavZoneLabel"),clickFn:function(){_this.viewWebAllApps()}}),locationEntries.push({label:appName,clickFn:function(){_this.viewEumWebMainDashboard(applicationId)}}),screenName&&locationEntries.push({label:screenName}),locationEntries},EumViewService.prototype.getLocationBarConfigsForMobileApp=function(mobileAppId,mobileAppName,platform,applicationId,screenName){var _this=this,locationEntries=[];return locationEntries.push({label:this.getString("ms_eumTopLevelNavZoneLabel")+" - "+this.getString("ms_eumMobileAppsNavZoneLabel"),clickFn:function(){_this.viewMobileAllApps()}}),locationEntries.push({label:mobileAppName,clickFn:function(){_this.viewEumMobileMainDashboard(applicationId,platform,mobileAppId)}}),screenName&&locationEntries.push({label:screenName}),locationEntries},EumViewService.prototype.getEumWebLocationBarEntryConfig=function(applicationId){var _this=this;return{clickFn:function(){_this.viewEumWebHome(applicationId)},label:this.getString("ms_eumWebAppsAPMLeftNavZoneLabel")}},EumViewService.prototype.getPagesAndAjaxRequestsLocationBarEntryConfig=function(applicationId){var _this=this;return{clickFn:function(){_this.viewWebPagesList(applicationId)},label:this.getString("ms_pagesAndAjaxRequestsNavLabel")}},EumViewService.prototype.getEumMobileLocationBarEntryConfig=function(applicationId){var _this=this;return{clickFn:function(){_this.viewEumMobileHome(applicationId)},label:this.getString("ms_eumMobileAppsAPMLeftNavZoneLabel")}},EumViewService.prototype.getMobileNetworkRequestListLocationBarEntryConfig=function(mobileAppId,platform,applicationId){var _this=this;return{clickFn:function(){_this.viewMobileNetworkRequestList(applicationId,platform,mobileAppId)},label:this.getString("ms_requestsAndEpisodes")}},EumViewService.prototype.getMobileNetworkRequestsTab=function(mobileAppId,platform,applicationId){var _this=this;return{name:this.resourceManager.getString("ui","ms_requestsAndEpisodes"),clickFn:function(){_this.viewMobileNetworkRequestList(applicationId,platform,mobileAppId)}}},EumViewService.prototype.getMobileNetworkRequestAnalyzeTab=function(mobileAppId,platform,applicationId){var _this=this;return{name:this.resourceManager.getString("ui","ms_mobileRequestAnalyticsTab"),clickFn:function(){_this.viewNetworkRequestAnalyze(applicationId,platform,mobileAppId)}}},EumViewService.prototype.getMobileRequestSnapshotsTab=function(mobileAppId,platform,applicationId){var _this=this;return{name:this.resourceManager.getString("ui","ms_snapshots"),clickFn:function(){_this.viewMobileSnapshotList(applicationId,platform,mobileAppId)}}},EumViewService.prototype.getSyntheticTab=function(applicationId){var _this=this;return{name:this.getString("ms_SYNTHETIC_JOBS_TAB"),clickFn:function(){_this.viewSyntheticScheduleList(applicationId)}}},EumViewService.prototype.getSyntheticAnalyzeTab=function(applicationId){var _this=this;return{name:this.getString("ms_SYNTHETIC_ANALYZE"),clickFn:function(){_this.viewSyntheticAnalyze(applicationId)}}},EumViewService.prototype.getWebOverviewTab=function(applicationId){var _this=this;return{name:this.getString("ms_eumMainDashboardTabLabel"),clickFn:function(){_this.viewEumWebMainDashboard(applicationId)}}},EumViewService.prototype.getPageListTab=function(applicationId){var _this=this;return{name:this.getString("ms_pagesAndAjaxRequestsNavLabel"),clickFn:function(){_this.viewWebPagesList(applicationId)}}},EumViewService.prototype.getEumDashboardTab=function(applicationId){var _this=this;return{name:this.getString("ms_geoDashboardTabLabel"),clickFn:function(){_this.viewWebGeo(applicationId)}}},EumViewService.prototype.getWebUsageStatsTab=function(applicationId){var _this=this;return{name:this.getString("ms_endUserStats"),clickFn:function(){_this.viewWebEndUserStats(applicationId)}}},EumViewService.prototype.getWebAnalyzeTab=function(applicationId){var _this=this;return{name:"Analyze",clickFn:function(){_this.viewWebAnalyze(applicationId)}}},EumViewService.prototype.getBrowserSnapshotsTab=function(applicationId){var _this=this;return{name:this.getString("ms_eumSnapshotsTabLabel"),clickFn:function(){_this.viewWebBrowserSnapshotList(applicationId)}}},EumViewService.prototype.getEventsTab=function(applicationId){var _this=this;return{name:this.getString("ms_events"),clickFn:function(){_this.viewWebEventsList(applicationId)}}},EumViewService.prototype.getSyntheticLaunchTab=function(applicationId){var _this=this;return{name:this.getString("ms_generateASingleSnapshot"),clickFn:function(){_this.viewSyntheticLaunch(applicationId)}}},EumViewService.prototype.getSyntheticScheduleTab=function(applicationId){var _this=this;return{name:this.getString("ms_createANewJob"),clickFn:function(){_this.viewSyntheticLaunch(applicationId)}}},EumViewService.prototype.getWebSessionsAnalyzeTab=function(applicationId){var _this=this;return{name:this.getString("ms_webSessionsScreenTitle"),clickFn:function(){_this.viewEumWebSessions(applicationId)}}},EumViewService.prototype.getSyntheticPageListTab=function(applicationId){var _this=this;return{name:this.getString("ms_pagesAndAjaxRequestsNavLabel"),clickFn:function(){_this.viewSyntheticWebPagesList(applicationId)}}},EumViewService.prototype.getWebNavigationTabsForLocation=function(location,applicationId){var locationMapping=this.mapOfWebLocationsToTabs[location],featureService=SharedInjectorService.instance().featureService(),navigationTabs=[];if(locationMapping){var tabList=[];switch(locationMapping.group){case 0:tabList=featureService.isWebEUMProEnabled()?this.overviewNavigationTabs:this.overviewNavigationTabsLite;break;case 1:tabList=this.sessionNavigationTabs;break;case 2:tabList=featureService.isWebEUMProEnabled()?this.pageViewsNavigationTabs:this.pageViewsNavigationTabsLite;break;case 3:tabList=this.syntheticJobsNavigationTabs;break;case 4:tabList=this.syntheticSnapshotsNavigationTabs;break;case 5:tabList=this.syntheticPagesNavigationTabs;break;case 6:tabList=this.syntheticOnDemandNavigationTabs}for(var i=0;i<tabList.length;i++){var tabName=tabList[i];if(this.mapOfWebLocationsToTabs[tabList[i]]){var tab=this.mapOfWebLocationsToTabs[tabList[i]].tabFn(applicationId);tabName===location&&(tab.selected=!0),navigationTabs.push(tab)}}}return navigationTabs},EumViewService.prototype.getPageDashboardNavigationTabs=function(applicationId,addId,selectedTabName){var _this=this,navTabs=[];return navTabs.push({name:this.getString("ms_dashboard"),clickFn:function(){_this.viewPageDashboardForAddId(applicationId,addId)}}),FeatureService.instance().isWebEUMLiteEnabled()||navTabs.push({name:this.getString("ms_browserSnapshots"),clickFn:function(){_this.viewWebBrowserSnapshotListForPage(applicationId,addId)}}),selectedTabName&&NavigationTabUtil.selectTabByName(navTabs,selectedTabName),navTabs},EumViewService.prototype.on_UEV_NAV_ACTION=function(){var location=URLParams.getCurrentUrlParams().location();if(NavigationService.instance().isEumMobileLocation(location)){var currentUrlParams=URLParams.getCurrentUrlParams(),mobileAppId=currentUrlParams.getNumberParam(UrlConstants.EUM_MOBILE_APP),platform=currentUrlParams.platform();Util.isValidId(mobileAppId)&&Util.isValidId(currentUrlParams.applicationId())&&platform&&(this.lastViewedMobileApp[currentUrlParams.applicationId()]=[mobileAppId,platform])}NavigationService.instance().isEumAllAppsLocation(location)&&(this.lastViewedAllAppsLocation=location,UserService.instance().setGeneralUserPreferenceValue(EumViewService.EUM_LAST_VIEWED_ALL_APPS_LOCATION,this.lastViewedAllAppsLocation))},EumViewService.prototype.getMobileAppIdAndPlatform=function(applicationId,mobileAppId,platform){var idAndPlatform=[mobileAppId,platform];return Util.isValidId(idAndPlatform[0])&&idAndPlatform[1]||(idAndPlatform=[URLParams.getCurrentUrlParams().getNumberParam(UrlConstants.EUM_MOBILE_APP),URLParams.getCurrentUrlParams().platform()],Util.isValidId(idAndPlatform[0])&&idAndPlatform[1]||(idAndPlatform=this.lastViewedMobileApp[applicationId])),idAndPlatform},EumViewService.prototype.getDefaultMobileAppIdAndPlatformForApp=function(applicationId){var mobileApps=ApplicationsCache.instance().getMobileAppsByApplicationId(applicationId);return mobileApps&&mobileApps.length>0?[mobileApps[0].id,mobileApps[0].platform]:null},EumViewService.SERVICE_NAME="eumViewService",EumViewService.EUM_LAST_VIEWED_ALL_APPS_LOCATION="EUM_LAST_VIEWED_ALL_APPS_LOCATION",EumViewService.EUMDashboardView_TAB_SNAPSHOTS=1,EumViewService.$inject=["$location","navigationService","notificationService","resourceManager","filterService"],EumViewService}(ViewServiceBase);appdynamicsModule.service(EumViewService.SERVICE_NAME,EumViewService),define("app/view/eum/EumViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EumHealthRulesPoliciesUiService=function(_super){function EumHealthRulesPoliciesUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(EumHealthRulesPoliciesUiService,_super),EumHealthRulesPoliciesUiService.instance=function(){return AngularUtil.getADInjector().get("eumHealthRulesPoliciesUiService")},EumHealthRulesPoliciesUiService.prototype.getEUMWebViolations=function(applicationId,timeRangeSpecifier){var path="restui/eumHealthRulesPoliciesUiService/getEUMWebViolations?applicationId="+applicationId+"&timeRangeSpecifier="+timeRangeSpecifier,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumHealthRulesPoliciesUiService","getEUMWebViolations",path,[applicationId,timeRangeSpecifier]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumHealthRulesPoliciesUiService.prototype.getEUMWebViolations_response=function(response){return response},EumHealthRulesPoliciesUiService.prototype.getEUMMobileViolations=function(applicationId,timeRangeSpecifier){var path="restui/eumHealthRulesPoliciesUiService/getEUMMobileViolations?applicationId="+applicationId+"&timeRangeSpecifier="+timeRangeSpecifier,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumHealthRulesPoliciesUiService","getEUMMobileViolations",path,[applicationId,timeRangeSpecifier]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumHealthRulesPoliciesUiService.prototype.getEUMMobileViolations_response=function(response){return response},EumHealthRulesPoliciesUiService.prototype.describe=function(){var path="restui/eumHealthRulesPoliciesUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumHealthRulesPoliciesUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumHealthRulesPoliciesUiService.prototype.describe_response=function(response){return response},EumHealthRulesPoliciesUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],EumHealthRulesPoliciesUiService}(ControllerUiServiceBase);adComponentsModule.service("eumHealthRulesPoliciesUiService",EumHealthRulesPoliciesUiService),define("lib/controller/services/eum/common/EumHealthRulesPoliciesUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},CrashUiService=function(_super){function CrashUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(CrashUiService,_super),CrashUiService.instance=function(){return AngularUtil.getADInjector().get("crashUiService")},CrashUiService.prototype.archiveEvent=function(arg0){var path="restui/crash/archiveSnapshot",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashUiService","archiveEvent",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eventSummary.eventTime"]),response})},CrashUiService.prototype.archiveEvent_response=function(response){return response},CrashUiService.prototype.getPlatformViewData=function(applicationId,platform){var path="restui/crash/viewDataForPlatform/"+applicationId+"/"+platform,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashUiService","getPlatformViewData",path,[applicationId,platform]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},CrashUiService.prototype.getPlatformViewData_response=function(response){return response},CrashUiService.prototype.getMobileApplicationViewData=function(applicationId,mobileAppId){var path="restui/crash/viewDataForMobileApp/"+applicationId+"/"+mobileAppId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashUiService","getMobileApplicationViewData",path,[applicationId,mobileAppId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},CrashUiService.prototype.getMobileApplicationViewData_response=function(response){return response},CrashUiService.prototype.getCrashData=function(arg0){var path="restui/crash/list",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashUiService","getCrashData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eventSummary.eventTime"]),response})},CrashUiService.prototype.getCrashData_response=function(response){return response},CrashUiService.prototype.describe=function(){var path="restui/crash/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CrashUiService.prototype.describe_response=function(response){return response},CrashUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],CrashUiService}(ControllerUiServiceBase);adComponentsModule.service("crashUiService",CrashUiService),define("lib/controller/services/eum/mobile/CrashUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},CrashDashboardUiService=function(_super){function CrashDashboardUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(CrashDashboardUiService,_super),CrashDashboardUiService.instance=function(){return AngularUtil.getADInjector().get("crashDashboardUiService")},CrashDashboardUiService.prototype.getPlatformCrashData=function(arg0){var path="restui/crashDashboard/getPlatformCrashData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashDashboardUiService","getPlatformCrashData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CrashDashboardUiService.prototype.getPlatformCrashData_response=function(response){return response},CrashDashboardUiService.prototype.getMobileApplicationCrashData=function(arg0){var path="restui/crashDashboard/getMobileApplicationCrashData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashDashboardUiService","getMobileApplicationCrashData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CrashDashboardUiService.prototype.getMobileApplicationCrashData_response=function(response){return response},CrashDashboardUiService.prototype.getPlatformViewData=function(applicationId,platform){var path="restui/crashDashboard/viewDataForPlatform/"+applicationId+"/"+platform,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashDashboardUiService","getPlatformViewData",path,[applicationId,platform]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},CrashDashboardUiService.prototype.getPlatformViewData_response=function(response){return response},CrashDashboardUiService.prototype.getMobileApplicationViewData=function(applicationId,mobileAppId){var path="restui/crashDashboard/viewDataForMobileApp/"+applicationId+"/"+mobileAppId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashDashboardUiService","getMobileApplicationViewData",path,[applicationId,mobileAppId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},CrashDashboardUiService.prototype.getMobileApplicationViewData_response=function(response){return response},CrashDashboardUiService.prototype.describe=function(){var path="restui/crashDashboard/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashDashboardUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CrashDashboardUiService.prototype.describe_response=function(response){return response},CrashDashboardUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],CrashDashboardUiService}(ControllerUiServiceBase);adComponentsModule.service("crashDashboardUiService",CrashDashboardUiService),define("lib/controller/services/eum/mobile/CrashDashboardUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},CrashDetailsUiService=function(_super){function CrashDetailsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(CrashDetailsUiService,_super),CrashDetailsUiService.instance=function(){return AngularUtil.getADInjector().get("crashDetailsUiService")},CrashDetailsUiService.prototype.getPlatformViewData=function(applicationId,platform){var path="restui/crashDetails/viewDataForPlatform/"+applicationId+"/"+platform,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashDetailsUiService","getPlatformViewData",path,[applicationId,platform]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},CrashDetailsUiService.prototype.getPlatformViewData_response=function(response){return response},CrashDetailsUiService.prototype.getMobileApplicationViewData=function(applicationId,mobileAppId){var path="restui/crashDetails/viewDataForMobileApp/"+applicationId+"/"+mobileAppId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashDetailsUiService","getMobileApplicationViewData",path,[applicationId,mobileAppId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},CrashDetailsUiService.prototype.getMobileApplicationViewData_response=function(response){return response},CrashDetailsUiService.prototype.getCrashDetailsAndSummary=function(arg0){var path="restui/crashDetails/detailsAndSummaryData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashDetailsUiService","getCrashDetailsAndSummary",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["summaryData.eventSummary.eventTime"]),response})},CrashDetailsUiService.prototype.getCrashDetailsAndSummary_response=function(response){return response},CrashDetailsUiService.prototype.describe=function(){var path="restui/crashDetails/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CrashDetailsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CrashDetailsUiService.prototype.describe_response=function(response){return response},CrashDetailsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],CrashDetailsUiService}(ControllerUiServiceBase);adComponentsModule.service("crashDetailsUiService",CrashDetailsUiService),define("lib/controller/services/eum/mobile/CrashDetailsUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},PageUiService=function(_super){function PageUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(PageUiService,_super),PageUiService.instance=function(){return AngularUtil.getADInjector().get("pageUiService")},PageUiService.prototype.getRumWebAndSynEurTimeDetails=function(arg0){var path="restui/pages/getRumWebAndSynEurTimeDetails",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageUiService","getRumWebAndSynEurTimeDetails",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},PageUiService.prototype.getRumWebAndSynEurTimeDetails_response=function(response){return response},PageUiService.prototype.getRumWebAndSynReqPerMinDetails=function(arg0){var path="restui/pages/getRumWebAndSynReqPerMinDetails",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageUiService","getRumWebAndSynReqPerMinDetails",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},PageUiService.prototype.getRumWebAndSynReqPerMinDetails_response=function(response){return response},PageUiService.prototype.getRumMobileNetworkRequestTimeDetails=function(arg0){var path="restui/pages/getRumMobileNetworkRequestTimeDetails",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageUiService","getRumMobileNetworkRequestTimeDetails",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");
var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},PageUiService.prototype.getRumMobileNetworkRequestTimeDetails_response=function(response){return response},PageUiService.prototype.getPageViewData=function(applicationId,addId){var path="restui/pages/viewData/"+applicationId+"/"+addId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageUiService","getPageViewData",path,[applicationId,addId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},PageUiService.prototype.getPageViewData_response=function(response){return response},PageUiService.prototype.getPageDashboardData=function(arg0){var path="restui/pages/details",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageUiService","getPageDashboardData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},PageUiService.prototype.getPageDashboardData_response=function(response){return response},PageUiService.prototype.describe=function(){var path="restui/pages/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},PageUiService.prototype.describe_response=function(response){return response},PageUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],PageUiService}(ControllerUiServiceBase);adComponentsModule.service("pageUiService",PageUiService),define("lib/controller/services/eum/web/PageUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EumConfigurationUiService=function(_super){function EumConfigurationUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(EumConfigurationUiService,_super),EumConfigurationUiService.instance=function(){return AngularUtil.getADInjector().get("eumConfigurationUiService")},EumConfigurationUiService.prototype.enableEUM=function(applicationId){var path="restui/eumConfigurationUiService/enableEum/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumConfigurationUiService","enableEUM",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumConfigurationUiService.prototype.getAppKey=function(applicationId){var path="restui/eumConfigurationUiService/getAppKey/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumConfigurationUiService","getAppKey",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumConfigurationUiService.prototype.getAppKey_response=function(response){return response},EumConfigurationUiService.prototype.getEumEnabledFlags=function(applicationId){var path="restui/eumConfigurationUiService/eumEnabledFlags/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumConfigurationUiService","getEumEnabledFlags",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumConfigurationUiService.prototype.getEumEnabledFlags_response=function(response){return response},EumConfigurationUiService.prototype.checkForValidLicenseKey=function(){var path="restui/eumConfigurationUiService/checkForValidLicenseKey",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumConfigurationUiService","checkForValidLicenseKey",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumConfigurationUiService.prototype.checkForValidLicenseKey_response=function(response){return response},EumConfigurationUiService.prototype.describe=function(){var path="restui/eumConfigurationUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EumConfigurationUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EumConfigurationUiService.prototype.describe_response=function(response){return response},EumConfigurationUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],EumConfigurationUiService}(ControllerUiServiceBase);adComponentsModule.service("eumConfigurationUiService",EumConfigurationUiService),define("lib/controller/services/eum/EumConfigurationUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("lib/controller/services/eum/mobile/MobileTimersAndMetricsUiService",["require","exports"],function(){var MobileTimersAndMetricsUiService=function(_super){function MobileTimersAndMetricsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(MobileTimersAndMetricsUiService,_super),MobileTimersAndMetricsUiService.instance=function(){return AngularUtil.getADInjector().get("mobileTimersAndMetricsUiService")},MobileTimersAndMetricsUiService.prototype.getMobileInfoPoints=function(arg0){var path="restui/mobileTimersAndMetricsUiService/getMobileInfoPoints",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileTimersAndMetricsUiService","getMobileInfoPoints",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileTimersAndMetricsUiService.prototype.getMobileInfoPoints_response=function(response){return response},MobileTimersAndMetricsUiService.prototype.getMobileTimersAndMetrics=function(arg0){var path="restui/mobileTimersAndMetricsUiService/getMobileTimersAndMetrics",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileTimersAndMetricsUiService","getMobileTimersAndMetrics",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileTimersAndMetricsUiService.prototype.getMobileTimersAndMetrics_response=function(response){return response},MobileTimersAndMetricsUiService.prototype.getPlatformViewData=function(applicationId,platform){var path="restui/mobileTimersAndMetricsUiService/getPlatformViewData/"+applicationId+"/"+platform,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileTimersAndMetricsUiService","getPlatformViewData",path,[applicationId,platform]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},MobileTimersAndMetricsUiService.prototype.getPlatformViewData_response=function(response){return response},MobileTimersAndMetricsUiService.prototype.getMobileApplicationViewData=function(applicationId,mobileAppId){var path="restui/mobileTimersAndMetricsUiService/getMobileApplicationViewData/"+applicationId+"/"+mobileAppId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileTimersAndMetricsUiService","getMobileApplicationViewData",path,[applicationId,mobileAppId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},MobileTimersAndMetricsUiService.prototype.getMobileApplicationViewData_response=function(response){return response},MobileTimersAndMetricsUiService.prototype.describe=function(){var path="restui/mobileTimersAndMetricsUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileTimersAndMetricsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileTimersAndMetricsUiService.prototype.describe_response=function(response){return response},MobileTimersAndMetricsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],MobileTimersAndMetricsUiService}(ControllerUiServiceBase);return appdynamicsModule.service("mobileTimersAndMetricsUiService",MobileTimersAndMetricsUiService),MobileTimersAndMetricsUiService});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsCrashDashboardUiService=function(_super){function AnalyticsCrashDashboardUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsCrashDashboardUiService,_super),AnalyticsCrashDashboardUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsCrashDashboardUiService")},AnalyticsCrashDashboardUiService.prototype.getPlatformViewData=function(applicationId,platform){var path="restui/analyticsCrashDashboardUiService/viewDataForPlatform/"+applicationId+"/"+platform,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsCrashDashboardUiService","getPlatformViewData",path,[applicationId,platform]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},AnalyticsCrashDashboardUiService.prototype.getPlatformViewData_response=function(response){return response},AnalyticsCrashDashboardUiService.prototype.getMobileApplicationViewData=function(applicationId,mobileAppId){var path="restui/analyticsCrashDashboardUiService/viewDataForMobileApp/"+applicationId+"/"+mobileAppId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsCrashDashboardUiService","getMobileApplicationViewData",path,[applicationId,mobileAppId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},AnalyticsCrashDashboardUiService.prototype.getMobileApplicationViewData_response=function(response){return response},AnalyticsCrashDashboardUiService.prototype.getTotalCrashesForTimeRange=function(arg0){var path="restui/analyticsCrashDashboardUiService/getTotalCrashesForTimeRange",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsCrashDashboardUiService","getTotalCrashesForTimeRange",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsCrashDashboardUiService.prototype.getTotalCrashesForTimeRange_response=function(response){return response},AnalyticsCrashDashboardUiService.prototype.getTop5CrashGroups=function(arg0){var path="restui/analyticsCrashDashboardUiService/getTop5CrashGroups",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsCrashDashboardUiService","getTop5CrashGroups",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsCrashDashboardUiService.prototype.getTop5CrashGroups_response=function(response){return response},AnalyticsCrashDashboardUiService.prototype.getCrashRatesForAppVersions=function(arg0){var path="restui/analyticsCrashDashboardUiService/getCrashRatesForAppVersions",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsCrashDashboardUiService","getCrashRatesForAppVersions",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsCrashDashboardUiService.prototype.getCrashRatesForAppVersions_response=function(response){return response},AnalyticsCrashDashboardUiService.prototype.getCrashRatesForDevices=function(arg0){var path="restui/analyticsCrashDashboardUiService/getCrashRatesForDevices",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsCrashDashboardUiService","getCrashRatesForDevices",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsCrashDashboardUiService.prototype.getCrashRatesForDevices_response=function(response){return response},AnalyticsCrashDashboardUiService.prototype.getAllCrashesData=function(arg0){var path="restui/analyticsCrashDashboardUiService/getAllCrashesData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsCrashDashboardUiService","getAllCrashesData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsCrashDashboardUiService.prototype.getAllCrashesData_response=function(response){return response},AnalyticsCrashDashboardUiService.prototype.getMobileCrashGroups=function(arg0){var path="restui/analyticsCrashDashboardUiService/getMobileCrashGroups",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsCrashDashboardUiService","getMobileCrashGroups",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsCrashDashboardUiService.prototype.getMobileCrashGroups_response=function(response){return response},AnalyticsCrashDashboardUiService.prototype.getBuildVersionsWithMissingDSYMs=function(arg0){var path="restui/analyticsCrashDashboardUiService/getBuildVersionsWithMissingDSYMs",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsCrashDashboardUiService","getBuildVersionsWithMissingDSYMs",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsCrashDashboardUiService.prototype.getBuildVersionsWithMissingDSYMs_response=function(response){return response},AnalyticsCrashDashboardUiService.prototype.getCrashGroupData=function(arg0){var path="restui/analyticsCrashDashboardUiService/getCrashGroupData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsCrashDashboardUiService","getCrashGroupData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsCrashDashboardUiService.prototype.getCrashGroupData_response=function(response){return response},AnalyticsCrashDashboardUiService.prototype.describe=function(){var path="restui/analyticsCrashDashboardUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsCrashDashboardUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsCrashDashboardUiService.prototype.describe_response=function(response){return response},AnalyticsCrashDashboardUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsCrashDashboardUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsCrashDashboardUiService",AnalyticsCrashDashboardUiService),define("lib/controller/services/eum/mobile/AnalyticsCrashDashboardUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MobileSnapshotDetailsUiService=function(_super){function MobileSnapshotDetailsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(MobileSnapshotDetailsUiService,_super),MobileSnapshotDetailsUiService.instance=function(){return AngularUtil.getADInjector().get("mobileSnapshotDetailsUiService")},MobileSnapshotDetailsUiService.prototype.archiveEvent=function(arg0){var path="restui/mobileSnapshotDetailsUiService/archiveSnapshot",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileSnapshotDetailsUiService","archiveEvent",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eventSummary.eventTime"]),response})},MobileSnapshotDetailsUiService.prototype.archiveEvent_response=function(response){return response},MobileSnapshotDetailsUiService.prototype.getPlatformViewData=function(applicationId,platform){var path="restui/mobileSnapshotDetailsUiService/getPlatformViewData/"+applicationId+"/"+platform,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileSnapshotDetailsUiService","getPlatformViewData",path,[applicationId,platform]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},MobileSnapshotDetailsUiService.prototype.getPlatformViewData_response=function(response){return response},MobileSnapshotDetailsUiService.prototype.getMobileApplicationViewData=function(applicationId,mobileAppId){var path="restui/mobileSnapshotDetailsUiService/getMobileApplicationViewData/"+applicationId+"/"+mobileAppId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileSnapshotDetailsUiService","getMobileApplicationViewData",path,[applicationId,mobileAppId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},MobileSnapshotDetailsUiService.prototype.getMobileApplicationViewData_response=function(response){return response},MobileSnapshotDetailsUiService.prototype.getMobileSnapshot=function(arg0){var path="restui/mobileSnapshotDetailsUiService/getMobileSnapshot",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileSnapshotDetailsUiService","getMobileSnapshot",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eventSummary.eventTime"]),response})},MobileSnapshotDetailsUiService.prototype.getMobileSnapshot_response=function(response){return response},MobileSnapshotDetailsUiService.prototype.getNetworkRequestRecordDetails=function(clientGuid,appKey){var path="restui/mobileSnapshotDetailsUiService/getNetworkRequestRecordDetails/"+clientGuid+"?appKey="+appKey,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileSnapshotDetailsUiService","getNetworkRequestRecordDetails",path,[clientGuid,appKey]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileSnapshotDetailsUiService.prototype.getNetworkRequestRecordDetails_response=function(response){return response},MobileSnapshotDetailsUiService.prototype.describe=function(){var path="restui/mobileSnapshotDetailsUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileSnapshotDetailsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileSnapshotDetailsUiService.prototype.describe_response=function(response){return response},MobileSnapshotDetailsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],MobileSnapshotDetailsUiService}(ControllerUiServiceBase);adComponentsModule.service("mobileSnapshotDetailsUiService",MobileSnapshotDetailsUiService),define("lib/controller/services/eum/mobile/MobileSnapshotDetailsUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MobileRequestDashboardUiService=function(_super){function MobileRequestDashboardUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(MobileRequestDashboardUiService,_super),MobileRequestDashboardUiService.instance=function(){return AngularUtil.getADInjector().get("mobileRequestDashboardUiService")},MobileRequestDashboardUiService.prototype.getViewData=function(applicationId,addId,mobileAppId){var path="restui/mobileRequests/viewData/"+applicationId+"/"+addId+"/"+mobileAppId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestDashboardUiService","getViewData",path,[applicationId,addId,mobileAppId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},MobileRequestDashboardUiService.prototype.getViewData_response=function(response){return response},MobileRequestDashboardUiService.prototype.getRequestData=function(arg0){var path="restui/mobileRequests/requestData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestDashboardUiService","getRequestData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},MobileRequestDashboardUiService.prototype.getRequestData_response=function(response){return response},MobileRequestDashboardUiService.prototype.describe=function(){var path="restui/mobileRequests/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestDashboardUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileRequestDashboardUiService.prototype.describe_response=function(response){return response},MobileRequestDashboardUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],MobileRequestDashboardUiService}(ControllerUiServiceBase);adComponentsModule.service("mobileRequestDashboardUiService",MobileRequestDashboardUiService),define("lib/controller/services/eum/mobile/MobileRequestDashboardUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SyntheticLaunchUiService=function(_super){function SyntheticLaunchUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(SyntheticLaunchUiService,_super),SyntheticLaunchUiService.instance=function(){return AngularUtil.getADInjector().get("syntheticLaunchUiService")},SyntheticLaunchUiService.prototype.getSyntheticViewData=function(arg0){var path="restui/synthetic/launch/getSyntheticViewData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticLaunchUiService","getSyntheticViewData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},SyntheticLaunchUiService.prototype.getSyntheticViewData_response=function(response){return response},SyntheticLaunchUiService.prototype.getSyntheticData=function(arg0){var path="restui/synthetic/launch/getSyntheticData",apiCall=null;
this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticLaunchUiService","getSyntheticData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SyntheticLaunchUiService.prototype.getSyntheticData_response=function(response){return response},SyntheticLaunchUiService.prototype.generateSyntheticLoad=function(arg0){var path="restui/synthetic/launch/generateLoad",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticLaunchUiService","generateSyntheticLoad",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SyntheticLaunchUiService.prototype.generateSyntheticLoad_response=function(response){return response},SyntheticLaunchUiService.prototype.checkStatusOf=function(applicationId,measurementId){var path="restui/synthetic/launch/checkStatus/"+applicationId+"/"+measurementId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticLaunchUiService","checkStatusOf",path,[applicationId,measurementId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SyntheticLaunchUiService.prototype.checkStatusOf_response=function(response){return response},SyntheticLaunchUiService.prototype.describe=function(){var path="restui/synthetic/launch/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticLaunchUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SyntheticLaunchUiService.prototype.describe_response=function(response){return response},SyntheticLaunchUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],SyntheticLaunchUiService}(ControllerUiServiceBase);adComponentsModule.service("syntheticLaunchUiService",SyntheticLaunchUiService),define("lib/controller/services/eum/web/SyntheticLaunchUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SyntheticScheduleUiService=function(_super){function SyntheticScheduleUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(SyntheticScheduleUiService,_super),SyntheticScheduleUiService.instance=function(){return AngularUtil.getADInjector().get("syntheticScheduleUiService")},SyntheticScheduleUiService.prototype.getListView=function(applicationId){var path="restui/synthetic/schedule/"+applicationId+"/getListView",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticScheduleUiService","getListView",path,[applicationId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},SyntheticScheduleUiService.prototype.getListView_response=function(response){return response},SyntheticScheduleUiService.prototype.getSchedules=function(applicationId){var path="restui/synthetic/schedule/"+applicationId+"/getSchedules",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticScheduleUiService","getSchedules",path,[applicationId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SyntheticScheduleUiService.prototype.getSchedules_response=function(response){return response},SyntheticScheduleUiService.prototype.getJobList=function(arg0){var path="restui/synthetic/schedule/getJobList",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticScheduleUiService","getJobList",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SyntheticScheduleUiService.prototype.getJobList_response=function(response){return response},SyntheticScheduleUiService.prototype.deleteSchedules=function(arg0,applicationId){var path="restui/synthetic/schedule/"+applicationId+"/deleteSchedules",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticScheduleUiService","deleteSchedules",path,[arg0,applicationId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SyntheticScheduleUiService.prototype.getScheduleViewData=function(applicationId){var path="restui/synthetic/schedule/"+applicationId+"/getScheduleViewData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticScheduleUiService","getScheduleViewData",path,[applicationId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},SyntheticScheduleUiService.prototype.getScheduleViewData_response=function(response){return response},SyntheticScheduleUiService.prototype.getSchedule=function(applicationId,scheduleId){var path="restui/synthetic/schedule/"+applicationId+"/getEditorView/"+scheduleId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticScheduleUiService","getSchedule",path,[applicationId,scheduleId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},SyntheticScheduleUiService.prototype.getSchedule_response=function(response){return response},SyntheticScheduleUiService.prototype.updateSchedule=function(arg0,applicationId){var path="restui/synthetic/schedule/"+applicationId+"/updateSchedule",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticScheduleUiService","updateSchedule",path,[arg0,applicationId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SyntheticScheduleUiService.prototype.updateScheduleBatch=function(arg0,applicationId){var path="restui/synthetic/schedule/"+applicationId+"/updateScheduleBatch",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticScheduleUiService","updateScheduleBatch",path,[arg0,applicationId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SyntheticScheduleUiService.prototype.updateScheduleBatch_response=function(response){return response},SyntheticScheduleUiService.prototype.describe=function(){var path="restui/synthetic/schedule/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SyntheticScheduleUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SyntheticScheduleUiService.prototype.describe_response=function(response){return response},SyntheticScheduleUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],SyntheticScheduleUiService}(ControllerUiServiceBase);adComponentsModule.service("syntheticScheduleUiService",SyntheticScheduleUiService),define("lib/controller/services/eum/web/SyntheticScheduleUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EUMApplicationsUiService=function(_super){function EUMApplicationsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(EUMApplicationsUiService,_super),EUMApplicationsUiService.instance=function(){return AngularUtil.getADInjector().get("eUMApplicationsUiService")},EUMApplicationsUiService.prototype.getMobileAppsForApp=function(applicationID){var path="restui/eumApplications/getMobileAppsForApp/"+applicationID,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","getMobileAppsForApp",path,[applicationID]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getMobileAppsForApp_response=function(response){return response},EUMApplicationsUiService.prototype.getAllMobileApplications=function(){var path="restui/eumApplications/getAllMobileApplications",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","getAllMobileApplications",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getAllMobileApplications_response=function(response){return response},EUMApplicationsUiService.prototype.getEumWebApplications=function(){var path="restui/eumApplications/getEumWebApplications",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","getEumWebApplications",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getEumWebApplications_response=function(response){return response},EUMApplicationsUiService.prototype.getAllEumApplicationsData=function(timeRange){var path="restui/eumApplications/getAllEumApplicationsData?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","getAllEumApplicationsData",path,[timeRange]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getAllEumApplicationsData_response=function(response){return response},EUMApplicationsUiService.prototype.deleteMobileApplication=function(arg0){var path="restui/eumApplications/deleteMobileApplication",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","deleteMobileApplication",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.setMobileMonitoring=function(applicationId,newValue){var path="restui/eumApplications/setMobileMonitoring/"+applicationId+"?newValue="+newValue,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","setMobileMonitoring",path,[applicationId,newValue]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getAllMobileApplicationsData=function(timeRange){var path="restui/eumApplications/getAllMobileApplicationsData?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","getAllMobileApplicationsData",path,[timeRange]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getAllMobileApplicationsData_response=function(response){return response},EUMApplicationsUiService.prototype.getMobileAppsNetworkRequestPerMinTrendData=function(arg0,timeRange){var path="restui/eumApplications/getMobileAppsNetworkRequestPerMinTrendData?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","getMobileAppsNetworkRequestPerMinTrendData",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getMobileAppsNetworkRequestPerMinTrendData_response=function(response){return response},EUMApplicationsUiService.prototype.getMobileAppsNetworkErrorsPerMinTrendData=function(arg0,timeRange){var path="restui/eumApplications/getMobileAppsNetworkErrorsPerMinTrendData?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","getMobileAppsNetworkErrorsPerMinTrendData",path,[arg0,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getMobileAppsNetworkErrorsPerMinTrendData_response=function(response){return response},EUMApplicationsUiService.prototype.getEUMWebAllAppsConfigPreference=function(){var path="restui/eumApplications/getEUMWebAllAppsConfigPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","getEUMWebAllAppsConfigPreference",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getEUMWebAllAppsConfigPreference_response=function(response){return response},EUMApplicationsUiService.prototype.updateEUMWebAllAppsConfigPreference=function(arg0){var path="restui/eumApplications/updateEUMWebAllAppsConfigPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","updateEUMWebAllAppsConfigPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.updateEUMWebAllAppsConfigPreference_response=function(response){return response},EUMApplicationsUiService.prototype.getEUMMobileAllAppsConfigPreference=function(){var path="restui/eumApplications/getEUMMobileAllAppsConfigPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","getEUMMobileAllAppsConfigPreference",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getEUMMobileAllAppsConfigPreference_response=function(response){return response},EUMApplicationsUiService.prototype.updateEUMMobileAllAppsConfigPreference=function(arg0){var path="restui/eumApplications/updateEUMMobileAllAppsConfigPreference",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","updateEUMMobileAllAppsConfigPreference",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.updateEUMMobileAllAppsConfigPreference_response=function(response){return response},EUMApplicationsUiService.prototype.getCountApplicationsForAppKey=function(){var path="restui/eumApplications/getCountApplicationsForAppKey",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","getCountApplicationsForAppKey",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getCountApplicationsForAppKey_response=function(response){return response},EUMApplicationsUiService.prototype.getApplicationIdByAppKey=function(appKey){var path="restui/eumApplications/getApplicationIdByAppKey?appKey="+appKey,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","getApplicationIdByAppKey",path,[appKey]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getApplicationIdByAppKey_response=function(response){return response},EUMApplicationsUiService.prototype.getMobileAppIdByAppIdAndInternalName=function(appId,internalName){var path="restui/eumApplications/getMobileAppIdByAppIdAndInternalName?appId="+appId+"&internalName="+internalName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","getMobileAppIdByAppIdAndInternalName",path,[appId,internalName]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.getMobileAppIdByAppIdAndInternalName_response=function(response){return response},EUMApplicationsUiService.prototype.describe=function(){var path="restui/eumApplications/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EUMApplicationsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EUMApplicationsUiService.prototype.describe_response=function(response){return response},EUMApplicationsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],EUMApplicationsUiService}(ControllerUiServiceBase);adComponentsModule.service("eUMApplicationsUiService",EUMApplicationsUiService),define("lib/controller/services/eum/common/EUMApplicationsUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BrowserSnapshotDetailsUiService=function(_super){function BrowserSnapshotDetailsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(BrowserSnapshotDetailsUiService,_super),BrowserSnapshotDetailsUiService.instance=function(){return AngularUtil.getADInjector().get("browserSnapshotDetailsUiService")},BrowserSnapshotDetailsUiService.prototype.getBrowserSnapshot=function(arg0){var path="restui/browserSnapshotDetails/getSnapshot",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BrowserSnapshotDetailsUiService","getBrowserSnapshot",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["snapshotData.time","relatedSnapshots.time","application.runningSince","application.createdOn","application.modifiedOn"]),response})},BrowserSnapshotDetailsUiService.prototype.getBrowserSnapshot_response=function(response){return response},BrowserSnapshotDetailsUiService.prototype.getWebSessionGuidFromBrowserRecordGuid=function(appId,guid,timestamp){var path="restui/browserSnapshotDetails/getWebSessionGuidFromBrowserRecordGuid/{appId}/{guid}/{timestamp}?appId="+appId+"&guid="+guid+"&timestamp="+timestamp,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BrowserSnapshotDetailsUiService","getWebSessionGuidFromBrowserRecordGuid",path,[appId,guid,timestamp]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BrowserSnapshotDetailsUiService.prototype.getWebSessionGuidFromBrowserRecordGuid_response=function(response){return response},BrowserSnapshotDetailsUiService.prototype.getSnapshotSummaryByClientRequestGuid=function(applicationId,clientRequestGuid,timerange){var path="restui/browserSnapshotDetails/getSnapshotSummaryByClientRequestGuid/"+applicationId+"/"+clientRequestGuid+"?timerange="+timerange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BrowserSnapshotDetailsUiService","getSnapshotSummaryByClientRequestGuid",path,[applicationId,clientRequestGuid,timerange]),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["time"]),response})},BrowserSnapshotDetailsUiService.prototype.getSnapshotSummaryByClientRequestGuid_response=function(response){return response},BrowserSnapshotDetailsUiService.prototype.describe=function(){var path="restui/browserSnapshotDetails/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BrowserSnapshotDetailsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BrowserSnapshotDetailsUiService.prototype.describe_response=function(response){return response},BrowserSnapshotDetailsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],BrowserSnapshotDetailsUiService}(ControllerUiServiceBase);adComponentsModule.service("browserSnapshotDetailsUiService",BrowserSnapshotDetailsUiService),define("lib/controller/services/eum/web/BrowserSnapshotDetailsUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BrowserSnapshotListUiService=function(_super){function BrowserSnapshotListUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(BrowserSnapshotListUiService,_super),BrowserSnapshotListUiService.instance=function(){return AngularUtil.getADInjector().get("browserSnapshotListUiService")},BrowserSnapshotListUiService.prototype.getSnapshots=function(arg0){var path="restui/browserSnapshotList/getSnapshots",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BrowserSnapshotListUiService","getSnapshots",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["snapshots.time"]),response})},BrowserSnapshotListUiService.prototype.getSnapshots_response=function(response){return response},BrowserSnapshotListUiService.prototype.getViewData=function(arg0){var path="restui/browserSnapshotList/getView",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BrowserSnapshotListUiService","getViewData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},BrowserSnapshotListUiService.prototype.getViewData_response=function(response){return response},BrowserSnapshotListUiService.prototype.archiveSnapshot=function(arg0){var path="restui/browserSnapshotList/archiveSnapshots",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BrowserSnapshotListUiService","archiveSnapshot",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BrowserSnapshotListUiService.prototype.getDefaultFilters=function(arg0){var path="restui/browserSnapshotList/getDefaultFilters",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BrowserSnapshotListUiService","getDefaultFilters",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BrowserSnapshotListUiService.prototype.getDefaultFilters_response=function(response){return response},BrowserSnapshotListUiService.prototype.deleteSnapshot=function(arg0,applicationId,timeRange){var path="restui/browserSnapshotList/deleteSnapshots/"+applicationId+"/"+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BrowserSnapshotListUiService","deleteSnapshot",path,[arg0,applicationId,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BrowserSnapshotListUiService.prototype.deleteSnapshot_response=function(response){return response},BrowserSnapshotListUiService.prototype.getPendingSynthetic=function(arg0){var path="restui/browserSnapshotList/getPendingSynthetic",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BrowserSnapshotListUiService","getPendingSynthetic",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["snapshots.time"]),response})},BrowserSnapshotListUiService.prototype.getPendingSynthetic_response=function(response){return response},BrowserSnapshotListUiService.prototype.describe=function(){var path="restui/browserSnapshotList/describe",apiCall=null;
this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BrowserSnapshotListUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BrowserSnapshotListUiService.prototype.describe_response=function(response){return response},BrowserSnapshotListUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],BrowserSnapshotListUiService}(ControllerUiServiceBase);adComponentsModule.service("browserSnapshotListUiService",BrowserSnapshotListUiService),define("lib/controller/services/eum/web/BrowserSnapshotListUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},GeoDashboardUiService=function(_super){function GeoDashboardUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(GeoDashboardUiService,_super),GeoDashboardUiService.instance=function(){return AngularUtil.getADInjector().get("geoDashboardUiService")},GeoDashboardUiService.prototype.getEUMMobileTotalRequestsData=function(arg0){var path="restui/geoDashboardUiService/getEUMMobileTotalRequestsData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("GeoDashboardUiService","getEUMMobileTotalRequestsData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},GeoDashboardUiService.prototype.getEUMMobileTotalRequestsData_response=function(response){return response},GeoDashboardUiService.prototype.getEUMMobileAppLoadsData=function(arg0){var path="restui/geoDashboardUiService/getEUMMobileAppLoadsData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("GeoDashboardUiService","getEUMMobileAppLoadsData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},GeoDashboardUiService.prototype.getEUMMobileAppLoadsData_response=function(response){return response},GeoDashboardUiService.prototype.getEUMMobileNetworkRequestTimeData=function(arg0){var path="restui/geoDashboardUiService/getEUMMobileNetworkRequestTimeData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("GeoDashboardUiService","getEUMMobileNetworkRequestTimeData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},GeoDashboardUiService.prototype.getEUMMobileNetworkRequestTimeData_response=function(response){return response},GeoDashboardUiService.prototype.getEUMWebResponseTimeData=function(arg0){var path="restui/geoDashboardUiService/getEUMWebResponseTimeData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("GeoDashboardUiService","getEUMWebResponseTimeData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},GeoDashboardUiService.prototype.getEUMWebResponseTimeData_response=function(response){return response},GeoDashboardUiService.prototype.getEUMWebLoadData=function(arg0){var path="restui/geoDashboardUiService/getEUMWebLoadData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("GeoDashboardUiService","getEUMWebLoadData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},GeoDashboardUiService.prototype.getEUMWebLoadData_response=function(response){return response},GeoDashboardUiService.prototype.getEUMWebTop5CountriesByLoad=function(arg0){var path="restui/geoDashboardUiService/getEUMWebTop5CountriesByLoad",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("GeoDashboardUiService","getEUMWebTop5CountriesByLoad",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},GeoDashboardUiService.prototype.getEUMWebTop5CountriesByLoad_response=function(response){return response},GeoDashboardUiService.prototype.describe=function(){var path="restui/geoDashboardUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("GeoDashboardUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},GeoDashboardUiService.prototype.describe_response=function(response){return response},GeoDashboardUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],GeoDashboardUiService}(ControllerUiServiceBase);adComponentsModule.service("geoDashboardUiService",GeoDashboardUiService),define("lib/controller/services/eum/common/GeoDashboardUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},WebAnalyzeUiService=function(_super){function WebAnalyzeUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(WebAnalyzeUiService,_super),WebAnalyzeUiService.instance=function(){return AngularUtil.getADInjector().get("webAnalyzeUiService")},WebAnalyzeUiService.prototype.getViewData=function(applicationId,timeRangeString){var path="restui/webAnalyzeUiService/getViewData/"+applicationId+"/"+timeRangeString,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WebAnalyzeUiService","getViewData",path,[applicationId,timeRangeString]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},WebAnalyzeUiService.prototype.getViewData_response=function(response){return response},WebAnalyzeUiService.prototype.getBrowserRecordDetails=function(applicationId,clientGuid){var path="restui/webAnalyzeUiService/getBrowserRecordDetails/"+applicationId+"/"+clientGuid,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WebAnalyzeUiService","getBrowserRecordDetails",path,[applicationId,clientGuid]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WebAnalyzeUiService.prototype.getBrowserRecordDetails_response=function(response){return response},WebAnalyzeUiService.prototype.getAnalyzeData=function(arg0){var path="restui/webAnalyzeUiService/getAnalyzeData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WebAnalyzeUiService","getAnalyzeData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WebAnalyzeUiService.prototype.getAnalyzeData_response=function(response){return response},WebAnalyzeUiService.prototype.getEndUserResponseTimeDistribution=function(arg0){var path="restui/webAnalyzeUiService/getEndUserResponseTimeDistribution",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WebAnalyzeUiService","getEndUserResponseTimeDistribution",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WebAnalyzeUiService.prototype.getEndUserResponseTimeDistribution_response=function(response){return response},WebAnalyzeUiService.prototype.getTop5GeoLoad=function(arg0){var path="restui/webAnalyzeUiService/getTop5GeoLoad",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WebAnalyzeUiService","getTop5GeoLoad",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WebAnalyzeUiService.prototype.getTop5GeoLoad_response=function(response){return response},WebAnalyzeUiService.prototype.getWebAnalyzeMapData=function(arg0){var path="restui/webAnalyzeUiService/getWebAnalyzeMapData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WebAnalyzeUiService","getWebAnalyzeMapData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WebAnalyzeUiService.prototype.getWebAnalyzeMapData_response=function(response){return response},WebAnalyzeUiService.prototype.describe=function(){var path="restui/webAnalyzeUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WebAnalyzeUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WebAnalyzeUiService.prototype.describe_response=function(response){return response},WebAnalyzeUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],WebAnalyzeUiService}(ControllerUiServiceBase);adComponentsModule.service("webAnalyzeUiService",WebAnalyzeUiService),define("lib/controller/services/eum/web/WebAnalyzeUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MobileSnapshotListUiService=function(_super){function MobileSnapshotListUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(MobileSnapshotListUiService,_super),MobileSnapshotListUiService.instance=function(){return AngularUtil.getADInjector().get("mobileSnapshotListUiService")},MobileSnapshotListUiService.prototype.archiveEvent=function(arg0){var path="restui/mobileSnapshotListUiService/archiveSnapshot",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileSnapshotListUiService","archiveEvent",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eventSummary.eventTime"]),response})},MobileSnapshotListUiService.prototype.archiveEvent_response=function(response){return response},MobileSnapshotListUiService.prototype.getPlatformViewData=function(applicationId,platform){var path="restui/mobileSnapshotListUiService/getPlatformViewData/"+applicationId+"/"+platform,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileSnapshotListUiService","getPlatformViewData",path,[applicationId,platform]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},MobileSnapshotListUiService.prototype.getPlatformViewData_response=function(response){return response},MobileSnapshotListUiService.prototype.getMobileApplicationViewData=function(applicationId,mobileAppId){var path="restui/mobileSnapshotListUiService/getMobileApplicationViewData/"+applicationId+"/"+mobileAppId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileSnapshotListUiService","getMobileApplicationViewData",path,[applicationId,mobileAppId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},MobileSnapshotListUiService.prototype.getMobileApplicationViewData_response=function(response){return response},MobileSnapshotListUiService.prototype.getMobileSnapshots=function(arg0){var path="restui/mobileSnapshotListUiService/getMobileSnapshots",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileSnapshotListUiService","getMobileSnapshots",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eventSummary.eventTime"]),response})},MobileSnapshotListUiService.prototype.getMobileSnapshots_response=function(response){return response},MobileSnapshotListUiService.prototype.getMobileSnapshotSummaries=function(arg0){var path="restui/mobileSnapshotListUiService/getMobileSnapshotSummaries",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileSnapshotListUiService","getMobileSnapshotSummaries",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eventSummary.eventTime"]),response})},MobileSnapshotListUiService.prototype.getMobileSnapshotSummaries_response=function(response){return response},MobileSnapshotListUiService.prototype.describe=function(){var path="restui/mobileSnapshotListUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileSnapshotListUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileSnapshotListUiService.prototype.describe_response=function(response){return response},MobileSnapshotListUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],MobileSnapshotListUiService}(ControllerUiServiceBase);adComponentsModule.service("mobileSnapshotListUiService",MobileSnapshotListUiService),define("lib/controller/services/eum/mobile/MobileSnapshotListUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MobileRequestListUiService=function(_super){function MobileRequestListUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(MobileRequestListUiService,_super),MobileRequestListUiService.instance=function(){return AngularUtil.getADInjector().get("mobileRequestListUiService")},MobileRequestListUiService.prototype.getPlatformViewData=function(applicationId,platform){var path="restui/mobileRequestListUiService/getPlatformViewData/"+applicationId+"/"+platform,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","getPlatformViewData",path,[applicationId,platform]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},MobileRequestListUiService.prototype.getPlatformViewData_response=function(response){return response},MobileRequestListUiService.prototype.getMobileApplicationViewData=function(applicationId,mobileAppId){var path="restui/mobileRequestListUiService/getMobileApplicationViewData/"+applicationId+"/"+mobileAppId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","getMobileApplicationViewData",path,[applicationId,mobileAppId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},MobileRequestListUiService.prototype.getMobileApplicationViewData_response=function(response){return response},MobileRequestListUiService.prototype.getEUMMobileHttpAndNetworkErrorsPerMinData=function(arg0){var path="restui/mobileRequestListUiService/getEUMMobileHttpAndNetworkErrorsPerMinData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","getEUMMobileHttpAndNetworkErrorsPerMinData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileRequestListUiService.prototype.getEUMMobileHttpAndNetworkErrorsPerMinData_response=function(response){return response},MobileRequestListUiService.prototype.getEUMMobileAppStartsPerMinData=function(arg0){var path="restui/mobileRequestListUiService/getEUMMobileAppStartsPerMinData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","getEUMMobileAppStartsPerMinData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileRequestListUiService.prototype.getEUMMobileAppStartsPerMinData_response=function(response){return response},MobileRequestListUiService.prototype.getNetworkRequestLimit=function(applicationId,mobileApplicationId,timeRangeSpecifierString){var path="restui/mobileRequestListUiService/getNetworkRequestLimit/"+applicationId+"/"+mobileApplicationId+"/"+timeRangeSpecifierString,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","getNetworkRequestLimit",path,[applicationId,mobileApplicationId,timeRangeSpecifierString]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileRequestListUiService.prototype.getNetworkRequestLimit_response=function(response){return response},MobileRequestListUiService.prototype.getMobilePerformanceSummaries=function(applicationId,mobileApplicationId,timeRangeSpecifierString){var path="restui/mobileRequestListUiService/getMobilePerformanceSummaries/"+applicationId+"/"+mobileApplicationId+"/"+timeRangeSpecifierString,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","getMobilePerformanceSummaries",path,[applicationId,mobileApplicationId,timeRangeSpecifierString]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileRequestListUiService.prototype.getMobilePerformanceSummaries_response=function(response){return response},MobileRequestListUiService.prototype.unexcludeRequests=function(arg0){var path="restui/mobileRequestListUiService/unexcludeRequests",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","unexcludeRequests",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileRequestListUiService.prototype.unexcludeRequests_response=function(response){return response},MobileRequestListUiService.prototype.deleteRequests=function(arg0){var path="restui/mobileRequestListUiService/deleteRequests",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","deleteRequests",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileRequestListUiService.prototype.deleteRequests_response=function(response){return response},MobileRequestListUiService.prototype.renameRequest=function(requestId,newName){var path="restui/mobileRequestListUiService/renameRequest/"+requestId+"/"+newName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","renameRequest",path,[requestId,newName]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileRequestListUiService.prototype.renameRequest_response=function(response){return response},MobileRequestListUiService.prototype.excludeRequests=function(arg0){var path="restui/mobileRequestListUiService/excludeRequests",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","excludeRequests",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileRequestListUiService.prototype.excludeRequests_response=function(response){return response},MobileRequestListUiService.prototype.getNetworkRequestsTimeDistribution=function(arg0){var path="restui/mobileRequestListUiService/getNetworkRequestsTimeDistribution",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","getNetworkRequestsTimeDistribution",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileRequestListUiService.prototype.getNetworkRequestsTimeDistribution_response=function(response){return response},MobileRequestListUiService.prototype.getEUMMobileAppReqPerMinData=function(arg0){var path="restui/mobileRequestListUiService/getEUMMobileAppReqPerMinData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","getEUMMobileAppReqPerMinData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileRequestListUiService.prototype.getEUMMobileAppReqPerMinData_response=function(response){return response},MobileRequestListUiService.prototype.describe=function(){var path="restui/mobileRequestListUiService/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MobileRequestListUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MobileRequestListUiService.prototype.describe_response=function(response){return response},MobileRequestListUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],MobileRequestListUiService}(ControllerUiServiceBase);adComponentsModule.service("mobileRequestListUiService",MobileRequestListUiService),define("lib/controller/services/eum/mobile/MobileRequestListUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},PageListUiService=function(_super){function PageListUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(PageListUiService,_super),PageListUiService.instance=function(){return AngularUtil.getADInjector().get("pageListUiService")},PageListUiService.prototype.unexcludeRequests=function(arg0){var path="restui/pageList/unexcludeRequests",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageListUiService","unexcludeRequests",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},PageListUiService.prototype.unexcludeRequests_response=function(response){return response},PageListUiService.prototype.deleteRequests=function(arg0){var path="restui/pageList/deleteRequests",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageListUiService","deleteRequests",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},PageListUiService.prototype.deleteRequests_response=function(response){return response},PageListUiService.prototype.renameRequest=function(requestId,arg1){var path="restui/pageList/renameRequest/"+requestId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageListUiService","renameRequest",path,[requestId,arg1]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg1),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg1,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},PageListUiService.prototype.renameRequest_response=function(response){return response},PageListUiService.prototype.excludeRequests=function(arg0){var path="restui/pageList/excludeRequests",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageListUiService","excludeRequests",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise
},PageListUiService.prototype.excludeRequests_response=function(response){return response},PageListUiService.prototype.getEumPageListViewData=function(arg0){var path="restui/pageList/getEumPageListViewData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageListUiService","getEumPageListViewData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},PageListUiService.prototype.getEumPageListViewData_response=function(response){return response},PageListUiService.prototype.getEumPageList=function(arg0){var path="restui/pageList/getEumPageList",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageListUiService","getEumPageList",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},PageListUiService.prototype.getEumPageList_response=function(response){return response},PageListUiService.prototype.getTopFivePagesByRequests=function(arg0){var path="restui/pageList/getTopFivePagesByRequests",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageListUiService","getTopFivePagesByRequests",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},PageListUiService.prototype.getTopFivePagesByRequests_response=function(response){return response},PageListUiService.prototype.getEumExcludedPageList=function(arg0){var path="restui/pageList/getEumExcludedPageList",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageListUiService","getEumExcludedPageList",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},PageListUiService.prototype.getEumExcludedPageList_response=function(response){return response},PageListUiService.prototype.describe=function(){var path="restui/pageList/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("PageListUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},PageListUiService.prototype.describe_response=function(response){return response},PageListUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],PageListUiService}(ControllerUiServiceBase);adComponentsModule.service("pageListUiService",PageListUiService),define("lib/controller/services/eum/web/PageListUiService",function(){}),require(["app/view/eum/EUMControllerBase","app/view/eum/mobile/MobileControllerBase"],function(){require(["app/view/eum/common/EUMCommonGridRenderers","app/view/eum/mobile/crashes/dashboard/CrashDashboardController","app/view/eum/mobile/crashes/dashboard/crashesByGraphs/CrashesByGraphsDirective","app/view/eum/mobile/crashes/details/CrashDetailsController","app/view/eum/mobile/mobileSnapshots/list/MobileSnapshotListController","app/view/eum/mobile/mobileSnapshots/details/MobileSnapshotDetailsController","app/view/eum/web/browserSnapshot/details/resourceWaterfall/ResourceWaterfallController","app/view/eum/web/browserSnapshot/details/resourceWaterfall/ResourceWaterfallDirective","app/view/eum/mobile/crashes/details/cards/breadcrumbs/BreadcrumbCard","app/view/eum/mobile/crashes/details/cards/breadcrumbs/BreadcrumbCardController","app/view/eum/mobile/crashes/details/cards/stacktrace/StackTraceCard","app/view/eum/mobile/crashes/details/cards/stacktrace/StackTraceCardController","app/view/eum/mobile/crashes/details/cards/summary/SummaryCard","app/view/eum/mobile/crashes/details/cards/summary/SummaryCardController","app/view/eum/mobile/mobileSnapshots/details/cards/businessTransactions/BusinessTransactionsCard","app/view/eum/mobile/mobileSnapshots/details/cards/businessTransactions/BusinessTransactionsCardController","app/view/eum/mobile/mobileSnapshots/details/cards/summary/SummaryCard","app/view/eum/mobile/mobileSnapshots/details/cards/summary/SummaryCardController","app/view/eum/mobile/mobileSnapshots/details/cards/transactionSnapshots/TransactionSnapshotsCard","app/view/eum/mobile/mobileSnapshots/details/cards/transactionSnapshots/TransactionSnapshotsCardController","app/view/eum/web/browserSnapshot/details/ResourceTimingController","app/view/eum/web/browserSnapshot/details/BrowserSnapshotDetailsService","app/view/eum/dashboardCharts/EUMTimingTrends","app/view/eum/dashboardCharts/EUMLoadTrends","app/view/eum/dashboardCharts/EUMRelatedBTTrends","app/view/eum/dashboardCharts/EUMPageRequestSection","app/view/eum/dashboardCharts/EUMPageRequestTrends","app/view/eum/EumViewService","lib/controller/services/eum/common/EumHealthRulesPoliciesUiService","lib/controller/services/eum/mobile/CrashUiService","lib/controller/services/eum/mobile/CrashDashboardUiService","lib/controller/services/eum/mobile/CrashDetailsUiService","lib/controller/services/eum/web/PageUiService","lib/controller/services/eum/EumConfigurationUiService","lib/controller/services/eum/mobile/MobileTimersAndMetricsUiService","lib/controller/services/eum/mobile/AnalyticsCrashDashboardUiService","lib/controller/services/eum/mobile/MobileSnapshotDetailsUiService","lib/controller/services/eum/mobile/MobileRequestDashboardUiService","lib/controller/services/eum/web/SyntheticLaunchUiService","lib/controller/services/eum/web/SyntheticScheduleUiService","lib/controller/services/eum/common/EUMApplicationsUiService","lib/controller/services/eum/web/BrowserSnapshotDetailsUiService","lib/controller/services/eum/web/BrowserSnapshotListUiService","lib/controller/services/eum/common/GeoDashboardUiService","lib/controller/services/eum/web/WebAnalyzeUiService","lib/controller/services/eum/mobile/MobileSnapshotListUiService","lib/controller/services/eum/mobile/MobileRequestListUiService","lib/controller/services/eum/web/PageListUiService"])}),define("app/view/eum/EUMModuleCode",function(){});var TreeGrid=function(){function TreeGrid(){return{restrict:"E",scope:{options:"=",onChange:"&"},replace:!1,transclude:!1,controller:TreeGridController}}return TreeGrid}();adComponentsModule.directive(StringUtils.toCamelCase("ad-tree-grid"),TreeGrid),define("app/view/components/treegrid/TreeGrid",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},TreeGridController=function(){function TreeGridController($element,$scope,$compile,$rootScope,$timeout){var _this=this;this.$element=$element,this.$scope=$scope,this.$compile=$compile,this.$rootScope=$rootScope,this.$timeout=$timeout,this.lastWidth=0/0,this.lastHeight=0/0,this.lastGridSearchTimeout=null,this.reconfigured=!1,this.dataProviderDirty=!0,this.columnProviderDirty=!0,this.watchers=[],this.renderingPauseCounter=0,this.recompile=_.debounce(function(item){if(_this.$scope.options&&_this.$scope.options.compileRenderers&&!_this.renderingPauseCounter){var elementsToCompile=item?item:_this.$element.find("tbody")[0];_this.$compile(elementsToCompile)(_this.$scope)}},50),this.store=Ext.create("Ext.data.TreeStore",{groupers:Ext.create("Ext.util.MixedCollection")}),this.origDecodeSorter=this.store.decodeSorters,this.$scope.$watch("options.columnProvider",this.onColumnProviderChanged.bind(this)),this.$scope.$watch("options.dataProvider",this.onDataProviderChanged.bind(this)),this.$scope.$watch("options.collapseParentNodes",this.onConfigChanged.bind(this)),this.$scope.$watch("options.enableDragAndDrop",this.onConfigChanged.bind(this)),this.$scope.$watch("options.selectedItem",this.focusOnSelectedItem.bind(this)),this.$scope.$watch("options.filterString",function(){_this.filterTreeGrid()}),this.$scope.$on("layoutChanged",function(){_this.layoutTree()}),this.$scope.$on("$destroy",function(){_this.tree&&_this.tree.destroy(),_this.lastGridSearchTimeout&&_this.$timeout.cancel(_this.lastGridSearchTimeout)})}return TreeGridController.prototype.onDataProviderChanged=function(newValue,oldValue){this.dataProviderDirty=!0,this.onConfigChanged(newValue,oldValue)},TreeGridController.prototype.onColumnProviderChanged=function(newValue,oldValue){this.columnProviderDirty=!0,this.onConfigChanged(newValue,oldValue)},TreeGridController.prototype.onConfigChanged=function(){var _this=this;this.reconfigured=!0,this.$scope.$evalAsync(function(){_this.processConfigChanged()})},TreeGridController.prototype.refresh=function(force){var _this=this;void 0===force&&(force=!1),this.tree&&(force?(this.reconfigured=!0,this.dataProviderDirty=!0,this.columnProviderDirty=!0,this.$scope.$evalAsync(function(){_this.processConfigChanged()})):this.tree.getView().refresh())},TreeGridController.prototype.filterTreeGrid=function(){var _this=this;this.tree&&this.$scope.options&&(this.lastGridSearchTimeout&&this.$timeout.cancel(this.lastGridSearchTimeout),this.lastGridSearchTimeout=this.$timeout(function(){if(_this.$scope.options.filterFunction){var store=_this.tree.getStore(),scope=_this.$scope;if(store&&store.getRootNode()){var filteredNonLeafCount=0,totalNonLeafCount=0;_this.gridFilters=function(o1,id){if("-root"==o1.id)return!0;var i,children=o1.childNodes,len=children&&children.length,visible=scope.options.filterFunction(o1,id);for(i=0;len>i&&!(visible=children[i].get("visible"));i++);return visible&&!o1.isLeaf()?(totalNonLeafCount++,filteredNonLeafCount++):o1.isLeaf()||totalNonLeafCount++,visible},store.clearFilter(!0),store.filter(_this.gridFilters),_this.$scope.options.filterSummaryFunction&&_this.$scope.options.filterSummaryFunction(filteredNonLeafCount,totalNonLeafCount)}ViewUtil.safeApply(_this.$rootScope,null,null)}},300,!0))},TreeGridController.prototype.sortTree=function(){this.$scope.options.sortFields&&this.store.sort(this.$scope.options.sortFields)},TreeGridController.prototype.processConfigChanged=function(){if(this.reconfigured){var dp=this.processAndReturnTreeStore();if(this.tree){if(this.columnProviderDirty&&(this.tree.reconfigure(null,this.processAndReturnColumns()),this.$scope.options.stateful)){var persistedStates=Ext.state.Manager.getProvider().get(this.$scope.options.stateId);persistedStates&&(this.tree.applyState(persistedStates),this.tree.updateLayout())}this.focusOnSelectedItem(!1),this.layoutTree(),this.filterTreeGrid(),this.sortTree()}else dp&&this.processAndReturnColumns()&&(this.createTree(),this.layoutTree(),this.filterTreeGrid(),this.sortTree());this.recompile()}this.reconfigured=!1},TreeGridController.prototype.processAndReturnColumns=function(){if(this.$scope.options&&this.$scope.options.columnProvider){if(this.columnProviderDirty){this.$scope.options.columnProvider.length>0&&(this.$scope.options.columnProvider[0].xtype="treecolumn");var columns=this.$scope.options.columnProvider;this.$scope.options.stateful&&this.$scope.options.stateId&&GridComp.setGridColumnStateIds(columns,this.$scope.options.stateId);var origSorter=this.origDecodeSorter;this.store.decodeSorters=function(args){var sorters=origSorter(args),field=args[0].property,column=_.findWhere(columns,{dataIndex:args[0].property});return column&&column.sortFn?sorters[0].sort=function(o1,o2){return"ASC"==sorters[0].direction?column.sortFn(o1,o2):-column.sortFn(o1,o2)}:column&&(field=column.dataIndexMapping?column.dataIndexMapping:column.dataIndex,sorters[0].sort=function(model1,model2){var v1=Util.getProperty(field,model1.raw),v2=Util.getProperty(field,model2.raw),result=v1>v2?1:v2>v1?-1:0;return"ASC"==sorters[0].direction?result:-result}),sorters};for(var k=0;k<this.watchers.length;k++)this.watchers[k]();this.watchers=[];for(var itr=0;itr<columns.length;itr++)this.watchers.push(this.$scope.$watch("options.columnProvider["+itr+"].hidden",this.columnVisibilityChanged.bind(this,itr,columns[itr].dataIndex)));this.columnProviderDirty=!1}return this.$scope.options.columnProvider}return null},TreeGridController.prototype.processAndReturnTreeStore=function(){var _this=this;if(this.$scope.options&&this.$scope.options.dataProvider){if(this.dataProviderDirty){var rootNode=this.extendModel({children:this.$scope.options&&!this.$scope.options.escapeHtml?this.$scope.options.dataProvider:StringUtils.escape(this.$scope.options.dataProvider),expanded:!0},this.$scope.options.collapseParentNodes);this.store.getRootNode()&&(this.store.getRootNode().removeAll(),this.store.clearFilter(!0)),this.pauseRenderingForAction(function(){_this.store.setRootNode(rootNode),_this.gridFilters&&_this.tree.getStore().filter(_this.gridFilters),_this.dataProviderDirty=!1,_this.treeGridApi&&_this.treeGridApi.registerDataProvider(_this.$scope.options.dataProvider,_this.store.getRootNode())})}return this.store}return null},TreeGridController.prototype.columnVisibilityChanged=function(colNumber,dataIndex,hiddenNew,hiddenOld){if(hiddenNew!=hiddenOld&&void 0!==hiddenOld){this.columnProviderDirty=!0;var tree=(this.$scope.options.columnProvider,this.tree);tree&&tree.columns&&tree.columns[colNumber]&&tree.columns[colNumber].setVisible&&tree.columns[colNumber].setVisible(!hiddenNew),this.onConfigChanged(hiddenNew,hiddenOld)}},TreeGridController.prototype.createTree=function(){var _this=this,parentElement=$(this.$element).parent();$(this.$element).addClass("adsTreeGrid");var defaultConfig={renderTo:$(this.$element)[0],store:this.store,animate:!1,forceFit:!0,rootVisible:!1,collapsible:!1,lines:!1,columns:this.processAndReturnColumns(),useArrows:!0,flex:1,width:parentElement.width(),height:parentElement.height(),hideHeaders:!1,listeners:{itemexpand:function(node){_this.$scope.options&&_this.$scope.options.onItemExpand&&_this.$scope.options.onItemExpand.call(_this.$scope,_this.treeGridApi.getDataFromNode(node)),_this.recompile()},itemcollapse:function(){_this.recompile()},cellclick:function(clickedView,td,columnIndex,record,tr,rowIndex,e){if(_this.$scope.options&&_this.$scope.options.onCellClick){var event={data:record.data,raw:_this.treeGridApi.getDataFromNode(record),columnIndex:columnIndex,rowIndex:rowIndex,target:e.browserEvent&&e.browserEvent.target?e.browserEvent.target:null,td:td,tr:tr};_this.$scope.options.onCellClick.call(_this.$scope,event)}},celldblclick:function(clickedView,td,columnIndex,record,tr,rowIndex,e){if(_this.$scope.options&&_this.$scope.options.onDoubleClick){var event={data:record.data,raw:_this.treeGridApi.getDataFromNode(record),columnIndex:columnIndex,rowIndex:rowIndex,target:GridComp.getEventTarget(e.browserEvent),td:td,tr:tr};_this.$scope.options.onDoubleClick.call(_this.$scope,event)}},beforeitemdblclick:function(){return!_this.$scope.options.disableDefaultDblClickAction},viewready:function(tree){if(_this.$scope.options.enableDragAndDrop){var view=tree.getView(),dropAndDragManager=view.findPlugin("treeviewdragdrop");dropAndDragManager.dragZone.onBeforeDrag=function(data){return view.getRecord(data.item).isLeaf()}}},sortchange:this.sortChangeHandler,selectionchange:this.handleOnChange,scope:this},plugins:[],viewConfig:{scroll:"vertical",layout:"auto",forceFit:!0,stripeRows:!0,emptyText:this.$scope.options.emptyText||"",deferEmptyText:!1,deferInitialRefresh:!1,cls:"adsTreeGrid",listeners:{scope:this,drop:function(node,data){_this.$scope.options&&_this.$scope.options.onDrop&&_this.$scope.options.onDrop.call(_this.$scope,data)},beforedrop:function(node,data,overModel,dropPosition){return overModel.parentNode&&overModel.parentNode.parentNode?!0:"append"==dropPosition}}}};this.$scope.options.enableBufferedRenderer&&defaultConfig.plugins.push({ptype:"bufferedrenderer",pluginId:TreeGridController.BUFFERED_RENDERER_PLUGIN_ID,trailingBufferZone:20,leadingBufferZone:40}),this.$scope.options.enableDragAndDrop&&_.extend(defaultConfig.viewConfig,{plugins:{ptype:"treeviewdragdrop",containerScroll:!0,dragText:this.$scope.options.enableDragAndDropText}}),this.$scope.options.stateful&&this.$scope.options.stateId&&(defaultConfig.stateful=this.$scope.options.stateful,defaultConfig.stateId=this.$scope.options.stateId),this.tree=Ext.create("Ext.tree.Panel",defaultConfig),this.treeGridApi=new TreeGridExtApi(this),this.treeGridApi.registerDataProvider(this.$scope.options.dataProvider,this.store.getRootNode()),this.$scope.options.onRegisterApi&&this.$scope.options.onRegisterApi(this.treeGridApi);var onRangeFetched=this.tree.getPlugin(TreeGridController.BUFFERED_RENDERER_PLUGIN_ID).onRangeFetched;this.tree.getPlugin(TreeGridController.BUFFERED_RENDERER_PLUGIN_ID).onRangeFetched=function(range,start,end){range=this.store.getRange(start,end),Util.isDefAndNotEmptyArray(range)&&onRangeFetched.apply(this,arguments)},this.$element.find(".adsTreeGrid").scroll(function(){_this.recompile()})},TreeGridController.prototype.layoutTree=function(){if(this.tree){this.$element.children().css("display","none");var newWidth=this.treeGridApi.getSpecifiedWidth()||this.$element.width(),newHeight=this.treeGridApi.getSpecifiedHeight()||this.$element.height();0===newHeight&&(newHeight=this.$element.parent().height()),0===newWidth&&(newWidth=this.$element.parent().width()),this.lastHeight!==newHeight||this.lastWidth!==newWidth?(this.$element.children().css("display","block"),this.lastWidth=newWidth,this.lastHeight=newHeight,this.tree.setSize(newWidth,newHeight),this.tree.updateLayout()):this.$element.children().css("display","block")}},TreeGridController.prototype.pauseRenderingForAction=function(fn){if(!this.tree)return fn();0===this.renderingPauseCounter&&this.tree.getPlugin(TreeGridController.BUFFERED_RENDERER_PLUGIN_ID).store.suspendEvents(),this.renderingPauseCounter++;var result=fn();return this.renderingPauseCounter--,0===this.renderingPauseCounter&&(this.tree.getPlugin(TreeGridController.BUFFERED_RENDERER_PLUGIN_ID).store.resumeEvents(),this.tree.getView().refresh(),this.recompile()),result},TreeGridController.prototype.handleOnChange=function(event){event.selected.items.length>0&&(this.$scope.options.selectedItem=this.treeGridApi.getDataFromNode(event.selected.items[0])),ViewUtil.safeApply(this.$scope),this.$scope.onChange&&(this.$scope.onChange(),ViewUtil.safeApply(this.$scope))},TreeGridController.prototype.sortChangeHandler=function(){CollectionUtils.arrayContentsEqual(this.store.sorters.items,this.$scope.options.sortFields)||(this.$scope.options.sortFields=this.store.sorters.items),this.recompile()},TreeGridController.prototype.extendModel=function(node,collapseParentNodes){if(void 0===collapseParentNodes&&(collapseParentNodes=!1),node.children&&!node.backupChildren&&(node.backupChildren=node.children),!node.children&&node.backupChildren&&(node.children=node.backupChildren),node.leaf=null==node.children,node.expanded=node.id&&this.store&&this.store.getRootNode()&&this.store.getNodeById(node.id)?this.store.getNodeById(node.id).isExpanded():!node.leaf&&!collapseParentNodes,node.iconSource&&node.iconSource.length>0?node.icon=node.iconSource:node.iconCls="no-icon",node.children)for(var j=0;j<node.children.length;j++)this.extendModel(node.children[j],collapseParentNodes);return node},TreeGridController.prototype.focusOnSelectedItem=function(focus){void 0===focus&&(focus=!0),this.treeGridApi&&this.$scope.options&&this.$scope.options.selectedItem&&this.treeGridApi.selectNode(this.$scope.options.selectedItem,focus)},TreeGridController.BUFFERED_RENDERER_PLUGIN_ID="ad-tree-grid-buffered-renderer",TreeGridController.$inject=["$element","$scope","$compile","$rootScope","$timeout"],TreeGridController}(),TreeGridColumn=function(_super){function TreeGridColumn(){_super.apply(this,arguments)}return __extends(TreeGridColumn,_super),TreeGridColumn}(GridColumn),TreeGridOptions=function(_super){function TreeGridOptions(config){_super.call(this),this.enableBufferedRenderer=!0;for(var item in config)this[item]=config[item]}return __extends(TreeGridOptions,_super),TreeGridOptions}(GridOptions),TreeGridItemEventType;!function(TreeGridItemEventType){TreeGridItemEventType[TreeGridItemEventType.ITEM_EXPAND=0]="ITEM_EXPAND",TreeGridItemEventType[TreeGridItemEventType.ITEM_COLLAPSE=1]="ITEM_COLLAPSE"}(TreeGridItemEventType||(TreeGridItemEventType={}));var TreeGridExtApi=function(){function TreeGridExtApi(treeController){this.itemListeners=new HashMap,this.rawToDataProviderMap=new HashMap,this.dataToNodeMap=new HashMap({objectIdProperty:TreeGridExtApi.HASH_ID_PROPERTY}),this.nodeToDataMap=new HashMap({objectIdProperty:TreeGridExtApi.HASH_ID_PROPERTY}),this.tree=treeController.tree,this.pauseExtRenderForAction=treeController.pauseRenderingForAction.bind(treeController),this.controllerRefresh=treeController.refresh.bind(treeController)}return TreeGridExtApi.prototype.expandNode=function(data,depth,maxNodesToExpand){void 0===depth&&(depth=0),void 0===maxNodesToExpand&&(maxNodesToExpand=1);var node=this.dataToNodeMap.get(data);node&&0!==maxNodesToExpand&&this.pauseExtRenderForAction(function(){var nodesInNextLevel,nodesInLevel=[node];do nodesInNextLevel=[],nodesInLevel.every(function(currNode){return currNode.expand(),maxNodesToExpand--,nodesInNextLevel=nodesInNextLevel.concat(currNode.childNodes),0!==maxNodesToExpand}),nodesInLevel=nodesInNextLevel;while(Util.isDefAndNotEmptyArray(nodesInLevel)&&0!==maxNodesToExpand&&0!==depth--)})},TreeGridExtApi.prototype.collapseNode=function(data,depth){var _this=this;void 0===depth&&(depth=0);var node=this.dataToNodeMap.get(data);node&&(0>depth?node.collapse(!0):(node.collapse(),depth>0&&Util.isDefAndNotEmptyArray(data.children)&&data.children.forEach(function(child){_this.collapseNode(child,depth-1)})))},TreeGridExtApi.prototype.expandAllNodeChildren=function(data,maxChildrenToExpand){void 0===maxChildrenToExpand&&(maxChildrenToExpand=-1),this.expandNode(data,-1,maxChildrenToExpand)},TreeGridExtApi.prototype.collapseAllNodeChildren=function(data){this.collapseNode(data,-1)},TreeGridExtApi.prototype.isNodeExpanded=function(data){var node=this.dataToNodeMap.get(data);return node?node.isExpanded():null},TreeGridExtApi.prototype.isNodeVisible=function(data){var node=this.dataToNodeMap.get(data);return node?node.isVisible()&&!this.isNodeFiltered(node):!1},TreeGridExtApi.prototype.isNodeLeaf=function(data){var node=this.dataToNodeMap.get(data);return node?node.isLeaf()||!Util.isDefAndNotEmptyArray(node.childNodes):null},TreeGridExtApi.prototype.selectNode=function(data,focus){var _this=this;void 0===focus&&(focus=!0);var node=this.dataToNodeMap.get(data);if(node){var revertFocusItem=focus?null:document.activeElement;for(this.tree.getSelectionModel().select(node),node=node.parentNode;Util.isDefAndNotNull(node);)node.expand(!1),node=node.parentNode;ViewUtil.doAfterDigest(function(){_this.tree.getView().focusNode(_this.dataToNodeMap.get(data)),revertFocusItem&&revertFocusItem.focus()})}},TreeGridExtApi.prototype.getDataFromNode=function(node){return this.nodeToDataMap.get(node)},TreeGridExtApi.prototype.registerDataProvider=function(dataProvider,extRoot){this.clearNodes(),this.totalNodes=0,this.mapTreeNodes(dataProvider,extRoot.raw.children),this.registerNodes(dataProvider,extRoot.childNodes)},TreeGridExtApi.prototype.refresh=function(force){void 0===force&&(force=!1),this.controllerRefresh(force)},TreeGridExtApi.prototype.getWidth=function(){return this.tree.getWidth()},TreeGridExtApi.prototype.setWidth=function(newWidth){this.specifiedWidth=newWidth,this.tree.setWidth(newWidth)},TreeGridExtApi.prototype.getHeight=function(){return this.tree.getHeight()},TreeGridExtApi.prototype.setHeight=function(newHeight){this.specifiedHeight=newHeight,this.tree.setHeight(newHeight)},TreeGridExtApi.prototype.addItemListener=function(event,callback){var callbackPair=this.getExtListenerPairForItemListener(callback);this.tree.addListener(this.getItemEventMapping(event),callbackPair.extCallback),this.itemListeners.containsKey(event)?this.itemListeners.get(event).push(callbackPair):this.itemListeners.put(event,[callbackPair])},TreeGridExtApi.prototype.removeItemListener=function(event,callback){var _this=this;if(callback){var listenerPairs=this.itemListeners.get(event);if(!listenerPairs)return;var removedCallbackPairs=[];return listenerPairs.slice(0).forEach(function(listenerPair,index){listenerPair.registeredCallback===callback&&(removedCallbackPairs=removedCallbackPairs.concat(listenerPairs.splice(index-removedCallbackPairs.length)))}),removedCallbackPairs.forEach(function(callbackPair){_this.tree.removeListener(_this.getItemEventMapping(event),callbackPair.extCallback)}),removedCallbackPairs.length>0}return!1},TreeGridExtApi.prototype.filterTree=function(filterFn,displayIfChildVisible){var _this=this;void 0===displayIfChildVisible&&(displayIfChildVisible=!0);var store=this.tree&&this.tree.getStore(),visibleNodes=0;return store&&this.pauseExtRenderForAction(function(){store.clearFilter(!0),store.filter(function(node){var overrideFilterForChildren=displayIfChildVisible&&node.childNodes&&node.childNodes.some(function(node){return!_this.isNodeFiltered(node)});return _this.tree.getRootNode()===node||(overrideFilterForChildren||filterFn(_this.getDataFromNode(node)))&&++visibleNodes})}),[visibleNodes,this.totalNodes]},TreeGridExtApi.prototype.clearFilter=function(){var store=this.tree&&this.tree.getStore();return store&&store.clearFilter(!0),[this.totalNodes,this.totalNodes]},TreeGridExtApi.prototype.isNodeFiltered=function(node){var nodeAsModel=node;return nodeAsModel&&nodeAsModel.get&&!nodeAsModel.get("visible")},TreeGridExtApi.prototype.getSpecifiedWidth=function(){return this.specifiedWidth},TreeGridExtApi.prototype.getSpecifiedHeight=function(){return this.specifiedHeight},TreeGridExtApi.prototype.mapTreeNodes=function(dataProvider,rawData){for(var i=0;i<rawData.length;i++)this.rawToDataProviderMap.put(rawData[i],dataProvider[i]),(Util.isDefAndNotEmptyArray(rawData[i].children)||Util.isDefAndNotEmptyArray(dataProvider[i].children))&&this.mapTreeNodes(dataProvider[i].children,rawData[i].children)},TreeGridExtApi.prototype.registerNodes=function(dataObjects,treeNodes){dataObjects.length!==treeNodes.length&&ADLoggerService.getInstance().error("Tree grid data does not match tree structure");for(var i=0;i<treeNodes.length;i++){var rawNode=treeNodes[i].raw,dataObject=this.rawToDataProviderMap.get(rawNode);this.totalNodes++,this.dataToNodeMap.put(dataObject,treeNodes[i]),this.nodeToDataMap.put(treeNodes[i],dataObject),(Util.isDefAndNotEmptyArray(dataObject.children)||Util.isDefAndNotEmptyArray(treeNodes[i].childNodes))&&this.registerNodes(dataObject.children,treeNodes[i].childNodes)}},TreeGridExtApi.prototype.clearNodes=function(){this.dataToNodeMap.clear(),this.nodeToDataMap.clear(),this.rawToDataProviderMap.clear()},TreeGridExtApi.prototype.getExtListenerPairForItemListener=function(listener){var _this=this;return{extCallback:function(treeNode){listener.call(_this,_this.getDataFromNode(treeNode))},registeredCallback:listener}},TreeGridExtApi.prototype.getItemEventMapping=function(event){switch(event){case 0:return"itemexpand";case 1:return"itemcollapse";default:return"UNKNOWN"}},TreeGridExtApi.HASH_ID_PROPERTY="_treeGridExtApiHashKey",TreeGridExtApi}();define("app/view/components/treegrid/TreeGridController",function(){});var PerformanceValueDirective=function(){function PerformanceValueDirective(){return{restrict:"E",replace:!1,template:'<a ng-click="controller.onClick()">{{controller.displayString}}</a>',scope:{adPerformanceValueData:"="},link:function(scope,iElement,iAttrs,ctrl){ctrl.link(scope,iElement,iAttrs)},controller:"PerformanceValueController"}}return PerformanceValueDirective.$inject=[],PerformanceValueDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-performance-value"),PerformanceValueDirective),define("app/view/components/metrics/performanceValue/PerformanceValueDirective",function(){});var PerformanceValueController=function(){function PerformanceValueController($scope,$rootScope,$location,resourceManager,notificationService,injectorService){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.$scope.controller=this,this.$scope.$watch("adPerformanceValueData",function(){_this.init()}),this.init()}return PerformanceValueController.prototype.link=function(){this.init()},PerformanceValueController.prototype.init=function(){this.performanceValueData=this.$scope?this.$scope.adPerformanceValueData:null,this.displayString=this.performanceValueData&&this.performanceValueData.performanceValue&&this.performanceValueData.performanceValue.metricValue?MetricUtil.getMetricDisplay(this.performanceValueData.performanceValue.metricValue.value,1,this.performanceValueData.zeroDisplayAsLessThanOne,this.performanceValueData.thresholdForLargeNumber):MetricUtil.NO_DATA_DISPLAY_STRING},PerformanceValueController.prototype.getApplicationId=function(){return this.performanceValueData?this.performanceValueData.applicationId:-1},PerformanceValueController.prototype.onClick=function(){this.performanceValueData&&this.performanceValueData.performanceValue&&MetricBrowserViewService.instance().openMetricBrowser(this.getApplicationId(),this.performanceValueData.performanceValue.metricId,MetricUtil.getEntityDefinitionForMetricBrowser(this.performanceValueData))},PerformanceValueController.$inject=["$scope","$rootScope","$location","resourceManager","notificationService","injectorService"],PerformanceValueController}();appdynamicsModule.controller("performanceValueController",PerformanceValueController),define("app/view/components/metrics/performanceValue/PerformanceValueController",function(){});var FlyoutSelectorDirective=function(){function FlyoutSelectorDirective(){return{restrict:"E",transclude:!1,replace:!0,templateUrl:"app/view/components/flyoutSelector/FlyoutSelectorView.html",scope:{flyoutTitle:"@",flyoutId:"@",allItemsGridOptions:"=",selectedItemsGridOptions:"=",alternateItemsGridOptions:"=",alternateItemsText:"=",adFlyoutFetchDataFunction:"&",adFlyoutLoadMode:"@"},controller:FlyoutSelectorController}}return FlyoutSelectorDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-flyout-selector"),FlyoutSelectorDirective),define("app/view/components/flyoutSelector/FlyoutSelectorDirective",function(){});var FlyoutSelectorController=function(){function FlyoutSelectorController($scope,$rootScope,$compile,resourceManager){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$compile=$compile,this.resourceManager=resourceManager,this.offFlyoutClickEvent="mouseup.offFlyout"+this.$scope.flyoutId,this.selectedGridId="selectedGrid-"+this.$scope.flyoutId,this.addButtonId="addButton-"+this.$scope.flyoutId,$scope.controller=this,this.contextMenuOptions={disableDefaultContextMenu:!0,items:[{text:this.resourceManager.getString("ui","ms_remove"),handler:function(){_this.onRemoveSelectedItems()},disabled:!this.selectedItemsToRemove}]},$scope.$on(Flyout.ADD_EVENT,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];
$scope.flyoutId==args[1]&&(_.forEach(args[0],function(item){$scope.selectedItemsGridOptions.dataProvider.push(item.data)}),$scope.selectedItemsGridOptions.dataProvider=angular.copy($scope.selectedItemsGridOptions.dataProvider),$scope.controller.clearFlyoutGridData())})}return FlyoutSelectorController.prototype.onAddButtonClick=function(event){var _this=this,top=event.clientY,adFlyoutId="#"+this.$scope.flyoutId;if(this.addButtonElement=$("#"+this.addButtonId),this.selectedGridElement=$("#"+this.selectedGridId),this.$scope.allItemsGridOptions&&(this.$scope.allItemsGridOptions.filterFunction=function(record){for(var i=0;i<_this.$scope.selectedItemsGridOptions.dataProvider.length;i++){var item=_this.$scope.selectedItemsGridOptions.dataProvider[i];if(angular.equals(item,record.raw))return!1}if(_this.$scope.allItemsGridOptions.filterString){var value="";for(var property in record.raw)!record.raw.hasOwnProperty(property)||"string"!=typeof record.raw[property]&&"number"!=typeof record.raw[property]||(value+="|"+record.raw[property]);if(value&&(value=value.toString().toLowerCase(),!value||-1==value.indexOf(_this.$scope.allItemsGridOptions.filterString.toLowerCase())))return!1}return!0}),this.$scope.alternateItemsGridOptions&&(this.$scope.alternateItemsGridOptions.filterFunction=function(record){for(var i=0;i<_this.$scope.selectedItemsGridOptions.dataProvider.length;i++){var item=_this.$scope.selectedItemsGridOptions.dataProvider[i];if(angular.equals(item,record.raw))return!1}if(_this.$scope.alternateItemsGridOptions.filterString){var value="";for(var property in record.raw)!record.raw.hasOwnProperty(property)||"string"!=typeof record.raw[property]&&"number"!=typeof record.raw[property]||(value+="|"+record.raw[property]);if(value&&(value=value.toString().toLowerCase(),!value||-1==value.indexOf(_this.$scope.alternateItemsGridOptions.filterString.toLowerCase())))return!1}return!0}),0==$(adFlyoutId).length){var html=$("<ad-flyout-selector-options id="+this.$scope.flyoutId+' flyout-title="{{flyoutTitle}}" flyout-id="{{flyoutId}}" all-items-grid-options="allItemsGridOptions" alternate-items-grid-options="alternateItemsGridOptions" alternate-items-text="alternateItemsText" ad-flyout-fetch-data-function="adFlyoutFetchDataFunction()"></ad-flyout-selector-options>');this.setFlyoutLeftPosition(html),this.setFlyoutTopPosition(top,html),this.$compile(html)(this.$scope),html.appendTo($("body")),$(adFlyoutId).bind("remove",{that:this},this.flyoutRemoveHandler),this.selectedGridElement.bind("remove",{that:this},this.selectedGridRemoveHandler),$(document).bind(this.offFlyoutClickEvent,{that:this},this.offFlyoutClickHandler)}},FlyoutSelectorController.prototype.clearFlyoutGridData=function(){this.$scope.adFlyoutLoadMode==FlyoutSelectorController.MODE_ON_DEMAND&&(this.$scope.allItemsGridOptions.dataProvider=[],this.$scope.alternateItemsGridOptions&&(this.$scope.alternateItemsGridOptions.dataProvider=[]))},FlyoutSelectorController.prototype.selectedGridRemoveHandler=function(event){{var that=event.data.that;"#"+that.$scope.flyoutId}$(document).unbind(that.offFlyoutClickEvent),that.clearFlyoutGridData(),$("#"+that.$scope.flyoutId).remove()},FlyoutSelectorController.prototype.flyoutRemoveHandler=function(event){var that=event.data.that;$(document).unbind(that.offFlyoutClickEvent),that.clearFlyoutGridData()},FlyoutSelectorController.prototype.offFlyoutClickHandler=function(event){var that=event.data.that,flyOutId="#"+that.$scope.flyoutId,flyOutElement=$(flyOutId);0==ViewUtil.isEventEmmitedFromWithin(event,flyOutElement)&&0==ViewUtil.isEventEmmitedFromWithin(event,that.addButtonElement)&&0==ViewUtil.isEventEmmitedFromWithin(event,that.selectedGridElement)&&$(flyOutId).remove()},FlyoutSelectorController.prototype.setFlyoutTopPosition=function(top,element){var height=FlyoutSelectorController.FLYOUT_MIN_HEIGHT+FlyoutSelectorController.FLYOUT_MARGIN;top=top>window.innerHeight-height?window.innerHeight-height:top,element.css("top",top+"px")},FlyoutSelectorController.prototype.setFlyoutLeftPosition=function(element){var left=this.addButtonElement.offset().left+this.addButtonElement.width(),width=FlyoutSelectorController.FLYOUT_WIDTH+FlyoutSelectorController.FLYOUT_MARGIN;left=left>window.innerWidth-width?window.innerWidth-width:left,element.css("left",left+"px")},FlyoutSelectorController.prototype.onRemoveSelectedItems=function(){if(this.isRemovable){for(var i=0;i<this.selectedItemsToRemove.length;i++)Util.removeWhere(this.$scope.selectedItemsGridOptions.dataProvider,this.selectedItemsToRemove[i].data);this.$scope.selectedItemsGridOptions.dataProvider=angular.copy(this.$scope.selectedItemsGridOptions.dataProvider),ViewUtil.safeDigest(this.$scope),this.selectedItemsToRemove=null,this.isRemovable=!1}},FlyoutSelectorController.prototype.onGridItemSelectionChange=function(event){this.selectedItemsToRemove=[],this.isRemovable=!0;for(var i=0;i<event.selected.items.length;i++)this.selectedItemsToRemove.push(event.selected.items[i]);this.contextMenuOptions.items[0].disabled=!this.selectedItemsToRemove},FlyoutSelectorController.MODE_ON_DEMAND="on-demand",FlyoutSelectorController.MODE_PRE_LOADED="pre-loaded",FlyoutSelectorController.REMOVE_BUTTON_CLICKED="REMOVE_BUTTON_CLICKED",FlyoutSelectorController.FLYOUT_WIDTH=500,FlyoutSelectorController.FLYOUT_MIN_HEIGHT=330,FlyoutSelectorController.FLYOUT_MARGIN=40,FlyoutSelectorController.$inject=["$scope","$rootScope","$compile","resourceManager"],FlyoutSelectorController}();appdynamicsModule.controller("FlyoutSelectorController",FlyoutSelectorController),define("app/view/components/flyoutSelector/FlyoutSelectorController",function(){});var EventFiltersDirective=function(){function EventFiltersDirective(){return{restrict:"E",transclude:!1,replace:!0,templateUrl:"app/view/components/eventFilters/EventFiltersView.html",scope:{appId:"@",eventStreamItemFilter:"=adsEventStreamItemFilter",filterOverrides:"=adsFilterOverrides",adEventFilterChanged:"&"},controller:"EventFiltersController"}}return EventFiltersDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-event-filters"),EventFiltersDirective),define("app/view/components/eventFilters/EventFiltersDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/eventFilters/CustomFilterEditorController",["require","exports"],function(require,exports){var BooleanOperatorOption=function(){function BooleanOperatorOption(){}return BooleanOperatorOption}();exports.BooleanOperatorOption=BooleanOperatorOption;var CustomFilterEditorController=function(_super){function CustomFilterEditorController($scope,$rootScope,resourceManager,notificationService,injectorService,$modalInstance,dialogData){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.customEventHelpLink=ExternalUrls.HELP_URL_CUSTOM_EVENT,this.booleanOperatorOptions=[{value:BooleanOperator.AND,name:this.getString("ms_all")},{value:BooleanOperator.OR,name:this.getString("ms_any")}],this.$scope.controller=this,this.initializeData()}return __extends(CustomFilterEditorController,_super),CustomFilterEditorController.prototype.initializeData=function(){this.customFilterEditorDialogData=this.dialogData,this.titleText=this.getString(this.customFilterEditorDialogData.dialogMode==CustomFilterEditorController.MODE_EDIT&&this.customFilterEditorDialogData.item?"ms_editCustomEventFilter":"ms_addCustomEventFilter"),this.infoText=this.getString("ms_findCustomEvents"),this.customFilterEditorDialogData.dialogMode==CustomFilterEditorController.MODE_ADD?(this.customEventFilter={customEventType:"",propertyBooleanOperator:"",properties:[]},this.selectedBooleanOperatorOption=this.booleanOperatorOptions[1]):this.customFilterEditorDialogData.dialogMode==CustomFilterEditorController.MODE_EDIT&&(this.customEventFilter={customEventType:this.customFilterEditorDialogData.item.customEventType,propertyBooleanOperator:this.customFilterEditorDialogData.item.propertyBooleanOperator,properties:this.customFilterEditorDialogData.item.properties},this.selectedBooleanOperatorOption=this.customEventFilter.propertyBooleanOperator==this.booleanOperatorOptions[0].value?this.booleanOperatorOptions[0]:this.booleanOperatorOptions[1])},CustomFilterEditorController.prototype.onAddNewProperty=function(){this.customEventFilter.properties||(this.customEventFilter.properties=[]),this.customEventFilter.properties.push({name:"",value:""})},CustomFilterEditorController.prototype.onRemoveProperty=function(nvo){this.customEventFilter.properties.splice(this.customEventFilter.properties.indexOf(nvo),1)},CustomFilterEditorController.prototype.onSave=function(itemToSave){this.$rootScope.$broadcast("validateForm");var formValid=this.$scope.customFilterEditorForm.$valid;formValid&&(itemToSave.propertyBooleanOperator=this.selectedBooleanOperatorOption.value,this.customFilterEditorDialogData.item=itemToSave,this.customFilterEditorDialogData.callbackFn(),this.closeDialog())},CustomFilterEditorController.prototype.closeDialog=function(){this.$modalInstance.close()},CustomFilterEditorController.MODE_EDIT="MODE_EDIT",CustomFilterEditorController.MODE_ADD="MODE_ADD",CustomFilterEditorController.$inject=["$scope","$rootScope","resourceManager","notificationService","injectorService","$modalInstance","dialogData"],CustomFilterEditorController}(ControllerBase);exports.CustomFilterEditorController=CustomFilterEditorController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/eventFilters/EventFiltersController",["require","exports","./CustomFilterEditorController"],function(require,exports,CustomFilterEditorController){var EventStreamViewData=function(){function EventStreamViewData(){}return EventStreamViewData}();exports.EventStreamViewData=EventStreamViewData;var EventFiltersFlags=function(){function EventFiltersFlags(){this.eventType="",this.businessTransactionId=-1,this.componentId=-1,this.nodeId=-1}return EventFiltersFlags}();exports.EventFiltersFlags=EventFiltersFlags;var EventFiltersViewState=function(){function EventFiltersViewState(){this.isErrorSelectorOpen=!1,this.isErrorSelectorLinkOpen=!1,this.isBtSelectorOpen=!0,this.btSelectorFilterString="",this.errorSelectorFilterString="",this.isTierNodeSelectorOpen=!0,this.applicationTierNameMap={},this.applicationNodeSelections={},this.applicationPolicySelections={}}return EventFiltersViewState}();exports.EventFiltersViewState=EventFiltersViewState;var EventFiltersController=function(_super){function EventFiltersController($scope,$rootScope,resourceManager,notificationService,sharedInjectorService,timeRangeService,eventsUiService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.timeRangeService=timeRangeService,this.eventsUiService=eventsUiService,this.selectedCustomEventFilterItems=[],this.customEventHelpLink=ExternalUrls.HELP_URL_CUSTOM_EVENT,this.showObjectFilters=!0,this.filterFunctionLinks={selectAll:{enabled:!0,name:this.getString("ms_selectAll"),func:function(){_this.setAllEventTypeCheckboxes(!0),_this.setAllPolicyCheckboxes(!0)}},clearAll:{enabled:!0,name:this.getString("ms_clearAll"),func:function(){_this.setAllEventTypeCheckboxes(!1),_this.setAllPolicyCheckboxes(!1)}},openAll:{enabled:!0,name:this.getString("ms_openAll"),func:function(){_this.openAllAccordions(!0)}},closeAll:{enabled:!0,name:this.getString("ms_closeAll"),func:function(){_this.openAllAccordions(!1)}}},$scope.controller=this,this.eventFilterCache=EventFilterCacheService.instance(),this._appId=$scope.appId||this.getApplicationIdFromUrl(),this.eventStreamItemFilter=$scope.eventStreamItemFilter,this.filterOverrides=$scope.filterOverrides,EventFiltersController.DEBUG&&ADLoggerService.warn("EventFiltersController.constructor Debug: appId passed is "+this._appId),EventFiltersController.DEBUG&&ADLoggerService.warn("EventFiltersController.constructor Debug: eventStreamItemFilter passed is "+this.eventStreamItemFilter),EventFiltersController.DEBUG&&ADLoggerService.warn("EventFiltersController.constructor Debug: filterOverrides passed is "+this.filterOverrides),this.initViewState(),this.customFilterGridContextMenuOptions={disableDefaultContextMenu:!0,items:[{text:this.resourceManager.getString("ui","ms_edit"),handler:function(){_this.onEditSelectedCustomEventFilter()},disabled:!this.selectedCustomEventFilterItems},{text:this.resourceManager.getString("ui","ms_remove"),handler:function(){_this.onRemoveSelectedCustomEventFilter()},disabled:!this.selectedCustomEventFilterItems}]},$scope.onFilterGroupTitleSelectionChange=function(groupIsSelected,group){_this.onFilterGroupTitleSelectionChangeHandler(groupIsSelected,group)},$scope.onFilterGroupMemberSelectionChange=function(selected,member){_this.onFilterGroupMemberSelectionChangeHandler(selected,member)},$scope.$watch("eventStreamItemFilter",function(){EventFiltersController.DEBUG&&ADLoggerService.warn("EventFiltersController.watch.eventStreamItemFilter Debug: Watch fired with filter "+$scope.eventStreamItemFilter),$scope.eventStreamItemFilter&&$scope.eventStreamItemFilter!=_this.eventStreamItemFilter&&(EventFiltersController.DEBUG&&ADLoggerService.warn("EventFiltersController.watch.eventStreamItemFilter Debug: ... processed watch with new eventStreamItemFilter"),_this.eventStreamItemFilter=$scope.eventStreamItemFilter,_this.finishViewState())}),$scope.$watch("filterOverrides",function(){$scope.filterOverrides&&(EventFiltersController.DEBUG&&ADLoggerService.warn("EventFiltersController.watch.filterOverrides Debug: Watch fired."),_this.filterOverrides=$scope.filterOverrides,_this.applyFilterOverridesToViewState(_this.filterOverrides))},!0),$scope.$watch("appId",function(){EventFiltersController.DEBUG&&ADLoggerService.warn("EventFiltersController.watch.appId Debug: Watch fired with appId "+$scope.appId),$scope.appId&&_this._appId!=$scope.appId&&(_this._appId=$scope.appId,_this.viewState.selectErrorsFlyoutGridOptions&&(_this.viewState.selectErrorsFlyoutGridOptions.dataProvider=[],_this.viewState.selectedErrorsGridOptions.dataProvider=[],_this.viewState.selectBTsFlyoutGridOptions.dataProvider=[],_this.viewState.selectedBTsGridOptions.dataProvider=[],_this.fetchData()))}),$scope.$on(EventFiltersController.CLEAR_CRITERIA,function(){EventFiltersController.DEBUG&&ADLoggerService.warn("EventFiltersController.on.CLEAR_CRITERIA Debug: Watch fired."),$scope.controller.setAllEventTypeCheckboxes(!1),$scope.controller.setAllTierNodeCheckboxes(!1),$scope.controller.setAllPolicyCheckboxes(!1),$scope.controller.viewState.selectedErrorsGridOptions.dataProvider=[],$scope.controller.viewState.selectedBTsGridOptions.dataProvider=[],$scope.controller.viewState.customEventFilterGridOptions.dataProvider=[],$scope.controller.eventStreamItemFilter.customEventFilters=[]}),$scope.$on(EventFiltersController.UPDATE_EVENT_FILTER,function(){EventFiltersController.DEBUG&&ADLoggerService.warn("EventFiltersController.on.UPDATE_EVENT_FILTER Debug: $on fired."),$scope.controller.updateEventFilters()}),EventFiltersController.DEBUG_SCOPE&&(ADLoggerService.warn("EventFiltersController.constructor Debug: Scope is "+$scope.$id),$scope.$on("$destroy",function(){ADLoggerService.warn("EventFiltersController.on.$destroy Debug: Destroy called on "+$scope.$id)}))}return __extends(EventFiltersController,_super),EventFiltersController.prototype.initViewState=function(){var _this=this;this.viewState=new EventFiltersViewState,this.viewState.appId=this._appId,this.viewState.eventStreamViewData=this.getDefaultEventStreamViewData();var resultHandler=function(response){var result=_this.eventsUiService.getDefaultEventFilterViewData_response(response);_this.viewState.viewData=result,_this.setupGridOptions(),_this.fetchData()};this.eventsUiService.getDefaultEventFilterViewData().then(resultHandler)},EventFiltersController.prototype.finishViewState=function(){this.filterOverrides?this.applyFilterOverridesToViewState(this.filterOverrides):this.eventStreamItemFilter&&(this.applyStreamItemFilterToViewState(this.eventStreamItemFilter),EventFiltersController.DEBUG_OBJECTS&&this.dumpViewDataAndStreamItemFilterToConsole("EventFiltersController.applyStreamItemFilterToViewState BEFORE"),this.setEventListFilterGroups(),EventFiltersController.DEBUG_OBJECTS&&this.dumpViewDataAndStreamItemFilterToConsole("EventFiltersController.applyStreamItemFilterToViewState AFTER"))},EventFiltersController.prototype.fetchSelectableErrors=function(){var _this=this;this.viewState.selectErrorsFlyoutGridOptions.loading=!0;var errorQueryFilter={applicationId:this._appId,types:["ERROR"]};UserUiService.instance().getApplicationDiagnosticDatas(errorQueryFilter).then(function(response){var errors=UserUiService.instance().getApplicationDiagnosticDatas_response(response);Util.removeWhere(errors,_this.viewState.selectedErrorsGridOptions.dataProvider),_this.applyErrorsResponseToViewState(errors),_this.viewState.selectErrorsFlyoutGridOptions.loading=!1})},EventFiltersController.prototype.fetchSelectableBTs=function(){var _this=this;this.viewState.selectBTsFlyoutGridOptions.loading=!0,BusinessTransactionUiService.instance().getBusinessTransactions(this._appId).then(function(response){var bts=BusinessTransactionUiService.instance().getBusinessTransactions_response(response);Util.removeWhere(bts,_this.viewState.selectedBTsGridOptions.dataProvider),_this.applyBTsResponseToViewState(bts),_this.viewState.selectBTsFlyoutGridOptions.loading=!1})},EventFiltersController.prototype.fetchData=function(){var applyMetaDataToViewState=function(){var metaData=this.eventFilterCache.getEventFiltersMetaDataByAppId(this._appId);this.applyComponentsResponseToViewState(metaData.components),this.applyNodesResponseToViewState(metaData.nodes),this.applyPoliciesResponseToViewState(metaData.policyTemplates),this.finishViewState()}.bind(this);Util.isValidId(this._appId)?(EventFiltersController.DEBUG&&ADLoggerService.warn("EventFiltersController.fetchData Debug: About to get server data."),this.eventFilterCache.getEventFiltersMetaDataByAppId(this._appId)?applyMetaDataToViewState():this.eventFilterCache.fetchEventFiltersMetaData(this._appId,applyMetaDataToViewState)):ADLoggerService.warn("EventFiltersController.fetchData Debug: appId NOT SET, skipping fetch data.")},EventFiltersController.prototype.applyErrorsResponseToViewState=function(errors){var _this=this;this.viewState.selectErrorsFlyoutGridOptions.dataProvider=_.map(errors,function(error){return{id:error.id,name:error.name,tier:_this.viewState.applicationTierNameMap[error.applicationComponentId]||"-",icon:ImageUtil.iconNavErrors}})},EventFiltersController.prototype.applyBTsResponseToViewState=function(businessTransactions){this.viewState.selectBTsFlyoutGridOptions.dataProvider=_.map(businessTransactions,function(bt){return{name:bt.name,id:bt.id,tier:bt.applicationComponentName,icon:ImageUtil.getIconForBusinessTransactionType2(bt)}})},EventFiltersController.prototype.applyPoliciesResponseToViewState=function(policyTemplates){var policies=_.map(policyTemplates,function(policy){return PolicyTemplateUtil.modifyCriteriaTypeForPolicy(policy),{name:policy.name,id:policy.id,type:policy.type}}),policyMap={};if(policies){this.viewState.viewData.policies=[];for(var i=0;i<policies.length;i++){var newPolicy={id:policies[i].id,name:policies[i].name,filterType:EventFiltersController.FILTER_TYPE_POLICIES};policyMap[policies[i].type]?policyMap[policies[i].type].push(newPolicy):policyMap[policies[i].type]=[newPolicy],this.viewState.applicationPolicySelections[policies[i].id]=!0}}for(var policyGroupTitles=Object.keys(policyMap),i=0;i<policyGroupTitles.length;i++){var group={id:-1,title:this.getPolicyGroupTitle(policyGroupTitles[i]),filterType:EventFiltersController.FILTER_TYPE_POLICIES,members:policyMap[policyGroupTitles[i]],isOpen:!1,isSelected:!0,isSelectedPartially:!1};this.viewState.viewData.policies.push(group)}},EventFiltersController.prototype.applyComponentsResponseToViewState=function(components){this.viewState.viewData.tierNodeFilterGroups=[];for(var i=0;i<components.length;i++)this.viewState.viewData.tierNodeFilterGroups.push({id:components[i].id,title:components[i].name,filterType:EventFiltersController.FILTER_TYPE_TIER_NODE,members:[],isOpen:!1,isSelected:!1,isSelectedPartially:!1}),this.viewState.applicationTierNameMap[components[i].id]=components[i].name},EventFiltersController.prototype.applyNodesResponseToViewState=function(nodes){for(var applicationNodes=_.map(nodes,function(node){return{name:node.name,id:node.id,tier:node.applicationComponentName,isSelected:!1}}),i=0;i<applicationNodes.length;i++)for(var j=0;j<this.viewState.viewData.tierNodeFilterGroups.length;j++)applicationNodes[i].tier==this.viewState.viewData.tierNodeFilterGroups[j].title&&this.viewState.viewData.tierNodeFilterGroups[j].members.push({id:applicationNodes[i].id,name:applicationNodes[i].name,filterType:EventFiltersController.FILTER_TYPE_TIER_NODE});for(var i=0;i<applicationNodes.length;i++)this.viewState.applicationNodeSelections[applicationNodes[i].id]=!1},EventFiltersController.prototype.applyStreamItemFilterErrorIdsToViewState=function(){var _this=this;if(this.viewState.selectedErrorsGridOptions.dataProvider=[],this.eventStreamItemFilter.errorIDs){var errorQueryFilter={applicationId:this._appId,types:["ERROR"],applicationDiagnosticDataIds:this.eventStreamItemFilter.errorIDs};UserUiService.instance().getApplicationDiagnosticDatas(errorQueryFilter).then(function(response){var selectedErrors=UserUiService.instance().getApplicationDiagnosticDatas_response(response);_.forEach(selectedErrors,function(error){ComponentUiService.instance().getComponent(error.applicationComponentId).then(function(response){var component=ComponentUiService.instance().getComponent_response(response);_this.viewState.selectedErrorsGridOptions.dataProvider.push({id:error.id,name:error.name,tier:component.name,icon:ImageUtil.iconNavErrors})})})})}},EventFiltersController.prototype.applyStreamItemFilterPolicyIdsToViewState=function(){if(this.viewState.applicationPolicySelections=[],this.eventStreamItemFilter.policyIds)for(var i=0;i<this.eventStreamItemFilter.policyIds.length;i++){var policyId=this.eventStreamItemFilter.policyIds[i];this.viewState.applicationPolicySelections[policyId]=!0}},EventFiltersController.prototype.applyStreamItemFilterCustomEventFiltersToViewState=function(){if(this.viewState.customEventFilterGridOptions.dataProvider=[],this.eventStreamItemFilter.custom&&this.eventStreamItemFilter.customEventFilters)for(var i=0;i<this.eventStreamItemFilter.customEventFilters.length;i++){var filter=this.eventStreamItemFilter.customEventFilters[i];this.viewState.customEventFilterGridOptions.dataProvider.push({customEventType:filter.customEventType,propertyBooleanOperator:filter.propertyBooleanOperator,properties:filter.properties})}},EventFiltersController.prototype.applyStreamItemFilterBtIdsToViewState=function(){var _this=this;this.viewState.selectedBTsGridOptions.dataProvider=[],this.eventStreamItemFilter.businessTransactionIds&&BusinessTransactionUiService.instance().getBusinessTransactionsByIds(this.eventStreamItemFilter.businessTransactionIds,this._appId).then(function(response){var bts=BusinessTransactionUiService.instance().getBusinessTransactionsByIds_response(response);_this.viewState.selectedBTsGridOptions.dataProvider=_.map(bts,function(bt){return{id:bt.id,name:bt.name,tier:bt.applicationComponentName||MetricUtil.NO_DATA_DISPLAY_STRING,icon:ImageUtil.getIconForBusinessTransactionType2(bt)}})})},EventFiltersController.prototype.applyStreamItemFilterComponentNodeIdsToViewState=function(){if(this.setAllTierNodeCheckboxes(!1),this.eventStreamItemFilter.applicationComponentNodeIds)for(var i=0;i<this.eventStreamItemFilter.applicationComponentNodeIds.length;i++){var nodeId=this.eventStreamItemFilter.applicationComponentNodeIds[i];this.viewState.applicationNodeSelections[nodeId]=!0}},EventFiltersController.prototype.applyStreamItemFilterToViewState=function(eventStreamItemFilter){eventStreamItemFilter&&this.viewState&&this.viewState.viewData&&this.viewState.eventStreamViewData&&(this.viewState.eventStreamViewData.eventStreamItemFilter=angular.copy(eventStreamItemFilter),this.checkAll(this.viewState.eventStreamViewData.eventStreamItemFilter,!0)&&this.setAll(this.viewState.eventStreamViewData.eventStreamItemFilter,!1),this.applyStreamItemFilterErrorIdsToViewState(),this.applyStreamItemFilterPolicyIdsToViewState(),this.applyStreamItemFilterCustomEventFiltersToViewState(),this.applyStreamItemFilterBtIdsToViewState(),this.applyStreamItemFilterComponentNodeIdsToViewState())},EventFiltersController.prototype.applyFilterOverridesToViewState=function(flags){if(flags&&this.viewState&&this.viewState.viewData&&this.viewState.eventStreamViewData){var eventType=flags.eventType,btId=flags.businessTransactionId,componentId=flags.componentId,nodeId=flags.nodeId;if(eventType.length>0){if(eventType=EventUtil.UEV_VIEW_EVENTS_EVENT_PREFIX+eventType,eventType==EventConstants.UEV_VIEW_EVENTS_ALL)return;this.openAllAccordions(!1),this.setAllEventTypeCheckboxes(!1),this.setAllTierNodeCheckboxes(!1),this.setAllPolicyCheckboxes(!1);var groupTitle="";if(-1==eventType.indexOf(EventUtil.POLICY_EVENT_TYPE_PREFIX)){switch(eventType){case EventConstants.UEV_VIEW_EVENTS_CUSTOM:this.eventStreamItemFilter.custom=!0;break;case EventConstants.UEV_VIEW_EVENTS_CODE_PROBLEMS:groupTitle="ms_eventCategory_codeProblems";break;case EventConstants.UEV_VIEW_EVENTS_APP_CHANGES:groupTitle="ms_eventCategory_appChanges";break;case EventConstants.UEV_VIEW_EVENTS_INFRA_CHANGES:groupTitle="ms_eventCategory_infraEvents";break;case EventConstants.UEV_VIEW_EVENTS_AD_CONFIG:groupTitle="ms_eventCategory_adConfigWarnings"}this.setEventTypeCheckboxByGroupTitle(groupTitle,EventFiltersController.FILTER_TYPE_EVENT_TYPES)}else{switch(this.viewState.viewData.policyViolations[0].isSelectedPartially=!0,this.viewState.viewData.policyViolations[0].isOpen=!0,this.viewState.eventStreamViewData.eventStreamItemFilter.policyViolationStartedWarning=!0,this.viewState.eventStreamViewData.eventStreamItemFilter.policyViolationStartedCritical=!0,eventType){case EventConstants.UEV_VIEW_EVENTS_POLICY:for(var i=0;i<this.viewState.viewData.policies.length;i++){var policyGroup=this.viewState.viewData.policies[i];policyGroup.isSelected=!0}break;case EventConstants.UEV_VIEW_EVENTS_POLICY_BT:groupTitle=PolicyTemplateType.BUSINESS_TRANSACTION;break;case EventConstants.UEV_VIEW_EVENTS_POLICY_OVERALL_APP:groupTitle=PolicyTemplateType.OVERALL_APPLICATION;break;case EventConstants.UEV_VIEW_EVENTS_POLICY_NODE:this.setEventTypeCheckboxByGroupTitle(PolicyTemplateType.NODE_HEALTH_TRANSACTION_PERFORMANCE,EventFiltersController.FILTER_TYPE_POLICIES),this.setEventTypeCheckboxByGroupTitle(PolicyTemplateType.INFRASTRUCTURE,EventFiltersController.FILTER_TYPE_POLICIES),this.setEventTypeCheckboxByGroupTitle(PolicyTemplateType.JMX,EventFiltersController.FILTER_TYPE_POLICIES);break;case EventConstants.UEV_VIEW_EVENTS_POLICY_ERROR:groupTitle=PolicyTemplateType.ERROR;break;case EventConstants.UEV_VIEW_EVENTS_POLICY_INFORMATION_POINTS:groupTitle=PolicyTemplateType.INFORMATION_POINT;break;case EventConstants.UEV_VIEW_EVENTS_POLICY_BACKENDS:groupTitle=PolicyTemplateType.BACKEND;break;case EventConstants.UEV_VIEW_EVENTS_POLICY_CUSTOM:groupTitle=PolicyTemplateType.OTHER}eventType!=EventConstants.UEV_VIEW_EVENTS_POLICY&&eventType!=EventConstants.UEV_VIEW_EVENTS_POLICY_NODE&&this.setEventTypeCheckboxByGroupTitle(groupTitle,EventFiltersController.FILTER_TYPE_POLICIES)}}(Util.isValidId(btId)||Util.isValidId(componentId)||Util.isValidId(nodeId))&&(this.showObjectFilters=!1)}},EventFiltersController.prototype.setupGridOptions=function(){var gridColumns=[new GridColumn({width:"10%",align:"right",dataIndex:"icon",header:"",renderer:this.renderIcon}),new GridColumn({width:"35%",align:"left",dataIndex:"name",header:"Name"}),new GridColumn({width:"55%",align:"left",dataIndex:"tier",header:"Tier"})];this.viewState.selectErrorsFlyoutGridOptions=new GridOptions,this.viewState.selectErrorsFlyoutGridOptions.columnProvider=gridColumns,this.viewState.selectErrorsFlyoutGridOptions.dataProvider=[],this.viewState.selectErrorsFlyoutGridOptions.multiSelect=!0,this.viewState.selectErrorsFlyoutGridOptions.filterString=this.viewState.errorSelectorFilterString,this.viewState.selectErrorsFlyoutGridOptions.filterFunction=this.errorFlyoutFilterFunction.bind(this),this.viewState.selectedErrorsGridOptions=new GridOptions,this.viewState.selectedErrorsGridOptions.columnProvider=gridColumns,this.viewState.selectedErrorsGridOptions.dataProvider=[],this.viewState.selectedErrorsGridOptions.multiSelect=!0,this.viewState.selectedErrorsGridOptions.emptyText=this.getString("ms_noExceptionsSelected"),this.viewState.selectBTsFlyoutGridOptions=new GridOptions,this.viewState.selectBTsFlyoutGridOptions.columnProvider=gridColumns,this.viewState.selectBTsFlyoutGridOptions.dataProvider=[],this.viewState.selectBTsFlyoutGridOptions.multiSelect=!0,this.viewState.selectBTsFlyoutGridOptions.filterString=this.viewState.btSelectorFilterString,this.viewState.selectBTsFlyoutGridOptions.filterFunction=this.btFlyoutFilterFunction.bind(this),this.viewState.selectedBTsGridOptions=new GridOptions,this.viewState.selectedBTsGridOptions.columnProvider=gridColumns,this.viewState.selectedBTsGridOptions.dataProvider=[],this.viewState.selectedBTsGridOptions.multiSelect=!0,this.viewState.selectedBTsGridOptions.emptyText=this.getString("ms_noTransactionsSelected");var customEventFilterGridColumns=[new GridColumn({width:"25%",align:"left",dataIndex:"customEventType",header:"Type"}),new GridColumn({width:"75%",align:"left",dataIndex:"properties",header:"Properties",renderer:this.customEventPropertiesRenderer})];this.viewState.customEventFilterGridOptions=new GridOptions,this.viewState.customEventFilterGridOptions.columnProvider=customEventFilterGridColumns,this.viewState.customEventFilterGridOptions.dataProvider=this.eventStreamItemFilter?_.map(this.eventStreamItemFilter.customEventFilters,function(filter){return{customEventType:filter.customEventType,propertyBooleanOperator:filter.propertyBooleanOperator,properties:filter.properties}}):[],this.viewState.customEventFilterGridOptions.multiSelect=!1,this.viewState.customEventFilterGridOptions.emptyText=this.getString("ms_noCustomEventsSelected")},EventFiltersController.prototype.updateEventFilters=function(){if(this.eventStreamItemFilter){EventFiltersController.DEBUG_OBJECTS&&this.dumpViewDataAndStreamItemFilterToConsole("EventsFiltersController.updateEventFilters");for(var anyEventTypesSelected=this.viewState.eventStreamViewData.eventStreamItemFilter.allError||this.viewState.viewData.policyViolations[0].isSelected||this.viewState.viewData.policyViolations[0].isSelectedPartially||this.viewState.viewData.slowRequests[0].isSelected||this.viewState.viewData.slowRequests[0].isSelectedPartially||this.viewState.customEventFilterGridOptions.dataProvider.length>0,i=0;i<this.viewState.viewData.eventTypes.length;i++)anyEventTypesSelected=anyEventTypesSelected||this.viewState.viewData.eventTypes[i].isSelectedPartially||this.viewState.viewData.eventTypes[i].isSelected;if(anyEventTypesSelected?(EventFiltersController.DEBUG_OBJECTS&&ADLoggerService.warn("About to angular.copy eventStreamItemFilter."),this.eventStreamItemFilter=angular.copy(this.viewState.eventStreamViewData.eventStreamItemFilter)):this.setAll(this.eventStreamItemFilter,!0),EventFiltersController.DEBUG&&ADLoggerService.warn("EventsFiltersController.updateEventFilters Debug: Saving appId "+this._appId),this.eventStreamItemFilter.applicationIds=[],this.eventStreamItemFilter.applicationIds.push(this._appId),this.eventStreamItemFilter.timeRange=this.timeRangeService.currentTimeRange,this.eventStreamItemFilter.errorIDs=[],this.viewState.selectedErrorsGridOptions.dataProvider)for(var i=0;i<this.viewState.selectedErrorsGridOptions.dataProvider.length;i++){var errorId=this.viewState.selectedErrorsGridOptions.dataProvider[i].id;
-1!=errorId&&this.eventStreamItemFilter.errorIDs.push(errorId)}this.eventStreamItemFilter.policyIds=[];var selectedPolicyIds=Object.keys(this.viewState.applicationPolicySelections);if(selectedPolicyIds)for(var i=0;i<selectedPolicyIds.length;i++){var policyId=selectedPolicyIds[i];this.viewState.applicationPolicySelections[policyId]&&this.eventStreamItemFilter.policyIds.push(+policyId)}if(this.eventStreamItemFilter.customEventFilters=[],this.viewState.customEventFilterGridOptions.dataProvider.length>0){this.eventStreamItemFilter.custom=!0;for(var i=0;i<this.viewState.customEventFilterGridOptions.dataProvider.length;i++)this.eventStreamItemFilter.customEventFilters.push(this.viewState.customEventFilterGridOptions.dataProvider[i])}if(this.eventStreamItemFilter.businessTransactionIds=[],this.viewState.selectedBTsGridOptions.dataProvider)for(var i=0;i<this.viewState.selectedBTsGridOptions.dataProvider.length;i++){var btId=this.viewState.selectedBTsGridOptions.dataProvider[i].id;-1!=btId&&this.eventStreamItemFilter.businessTransactionIds.push(btId)}this.eventStreamItemFilter.applicationComponentIds=[];for(var i=0;i<this.viewState.viewData.tierNodeFilterGroups.length;i++){var component=this.viewState.viewData.tierNodeFilterGroups[i];component.isSelected&&this.eventStreamItemFilter.applicationComponentIds.push(component.id)}this.eventStreamItemFilter.applicationComponentNodeIds=[];var selectedNodeIds=Object.keys(this.viewState.applicationNodeSelections);if(selectedNodeIds)for(var i=0;i<selectedNodeIds.length;i++){var nodeId=selectedNodeIds[i];this.viewState.applicationNodeSelections[nodeId]&&this.eventStreamItemFilter.applicationComponentNodeIds.push(+nodeId)}this.filterOverrides&&(Util.isValidId(this.filterOverrides.businessTransactionId)&&this.eventStreamItemFilter.businessTransactionIds.push(this.filterOverrides.businessTransactionId),Util.isValidId(this.filterOverrides.componentId)&&this.eventStreamItemFilter.applicationComponentIds.push(this.filterOverrides.componentId),Util.isValidId(this.filterOverrides.nodeId)&&this.eventStreamItemFilter.applicationComponentNodeIds.push(this.filterOverrides.nodeId)),EventFiltersController.DEBUG&&ADLoggerService.warn("EventsFiltersController.updateEventFilters Debug: Sending out EVENT_FILTER_UPDATED."),this.$rootScope.$broadcast(EventFiltersController.EVENT_FILTER_UPDATED,this.eventStreamItemFilter),this.$scope.adEventFilterChanged&&this.$scope.adEventFilterChanged({value:this.eventStreamItemFilter})}},EventFiltersController.prototype.setAll=function(eventStreamItemFilter,value){if(eventStreamItemFilter)for(var i=0;i<EventFiltersController.EVENT_STREAM_ITEM_FILTER_FIELDS.length;i++)eventStreamItemFilter[EventFiltersController.EVENT_STREAM_ITEM_FILTER_FIELDS[i]]=value},EventFiltersController.prototype.checkAll=function(itemFilter,checkValue){void 0===checkValue&&(checkValue=!1);var result=!0;if(0==checkValue){for(var i=0;i<EventFiltersController.EVENT_STREAM_ITEM_FILTER_FIELDS.length;i++)if(Util.isDefAndNotNull(itemFilter[EventFiltersController.EVENT_STREAM_ITEM_FILTER_FIELDS[i]])&&1==itemFilter[EventFiltersController.EVENT_STREAM_ITEM_FILTER_FIELDS[i]]){result=!1;break}}else for(var i=0;i<EventFiltersController.EVENT_STREAM_ITEM_FILTER_FIELDS.length;i++)if(!itemFilter[EventFiltersController.EVENT_STREAM_ITEM_FILTER_FIELDS[i]]){result=!1;break}return result},EventFiltersController.prototype.getEventTypeFilterDisplayString=function(key){return key?this.getString(EventUtil.EVENT_TYPE_TO_STRING_MAP[key]):""},EventFiltersController.prototype.getLabel=function(keyOrText){return keyOrText?0==keyOrText.indexOf("ms_")?this.resourceManager.getString("ui",keyOrText):keyOrText:""},EventFiltersController.prototype.getPolicyGroupTitle=function(policyTemplateType){return this.getString("ms_columnPolicyType_"+policyTemplateType)+" Health Rules"},EventFiltersController.prototype.setAllEventTypeCheckboxes=function(value){this.viewState.isErrorSelectorOpen=value,this.viewState.eventStreamViewData.eventStreamItemFilter.allError=value,this.viewState.viewData.policyViolations[0].isSelectedPartially=!1,this.viewState.viewData.policyViolations[0].isSelected=value;for(var i=0;i<this.viewState.viewData.policyViolations[0].members.length;i++){var event=this.viewState.viewData.policyViolations[0].members[i];this.viewState.eventStreamViewData.eventStreamItemFilter[event.name]=value}this.viewState.viewData.slowRequests[0].isSelectedPartially=!1,this.viewState.viewData.slowRequests[0].isSelected=value;for(var i=0;i<this.viewState.viewData.slowRequests[0].members.length;i++){var event=this.viewState.viewData.slowRequests[0].members[i];this.viewState.eventStreamViewData.eventStreamItemFilter[event.name]=value}for(var i=0;i<this.viewState.viewData.eventTypes.length;i++)this.viewState.viewData.eventTypes[i].isSelectedPartially=!1,this.viewState.viewData.eventTypes[i].isSelected=value;for(var i=0;i<this.viewState.viewData.eventTypes.length;i++)for(var group=this.viewState.viewData.eventTypes[i],j=0;j<group.members.length;j++)this.viewState.eventStreamViewData.eventStreamItemFilter[group.members[j].name]=value},EventFiltersController.prototype.setAllTierNodeCheckboxes=function(value){for(var i=0;i<this.viewState.viewData.tierNodeFilterGroups.length;i++){var component=this.viewState.viewData.tierNodeFilterGroups[i];component.isSelectedPartially=!1,component.isSelected=value;for(var j=0;j<component.members.length;j++)this.viewState.applicationNodeSelections[component.members[j].id]=value}},EventFiltersController.prototype.setAllPolicyCheckboxes=function(value){for(var i=0;i<this.viewState.viewData.policies.length;i++){var policyGroup=this.viewState.viewData.policies[i];policyGroup.isSelectedPartially=!1,policyGroup.isSelected=value;for(var j=0;j<policyGroup.members.length;j++)this.viewState.applicationPolicySelections[policyGroup.members[j].id]=value}},EventFiltersController.prototype.openAllAccordions=function(value){this.viewState.isErrorSelectorOpen=value,this.viewState.viewData.policyViolations[0].isOpen=value,this.viewState.viewData.slowRequests[0].isOpen=value;for(var i=0;i<this.viewState.viewData.policies.length;i++)this.viewState.viewData.policies[i].isOpen=value;for(var i=0;i<this.viewState.viewData.eventTypes.length;i++)this.viewState.viewData.eventTypes[i].isOpen=value;this.viewState.isBtSelectorOpen=value,this.viewState.isTierNodeSelectorOpen=value;for(var i=0;i<this.viewState.viewData.tierNodeFilterGroups.length;i++)this.viewState.viewData.tierNodeFilterGroups[i].isOpen=value},EventFiltersController.prototype.fillSelector=function(allItems,flyoutId){for(var itemsToAdd=[],i=0;i<allItems.length;i++)itemsToAdd.push({data:allItems[i]});this.$rootScope.$broadcast(Flyout.ADD_EVENT,itemsToAdd,flyoutId)},EventFiltersController.prototype.onFilterGroupTitleSelectionChangeHandler=function(groupIsSelected,group){group.isSelectedPartially=!1,group.isSelected=groupIsSelected;var filterGroups=this.viewState.viewData[group.filterType];if(filterGroups)for(var i=0;i<filterGroups.length;i++)if(filterGroups[i].title==group.title){for(var j=0;j<filterGroups[i].members.length;j++){var member=filterGroups[i].members[j];group.filterType==EventFiltersController.FILTER_TYPE_EVENT_TYPES||group.filterType==EventFiltersController.FILTER_TYPE_POLICY_VIOLATIONS||group.filterType==EventFiltersController.FILTER_TYPE_SLOW_REQUESTS?this.viewState.eventStreamViewData.eventStreamItemFilter[member.name]=groupIsSelected:group.filterType==EventFiltersController.FILTER_TYPE_POLICIES?this.viewState.applicationPolicySelections[member.id]=groupIsSelected:group.filterType==EventFiltersController.FILTER_TYPE_TIER_NODE&&(this.viewState.applicationNodeSelections[member.id]=groupIsSelected)}break}},EventFiltersController.prototype.onFilterGroupMemberSelectionChangeHandler=function(selected,member){var filterGroups=this.viewState.viewData[member.filterType];if(filterGroups)for(var i=0;i<filterGroups.length;i++){var group=filterGroups[i];if(group.members&&group.members.length>0)for(var j=0;j<group.members.length;j++)if(member.name==group.members[j].name){for(var allSelected=selected,anySelected=selected,k=0;k<group.members.length;k++)if(j!=k){var memberIsSelected=!1;member.filterType==EventFiltersController.FILTER_TYPE_EVENT_TYPES||member.filterType==EventFiltersController.FILTER_TYPE_POLICY_VIOLATIONS||member.filterType==EventFiltersController.FILTER_TYPE_SLOW_REQUESTS?memberIsSelected=this.viewState.eventStreamViewData.eventStreamItemFilter[group.members[k].name]:member.filterType==EventFiltersController.FILTER_TYPE_POLICIES?memberIsSelected=this.viewState.applicationPolicySelections[group.members[k].id]:member.filterType==EventFiltersController.FILTER_TYPE_TIER_NODE&&(memberIsSelected=this.viewState.applicationNodeSelections[group.members[k].id]),allSelected=allSelected&&memberIsSelected,anySelected=anySelected||memberIsSelected}allSelected?(group.isSelectedPartially=!1,group.isSelected=allSelected):anySelected?group.isSelectedPartially=!0:(group.isSelectedPartially=!1,group.isSelected=anySelected)}}},EventFiltersController.prototype.onEditSelectedCustomEventFilter=function(){this.onViewCustomEventFilterEditor(CustomFilterEditorController.CustomFilterEditorController.MODE_EDIT,this.selectedCustomEventFilterItems[0].data)},EventFiltersController.prototype.onAddCustomEventFilters=function(){this.onViewCustomEventFilterEditor(CustomFilterEditorController.CustomFilterEditorController.MODE_ADD)},EventFiltersController.prototype.onViewCustomEventFilterEditor=function(mode,data){void 0===data&&(data=null);var customFilterEditorDialogData={dialogMode:mode,item:data};customFilterEditorDialogData.callbackFn=angular.bind(this,this.saveCustomEventFilterToEventStreamItemFilter,mode,customFilterEditorDialogData,data),DialogService.instance().showDialog(CustomFilterEditorController.CustomFilterEditorController,"app/view/components/eventFilters/CustomFilterEditorController","app/view/components/eventFilters/CustomFilterEditor.html",customFilterEditorDialogData)},EventFiltersController.prototype.saveCustomEventFilterToEventStreamItemFilter=function(mode,customFilterEditorDialogData,oldFilter){if(mode==CustomFilterEditorController.CustomFilterEditorController.MODE_ADD)this.eventStreamItemFilter.customEventFilters||(this.eventStreamItemFilter.customEventFilters=[]),this.eventStreamItemFilter.customEventFilters.push(customFilterEditorDialogData.item);else if(mode==CustomFilterEditorController.CustomFilterEditorController.MODE_EDIT){for(var index=-1,i=0;i<this.eventStreamItemFilter.customEventFilters.length;i++){var filter=this.eventStreamItemFilter.customEventFilters[i];filter.customEventType==oldFilter.customEventType&&(index=i)}index>-1&&(this.eventStreamItemFilter.customEventFilters[index]=customFilterEditorDialogData.item)}this.viewState.customEventFilterGridOptions.dataProvider=this.eventStreamItemFilter.customEventFilters,this.viewState.customEventFilterGridOptions.dataProvider=angular.copy(this.viewState.customEventFilterGridOptions.dataProvider)},EventFiltersController.prototype.onRemoveSelectedCustomEventFilter=function(){for(var filterToRemove=this.selectedCustomEventFilterItems[0].raw,index=-1,i=0;i<this.eventStreamItemFilter.customEventFilters.length;i++){var filter=this.eventStreamItemFilter.customEventFilters[i];filter.customEventType==filterToRemove.customEventType&&(index=i)}this.eventStreamItemFilter.customEventFilters.splice(index,1),this.viewState.customEventFilterGridOptions.dataProvider=this.eventStreamItemFilter.customEventFilters,this.viewState.customEventFilterGridOptions.dataProvider=angular.copy(this.viewState.customEventFilterGridOptions.dataProvider)},EventFiltersController.prototype.setEventTypeCheckboxByGroupTitle=function(groupTitle,filterType){filterType==EventFiltersController.FILTER_TYPE_POLICIES&&(groupTitle=this.getPolicyGroupTitle(groupTitle));for(var i=0;i<this.viewState.viewData[filterType].length;i++)if(groupTitle==this.viewState.viewData[filterType][i].title){var group=this.viewState.viewData[filterType][i];group.isOpen=filterType==EventFiltersController.FILTER_TYPE_EVENT_TYPES,group.isSelected=!0;for(var j=0;j<group.members.length;j++)filterType==EventFiltersController.FILTER_TYPE_POLICIES?this.viewState.applicationPolicySelections[group.members[j].id]=!0:filterType==EventFiltersController.FILTER_TYPE_EVENT_TYPES&&(this.viewState.eventStreamViewData.eventStreamItemFilter[group.members[j].name]=!0)}},EventFiltersController.prototype.renderIcon=function(val){return"<img src='"+val+"'/>"},EventFiltersController.prototype.customEventPropertiesRenderer=function(val,meta,record){var s="",customEventFilter=record.raw,nameValuePairs=customEventFilter.properties;if(nameValuePairs&&nameValuePairs.length>0){for(var i=0;i<nameValuePairs.length;i++)i>0&&(s+=" "+customEventFilter.propertyBooleanOperator+" "),s+=nameValuePairs[i].name+" = "+nameValuePairs[i].value;return s}return"(none)"},EventFiltersController.prototype.errorFlyoutFilterFunction=function(item){return this.gridFilterFunction(item,this.viewState.selectErrorsFlyoutGridOptions)},EventFiltersController.prototype.btFlyoutFilterFunction=function(item){return this.gridFilterFunction(item,this.viewState.selectBTsFlyoutGridOptions)},EventFiltersController.prototype.gridFilterFunction=function(item,gridOptions){if(!item||!item.data||!item.data.name)return!0;if(!gridOptions||!gridOptions.filterString)return!0;var index=item.data.name.toLowerCase().indexOf(gridOptions.filterString.toLowerCase());return index>-1},EventFiltersController.prototype.getDefaultEventStreamViewData=function(){var viewData=new EventStreamViewData;return viewData.eventStreamItemFilter=EventUtil.getDefaultEventsFilter(),EventFiltersController.DEBUG&&ADLoggerService.warn("EventFiltersController..getDefaultEventStreamViewData Debug: Returning default event stream view data."),viewData},EventFiltersController.prototype.setEventListFilterGroups=function(){var viewData=this.viewState.viewData,streamItemFilter=this.viewState.eventStreamViewData.eventStreamItemFilter;this.setEventListFilterGroupMembersFromStreamItemFilter(viewData.policyViolations,streamItemFilter),this.setEventListFilterGroupMembersFromStreamItemFilter(viewData.slowRequests,streamItemFilter),this.setEventListFilterGroupMembersFromStreamItemFilter(viewData.eventTypes,streamItemFilter),this.setEventListFilterGroupMembersFromViewStateSelections(viewData.policies,this.viewState.applicationPolicySelections),this.setEventListFilterGroupMembersFromViewStateSelections(viewData.tierNodeFilterGroups,this.viewState.applicationNodeSelections)},EventFiltersController.prototype.setEventListFilterGroupMembersFromViewStateSelections=function(filterGroups,selections){for(var i=0;i<filterGroups.length;i++){for(var group=filterGroups[i],someTrue=!1,someFalse=!1,j=0;j<group.members.length;j++){var member=group.members[j],memberId=""+member.id;memberId&&(void 0===selections[memberId]||null===selections[memberId]||selections[memberId]===!1?someFalse=!0:selections[memberId]===!0&&(someTrue=!0))}this.setGroupState(group,someTrue,someFalse)}},EventFiltersController.prototype.setEventListFilterGroupMembersFromStreamItemFilter=function(filterGroups,streamItemFilter){for(var i=0;i<filterGroups.length;i++){for(var group=filterGroups[i],someTrue=!1,someFalse=!1,j=0;j<group.members.length;j++){var member=group.members[j],memberName=member.name;memberName&&(void 0===streamItemFilter[memberName]||null===streamItemFilter[memberName]||streamItemFilter[memberName]===!1?someFalse=!0:streamItemFilter[memberName]===!0&&(someTrue=!0))}this.setGroupState(group,someTrue,someFalse)}},EventFiltersController.prototype.setGroupState=function(group,someTrue,someFalse){someTrue===!1?(group.isSelected=!1,group.isSelectedPartially=!1):someTrue===!0&&someFalse===!1?(group.isOpen=!0,group.isSelected=!0,group.isSelectedPartially=!1):(group.isOpen=!0,group.isSelected=!1,group.isSelectedPartially=!0)},EventFiltersController.prototype.dumpViewDataAndStreamItemFilterToConsole=function(prefix){ADLoggerService.warn(prefix+" Debug: viewState.btSelectorFilterString is: "+Util.stringifyWithIndent(this.viewState.btSelectorFilterString)),ADLoggerService.warn(prefix+" Debug: viewState.errorSelectorFilterString is: "+Util.stringifyWithIndent(this.viewState.errorSelectorFilterString)),ADLoggerService.warn(prefix+" Debug: viewState.applicationTierNameMap is: "+Util.stringifyWithIndent(this.viewState.applicationTierNameMap)),ADLoggerService.warn(prefix+" Debug: viewState.applicationNodeSelections is: "+Util.stringifyWithIndent(this.viewState.applicationNodeSelections)),ADLoggerService.warn(prefix+" Debug: viewState.applicationPolicySelections is: "+Util.stringifyWithIndent(this.viewState.applicationPolicySelections)),ADLoggerService.warn(prefix+" Debug: viewState.viewData is:"),ADLoggerService.warn(Util.stringifyWithIndent(this.viewState.viewData)),ADLoggerService.warn(prefix+" Debug: viewState.eventStreamViewData is:"),ADLoggerService.warn(Util.stringifyWithIndent(this.viewState.eventStreamViewData))},EventFiltersController.DEBUG=!1,EventFiltersController.DEBUG_SCOPE=!1,EventFiltersController.DEBUG_OBJECTS=!1,EventFiltersController.FILTER_TYPE_POLICY_VIOLATIONS="policyViolations",EventFiltersController.FILTER_TYPE_POLICIES="policies",EventFiltersController.FILTER_TYPE_SLOW_REQUESTS="slowRequests",EventFiltersController.FILTER_TYPE_EVENT_TYPES="eventTypes",EventFiltersController.FILTER_TYPE_TIER_NODE="tierNodeFilterGroups",EventFiltersController.ERROR_SELECTOR_FLYOUT_ID="ad-flyout-error-selector-options",EventFiltersController.BT_SELECTOR_FLYOUT_ID="ad-flyout-bt-selector-options",EventFiltersController.CLEAR_CRITERIA="CLEAR_CRITERIA",EventFiltersController.UPDATE_EVENT_FILTER="UPDATE_EVENT_FILTER",EventFiltersController.EVENT_FILTER_UPDATED="EVENT_FILTER_UPDATED",EventFiltersController.EVENT_STREAM_ITEM_FILTER_FIELDS=["policyViolationStartedWarning","policyViolationStartedCritical","policyViolationWarningToCritical","policyViolationCriticalToWarning","policyViolationContinuesCritical","policyViolationContinuesWarning","policyViolationEndedCritical","policyViolationEndedWarning","policyViolationCanceledCritical","policyViolationCanceledWarning","slowRequest","verySlowRequest","stalledRequest","allError","codeDeadlock","resourcePoolLimit","applicationDeployment","appServerRestart","appConfigChange","applicationCrash","clrCrash","license","controllerDiskSpaceLow","agentVersionNewerThanController","agentConfigurationError","agentEnabledDisabled","bytecodeTransformerLog","diagnosticSession","internalUIEvent","agentEvent","appDynamicsInternalDiagnostics","eumInternalError","memoryLeakDiagnostics","systemLog","activityTrace","objectContentSummary","appDynamicsData","azureAutoScaling","agentDiagnostics","memory","custom","applicationDiscovered","tierDiscovered","nodeDiscovered","machineDiscovered","btDiscovered","serviceEndpointDiscovered","backendDiscovered","syntheticBrowserEvent","syntheticAvailabilityHealthy","syntheticAvailabilityWarning","syntheticAvailabilityConfirmedWarning","syntheticAvailabilityOngoingWarning","syntheticAvailabilityError","syntheticAvailabilityConfirmedError","syntheticAvailabilityOngoingError"],EventFiltersController.$inject=["$scope","$rootScope","resourceManager","notificationService","sharedInjectorService","timeRangeService","eventsUiService"],EventFiltersController}(ControllerBase);exports.EventFiltersController=EventFiltersController,appdynamicsModule.controller("EventFiltersController",EventFiltersController)});var EventFilterCacheService=function(){function EventFilterCacheService(){this.appMetaDataMap={}}return EventFilterCacheService.instance=function(){return AngularUtil.getADInjector().get(EventFilterCacheService.SERVICE_NAME)},EventFilterCacheService.prototype.getEventFiltersMetaDataByAppId=function(appId){return this.appMetaDataMap[appId]},EventFilterCacheService.prototype.fetchEventFiltersMetaData=function(appId,afterFetchDataHandler){var _this=this;void 0===afterFetchDataHandler&&(afterFetchDataHandler=null),EventsUiService.instance().getEventFiltersMetaData(appId).then(function(response){_this.appMetaDataMap[appId]=EventsUiService.instance().getEventFiltersMetaData_response(response),afterFetchDataHandler&&afterFetchDataHandler()})},EventFilterCacheService.SERVICE_NAME="eventFilterCacheService",EventFilterCacheService}();adComponentsModule.service(EventFilterCacheService.SERVICE_NAME,EventFilterCacheService),define("app/view/components/eventFilters/EventFilterCacheService",function(){});var Flyout=function(){function Flyout($rootScope){return{restrict:"E",scope:{flyoutTitle:"@",flyoutId:"@",allItemsGridOptions:"=",alternateItemsGridOptions:"=",alternateItemsText:"=",adFlyoutFetchDataFunction:"&"},templateUrl:"app/view/components/flyoutSelector/Flyout.html",replace:!0,transclude:!1,link:function($scope){$scope.controller={},$scope.useAlternateItems=!1,$scope.controller.selectedItems=[],$scope.filterString=$scope.allItemsGridOptions.filterString,$scope.allItemsGridOptions.enableGridLoadingIndicator=!0,Util.isDefAndNotNull($scope.alternateItemsGridOptions)&&($scope.alternateItemsGridOptions.enableGridLoadingIndicator=!1),$scope.$watch("filterString",function(newValue,oldValue){newValue!=oldValue&&($scope.allItemsGridOptions.filterString=newValue,Util.isDefAndNotNull($scope.alternateItemsGridOptions)&&($scope.alternateItemsGridOptions.filterString=newValue))}),$scope.$watch("controller.selectedItems.length",function(newValue){$scope.isAddable=newValue&&newValue>0}),$scope.$watch("useAlternateItems",function(newValue,oldValue){newValue!=oldValue&&($scope.allItemsGridOptions.enableGridLoadingIndicator=!$scope.useAlternateItems,$scope.alternateItemsGridOptions.enableGridLoadingIndicator=$scope.useAlternateItems,ViewUtil.layoutAfterDigest())}),$scope.onAdd=function(){var gridOptions=$scope.useAlternateItems?$scope.alternateItemsGridOptions:$scope.allItemsGridOptions;gridOptions.dataProvider=angular.copy(gridOptions.dataProvider),$rootScope.$broadcast(Flyout.ADD_EVENT,$scope.controller.selectedItems,$scope.flyoutId),$scope.isAddable=!1,$scope.controller.selectedItems=null,$scope.$destroy(),$("#"+$scope.flyoutId).remove()},$scope.onCancel=function(){$rootScope.$broadcast(Flyout.ADD_EVENT,[],$scope.flyoutId),$scope.controller.selectedItems=null,$scope.$destroy(),$("#"+$scope.flyoutId).remove()},$scope.adFlyoutFetchDataFunction&&$scope.adFlyoutFetchDataFunction()}}}return Flyout.ADD_EVENT="ADD_EVENT",Flyout.$inject=["$rootScope"],Flyout}();adComponentsModule.directive(StringUtils.toCamelCase("ad-flyout-selector-options"),Flyout),define("app/view/components/flyoutSelector/FlyoutDirective",function(){});var AdExtTree=function(){function AdExtTree($rootScope){return{restrict:"E",scope:{itemExpand:"&",treeData:"=",treeConfig:"=",nodeData:"=",sortData:"=",onSelect:"&",onDoubleClick:"&",onBeforeSelect:"&",onDeselect:"&"},template:'<div style="width:100%;height:100%;overflow:hidden;" class="adExtGenTree"><div style="height:100%;width:100%"></div></div> ',replace:!0,transclude:!0,link:function(scope,iElement){function defaultConfig(){function errorCallback(){}function notifyCallback(){}return{animate:!1,border:0,lines:!1,rootVisible:!1,renderTo:innerDiv,useArrows:!0,store:null,multiSelect:!0,width:$(iElement).parent().width(),height:$(iElement).parent().height(),plugins:[{ptype:"bufferedrenderer",trailingBufferZone:20,leadingBufferZone:35}],listeners:{beforeitemexpand:function(node){if(!(node.childNodes.length>0)&&scope.itemExpand()){var originalIcon=node.get("iconCls");node.set("iconCls","adsNodeLoadingIcon");var promise=scope.itemExpand()(node.raw.id,node);promise.then(function(children){node.set("iconCls",originalIcon),children.length>0&&node.appendChild(children)},function(reason){node.set("loaded",!1),node.set("iconCls",originalIcon),node.collapse(),errorCallback(reason)},function(message){notifyCallback(message)})}},select:{fn:function(selModel,selected,index,eOpts){scope.onSelect&&scope.onSelect({selModel:selModel,selected:selected,index:index,eOpts:eOpts})}},itemdblclick:{fn:function(selModel,selected,item,index,event,eOpts){scope.onDoubleClick&&scope.onDoubleClick({selModel:selModel,selected:selected,index:index,eOpts:eOpts})}},beforeselect:{fn:function(selModel,selected,index,eOpts){return scope.onBeforeSelect?scope.onBeforeSelect({selModel:selModel,selected:selected,index:index,eOpts:eOpts}):!0}},deselect:{fn:function(selModel,selected,index,eOpts){scope.onDeselect&&scope.onDeselect({selModel:selModel,selected:selected,index:index,eOpts:eOpts})}}}}}function updateTreeLayout(){tree&&(tree.height=$(".x-panel",iElement).parent().height(),tree.width=$(".x-panel",iElement).parent().width(),tree.doLayout())}var tree,store,init=!0,innerDiv=$(iElement).children("div")[0],config=defaultConfig(),layoutHandler=null;angular.forEach(scope.treeConfig,function(value,key){config[key]=value}),scope.$watch("treeData",function(){scope.treeData&&(init?(store=Ext.create("Ext.data.TreeStore",scope.treeData),config.store=store,tree=Ext.create("Ext.tree.Panel",config),init=!1,updateTreeLayout()):(store.setRootNode(scope.treeData.root),updateTreeLayout()))}),layoutHandler=$rootScope.$on("layoutChanged",updateTreeLayout),scope.$watch("nodeData",function(){if(scope.nodeData){var props=scope.nodeData.properties,fn=scope.nodeData.fn,node=store.getNodeById(scope.nodeData.id),hasOwnProperty=Object.prototype.hasOwnProperty;for(var prop in props)hasOwnProperty.call(props,prop)&&node.set(prop,props[prop]);"function"==typeof fn&&fn.call(this,node,store,tree)}}),scope.$watch("sortData",function(){scope.sortData&&store.sort(scope.sortData)}),scope.$on("$destroy",function(){tree&&tree.destroy(),layoutHandler&&layoutHandler()})}}}return AdExtTree.$inject=["$rootScope"],AdExtTree}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-ext-tree"),AdExtTree),define("app/view/components/tree/AdExtTree",function(){});var MainContainerDirective=function(){function MainContainerDirective(){return{restrict:"E",transclude:!0,template:"<div class='ads-main-container-scroll-pane' ad-transclude='parent'></div>",link:function(scope,element,attrs){var top=0,positionTop=function(){for(var prev=element.prev();prev&&"none"==prev.css("display");)prev=prev.prev();var calculatedTop=prev.outerHeight();prev.position()&&(calculatedTop+=prev.position().top),top!=calculatedTop&&(top=calculatedTop,element.css("top",calculatedTop))},updateLayout=function(){positionTop(),element.children("ad-grid").children().css("display","none"),element.children("ad-tree-grid").children().css("display","none")};scope.$on(EventConstants.UEV_LAYOUT_CHANGED,updateLayout),"true"==attrs.dynamicHeight&&scope.$watch(positionTop),positionTop()}}}return MainContainerDirective.$inject=[],MainContainerDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-main-container"),MainContainerDirective),define("app/view/components/mainContainer/MainContainerDirective",function(){});var Checkbox=function(){function Checkbox(){return{restrict:"E",transclude:!0,templateUrl:Checkbox.TEMPLATE_URL,scope:{label:"@",selected:"=",selectedPartially:"=",svChange:"=",ngModel:"=",ngDisabled:"=",adOptionalData:"=",adIconSrc:"@",adStopPropagation:"=",adChangeEvent:"@",adPreventDefault:"=",adSelectedChange:"&",adIconClass:"=?",adSwapValue:"@"},controller:["$scope",function($scope){Util.isUndefOrNull($scope.adIconClass)&&($scope.adIconClass="adsSvgIconSmall"),$scope.toggleSelected=function(event){$scope.ngDisabled||($scope.selected=!$scope.selected,_.isFunction($scope.svChange)&&(_.isUndefined($scope.adOptionalData)?$scope.svChange($scope.selected):$scope.svChange($scope.selected,$scope.adOptionalData)),_.isFunction($scope.adSelectedChange)&&$scope.adSelectedChange(_.isUndefined($scope.adOptionalData)?{selected:$scope.selected}:{selected:$scope.selected,adOptionalData:$scope.adOptionalData}),$scope.ngModel&&($scope.ngModel=$scope.selected),$scope.adStopPropagation&&event.stopPropagation(),$scope.adPreventDefault&&event.preventDefault(),$scope.adChangeEvent&&$scope.$emit($scope.adChangeEvent,$scope.selected,$scope.adOptionalData))},$scope.$watch("ngModel",function(value){void 0!=value&&($scope.selected=value)})}]}}return Checkbox.TEMPLATE_URL="app/view/components/checkbox/Checkbox.html",Checkbox}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-checkbox"),Checkbox),define("app/view/components/checkbox/Checkbox",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/FilterSelectorControllerBase",["require","exports"],function(require,exports){var FilterSelectorDirective=function(){function FilterSelectorDirective(){return{restrict:"E",controller:"FilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/analyticsFilters/FilterSelector.html",scope:{filter:"=adFilter"}}}return FilterSelectorDirective.$inject=[],FilterSelectorDirective}();exports.FilterSelectorDirective=FilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-filter-selector"),FilterSelectorDirective);var FilterSelectorControllerBase=function(_super){function FilterSelectorControllerBase($scope,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.selectedItems=[],this.unselectedItems=[],this.throttledBrodcastFilterChangeFunction=null,this.dropdownOpen=!1,this.inputChangeFlag=!1,this.onEnterCloseInvokeFunction=function(){},this.setupWatchers(),this.listData=[],$scope.$emit(EventConstants.UEV_PROCESS_FILTERS)}return __extends(FilterSelectorControllerBase,_super),FilterSelectorControllerBase.prototype.getSeparatorItem=function(height){void 0===height&&(height=20);var rtn={isDivider:!0,repeaterSize:height};return rtn},FilterSelectorControllerBase.prototype.getLabelItem=function(label,height){void 0===height&&(height=22);var rtn={isLabel:!0,repeaterSize:height,label:label};return rtn},FilterSelectorControllerBase.prototype.getCheckboxItem=function(listItem,height){void 0===height&&(height=22);var rtn={repeaterSize:height,listItem:listItem};return rtn},FilterSelectorControllerBase.prototype.getSummaryString=function(truncate){return void 0===truncate&&(truncate=!0),this.filter?this.filter.type:""},FilterSelectorControllerBase.prototype.getToolTipString=function(){return this.getSummaryString(!1)},FilterSelectorControllerBase.prototype.resetFilter=function(){},FilterSelectorControllerBase.prototype.broadcastFilterUpdatedEvent=function(throttle){var _this=this;void 0===throttle&&(throttle=!0),throttle?(null==this.throttledBrodcastFilterChangeFunction&&(this.throttledBrodcastFilterChangeFunction=Util.getThrottledFunction(function(){_this.$scope.$emit(EventConstants.UEV_FILTER_BAR_CHANGE,_this.filter)},FilterSelectorControllerBase.BROADCAST_THROTTLE_DELAY_MILLIS)),this.throttledBrodcastFilterChangeFunction()):this.$scope.$emit(EventConstants.UEV_FILTER_BAR_CHANGE,this.filter)},FilterSelectorControllerBase.prototype.setupWatchers=function(){var _this=this;this.$scope.$watch("filter",function(newVal,oldVal,scope){_this.watchFilter(newVal,oldVal,scope)}),this.$scope.$watch("context",function(){_this.context=_this.$scope.context})},FilterSelectorControllerBase.prototype.selectAll=function(){if(this.listData)for(var i=0;i<this.listData.length;i++)this.setSelectedIfMatchesSearch(this.listData[i],!0)},FilterSelectorControllerBase.prototype.deselectAll=function(){if(this.listData)for(var i=0;i<this.listData.length;i++)this.setSelectedIfMatchesSearch(this.listData[i],!1)},FilterSelectorControllerBase.prototype.setSelectedIfMatchesSearch=function(listItem,selected){this.matchesSearch(listItem)&&(listItem.selected=selected)},FilterSelectorControllerBase.prototype.matchesSearch=function(listItem){return this.matchesSearchString(listItem,this.$scope.searchString)
},FilterSelectorControllerBase.prototype.matchesSearchString=function(listItem,searchString){return this.$scope.searchString&&""!==this.$scope.searchString.trim()?listItem&&StringUtils.containsString(this.getLabelFromItem(listItem),searchString,!0):!0},FilterSelectorControllerBase.prototype.getLabelFromItem=function(listItem){return listItem.listItem.label},FilterSelectorControllerBase.prototype.buildSelectedAndUnselectedArrays=function(){this.selectedItems=[],this.unselectedItems=[];for(var i=0;i<this.listData.length;i++)this.listData[i].selected?this.selectedItems.push(this.listData[i]):this.unselectedItems.push(this.listData[i])},FilterSelectorControllerBase.prototype.watchFilter=function(newVal){this.filter=newVal},FilterSelectorControllerBase.prototype.validate=function(){return!0},FilterSelectorControllerBase.prototype.clearFilterValues=function(){},FilterSelectorControllerBase.prototype.handleClick=function(){this.clearFilterValues(),this.$scope.$emit(EventConstants.UEV_FILTER_BAR_REMOVE_CRITERIA,this.filter),this.broadcastFilterUpdatedEvent(!1)},FilterSelectorControllerBase.prototype.setChangeFlag=function(){this.inputChangeFlag=!0},FilterSelectorControllerBase.prototype.handle_UPDATE=function(){this.inputChangeFlag===!0&&(this.broadcastFilterUpdatedEvent(!1),this.inputChangeFlag=!1)},FilterSelectorControllerBase.BROADCAST_THROTTLE_DELAY_MILLIS=1e3,FilterSelectorControllerBase.KEY_UP_THROTTLE_DELAY_MILLIS=1e3,FilterSelectorControllerBase.MAX_FILTER_TEXT_LENGTH=50,FilterSelectorControllerBase.$inject=["$scope","resourceManager","notificationService","sharedInjectorService"],FilterSelectorControllerBase}(ControllerBase);exports.FilterSelectorControllerBase=FilterSelectorControllerBase,adComponentsModule.controller("FilterSelectorControllerBase",FilterSelectorControllerBase)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/FilterBarControllerBase",["require","exports","./filterTypes/FilterSelectorControllerBase"],function(require,exports,FilterSelectorController){var FilterBarControllerBase=function(_super){function FilterBarControllerBase($scope,resourceManager,applicationUiService){var _this=this;_super.call(this,$scope,resourceManager,NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.resourceManager=resourceManager,this.applicationUiService=applicationUiService,this.dropdownPartialPath="app/view/components/filterBar/FilterList.html",this.showTextSearch=!1,this.showDebugger=!0,this.dropdownOpen=!1,this.showSearchBar=!0,this.showAnalyticsQueryHelp=!0,this.addCriteriaCloseInvokeFunction=function(){this.dropdownOpen=!1},this.throttledBrodcastFilterChangeFunction=null,this.wrappedBroadcaseFilterUpdatedEvent=function(throttle){_this.broadcastFilterUpdatedEvent(throttle)},this.showDebugger=this.$scope.showDebugger,this.setupWatchers(),this.setupListeners(),this.requireApplicationFilter=!0}return __extends(FilterBarControllerBase,_super),FilterBarControllerBase.prototype.resetFilterset=function(){for(;this.filterSet.filters.length>0;)this.filterSet.filters.splice(0,1);this.filterSet.textSearchInput=""},FilterBarControllerBase.prototype.addFilter=function(filter){filter&&this.filterSet&&(this.filterSet.addFilter(filter),this.processFilters(),this.addCriteriaCloseInvokeFunction&&this.addCriteriaCloseInvokeFunction())},FilterBarControllerBase.prototype.broadcastFilterUpdatedEvent=function(throttle){var _this=this;void 0===throttle&&(throttle=!0),null==this.throttledBrodcastFilterChangeFunction&&(this.throttledBrodcastFilterChangeFunction=Util.getThrottledFunction(function(){_this.$scope.$emit(EventConstants.UEV_FILTER_BAR_CHANGE)},FilterSelectorController.FilterSelectorControllerBase.BROADCAST_THROTTLE_DELAY_MILLIS)),throttle?this.throttledBrodcastFilterChangeFunction():this.$scope.$emit(EventConstants.UEV_FILTER_BAR_CHANGE),ViewUtil.layoutAfterDigest()},FilterBarControllerBase.prototype.handle_RESET_FILTERSET=function(){this.resetFilterset()},FilterBarControllerBase.prototype.handle_UEV_FILTER_BAR_REMOVE_CRITERIA=function(event,filter){if(this.filterSet&&this.filterSet.filters){var index=this.filterSet.filters.indexOf(filter);-1!=index&&(this.filterSet.filters.splice(index,1),this.processFilters())}},FilterBarControllerBase.prototype.handle_ADD_SEARCH_INPUT_TEXT=function(){return!0},FilterBarControllerBase.prototype.handle_UEV_FILTER_BAR_CHANGE=function(){this.processFilters()},FilterBarControllerBase.prototype.onSearchBoxChange=function(event,searchValue){this.handle_ADD_SEARCH_INPUT_TEXT(searchValue)&&(this.broadcastFilterUpdatedEvent(),this.filterSet.textSearchInput="",event.preventDefault())},FilterBarControllerBase.prototype.getFilterDirectiveHtml=function(filter){var partialDirectiveString="";return filter.parameters&&filter.parameters.length>0&&filter.parameters.forEach(function(directiveParams){partialDirectiveString+=" "+directiveParams.name+"="+directiveParams.value+" "}),"<"+filter.directiveString+partialDirectiveString+' ad-filter="filter" ad-filter-set="filterSet" ad-context="context" ad-application-id="controller.selectedApplicationId" ad-on-close-dropdown="controller.wrappedBroadcaseFilterUpdatedEvent"></'+filter.directiveString+">"},FilterBarControllerBase.prototype.openQueriesHelp=function(){ExternalUrls.openHelp(ExternalUrls.HELP_URL_ANALYTICS_QUERIES)},FilterBarControllerBase.prototype.processFilters=function(){this.selectedApplicationId=-1;var hasApplicationFilter=!1;if(this.filterSet){for(var i=0;i<this.filterSet.filters.length;i++){var currentFilter=this.filterSet.filters[i];switch(currentFilter.type){case FilterType.APPLICATION:hasApplicationFilter=!0,this.selectedApplicationId=currentFilter&&currentFilter.selectedEntities&&currentFilter.selectedEntities.length>0?currentFilter.selectedEntities[0].id:-1}}this.requireApplicationFilter&&!hasApplicationFilter,this.showDebugger&&(this.debugString=StringUtils.getPrettyJson(this.filterSet)),ViewUtil.layoutAfterDigest()}},FilterBarControllerBase.prototype.setupWatchers=function(){var _this=this;this.$scope.$watch("filterSet",function(newVal,oldVal,scope){_this.watchFilterSet(newVal,oldVal,scope)}),this.$scope.$watch("showTextSearch",function(){_this.showTextSearch=_this.$scope.showTextSearch===!0})},FilterBarControllerBase.prototype.setupListeners=function(){var _this=this;this.$scope.$on(EventConstants.UEV_FILTER_BAR_REMOVE_CRITERIA,function(event,filter){_this.handle_UEV_FILTER_BAR_REMOVE_CRITERIA(event,filter)}),this.$scope.$on(EventConstants.UEV_FILTER_BAR_CHANGE,function(event,filter){_this.handle_UEV_FILTER_BAR_CHANGE(event,filter)}),this.$scope.$on(EventConstants.UEV_PROCESS_FILTERS,function(){_this.processFilters()})},FilterBarControllerBase.prototype.watchFilterSet=function(newVal){this.filterSet=newVal,this.processFilters()},FilterBarControllerBase.$inject=["$scope","resourceManager","applicationUiService"],FilterBarControllerBase}(ControllerBase);exports.FilterBarControllerBase=FilterBarControllerBase,adComponentsModule.controller("FilterBarControllerBase",FilterBarControllerBase)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/location/LocationFilterSelector",["require","exports","../../FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var LocationFilterSelectorDirective=function(){function LocationFilterSelectorDirective(){return{restrict:"E",controller:"locationFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/custom/location/LocationFilterSelector.html",scope:{filter:"=adFilter",context:"=adContext",onCloseDropdown:"=adOnCloseDropdown"}}}return LocationFilterSelectorDirective.$inject=[],LocationFilterSelectorDirective}();exports.LocationFilterSelectorDirective=LocationFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-location-filter-selector"),LocationFilterSelectorDirective);var LocationFilterSelectorController=function(_super){function LocationFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService,filterService){var _this=this;switch(_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.filterService=filterService,this.locationFacetText="",this.dropdownOpen=!1,this.showRegionOptions=!1,this.showCityOptions=!1,this.isRegionListBelongsToSetCountry=!1,this.isCityListBelongsToSetRegion=!1,$scope.controller=this,$scope.$watch("filter",function(){_this.filter=_this.$scope.filter,_this.updateLocationsFacetText(),FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.geoCountry,!0),FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.geoRegion,!0),FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.geoCity,!0)},!0),$scope.$watch("controller.dropdownOpen",function(newValue,oldValue){newValue&&newValue!=oldValue&&_this.filter&&(_this.filter.autoFetchOptions?_this.fetchLocations():_this.showRegionOptions&&0===_this.filter.geoRegion.options.length&&_this.fetchRegions())}),$scope.context.analyticsMode){case 3:this.showRegionOptions=!0,this.showCityOptions=!0;break;default:this.showRegionOptions=!0,this.showCityOptions=!1}this.fetchLocations()}return __extends(LocationFilterSelectorController,_super),LocationFilterSelectorController.prototype.updateLocationsFacetText=function(){var displayText="";this.filter&&(angular.isObject(this.filter.geoCity.value)&&(displayText+=this.filter.geoCity.value.name),angular.isObject(this.filter.geoRegion.value)&&(displayText+=(""!=displayText?", ":"")+this.filter.geoRegion.value.name),angular.isObject(this.filter.geoCountry.value)&&(displayText+=(""!=displayText?", ":"")+this.filter.geoCountry.value.name)),displayText||(displayText="All Countries",displayText+=this.showRegionOptions&&this.showCityOptions?", Regions and Cities":"",displayText+=this.showRegionOptions&&!this.showCityOptions?" and Regions":"",displayText+=!this.showRegionOptions&&this.showCityOptions?" and Cities":""),this.locationFacetText=displayText},LocationFilterSelectorController.prototype.onGeoCountryFilterChange=function(){this.filter&&(this.showRegionOptions&&(this.filter.geoRegion.value=null),this.showCityOptions&&(this.filter.geoCity.value=null),this.showRegionOptions&&this.fetchRegions(),this.showCityOptions&&this.fetchCities())},LocationFilterSelectorController.prototype.onGeoRegionFilterChange=function(){this.filter&&this.filter.geoRegion.value&&(this.showCityOptions&&(this.filter.geoCity.value=null),this.isRegionListBelongsToSetCountry?this.showCityOptions&&this.fetchCities():this.tryToGetCountryFromRegion(!0))},LocationFilterSelectorController.prototype.onGeoCityFilterChange=function(){this.filter&&this.filter.geoCity.value&&(this.isCityListBelongsToSetRegion||this.tryToGetRegionFromCity())},LocationFilterSelectorController.prototype.clearFilter=function(event){this.filter.geoCountry.value&&(this.filter.geoRegion.options=[]),this.filterService.clearSearchParameter(this.filter.geoCountry),this.filterService.clearSearchParameter(this.filter.geoRegion),this.filterService.clearSearchParameter(this.filter.geoCity),this.handleClick(event)},LocationFilterSelectorController.prototype.fetchLocations=function(){if(this.filter&&this.filter.autoFetchOptions){var contextCopy=angular.copy(this.context),locationFilterWithoutRegion=angular.copy(Util.removeWhere(contextCopy.filter.filters,{type:FilterType.LOCATION}));locationFilterWithoutRegion&&(locationFilterWithoutRegion.geoRegion=null,locationFilterWithoutRegion.geoCity=null,locationFilterWithoutRegion.geoCountry=null),this.fetchCountries(contextCopy),this.showRegionOptions&&this.fetchRegions(contextCopy),this.showCityOptions&&this.fetchCities(contextCopy)}},LocationFilterSelectorController.prototype.fetchCountries=function(contextToUse){var _this=this;void 0===contextToUse&&(contextToUse=null),contextToUse||(contextToUse=angular.copy(this.context),contextToUse.filter.getLocationFilter(this.filter.fieldCategory).geoCountry=null),AnalyticsSearchFacade.getSelectOptionsForFieldAndCategory(AnalyticsField.geoCountry,this.filter.fieldCategory,contextToUse).then(function(options){_this.filter.geoCountry.options=options,_this.filter.geoCountry.value&&FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.geoCountry,!0)})},LocationFilterSelectorController.prototype.fetchRegions=function(contextToUse){var _this=this;void 0===contextToUse&&(contextToUse=null),contextToUse||(contextToUse=angular.copy(this.context),contextToUse.filter.getLocationFilter(this.filter.fieldCategory).geoRegion=null),AnalyticsSearchFacade.getSelectOptionsForFieldAndCategory(AnalyticsField.geoRegion,this.filter.fieldCategory,contextToUse).then(function(options){_this.filter.geoRegion.options=options,_this.isRegionListBelongsToSetCountry=Util.isDefAndNotNull(_this.filter.geoCountry.value),_this.filter.geoRegion.value&&FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.geoRegion,!0)})},LocationFilterSelectorController.prototype.fetchCities=function(contextToUse){var _this=this;void 0===contextToUse&&(contextToUse=null),contextToUse||(contextToUse=angular.copy(this.context),contextToUse.filter.getLocationFilter(this.filter.fieldCategory).geoCity=null),AnalyticsSearchFacade.getSelectOptionsForFieldAndCategory(AnalyticsField.geoCity,this.filter.fieldCategory,contextToUse).then(function(options){_this.filter.geoCity.options=options,_this.isCityListBelongsToSetRegion=Util.isDefAndNotNull(_this.filter.geoRegion.value),_this.filter.geoCity.value&&FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.geoCity,!0)})},LocationFilterSelectorController.prototype.tryToGetCountryFromRegion=function(fetchCities){var _this=this;void 0===fetchCities&&(fetchCities=!1);var oldCountry=this.filter.geoCountry.value,context=angular.copy(this.context),locationFilter=context.filter.getLocationFilter(this.filter.fieldCategory);locationFilter.geoCountry.value=null,AnalyticsSearchFacade.getSelectOptionsForFieldAndCategory(AnalyticsField.geoCountry,this.filter.fieldCategory,context).then(function(options){1===options.length?(_this.filter.geoCountry.value=options[0],FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.geoCountry,!0),_this.showCityOptions&&fetchCities&&_this.fetchCities()):(_this.showCityOptions&&fetchCities&&_this.fetchCities(),_this.filter.geoCountry.value=oldCountry)})},LocationFilterSelectorController.prototype.tryToGetRegionFromCity=function(){var _this=this,oldRegion=this.filter.geoRegion.value,oldCountry=this.filter.geoCountry.value,context=angular.copy(this.context),locationFilter=context.filter.getLocationFilter(this.filter.fieldCategory);locationFilter.geoRegion.value=null,locationFilter.geoCountry.value=null,AnalyticsSearchFacade.getSelectOptionsForFieldAndCategory(AnalyticsField.geoRegion,this.filter.fieldCategory,context).then(function(options){1===options.length?(_this.filter.geoRegion.value=options[0],FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.geoRegion,!0),_this.isRegionListBelongsToSetCountry||_this.tryToGetCountryFromRegion(!1)):(_this.filter.geoRegion.value=oldRegion,_this.filter.geoCountry.value=oldCountry)})},LocationFilterSelectorController.prototype.handle_UPDATE=function(){this.broadcastFilterUpdatedEvent(!1)},LocationFilterSelectorController.prototype.onKeyUp=function(){this.broadcastFilterUpdatedEvent(!1)},LocationFilterSelectorController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.$scope.onCloseDropdown()}),this._closeDropdownHandler},LocationFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService","filterService"],LocationFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.LocationFilterSelectorController=LocationFilterSelectorController,adComponentsModule.controller("locationFilterSelectorController",LocationFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/application/ApplicationFilterSelector",["require","exports","../../FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var ApplicationFilterSelectorDirective=function(){function ApplicationFilterSelectorDirective(){return{restrict:"E",controller:"ApplicationFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/custom/application/ApplicationFilterSelector.html",scope:{filter:"=adFilter",fetchAnalyticsApplications:"=adFetchAnalyticsApplications"}}}return ApplicationFilterSelectorDirective.$inject=[],ApplicationFilterSelectorDirective}();exports.ApplicationFilterSelectorDirective=ApplicationFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-application-filter-selector"),ApplicationFilterSelectorDirective);var ApplicationFilterSelectorController=function(_super){function ApplicationFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService,analyticsDataAccessHelperUiService,applicationUiService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.analyticsDataAccessHelperUiService=analyticsDataAccessHelperUiService,this.applicationUiService=applicationUiService,$scope.controller=this,this.applications=[],this.selectApplication(null,!1),this.fetchApplications()}return __extends(ApplicationFilterSelectorController,_super),ApplicationFilterSelectorController.prototype.getSummaryString=function(truncate){return void 0===truncate&&(truncate=!0),this.selectedApplication?truncate?StringUtils.truncateString(this.selectedApplication.name,FilterSelectorControllerBase.FilterSelectorControllerBase.MAX_FILTER_TEXT_LENGTH,!0):this.selectedApplication.name:"Select Application..."},ApplicationFilterSelectorController.prototype.fetchApplications=function(){var _this=this;this.fetchingData=!0,this.$scope.fetchAnalyticsApplications?this.analyticsDataAccessHelperUiService.getAllowedApplications().then(function(serverApplications){_this.postProcessFetchedApplications(serverApplications),_this.fetchingData=!1}):this.applicationUiService.getApmApplications().then(function(serverApplications){_this.postProcessFetchedApplications(serverApplications),_this.fetchingData=!1})},ApplicationFilterSelectorController.prototype.clearApplications=function(){for(;this.applications.length>0;)this.applications.splice(0,1)},ApplicationFilterSelectorController.prototype.selectApplication=function(application,dispatchEvent){void 0===dispatchEvent&&(dispatchEvent=!0),this.selectedApplication=application,this.filter&&(application?(this.filter.selectedEntities=[],this.filter.selectedEntities.push(EntityUtils.getApplicationEntity(application))):this.filter.selectedEntities=[]),dispatchEvent&&this.broadcastFilterUpdatedEvent(!1)},ApplicationFilterSelectorController.prototype.resetFilter=function(){this.selectApplication(null,!1)},ApplicationFilterSelectorController.prototype.handle_SELECT_APPLICATION=function(application){this.selectApplication(application)},ApplicationFilterSelectorController.prototype.postProcessFetchedApplications=function(serverApplications){var applicationFilter=this.filter,applicationIdSelectedByFilter=this.filter&&applicationFilter.selectedEntities&&applicationFilter.selectedEntities.length>0?applicationFilter.selectedEntities[0].id:-1;this.clearApplications();for(var foundApplication=!1,i=0;i<serverApplications.length;i++)this.applications.push(serverApplications[i]),serverApplications[i].id===applicationIdSelectedByFilter&&(this.selectApplication(serverApplications[i],!1),foundApplication=!0);this.applications=Util.sortByName(this.applications),foundApplication||this.resetFilter()},ApplicationFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService","analyticsDataAccessHelperUiService","applicationUiService"],ApplicationFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.ApplicationFilterSelectorController=ApplicationFilterSelectorController,adComponentsModule.controller("ApplicationFilterSelectorController",ApplicationFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/ApplicationScopedFilterSelector",["require","exports","./FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var ApplicationScopedFilterSelectorDirective=function(){function ApplicationScopedFilterSelectorDirective(){return{restrict:"E",controller:"ApplicationScopedFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/analyticsFilters/FilterSelector.html",scope:{filter:"=adFilter",applicationId:"=adApplicationId"}}}return ApplicationScopedFilterSelectorDirective.$inject=[],ApplicationScopedFilterSelectorDirective}();exports.ApplicationScopedFilterSelectorDirective=ApplicationScopedFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-application-scoped-filter-selector"),ApplicationScopedFilterSelectorDirective);var ApplicationScopedFilterSelectorController=function(_super){function ApplicationScopedFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,$scope.controller=this}return __extends(ApplicationScopedFilterSelectorController,_super),ApplicationScopedFilterSelectorController.prototype.setupWatchers=function(){var _this=this;_super.prototype.setupWatchers.call(this),this.$scope.$watch("applicationId",function(newVal,oldVal,scope){_this.watchApplicationId(newVal,oldVal,scope)})},ApplicationScopedFilterSelectorController.prototype.watchApplicationId=function(newVal,oldVal){this.applicationId=newVal,newVal!==oldVal&&this.broadcastFilterUpdatedEvent()},ApplicationScopedFilterSelectorController.prototype.getSummaryStringForEntityList=function(truncate){void 0===truncate&&(truncate=!0);var entityFilter=this.filter;if(!entityFilter)return"";if(_.isUndefined(entityFilter.selectedEntities)&&(entityFilter.selectedEntities=[]),entityFilter.selectedEntities.length>0){var summaryString="";if(truncate)summaryString+="("+entityFilter.selectedEntities.length+") "+entityFilter.selectedEntities[0].name+(entityFilter.selectedEntities.length>1?", ...":""),summaryString=StringUtils.truncateString(summaryString,FilterSelectorControllerBase.FilterSelectorControllerBase.MAX_FILTER_TEXT_LENGTH,!0);else for(var i=0;i<entityFilter.selectedEntities.length;i++)summaryString+=entityFilter.selectedEntities[i].name+" ";return summaryString}return"Not Specified"},ApplicationScopedFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService"],ApplicationScopedFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.ApplicationScopedFilterSelectorController=ApplicationScopedFilterSelectorController,adComponentsModule.controller("ApplicationScopedFilterSelectorController",ApplicationScopedFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/EntityListFilterSelector",["require","exports","./FilterSelectorControllerBase","./ApplicationScopedFilterSelector"],function(require,exports,FilterSelectorControllerBase,ApplicationScopedFilterSelector){var EntityListFilterSelectorController=function(_super){function EntityListFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService}return __extends(EntityListFilterSelectorController,_super),EntityListFilterSelectorController.prototype.onEntityCheckboxSelectChange=function(selected,filterSelectorListItem){var entityFilter=this.filter;if(entityFilter&&filterSelectorListItem&&filterSelectorListItem.listItem){_.isUndefined(entityFilter.selectedEntities)&&(entityFilter.selectedEntities=[]);for(var selectedEntity=this.getEntityForListItem(filterSelectorListItem),newSelectedEntities=[],i=0;i<entityFilter.selectedEntities.length;i++)entityFilter.selectedEntities[i].id!=selectedEntity.id&&newSelectedEntities.push(entityFilter.selectedEntities[i]);selected&&newSelectedEntities.push(selectedEntity),entityFilter.selectedEntities=newSelectedEntities,this.broadcastFilterUpdatedEvent()}},EntityListFilterSelectorController.prototype.getEntityForListItem=function(){return null},EntityListFilterSelectorController.prototype.watchApplicationId=function(newVal,oldVal,scope){_super.prototype.watchApplicationId.call(this,newVal,oldVal,scope),this.filter&&newVal!=oldVal&&(this.filter.selectedEntities=[]),this.fetchData()},EntityListFilterSelectorController.prototype.fetchData=function(){},EntityListFilterSelectorController.prototype.watchFilter=function(newVal){this.filter=newVal,this.setupListDataFromModel()},EntityListFilterSelectorController.prototype.clearFilterValues=function(){var entityFilter=this.filter;entityFilter.selectedEntities=[]},EntityListFilterSelectorController.prototype.setupListDataFromModel=function(){},EntityListFilterSelectorController.prototype.getLabelFromItem=function(listItem){var entity=this.getEntityForListItem(listItem);return entity?entity.name:_super.prototype.getLabelFromItem.call(this,listItem)},EntityListFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService"],EntityListFilterSelectorController}(ApplicationScopedFilterSelector.ApplicationScopedFilterSelectorController);exports.EntityListFilterSelectorController=EntityListFilterSelectorController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/infrastructure/InfrastructureFilterSelector",["require","exports","../../FilterSelectorControllerBase","../../EntityListFilterSelector"],function(require,exports,FilterSelectorControllerBase,EntityListFilterSelector){var InfrastructureFilterSelectorDirective=function(){function InfrastructureFilterSelectorDirective(){return{restrict:"E",controller:"InfrastructureFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/custom/infrastructure/InfrastructureFilterSelector.html",scope:{filter:"=adFilter",applicationId:"=adApplicationId"}}}return InfrastructureFilterSelectorDirective.$inject=[],InfrastructureFilterSelectorDirective}();exports.InfrastructureFilterSelectorDirective=InfrastructureFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-infrastructure-filter-selector"),InfrastructureFilterSelectorDirective);var InfrastructureFilterSelectorController=function(_super){function InfrastructureFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService,userUiService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.userUiService=userUiService,this.tierListData=[],this.nodeListData=[],this.nodes=[],this.components=[],$scope.controller=this,this.applicationComponentSelection=this.initializeSelectedComponentFromFilter($scope.filter)}return __extends(InfrastructureFilterSelectorController,_super),InfrastructureFilterSelectorController.prototype.initializeSelectedComponentFromFilter=function(filter){var containsOnlyNodeEntities=!1;return filter.selectedEntities&&(0==filter.selectedEntities.length?filter.componentType===FilterType.APPLICATION_COMPONENT_NODE?containsOnlyNodeEntities=!0:filter.componentType===FilterType.APPLICATION_COMPONENT&&(containsOnlyNodeEntities=!1):filter.selectedEntities.length>0&&(containsOnlyNodeEntities=_.every(filter.selectedEntities,function(entityObj){return entityObj.entityDefinition.entityType===EntityType.APPLICATION_COMPONENT_NODE}))),containsOnlyNodeEntities?InfrastructureFilterSelectorController.NODE:InfrastructureFilterSelectorController.TIER},InfrastructureFilterSelectorController.prototype.loadTierData=function(){var _this=this,successHandler=function(res){_this.components=res,_this.tierListData=[],_.each(_this.components,function(component){_this.tierListData.push(_this.getCheckboxItemForComponent(component))}),_this.addNamesForSelectedEntities(),_this.buildSelectedAndUnselectedArrays()};this.userUiService.getAllApplicationComponents(this.applicationId).then(successHandler)},InfrastructureFilterSelectorController.prototype.loadNodeData=function(){var _this=this,successHandler=function(res){_this.nodes=res,_this.nodeListData=[],_.each(_this.nodes,function(node){_this.nodeListData.push(_this.getCheckboxItemForNode(node))}),_this.addNamesForSelectedEntities(),_this.buildSelectedAndUnselectedArrays()};this.userUiService.getApplicationComponentNodesByApplicationId(this.applicationId).then(successHandler)},InfrastructureFilterSelectorController.prototype.getEntityForListItem=function(filterSelectorListItem){var selectedEntity=null;return this.applicationComponentSelection==InfrastructureFilterSelectorController.TIER&&(selectedEntity=EntityUtils.getComponentEntity(filterSelectorListItem.listItem)),this.applicationComponentSelection==InfrastructureFilterSelectorController.NODE&&(selectedEntity=EntityUtils.getNodeEntity(filterSelectorListItem.listItem)),selectedEntity},InfrastructureFilterSelectorController.prototype.getCheckboxItemForComponent=function(component){var item=_super.prototype.getCheckboxItem.call(this,component),entity=EntityUtils.getComponentEntity(component);return item.selected=-1!=EntityUtils.getIndexForEntity(entity,this.filter.selectedEntities),item},InfrastructureFilterSelectorController.prototype.getCheckboxItemForNode=function(node){var item=_super.prototype.getCheckboxItem.call(this,node),entity=EntityUtils.getNodeEntity(node);return item.selected=-1!=EntityUtils.getIndexForEntity(entity,this.filter.selectedEntities),item},InfrastructureFilterSelectorController.prototype.getSummaryString=function(truncate){return void 0===truncate&&(truncate=!0),this.getSummaryStringForEntityList(truncate)},InfrastructureFilterSelectorController.prototype.getFullSummaryString=function($event){var infraFilter=this.filter;if(_.isUndefined(infraFilter.selectedEntities)&&(infraFilter.selectedEntities=[]),infraFilter.selectedEntities.length>0){var summaryArray=_.pluck(infraFilter.selectedEntities,"name");$event.currentTarget.title=summaryArray.join()}else $event.currentTarget.title="Not Specified"
},InfrastructureFilterSelectorController.prototype.fetchData=function(){Util.isValidId(this.applicationId)&&(this.loadTierData(),this.loadNodeData())},InfrastructureFilterSelectorController.prototype.buildSelectedAndUnselectedArrays=function(){this.selectedItems=[],this.unselectedItems=[];var tmpListData;this.applicationComponentSelection==InfrastructureFilterSelectorController.TIER?tmpListData=this.tierListData:this.applicationComponentSelection==InfrastructureFilterSelectorController.NODE&&(tmpListData=this.nodeListData);for(var i=0;i<tmpListData.length;i++)tmpListData[i].selected?this.selectedItems.push(tmpListData[i]):this.unselectedItems.push(tmpListData[i]);this.listData=[],this.selectedItems.length>0&&this.listData.push(this.getLabelItem("Selected Items"));for(var i=0;i<this.selectedItems.length;i++)this.listData.push(this.selectedItems[i]);this.selectedItems.length>0&&this.unselectedItems.length>0&&this.listData.push(this.getSeparatorItem()),this.unselectedItems.length>0&&this.listData.push(this.getLabelItem("Unselected Items"));for(var i=0;i<this.unselectedItems.length;i++)this.listData.push(this.unselectedItems[i])},InfrastructureFilterSelectorController.prototype.setComponentType=function(selectedComponent){var infraFilter=this.filter;selectedComponent===InfrastructureFilterSelectorController.TIER?infraFilter.componentType=FilterType.APPLICATION_COMPONENT:selectedComponent===InfrastructureFilterSelectorController.NODE&&(infraFilter.componentType=FilterType.APPLICATION_COMPONENT_NODE)},InfrastructureFilterSelectorController.prototype.populateFilterFromListData=function(){var infraFilter=this.filter;infraFilter&&(_.isUndefined(infraFilter.selectedEntities)&&(infraFilter.selectedEntities=[]),this.applicationComponentSelection==InfrastructureFilterSelectorController.TIER&&(infraFilter.selectedEntities=[],_.each(this.tierListData,function(item){item.selected&&infraFilter.selectedEntities.push(EntityUtils.getComponentEntity(item.listItem))})),this.applicationComponentSelection==InfrastructureFilterSelectorController.NODE&&(infraFilter.selectedEntities=[],_.each(this.nodeListData,function(item){item.selected&&infraFilter.selectedEntities.push(EntityUtils.getNodeEntity(item.listItem))})),this.broadcastFilterUpdatedEvent())},InfrastructureFilterSelectorController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.buildSelectedAndUnselectedArrays()}),this._closeDropdownHandler},InfrastructureFilterSelectorController.prototype.onApplicationComponentSelection=function(selectedComponent){this.setComponentType(selectedComponent),this.populateFilterFromListData(),this.buildSelectedAndUnselectedArrays()},InfrastructureFilterSelectorController.prototype.selectAll=function(){var _this=this;this.applicationComponentSelection==InfrastructureFilterSelectorController.TIER&&_.each(this.tierListData,function(listItem){_this.setSelectedIfMatchesSearch(listItem,!0)}),this.applicationComponentSelection==InfrastructureFilterSelectorController.NODE&&_.each(this.nodeListData,function(listItem){_this.setSelectedIfMatchesSearch(listItem,!0)}),this.populateFilterFromListData()},InfrastructureFilterSelectorController.prototype.deselectAll=function(){var _this=this;this.applicationComponentSelection==InfrastructureFilterSelectorController.TIER&&_.each(this.tierListData,function(listItem){_this.setSelectedIfMatchesSearch(listItem,!1)}),this.applicationComponentSelection==InfrastructureFilterSelectorController.NODE&&_.each(this.nodeListData,function(listItem){_this.setSelectedIfMatchesSearch(listItem,!1)}),this.populateFilterFromListData()},InfrastructureFilterSelectorController.prototype.addNamesForSelectedEntities=function(){var _this=this;this.filter.selectedEntities.forEach(function(entity){if(StringUtils.isNullOrEmptyString(entity.name)&&entity.entityDefinition)if(Util.isDefAndNotEmptyArray(_this.components)&&entity.entityDefinition.entityType===EntityType.APPLICATION_COMPONENT){var component=_.findWhere(_this.components,{id:entity.entityDefinition.entityId});entity.name=component?component.name:MetricUtil.NO_DATA_DISPLAY_STRING}else if(Util.isDefAndNotEmptyArray(_this.nodes)&&entity.entityDefinition.entityType===EntityType.APPLICATION_COMPONENT_NODE){var node=_.findWhere(_this.nodes,{id:entity.entityDefinition.entityId});entity.name=node?node.name:MetricUtil.NO_DATA_DISPLAY_STRING}})},InfrastructureFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService","userUiService"],InfrastructureFilterSelectorController.TIER="tier",InfrastructureFilterSelectorController.NODE="node",InfrastructureFilterSelectorController}(EntityListFilterSelector.EntityListFilterSelectorController);exports.InfrastructureFilterSelectorController=InfrastructureFilterSelectorController,adComponentsModule.controller("InfrastructureFilterSelectorController",InfrastructureFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/generic/numeric/NumericFilterSelector",["require","exports","../../FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var NumericFilterSelectorDirective=function(){function NumericFilterSelectorDirective(){return{restrict:"E",controller:"NumericFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/generic/numeric/NumericFilterSelector.html",scope:{filter:"=adFilter",applicationId:"=adApplicationId"}}}return NumericFilterSelectorDirective.$inject=[],NumericFilterSelectorDirective}();exports.NumericFilterSelectorDirective=NumericFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-numeric-filter-selector"),NumericFilterSelectorDirective);var NumericFilterSelectorController=function(_super){function NumericFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.numericOperators=[],$scope.controller=this}return __extends(NumericFilterSelectorController,_super),NumericFilterSelectorController.prototype.watchFilter=function(newVal){this.filter=newVal,this.setupVisibleOperators()},NumericFilterSelectorController.prototype.getSummaryString=function(truncate){void 0===truncate&&(truncate=!0);var numericFilter=this.filter;return!numericFilter||Util.isUndefOrNull(numericFilter.selectedOperator)?this.getString("ms_notSpecified"):numericFilter.selectedOperator.value!==AnalyticsUtils.EQUALS&&numericFilter.selectedOperator.value!==AnalyticsUtils.NOT_EQUALS||!Util.isDefAndNotNull(numericFilter.equalityValue)?numericFilter.selectedOperator.value===AnalyticsUtils.GREATER_THAN_OR_EQUAL&&Util.isDefAndNotNull(numericFilter.lowerThreshold)?numericFilter.lowerThreshold:numericFilter.selectedOperator.value===AnalyticsUtils.LESS_THAN_OR_EQUAL&&Util.isDefAndNotNull(numericFilter.higherThreshold)?numericFilter.higherThreshold:numericFilter.selectedOperator.value===AnalyticsUtils.RANGE&&Util.isDefAndNotNull(numericFilter.lowerThreshold)&&Util.isDefAndNotNull(numericFilter.higherThreshold)?numericFilter.lowerThreshold+" "+this.getString("ms_toLowerCase")+" "+numericFilter.higherThreshold:this.getString("ms_notSpecified"):numericFilter.equalityValue},NumericFilterSelectorController.prototype.validate=function(){var numericFilter=this.filter;if(numericFilter.analyticsField)var allowDecimal=AnalyticsFields.isFieldDefinitionFieldTypeDouble(numericFilter.analyticsField.fieldDefinition);else if(numericFilter.databaseField)var allowDecimal=DatabaseField.isFieldDefinitionFieldTypeDouble(numericFilter.databaseField.fieldDefinition);return numericFilter.isInvalidInputForNumericField(allowDecimal)?(NotificationService.instance().displayError(this.getString("ms_invalidInput"),""),!1):!0},NumericFilterSelectorController.prototype.clearFilterValues=function(){var numericFilter=this.filter;numericFilter.lowerThreshold=null,numericFilter.higherThreshold=null,numericFilter.equalityValue=null},NumericFilterSelectorController.prototype.retainFilterValuesOnSelectorChange=function(){var numericFilter=this.filter;(numericFilter.selectedOperator.value===AnalyticsUtils.EQUALS||numericFilter.selectedOperator.value===AnalyticsUtils.NOT_EQUALS)&&(null!=numericFilter.lowerThreshold&&numericFilter.lowerThreshold!=numericFilter.equalityValue?numericFilter.equalityValue=numericFilter.higherThreshold=numericFilter.lowerThreshold:null!=numericFilter.higherThreshold&&numericFilter.higherThreshold!=numericFilter.equalityValue&&(numericFilter.equalityValue=numericFilter.lowerThreshold=numericFilter.higherThreshold)),numericFilter.selectedOperator.value===AnalyticsUtils.GREATER_THAN_OR_EQUAL&&(null!=numericFilter.equalityValue&&numericFilter.equalityValue!=numericFilter.lowerThreshold?numericFilter.lowerThreshold=numericFilter.higherThreshold=numericFilter.equalityValue:null!=numericFilter.higherThreshold&&numericFilter.higherThreshold!=numericFilter.lowerThreshold&&(numericFilter.lowerThreshold=numericFilter.equalityValue=numericFilter.higherThreshold)),numericFilter.selectedOperator.value===AnalyticsUtils.LESS_THAN_OR_EQUAL&&(null!=numericFilter.equalityValue&&numericFilter.equalityValue!=numericFilter.higherThreshold?numericFilter.higherThreshold=numericFilter.lowerThreshold=numericFilter.equalityValue:null!=numericFilter.lowerThreshold&&numericFilter.lowerThreshold!=numericFilter.higherThreshold&&(numericFilter.higherThreshold=numericFilter.equalityValue=numericFilter.lowerThreshold)),numericFilter.selectedOperator.value===AnalyticsUtils.RANGE&&(null!=numericFilter.equalityValue?numericFilter.lowerThreshold=numericFilter.higherThreshold=numericFilter.equalityValue:null!=numericFilter.lowerThreshold?numericFilter.higherThreshold=numericFilter.equalityValue=numericFilter.lowerThreshold:null!=numericFilter.higherThreshold&&(numericFilter.lowerThreshold=numericFilter.equalityValue=numericFilter.higherThreshold))},NumericFilterSelectorController.prototype.onSelectorChange=function(){this.retainFilterValuesOnSelectorChange(),this.setChangeFlag()},NumericFilterSelectorController.prototype.onKeyUp=function(){this.onEnterCloseInvokeFunction()},NumericFilterSelectorController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.validate()&&_this.handle_UPDATE()}),this._closeDropdownHandler},NumericFilterSelectorController.prototype.setupVisibleOperators=function(){var _this=this,numericFilter=this.filter;Util.isDefAndNotEmptyArray(numericFilter.visibleOperators)?numericFilter.visibleOperators.forEach(function(operator){_this.numericOperators.push({name:operator,value:operator})}):[AnalyticsUtils.EQUALS,AnalyticsUtils.NOT_EQUALS,AnalyticsUtils.GREATER_THAN_OR_EQUAL,AnalyticsUtils.LESS_THAN_OR_EQUAL,AnalyticsUtils.RANGE].forEach(function(operator){_this.numericOperators.push({name:operator,value:operator})})},NumericFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService"],NumericFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.NumericFilterSelectorController=NumericFilterSelectorController,adComponentsModule.controller("NumericFilterSelectorController",NumericFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/generic/text/TextFilterSelector",["require","exports","../../FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var TextFilterSelectorDirective=function(){function TextFilterSelectorDirective(){return{restrict:"E",controller:"TextFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/generic/text/TextFilterSelector.html",scope:{filter:"=adFilter",applicationId:"=adApplicationId"}}}return TextFilterSelectorDirective.$inject=[],TextFilterSelectorDirective}();exports.TextFilterSelectorDirective=TextFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-text-filter-selector"),TextFilterSelectorDirective);var TextFilterSelectorController=function(_super){function TextFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,$scope.controller=this}return __extends(TextFilterSelectorController,_super),TextFilterSelectorController.prototype.getSummaryString=function(truncate){void 0===truncate&&(truncate=!0);var textFilter=this.filter;return!textFilter||StringUtils.isNullOrEmptyString(textFilter.selectedValue)?"Not Specified":truncate?StringUtils.truncateString(textFilter.selectedValue,FilterSelectorControllerBase.FilterSelectorControllerBase.MAX_FILTER_TEXT_LENGTH,!0):textFilter.selectedValue},TextFilterSelectorController.prototype.validate=function(){var textFilter=this.filter;return FilterSet.validateStringQuery(textFilter.selectedValue)?!0:(NotificationService.instance().displayError(this.getString("ms_safeStringValidationError"),""),!1)},TextFilterSelectorController.prototype.clearFilterValues=function(){this.filter.selectedValue=""},TextFilterSelectorController.prototype.onKeyUp=function(){this.onEnterCloseInvokeFunction()},TextFilterSelectorController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.validate()&&_this.handle_UPDATE()}),this._closeDropdownHandler},TextFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService"],TextFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.TextFilterSelectorController=TextFilterSelectorController,adComponentsModule.controller("TextFilterSelectorController",TextFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/generic/nameValuePair/NameValuePairFilter",["require","exports","../../FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var NameValuePairFilterDirective=function(){function NameValuePairFilterDirective(){return{restrict:"E",controller:"NameValuePairFilterController",templateUrl:"app/view/components/filterBar/filterTypes/generic/nameValuePair/NameValuePairFilter.html",scope:{filter:"=adFilter"}}}return NameValuePairFilterDirective.$inject=[],NameValuePairFilterDirective}();exports.NameValuePairFilterDirective=NameValuePairFilterDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-name-value-pair-filter-selector"),NameValuePairFilterDirective);var NameValuePairFilterController=function(_super){function NameValuePairFilterController($scope,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,$scope.controller=this}return __extends(NameValuePairFilterController,_super),NameValuePairFilterController.prototype.watchFilter=function(newVal){this.filter=newVal},NameValuePairFilterController.prototype.getSummaryString=function(truncate){void 0===truncate&&(truncate=!0);var nvpFilter=this.filter;if(nvpFilter&&nvpFilter.selectedOption&&nvpFilter.inputNameValuePair){var nameDisplay=StringUtils.isNullOrEmptyString(nvpFilter.inputNameValuePair.name)?MetricUtil.NO_DATA_DISPLAY_STRING:nvpFilter.inputNameValuePair.name,valueDisplay=StringUtils.isNullOrEmptyString(nvpFilter.inputNameValuePair.value)?MetricUtil.NO_DATA_DISPLAY_STRING:nvpFilter.inputNameValuePair.value,summary=""+nvpFilter.selectedOption.value+" | "+this.getString("ms_nameWithColon")+" "+nameDisplay+", "+this.getString("ms_valueWithColon")+" "+valueDisplay;return truncate?StringUtils.truncateString(summary,FilterSelectorControllerBase.FilterSelectorControllerBase.MAX_FILTER_TEXT_LENGTH):summary}return this.getString("ms_notSpecified")},NameValuePairFilterController.prototype.clearFilterValues=function(){this.filter.inputNameValuePair=null,this.filter.selectedOption=null},NameValuePairFilterController.prototype.validate=function(){return!this.filter.inputNameValuePair||Util.isSafeString(this.filter.inputNameValuePair.name)&&Util.isSafeString(this.filter.inputNameValuePair.value)?!0:(NotificationService.instance().displayError(this.getString("ms_safeStringValidationError"),""),!1)},NameValuePairFilterController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.validate()&&_this.handle_UPDATE()}),this._closeDropdownHandler},NameValuePairFilterController.prototype.onSelectedOptionChange=function(){this.setChangeFlag()},NameValuePairFilterController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService"],NameValuePairFilterController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.NameValuePairFilterController=NameValuePairFilterController,adComponentsModule.controller("NameValuePairFilterController",NameValuePairFilterController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/generic/healthFilter/HealthFilterSelector",["require","exports","../../../../../components/filterBar/filterTypes/FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var HealthFilterSelectorController=function(_super){function HealthFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,$scope.controller=this,this.init()}return __extends(HealthFilterSelectorController,_super),HealthFilterSelectorController.prototype.init=function(){this.setupViewFromFilter()},HealthFilterSelectorController.prototype.watchFilter=function(newVal){this.filter=newVal,this.setupViewFromFilter()},HealthFilterSelectorController.prototype.setupViewFromFilter=function(){var _this=this;this.listData=[],_.map(this.HEALTH_FILTER_LABELS,function(healthFilterLabelConstant){var filterSelectorListItem={};filterSelectorListItem.listItem=healthFilterLabelConstant,filterSelectorListItem.selected=_this.isHealthSelected(healthFilterLabelConstant),filterSelectorListItem.iconPath=ImageUtil.getSvgHealthIcon(healthFilterLabelConstant),_this.listData.push(filterSelectorListItem)})},HealthFilterSelectorController.prototype.isHealthSelected=function(healthLabel){if(this.filter){var filter=this.filter;if(filter&&filter.selectedHealthLabels)return-1!=filter.selectedHealthLabels.indexOf(healthLabel)}return!1},HealthFilterSelectorController.prototype.getSelectedItems=function(){var _this=this,selectedDbServerHealths=[];return _.each(this.listData,function(selectedFilterSelectorListItem){selectedFilterSelectorListItem.selected&&selectedDbServerHealths.push(_this.getLabelForHealth(selectedFilterSelectorListItem.listItem))}),selectedDbServerHealths},HealthFilterSelectorController.prototype.getSummaryString=function(truncate){void 0===truncate&&(truncate=!0);var selectedDbServerHealths=this.getSelectedItems();if(0==selectedDbServerHealths.length)return"None Selected";selectedDbServerHealths.sort();var summary="";if(truncate)summary+="("+selectedDbServerHealths.length+") "+selectedDbServerHealths[0]+(selectedDbServerHealths.length>1?", ...":""),summary=StringUtils.truncateString(summary,FilterSelectorControllerBase.FilterSelectorControllerBase.MAX_FILTER_TEXT_LENGTH,!0);else for(var i=0;i<selectedDbServerHealths.length;i++)summary+=selectedDbServerHealths[i]+" ";return summary},HealthFilterSelectorController.prototype.getFullSummaryString=function($event){var selectedHealthLabels=this.getSelectedItems();return 0==selectedHealthLabels.length?void($event.currentTarget.title="None Selected"):(selectedHealthLabels.sort(),void($event.currentTarget.title=selectedHealthLabels.join()))},HealthFilterSelectorController.prototype.getLabelForHealth=function(){return"Provide your own labels"},HealthFilterSelectorController.prototype.clearFilterValues=function(){this.filter&&(this.filter.selectedHealthLabels=[])},HealthFilterSelectorController.prototype.getClickHandler=function(selected,adOptionalData){this.onSelectHealth(selected,adOptionalData)},HealthFilterSelectorController.prototype.onSelectHealth=function(selected,selectedFilterSelectorListItem){if(selectedFilterSelectorListItem){var filter=this.filter;if(filter){_.isUndefined(filter.selectedHealthLabels)&&(filter.selectedHealthLabels=[]);var healthLabel=selectedFilterSelectorListItem.listItem,index=filter.selectedHealthLabels.indexOf(healthLabel);-1==index?selected&&filter.selectedHealthLabels.push(healthLabel):selected||filter.selectedHealthLabels.splice(index,1),this.broadcastFilterUpdatedEvent()}}},HealthFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService"],HealthFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.HealthFilterSelectorController=HealthFilterSelectorController,adComponentsModule.controller("HealthFilterSelectorController",HealthFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/userExperience/UserExperienceFilterSelector",["require","exports","../../FilterSelectorControllerBase","../../generic/healthFilter/HealthFilterSelector"],function(require,exports,FilterSelectorControllerBase,HealthFilterSelectorController){var UserExperienceFilterSelectorDirective=function(){function UserExperienceFilterSelectorDirective(){return{restrict:"E",controller:"UserExperienceFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/generic/healthFilter/HealthFilterSelector.html",scope:{filter:"=adFilter",applicationId:"=adApplicationId"}}}return UserExperienceFilterSelectorDirective.$inject=[],UserExperienceFilterSelectorDirective}();exports.UserExperienceFilterSelectorDirective=UserExperienceFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-user-experience-filter-selector"),UserExperienceFilterSelectorDirective);var UserExperienceFilterSelectorController=function(_super){function UserExperienceFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,$scope.controller=this,this.HEALTH_FILTER_LABELS=[RequestUserExperience.NORMAL,RequestUserExperience.SLOW,RequestUserExperience.VERY_SLOW,RequestUserExperience.STALL,RequestUserExperience.ERROR],this.init()}return __extends(UserExperienceFilterSelectorController,_super),UserExperienceFilterSelectorController.prototype.setupViewFromFilter=function(){var _this=this;this.listData=[],_.map(this.HEALTH_FILTER_LABELS,function(userExperienceConstant){var filterSelectorListItem={};filterSelectorListItem.listItem=userExperienceConstant,filterSelectorListItem.selected=_this.isHealthSelected(userExperienceConstant),filterSelectorListItem.iconPath=ImageUtil.getRequestExperienceIconURL(userExperienceConstant),_this.listData.push(filterSelectorListItem)})},UserExperienceFilterSelectorController.prototype.getLabelForHealth=function(requestUserExperience){return StringUtils.isNullOrEmptyString(requestUserExperience)?"":RequestUserExperience.NORMAL===requestUserExperience?"Normal":RequestUserExperience.SLOW===requestUserExperience?"Slow":RequestUserExperience.VERY_SLOW===requestUserExperience?"Very Slow":RequestUserExperience.STALL===requestUserExperience?"Stall":RequestUserExperience.ERROR===requestUserExperience?"Error":void 0},UserExperienceFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService"],UserExperienceFilterSelectorController}(HealthFilterSelectorController.HealthFilterSelectorController);exports.UserExperienceFilterSelectorController=UserExperienceFilterSelectorController,adComponentsModule.controller("UserExperienceFilterSelectorController",UserExperienceFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/businessTransaction/BTFilterSelector",["require","exports","../../FilterSelectorControllerBase","../../ApplicationScopedFilterSelector"],function(require,exports,FilterSelectorControllerBase,ApplicationFilterSelector){var BusinessTransactionFilterSelectorDirective=function(){function BusinessTransactionFilterSelectorDirective(){return{restrict:"E",controller:"BusinessTransactionFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/custom/businessTransaction/BTFilterSelector.html",scope:{filter:"=adFilter",applicationId:"=adApplicationId"}}}return BusinessTransactionFilterSelectorDirective.$inject=[],BusinessTransactionFilterSelectorDirective}();exports.BusinessTransactionFilterSelectorDirective=BusinessTransactionFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-business-transaction-filter-selector"),BusinessTransactionFilterSelectorDirective);var BusinessTransactionFilterSelectorController=function(_super){function BusinessTransactionFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService,businessTransactionUiService,timeRangeService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.businessTransactionUiService=businessTransactionUiService,this.timeRangeService=timeRangeService,this.btListData=[],$scope.controller=this}return __extends(BusinessTransactionFilterSelectorController,_super),BusinessTransactionFilterSelectorController.getEntityFromBtListEntry=function(btListEntry){var btEntity={};return btEntity.entityDefinition=EntityUtils.getEntityDefinition(EntityType.BUSINESS_TRANSACTION,btListEntry.id),btEntity.name=btListEntry.name,btEntity.id=btListEntry.id,btEntity.type=btListEntry.entryPointType,btEntity},BusinessTransactionFilterSelectorController.prototype.getSummaryString=function(truncate){return void 0===truncate&&(truncate=!0),this.getSummaryStringForEntityList(truncate)},BusinessTransactionFilterSelectorController.prototype.watchApplicationId=function(newVal,oldVal,scope){_super.prototype.watchApplicationId.call(this,newVal,oldVal,scope),this.filter&&newVal!=oldVal&&(this.filter.selectedEntities=[]),this.fetchData()},BusinessTransactionFilterSelectorController.prototype.onHide=function(){this.buildSelectedAndUnselectedArrays()},BusinessTransactionFilterSelectorController.prototype.fetchData=function(){var _this=this;return this.applicationId<=0?(this.listData=[],void this.populateFilterFromListData()):void this.businessTransactionUiService.getBusinessTransactions(this.applicationId).then(function(response){_this.btListData=_this.businessTransactionUiService.getBusinessTransactions_response(response),_this.setupListDataFromModel()})},BusinessTransactionFilterSelectorController.prototype.setupListDataFromModel=function(){if(this.listData=[],this.btListData&&this.filter)for(var i=0;i<this.btListData.length;i++){var listItem={};listItem.selected=this.isBtSelectedInFilter(this.btListData[i],this.filter),listItem.listItem=this.btListData[i],listItem.iconPath=ImageUtil.getIconForBusinessTransactionType2(this.btListData[i]),this.listData.push(listItem)}this.buildSelectedAndUnselectedArrays()},BusinessTransactionFilterSelectorController.prototype.isBtSelectedInFilter=function(bt,filter){if(bt&&filter&&Util.isDefAndNotNull(filter.selectedEntities)){var btEntityFilter=filter;if(btEntityFilter&&btEntityFilter.selectedEntities){var btEntity={};btEntity.entityDefinition={},btEntity.entityDefinition.entityId=bt.id,btEntity.entityDefinition.entityType=EntityType.BUSINESS_TRANSACTION,btEntity.id=bt.id,btEntity.name=bt.name;var index=EntityUtils.getIndexForEntity(btEntity,btEntityFilter.selectedEntities);if(-1!=index)return!0}}return!1},BusinessTransactionFilterSelectorController.prototype.watchFilter=function(newVal){this.filter=newVal,this.setupListDataFromModel()},BusinessTransactionFilterSelectorController.prototype.selectAll=function(){_super.prototype.selectAll.call(this),this.populateFilterFromListData()},BusinessTransactionFilterSelectorController.prototype.deselectAll=function(){_super.prototype.deselectAll.call(this),this.populateFilterFromListData()},BusinessTransactionFilterSelectorController.prototype.populateFilterFromListData=function(){var entityFilter=this.filter;entityFilter.selectedEntities=[];for(var btEntity,i=0;i<this.listData.length;i++)this.listData[i].selected&&(btEntity=BusinessTransactionFilterSelectorController.getEntityFromBtListEntry(this.listData[i].listItem),entityFilter.selectedEntities.push(btEntity));this.broadcastFilterUpdatedEvent()},BusinessTransactionFilterSelectorController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.buildSelectedAndUnselectedArrays()}),this._closeDropdownHandler},BusinessTransactionFilterSelectorController.prototype.clearFilterValues=function(){var btFilter=this.filter;btFilter.selectedEntities=[]},BusinessTransactionFilterSelectorController.prototype.getLabelFromItem=function(listItem){var btEntity=BusinessTransactionFilterSelectorController.getEntityFromBtListEntry(listItem.listItem);return btEntity?btEntity.name:_super.prototype.getLabelFromItem.call(this,listItem)},BusinessTransactionFilterSelectorController.prototype.onBtCheckboxChange=function(selected,filterSelectorListItem){if(filterSelectorListItem){var entityFilter=this.filter;if(entityFilter){var bt=filterSelectorListItem.listItem,btEntity=BusinessTransactionFilterSelectorController.getEntityFromBtListEntry(bt),index=EntityUtils.getIndexForEntity(btEntity,entityFilter.selectedEntities);-1==index?selected&&entityFilter.selectedEntities.push(btEntity):selected||entityFilter.selectedEntities.splice(index,1),this.broadcastFilterUpdatedEvent()}}},BusinessTransactionFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService","businessTransactionUiService","timeRangeService"],BusinessTransactionFilterSelectorController}(ApplicationFilterSelector.ApplicationScopedFilterSelectorController);exports.BusinessTransactionFilterSelectorController=BusinessTransactionFilterSelectorController,adComponentsModule.controller("BusinessTransactionFilterSelectorController",BusinessTransactionFilterSelectorController)
});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/error/ErrorFilterSelector",["require","exports","../../FilterSelectorControllerBase","../../EntityListFilterSelector"],function(require,exports,FilterSelectorControllerBase,EntityListFilterSelector){var ErrorFilterSelectorDirective=function(){function ErrorFilterSelectorDirective(){return{restrict:"E",controller:"ErrorFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/custom/error/ErrorFilterSelector.html",scope:{filter:"=adFilter",applicationId:"=adApplicationId"}}}return ErrorFilterSelectorDirective.$inject=[],ErrorFilterSelectorDirective}();exports.ErrorFilterSelectorDirective=ErrorFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-error-filter-selector"),ErrorFilterSelectorDirective);var ErrorFilterSelectorController=function(_super){function ErrorFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.errorAdds=[],$scope.controller=this,this._componentCache=ApplicationsCache.instance().getEntityCache(EntityType.APPLICATION_COMPONENT,this.getApplicationIdFromUrl()),this._componentCache&&this._componentCache.getEntities(!0)}return __extends(ErrorFilterSelectorController,_super),ErrorFilterSelectorController.prototype.fetchData=function(){var _this=this;Util.isValidId(this.applicationId)&&ErrorsUiService.instance().getApplicationErrors(this.applicationId).then(function(response){_this.errorAdds=response,_this.setupListDataFromModel()})},ErrorFilterSelectorController.prototype.setupListDataFromModel=function(){var _this=this;this.listData=[],this.errorAdds.forEach(function(applicationDiagnosticData){var tier=_this._componentCache.getComponentById(applicationDiagnosticData.applicationComponentId);applicationDiagnosticData.name=applicationDiagnosticData.name+" ("+_this.getString("ms_tier")+": "+(Util.isDefAndNotNull(tier)?tier.name:MetricUtil.NO_DATA_DISPLAY_STRING)+")",_this.listData.push({listItem:applicationDiagnosticData,selected:_this.isErrorAddSelectedInModel(applicationDiagnosticData),iconPath:ImageUtil.iconNavErrors})}),this.buildSelectedAndUnselectedArrays()},ErrorFilterSelectorController.prototype.getEntityForListItem=function(filterSelectorListItem){var selectedEntity=EntityUtils.getErrorEntity(filterSelectorListItem.listItem);return selectedEntity},ErrorFilterSelectorController.prototype.isErrorAddSelectedInModel=function(errorAdd){var errorFilter=this.filter;if(errorAdd&&errorFilter&&Util.isDefAndNotEmptyArray(errorFilter.selectedEntities)){var errorEntity=EntityUtils.getErrorEntity(errorAdd);return-1!==EntityUtils.getIndexForEntity(errorEntity,errorFilter.selectedEntities)}return!1},ErrorFilterSelectorController.prototype.getSummaryString=function(truncate){return void 0===truncate&&(truncate=!0),this.getSummaryStringForEntityList(truncate)},ErrorFilterSelectorController.prototype.getFullSummaryString=function($event){var errorFilter=this.filter;if(_.isUndefined(errorFilter.selectedEntities)&&(errorFilter.selectedEntities=[]),errorFilter.selectedEntities.length>0){var summaryArray=_.pluck(errorFilter.selectedEntities,"name");$event.currentTarget.title=summaryArray.join()}else $event.currentTarget.title=this.getString("ms_notSpecified")},ErrorFilterSelectorController.prototype.selectAll=function(){_super.prototype.selectAll.call(this),this.populateFilterFromListData()},ErrorFilterSelectorController.prototype.deselectAll=function(){_super.prototype.deselectAll.call(this),this.populateFilterFromListData()},ErrorFilterSelectorController.prototype.populateFilterFromListData=function(){this.clearFilterValues();var errorFilter=this.filter;this.listData.forEach(function(filterSelectorListItem){filterSelectorListItem.selected&&errorFilter.selectedEntities.push(EntityUtils.getErrorEntity(filterSelectorListItem.listItem))}),this.broadcastFilterUpdatedEvent()},ErrorFilterSelectorController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.buildSelectedAndUnselectedArrays()}),this._closeDropdownHandler},ErrorFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService"],ErrorFilterSelectorController}(EntityListFilterSelector.EntityListFilterSelectorController);exports.ErrorFilterSelectorController=ErrorFilterSelectorController,adComponentsModule.controller("ErrorFilterSelectorController",ErrorFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/searchInputText/SearchInputTextFilterSelector",["require","exports","../../FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var SearchInputTextFilterSelectorDirective=function(){function SearchInputTextFilterSelectorDirective(){return{restrict:"E",controller:"SearchInputTextFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/custom/searchInputText/SearchInputTextFilterSelector.html",scope:{filter:"=adFilter",applicationId:"=adApplicationId"}}}return SearchInputTextFilterSelectorDirective.$inject=[],SearchInputTextFilterSelectorDirective}();exports.SearchInputTextFilterSelectorDirective=SearchInputTextFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-search-input-text-filter-selector"),SearchInputTextFilterSelectorDirective);var SearchInputTextFilterSelectorController=function(_super){function SearchInputTextFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,$scope.controller=this}return __extends(SearchInputTextFilterSelectorController,_super),SearchInputTextFilterSelectorController.prototype.validate=function(){var searchInputFilter=this.filter;return FilterSet.validateStringQuery(searchInputFilter.searchInputText)?!0:!1},SearchInputTextFilterSelectorController.prototype.handle_UPDATE=function(){this.validate()&&this.broadcastFilterUpdatedEvent(!1)},SearchInputTextFilterSelectorController.prototype.onKeyUp=function(){this.validate()&&this.broadcastFilterUpdatedEvent(!1)},SearchInputTextFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService"],SearchInputTextFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.SearchInputTextFilterSelectorController=SearchInputTextFilterSelectorController,adComponentsModule.controller("SearchInputTextFilterSelectorController",SearchInputTextFilterSelectorController)}),define("app/view/analytics/adql/clientApi/util/ADQLClientStringUtil",["require","exports"],function(){var ADQLClientStringUtil=function(){function ADQLClientStringUtil(){}return ADQLClientStringUtil.splitAndTrimIgnoreCase=function(inputString,wordBoundary){for(var tokens=[],_i=2;_i<arguments.length;_i++)tokens[_i-2]=arguments[_i];if(StringUtils.isNullOrEmptyString(inputString)||null===tokens||0===tokens.length)return null;wordBoundary===!0&&(tokens=tokens.map(function(resultToken){return"\\b"+resultToken.trim()+"\\b"}));var resultArray=inputString.split(new RegExp(tokens.join("|"),"gi")).filter(Boolean);return resultArray.map(function(resultToken){return resultToken.trim()})},ADQLClientStringUtil.splitOnCommasExcludingParenthesis=function(clause){var results=[];if(clause){for(var parenthesis=0,i=0;i<clause.length;i++){var char=clause[i];switch(char){case"(":++parenthesis;break;case")":--parenthesis;break;case",":if(!parenthesis){var current=clause.slice(0,i),remainder=clause.slice(i+1);results.push(current),clause=remainder,i=0}}}clause&&results.push(clause)}return results.map(function(resultToken){return resultToken.trim()})},ADQLClientStringUtil.splitFunction=function(expression){var results=[];if(expression){for(var parenthesis=0,i=0;i<expression.length;i++){var char=expression[i];switch(char){case"(":if(0===parenthesis){var current=expression.slice(0,i),remainder=expression.slice(i+1);results.push(current),expression=remainder,i=0}++parenthesis;break;case")":if(--parenthesis,0===parenthesis){var current=expression.slice(0,i),remainder=expression.slice(i+1);results.push(current),expression=remainder,i=0}}}expression&&results.push(expression)}return results.map(function(resultToken){return resultToken.trim()})},ADQLClientStringUtil.splitOnAlias=function(expression){return StringUtils.splitAndTrimIgnoreCase(expression,!1," AS ")},ADQLClientStringUtil.parseFunction=function(expression){var regex=new RegExp("(?:(distinct) ((?:\\w+|\\.|`[\\w() ]+`)+))|(?:(\\w*)\\((.*)\\))");return _.reject(expression.match(regex),function(match,index){return match&&index>0?!1:!0})},ADQLClientStringUtil.encloseStringInParenthesis=function(inputString){return inputString?"("+inputString+")":inputString},ADQLClientStringUtil.encloseInDoubleQuotes=function(inputString){return inputString?'"'+inputString+'"':inputString},ADQLClientStringUtil.encloseInSingleQuotes=function(inputString){return inputString?"'"+inputString+"'":inputString},ADQLClientStringUtil.trimSurroundingQuotes=function(inputString){return inputString&&(("'"===inputString.charAt(0)||'"'===inputString.charAt(0)||"`"===inputString.charAt(0))&&(inputString=inputString.substr(1)),("'"===inputString.charAt(inputString.length-1)||'"'===inputString.charAt(inputString.length-1)||"`"===inputString.charAt(inputString.length-1))&&(inputString=inputString.substr(0,inputString.length-1))),inputString},ADQLClientStringUtil}();return ADQLClientStringUtil}),define("app/view/analytics/adql/clientApi/query/where/conditions/ADQLConditionBase",["require","exports","../../../util/ADQLClientStringUtil"],function(require,exports,ADQLClientStringUtil){var ADQLConditionBase=function(){function ADQLConditionBase(enableParenthesis){void 0===enableParenthesis&&(enableParenthesis=!1),this.enableParenthesis=enableParenthesis}return ADQLConditionBase.prototype.showParenthesis=function(){this.enableParenthesis=!0},ADQLConditionBase.prototype.hideParenthesis=function(){this.enableParenthesis=!1},ADQLConditionBase.prototype.toString=function(){return this.enableParenthesis?ADQLClientStringUtil.encloseStringInParenthesis(this.conditionAsString):this.conditionAsString},ADQLConditionBase.FIELD_NAME_PATTERN="(\\w+|`[^`]+`)(\\.(\\w+|`[^`]+`))*",ADQLConditionBase.VALUE_PATTERN="(\"([^\"\\\\]*(\\.[^\"\\\\]*)*)\"|'([^'\\\\]*(\\.[^'\\\\]*)*)'|(\\d+))",ADQLConditionBase.SPACE_PATTERN="(\\s)*",ADQLConditionBase}();return ADQLConditionBase}),define("app/view/analytics/adql/clientApi/query/where/operators/ADQLOperatorBase",["require","exports"],function(){var ADQLOperatorBase=function(){function ADQLOperatorBase(value){this.value=value}return ADQLOperatorBase.prototype.toString=function(){return this.value},ADQLOperatorBase}();return ADQLOperatorBase});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/analytics/adql/clientApi/query/where/operators/ADQLComparisonOperator",["require","exports","./ADQLOperatorBase"],function(require,exports,ADQLOperatorBase){var ADQLComparisonOperator=function(_super){function ADQLComparisonOperator(value){_super.call(this,value)}return __extends(ADQLComparisonOperator,_super),ADQLComparisonOperator.EQ=new ADQLComparisonOperator("="),ADQLComparisonOperator.NOTEQ=new ADQLComparisonOperator("!="),ADQLComparisonOperator.GT=new ADQLComparisonOperator(">"),ADQLComparisonOperator.LT=new ADQLComparisonOperator("<"),ADQLComparisonOperator.GTEQ=new ADQLComparisonOperator(">="),ADQLComparisonOperator.LTEQ=new ADQLComparisonOperator("<="),ADQLComparisonOperator.OPERATOR_PATTERN="((!=)|(=)|(>=)|(<=)|(>)|(<)){1}",ADQLComparisonOperator}(ADQLOperatorBase);return ADQLComparisonOperator});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/analytics/adql/clientApi/query/where/conditions/ADQLComparisonCondition",["require","exports","../../../util/ADQLClientStringUtil","./ADQLConditionBase","../operators/ADQLComparisonOperator"],function(require,exports,ADQLClientStringUtil,ADQLConditionBase,ADQLComparisonOperator){var ADQLComparisonCondition=function(_super){function ADQLComparisonCondition(fieldName,operator,value,isNumeric){void 0===isNumeric&&(isNumeric=!1),_super.call(this,!1),this.fieldName=fieldName,this.operator=operator,this.value=value,this.isNumeric=isNumeric}return __extends(ADQLComparisonCondition,_super),ADQLComparisonCondition.prototype.getFieldName=function(){return this.fieldName},ADQLComparisonCondition.prototype.getOperator=function(){return this.operator},ADQLComparisonCondition.prototype.getValue=function(){return this.value},ADQLComparisonCondition.prototype.getIsNumeric=function(){return this.isNumeric},ADQLComparisonCondition.prototype.toString=function(){var str=[this.fieldName,this.operator.toString(),this.isNumeric?this.value:ADQLClientStringUtil.encloseInSingleQuotes(this.value)];return this.conditionAsString=str.join(" "),_super.prototype.toString.call(this)},ADQLComparisonCondition.isInstance=function(conditionAsString){var validRegExp=new RegExp("^"+ADQLConditionBase.FIELD_NAME_PATTERN+ADQLConditionBase.SPACE_PATTERN+ADQLComparisonOperator.OPERATOR_PATTERN+ADQLConditionBase.SPACE_PATTERN+ADQLConditionBase.VALUE_PATTERN+"$","i");return!!validRegExp.test(conditionAsString)},ADQLComparisonCondition.getInstance=function(conditionAsString){var fieldName=conditionAsString.match(new RegExp("^"+ADQLConditionBase.FIELD_NAME_PATTERN,"i"))[0],operator=conditionAsString.match(new RegExp(ADQLComparisonOperator.OPERATOR_PATTERN,"i"))[0],value=conditionAsString.match(new RegExp(ADQLConditionBase.VALUE_PATTERN+"$","i"))[0],isValueWrappedInSingleOrDoubleQuotes=StringUtils.isStringWrappedInDoubleQuotes(value)||StringUtils.isStringWrappedInSingleQuotes(value);return new ADQLComparisonCondition(fieldName,operator,value,!isValueWrappedInSingleOrDoubleQuotes)},ADQLComparisonCondition}(ADQLConditionBase);return ADQLComparisonCondition});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/analytics/adql/clientApi/query/where/operators/ADQLBooleanOperator",["require","exports","./ADQLOperatorBase"],function(require,exports,ADQLOperatorBase){var ADQLBooleanOperator=function(_super){function ADQLBooleanOperator(value){_super.call(this,value)}return __extends(ADQLBooleanOperator,_super),ADQLBooleanOperator.AND=new ADQLBooleanOperator("AND"),ADQLBooleanOperator.OR=new ADQLBooleanOperator("OR"),ADQLBooleanOperator.NOT=new ADQLBooleanOperator("NOT"),ADQLBooleanOperator}(ADQLOperatorBase);return ADQLBooleanOperator});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/analytics/adql/clientApi/query/where/conditions/ADQLComplexCondition",["require","exports","./ADQLConditionBase","../operators/ADQLBooleanOperator"],function(require,exports,ADQLConditionBase,ADQLBooleanOperator){var ADQLComplexCondition=function(_super){function ADQLComplexCondition(condition1,operator,condition2){_super.call(this,!1),this.condition1=condition1,this.operator=operator,this.condition2=condition2,condition1&&condition1.showParenthesis(),condition2&&condition2.showParenthesis(),this.operator.toString()===ADQLBooleanOperator.OR.toString()&&(this.showParenthesis(),this.condition1 instanceof ADQLComplexCondition&&this.condition1.showParenthesis(),this.condition2 instanceof ADQLComplexCondition&&this.condition2.showParenthesis())}return __extends(ADQLComplexCondition,_super),ADQLComplexCondition.prototype.getCondition1=function(){return this.condition1},ADQLComplexCondition.prototype.getOperator=function(){return this.operator},ADQLComplexCondition.prototype.getCondition2=function(){return this.condition2},ADQLComplexCondition.prototype.toString=function(){var str=[this.condition1.toString(),this.operator.toString(),this.condition2.toString()];return this.conditionAsString=str.join(" "),_super.prototype.toString.call(this)},ADQLComplexCondition}(ADQLConditionBase);return ADQLComplexCondition});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filters/Adql/AdqlFilter",["require","exports","../../../../analytics/adql/clientApi/query/where/conditions/ADQLComparisonCondition","../../../../analytics/adql/clientApi/query/where/operators/ADQLComparisonOperator","../../../../analytics/adql/clientApi/query/where/conditions/ADQLComplexCondition","../../../../analytics/adql/clientApi/query/where/operators/ADQLBooleanOperator"],function(require,exports,ADQLComparisonCondition,ADQLComparisonOperator,ADQLComplexCondition,ADQLBooleanOperator){var AdqlFilter=function(_super){function AdqlFilter(autoFetchOptions){void 0===autoFetchOptions&&(autoFetchOptions=!0),_super.call(this,autoFetchOptions)}return __extends(AdqlFilter,_super),AdqlFilter.prototype.getADQLCondition=function(){return this.generateADQLCondition()},AdqlFilter.prototype.generateADQLCondition=function(){var _this=this,entityConditions=[];return this.fieldValues?(this.fieldValues.forEach(function(fieldValue){var notConditionMatch=fieldValue.match(/^NOT\s*\w+/);notConditionMatch&&notConditionMatch.length>0?(fieldValue=fieldValue.substr(3,fieldValue.length-1).trim(),entityConditions.push(new ADQLComparisonCondition(_this.fieldName,ADQLComparisonOperator.NOTEQ,fieldValue,!1))):entityConditions.push(new ADQLComparisonCondition(_this.fieldName,ADQLComparisonOperator.EQ,fieldValue,!1))}),entityConditions.length>1?this.generateComplexCondition(entityConditions,ADQLBooleanOperator.OR):entityConditions[0]):null},AdqlFilter.prototype.generateComplexCondition=function(queryConditions,operator){for(var complexCondition=null,i=0;i<queryConditions.length;)Util.isUndefOrNull(complexCondition)?(complexCondition=new ADQLComplexCondition(queryConditions[i],operator,queryConditions[i+1]),i+=2):(complexCondition=new ADQLComplexCondition(complexCondition,operator,queryConditions[i]),i+=1);return complexCondition},AdqlFilter}(FilterBase);return AdqlFilter}),define("app/view/components/filterBar/filters/Adql/AdqlEntityFilter",["require","exports","./AdqlFilter","../../../../analytics/adql/clientApi/query/where/conditions/ADQLComparisonCondition","../../../../analytics/adql/clientApi/query/where/operators/ADQLComparisonOperator","../../../../analytics/adql/clientApi/query/where/operators/ADQLBooleanOperator"],function(require,exports,AdqlFilter,ADQLComparisonCondition,ADQLComparisonOperator,ADQLBooleanOperator){var AdqlEntityFilter=function(){function AdqlEntityFilter(){this.selectedEntities=[]}return AdqlEntityFilter.prototype.getEntityQueryCondition=function(){var _this=this,entityConditions=[];return this.selectedEntities.forEach(function(entity){entityConditions.push(new ADQLComparisonCondition(_this.fieldName,ADQLComparisonOperator.EQ,entity.name,!1))}),entityConditions.length>1?this.generateComplexCondition(entityConditions,ADQLBooleanOperator.OR):entityConditions[0]},AdqlEntityFilter}();return MultipleInheritanceUtil.applyMixins(AdqlEntityFilter,[AdqlFilter]),AdqlEntityFilter}),define("app/view/components/filterBar/filters/Adql/AdqlApplicationFilter",["require","exports","./AdqlEntityFilter"],function(require,exports,AdqlEntityFilter){var AdqlApplicationFilter=function(){function AdqlApplicationFilter(filter){this.selectedEntities=[],Util.isUndefOrNull(filter)?this.setFields():(this.setFields(),this.fieldValues=filter.fieldValues,this.autoFetchOptions=filter.autoFetchOptions,this.selectedEntities=filter.selectedEntities),this.parameters.push({name:"ad-fetch-analytics-applications",value:"true"})}return AdqlApplicationFilter.prototype.getADQLCondition=function(){return this.getEntityQueryCondition()},AdqlApplicationFilter}();return MultipleInheritanceUtil.applyMixins(AdqlApplicationFilter,[ApplicationFilter,AdqlEntityFilter]),AdqlApplicationFilter}),define("app/view/components/filterBar/filters/Adql/AdqlBusinessTransactionFilter",["require","exports","../../../../analytics/adql/clientApi/query/where/conditions/ADQLComparisonCondition","../../../../analytics/adql/clientApi/query/where/operators/ADQLComparisonOperator","../../../../analytics/adql/clientApi/query/where/operators/ADQLBooleanOperator","./AdqlEntityFilter"],function(require,exports,ADQLComparisonCondition,ADQLComparisonOperator,ADQLBooleanOperator,AdqlEntityFilter){var AdqlBusinessTransactionFilter=function(){function AdqlBusinessTransactionFilter(filter){this.selectedEntities=[],Util.isUndefOrNull(filter)?this.setFields():(this.setFields(),this.fieldValues=filter.fieldValues,this.selectedEntities=filter.selectedEntities,this.autoFetchOptions=filter.autoFetchOptions),this.fieldName=AnalyticsField.transactionName}return AdqlBusinessTransactionFilter.prototype.getADQLCondition=function(){var _this=this;this.fieldValues=this.getBtNameSearchCriterias(this.selectedEntities);var entityConditions=[];return this.fieldValues.forEach(function(fieldValue){entityConditions.push(new ADQLComparisonCondition(_this.fieldName,ADQLComparisonOperator.EQ,fieldValue,!1))}),entityConditions.length>1?this.generateComplexCondition(entityConditions,ADQLBooleanOperator.OR):entityConditions[0]},AdqlBusinessTransactionFilter}();return MultipleInheritanceUtil.applyMixins(AdqlBusinessTransactionFilter,[BusinessTransactionFilter,AdqlEntityFilter]),AdqlBusinessTransactionFilter}),define("app/view/components/filterBar/filters/Adql/AdqlTextFilter",["require","exports","./AdqlFilter"],function(require,exports,AdqlFilter){var AdqlTextFilter=function(){function AdqlTextFilter(filter){Util.isUndefOrNull(filter)?this.setFields():(this.setFields(),this.fieldValues=filter.fieldValues,this.databaseField=filter.databaseField,this.selectedAnalyticsField=filter.selectedAnalyticsField,this.selectedValue=filter.selectedValue,this.autoFetchOptions=filter.autoFetchOptions)}return AdqlTextFilter.prototype.getADQLCondition=function(){if(!this.selectedValue)return null;this.fieldValues=[],this.fieldName=this.selectedAnalyticsField.getFullPath();var selectedValue=this.selectedValue;return StringUtils.isNullOrEmptyString(selectedValue)||(StringUtils.isStringWrappedInDoubleQuotes(selectedValue)?(selectedValue=StringUtils.trimSurroundingDoubleQuotes(selectedValue),this.fieldValues.push(selectedValue)):(selectedValue=selectedValue.replace(/( or )/gi," OR "),this.fieldValues=selectedValue.split(" OR "))),this.generateADQLCondition()},AdqlTextFilter}();return MultipleInheritanceUtil.applyMixins(AdqlTextFilter,[TextFilter,AdqlFilter]),AdqlTextFilter}),define("app/view/components/filterBar/filters/Adql/AdqlNumericFilter",["require","exports","../../../../analytics/adql/clientApi/query/where/conditions/ADQLComparisonCondition","../../../../analytics/adql/clientApi/query/where/operators/ADQLComparisonOperator","../../../../analytics/adql/clientApi/query/where/operators/ADQLBooleanOperator","./AdqlFilter"],function(require,exports,ADQLComparisonCondition,ADQLComparisonOperator,ADQLBooleanOperator,AdqlFilter){var AdqlNumericFilter=function(){function AdqlNumericFilter(viewOpts,filter){void 0===viewOpts&&(viewOpts=[]),this.viewOpts=viewOpts,this.lowerThreshold="",this.higherThreshold="",this.equalityValue="",Util.isUndefOrNull(filter)?this.setFields(viewOpts):(this.setFields(filter.viewOpts),this.fieldValues=filter.fieldValues,this.equalityValue=filter.equalityValue,this.databaseField=filter.databaseField,this.higherThreshold=filter.higherThreshold,this.lowerThreshold=filter.lowerThreshold,this.analyticsField=filter.analyticsField,this.selectedOperator=filter.selectedOperator,this.autoFetchOptions=filter.autoFetchOptions)}return AdqlNumericFilter.prototype.getADQLCondition=function(){var value="";if(this.fieldName=this.analyticsField.getFullPath(),this.selectedOperator.value===AnalyticsUtils.RANGE){var queryConditions=[];return queryConditions.push(new ADQLComparisonCondition(this.fieldName,ADQLComparisonOperator.GTEQ,this.lowerThreshold,!0)),queryConditions.push(new ADQLComparisonCondition(this.fieldName,ADQLComparisonOperator.LTEQ,this.higherThreshold,!0)),this.generateComplexCondition(queryConditions,ADQLBooleanOperator.AND)}var selectedOperator=ADQLComparisonOperator.EQ;switch(this.selectedOperator.value){case AnalyticsUtils.GREATER_THAN_OR_EQUAL:selectedOperator=ADQLComparisonOperator.GTEQ,StringUtils.isNullOrEmptyString(this.lowerThreshold)&&(this.lowerThreshold=this.equalityValue),value=this.lowerThreshold;break;case AnalyticsUtils.LESS_THAN_OR_EQUAL:selectedOperator=ADQLComparisonOperator.LTEQ,StringUtils.isNullOrEmptyString(this.higherThreshold)&&(this.higherThreshold=this.equalityValue),value=this.higherThreshold;break;case AnalyticsUtils.EQUALS:selectedOperator=ADQLComparisonOperator.EQ,value=this.equalityValue;break;case AnalyticsUtils.NOT_EQUALS:selectedOperator=ADQLComparisonOperator.NOTEQ,value=this.equalityValue}return new ADQLComparisonCondition(this.fieldName,selectedOperator,value,!0)},AdqlNumericFilter}();return MultipleInheritanceUtil.applyMixins(AdqlNumericFilter,[NumericFilter,AdqlFilter]),AdqlNumericFilter});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/analytics/adql/clientApi/query/where/conditions/ADQLLikeCondition",["require","exports","./ADQLConditionBase","../../../util/ADQLClientStringUtil"],function(require,exports,ADQLConditionBase,ADQLClientStringUtil){var ADQLLikeCondition=function(_super){function ADQLLikeCondition(fieldName,value,notLike){void 0===notLike&&(notLike=!1),_super.call(this,!1),this.fieldName=fieldName,this.value=value,this.notLike=notLike}return __extends(ADQLLikeCondition,_super),ADQLLikeCondition.prototype.getFieldName=function(){return this.fieldName},ADQLLikeCondition.prototype.getValue=function(){return this.value},ADQLLikeCondition.prototype.toString=function(){var str=[this.fieldName,this.notLike?ADQLLikeCondition.NOT_LIKE:ADQLLikeCondition.LIKE,ADQLClientStringUtil.encloseInSingleQuotes(this.value)];return this.conditionAsString=str.join(" "),_super.prototype.toString.call(this)},ADQLLikeCondition.isInstance=function(conditionAsString){var validRegExp=new RegExp(ADQLConditionBase.FIELD_NAME_PATTERN+ADQLConditionBase.SPACE_PATTERN+ADQLLikeCondition.OPERATOR_PATTERN+ADQLConditionBase.SPACE_PATTERN+ADQLConditionBase.VALUE_PATTERN,"i");return!!validRegExp.test(conditionAsString)},ADQLLikeCondition.getInstance=function(conditionAsString){var fieldName=conditionAsString.match(new RegExp(ADQLConditionBase.FIELD_NAME_PATTERN,"i"))[0],value=conditionAsString.match(new RegExp(ADQLLikeCondition.VALUE_PATTERN,"i"))[0];return new ADQLLikeCondition(fieldName,value)},ADQLLikeCondition.LIKE="LIKE",ADQLLikeCondition.NOT_LIKE="NOT LIKE",ADQLLikeCondition.OPERATOR_PATTERN="LIKE",ADQLLikeCondition}(ADQLConditionBase);return ADQLLikeCondition}),define("app/view/components/filterBar/filters/Adql/AdqlSearchInputTextFilter",["require","exports","../../../../analytics/adql/clientApi/query/where/conditions/ADQLLikeCondition","./AdqlFilter"],function(require,exports,ADQLLikeCondition,AdqlFilter){var AdqlSearchInputTextFilter=function(){function AdqlSearchInputTextFilter(filter){Util.isUndefOrNull(filter)?this.setFields():(this.setFields(),this.fieldValues=filter.fieldValues,this.searchInputText=filter.searchInputText,this.selectedAnalyticsField=filter.selectedAnalyticsField,this.autoFetchOptions=filter.autoFetchOptions)}return AdqlSearchInputTextFilter.prototype.getADQLCondition=function(){if(this.fieldValues=[],this.selectedAnalyticsField&&this.selectedAnalyticsField.fieldDefinition&&AnalyticsUtils.isFieldDefinitionAnalyzed(this.selectedAnalyticsField.fieldDefinition)){this.fieldName=AnalyticsFields.getFullPathForFieldDefinition(this.selectedAnalyticsField.fieldDefinition);var valueBeingSearched=this.searchInputText,isNotLikeCondition=!1,notMatchCondition=this.searchInputText.match(/^NOT\s*\w+/);return notMatchCondition&&notMatchCondition.length>0&&(valueBeingSearched=this.searchInputText.substr(3,this.searchInputText.length-1).trim(),isNotLikeCondition=!0),this.fieldValues.push(valueBeingSearched),new ADQLLikeCondition(this.fieldName,this.fieldValues[0],isNotLikeCondition)}},AdqlSearchInputTextFilter}();return MultipleInheritanceUtil.applyMixins(AdqlSearchInputTextFilter,[SearchInputTextFilter,AdqlFilter]),AdqlSearchInputTextFilter}),define("app/view/analytics/adql/clientApi/query/from/ADQLClientQueryFrom",["require","exports","../../util/ADQLClientStringUtil"],function(require,exports,ADQLClientStringUtil){var ADQLClientQueryFrom=function(){function ADQLClientQueryFrom(from,alias){this.from=from,this.alias=alias}return ADQLClientQueryFrom.prototype.isValid=function(){return!0},ADQLClientQueryFrom.prototype.toString=function(){return this.alias?this.from+" "+ADQLClientQueryFrom.AS+" "+ADQLClientStringUtil.encloseInDoubleQuotes(this.alias):this.from},ADQLClientQueryFrom.getIndexFromDataSource=function(dataSource){var dataSourceString=dataSource;switch(dataSourceString.toLowerCase()){case AnalyticsDataSource.TRANSACTION:case AnalyticsDataSource.TRANSACTIONS:return AnalyticsIndexType.BIZ_TXN;case AnalyticsDataSource.LOG:case AnalyticsDataSource.LOGS:return AnalyticsIndexType.LOG;case AnalyticsDataSource.BROWSERRECORD:case AnalyticsDataSource.BROWSERRECORDS:case AnalyticsDataSource.BROWSER_RECORD:case AnalyticsDataSource.BROWSER_RECORDS:return AnalyticsIndexType.BROWSER_RECORD;case AnalyticsDataSource.MOBILESNAPSHOT:case AnalyticsDataSource.MOBILESNAPSHOTS:case AnalyticsDataSource.MOBILE_SNAPSHOT:case AnalyticsDataSource.MOBILE_SNAPSHOTS:return AnalyticsIndexType.MOBILE_SNAPSHOT;case AnalyticsDataSource.MOBILECRASHREPORT:case AnalyticsDataSource.MOBILECRASHREPORTS:case AnalyticsDataSource.MOBILE_CRASH_REPORT:case AnalyticsDataSource.MOBILE_CRASH_REPORTS:return AnalyticsIndexType.MOBILE_CRASH_REPORT;default:return dataSource.toString()}},ADQLClientQueryFrom.getUnAliasedDataSource=function(dataSource){var dataSourceString=dataSource;switch(dataSourceString.toLowerCase()){case AnalyticsDataSource.TRANSACTION:case AnalyticsDataSource.TRANSACTIONS:return AnalyticsDataSource.TRANSACTIONS;case AnalyticsDataSource.LOG:case AnalyticsDataSource.LOGS:return AnalyticsDataSource.LOGS;case AnalyticsDataSource.BROWSERRECORD:case AnalyticsDataSource.BROWSERRECORDS:case AnalyticsDataSource.BROWSER_RECORD:case AnalyticsDataSource.BROWSER_RECORDS:return AnalyticsDataSource.BROWSERRECORDS;case AnalyticsDataSource.MOBILESNAPSHOT:case AnalyticsDataSource.MOBILESNAPSHOTS:case AnalyticsDataSource.MOBILE_SNAPSHOT:case AnalyticsDataSource.MOBILE_SNAPSHOTS:return AnalyticsDataSource.MOBILESNAPSHOTS;case AnalyticsDataSource.MOBILECRASHREPORT:case AnalyticsDataSource.MOBILECRASHREPORTS:case AnalyticsDataSource.MOBILE_CRASH_REPORT:case AnalyticsDataSource.MOBILE_CRASH_REPORTS:return AnalyticsDataSource.MOBILECRASHREPORTS;
default:return dataSource}},ADQLClientQueryFrom.getDataSourceLabel=function(dataSource){var dataSourceString=dataSource;switch(dataSourceString.toLowerCase()){case AnalyticsDataSource.TRANSACTION:case AnalyticsDataSource.TRANSACTIONS:return ResourceManager.instance().getString("ui","ms_transactions");case AnalyticsDataSource.LOG:case AnalyticsDataSource.LOGS:return ResourceManager.instance().getString("ui","ms_logs");case AnalyticsDataSource.BROWSERRECORD:case AnalyticsDataSource.BROWSERRECORDS:case AnalyticsDataSource.BROWSER_RECORD:case AnalyticsDataSource.BROWSER_RECORDS:return ResourceManager.instance().getString("ui","ms_browserRequests");case AnalyticsDataSource.MOBILESNAPSHOT:case AnalyticsDataSource.MOBILESNAPSHOTS:case AnalyticsDataSource.MOBILE_SNAPSHOT:case AnalyticsDataSource.MOBILE_SNAPSHOTS:return ResourceManager.instance().getString("ui","ms_mobileRequests");case AnalyticsDataSource.MOBILECRASHREPORT:case AnalyticsDataSource.MOBILECRASHREPORTS:case AnalyticsDataSource.MOBILE_CRASH_REPORT:case AnalyticsDataSource.MOBILE_CRASH_REPORTS:return ResourceManager.instance().getString("ui","ms_mobileCrashReports");default:return dataSource.toString()}},ADQLClientQueryFrom.getDataSourceFromIndex=function(indexType){switch(indexType.toUpperCase()){case AnalyticsIndexType.BIZ_TXN:return AnalyticsDataSource.TRANSACTIONS;case AnalyticsIndexType.LOG:return AnalyticsDataSource.LOGS;case AnalyticsIndexType.BROWSER_RECORD:return AnalyticsDataSource.BROWSER_RECORDS;case AnalyticsIndexType.MOBILE_SNAPSHOT:return AnalyticsDataSource.MOBILE_SNAPSHOTS;default:return indexType}},ADQLClientQueryFrom.getIndexTypeWithVersion=function(indexType){switch(indexType){case AnalyticsIndexType.BIZ_TXN:case AnalyticsIndexType.LOG:indexType+="_v1"}return indexType},ADQLClientQueryFrom.FROM="FROM",ADQLClientQueryFrom.AS="AS",ADQLClientQueryFrom}();return ADQLClientQueryFrom}),define("app/view/components/filterBar/filters/Adql/AdqlSuperSelectFilter",["require","exports","../../../../analytics/adql/clientApi/query/from/ADQLClientQueryFrom","./AdqlFilter"],function(require,exports,ADQLClientQueryFrom,AdqlFilter){var AdqlSuperSelectFilter=function(){function AdqlSuperSelectFilter(analyticsField,browser,autoFetchOptions,filter){void 0===browser&&(browser=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),Util.isUndefOrNull(filter)?this.setFields(analyticsField,browser,autoFetchOptions):(this.setFields(filter.analyticsField,filter.selectList,filter.autoFetchOptions),this.fieldValues=filter.fieldValues)}return AdqlSuperSelectFilter.prototype.getADQLCondition=function(){if(this.selectList&&this.selectList.values&&this.selectList.values.length>0){var fieldDef=this.analyticsField.fieldDefinition;this.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),this.fieldValues=_.pluck(this.selectList.values,"name")}return this.generateADQLCondition()},AdqlSuperSelectFilter.prototype.fetchTerms=function(dataSource){var _this=this;AnalyticsDataAccessHelperUiService.instance().getAllFieldValues(this.analyticsField.fullPath,ADQLClientQueryFrom.getIndexFromDataSource(dataSource)).then(function(fieldValues){var options=_.map(fieldValues,function(value){return{name:value,value:value}});_this.selectList.options=options;for(var i=0;i<_this.selectList.options.length;i++){var displayFieldValue=new AnalyticsFieldValue(_this.selectList.options[i].value,_this.analyticsField);_this.selectList.options[i].name=displayFieldValue.valueDisplayString}_this.selectList.values?FilterService.instance().reselectSelectValuesAndMapToOptions(_this.selectList,!0):_this.selectList.values=[]})},AdqlSuperSelectFilter}();return MultipleInheritanceUtil.applyMixins(AdqlSuperSelectFilter,[SuperSelectFilter,AdqlFilter]),AdqlSuperSelectFilter}),define("app/view/components/filterBar/filters/Adql/AdqlDeviceTypeFilter",["require","exports","./AdqlFilter"],function(require,exports,AdqlFilter){var AdqlDeviceTypeFilter=function(){function AdqlDeviceTypeFilter(fieldCategory,device,deviceOS,autoFetchOptions,filter){void 0===fieldCategory&&(fieldCategory=""),void 0===device&&(device=null),void 0===deviceOS&&(deviceOS=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),Util.isUndefOrNull(filter)?this.setFields(fieldCategory,device,deviceOS,autoFetchOptions):(this.setFields(filter.fieldCategory,filter.device,filter.deviceOS,filter.autoFetchOptions),this.fieldValues=filter.fieldValues)}return AdqlDeviceTypeFilter.prototype.getADQLCondition=function(){if(this.device&&this.device.values&&this.device.values.length>0){var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.device,this.fieldCategory);fieldDef&&(this.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),this.fieldValues=_.pluck(this.device.values,"name"))}if(this.deviceOS&&this.deviceOS.values&&this.deviceOS.values.length>0){var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.deviceOs,this.fieldCategory);fieldDef&&(this.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),this.fieldValues=_.pluck(this.deviceOS.values,"name"))}return this.generateADQLCondition()},AdqlDeviceTypeFilter}();return MultipleInheritanceUtil.applyMixins(AdqlDeviceTypeFilter,[DeviceTypeFilter,AdqlFilter]),AdqlDeviceTypeFilter}),define("app/view/components/filterBar/filters/Adql/AdqlInfrastructureFilter",["require","exports","./AdqlEntityFilter"],function(require,exports,AdqlEntityFilter){var AdqlInfrastructureFilter=function(){function AdqlInfrastructureFilter(entityType,selectedEntities,filter){void 0===entityType&&(entityType=""),void 0===selectedEntities&&(selectedEntities=[]),this.selectedEntities=[],Util.isUndefOrNull(filter)?this.setFields(entityType,selectedEntities):(this.setFields(filter.componentType,filter.selectedEntities),this.fieldValues=filter.fieldValues,this.autoFetchOptions=filter.autoFetchOptions)}return AdqlInfrastructureFilter.prototype.getADQLCondition=function(){return this.fieldValues=EntityUtils.getEntityNames(this.selectedEntities),this.componentType==FilterType.APPLICATION_COMPONENT?this.fieldName="segments.tier":this.componentType==FilterType.APPLICATION_COMPONENT_NODE&&(this.fieldName="segments.node"),this.getEntityQueryCondition()},AdqlInfrastructureFilter}();return MultipleInheritanceUtil.applyMixins(AdqlInfrastructureFilter,[InfrastructureFilter,AdqlEntityFilter]),AdqlInfrastructureFilter}),define("app/view/components/filterBar/filters/Adql/AdqlLocationFilter",["require","exports","./AdqlFilter"],function(require,exports,AdqlFilter){var AdqlLocationFilter=function(){function AdqlLocationFilter(fieldCategory,geoCountry,geoRegion,geoCity,autoFetchOptions,filter){void 0===fieldCategory&&(fieldCategory=""),void 0===geoCountry&&(geoCountry=null),void 0===geoRegion&&(geoRegion=null),void 0===geoCity&&(geoCity=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),Util.isUndefOrNull(filter)?this.setFields(fieldCategory,geoCountry,geoRegion,geoCity,autoFetchOptions):(this.setFields(filter.fieldCategory,filter.geoCountry,filter.geoRegion,filter.geoCity,filter.autoFetchOptions),this.fieldValues=filter.fieldValues)}return AdqlLocationFilter.prototype.getADQLCondition=function(){if(this.geoCountry&&this.geoCountry.value){var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.geoCountry,this.fieldCategory);fieldDef&&(this.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),this.fieldValues=[this.geoCountry.value.name])}if(this.geoRegion&&this.geoRegion.value){var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.geoRegion,this.fieldCategory);fieldDef&&(this.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),this.fieldValues=[this.geoRegion.value.name])}if(this.geoCity&&this.geoCity.value){var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.geoCity,this.fieldCategory);fieldDef&&(this.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),this.fieldValues=[this.geoCity.value.name])}return this.generateADQLCondition()},AdqlLocationFilter}();return MultipleInheritanceUtil.applyMixins(AdqlLocationFilter,[LocationFilter,AdqlFilter]),AdqlLocationFilter}),define("app/view/components/filterBar/filters/Adql/AdqlPageFilter",["require","exports","./AdqlFilter"],function(require,exports,AdqlFilter){var AdqlPageFilter=function(){function AdqlPageFilter(analyticsField,pageType,pageName,iframeName,ajaxName,virtualPageName,autoFetchOptions,filter){void 0===analyticsField&&(analyticsField=null),void 0===pageType&&(pageType=null),void 0===pageName&&(pageName=null),void 0===iframeName&&(iframeName=null),void 0===ajaxName&&(ajaxName=null),void 0===virtualPageName&&(virtualPageName=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),Util.isUndefOrNull(filter)?this.setFields(analyticsField,pageType,pageName,iframeName,ajaxName,virtualPageName,autoFetchOptions):(this.setFields(filter.analyticsField,filter.pageType,filter.pageName,filter.iframeName,filter.ajaxName,filter.virtualPageName,filter.autoFetchOptions),this.fieldValues=filter.fieldValues)}return AdqlPageFilter.prototype.getADQLCondition=function(){return this.fieldName=AnalyticsField.pageName,this.fieldValues=[],this.pageName&&this.pageName.values&&this.pageName.values.length>0&&(this.fieldValues=this.fieldValues.concat(_.pluck(this.pageName.values,"name"))),this.ajaxName&&this.ajaxName.values&&this.ajaxName.values.length>0&&(this.fieldValues=this.fieldValues.concat(_.pluck(this.ajaxName.values,"name"))),this.iframeName&&this.iframeName.values&&this.iframeName.values.length>0&&(this.fieldValues=this.fieldValues.concat(_.pluck(this.iframeName.values,"name"))),this.virtualPageName&&this.virtualPageName.values&&this.virtualPageName.values.length>0&&(this.fieldValues=this.fieldValues.concat(_.pluck(this.virtualPageName.values,"name"))),this.pageType&&this.pageType.value&&(this.fieldName=AnalyticsField.pageType,this.fieldValues=_.pluck(this.pageType.value,"name")),this.generateADQLCondition()},AdqlPageFilter}();return MultipleInheritanceUtil.applyMixins(AdqlPageFilter,[PageFilter,AdqlFilter]),AdqlPageFilter}),define("app/view/components/filterBar/filters/Adql/AdqlPerformanceFilter",["require","exports","./AdqlFilter"],function(require,exports,AdqlFilter){var AdqlPerformanceFilter=function(){function AdqlPerformanceFilter(filter){Util.isUndefOrNull(filter)?this.setFields():(this.setFields(),this.fieldValues=filter.fieldValues,this.facetLowerBound=filter.facetLowerBound,this.facetUpperBound=filter.facetUpperBound,this.histogramFacet=filter.histogramFacet,this.autoFetchOptions=filter.autoFetchOptions)}return AdqlPerformanceFilter}();return MultipleInheritanceUtil.applyMixins(AdqlPerformanceFilter,[PerformanceFilter,AdqlFilter]),AdqlPerformanceFilter}),define("app/view/components/filterBar/filters/Adql/AdqlUserExperienceFilter",["require","exports","./AdqlFilter","../../../../analytics/adql/clientApi/query/where/conditions/ADQLComparisonCondition","../../../../analytics/adql/clientApi/query/where/operators/ADQLComparisonOperator","../../../../analytics/adql/clientApi/query/where/operators/ADQLBooleanOperator"],function(require,exports,AdqlFilter,ADQLComparisonCondition,ADQLComparisonOperator,ADQLBooleanOperator){var AdqlHealthFilter=function(){function AdqlHealthFilter(filter){Util.isUndefOrNull(filter)?this.setFields():(this.setFields(),this.displayName=filter.displayName,this.fieldValues=filter.fieldValues,this.selectedHealthLabels=filter.selectedHealthLabels,this.autoFetchOptions=filter.autoFetchOptions)}return AdqlHealthFilter.prototype.getADQLCondition=function(){var _this=this,queryConditions=[];return this.fieldName=AnalyticsField.requestExperienceFullPath,this.fieldValues=this.selectedHealthLabels,this.selectedHealthLabels.forEach(function(healthLabel){queryConditions.push(new ADQLComparisonCondition(_this.fieldName,ADQLComparisonOperator.EQ,healthLabel,!1))}),queryConditions.length>1?this.generateComplexCondition(queryConditions,ADQLBooleanOperator.OR):queryConditions[0]},AdqlHealthFilter}();exports.AdqlHealthFilter=AdqlHealthFilter,MultipleInheritanceUtil.applyMixins(AdqlHealthFilter,[HealthFilter,AdqlFilter]);var AdqlUserExperienceFilter=function(){function AdqlUserExperienceFilter(filter){Util.isUndefOrNull(filter)?this.setFields():(this.setFields(),this.displayName=filter.displayName,this.fieldValues=filter.fieldValues,this.selectedHealthLabels=filter.selectedHealthLabels,this.autoFetchOptions=filter.autoFetchOptions)}return AdqlUserExperienceFilter.prototype.getADQLCondition=function(){var _this=this,queryConditions=[];return this.fieldName=AnalyticsField.requestExperienceFullPath,this.fieldValues=this.selectedHealthLabels,this.selectedHealthLabels.forEach(function(userExperience){queryConditions.push(new ADQLComparisonCondition(_this.fieldName,ADQLComparisonOperator.EQ,userExperience,!1))}),queryConditions.length>1?this.generateComplexCondition(queryConditions,ADQLBooleanOperator.OR):queryConditions[0]},AdqlUserExperienceFilter}();exports.AdqlUserExperienceFilter=AdqlUserExperienceFilter,MultipleInheritanceUtil.applyMixins(AdqlUserExperienceFilter,[UserExperienceFilter,AdqlFilter])}),define("app/view/components/filterBar/filters/Adql/AdqlSyntheticJobFilter",["require","exports","./AdqlFilter"],function(require,exports,AdqlFilter){var AdqlSyntheticJobFilter=function(){function AdqlSyntheticJobFilter(fieldCategory,syntheticJob,autoFetchOptions,filter){void 0===fieldCategory&&(fieldCategory=""),void 0===syntheticJob&&(syntheticJob=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),Util.isUndefOrNull(filter)?this.setFields(fieldCategory,syntheticJob,autoFetchOptions):(this.setFields(filter.fieldCategory,filter.syntheticJob,filter.autoFetchOptions),this.fieldValues=filter.fieldValues)}return AdqlSyntheticJobFilter.prototype.getADQLCondition=function(){if(this.syntheticJob&&this.syntheticJob.values&&this.syntheticJob.values.length>0){var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.scheduleId,this.fieldCategory);this.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),this.fieldValues=_.pluck(this.syntheticJob.values,"value")}return this.getADQLCondition()},AdqlSyntheticJobFilter}();return MultipleInheritanceUtil.applyMixins(AdqlSyntheticJobFilter,[SyntheticJobFilter,AdqlFilter]),AdqlSyntheticJobFilter}),define("app/view/components/filterBar/filters/Adql/AdqlBooleanFilter",["require","exports","./AdqlFilter"],function(require,exports,AdqlFilter){var AdqlBooleanFilter=function(){function AdqlBooleanFilter(analyticsField,showTrueValues,showFalseValues,filter){void 0===showTrueValues&&(showTrueValues=!1),void 0===showFalseValues&&(showFalseValues=!1),Util.isUndefOrNull(filter)?this.setFields(analyticsField,showTrueValues,showFalseValues):(this.setFields(filter.analyticsField,filter.showTrueValues,filter.showFalseValues),this.fieldValues=filter.fieldValues,this.autoFetchOptions=filter.autoFetchOptions)}return AdqlBooleanFilter.prototype.getADQLCondition=function(){if(!(!this.showFalseValues&&this.showTrueValues||this.showFalseValues&&!this.showTrueValues))return null;var fieldDef=this.analyticsField.fieldDefinition;return this.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),this.fieldValues=this.showTrueValues?["T"]:["F"],this.getADQLCondition()},AdqlBooleanFilter}();return MultipleInheritanceUtil.applyMixins(AdqlBooleanFilter,[BooleanFilter,AdqlFilter]),AdqlBooleanFilter});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filters/Adql/AdqlFilterSet",["require","exports","./AdqlApplicationFilter","./AdqlBusinessTransactionFilter","./AdqlTextFilter","./AdqlNumericFilter","./AdqlSearchInputTextFilter","./AdqlSuperSelectFilter","./AdqlDeviceTypeFilter","./AdqlInfrastructureFilter","./AdqlLocationFilter","./AdqlPageFilter","./AdqlPerformanceFilter","./AdqlUserExperienceFilter","./AdqlSyntheticJobFilter","./AdqlBooleanFilter"],function(require,exports,AdqlApplicationFilter,AdqlBusinessTransactionFilter,AdqlTextFilter,AdqlNumericFilter,AdqlSearchInputTextFilter,AdqlSuperSelectFilter,AdqlDeviceTypeFilter,AdqlInfrastructureFilter,AdqlLocationFilter,AdqlPageFilter,AdqlPerformanceFilter,AdqlUserExperienceFilter,AdqlSyntheticJobFilter,AdqlBooleanFilter){var AdqlFilterSet=function(_super){function AdqlFilterSet(filterSet,filters){if(void 0===filters&&(filters=[]),_super.call(this),this.filterSet=filterSet,this.filters=filters,this.duplicateFilterMessage=null,this.applications=[],Util.isDefAndNotNull(filterSet)){var adqlFilters=this.convertEjsFiltersToAdql(filterSet.filters);this.filters=adqlFilters}else this.filters=filters}return __extends(AdqlFilterSet,_super),AdqlFilterSet.getPageFilter=function(pageName,ajaxName,iframeName,virtualPageName,pageType){var pageFilter=new AdqlPageFilter(null,pageType,pageName,iframeName,ajaxName,virtualPageName);return pageFilter},AdqlFilterSet.getPerformanceFilter=function(facetLowerBound,facetUpperBound,histogramFacet){var performanceFilter=new AdqlPerformanceFilter;return performanceFilter.facetLowerBound=facetLowerBound,performanceFilter.facetUpperBound=facetUpperBound,performanceFilter.histogramFacet=histogramFacet,performanceFilter},AdqlFilterSet.prototype.getApplicationByName=function(applicationName){return _.findWhere(this.applications,{name:applicationName})},AdqlFilterSet.prototype.convertEjsFiltersToAdql=function(filters){var adqlFilters=[];return _.each(filters,function(filter){var filterClass=AdqlFilterSet.getFilterClassForType(filter.type);adqlFilters.push(filter.type===FilterType.NUMERIC?new filterClass(null,filter):new filterClass(filter))}),adqlFilters},AdqlFilterSet.prototype.addFilter=function(filter){var adqlFilter=filter;if(adqlFilter.type!==FilterType.TEXT&&adqlFilter.type!==FilterType.NUMERIC&&adqlFilter.type!==FilterType.NAME_VALUE_PAIR&&adqlFilter.type!==FilterType.SEARCH_INPUT_TEXT)for(var i=0;i<this.filters.length;i++)if(this.filters[i].type===filter.type&&(!filter.fieldCategory||filter.fieldCategory===this.filters[i].fieldCategory)&&(filter.type!==FilterType.SUPER_SELECT||filter.type===FilterType.SUPER_SELECT&&filter.analyticsField.fullPath===this.filters[i].analyticsField.fullPath)&&(filter.type!==FilterType.BOOLEAN||filter.type===FilterType.BOOLEAN&&filter.analyticsField.fullPath===this.filters[i].analyticsField.fullPath))return;this.filters.push(adqlFilter)},AdqlFilterSet.prototype.getSuperSelectFilter=function(analyticsField,selectList,autoFetchOptions){void 0===selectList&&(selectList=null),void 0===autoFetchOptions&&(autoFetchOptions=!0);var superSelectFilter;for(var i in this.filters){var filter=this.filters[i];if(filter.type===FilterType.SUPER_SELECT&&filter.analyticsField.fullPath===analyticsField.fullPath){superSelectFilter=filter;break}}return superSelectFilter?selectList&&(superSelectFilter.selectList=selectList):superSelectFilter=new AdqlSuperSelectFilter(analyticsField,selectList,autoFetchOptions),superSelectFilter},AdqlFilterSet.prototype.getDeviceTypeFilter=function(fieldCategory,device,deviceOS,autoFetchOptions){void 0===device&&(device=null),void 0===deviceOS&&(deviceOS=null),void 0===autoFetchOptions&&(autoFetchOptions=!0);var deviceTypeFilter=_.findWhere(this.filters,{type:FilterType.DEVICE_TYPE,fieldCategory:fieldCategory});return deviceTypeFilter?(device&&(deviceTypeFilter.device=device),deviceOS&&(deviceTypeFilter.deviceOS=deviceOS)):deviceTypeFilter=new AdqlDeviceTypeFilter(fieldCategory,device,deviceOS,autoFetchOptions),deviceTypeFilter},AdqlFilterSet.prototype.getLocationFilter=function(fieldCategory,geoCountryFilter,geoRegionFilter,geoCityFilter,autoFetchOptions){void 0===geoCountryFilter&&(geoCountryFilter=null),void 0===geoRegionFilter&&(geoRegionFilter=null),void 0===geoCityFilter&&(geoCityFilter=null),void 0===autoFetchOptions&&(autoFetchOptions=!0);var locationFilter=_.findWhere(this.filters,{type:FilterType.LOCATION,fieldCategory:fieldCategory});return locationFilter?(geoCountryFilter&&(locationFilter.geoCountry=geoCountryFilter),geoRegionFilter&&(locationFilter.geoRegion=geoRegionFilter),geoCityFilter&&(locationFilter.geoCity=geoCityFilter)):locationFilter=new AdqlLocationFilter(fieldCategory,geoCountryFilter,geoRegionFilter,geoCityFilter,autoFetchOptions),locationFilter},AdqlFilterSet.prototype.getSyntheticJobFilter=function(fieldCategory,syntheticJob,autoFetchOptions){void 0===syntheticJob&&(syntheticJob=null),void 0===autoFetchOptions&&(autoFetchOptions=!0);var syntheticJobFilter=_.findWhere(this.filters,{type:FilterType.SYNTHETIC_JOB,fieldCategory:fieldCategory});return syntheticJobFilter?syntheticJob&&(syntheticJobFilter.syntheticJob=syntheticJob):syntheticJobFilter=new AdqlSyntheticJobFilter(fieldCategory,syntheticJob,autoFetchOptions),syntheticJobFilter},AdqlFilterSet.prototype.getBooleanFilter=function(analyticsField,showTrueValues,showFalseValues){var booleanFilter;for(var i in this.filters){var filter=this.filters[i];if(filter.type==FilterType.SUPER_SELECT&&filter.analyticsField.fullPath===analyticsField.fullPath){booleanFilter=filter;break}}return booleanFilter?(Util.isDefAndNotNull(showTrueValues)&&(booleanFilter.showTrueValues=showTrueValues),Util.isDefAndNotNull(showFalseValues)&&(booleanFilter.showFalseValues=showFalseValues)):booleanFilter=new AdqlBooleanFilter(analyticsField,showTrueValues,showFalseValues),booleanFilter},AdqlFilterSet.prototype.getBTFilter=function(btId,btName){void 0===btId&&(btId=-1),void 0===btName&&(btName="");var btFilter=_.findWhere(this.filters,{type:FilterType.BUSINESS_TRANSCATION});return Util.isUndefOrNull(btFilter)&&(btFilter=new AdqlBusinessTransactionFilter),-1!=btId&&btFilter.selectedEntities.push(AdqlFilterSet.buildEntityObjectForGivenType(btId,btName,EntityType.BUSINESS_TRANSACTION)),btFilter},AdqlFilterSet.prototype.hasBTFilter=function(){return!!_.findWhere(this.filters,{type:FilterType.BUSINESS_TRANSCATION})},AdqlFilterSet.prototype.getInfrastructureFilter=function(entityType,selectedEntities){void 0===entityType&&(entityType=""),void 0===selectedEntities&&(selectedEntities=[]);var infrastructureFilter=_.findWhere(this.filters,{type:FilterType.INFRASTRUCTURE});return Util.isUndefOrNull(infrastructureFilter)&&(infrastructureFilter=new AdqlInfrastructureFilter(entityType,selectedEntities)),infrastructureFilter},AdqlFilterSet.prototype.hasInfrastructureFilter=function(){return!!_.findWhere(this.filters,{type:FilterType.INFRASTRUCTURE})},AdqlFilterSet.prototype.removeFilterFromContext=function(filterType,analyticsField){var filter={fieldCategory:analyticsField.fieldDefinition.category,type:filterType};return Util.removeWhere(this.filters,filter),Util.getInstantPromise()},AdqlFilterSet.prototype.addFilterToContext=function(filterType,analyticsField,value,wrapQueryInQuotes,instant,comparisonOperator){switch(void 0===wrapQueryInQuotes&&(wrapQueryInQuotes=!0),void 0===instant&&(instant=!1),filterType){case FilterType.APPLICATION:return this.handleApplicationCase(analyticsField,value,wrapQueryInQuotes,instant);case FilterType.BUSINESS_TRANSCATION:return this.handleBusinessTransactionCase(analyticsField,value?value.split(","):[],wrapQueryInQuotes);case FilterType.INFRASTRUCTURE:return this.handleInfrastructureCase(analyticsField,value?value.split(","):[],wrapQueryInQuotes);case FilterType.USER_EXPERIENCE:this.handleUserExperienceCase(value?value.split(","):[]);break;case FilterType.ERROR:case FilterType.TEXT:this.handleTextCase(analyticsField,value,wrapQueryInQuotes);break;case FilterType.NUMERIC:this.handleNumericCase(analyticsField,value,comparisonOperator);break;case FilterType.SUPER_SELECT:this.handleSuperSelectCase(analyticsField,value);break;case FilterType.LOCATION:this.handleTextCase(analyticsField,value,wrapQueryInQuotes);break;case FilterType.PAGE:this.handleTextCase(analyticsField,value,wrapQueryInQuotes);break;case FilterType.DEVICE_TYPE:this.handleDeviceTypeCase(analyticsField,value);break;case FilterType.SYNTHETIC_JOB:this.handleSyntheticJobCase(analyticsField,value);break;case FilterType.BOOLEAN:this.handleBooleanCase(analyticsField,value);break;case FilterType.SEARCH_INPUT_TEXT:default:this.handleSearchInputTextCase(analyticsField,value)}return Util.getInstantPromise()},AdqlFilterSet.prototype.clearFilters=function(){this.filters=[]},AdqlFilterSet.prototype.handleSuperSelectCase=function(analyticsField,value){var superSelectFilter=this.getSuperSelectFilter(analyticsField);if(value){superSelectFilter.selectList.values||(superSelectFilter.selectList.values=[]);for(var found=!1,i=0;i<superSelectFilter.selectList.values.length;i++)if(superSelectFilter.selectList.values[i].value===value){found=!0;break}found||superSelectFilter.selectList.values.push({name:value,value:value})}this.addFilter(superSelectFilter)},AdqlFilterSet.prototype.handleDeviceTypeCase=function(analyticsField,value){var deviceFilter=this.getDeviceTypeFilter(analyticsField.fieldDefinition.category);if(value)if(analyticsField.fieldDefinition.fieldName==AnalyticsField.device){deviceFilter.device.values||(deviceFilter.device.values=[]);for(var found=!1,i=0;i<deviceFilter.device.values.length;i++)if(deviceFilter.device.values[i].value===value){found=!0;break}found||deviceFilter.device.values.push({name:value,value:value})}else if(analyticsField.fieldDefinition.fieldName==AnalyticsField.deviceOs){deviceFilter.deviceOS.values||(deviceFilter.deviceOS.values=[]);for(var found=!1,i=0;i<deviceFilter.deviceOS.values.length;i++)if(deviceFilter.deviceOS.values[i].value===value){found=!0;break}found||deviceFilter.deviceOS.values.push({name:value,value:value})}this.addFilter(deviceFilter)},AdqlFilterSet.prototype.handleSyntheticJobCase=function(analyticsField,value){var syntheticJobFilter=this.getSyntheticJobFilter(analyticsField.fieldDefinition.category);if(value){syntheticJobFilter.syntheticJob.values||(syntheticJobFilter.syntheticJob.values=[]);for(var found=!1,i=0;i<syntheticJobFilter.syntheticJob.values.length;i++)if(syntheticJobFilter.syntheticJob.values[i].value===value){found=!0;break}found||syntheticJobFilter.syntheticJob.values.push({name:value,value:value})}this.addFilter(syntheticJobFilter)},AdqlFilterSet.prototype.handleBooleanCase=function(analyticsField,value){var showTrueValues=value===AnalyticsUtils.BOOLEAN_TRUE_STRING,showFalseValues=value===AnalyticsUtils.BOOLEAN_FALSE_STRING,booleanFilter=this.getBooleanFilter(analyticsField,showTrueValues,showFalseValues);return this.addFilter(booleanFilter),Util.getInstantPromise()},AdqlFilterSet.prototype.handleApplicationCase=function(analyticsField,applicationName,wrapQueryInQuotes,instant){var _this=this;if(instant){var application=this.getApplicationByName(applicationName);return application?this.filters.push(AdqlFilterSet.getApplicationFilterForGivenApp(application)):this.addTextFilterToContext(analyticsField,applicationName,wrapQueryInQuotes),Util.getInstantPromise()}if(applicationName){var successHandler=function(response){var selectedApp=ApplicationUiService.instance().getApplicationByName_response(response);selectedApp&&_this.filters.push(AdqlFilterSet.getApplicationFilterForGivenApp(selectedApp))},promise=ApplicationUiService.instance().getApplicationByName(applicationName);return promise.then(successHandler)}return this.filters.push(AdqlFilterSet.getApplicationFilter()),Util.getInstantPromise()},AdqlFilterSet.prototype.handleBusinessTransactionCase=function(analyticsField,values,wrapQueryInQuotes){var _this=this;if(!values.length&&this.hasBTFilter())return this.isIncomplete=!0,Util.getInstantPromise();if(values.length&&!_.find(values,AdqlFilterSet.validateStringQuery))return Util.getInstantPromise();var appFilter=this.getApplicationFilterFromFilterContext();return appFilter&&appFilter.selectedEntities[0]?this.addBusinessTransactionFilterToContext(appFilter.selectedEntities[0].id,analyticsField,values,wrapQueryInQuotes).then(function(btFilter){btFilter&&_this.filters.push(btFilter)}):(Util.isDefAndNotEmptyArray(values)&&this.addTextFilterToContext(analyticsField,values.join(" OR "),wrapQueryInQuotes),Util.getInstantPromise())},AdqlFilterSet.prototype.addBusinessTransactionFilterToContext=function(applicationID,analyticsField,values,wrapQueryInQuotes){var _this=this;return Util.isValidId(applicationID)?values.length?BusinessTransactionUiService.instance().getBusinessTransactions(applicationID).then(function(bts){var entities=[];_.forEach(values,function(value){var bt=_.findWhere(bts,{internalName:value});entities.push(AdqlFilterSet.buildEntityObjectForGivenType(bt.id,bt.name,EntityType.BUSINESS_TRANSACTION))});var btFilter=_this.getBTFilter();return btFilter.selectedEntities=entities,Util.getInstantPromise(btFilter)}):Util.getInstantPromise(this.getBTFilter()):(Util.isDefAndNotEmptyArray(values)&&this.addTextFilterToContext(analyticsField,values.join(" OR "),wrapQueryInQuotes),Util.getInstantPromise())},AdqlFilterSet.prototype.handleInfrastructureCase=function(analyticsField,values,wrapQueryInQuotes){var _this=this;if(!values.length&&this.hasInfrastructureFilter())return this.isIncomplete=!0,Util.getInstantPromise();if(values.length&&!_.find(values,AdqlFilterSet.validateStringQuery))return Util.getInstantPromise();var appFilter=this.getApplicationFilterFromFilterContext();return appFilter&&appFilter.selectedEntities[0]?this.addInfraFilterToContext(appFilter.selectedEntities[0].id,analyticsField,values,wrapQueryInQuotes).then(function(infrastructureFilter){infrastructureFilter&&_this.filters.push(infrastructureFilter)}):(Util.isDefAndNotEmptyArray(values)&&this.addTextFilterToContext(analyticsField,values.join(" OR "),wrapQueryInQuotes),Util.getInstantPromise())},AdqlFilterSet.prototype.addInfraFilterToContext=function(applicationID,analyticsField,values,wrapQueryInQuotes){var _this=this;if(!Util.isValidId(applicationID))return Util.isDefAndNotEmptyArray(values)&&this.addTextFilterToContext(analyticsField,values.join(" OR "),wrapQueryInQuotes),Util.getInstantPromise();switch(_.last(analyticsField.fieldDefinition.fieldName.split("."))){case AnalyticsField.tier:return values.length?UserUiService.instance().getAllApplicationComponents(applicationID).then(function(components){var entities=[];_.forEach(values,function(value){var component=_.findWhere(components,{name:value});entities.push(AdqlFilterSet.buildEntityObjectForGivenType(component.id,component.name,EntityType.APPLICATION_COMPONENT))});var infrastructureFilter=_this.getInfrastructureFilter();return infrastructureFilter.componentType=FilterType.APPLICATION_COMPONENT,infrastructureFilter.selectedEntities=entities,Util.getInstantPromise(infrastructureFilter)}):Util.getInstantPromise(this.getInfrastructureFilter(EntityType.APPLICATION_COMPONENT));case AnalyticsField.node:return values.length?UserUiService.instance().getApplicationComponentNodesByApplicationId(applicationID).then(function(components){var entities=[];_.forEach(values,function(value){var component=_.findWhere(components,{name:value});entities.push(AdqlFilterSet.buildEntityObjectForGivenType(component.id,component.name,EntityType.APPLICATION_COMPONENT_NODE))});var infrastructureFilter=_this.getInfrastructureFilter();return infrastructureFilter.componentType=FilterType.APPLICATION_COMPONENT_NODE,infrastructureFilter.selectedEntities=entities,Util.getInstantPromise(infrastructureFilter)}):Util.getInstantPromise(this.getInfrastructureFilter(EntityType.APPLICATION_COMPONENT_NODE));default:throw new Error("Unknown infrastructure component - "+analyticsField.fieldDefinition.fieldName)}},AdqlFilterSet.prototype.handleUserExperienceCase=function(values){this.filters.push(!Util.isDefAndNotEmptyArray(values)||Util.isUndefOrNull(values[0])?AdqlFilterSet.getUserExperienceFilter():AdqlFilterSet.getUserExperienceFilter(values))},AdqlFilterSet.prototype.handleNumericCase=function(analyticsField,value,comparisonOperator){var isLong=!1;
if(analyticsField.fieldDefinition.fieldType===FieldType.LONG&&(isLong=!0),isNaN(Number(value))){var rangeValues=AnalyticsUtils.getThresholdValuesFromLabel(value),lowerThreshold=isLong?StringUtils.roundString(rangeValues[0]):rangeValues[0],higherThreshold=isLong?StringUtils.roundString(rangeValues[1]):rangeValues[1];this.filters.push(AdqlFilterSet.getNumericFilter(analyticsField,lowerThreshold,higherThreshold))}else{var numericFilter=new AdqlNumericFilter;if(numericFilter.analyticsField=analyticsField,StringUtils.isNullOrEmptyString(comparisonOperator)&&(comparisonOperator=AnalyticsUtils.EQUALS),numericFilter.selectedOperator=AnalyticsUtils.getNumericOperator(comparisonOperator),value=isLong?StringUtils.roundString(value):value,numericFilter.selectedOperator)switch(numericFilter.selectedOperator.value){case AnalyticsUtils.GREATER_THAN_OR_EQUAL:numericFilter.lowerThreshold=value;break;case AnalyticsUtils.LESS_THAN_OR_EQUAL:numericFilter.higherThreshold=value;break;case AnalyticsUtils.EQUALS:case AnalyticsUtils.NOT_EQUALS:default:numericFilter.equalityValue=value}else numericFilter.equalityValue=value;this.filters.push(numericFilter)}},AdqlFilterSet.prototype.handleTextCase=function(analyticsField,value,wrapQueryInQuotes){this.addTextFilterToContext(analyticsField,value,wrapQueryInQuotes)},AdqlFilterSet.prototype.addTextFilterToContext=function(analyticsField,value,wrapQueryInQuotes){if(AdqlFilterSet.validateStringQuery(value)){var wrappedValue=value;wrapQueryInQuotes&&(wrappedValue=AnalyticsUtils.wrapStringInQuotes(value)),this.filters.push(AdqlFilterSet.getTextFilter(analyticsField,wrappedValue))}},AdqlFilterSet.prototype.handleSearchInputTextCase=function(analyticsField,value){FilterSet.validateStringQuery(value)&&this.filters.push(AdqlFilterSet.getSearchInputTextFilter(analyticsField,value))},AdqlFilterSet.prototype.getApplicationFilterFromFilterContext=function(){return _.findWhere(this.filters,{type:FilterType.APPLICATION})},AdqlFilterSet.getFilterTypeForFieldDefinition=function(fieldDefinition){if(fieldDefinition){var fieldName=_.last(fieldDefinition.fieldName.split("."));return fieldName==AnalyticsField.application?FilterType.APPLICATION:fieldName==AnalyticsField.transactionName?FilterType.BUSINESS_TRANSCATION:fieldName==AnalyticsField.requestExperience?FilterType.USER_EXPERIENCE:fieldName==AnalyticsField.tier||fieldName==AnalyticsField.node?FilterType.INFRASTRUCTURE:fieldName==AnalyticsField.errors?FilterType.ERROR:AnalyticsFields.isFieldUsableForSuperSelect(fieldDefinition)?FilterType.SUPER_SELECT:fieldName==AnalyticsField.geoCountry||fieldName==AnalyticsField.geoRegion||fieldDefinition.category==FieldCategory.SYNTH_SESSION_RECORD&&fieldName==AnalyticsField.geoCity?FilterType.LOCATION:fieldName==AnalyticsField.device||fieldName==AnalyticsField.deviceOs?FilterType.DEVICE_TYPE:fieldName==AnalyticsField.scheduleId?FilterType.SYNTHETIC_JOB:AnalyticsFields.isFieldDefinitionFieldTypeNumeric(fieldDefinition)?FilterType.NUMERIC:AnalyticsFields.isFieldDefinitionFieldTypeBoolean(fieldDefinition)?FilterType.BOOLEAN:FilterType.TEXT}},AdqlFilterSet.getFilterClassForType=function(filterType){switch(filterType){case FilterType.APPLICATION:return AdqlApplicationFilter;case FilterType.BUSINESS_TRANSCATION:return AdqlBusinessTransactionFilter;case FilterType.INFRASTRUCTURE:return AdqlInfrastructureFilter;case FilterType.ERROR:return ErrorFilter;case FilterType.TEXT:return AdqlTextFilter;case FilterType.USER_EXPERIENCE:return AdqlUserExperienceFilter.AdqlUserExperienceFilter;case FilterType.NUMERIC:return AdqlNumericFilter;case FilterType.SUPER_SELECT:return AdqlSuperSelectFilter;case FilterType.LOCATION:return AdqlLocationFilter;case FilterType.BOOLEAN:return AdqlBooleanFilter;case FilterType.SYNTHETIC_JOB:return AdqlSyntheticJobFilter;case FilterType.SEARCH_INPUT_TEXT:default:return AdqlSearchInputTextFilter}},AdqlFilterSet.unmarshallFilterSetFromJSON=function(filterSetData){for(var filterSet=new AdqlFilterSet,i=0;i<filterSetData.filters.length;i++){var filterData=filterSetData.filters[i],FilterClass=FilterSet.getFilterClassForType(filterData.type),filterObject=new FilterClass;filterObject.unmarshallFilterFromJson(filterData),filterSet.filters.push(filterObject)}return filterSet.textSearchInput=filterSetData.textSearchInput,filterSet},AdqlFilterSet.getApplicationFilter=function(applicationId){void 0===applicationId&&(applicationId=-1);var applicationFilter=new AdqlApplicationFilter;return-1!=applicationId&&applicationFilter.selectedEntities.push({id:applicationId}),applicationFilter},AdqlFilterSet.getApplicationFilterForGivenApp=function(application){var applicationFilter=new AdqlApplicationFilter;return application&&applicationFilter.selectedEntities.push(EntityUtils.getApplicationEntity(application)),applicationFilter},AdqlFilterSet.getErrorFilter=function(){return new ErrorFilter},AdqlFilterSet.getUserExperienceFilter=function(selectedUserExperiences){var userExperienceFilter=new AdqlUserExperienceFilter.AdqlUserExperienceFilter;return userExperienceFilter.displayName=ResourceManager.instance().getString("ui","ms_userExperienceWithColon"),userExperienceFilter.selectedHealthLabels=Util.isDefAndNotEmptyArray(selectedUserExperiences)?selectedUserExperiences:[],userExperienceFilter},AdqlFilterSet.getDiagSessionTypeFilter=function(){var diagSessionTypeFilter=new DiagSessionTypeFilter;return diagSessionTypeFilter},AdqlFilterSet.getNumericFilter=function(analyticsField,lowValue,highValue,visibleOperators){var numericFilter=new AdqlNumericFilter(visibleOperators);return numericFilter.analyticsField=analyticsField,_.isFinite(lowValue)&&_.isFinite(highValue)?(numericFilter.lowerThreshold=lowValue,numericFilter.higherThreshold=highValue,numericFilter.selectedOperator=AnalyticsUtils.getNumericOperator(AnalyticsUtils.RANGE)):_.isFinite(lowValue)?(numericFilter.lowerThreshold=lowValue,numericFilter.selectedOperator=AnalyticsUtils.getNumericOperator(AnalyticsUtils.GREATER_THAN_OR_EQUAL)):_.isFinite(highValue)&&(numericFilter.higherThreshold=highValue,numericFilter.selectedOperator=AnalyticsUtils.getNumericOperator(AnalyticsUtils.LESS_THAN_OR_EQUAL)),numericFilter},AdqlFilterSet.getTextFilter=function(analyticsField,selectedValue){var textDataFilter=new AdqlTextFilter;return textDataFilter.analyticsField=analyticsField,textDataFilter.selectedAnalyticsField=analyticsField,selectedValue&&(textDataFilter.selectedValue=selectedValue),textDataFilter},AdqlFilterSet.getSearchInputTextFilter=function(analyticsField,searchInputTextValue){var searchInputTextFilter=new AdqlSearchInputTextFilter;return searchInputTextFilter.selectedAnalyticsField=analyticsField,searchInputTextFilter.searchInputText=searchInputTextValue,searchInputTextFilter},AdqlFilterSet.getNameValuePairFilter=function(displayName,inputNameValuePair,selectedOption,selectionOptions){var nvpFilter=new NameValuePairFilter;return nvpFilter.displayName=displayName,nvpFilter.inputNameValuePair=inputNameValuePair,nvpFilter.selectedOption=selectedOption,nvpFilter.selectionOptions=selectionOptions,nvpFilter},AdqlFilterSet.buildEntityObjectForGivenType=function(btId,btName,entityType){var entityDefObj=EntityUtils.getEntityDefinition(entityType,btId),entityObject=EntityUtils.getEntityByIdAndName(btId,btName);return entityObject.entityDefinition=entityDefObj,entityObject},AdqlFilterSet.validateStringQuery=function(searchInputText){var limitNoWildCardsToNChars=3,escapeCharacter="\\",limitCharsRegex=[".","?","+","*","|","{","}","[","]","(",")",'"',"\\"],limitCharsWildCard=["*","?"],limitChars=[],invalidInput=!1,isRegexQuery=!1;if(searchInputText){searchInputText=""+searchInputText,StringUtils.startsWith(searchInputText,AdqlFilterSet.REGEX_TOKEN)?(searchInputText=StringUtils.getEverythingAfterToken(searchInputText,AdqlFilterSet.REGEX_TOKEN).trim(),limitChars=limitCharsRegex,isRegexQuery=!0):limitChars=limitCharsWildCard,limitNoWildCardsToNChars>searchInputText.length&&(limitNoWildCardsToNChars=searchInputText.length);for(var iPos=0;limitNoWildCardsToNChars>iPos;iPos++){var reservedCharFound=limitChars.indexOf(searchInputText.charAt(iPos))>=0;searchInputText.charAt(iPos)===escapeCharacter&&iPos+1<searchInputText.length&&limitChars.indexOf(searchInputText.charAt(iPos+1))>=0?(limitNoWildCardsToNChars++,iPos++):reservedCharFound&&(invalidInput=!0)}if(invalidInput){var displayText=ResourceManager.instance().getString("ui","ms_invalidInput");return displayText+=isRegexQuery?" - "+ResourceManager.instance().getString("ui","ms_regexInvalidInput"):" - "+ResourceManager.instance().getString("ui","ms_SearchInvalidInput"),NotificationService.instance().displayError(displayText,""),!1}}return!0},AdqlFilterSet.REGEX_TOKEN="regex:",AdqlFilterSet}(FilterSetBase);return AdqlFilterSet});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/generic/superSelect/SuperSelectFilterSelector",["require","exports","../../FilterSelectorControllerBase","../../../filters/Adql/AdqlFilterSet"],function(require,exports,FilterSelectorControllerBase,AdqlFilterSet){var SuperSelectFilterSelectorDirective=function(){function SuperSelectFilterSelectorDirective(){return{restrict:"E",controller:"SuperSelectFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/generic/superSelect/SuperSelectFilterSelector.html",scope:{filter:"=adFilter",filterSet:"=adFilterSet",context:"=adContext",onCloseDropdown:"=adOnCloseDropdown"}}}return SuperSelectFilterSelectorDirective.$inject=[],SuperSelectFilterSelectorDirective}();exports.SuperSelectFilterSelectorDirective=SuperSelectFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-super-select-filter-selector"),SuperSelectFilterSelectorDirective);var SuperSelectFilterSelectorController=function(_super){function SuperSelectFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService,filterService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.filterService=filterService,this.dropdownOpen=!1,this.facetText="",this.filterName="",$scope.controller=this,this.filterSet=$scope.filterSet,$scope.$watch("filter",function(){_this.filter=$scope.filter,_this.filter&&(_this.filterName=_this.filter.analyticsField.displayName),FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.selectList,!0),_this.updateFacetText()},!0),$scope.$watch("controller.dropdownOpen",function(newValue,oldValue){_this.filter&&newValue&&newValue!=oldValue&&_this.filter.fetchTerms(_this.context)}),this.filter&&this.filter.fetchTerms(this.context)}return __extends(SuperSelectFilterSelectorController,_super),SuperSelectFilterSelectorController.prototype.updateFacetText=function(){var displayText="",values=[];if(this.$scope.filter&&this.$scope.filter.selectList.values){values=this.$scope.filter.selectList.values;for(var i=0;i<values.length;i++){var displayFieldValue=new AnalyticsFieldValue(values[i].value,this.filter.analyticsField);displayText+=(i>0?", ":"")+displayFieldValue.valueDisplayString}}displayText||(displayText=this.getString("ms_allValues")),this.facetText=displayText},SuperSelectFilterSelectorController.prototype.clearFilter=function(event){this.filterService.clearSearchParameter(this.filter.selectList),this.handleClick(event)},SuperSelectFilterSelectorController.prototype.switchToAdvancedFilter=function(){var textFilter;this.filterSet instanceof FilterSet?textFilter=FilterSet.getTextFilter(this.filter.analyticsField):this.filterSet instanceof AdqlFilterSet&&(textFilter=AdqlFilterSet.getTextFilter(this.filter.analyticsField)),this.filterSet.addFilter(textFilter),Util.remove(this.filterSet.filters,this.filter)},SuperSelectFilterSelectorController.prototype.handle_UPDATE=function(){this.broadcastFilterUpdatedEvent(!1)},SuperSelectFilterSelectorController.prototype.onKeyUp=function(){this.broadcastFilterUpdatedEvent(!1)},SuperSelectFilterSelectorController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.$scope.onCloseDropdown()}),this._closeDropdownHandler},SuperSelectFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService","filterService"],SuperSelectFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.SuperSelectFilterSelectorController=SuperSelectFilterSelectorController,adComponentsModule.controller("SuperSelectFilterSelectorController",SuperSelectFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/deviceType/DeviceTypeFilterSelector",["require","exports","../../FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var DeviceTypeFilterSelectorDirective=function(){function DeviceTypeFilterSelectorDirective(){return{restrict:"E",controller:"deviceTypeFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/custom/deviceType/DeviceTypeFilterSelector.html",scope:{filter:"=adFilter",context:"=adContext",onCloseDropdown:"=adOnCloseDropdown"}}}return DeviceTypeFilterSelectorDirective.$inject=[],DeviceTypeFilterSelectorDirective}();exports.DeviceTypeFilterSelectorDirective=DeviceTypeFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-device-type-filter-selector"),DeviceTypeFilterSelectorDirective);var DeviceTypeFilterSelectorController=function(_super){function DeviceTypeFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService,filterService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.filterService=filterService,this.deviceFacetText="",this.dropdownOpen=!1,$scope.controller=this,$scope.$watch("filter",function(){_this.filter=_this.$scope.filter,FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.device,!0),FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.deviceOS,!0),_this.updateDeviceFacetText()},!0),$scope.$watch("controller.dropdownOpen",function(newValue,oldValue){newValue&&newValue!=oldValue&&(_this.fetchDevices(),_this.fetchDeviceOS())})}return __extends(DeviceTypeFilterSelectorController,_super),DeviceTypeFilterSelectorController.prototype.updateDeviceFacetText=function(){var displayText="";if(this.$scope.filter){if(this.$scope.filter.device.values)for(var i=0;i<this.$scope.filter.device.values.length;i++)displayText+=(i>0?", ":"")+this.$scope.filter.device.values[i].name;if(this.$scope.filter.device.values&&this.$scope.filter.device.values.length>0&&this.$scope.filter.deviceOS.values&&this.$scope.filter.deviceOS.values.length>0&&(displayText+=" on "),this.$scope.filter.deviceOS.values)for(var values=this.$scope.filter.deviceOS.values,i=0;i<values.length;i++)displayText+=(i>0?", ":"")+values[i].name}displayText||(displayText=this.getString("ms_allDevices")),this.deviceFacetText=displayText},DeviceTypeFilterSelectorController.prototype.fetchDevices=function(){var _this=this;if(this.filter&&this.filter.autoFetchOptions){var contextCopy=angular.copy(this.context),deviceTypeFilter=contextCopy.filter.getDeviceTypeFilter(this.filter.fieldCategory);deviceTypeFilter&&(deviceTypeFilter.device.values=null),AnalyticsSearchFacade.getSelectOptionsForFieldAndCategory(AnalyticsField.device,this.filter.fieldCategory,contextCopy).then(function(options){_this.filter.device.options=options,_this.filter.device.values&&FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.device,!0)})}},DeviceTypeFilterSelectorController.prototype.fetchDeviceOS=function(){var _this=this;if(this.filter&&this.filter.autoFetchOptions){var contextCopy=angular.copy(this.context),deviceTypeFilter=contextCopy.filter.getDeviceTypeFilter(this.filter.fieldCategory);deviceTypeFilter&&(deviceTypeFilter.deviceOS.values=null),AnalyticsSearchFacade.getSelectOptionsForFieldAndCategory(AnalyticsField.deviceOs,this.filter.fieldCategory,contextCopy).then(function(options){_this.filter.deviceOS.options=options,_this.filter.deviceOS.values&&FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.deviceOS,!0)})}},DeviceTypeFilterSelectorController.prototype.clearFilter=function(event){this.filterService.clearSearchParameter(this.filter.device),this.filterService.clearSearchParameter(this.filter.deviceOS),this.handleClick(event)},DeviceTypeFilterSelectorController.prototype.handle_UPDATE=function(){this.broadcastFilterUpdatedEvent(!1)},DeviceTypeFilterSelectorController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.$scope.onCloseDropdown()}),this._closeDropdownHandler},DeviceTypeFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService","filterService"],DeviceTypeFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.DeviceTypeFilterSelectorController=DeviceTypeFilterSelectorController,adComponentsModule.controller("deviceTypeFilterSelectorController",DeviceTypeFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/syntheticJob/SyntheticJobFilterSelector",["require","exports","../../FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var SyntheticJobFilterSelectorDirective=function(){function SyntheticJobFilterSelectorDirective(){return{restrict:"E",controller:"syntheticJobFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/custom/syntheticJob/SyntheticJobFilterSelector.html",scope:{filter:"=adFilter",context:"=adContext",onCloseDropdown:"=adOnCloseDropdown"}}}return SyntheticJobFilterSelectorDirective.$inject=[],SyntheticJobFilterSelectorDirective}();exports.SyntheticJobFilterSelectorDirective=SyntheticJobFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-synthetic-job-filter-selector"),SyntheticJobFilterSelectorDirective);var SyntheticJobFilterSelectorController=function(_super){function SyntheticJobFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService,filterService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.filterService=filterService,this.dropdownOpen=!1,this.syntheticJobFacetText="",$scope.controller=this,$scope.$watch("filter",function(){_this.filter=_this.$scope.filter,_.each(_this.filter.syntheticJob.values,function(option){var job=AnalyticsSyntheticJobCache.instance().getJobById(option.value);option.name=job?job.description:ResourceManager.instance().getString("ui","ms_notFound")}),FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.syntheticJob,!0),_this.updateSyntheticJobFacetText()},!0),$scope.$watch("controller.dropdownOpen",function(newValue,oldValue){newValue&&newValue!=oldValue&&_this.fetchSyntheticJobs()}),this.fetchSyntheticJobs()}return __extends(SyntheticJobFilterSelectorController,_super),SyntheticJobFilterSelectorController.prototype.updateSyntheticJobFacetText=function(){var displayText="",values=[];if(this.filter&&this.filter.syntheticJob.values){values=this.filter.syntheticJob.values;for(var i=0;i<values.length;i++)displayText+=(i>0?", ":"")+values[i].name}displayText||(displayText=this.getString("ms_allJobs")),this.syntheticJobFacetText=displayText},SyntheticJobFilterSelectorController.prototype.fetchSyntheticJobs=function(){var _this=this;if(this.filter){var contextCopy=angular.copy(this.context);Util.removeWhere(contextCopy.filter.filters,{type:FilterType.SYNTHETIC_JOB}),this.optionsPromise=AnalyticsSearchFacade.getSelectOptionsForFieldAndCategory(AnalyticsField.scheduleId,this.filter.fieldCategory,contextCopy,100).then(function(){_this.filter.syntheticJob.options=[],_.each(_this.filter.syntheticJob.options,function(option){var job=AnalyticsSyntheticJobCache.instance().getJobById(option.value);job&&(option.name=job.description,_this.filter.syntheticJob.options.push(option))}),_this.filter.syntheticJob.values?FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.syntheticJob,!0):_this.filter.syntheticJob.values=[],_this.optionsPromise=null})}},SyntheticJobFilterSelectorController.prototype.clearFilter=function(event){this.filterService.clearSearchParameter(this.filter.syntheticJob),this.handleClick(event)},SyntheticJobFilterSelectorController.prototype.handle_UPDATE=function(){this.broadcastFilterUpdatedEvent(!1)},SyntheticJobFilterSelectorController.prototype.onKeyUp=function(){this.broadcastFilterUpdatedEvent(!1)},SyntheticJobFilterSelectorController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.$scope.onCloseDropdown()}),this._closeDropdownHandler},SyntheticJobFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService","filterService"],SyntheticJobFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.SyntheticJobFilterSelectorController=SyntheticJobFilterSelectorController,adComponentsModule.controller("syntheticJobFilterSelectorController",SyntheticJobFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/boolean/BooleanFilterSelector",["require","exports","../../FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var BooleanFilterSelectorDirective=function(){function BooleanFilterSelectorDirective(){return{restrict:"E",controller:"BooleanFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/custom/boolean/BooleanFilterSelector.html",scope:{filter:"=adFilter",context:"=adContext",onCloseDropdown:"=adOnCloseDropdown"}}}return BooleanFilterSelectorDirective.$inject=[],BooleanFilterSelectorDirective}();exports.BooleanFilterSelectorDirective=BooleanFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-boolean-filter-selector"),BooleanFilterSelectorDirective);var BooleanFilterSelectorController=function(_super){function BooleanFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService,filterService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.filterService=filterService,this.dropdownOpen=!1,this.booleanFacetText="",this.trueText="",this.trueIcon=null,this.falseText="",this.falseIcon=null,$scope.controller=this,$scope.$watch("controller.filter",function(){_this.updateCheckboxLabels(),_this.updateBooleanFacetText()},!0)}return __extends(BooleanFilterSelectorController,_super),BooleanFilterSelectorController.prototype.updateBooleanFacetText=function(){var displayText="";displayText=!this.filter.showFalseValues&&this.filter.showTrueValues?this.trueText:this.filter.showFalseValues&&!this.filter.showTrueValues?this.falseText:"Any",this.booleanFacetText=displayText},BooleanFilterSelectorController.prototype.updateCheckboxLabels=function(){this.trueText||this.falseText||(this.updateCheckboxLabelText(),this.updateCheckboxLabelIcons())},BooleanFilterSelectorController.prototype.clearFilter=function(event){this.filter.showFalseValues=!0,this.filter.showTrueValues=!0,this.handleClick(event)},BooleanFilterSelectorController.prototype.handle_UPDATE=function(){this.broadcastFilterUpdatedEvent(!1)},BooleanFilterSelectorController.prototype.onKeyUp=function(){this.broadcastFilterUpdatedEvent(!1)},BooleanFilterSelectorController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.$scope.onCloseDropdown()}),this._closeDropdownHandler},BooleanFilterSelectorController.prototype.updateCheckboxLabelText=function(){var trueFieldValue=new AnalyticsFieldValue(AnalyticsUtils.BOOLEAN_TRUE_STRING,this.filter.analyticsField),falseFieldValue=new AnalyticsFieldValue(AnalyticsUtils.BOOLEAN_FALSE_STRING,this.filter.analyticsField);this.trueText=trueFieldValue.valueDisplayString,this.falseText=falseFieldValue.valueDisplayString},BooleanFilterSelectorController.prototype.updateCheckboxLabelIcons=function(){switch(this.filter.analyticsField.fieldDefinition.fieldName){case AnalyticsField.success:this.trueIcon=ImageUtil.request_normal,this.falseIcon=ImageUtil.request_error;break;default:this.trueIcon=null,this.falseIcon=null}},BooleanFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService","filterService"],BooleanFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.BooleanFilterSelectorController=BooleanFilterSelectorController,adComponentsModule.controller("BooleanFilterSelectorController",BooleanFilterSelectorController)}),define("app/view/apm/diagnosticSession/filterBar/DiagnosticSessionFilterType",["require","exports"],function(require,exports){!function(DiagnosticSessionFilterType){DiagnosticSessionFilterType[DiagnosticSessionFilterType.TYPE=0]="TYPE",DiagnosticSessionFilterType[DiagnosticSessionFilterType.BT=1]="BT",DiagnosticSessionFilterType[DiagnosticSessionFilterType.INFRA=2]="INFRA",DiagnosticSessionFilterType[DiagnosticSessionFilterType.GUID=3]="GUID"}(exports.DiagnosticSessionFilterType||(exports.DiagnosticSessionFilterType={}));exports.DiagnosticSessionFilterType}),define("app/view/apm/diagnosticSession/DiagnosticSessionListUtil",["require","exports","app/view/apm/diagnosticSession/filterBar/DiagnosticSessionFilterType"],function(require,exports,filterTypeModule){var DiagnosticSessionListUtil=function(){function DiagnosticSessionListUtil(){}return DiagnosticSessionListUtil.getFilterForSnapshostInDiagnosticSession=function(diagSession,appId){var endTimeInMillisec,filter={},timeRange={};return endTimeInMillisec=isNaN(diagSession.sessionEndTimeInMillisec)||0===diagSession.sessionEndTimeInMillisec?diagSession.timeInMillisec+60*DateTimeUtil.MILLISEC_PER_MIN:diagSession.sessionEndTimeInMillisec+10*DateTimeUtil.MILLISEC_PER_MIN,timeRange.type=TimeRangeSpecifierType.BETWEEN_TIMES,timeRange.startTime=new Date(diagSession.timeInMillisec),timeRange.endTime=new Date(endTimeInMillisec),filter.rangeSpecifier=timeRange,Util.isValidId(appId)&&(filter.applicationIds=[appId]),filter.maxRows=600,filter.diagnosticSessionGuid=[diagSession.guid],filter},DiagnosticSessionListUtil.getRelevantSnapshotsFilterForDiagnosticSession=function(diagSession,appId){var filter=DiagnosticSessionListUtil.getFilterForSnapshostInDiagnosticSession(diagSession,appId);return filter.firstInChain=!1,filter.diagnosticSnapshot=!0,filter.diagnosticSessionGuid=[],Util.isValidId(diagSession.businessTransactionId)&&(filter.businessTransactionIds=[diagSession.businessTransactionId]),Util.isValidId(diagSession.applicationComponentId)&&(filter.applicationComponentIds=[diagSession.applicationComponentId]),Util.isValidId(diagSession.applicationComponentNodeId)&&(filter.applicationComponentNodeIds=[diagSession.applicationComponentNodeId]),filter},DiagnosticSessionListUtil.getFilterType=function(filter){return filter instanceof EjsBusinessTransactionFilter?1:filter instanceof EjsInfrastructureFilter?2:filter instanceof EjsTextFilter?3:filter instanceof EjsDiagSessionTypeFilter?0:-1},DiagnosticSessionListUtil.renderName=function(value,metadata,item){var entry=item.raw;return metadata.tdAttr='data-qtip="'+entry.name+'"',"<span"+(entry.entryType===DiagnosticSessionTreeEntryType.EVENT?' class="ads-bold-text">':">")+entry.name+"</span>"},DiagnosticSessionListUtil.renderSummary=function(value,metadata,item){var summary=item.raw.summary;return metadata.tdAttr='data-qtip="'+summary+'"',"<span>"+summary+"</span>"},DiagnosticSessionListUtil.renderTime=function(value,metadata,item){var time=item.raw.timeInMillisec;return time>0?DateTimeUtil.getDateTimeString(time):""},DiagnosticSessionListUtil.renderExeTime=function(alue,metadata,item){var milliseconds=item.raw.rsdExecutionTimeMilliSec;return"<span>"+(milliseconds>0?ViewUtil.formatNumber(milliseconds):MetricUtil.NO_DATA_DISPLAY_STRING)+"</span>"},DiagnosticSessionListUtil.renderBtName=function(value,metadata,item){return DiagnosticSessionListUtil.renderEntityNameLink(item.raw,EntityType.BUSINESS_TRANSACTION)},DiagnosticSessionListUtil.renderTierName=function(value,metadata,item){return DiagnosticSessionListUtil.renderEntityNameLink(item.raw,EntityType.APPLICATION_COMPONENT)},DiagnosticSessionListUtil.renderNodeName=function(value,metadata,item){return DiagnosticSessionListUtil.renderEntityNameLink(item.raw,EntityType.APPLICATION_COMPONENT_NODE)},DiagnosticSessionListUtil.renderEntityNameLink=function(entry,entityType){switch(entityType){case EntityType.BUSINESS_TRANSACTION:var name=Util.getProperty("businessTransactionName",entry);if(!StringUtils.isNullOrEmptyString(name))return'<span class="adsLinkText '+DiagnosticSessionListUtil.BT_LINK_CLASS+'">'+name+"</span>";break;case EntityType.APPLICATION_COMPONENT:var name=Util.getProperty("applicationComponentName",entry);if(!StringUtils.isNullOrEmptyString(name))return'<span class="adsLinkText '+DiagnosticSessionListUtil.COMPONENT_LINK_CLASS+'">'+name+"</span>";break;case EntityType.APPLICATION_COMPONENT_NODE:var name=Util.getProperty("applicationComponentNodeName",entry);if(!StringUtils.isNullOrEmptyString(name))return'<span class="adsLinkText '+DiagnosticSessionListUtil.NODE_LINK_CLASS+'">'+name+"</span>";default:return MetricUtil.NO_DATA_DISPLAY_STRING}return MetricUtil.NO_DATA_DISPLAY_STRING},DiagnosticSessionListUtil.getDiagnosticSessionTypeDisplay=function(diagnosticSessionType){var subType=resourceManager.getString("ui","ms_diagnoticSessionTrigger_"+diagnosticSessionType);return StringUtils.isNullOrEmptyString(subType)?diagnosticSessionType:subType},DiagnosticSessionListUtil.getObjectIconSourceByDiagnosticSessionType=function(diagnosticSessionType){return diagnosticSessionType===SnapshotPolicy.ON_DEMAND?"images/iconNavDiagnosticSessions.svg":diagnosticSessionType===SnapshotPolicy.POLICY_FAILURE_DIAGNOSTIC_SESSION?"images/policy.png":diagnosticSessionType===SnapshotPolicy.SLOW_DIAGNOSTIC_SESSION?"images/iconNavAbnormalSlowDiagnosticSession.svg":diagnosticSessionType===SnapshotPolicy.ERROR_DIAGNOSTIC_SESSION?"images/iconNavAbnormalDiagnosticSession.svg":ImageUtil.generalObject},DiagnosticSessionListUtil.createDiagnosticSessionTreeEntryFromRequestSegmentData=function(rsd){var entry={};return entry.name=Util.getEnumMessageString("ms_userExperience_",rsd.userExperience)+" "+resourceManager.getString("ui","ms_requestSnapshot"),entry.entryType=DiagnosticSessionTreeEntryType.REQUEST_SEGMENT_DATA,entry.summary=rsd.summary,entry.guid=rsd.diagnosticSessionGUID,entry.timeInMillisec=rsd.serverStartTime,entry.rsdExecutionTimeMilliSec=rsd.timeTakenInMilliSecs,entry.rsdUserExperience=rsd.userExperience,entry.requestGUID=rsd.requestGUID,entry.businessTransactionId=rsd.businessTransactionId,entry.businessTransactionName=rsd.businessTransactionName,entry.applicationComponentId=rsd.applicationComponentId,entry.applicationComponentName=rsd.applicationComponentName,entry.applicationComponentNodeId=rsd.applicationComponentNodeId,entry.applicationComponentNodeName=rsd.applicationComponentNodeName,entry.iconSource=ImageUtil.getUserExperienceIcon(entry.rsdUserExperience),entry
},DiagnosticSessionListUtil.convertDiagnosticSessionTreeEntries=function(entries){return entries.forEach(function(entry){entry.entryType===DiagnosticSessionTreeEntryType.EVENT&&(entry.name=DiagnosticSessionListUtil.getDiagnosticSessionTypeDisplay(entry.diagnosticSessionType),entry.iconSource=DiagnosticSessionListUtil.getObjectIconSourceByDiagnosticSessionType(entry.diagnosticSessionType),entry.children=[DiagnosticSessionListUtil.DUMMY_TREE_ENTRY]),entry.id=Util.generateId()}),entries},DiagnosticSessionListUtil.getDiagnosticSessionDurationDisplay=function(entry){var endTimeInMillisec=isNaN(entry.sessionEndTimeInMillisec)?(new Date).getDate():entry.sessionEndTimeInMillisec,durationString=DateTimeUtil.timeInSecToString((endTimeInMillisec-entry.timeInMillisec)/DateTimeUtil.MILLISEC_PER_SEC),startTimeString=DateTimeUtil.getDateTimeString(entry.timeInMillisec),endTimeString=DateTimeUtil.getDateTimeString(endTimeInMillisec),detailTimeString=" ( "+startTimeString+" - "+endTimeString+" )";return isNaN(entry.sessionEndTimeInMillisec)?"Ongoing: "+durationString+detailTimeString:durationString+detailTimeString},DiagnosticSessionListUtil.getDiagnosticSessionTimeRange=function(entry){var timeRangeSpecifier={};timeRangeSpecifier.type=TimeRangeSpecifierType.BETWEEN_TIMES,timeRangeSpecifier.startTime=new Date(entry.timeInMillisec);var endTimeMilisec=entry.sessionEndTimeInMillisec,currentDate=new Date;return endTimeMilisec>currentDate.getDate()&&(endTimeMilisec=currentDate.getDate()),timeRangeSpecifier.endTime=new Date(endTimeMilisec),timeRangeSpecifier},DiagnosticSessionListUtil.viewSnapshotList=function(applicationId,viewMode){var params=URLParams.getCurrentUrlParams();DashboardUtil.isBTDash()?(params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_BT_ALL_SNAPSHOT_LIST),params.setNumberParam(UrlConstants.BUSINESS_TRANSACTION_ID,params.businessTransactionId())):DashboardUtil.isTierDash()?(params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_COMPONENT_ALL_SNAPSHOT_LIST),params.setNumberParam(UrlConstants.COMPONENT_ID,params.componentId())):DashboardUtil.isNodeDash()?(params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_NODE_ALL_SNAPSHOT_LIST),params.setNumberParam(UrlConstants.NODE_ID,params.nodeId())):params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_ALL_SNAPSHOT_LIST),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setParam(UrlConstants.APP_SNAPSHOT_LIST_MODE,viewMode),NavigationService.instance().navigateTo(params.toString())},DiagnosticSessionListUtil.NODE_LINK_CLASS="adsNodeLinkListener",DiagnosticSessionListUtil.COMPONENT_LINK_CLASS="adsComponentLinkListener",DiagnosticSessionListUtil.BT_LINK_CLASS="adsBusinessTransactionLinkListener",DiagnosticSessionListUtil.DUMMY_TREE_ENTRY={name:"Loading...",summary:"",businessTransactionName:"",applicationComponentName:"",applicationComponentNodeName:""},DiagnosticSessionListUtil}();return DiagnosticSessionListUtil});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/diagSessionType/DiagSessionTypeFilterSelector",["require","exports","../../FilterSelectorControllerBase","app/view/apm/diagnosticSession/DiagnosticSessionListUtil"],function(require,exports,FilterSelectorControllerBase,DiagnosticSessionListUtil){var DiagSessionTypeFilterSelectorDirective=function(){function DiagSessionTypeFilterSelectorDirective(){return{restrict:"E",controller:"DiagSessionTypeFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/custom/diagSessionType/DiagSessionTypeFilterSelector.html",scope:{filter:"=adFilter",applicationId:"=adApplicationId"}}}return DiagSessionTypeFilterSelectorDirective.$inject=[],DiagSessionTypeFilterSelectorDirective}();exports.DiagSessionTypeFilterSelectorDirective=DiagSessionTypeFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-diag-session-type-filter-selector"),DiagSessionTypeFilterSelectorDirective);var DiagSessionTypeFilterSelectorController=function(_super){function DiagSessionTypeFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,$scope.controller=this,this.setupViewFromFilter()}return __extends(DiagSessionTypeFilterSelectorController,_super),DiagSessionTypeFilterSelectorController.prototype.watchFilter=function(newVal){this.filter=newVal,this.setupViewFromFilter()},DiagSessionTypeFilterSelectorController.prototype.setupViewFromFilter=function(){var _this=this;this.listData=[],_.map(DiagSessionTypeFilterSelectorController.DIAG_SESSION_TYPE_ARRAY,function(diagSessionType){var filterSelectorListItem={};filterSelectorListItem.listItem=diagSessionType,filterSelectorListItem.selected=_this.isTypeSelected(diagSessionType),filterSelectorListItem.iconPath=DiagnosticSessionListUtil.getObjectIconSourceByDiagnosticSessionType(diagSessionType),_this.listData.push(filterSelectorListItem)})},DiagSessionTypeFilterSelectorController.prototype.isTypeSelected=function(type){if(this.filter){var filter=this.filter;if(filter&&filter.selectedDiagSessionTypes)return-1!==filter.selectedDiagSessionTypes.indexOf(type)}return!1},DiagSessionTypeFilterSelectorController.prototype.getSelectedItems=function(){var _this=this,selectedDiagSessionTypes=[];return _.each(this.listData,function(selectedFilterSelectorListItem){selectedFilterSelectorListItem.selected&&selectedDiagSessionTypes.push(_this.getLabelForDiagnosticSessionType(selectedFilterSelectorListItem.listItem))}),selectedDiagSessionTypes},DiagSessionTypeFilterSelectorController.prototype.getSummaryString=function(truncate){void 0===truncate&&(truncate=!0);var selectedDiagSessionTypes=this.getSelectedItems();if(0==selectedDiagSessionTypes.length)return"None Selected";selectedDiagSessionTypes.sort();var summary="";if(truncate)summary+="("+selectedDiagSessionTypes.length+") "+selectedDiagSessionTypes[0]+(selectedDiagSessionTypes.length>1?", ...":""),summary=StringUtils.truncateString(summary,FilterSelectorControllerBase.FilterSelectorControllerBase.MAX_FILTER_TEXT_LENGTH,!0);else for(var i=0;i<selectedDiagSessionTypes.length;i++)summary+=selectedDiagSessionTypes[i]+" ";return summary},DiagSessionTypeFilterSelectorController.prototype.getFullSummaryString=function($event){var selectedDiagSessionTypes=this.getSelectedItems();0===selectedDiagSessionTypes.length?$event.currentTarget.title=resourceManager.getString("ui","ms_noneSelected"):(selectedDiagSessionTypes.sort(),$event.currentTarget.title=selectedDiagSessionTypes.join())},DiagSessionTypeFilterSelectorController.prototype.getLabelForDiagnosticSessionType=function(diagSessionType){return StringUtils.isNullOrEmptyString(diagSessionType)?"":SnapshotPolicy.SLOW_DIAGNOSTIC_SESSION===diagSessionType?resourceManager.getString("ui","ms_abnormalSlowRate"):SnapshotPolicy.ERROR_DIAGNOSTIC_SESSION===diagSessionType?resourceManager.getString("ui","ms_abnormalErrorRate"):SnapshotPolicy.ON_DEMAND===diagSessionType?resourceManager.getString("ui","ms_manual"):void 0},DiagSessionTypeFilterSelectorController.prototype.clearFilterValues=function(){this.filter.selectedDiagSessionTypes=[]},DiagSessionTypeFilterSelectorController.prototype.getClickHandler=function(){var _this=this;return this._handler||(this._handler=function(selected,selectedFilterSelectorListItem){_this.handle_SELECT_DIAG_SESSION_TYPE(selected,selectedFilterSelectorListItem)}),this._handler},DiagSessionTypeFilterSelectorController.prototype.handle_SELECT_DIAG_SESSION_TYPE=function(selected,selectedFilterSelectorListItem){var diagSessionTypeFilter=this.filter;if(selectedFilterSelectorListItem&&diagSessionTypeFilter){_.isUndefined(diagSessionTypeFilter.selectedDiagSessionTypes)&&(diagSessionTypeFilter.selectedDiagSessionTypes=[]);var diagSessionType=selectedFilterSelectorListItem.listItem,index=diagSessionTypeFilter.selectedDiagSessionTypes.indexOf(diagSessionType);-1===index&&selected?diagSessionTypeFilter.selectedDiagSessionTypes.push(diagSessionType):selected||diagSessionTypeFilter.selectedDiagSessionTypes.splice(index,1),this.broadcastFilterUpdatedEvent()}},DiagSessionTypeFilterSelectorController.DIAG_SESSION_TYPE_ARRAY=[SnapshotPolicy.SLOW_DIAGNOSTIC_SESSION,SnapshotPolicy.ERROR_DIAGNOSTIC_SESSION,SnapshotPolicy.ON_DEMAND],DiagSessionTypeFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService"],DiagSessionTypeFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.DiagSessionTypeFilterSelectorController=DiagSessionTypeFilterSelectorController,adComponentsModule.controller("DiagSessionTypeFilterSelectorController",DiagSessionTypeFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/page/PageFilterSelector",["require","exports","../../FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var PageFilterSelectorDirective=function(){function PageFilterSelectorDirective(){return{restrict:"E",controller:"pageFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/custom/page/PageFilterSelector.html",scope:{filter:"=adFilter",context:"=adContext",onCloseDropdown:"=adOnCloseDropdown"}}}return PageFilterSelectorDirective.$inject=[],PageFilterSelectorDirective}();exports.PageFilterSelectorDirective=PageFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-page-filter-selector"),PageFilterSelectorDirective);var PageFilterSelectorController=function(_super){function PageFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService,filterService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.filterService=filterService,this.PAGE_SEARCH_MODE={BY_TYPE:"BY_TYPE",BY_NAME:"BY_NAME"},this.pageSearchMode="",this.pageFacetText="",this.dropdownOpen=!1,this.pageTypeSearchPlaceholder="",this.pageSearchPlaceholder="",this.ajaxSearchPlaceholder="",this.iframeSearchPlaceholder="",this.virtualPageSearchPlaceholder="",this.showPageTypeSection=!0,this.showAjaxSection=!0,this.showIframeSection=!0,this.showVirtualPageSection=!0,this.showFilterDropdownHeader=!0,this.filterBarHeader="",$scope.controller=this,this.$scope.$watch("controller.context.analyticsMode",function(newValue){Util.isDefAndNotNull(newValue)&&_this.setupSelectorForMode(newValue)}),$scope.$watch("filter",function(){_this.filter=_this.$scope.filter,_this.updatePageFacetText()},!0),this.$scope.$watch("controller.dropdownOpen",function(newValue,oldValue){newValue&&newValue!==oldValue&&(_this.fetchPageTypes(),_this.fetchPageAndAjaxNames())}),this.$scope.$watch("filter.pageType.value",function(newValue){newValue&&(_this.$scope.filter.pageName.values=[],_this.$scope.filter.ajaxName.values=[],_this.$scope.filter.iframeName.values=[],_this.pageSearchMode=_this.PAGE_SEARCH_MODE.BY_TYPE)}),this.$scope.$watch("filter.pageName.values",function(newValue){newValue&&null!=newValue&&newValue.length>0&&(_this.$scope.filter.pageType.value=null,_this.pageSearchMode=_this.PAGE_SEARCH_MODE.BY_NAME)},!0),this.$scope.$watch("filter.ajaxName.values",function(newValue){newValue&&null!=newValue&&newValue.length>0&&(_this.$scope.filter.pageType.value=null,_this.pageSearchMode=_this.PAGE_SEARCH_MODE.BY_NAME)},!0),this.$scope.$watch("filter.iframeName.values",function(newValue){newValue&&null!=newValue&&newValue.length>0&&(_this.$scope.filter.pageType.value=null,_this.pageSearchMode=_this.PAGE_SEARCH_MODE.BY_NAME)},!0),this.$scope.$watch("filter.virtualPageName.values",function(newValue){newValue&&null!=newValue&&newValue.length>0&&(_this.$scope.filter.pageType.value=null,_this.pageSearchMode=_this.PAGE_SEARCH_MODE.BY_NAME)},!0),this.$scope.$watchCollection("filter.pageType.options",function(newValue){_this.pageTypeSearchPlaceholder=_this.getString(newValue&&newValue.length>0?"ms_analyze_pageTypeSearchPlaceholder":"ms_analyze_pageTypeSearchPlaceholderEmpty")}),this.$scope.$watchCollection("filter.pageName.options",function(newValue){_this.pageSearchPlaceholder=_this.getString(newValue&&newValue.length>0?"ms_analyze_pageSearchPlaceholder":"ms_analyze_pageSearchPlaceholderEmpty")}),this.$scope.$watchCollection("filter.ajaxName.options",function(newValue){_this.ajaxSearchPlaceholder=_this.getString(newValue&&newValue.length>0?"ms_analyze_AJAXSearchPlaceholder":"ms_analyze_AJAXSearchPlaceholderEmpty")}),this.$scope.$watchCollection("filter.iframeName.options",function(newValue){_this.iframeSearchPlaceholder=_this.getString(newValue&&newValue.length>0?"ms_analyze_iFrameSearchPlaceholder":"ms_analyze_iFrameSearchPlaceholderEmpty")}),this.$scope.$watchCollection("filter.virtualPageName.options",function(newValue){_this.virtualPageSearchPlaceholder=_this.getString(newValue&&newValue.length>0?"ms_analyze_virtualPageSearchPlaceholder":"ms_analyze_virtualPageSearchPlaceholderEmpty")})}return __extends(PageFilterSelectorController,_super),PageFilterSelectorController.prototype.fetchPageTypes=function(){var _this=this;if(this.filter&&this.filter.autoFetchOptions&&this.showPageTypeSection){var contextCopy=angular.copy(this.context),pageFilterCleared=contextCopy.filter.getPageFilter(this.filter.analyticsField);this.filterService.clearSearchParameter(pageFilterCleared.pageType),pageFilterCleared.clearAllNamesValues(),AnalyticsSearchFacade.getSelectOptionsForFieldAndCategory(AnalyticsField.pageType,this.filter.analyticsField.fieldDefinition.category,contextCopy).then(function(options){_this.filter.pageType.options=options,_this.filter.pageType.value&&FilterService.instance().reselectSelectValuesAndMapToOptions(_this.filter.pageType,!0)})}},PageFilterSelectorController.prototype.fetchPageAndAjaxNames=function(){if(this.filter&&this.filter.autoFetchOptions){var contextCopy=angular.copy(this.context),pageFilterCopy=contextCopy.filter.getPageFilter(this.filter.analyticsField);pageFilterCopy&&(this.filterService.clearSearchParameter(pageFilterCopy.pageName),this.filterService.clearSearchParameter(pageFilterCopy.ajaxName),this.filterService.clearSearchParameter(pageFilterCopy.iframeName),this.filterService.clearSearchParameter(pageFilterCopy.virtualPageName),this.filterService.clearSearchParameter(pageFilterCopy.pageType),this.fetchNamesForNameFilter(this.filter.pageName,contextCopy,"BASE_PAGE"),this.showIframeSection&&this.fetchNamesForNameFilter(this.filter.iframeName,contextCopy,"IFRAME"),this.showAjaxSection&&this.fetchNamesForNameFilter(this.filter.ajaxName,contextCopy,"AJAX"),this.showVirtualPageSection&&this.fetchNamesForNameFilter(this.filter.virtualPageName,contextCopy,"VIRTUAL_PAGE"))}},PageFilterSelectorController.prototype.fetchNamesForNameFilter=function(nameFilter,context,pageTypeValue){var resultHandler=function(options){nameFilter.options=options,nameFilter.values&&FilterService.instance().reselectSelectValuesAndMapToOptions(nameFilter,!0)};3===this.context.analyticsMode?AnalyticsSearchFacade.getSelectOptionsForFieldAndCategory(AnalyticsField.pageName,this.filter.analyticsField.fieldDefinition.category,context,PageFilterSelectorController.MAX_NAMES_OPTIONS_TO_DISPLAY).then(resultHandler):AnalyticsSearchFacade.getSelectOptionsForPageName(this.filter.analyticsField.fieldDefinition.category,context,pageTypeValue,PageFilterSelectorController.MAX_NAMES_OPTIONS_TO_DISPLAY).then(resultHandler)},PageFilterSelectorController.prototype.updatePageFacetText=function(){var displayText="";if(this.$scope.filter)if(this.$scope.filter.pageType.value)displayText="Only "+this.$scope.filter.pageType.value.name;else{var pages=[];pages=pages.concat(this.$scope.filter.pageName.values||[],this.$scope.filter.ajaxName.values||[],this.$scope.filter.iframeName.values||[],this.$scope.filter.virtualPageName.values||[]),1===pages.length?displayText+=pages[0].name:pages.length>1&&(displayText+=pages.length+" "+this._pageFacetTextSuffixForMultiplePages)}displayText||(displayText=this._pageFacetTextForAllPages),this.pageFacetText=displayText},PageFilterSelectorController.prototype.clearFilter=function(event){this.filterService.clearSearchParameter(this.filter.pageType),this.filterService.clearSearchParameter(this.filter.pageName),this.filterService.clearSearchParameter(this.filter.ajaxName),this.filterService.clearSearchParameter(this.filter.iframeName),this.filterService.clearSearchParameter(this.filter.virtualPageName),this.handleClick(event)},PageFilterSelectorController.prototype.handle_UPDATE=function(){this.broadcastFilterUpdatedEvent(!1)},PageFilterSelectorController.prototype.onKeyUp=function(){this.broadcastFilterUpdatedEvent(!1)},PageFilterSelectorController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.$scope.onCloseDropdown()}),this._closeDropdownHandler},PageFilterSelectorController.prototype.setupSelectorForMode=function(analyticsMode){4===analyticsMode?(this.showPageTypeSection=!1,this.showAjaxSection=!1,this.showIframeSection=!0,this.showVirtualPageSection=!0,this.showFilterDropdownHeader=!1,this.filterBarHeader=this.getString("ms_rumPages"),this._pageFacetTextSuffixForMultiplePages=this.getString("ms_pages"),this._pageFacetTextForAllPages=this.getString("ms_allPages")):3===analyticsMode?(this.showPageTypeSection=!1,this.showAjaxSection=!1,this.showIframeSection=!1,this.showVirtualPageSection=!1,this.showFilterDropdownHeader=!1,this.filterBarHeader=this.getString("ms_pages"),this._pageFacetTextSuffixForMultiplePages=this.getString("ms_pages"),this._pageFacetTextForAllPages=this.getString("ms_allPages")):(this.showPageTypeSection=!0,this.showAjaxSection=!0,this.showIframeSection=!0,this.showVirtualPageSection=!0,this.showFilterDropdownHeader=!0,this.filterBarHeader=this.getString("ms_pagesAndAjaxRequestsNavLabel"),this._pageFacetTextSuffixForMultiplePages="Pages or AJAX Requests",this._pageFacetTextForAllPages=this.getString("ms_allPagesAndAJAX")),this.clearFiltersOfHiddenSelectors()},PageFilterSelectorController.prototype.clearFiltersOfHiddenSelectors=function(){this.showAjaxSection||this.filterService.clearSearchParameter(this.filter.ajaxName),this.showIframeSection||this.filterService.clearSearchParameter(this.filter.iframeName),this.showVirtualPageSection||this.filterService.clearSearchParameter(this.filter.virtualPageName)},PageFilterSelectorController.MAX_NAMES_OPTIONS_TO_DISPLAY=500,PageFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService","filterService"],PageFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.PageFilterSelectorController=PageFilterSelectorController,adComponentsModule.controller("pageFilterSelectorController",PageFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/filterTypes/custom/performance/PerformanceFilterSelector",["require","exports","../../FilterSelectorControllerBase"],function(require,exports,FilterSelectorControllerBase){var PerformanceFilterSelectorDirective=function(){function PerformanceFilterSelectorDirective(){return{restrict:"E",controller:"performanceFilterSelectorController",templateUrl:"app/view/components/filterBar/filterTypes/custom/performance/PerformanceFilterSelector.html",scope:{filter:"=adFilter",onCloseDropdown:"=adOnCloseDropdown"}}}return PerformanceFilterSelectorDirective.$inject=[],PerformanceFilterSelectorDirective}();exports.PerformanceFilterSelectorDirective=PerformanceFilterSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-performance-filter-selector"),PerformanceFilterSelectorDirective);var PerformanceFilterSelectorController=function(_super){function PerformanceFilterSelectorController($scope,resourceManager,notificationService,sharedInjectorService,filterService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.filterService=filterService,this.performanceFacetText="",this.dropdownOpen=!1,$scope.controller=this,$scope.$watch("filter",function(){_this.filter=_this.$scope.filter,_this.updatePerformanceFacetText()},!0)}return __extends(PerformanceFilterSelectorController,_super),PerformanceFilterSelectorController.prototype.updatePerformanceFacetText=function(){var displayText="";this.$scope.filter&&(this.$scope.filter.facetLowerBound.value||this.$scope.filter.facetUpperBound.value)&&(this.$scope.filter.histogramFacet.value&&(displayText+=this.$scope.filter.histogramFacet.value.name),this.$scope.filter.facetLowerBound.value&&this.$scope.filter.facetUpperBound.value?displayText+=" is between "+this.$scope.filter.facetLowerBound.value+" ms and "+this.$scope.filter.facetUpperBound.value+" ms":this.$scope.filter.facetLowerBound.value?displayText+=" is longer than "+this.$scope.filter.facetLowerBound.value+" ms":this.$scope.filter.facetUpperBound.value&&(displayText+=" is shorter than "+this.$scope.filter.facetUpperBound.value+" ms")),displayText||(displayText=this.getString("ms_notSpecified")),this.performanceFacetText=displayText},PerformanceFilterSelectorController.prototype.clearFilter=function(event){this.filterService.clearSearchParameter(this.filter.facetLowerBound),this.filterService.clearSearchParameter(this.filter.facetUpperBound),this.handleClick(event)},PerformanceFilterSelectorController.prototype.isFirstValLessThanOrEqualToSecondVal=function(){return this.$scope.filter.facetLowerBound.value&&this.$scope.filter.facetUpperBound.value?this.$scope.filter.facetLowerBound.value<=this.$scope.filter.facetUpperBound.value:!0},PerformanceFilterSelectorController.prototype.handle_UPDATE=function(){this.broadcastFilterUpdatedEvent(!1)},PerformanceFilterSelectorController.prototype.getCloseDropdownHandler=function(){var _this=this;return this._closeDropdownHandler||(this._closeDropdownHandler=function(){_this.$scope.onCloseDropdown()}),this._closeDropdownHandler},PerformanceFilterSelectorController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService","filterService"],PerformanceFilterSelectorController}(FilterSelectorControllerBase.FilterSelectorControllerBase);exports.PerformanceFilterSelectorController=PerformanceFilterSelectorController,adComponentsModule.controller("performanceFilterSelectorController",PerformanceFilterSelectorController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/FilterBar",["require","exports","./FilterBarControllerBase","./filterTypes/custom/location/LocationFilterSelector","./filterTypes/custom/application/ApplicationFilterSelector","./filterTypes/custom/infrastructure/InfrastructureFilterSelector","./filterTypes/generic/numeric/NumericFilterSelector","./filterTypes/generic/text/TextFilterSelector","./filterTypes/generic/nameValuePair/NameValuePairFilter","./filterTypes/custom/userExperience/UserExperienceFilterSelector","./filterTypes/custom/businessTransaction/BTFilterSelector","./filterTypes/custom/error/ErrorFilterSelector","./filterTypes/custom/searchInputText/SearchInputTextFilterSelector","./filterTypes/generic/superSelect/SuperSelectFilterSelector","./filterTypes/custom/deviceType/DeviceTypeFilterSelector","./filterTypes/custom/syntheticJob/SyntheticJobFilterSelector","./filterTypes/custom/boolean/BooleanFilterSelector","./filterTypes/custom/diagSessionType/DiagSessionTypeFilterSelector","./filterTypes/custom/page/PageFilterSelector","./filterTypes/custom/performance/PerformanceFilterSelector"],function(require,exports,FilterBarControllerBase,LocationFilterSelector,ApplicationFilterSelector,InfrastructureFilterSelector,NumericFilterSelector,TextFilterSelector,NameValuePairFilter,UserExperienceFilterSelector,BTFilterSelector,ErrorFilterSelector,SearchInputTextFilterSelector,SuperSelectFilterSelector,DeviceTypeFilterSelector,SyntheticJobFilterSelector,BooleanFilterSelector,DiagSessionTypeFilterSelector,PageFilterSelector,PerformanceFilterSelector){var FilterBarDirective=function(){function FilterBarDirective(){return{restrict:"E",controller:"FilterBarController",templateUrl:"app/view/components/filterBar/FilterBar.html",scope:{filterSet:"=adFilterSet",context:"=adContext",showTextSearch:"=adShowTextSearch",showDebugger:"=adShowDebugger"}}}return FilterBarDirective.$inject=[],FilterBarDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-filter-bar"),FilterBarDirective);var FilterBarController=function(_super){function FilterBarController($scope,resourceManager,applicationUiService){_super.call(this,$scope,resourceManager,applicationUiService),this.$scope=$scope,this.resourceManager=resourceManager,this.applicationUiService=applicationUiService,this.metaDataService=MetaDataService.instance(),$scope.controller=this}return __extends(FilterBarController,_super),FilterBarController.prototype.isFieldVisibleInCriteriaDropDown=function(field){if(!field)return!1;var visible=!0,fieldsRequiringSelectedApp=[AnalyticsField.transactionName,AnalyticsField.tier,AnalyticsField.node,AnalyticsField.errors],isAppSelected=Util.isValidId(this.selectedApplicationId);return isAppSelected||-1==fieldsRequiringSelectedApp.indexOf(field.fieldDefinition.fieldName)||(visible=!1),this.isFieldTypeAllowed(field)||(visible=!1),visible},FilterBarController.prototype.isFieldTypeAllowed=function(field){return field.fieldDefinition.fieldType===FieldType.OBJECT?!1:!0},FilterBarController.prototype.handle_ADD_FIELD_CRITERIA=function(analyticsField){var filterType=FilterSet.getFilterTypeForFieldDefinition(analyticsField.fieldDefinition);this.filterSet.addFilterToContext(filterType,analyticsField),this.dropdownOpen=!1},FilterBarController.prototype.handle_ADD_SEARCH_INPUT_TEXT=function(searchInputTextValue){return searchInputTextValue&&!StringUtils.isNullOrEmptyString(searchInputTextValue.trim())&&FilterSet.validateStringQuery(searchInputTextValue)?(this.addFilter(FilterSet.getSearchInputTextFilter(AnalyticsFields.getByName(AnalyticsField.message,this.metaDataService.logAnalyticsFields.allFields),searchInputTextValue)),!0):!1},FilterBarController.$inject=["$scope","resourceManager","applicationUiService"],FilterBarController}(FilterBarControllerBase.FilterBarControllerBase);adComponentsModule.controller("FilterBarController",FilterBarController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/filterBar/webAnalyze/WebAnalyzeFilterBar",["require","exports","../FilterBarControllerBase","../filterTypes/custom/location/LocationFilterSelector","../filterTypes/generic/superSelect/SuperSelectFilterSelector","../filterTypes/custom/deviceType/DeviceTypeFilterSelector","../filterTypes/custom/page/PageFilterSelector","../filterTypes/custom/performance/PerformanceFilterSelector"],function(require,exports,FilterBarControllerBase,LocationFilterSelector,SuperSelectFilterSelector,DeviceTypeFilterSelector,PageFilterSelector,PerformanceFilterSelector){var WebAnalyzeFilterBarDirective=function(){function WebAnalyzeFilterBarDirective(){return{restrict:"E",controller:"WebAnalyzeFilterBarController",templateUrl:"app/view/components/filterBar/FilterBar.html",scope:{adFilters:"=",showDebugger:"=adShowDebugger"}}}return WebAnalyzeFilterBarDirective.$inject=[],WebAnalyzeFilterBarDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-web-analyze-filter-bar"),WebAnalyzeFilterBarDirective);var WebAnalyzeFilterBarController=function(_super){function WebAnalyzeFilterBarController($scope,resourceManager,applicationUiService){var _this=this;_super.call(this,$scope,resourceManager,applicationUiService),this.$scope=$scope,this.resourceManager=resourceManager,this.applicationUiService=applicationUiService,this.metaDataService=MetaDataService.instance(),$scope.controller=this,$scope.filterSet=new FilterSet,this.dropdownPartialPath="app/view/components/filterBar/webAnalyze/WebAnalyzeFilterList.html",this.showSearchBar=!1,$scope.$watch("adFilters",function(){_this.processWebAnalyzeFilters()},!0);var params=URLParams.getCurrentUrlParams();AnalyticsMetaDataUiService.instance().getBrowserFieldDefinitions(AnalyticsIndexType.BROWSER_RECORD,params.getSharedDashboardToken()).then(function(response){var fieldDefinitions=AnalyticsMetaDataUiService.instance().getBrowserFieldDefinitions_response(response),analyticsFields=new AnalyticsFields(fieldDefinitions);_this.metaDataService.currentFields=analyticsFields,_this.metaDataService.currentFields.fieldGroups=[{fields:analyticsFields.allFields}]}),this.$scope.context=AnalyticsUtils.getDashboardContext(TimeRangeService.instance().currentTimeRange,$scope.filterSet,2,AnalyticsIndexType.BROWSER_RECORD)}return __extends(WebAnalyzeFilterBarController,_super),WebAnalyzeFilterBarController.prototype.handle_ADD_LOCATION_CRITERIA=function(){this.addFilter(this.filterSet.getLocationFilter(FieldCategory.BROWSER_RECORD,this.$scope.adFilters.geoCountry,this.$scope.adFilters.geoRegion,null,!1))},WebAnalyzeFilterBarController.prototype.handle_ADD_BROWSER_CRITERIA=function(){this.addFilter(this.filterSet.getBrowserFilter(FieldCategory.BROWSER_RECORD,this.$scope.adFilters.browser,!1))},WebAnalyzeFilterBarController.prototype.handle_ADD_DEVICE_TYPE_CRITERIA=function(){this.addFilter(this.filterSet.getDeviceTypeFilter(FieldCategory.BROWSER_RECORD,this.$scope.adFilters.device,this.$scope.adFilters.deviceOS,!1))},WebAnalyzeFilterBarController.prototype.handle_ADD_PAGE_CRITERIA=function(){var autoFetchOptions=!1;this.addFilter(FilterSet.getPageFilter(null,this.$scope.adFilters.pageName,this.$scope.adFilters.ajaxName,this.$scope.adFilters.iframeName,this.$scope.adFilters.virtualPageName,this.$scope.adFilters.pageType,autoFetchOptions))},WebAnalyzeFilterBarController.prototype.handle_ADD_PERFORMANCE_CRITERIA=function(){this.addFilter(FilterSet.getPerformanceFilter(this.$scope.adFilters.facetLowerBound,this.$scope.adFilters.facetUpperBound,this.$scope.adFilters.histogramFacet))},WebAnalyzeFilterBarController.prototype.processWebAnalyzeFilters=function(){if(this.$scope.adFilters){var locationFilterActive=angular.isObject(this.$scope.adFilters.geoCountry.value||this.$scope.adFilters.geoRegion.value),browserFilterActive=this.$scope.adFilters.browser.values&&this.$scope.adFilters.browser.values.length>0,deviceFilterActive=this.$scope.adFilters.device.values&&this.$scope.adFilters.device.values.length>0||this.$scope.adFilters.deviceOS.values&&this.$scope.adFilters.deviceOS.values.length>0,pageFilterActive=angular.isObject(this.$scope.adFilters.pageType.value)||this.$scope.adFilters.pageName.values&&this.$scope.adFilters.pageName.values.length>0||this.$scope.adFilters.ajaxName.values&&this.$scope.adFilters.ajaxName.values.length>0||this.$scope.adFilters.iframeName.values&&this.$scope.adFilters.iframeName.values.length>0||this.$scope.adFilters.virtualPageName.values&&this.$scope.adFilters.virtualPageName.values.length>0,performanceFilterActive=null!=this.$scope.adFilters.facetLowerBound.value&&this.$scope.adFilters.facetLowerBound.value>-1||this.$scope.adFilters.facetUpperBound.value>0;
locationFilterActive&&this.handle_ADD_LOCATION_CRITERIA(),browserFilterActive&&this.handle_ADD_BROWSER_CRITERIA(),deviceFilterActive&&this.handle_ADD_DEVICE_TYPE_CRITERIA(),pageFilterActive&&this.handle_ADD_PAGE_CRITERIA(),performanceFilterActive&&this.handle_ADD_PERFORMANCE_CRITERIA()}},WebAnalyzeFilterBarController.$inject=["$scope","resourceManager","applicationUiService"],WebAnalyzeFilterBarController}(FilterBarControllerBase.FilterBarControllerBase);adComponentsModule.controller("WebAnalyzeFilterBarController",WebAnalyzeFilterBarController)});var ADDialog=function(){function ADDialog(){return{restrict:"AE",scope:!1,transclude:!0,templateUrl:"app/view/components/dialog/Dialog.html",link:function(scope,iElement){iElement.addClass("ad-dialog");var dialogWrapper=$(iElement).find(".dialogTransclude");""!=iElement.attr("ad-dialog-style")&&(dialogWrapper.width("100%").height("100%"),$(iElement).find(".dialog").addClass(iElement.attr("ad-dialog-style"))),"auto"==iElement.attr("ad-scroll-dialog-body")&&($(iElement).parents(".modal").css("overflow-y","hidden"),$(iElement).parents(".modal").css("overflow","hidden"));var modalDialog=$(iElement).parents(".modal-dialog"),modalContent=$(iElement).parents(".modal-content");modalDialog.css("margin",0).addClass("expanded"),modalContent.addClass("expanded");var maxHeight=$(window).height(),dialogHeader=dialogWrapper.children(".modal-header"),dialogFooter=dialogWrapper.children(".modal-footer"),dialogBody=dialogWrapper.children(".adsDialogBody"),measuredHeaderHeight=dialogHeader.outerHeight(!0),headerHeight=measuredHeaderHeight>0?measuredHeaderHeight:45,headerAndFooterHeight=headerHeight+dialogFooter.outerHeight(!0);dialogWrapper.css("max-height",maxHeight),dialogBody.css("max-height",maxHeight-headerAndFooterHeight),scope.$on(EventConstants.UEV_LAYOUT_CHANGED,function(){maxHeight=$(window).height(),dialogWrapper.css("max-height",maxHeight),dialogBody.css("max-height",maxHeight-headerAndFooterHeight)})}}}return ADDialog}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-dialog"),ADDialog),define("app/view/components/dialog/Dialog",function(){});var FilterParameterDirective=function(){function FilterParameterDirective(){return{restrict:"A",controller:"FilterParameterController",templateUrl:"app/view/components/filterParameter/FilterParameter.html",scope:{filterParameter:"=adFilterParameter",hideLabels:"=svHideLabels"}}}return FilterParameterDirective.$inject=[],FilterParameterDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-filter-parameter"),FilterParameterDirective),define("app/view/components/filterParameter/FilterParameterDirective",function(){}),define("app/view/components/filterParameter/FilterParameterController",["require","exports"],function(require,exports){var FilterParameterController=function(){function FilterParameterController($scope,resourceManager){var _this=this;this.$scope=$scope,this.resourceManager=resourceManager,this.selectOptions=[],this.requireLargeField=!1,this.showSecondComparativeNumberValue=!1,this.selectedGridOptions=new GridOptions,this.availableGridOptions=new GridOptions,this.alternateGridOptions=new GridOptions,$scope.controller=this,this.parameterTypes=ParameterTypes,$scope.$watch("filterParameter",function(){_this.$scope.filterParameter&&_this.$scope.filterParameter.type==ParameterTypes.FLY_OUT_SELECT&&_this.initFlyoutSelector(),_this.checkToShowSecondComparativeNumberValue()}),$scope.$watch("filterParameter.comparator",function(){_this.checkToShowSecondComparativeNumberValue()}),this.initSelectOptions()}return FilterParameterController.prototype.initSelectOptions=function(){var filterParam=this.$scope.filterParameter;if(filterParam&&filterParam.type===ParameterTypes.TREE_LIST){FilterParameterController.largeFieldParameters.indexOf(filterParam.name)>-1&&(this.requireLargeField=!0);for(var options=this.$scope.filterParameter.options,i=0;i<options.length;i++)this.selectOptions.push({name:options[i].text,value:options[i].value})}},FilterParameterController.prototype.getStyleForLargeField=function(){return this.requireLargeField?{width:"264px"}:void 0},FilterParameterController.prototype.getLabel=function(keyOrText){return!keyOrText||this.$scope.hideLabels?"":0==keyOrText.indexOf("ms_")?this.resourceManager.getString("ui",keyOrText):keyOrText},FilterParameterController.prototype.checkToShowSecondComparativeNumberValue=function(){var filter=this.$scope.filterParameter;this.showSecondComparativeNumberValue=filter&&filter.type==ParameterTypes.COMPARATIVE_NUMBER&&filter.comparator&&filter.comparator.value?filter.comparator.value==FilterPropertyOperator.BETWEEN_MIN_AND_MAX:!1},FilterParameterController.prototype.initFlyoutSelector=function(){var _this=this,filter=this.$scope.filterParameter,iconRenderer=function(iconString){return"<img class='adsSvgIconSmall' src='"+(ImageUtil[iconString]?ImageUtil[iconString]:iconString)+"'/>"},valueColumn=GridColumn.createColumn(0,"value","");valueColumn.hidden=!0;var selectorGridColumns=[GridColumn.createColumn(20,"icon","",iconRenderer),GridColumn.createColumn(80,"name","Name"),valueColumn];this.availableGridOptions=new GridOptions,this.availableGridOptions.columnProvider=selectorGridColumns,this.availableGridOptions.dataProvider=filter.options,this.availableGridOptions.multiSelect=!0,filter.alternateOptions&&filter.alternateOptions.length>0&&(this.alternateGridOptions=new GridOptions,this.alternateGridOptions.columnProvider=selectorGridColumns,this.alternateGridOptions.dataProvider=filter.alternateOptions,this.alternateGridOptions.multiSelect=!0),this.selectedGridOptions=new GridOptions,this.selectedGridOptions.columnProvider=selectorGridColumns,this.selectedGridOptions.dataProvider=this.$scope.filterParameter.values||[],this.selectedGridOptions.multiSelect=!0,this.selectedGridOptions.emptyText=this.getLabel("Nothing Selected"),this.$scope.$watch("controller.selectedGridOptions.dataProvider",function(newValue,oldValue){newValue!=oldValue&&_this.$scope.filterParameter.values!=newValue&&(_this.$scope.filterParameter.values=newValue)},!0),this.$scope.$watch("filterParameter.values",function(newValue,oldValue){newValue!=oldValue&&newValue!=_this.selectedGridOptions.dataProvider&&(_this.selectedGridOptions.dataProvider=newValue)})},FilterParameterController.$inject=["$scope","resourceManager"],FilterParameterController.largeFieldParameters=["Network Request Names"],FilterParameterController}();exports.FilterParameterController=FilterParameterController,appdynamicsModule.controller("FilterParameterController",FilterParameterController)});var FilterContainerDirective=function(){function FilterContainerDirective(){return{restrict:"A",controller:"FilterContainerController",templateUrl:"app/view/components/filterContainer/FilterContainer.html",scope:{filters:"=adFilterContainer",buttons:"=svFilterButtons",layout:"=svFilterLayout"}}}return FilterContainerDirective.$inject=[],FilterContainerDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-filter-container"),FilterContainerDirective),define("app/view/components/filterContainer/FilterContainerDirective",function(){});var FilterContainerController=function(){function FilterContainerController($scope,resourceManager){this.$scope=$scope,this.resourceManager=resourceManager,$scope.controller=this}return FilterContainerController.prototype.getLabel=function(keyOrText){return keyOrText?0==keyOrText.indexOf("ms_")?this.resourceManager.getString("ui",keyOrText):keyOrText:""},FilterContainerController.$inject=["$scope","resourceManager"],FilterContainerController}();appdynamicsModule.controller("FilterContainerController",FilterContainerController),define("app/view/components/filterContainer/FilterContainerController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EntityFilter=function(_super){function EntityFilter(entityType){_super.call(this),this.selectedEntities=[],this.type=entityType}return __extends(EntityFilter,_super),EntityFilter}(FilterBase);define("app/view/components/filterBar/filters/EntityFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},HealthFilter=function(_super){function HealthFilter(){_super.call(this),this.setFields()}return __extends(HealthFilter,_super),HealthFilter.prototype.setFields=function(){this.type=FilterType.HEALTH,this.directiveString="ad-health-filter-selector",this.selectedHealthLabels=[]},HealthFilter}(FilterBase),UserExperienceFilter=function(_super){function UserExperienceFilter(){_super.call(this),this.setFields()}return __extends(UserExperienceFilter,_super),UserExperienceFilter.prototype.setFields=function(){this.type=FilterType.USER_EXPERIENCE,this.directiveString="ad-user-experience-filter-selector"},UserExperienceFilter}(HealthFilter);define("app/view/components/filterBar/filters/UserExperienceFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},HttpFilter=function(_super){function HttpFilter(){_super.call(this),this.type=FilterType.HTTP,this.directiveString="ad-http-filter-selector"}return __extends(HttpFilter,_super),HttpFilter}(FilterBase);define("app/view/components/filterBar/filters/HttpFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},NumericFilter=function(_super){function NumericFilter(viewOpts){void 0===viewOpts&&(viewOpts=[]),_super.call(this),this.viewOpts=viewOpts,this.setFields(viewOpts)}return __extends(NumericFilter,_super),NumericFilter.prototype.setFields=function(viewOpts){this.visibleOperators=viewOpts,this.type=FilterType.NUMERIC,this.directiveString="ad-numeric-filter-selector"},NumericFilter.prototype.isInvalidInputForNumericField=function(allowDecimal){var invalidInputFlag=!1;if(this.selectedOperator){var selectedOperator=this.selectedOperator.value;selectedOperator===ResourceManager.instance().getString("ui","ms_equalOp")||selectedOperator===ResourceManager.instance().getString("ui","ms_notEqualOp")?this.equalityValue&&(!StringUtils.isNumber(this.equalityValue)||!allowDecimal&&StringUtils.isDecimal(this.equalityValue))&&(invalidInputFlag=!0):((selectedOperator===ResourceManager.instance().getString("ui","ms_GE")||selectedOperator===ResourceManager.instance().getString("ui","ms_rangeOp"))&&this.lowerThreshold&&(!StringUtils.isNumber(this.lowerThreshold)||!allowDecimal&&StringUtils.isDecimal(this.lowerThreshold))&&(invalidInputFlag=!0),(selectedOperator===ResourceManager.instance().getString("ui","ms_LE")||selectedOperator===ResourceManager.instance().getString("ui","ms_rangeOp"))&&this.higherThreshold&&(!StringUtils.isNumber(this.higherThreshold)||!allowDecimal&&StringUtils.isDecimal(this.higherThreshold))&&(invalidInputFlag=!0))}return invalidInputFlag},NumericFilter}(FilterBase);define("app/view/components/filterBar/filters/NumericFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},TextFilter=function(_super){function TextFilter(){_super.call(this),this.setFields()}return __extends(TextFilter,_super),TextFilter.prototype.setFields=function(){this.type=FilterType.TEXT,this.directiveString="ad-text-filter-selector",StringUtils.isNullOrEmptyString(this.userInputPromptText)&&(this.userInputPromptText=ResourceManager.instance().getString("ui","ms_textFilterUserInputPromptMatches"))},TextFilter}(FilterBase);define("app/view/components/filterBar/filters/TextFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SearchInputTextFilter=function(_super){function SearchInputTextFilter(){_super.call(this),this.setFields()}return __extends(SearchInputTextFilter,_super),SearchInputTextFilter.prototype.setFields=function(){this.type=FilterType.SEARCH_INPUT_TEXT,this.directiveString="ad-search-input-text-filter-selector"},SearchInputTextFilter}(FilterBase);define("app/view/components/filterBar/filters/SearchInputTextFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},NameValuePairFilter=function(_super){function NameValuePairFilter(){_super.call(this),this.setFields()}return __extends(NameValuePairFilter,_super),NameValuePairFilter.prototype.setFields=function(){this.type=FilterType.NAME_VALUE_PAIR,this.directiveString="ad-name-value-pair-filter-selector"},NameValuePairFilter}(FilterBase);define("app/view/components/filterBar/filters/NameValuePairFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},DiagSessionTypeFilter=function(_super){function DiagSessionTypeFilter(){_super.call(this),this.setFields()}return __extends(DiagSessionTypeFilter,_super),DiagSessionTypeFilter.prototype.setFields=function(){this.type=FilterType.DIAG_SESSION_TYPE,this.directiveString="ad-diag-session-type-filter-selector"},DiagSessionTypeFilter}(FilterBase);define("app/view/components/filterBar/filters/DiagSessionTypeFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SuperSelectFilter=function(_super){function SuperSelectFilter(analyticsField,selectList,autoFetchOptions){void 0===selectList&&(selectList=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),_super.call(this,autoFetchOptions),this.setFields(analyticsField,selectList,autoFetchOptions)}return __extends(SuperSelectFilter,_super),SuperSelectFilter.prototype.setFields=function(analyticsField,selectList,autoFetchOptions){void 0===selectList&&(selectList=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),this.type=FilterType.SUPER_SELECT,this.directiveString="ad-super-select-filter-selector",this.analyticsField=analyticsField,selectList||(selectList={type:ParameterTypes.MULTI_SELECT,name:"selectList",values:[],options:[]}),this.selectList=selectList},SuperSelectFilter.prototype.unmarshallFilterFromJson=function(filterData){_super.prototype.unmarshallFilterFromJson.call(this,filterData),FilterService.instance().reselectSelectValuesAndMapToOptions(this.selectList,!0)},SuperSelectFilter.prototype.fetchTerms=function(){},SuperSelectFilter}(FilterBase);define("app/view/components/filterBar/filters/SuperSelectFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},DeviceTypeFilter=function(_super){function DeviceTypeFilter(fieldCategory,device,deviceOS,autoFetchOptions){void 0===device&&(device=null),void 0===deviceOS&&(deviceOS=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),_super.call(this,autoFetchOptions),this.setFields(fieldCategory,device,deviceOS,autoFetchOptions)}return __extends(DeviceTypeFilter,_super),DeviceTypeFilter.prototype.setFields=function(fieldCategory,device,deviceOS,autoFetchOptions){void 0===device&&(device=null),void 0===deviceOS&&(deviceOS=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),this.type=FilterType.DEVICE_TYPE,this.directiveString="ad-device-type-filter-selector",device||(device={type:ParameterTypes.MULTI_SELECT,name:"device",values:[],options:[]}),deviceOS||(deviceOS={type:ParameterTypes.MULTI_SELECT,name:"deviceOS",values:[],options:[]}),this.fieldCategory=fieldCategory,this.device=device,this.deviceOS=deviceOS,this.autoFetchOptions=autoFetchOptions},DeviceTypeFilter.prototype.unmarshallFilterFromJson=function(filterData){_super.prototype.unmarshallFilterFromJson.call(this,filterData),FilterService.instance().reselectSelectValuesAndMapToOptions(this.device,!0),FilterService.instance().reselectSelectValuesAndMapToOptions(this.deviceOS,!0)},DeviceTypeFilter}(FilterBase);define("app/view/components/filterBar/filters/DeviceTypeFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},LocationFilter=function(_super){function LocationFilter(fieldCategory,geoCountry,geoRegion,geoCity,autoFetchOptions){void 0===geoCountry&&(geoCountry=null),void 0===geoRegion&&(geoRegion=null),void 0===geoCity&&(geoCity=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),_super.call(this,autoFetchOptions),this.setFields(fieldCategory,geoCountry,geoRegion,geoCity,autoFetchOptions)}return __extends(LocationFilter,_super),LocationFilter.prototype.setFields=function(fieldCategory,geoCountry,geoRegion,geoCity,autoFetchOptions){void 0===geoCountry&&(geoCountry=null),void 0===geoRegion&&(geoRegion=null),void 0===geoCity&&(geoCity=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),this.type=FilterType.LOCATION,this.directiveString="ad-location-filter-selector",geoCountry||(geoCountry={type:ParameterTypes.SELECT,name:"geoCountry",value:null,options:[]}),geoRegion||(geoRegion={type:ParameterTypes.SELECT,name:"geoRegion",value:null,options:[]}),geoCity||(geoCity={type:ParameterTypes.SELECT,name:"geoCity",value:null,options:[]}),this.fieldCategory=fieldCategory,this.geoCountry=geoCountry,this.geoRegion=geoRegion,this.geoCity=geoCity,this.autoFetchOptions=autoFetchOptions},LocationFilter}(FilterBase);define("app/view/components/filterBar/filters/LocationFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BooleanFilter=function(_super){function BooleanFilter(fieldCategory,showTrueValues,showFalseValues){void 0===showTrueValues&&(showTrueValues=!1),void 0===showFalseValues&&(showFalseValues=!1),_super.call(this)}return __extends(BooleanFilter,_super),BooleanFilter.prototype.setFields=function(analyticsField,showTrueValues,showFalseValues){void 0===showTrueValues&&(showTrueValues=!1),void 0===showFalseValues&&(showFalseValues=!1),this.type=FilterType.BOOLEAN,this.directiveString="ad-boolean-filter-selector",this.fieldCategory=analyticsField.fieldDefinition.category,this.analyticsField=analyticsField,this.showTrueValues=showTrueValues,this.showFalseValues=showFalseValues},BooleanFilter}(FilterBase);define("app/view/components/filterBar/filters/BooleanFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SyntheticJobFilter=function(_super){function SyntheticJobFilter(fieldCategory,syntheticJob,autoFetchOptions){void 0===syntheticJob&&(syntheticJob=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),_super.call(this,autoFetchOptions),this.setFields(fieldCategory,syntheticJob,autoFetchOptions)}return __extends(SyntheticJobFilter,_super),SyntheticJobFilter.prototype.setFields=function(fieldCategory,syntheticJob,autoFetchOptions){void 0===syntheticJob&&(syntheticJob=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),this.type=FilterType.SYNTHETIC_JOB,this.directiveString="ad-synthetic-job-filter-selector",this.fieldCategory=fieldCategory,syntheticJob||(syntheticJob={type:ParameterTypes.MULTI_SELECT,name:"syntheticJob",values:[],options:[]}),this.syntheticJob=syntheticJob},SyntheticJobFilter.prototype.unmarshallFilterFromJson=function(filterData){_super.prototype.unmarshallFilterFromJson.call(this,filterData),FilterService.instance().reselectSelectValuesAndMapToOptions(this.syntheticJob,!0)},SyntheticJobFilter}(FilterBase);define("app/view/components/filterBar/filters/SyntheticJobFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},PageFilter=function(_super){function PageFilter(analyticsField,pageType,pageName,iframeName,ajaxName,virtualPageName,autoFetchOptions){void 0===pageType&&(pageType=null),void 0===pageName&&(pageName=null),void 0===iframeName&&(iframeName=null),void 0===ajaxName&&(ajaxName=null),void 0===virtualPageName&&(virtualPageName=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),_super.call(this),this.setFields(analyticsField,pageType,pageName,iframeName,ajaxName,virtualPageName,autoFetchOptions)}return __extends(PageFilter,_super),PageFilter.prototype.getNameFilterForSelectedPageType=function(){return this.pageType&&this.pageType.value?"BASE_PAGE"===this.pageType.value.value?this.pageName:"IFRAME"===this.pageType.value.value?this.iframeName:"AJAX"===this.pageType.value.value?this.ajaxName:"VIRTUAL_PAGE"===this.pageType.value.value?this.virtualPageName:null:null},PageFilter.prototype.setFields=function(analyticsField,pageType,pageName,iframeName,ajaxName,virtualPageName,autoFetchOptions){pageType||(pageType={type:ParameterTypes.SELECT,name:"pageType",value:null,options:[]}),pageName||(pageName={type:ParameterTypes.MULTI_SELECT,name:"pageName",values:[],options:[]}),iframeName||(iframeName={type:ParameterTypes.MULTI_SELECT,name:"iframeName",values:[],options:[]}),ajaxName||(ajaxName={type:ParameterTypes.MULTI_SELECT,name:"ajaxName",values:[],options:[]}),virtualPageName||(virtualPageName={type:ParameterTypes.MULTI_SELECT,name:"virtualPageName",values:[],options:[]}),this.analyticsField=analyticsField,this.fieldCategory=analyticsField?analyticsField.fieldDefinition.category:void 0,this.pageType=pageType,this.pageName=pageName,this.iframeName=iframeName,this.ajaxName=ajaxName,this.virtualPageName=virtualPageName,this.autoFetchOptions=autoFetchOptions,this.type=FilterType.PAGE,this.directiveString="ad-page-filter-selector"},PageFilter.prototype.clearAllNamesValues=function(){_.forEach(this.getAllNameFilters(),function(nameFilter){nameFilter&&FilterService.instance().clearSearchParameter(nameFilter)})},PageFilter.prototype.getAllNameFilters=function(){return[this.pageName,this.iframeName,this.ajaxName,this.virtualPageName]},PageFilter.prototype.unmarshallFilterFromJson=function(filterData){_super.prototype.unmarshallFilterFromJson.call(this,filterData),FilterService.instance().reselectSelectValuesAndMapToOptions(this.pageName,!0),FilterService.instance().reselectSelectValuesAndMapToOptions(this.ajaxName,!0),FilterService.instance().reselectSelectValuesAndMapToOptions(this.iframeName,!0),FilterService.instance().reselectSelectValuesAndMapToOptions(this.virtualPageName,!0)},PageFilter}(FilterBase);define("app/view/components/filterBar/filters/PageFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},PerformanceFilter=function(_super){function PerformanceFilter(){_super.call(this),this.setFields()}return __extends(PerformanceFilter,_super),PerformanceFilter.prototype.setFields=function(){this.type=FilterType.PERFORMANCE,this.directiveString="ad-performance-filter-selector"},PerformanceFilter}(FilterBase);define("app/view/components/filterBar/filters/PerformanceFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ApplicationFilter=function(_super){function ApplicationFilter(){_super.call(this,FilterType.APPLICATION),this.setFields()}return __extends(ApplicationFilter,_super),ApplicationFilter.prototype.setFields=function(){this.directiveString="ad-application-filter-selector",this.fieldName="application",this.type=FilterType.APPLICATION,this.parameters=[]},ApplicationFilter}(EntityFilter);define("app/view/components/filterBar/filters/ApplicationFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},InfrastructureFilter=function(_super){function InfrastructureFilter(entityType,selectedEntities){void 0===entityType&&(entityType=""),void 0===selectedEntities&&(selectedEntities=[]),_super.call(this,FilterType.INFRASTRUCTURE),this.setFields(entityType,selectedEntities)}return __extends(InfrastructureFilter,_super),InfrastructureFilter.prototype.setFields=function(entityType,selectedEntities){void 0===entityType&&(entityType=""),void 0===selectedEntities&&(selectedEntities=[]),entityType&&(this.componentType=entityType),Util.isDefAndNotEmptyArray(selectedEntities)&&(this.selectedEntities=selectedEntities),this.directiveString="ad-infrastructure-filter-selector",this.type=FilterType.INFRASTRUCTURE},InfrastructureFilter.prototype.pushInfrastructureEntity=function(appComponentId,appComponentName,appComponentType){-1!=appComponentId&&(appComponentType==FilterType.APPLICATION_COMPONENT&&(this.selectedEntities.push(FilterSet.buildEntityObjectForGivenType(appComponentId,appComponentName,EntityType.APPLICATION_COMPONENT)),this.componentType=FilterType.APPLICATION_COMPONENT),appComponentType==FilterType.APPLICATION_COMPONENT_NODE&&(this.selectedEntities.push(FilterSet.buildEntityObjectForGivenType(appComponentId,appComponentName,EntityType.APPLICATION_COMPONENT_NODE)),this.componentType=FilterType.APPLICATION_COMPONENT_NODE))},InfrastructureFilter}(EntityFilter);define("app/view/components/filterBar/filters/InfrastructureFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ErrorFilter=function(_super){function ErrorFilter(){_super.call(this,FilterType.ERROR),this.setFields()}return __extends(ErrorFilter,_super),ErrorFilter.prototype.setFields=function(){this.type=FilterType.ERROR,this.directiveString="ad-error-filter-selector"},ErrorFilter}(EntityFilter);define("app/view/components/filterBar/filters/ErrorFilter",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BusinessTransactionFilter=function(_super){function BusinessTransactionFilter(){_super.call(this,FilterType.BUSINESS_TRANSCATION),this.setFields()}return __extends(BusinessTransactionFilter,_super),BusinessTransactionFilter.prototype.setFields=function(){this.directiveString="ad-business-transaction-filter-selector",this.fieldName=AnalyticsField.transactionId,this.type=FilterType.BUSINESS_TRANSCATION},BusinessTransactionFilter.prototype.getBtIDSearchCriterias=function(entities){for(var names=[],i=0;i<entities.length;i++)names.push(this.getBtIdSearchCriteria(entities[i]).toString());return names},BusinessTransactionFilter.prototype.getBtNameSearchCriterias=function(entities){for(var names=[],i=0;i<entities.length;i++)names.push(this.getBtNameSearchCriteria(entities[i]));return names},BusinessTransactionFilter.prototype.getBtNameSearchCriteria=function(btEntity){return btEntity.name},BusinessTransactionFilter.prototype.getBtIdSearchCriteria=function(btEntity){return btEntity.id},BusinessTransactionFilter}(EntityFilter);define("app/view/components/filterBar/filters/BusinessTransactionFilter",function(){});var GridViewOptionsDirective=function(){function GridViewOptionsDirective(){return{restrict:"A",controller:"GridViewOptionsController",templateUrl:"app/view/components/gridViewOptions/GridViewOptions.html",scope:{columns:"=svColumns",viewState:"=svViewState"},link:function(scope,elem){elem.css("height","100%")}}}return GridViewOptionsDirective.$inject=[],GridViewOptionsDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-grid-view-options"),GridViewOptionsDirective),define("app/view/components/gridViewOptions/GridViewOptionsDirective",function(){}),define("app/view/components/gridViewOptions/GridViewOptionsController",["require","exports"],function(){var GridViewOptionsController=function(){function GridViewOptionsController($scope,resourceManager){var _this=this;this.$scope=$scope,this.resourceManager=resourceManager,this.viewOptionsColumnStatesInitialized=!1,$scope.controller=this,this.columns=$scope.columns,this.viewState=$scope.viewState,$scope.$watch("columns",function(newColumns,oldColumns){angular.equals(newColumns,oldColumns)||(_this.columns=$scope.columns,newColumns&&oldColumns?_this.init(!0):_this.init())},!0),$scope.$watch("viewState",function(){_this.viewState=$scope.viewState,_this.init()})}return GridViewOptionsController.prototype.init=function(force){var _this=this;if(this.viewState){this.viewOptionsColumnStatesInitialized=0!=this.viewState.viewOptionsColumnStates.length,force&&(this.viewOptionsColumnStatesInitialized=!1,this.viewState.viewOptionsColumnStates=[]);for(var viewStateIndex=0,i=0;i<this.columns.length;i++){var column=this.columns[i];(column.header&&""!=column.header||column.tooltip&&""!=column.tooltip)&&(this.viewOptionsColumnStatesInitialized?column.hidden=!this.viewState.viewOptionsColumnStates[viewStateIndex].visible:this.viewState.viewOptionsColumnStates.push({dataIndex:column.dataIndex,visible:!column.hidden,header:column.hasHeader()?column.header:column.tooltip}),viewStateIndex++)}this.columns.forEach(function(column){if(column.hasHeader()||column.tooltip&&""!=column.tooltip){var arrayIndex=_this.columns.indexOf(column),itemToWatch="controller.viewState.viewOptionsColumnStates["+arrayIndex.toString()+"].visible";_this.$scope.$watch(itemToWatch,function(show,previousValue){show!=previousValue&&(column.hidden=!show,_this.viewState.viewOptionsColumnStates[arrayIndex].visible=show)})}})}},GridViewOptionsController.prototype.getLabel=function(keyOrText){return!keyOrText||this.$scope.hideLabels?"":0==keyOrText.indexOf("ms_")?this.resourceManager.getString("ui",keyOrText):keyOrText},GridViewOptionsController.$inject=["$scope","resourceManager"],GridViewOptionsController}();appdynamicsModule.controller("GridViewOptionsController",GridViewOptionsController)});var TimeRangeSelectorDirective=function(){function TimeRangeSelectorDirective(){return{restrict:"EA",transclude:!1,templateUrl:"app/view/components/timeRangeSelector/TimeRangeSelectorView.html",replace:!1,scope:{timeRange:"=",showIcon:"@",useGlobalTimeRange:"@",isDashboardTimeRange:"@",adMaximumAllowableTimeRangeDurationInMinutes:"@",adEumWebLiteEnabled:"@",adEumMobileLiteEnabled:"@",forceShowAllTimeRangeOptions:"@",adDoNotShowManageCustomTimeRangeOption:"@",adShowAutoRefresh:"@",adTimeRangeUpdated:"&"},controller:TimeRangeSelectorController,link:function(scope,iElement,iAttrs,controller){controller.link(scope,iElement,iAttrs)}}}return TimeRangeSelectorDirective.UEV_TIME_RANGE_CHANGE="UEV_TIME_RANGE_CHANGE",TimeRangeSelectorDirective.$inject=[],TimeRangeSelectorDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-time-range-selector"),TimeRangeSelectorDirective),define("app/view/components/timeRangeSelector/TimeRangeSelectorDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},TimeRangeSelectorController=function(_super){function TimeRangeSelectorController($scope){var _this=this;_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.isProductModeProOrProTrial=!1,this.showReducedTimeRangeBanner=!1,this.showManageCustomTimeRange=!0,this.customTimeRangesEnabled=!1,this.customTimeRangeEntries=[],this.useGlobalTimeRange=!0,this.showDropDownIconOnly=!1,this.masterService=MasterService.instance(),this.productMode=MasterService.PRODUCT_PRO_MODE,this.beforeNowInMinutesTimeRanges=[],this.beforeNowInHoursTimeRanges=[],this.beforeNowInDaysTimeRanges=[],this.beforeNowInMonthsTimeRanges=[],this.eumWebLiteEnabled=!1,this.eumMobileLiteEnabled=!1,this.eumWebProEnabled=!1,this.eumMobileProEnabled=!1,this.timeRangeService=TimeRangeService.instance(),this.isAutoRefreshAllowed=!1,this.retentionOneMinuteDataInHours=4,this.retentionTenMinDataInHours=24,this._runInitLater=!1,this._initDataCompete=!1,$scope.controller=this,this.scopeVariableWatchFuction=function(newValue,oldValue){newValue!==oldValue&&_this.initLater()
},this.$scope.$watch("showIcon",this.scopeVariableWatchFuction),this.$scope.$watch("adEumWebLiteEnabled",this.scopeVariableWatchFuction),this.$scope.$watch("adEumMobileLiteEnabled",this.scopeVariableWatchFuction),this.$scope.$watch("forceShowAllTimeRangeOptions",this.scopeVariableWatchFuction),this.$scope.$watch("adDoNotShowManageCustomTimeRangeOption",this.scopeVariableWatchFuction),this.$scope.$watch("adMaximumAllowableTimeRangeDurationInMinutes",this.scopeVariableWatchFuction),this.$scope.$watch("timeRange",this.scopeVariableWatchFuction),this.$scope.$on(TimeRangeService.CUSTOM_TIMERANGE_LOAD_EVENT,function(){_this.setupCustomTimeRanges()}),this.$scope.$on(TimeRangeService.CUSTOM_TIMERANGE_UPDATE_EVENT,function(){_this.setupCustomTimeRanges()})}return __extends(TimeRangeSelectorController,_super),TimeRangeSelectorController.prototype.link=function(scope,iElement,iAttrs){var _this=this;this.element=iElement,("true"==iAttrs.useGlobalTimeRange||"true"==scope.useGlobalTimeRange)&&(scope.timeRange=TimeRangeService.instance().getTimeRange(),this.useGlobalTimeRange=!0),MasterService.instance().onInitDataFetch().then(function(){_this._initDataCompete=!0,_this.productMode=_this.masterService.getProductModeFromCurrentAccount(),_this.init()})},TimeRangeSelectorController.prototype.initLater=function(){var _this=this;this._runInitLater||(this._runInitLater=!0,InjectorService.instance().$timeout()(function(){_this._runInitLater=!1,_this.init()}))},TimeRangeSelectorController.prototype.init=function(){var scope=this.$scope;MasterService.instance().initData&&MasterService.instance().initData.blitzReadEnabled?(this.retentionOneMinuteDataInHours=MasterService.instance().initData.blitzMetricsMinRetentionPeriod,this.retentionTenMinDataInHours=MasterService.instance().initData.blitzMetricsTenMinRetentionPeriod):(this.retentionOneMinuteDataInHours=MasterService.instance().accountConfiguration["metrics.min.retention.period"],this.retentionTenMinDataInHours=MasterService.instance().accountConfiguration["metrics.ten.min.retention.period"]),this.showDropDownIconOnly=this.$scope.showIcon&&"true"==this.$scope.showIcon,this.eumWebLiteEnabled="true"===scope.adEumWebLiteEnabled,this.eumMobileLiteEnabled="true"===scope.adEumMobileLiteEnabled,this.eumWebProEnabled="false"===scope.adEumWebLiteEnabled,this.eumMobileProEnabled="false"===scope.adEumMobileLiteEnabled;for(var allTimeRanges=[DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,5),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,15),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,30),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,60),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,120),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,180),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,240),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,360),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,720),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,1440),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,4320),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,10080),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,20160),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,24*TimeRangeService.DAYS_IN_MONTH*60),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,3*TimeRangeService.DAYS_IN_MONTH*24*60),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,6*TimeRangeService.DAYS_IN_MONTH*24*60),DateTimeUtil.getTimeRange(TimeRangeSpecifierType.BEFORE_NOW,525600)],allowableTimeRanges=[],maximumAllowedDuration=this.getMaximumAllowableTimeRangeDurationInMinutes(),i=0;i<allTimeRanges.length;i++)allTimeRanges[i].durationInMinutes<=maximumAllowedDuration&&allowableTimeRanges.push(allTimeRanges[i]);this.beforeNowInMinutesTimeRanges=[],this.beforeNowInHoursTimeRanges=[],this.beforeNowInDaysTimeRanges=[],this.beforeNowInMonthsTimeRanges=[];for(var timeRange,i=0;i<allowableTimeRanges.length;i++)timeRange=allowableTimeRanges[i],timeRange.durationInMinutes<DateTimeUtil.MINUTES_PER_HOUR?this.beforeNowInMinutesTimeRanges.push(this.getTimeRangeSelectorEntry(timeRange)):timeRange.durationInMinutes<DateTimeUtil.MINUTES_PER_DAY?this.beforeNowInHoursTimeRanges.push(this.getTimeRangeSelectorEntry(timeRange)):timeRange.durationInMinutes<DateTimeUtil.MINUTES_PER_MONTH?this.beforeNowInDaysTimeRanges.push(this.getTimeRangeSelectorEntry(timeRange)):this.beforeNowInMonthsTimeRanges.push(this.getTimeRangeSelectorEntry(timeRange));this.setupCustomTimeRanges(),this.productMode==MasterService.PRODUCT_PRO_MODE?this.customTimeRangesEnabled=!0:this.productMode==MasterService.PRODUCT_PRO_TRIAL_MODE?this.customTimeRangesEnabled=!0:this.productMode==MasterService.PRODUCT_LITE_MODE&&(this.customTimeRangesEnabled=!1,this.showReducedTimeRangeBanner=!0),this.showManageCustomTimeRange=this.customTimeRangesEnabled&&!scope.adDoNotShowManageCustomTimeRangeOption||"false"==scope.adDoNotShowManageCustomTimeRangeOption,this.isAutoRefreshAllowed=this.timeRangeService.isAutoRefreshAllowed(this.$scope.timeRange),this.$scope.$on(TimeRangeService.UEV_TIME_RANGE_CHANGE_TR_SERVICE,this.onTimeRangeUpdated.bind(this))},TimeRangeSelectorController.prototype.onTimeRangeUpdated=function(event,timeRangeSpecifier){this.$scope.timeRange=timeRangeSpecifier,this.timeRange=timeRangeSpecifier,this.updateEntriesForTimeRange(this.beforeNowInMinutesTimeRanges),this.updateEntriesForTimeRange(this.beforeNowInHoursTimeRanges),this.updateEntriesForTimeRange(this.beforeNowInDaysTimeRanges),this.updateEntriesForTimeRange(this.beforeNowInMonthsTimeRanges),this.updateEntriesForTimeRange(this.customTimeRangeEntries)},TimeRangeSelectorController.prototype.getTimeRangeDisplay=function(trs){return trs=null==trs?TimeRangeService.instance().getTimeRange():this.$scope.timeRange,trs.type==TimeRangeSpecifierType.BETWEEN_TIMES?"Custom":5==trs.durationInMinutes?TimeRangeService.LAST_5_MINUTES:15==trs.durationInMinutes?TimeRangeService.LAST_15_MINUTES:30==trs.durationInMinutes?TimeRangeService.LAST_30_MINUTES:60==trs.durationInMinutes?TimeRangeService.LAST_60_MINUTES:120==trs.durationInMinutes?TimeRangeService.LAST_2_HOURS:180==trs.durationInMinutes?TimeRangeService.LAST_3_HOURS:240==trs.durationInMinutes?TimeRangeService.LAST_4_HOURS:360==trs.durationInMinutes?TimeRangeService.LAST_6_HOURS:720==trs.durationInMinutes?TimeRangeService.LAST_12_HOURS:1440==trs.durationInMinutes?TimeRangeService.LAST_1_DAY:4320==trs.durationInMinutes?TimeRangeService.LAST_3_DAYS:10080==trs.durationInMinutes?TimeRangeService.LAST_1_WEEK:20160==trs.durationInMinutes?TimeRangeService.LAST_2_WEEK:trs.durationInMinutes==24*TimeRangeService.DAYS_IN_MONTH*60?TimeRangeService.LAST_1_MONTH:trs.durationInMinutes==3*TimeRangeService.DAYS_IN_MONTH*24*60?TimeRangeService.LAST_3_MONTH:trs.durationInMinutes==6*TimeRangeService.DAYS_IN_MONTH*24*60?TimeRangeService.LAST_6_MONTH:525600==trs.durationInMinutes?TimeRangeService.LAST_1_YEAR:"Time Range Not Found"},TimeRangeSelectorController.prototype.getTimeRangeDropdownDisplay=function(timeRangeSpecifier,includeResolution,includeLast){if(void 0===includeResolution&&(includeResolution=!0),void 0===includeLast&&(includeLast=!0),timeRangeSpecifier){var result="Time Range Not Found";if(timeRangeSpecifier.type==TimeRangeSpecifierType.BETWEEN_TIMES?result="Custom":5==timeRangeSpecifier.durationInMinutes?result="Last 5 Minutes":15==timeRangeSpecifier.durationInMinutes?result="Last 15 Minutes":30==timeRangeSpecifier.durationInMinutes?result="Last 30 Minutes":60==timeRangeSpecifier.durationInMinutes?result="Last 1 Hour":120==timeRangeSpecifier.durationInMinutes?result="Last 2 Hours":180==timeRangeSpecifier.durationInMinutes?result="Last 3 Hours":240==timeRangeSpecifier.durationInMinutes?result="Last 4 Hours":360==timeRangeSpecifier.durationInMinutes?result="Last 6 Hours":720==timeRangeSpecifier.durationInMinutes?result="Last 12 Hours":1440==timeRangeSpecifier.durationInMinutes?result="Last 1 Day":4320==timeRangeSpecifier.durationInMinutes?result="Last 3 Days":10080==timeRangeSpecifier.durationInMinutes?result="Last 1 Week":20160==timeRangeSpecifier.durationInMinutes?result="Last 2 Weeks":timeRangeSpecifier.durationInMinutes==24*TimeRangeService.DAYS_IN_MONTH*60?result="Last 1 Month":timeRangeSpecifier.durationInMinutes==3*TimeRangeService.DAYS_IN_MONTH*24*60?result="Last 3 Month":timeRangeSpecifier.durationInMinutes==6*TimeRangeService.DAYS_IN_MONTH*24*60?result="Last 6 Month":525600==timeRangeSpecifier.durationInMinutes&&(result="Last 1 Year"),includeResolution&&(result+=this.getResolution(timeRangeSpecifier)),!includeLast){{result.indexOf("")}0==result.indexOf("Last ")&&(result=result.substring("Last ".length))}}return result},TimeRangeSelectorController.prototype.getResolution=function(timeRangeSpecifier){var durationInHours=timeRangeSpecifier.durationInMinutes/60;return durationInHours<=this.retentionOneMinuteDataInHours?"Metric Data Resolution: 1 min":durationInHours<=this.retentionTenMinDataInHours?"Metric Data Resolution: 10 min":"Metric Data Resolution: 1 hour"},TimeRangeSelectorController.prototype.selectTimeRange=function(timeRangeSelected){this.$scope.timeRange=timeRangeSelected,this.timeRange=timeRangeSelected,this.isAutoRefreshAllowed=this.timeRangeService.isAutoRefreshAllowed(timeRangeSelected);var isDashboardTimeRange=!1;("true"==this.$scope.isDashboardTimeRange||void 0==this.$scope.isDashboardTimeRange)&&(isDashboardTimeRange=!0),"true"==this.$scope.useGlobalTimeRange&&TimeRangeService.instance().changeTimeRange(timeRangeSelected),this.$scope.$emit(TimeRangeSelectorController.UEV_TIME_RANGE_CHANGE,timeRangeSelected,isDashboardTimeRange),this.$scope.adTimeRangeUpdated&&this.$scope.adTimeRangeUpdated({value:timeRangeSelected})},TimeRangeSelectorController.prototype.isSelectedTimeRange=function(trs){return trs&&this.$scope.timeRange&&trs.type==this.$scope.timeRange.type?trs.type==TimeRangeSpecifierType.BEFORE_NOW?trs.durationInMinutes===this.$scope.timeRange.durationInMinutes:trs===this.$scope.timeRange:!1},TimeRangeSelectorController.prototype.getMaximumAllowableTimeRangeDurationInMinutes=function(){var maximumAllowableTimeRangeDurationInMinutes=DateTimeUtil.MINUTES_PER_YEAR,maxMinutesFromScope=Util.parseInt(this.$scope.adMaximumAllowableTimeRangeDurationInMinutes);return-1!=maxMinutesFromScope?maximumAllowableTimeRangeDurationInMinutes=maxMinutesFromScope:this.productMode==MasterService.PRODUCT_LITE_MODE&&(maximumAllowableTimeRangeDurationInMinutes=TimeRangeService.MAX_MINIUTES_BEFORE_NOW_FOR_LITE),maximumAllowableTimeRangeDurationInMinutes},TimeRangeSelectorController.prototype.onTimeRangeSelectorEntryClick=function(timeRangeSelectorEntry){timeRangeSelectorEntry&&timeRangeSelectorEntry.timeRangeSpecifier&&(this.selectedTimeRangeSelectorEntry&&(this.selectedTimeRangeSelectorEntry.selected=!1),timeRangeSelectorEntry.selected=!0,this.selectedTimeRangeSelectorEntry=timeRangeSelectorEntry,this.selectTimeRange(timeRangeSelectorEntry.timeRangeSpecifier))},TimeRangeSelectorController.prototype.onCustomItemClick=function(){var timeRangeForCustom=DateTimeUtil.getDefaultCustomTimeRange();this.selectTimeRange(timeRangeForCustom)},TimeRangeSelectorController.prototype.onManageCustomTimeRanges=function(){DialogService.instance().showDialog("","app/view/components/timeRangeSelector/ManageCustomTimeRangeDialogController","app/view/common/dialogs/CustomTimeRange/ManageCustomTimeRange.html")},TimeRangeSelectorController.prototype.onAutoRefreshChange=function(selected){TimeRangeService.instance().setAutoRefreshMode(selected)},TimeRangeSelectorController.prototype.setupCustomTimeRanges=function(){var _this=this;this.customTimeRangeEntries=_.map(TimeRangeService.instance().getCustomTimeRanges(),function(customTimeRange){var entry=_this.getTimeRangeSelectorEntry(customTimeRange.timeRange);return entry.displayName=customTimeRange.name,entry})},TimeRangeSelectorController.prototype.getTimeRangeSelectorEntry=function(timeRangeSpecifier){if(timeRangeSpecifier){var entry={};return entry.timeRangeSpecifier=timeRangeSpecifier,entry.displayName=this.getTimeRangeDropdownDisplay(timeRangeSpecifier,!1,!1),entry.tooltip=this.getResolution(timeRangeSpecifier),entry.selected=this.isSelectedTimeRange(timeRangeSpecifier),entry.selected&&(this.selectedTimeRangeSelectorEntry=entry),entry}return null},TimeRangeSelectorController.prototype.updateEntriesForTimeRange=function(entries){var _this=this;_.each(entries,function(entry){entry.selected=_this.isSelectedTimeRange(entry.timeRangeSpecifier),entry.selected&&(_this.selectedTimeRangeSelectorEntry=entry)})},TimeRangeSelectorController.UEV_TIME_RANGE_CHANGE="UEV_TIME_RANGE_CHANGE",TimeRangeSelectorController.$inject=["$scope"],TimeRangeSelectorController}(ControllerBase);appdynamicsModule.controller("TimeRangeSelectorController",TimeRangeSelectorController),define("app/view/components/timeRangeSelector/TimeRangeSelectorController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/timeRangeSelector/CustomTimeRangePropertiesController",["require","exports"],function(require,exports){var CustomTimeRangePropertiesController=function(_super){function CustomTimeRangePropertiesController($scope,resourceManager,injectorService,notificationService,userUiService,timeRangeService,dialogData,$modalInstance){_super.call(this,$scope,$modalInstance),this.$scope=$scope,this.resourceManager=resourceManager,this.injectorService=injectorService,this.notificationService=notificationService,this.userUiService=userUiService,this.timeRangeService=timeRangeService,this.dialogData=dialogData,this.$modalInstance=$modalInstance,this.submit=function(){var ctr,promise,_this=this,resultHandler=function(){_this.notificationService.displayCreatedSuccessfullyMessage(),_this.timeRangeService.updateCustomRanges(),_this.$scope.$close()};ctr={name:this.data.customTimeRange.name,description:this.data.customTimeRange.description,shared:this.data.customTimeRange.shared,timeRange:{type:TimeRangeSpecifierType.BETWEEN_TIMES,durationInMinutes:0,startTime:this.data.customTimeRange.startTime.getTime(),endTime:this.data.customTimeRange.endTime.getTime()}},this.data.mode===CustomTimeRangeDialogMode.CREATE_MODE?promise=this.userUiService.createCustomTimeRange(ctr):(ctr.id=this.data.customTimeRange.id,ctr.version=this.data.customTimeRange.version,promise=this.userUiService.updateCustomTimeRange(ctr)),promise.then(resultHandler)},this.data=dialogData,this.data&&this.data.mode==CustomTimeRangeDialogMode.EDIT_MODE?(this.title=resourceManager.getString("ui","ms_editCustomTimeRange"),this.isEditMode=!0):this.title=resourceManager.getString("ui","ms_createCustomTimeRange"),$scope.controller=this}return __extends(CustomTimeRangePropertiesController,_super),CustomTimeRangePropertiesController.$inject=["$scope","resourceManager","injectorService","notificationService","userUiService","timeRangeService","dialogData","$modalInstance"],CustomTimeRangePropertiesController}(DialogControllerBase);exports.CustomTimeRangePropertiesController=CustomTimeRangePropertiesController});var SaveCustomTimeRangeDialogController=function(){function SaveCustomTimeRangeDialogController($scope,$modalInstance,dialogData,notificationService,userUiService,timeRangeService){$scope.data=dialogData,$scope.close=function(){$modalInstance.close()},$scope.submit=function(){var ctr,promise,resultHandler=function(){notificationService.displayCreatedSuccessfullyMessage(),timeRangeService.updateCustomRanges(),$modalInstance.close()},data=$scope.data;ctr={name:data.name,description:data.description,shared:data.shared,timeRange:{type:TimeRangeSpecifierType.BETWEEN_TIMES,durationInMinutes:0,startTime:data.dateFrom.getTime(),endTime:data.dateTo.getTime()}},promise=userUiService.createCustomTimeRange(ctr),promise.then(resultHandler)}}return SaveCustomTimeRangeDialogController.$inject=["$scope","$modalInstance","dialogData","notificationService","userUiService","timeRangeService"],SaveCustomTimeRangeDialogController}();define("app/view/components/timeRangeSelector/SaveCustomTimeRangeDialogController",function(){}),define("app/view/components/timeRangeSelector/ManageCustomTimeRangeDialogController",["require","exports","app/view/components/timeRangeSelector/CustomTimeRangePropertiesController"],function(require,exports,CustomTimeRangePropertiesModule){var ManageCustomTimeRangeDialogController=function(){function ManageCustomTimeRangeDialogController($scope,resourceManager,timeRangeService){function processCustomTimeRanges(customTimeRanges,ordering){var priority=0;return customTimeRanges.map(function(ctr){var savedPriority=ordering[ctr.id];return{id:ctr.id,name:ctr.name,description:ctr.description,createdBy:ctr.createdBy,modifiedBy:ctr.modifiedBy,shared:ctr.shared,sortPriority:void 0!==savedPriority?savedPriority:priority++,startTime:ctr.startTime||ctr.timeRange.startTime,endTime:ctr.endTime||ctr.timeRange.endTime,version:ctr.version}})}function openDialog(data){DialogService.instance().showDialog(CustomTimeRangePropertiesModule.CustomTimeRangePropertiesController,"app/view/components/timeRangeSelector/CustomTimeRangePropertiesController","app/view/common/dialogs/CustomTimeRange/CustomTimeRangeProperties.html",data)}function openEditDialog(customTimeRange){var data={};data.customTimeRange=customTimeRange,data.mode=CustomTimeRangeDialogMode.EDIT_MODE,openDialog(data)}function getIndexById(arr,id){var i;for(i=0;i<arr.length;i++)if(arr[i].id===id)return i;return-1}function getCurrentSelectionIndex(){return null==$scope.controller.timeRangeSelected.value?-1:getIndexById($scope.gridOptions.dataProvider,$scope.controller.timeRangeSelected.value.id)}function moveRow(arr,id,up){void 0===up&&(up=!0);var swapIndex,temp,list=[],curIndex=getIndexById(arr,id);if(arr.forEach(function(ctr){list.push(ctr)}),up&&curIndex>0)swapIndex=curIndex-1;else{if(up||!(curIndex<arr.length-1))return;swapIndex=curIndex+1}return temp=list[curIndex].sortPriority,list[curIndex].sortPriority=list[swapIndex].sortPriority,list[swapIndex].sortPriority=temp,list.sort(function(a,b){return a.sortPriority>b.sortPriority?1:-1})}function removeId(arr,id){var list=[];return arr.forEach(function(ctr){ctr.id!==id&&list.push(ctr)}),list}function deleteCustomTimeRange(customTimeRange){var confirmMessage=resourceManager.getString("ui","ms_deleteCustomTimeRangeConfirmation"),r=confirm(confirmMessage);if(r===!0){var resultHandler=function(){var dataProvider=$scope.gridOptions.dataProvider;$scope.controller.timeRangeSelected.value=null,$scope.gridOptions.dataProvider=removeId(dataProvider,customTimeRange.id)},promise=timeRangeService.deleteCustomTimeRange(customTimeRange.id);promise.then(resultHandler)}}var _this=this;this.$scope=$scope,this.resourceManager=resourceManager,this.timeRangeSelected={value:null},this.contextMenuOptionsCustomTimeRanges={},$scope.controller=this,$scope.gridDoubleClick=function(){this.handleEdit()},$scope.gridClick=function(event){null==$scope.controller.timeRangeSelected&&($scope.controller.timeRangeSelected=event.data)},$scope.getString=function(str){return resourceManager.getString("ui",str)},$scope.handleNew=function(){var data={};data.customTimeRange=null,data.mode=CustomTimeRangeDialogMode.CREATE_MODE,openDialog(data)},$scope.handleEdit=function(){var copyOfSelectedTimeRange=angular.copy(_this.getSelectedTimeRangeFromDataProvider());openEditDialog(copyOfSelectedTimeRange)},$scope.handleDelete=function(){null!=$scope.controller.timeRangeSelected&&deleteCustomTimeRange($scope.controller.timeRangeSelected.value)},$scope.isMoveUpButtonEnabled=function(){return $scope.controller.timeRangeSelected&&0!==getCurrentSelectionIndex()},$scope.isMoveDownButtonEnabled=function(){return $scope.controller.timeRangeSelected&&getCurrentSelectionIndex()!==$scope.gridOptions.dataProvider.length-1},$scope.moveUp=function(){$scope.gridOptions.dataProvider=moveRow($scope.gridOptions.dataProvider,$scope.controller.timeRangeSelected.value.id)},$scope.moveDown=function(){$scope.gridOptions.dataProvider=moveRow($scope.gridOptions.dataProvider,$scope.controller.timeRangeSelected.value.id,!1)},$scope.saveOrder=function(){var orderList=[];$scope.gridOptions.dataProvider.forEach(function(ctr){orderList.push(ctr.id+"."+ctr.sortPriority)}),timeRangeService.saveCustomTimeRangeOrdering(orderList.join(","))},$scope.$on(TimeRangeService.CUSTOM_TIMERANGE_UPDATE_EVENT,function(evt,customTimeRanges,ordering){$scope.gridOptions.dataProvider=processCustomTimeRanges(customTimeRanges,ordering),_this.reselectSelectedItem()}),$scope.gridOptions=new GridOptions;var columns=[GridColumn.createColumn(16,"name","Name"),GridColumn.createColumn(20,"startTime","Start Time",DateTimeUtil.getDateTimeString),GridColumn.createColumn(20,"endTime","End Time",DateTimeUtil.getDateTimeString),GridColumn.createColumn(34,"description","Description"),GridColumn.createColumn(10,"shared","Shared",this.sharedIconColumnRenderer)];$scope.gridOptions.dataProvider=processCustomTimeRanges(timeRangeService.getCustomTimeRanges(),timeRangeService.getCustomTimeRangeOrdering()),$scope.gridOptions.columnProvider=columns,$scope.gridOptions.sortFields=[{sorterFn:function(o1,o2){var sp1=o1.data.sortPriority,sp2=o2.data.sortPriority;return sp1===sp2?0:sp2>sp1?-1:1}}],$scope.resourceManager=resourceManager,this.init()}return ManageCustomTimeRangeDialogController.prototype.init=function(){var _this=this;this.contextMenuOptionsCustomTimeRanges.disableDefaultContextMenu=!0,this.contextMenuOptionsCustomTimeRanges.items=[{text:resourceManager.getString("ui","ms_editCustomTimeRange"),handler:function(){_this.$scope.handleEdit()}},{text:resourceManager.getString("ui","ms_deleteCustomTimeRange"),handler:function(){_this.$scope.handleDelete()}}]},ManageCustomTimeRangeDialogController.prototype.sharedIconColumnRenderer=function(val,meta,record){var range=record&&record.data?record.data:null;return range&&range.shared?ImageUtil.getIconTag(ImageUtil.check_small_green):""},ManageCustomTimeRangeDialogController.prototype.reselectSelectedItem=function(){this.$scope.gridOptions&&this.$scope.gridOptions.dataProvider&&this.timeRangeSelected.value&&(this.timeRangeSelected.value=this.getCustomTimeRangeByIdFromDataProvider(this.timeRangeSelected.value.id))},ManageCustomTimeRangeDialogController.prototype.getCustomTimeRangeByIdFromDataProvider=function(id){if(!this.$scope||!this.$scope.gridOptions||!this.$scope.gridOptions.dataProvider)return null;for(var i=0;i<this.$scope.gridOptions.dataProvider.length;i++){var tempCTR=this.$scope.gridOptions.dataProvider[i];if(tempCTR&&tempCTR.id==id)return tempCTR}return null},ManageCustomTimeRangeDialogController.prototype.getSelectedTimeRangeFromDataProvider=function(){return this.$scope&&this.timeRangeSelected?this.getCustomTimeRangeByIdFromDataProvider(this.timeRangeSelected.value.id):null},ManageCustomTimeRangeDialogController.$inject=["$scope","resourceManager","timeRangeService"],ManageCustomTimeRangeDialogController}();return ManageCustomTimeRangeDialogController});var ApplicationSelectorDirective=function(){function ApplicationSelectorDirective(){return{restrict:"E",replace:!1,scope:{adMobileAppSelectorMode:"=",adSelectedApplicationId:"=",adSelectedMobileAppId:"=",adApmOnlyMode:"=",adEumWebOnlyMode:"=",adShowAnalytics:"=",adShowDbmon:"=",adShowEumWeb:"=",adShowEumMobileAppContainers:"=",adShowSim:"=",adDisabled:"=",adShowApmApplications:"=",adShowApplicationQuickNavButton:"="},templateUrl:"app/view/components/applicationSelector/ApplicationSelectorView.html",controller:ApplicationSelectorController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return ApplicationSelectorDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-application-selector"),ApplicationSelectorDirective),define("app/view/components/applicationSelector/ApplicationSelectorDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ApplicationSelectorController=function(_super){function ApplicationSelectorController($scope){var _this=this;_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.showRightSide=!1,this.dropdownOpen=!1,this.closeDropDownFunction=function(){},this.buttonLabel=this.getString("ms_selectDotDotDot"),this.showEumWeb=!1,this.showEumMobileAppContainers=!1,this.showDbMon=!1,this.showAnalytics=!1,this.showSim=!1,this.showApmApplications=!0,this.showOnlyApm=!1,this.showOnlyEumWeb=!1,this.mobileAppSelectorMode=!1,this.mobileApplications=[],this.iosMobileApps=[],this.androidMobileApps=[],this.mobileAppsByPlatform={},this.showApplicationQuickNavButton=!1,this.applicationQuickNavButtonIconSrc="images/mainMenu/apm_gray.svg",this.runOnEvalAsync=!1,this.$scope.controller=this,this.applicationsCache=ApplicationsCache.instance(),EventBusService.instance().registerEventListener(ApplicationsCache.UEV_APPLICATIONS_FETCHED_BY_APP_CACHE,function(){_this.$scope.adMobileAppSelectorMode||_this.fetchAllApplications(!1)},this.$scope),InjectorService.instance().$rootScope().$on(EventConstants.UEV_APPLICATION_CREATED,function(){_this.fetchAllApplications(!0)}),InjectorService.instance().$rootScope().$on(EventConstants.UEV_APPLICATION_EDITED,function(){_this.fetchAllApplications(!0)}),InjectorService.instance().$rootScope().$on(EventConstants.UEV_APPLICATION_UPDATED,function(){_this.fetchAllApplications(!0)}),InjectorService.instance().$rootScope().$on(EventConstants.UEV_APPLICATION_DELETED,function(){_this.fetchAllApplications(!0)})}return __extends(ApplicationSelectorController,_super),ApplicationSelectorController.prototype.link=function(scope,iElement){this.element=iElement,this.init()},ApplicationSelectorController.prototype.init=function(){var _this=this;MasterService.instance().initData?this.setupAfterInitData():InjectorService.instance().$rootScope().$on(MasterService.UEV_INIT_DATA_FETCHED,function(){_this.setupAfterInitData()}),this.setupLater(),this.$scope.$watch("adSelectedApplicationId",function(appId,appId2){appId!=appId2&&_this.setupLater()}),this.$scope.$watch("adMobileAppSelectorMode",function(mode,mode2){mode!=mode2&&_this.setupLater()}),this.$scope.$watch("adSelectedMobileAppId",function(id,id2){id!=id2&&_this.setupLater()}),this.$scope.$watch("adApmOnlyMode",function(value,value2){value!=value2&&_this.setupLater()}),this.$scope.$watch("adShowApplicationQuickNavButton",function(value,value2){value!=value2&&_this.setupLater()}),this.$scope.$watch("adShowApmApplications",function(value){angular.isDefined(value)&&(_this.showApmApplications=value)}),this.$scope.$watch("adShowEumMobileAppContainers",function(value,value2){value!=value2&&_this.setupLater()})},ApplicationSelectorController.prototype.onClickApm=function(){this.showRightSide=!0,this.selectedView=ApplicationSelectorController.VIEW_APM},ApplicationSelectorController.prototype.onClickEumWeb=function(){this.showRightSide=!0,this.selectedView=ApplicationSelectorController.VIEW_EUM_WEB},ApplicationSelectorController.prototype.onClickEumMobile=function(){this.showRightSide=!0,this.selectedView=ApplicationSelectorController.VIEW_EUM_MOBILE},ApplicationSelectorController.prototype.onClickDbMon=function(){this.showRightSide=!1,this.selectedApplication=this.applicationsCache.allApplications.dbMonApplication,this.onSubmit()},ApplicationSelectorController.prototype.onClickSim=function(){this.showRightSide=!1,this.selectedApplication=this.applicationsCache.allApplications.simApplication,this.onSubmit()},ApplicationSelectorController.prototype.onClickAnalytics=function(){this.showRightSide=!1,this.selectedApplication=this.applicationsCache.allApplications.analyticsApplication,this.onSubmit()},ApplicationSelectorController.prototype.onMouseEnterDBSimAnalytics=function(){this.showRightSide=!1},ApplicationSelectorController.prototype.onClickApplication=function(application){this.selectedApplication=application,this.onSubmit()},ApplicationSelectorController.prototype.onClickMobileApplication=function(mobileApplication){this.selectedMobileApplication=mobileApplication,this.onSubmit()},ApplicationSelectorController.prototype.onSubmit=function(){this.mobileAppSelectorMode?this.setupSelectedAppLabelForMobileApp(this.selectedMobileApplication):this.setupSelectedAppLabelForApp(this.selectedApplication),this.dispatchSelectedAppEvent(this.selectedApplication),this.closeDropDownFunction()},ApplicationSelectorController.prototype.onCancel=function(){this.selectedApplication=null,this.closeDropDownFunction()},ApplicationSelectorController.prototype.onAppQuickNavButton=function(){this.selectedApplication&&(ApplicationsCache.hasAnyApplicationTypes(this.selectedApplication,[ApplicationType.APM])?ApplicationViewService.instance().viewApplicationDashboard(this.selectedApplication.id):ApplicationsCache.hasAnyApplicationTypes(this.selectedApplication,[ApplicationType.WEB])&&EumViewService.instance().viewEumWebMainDashboard(this.selectedApplication.id))},ApplicationSelectorController.prototype.onViewGettingStarted=function(){HomeViewService.instance().viewGettingStarted(),this.closeDropDownFunction()},ApplicationSelectorController.prototype.onRefreshApps=function(){this.fetchAllApplications(!0)},ApplicationSelectorController.prototype.setupAfterInitData=function(){this.fetchAllApplications()},ApplicationSelectorController.prototype.setupOnlyApmMode=function(){this.showOnlyApm=this.isOnlyApmEnabled(),this.showOnlyApm&&this.onClickApm()},ApplicationSelectorController.prototype.setupOnlyEumWebMode=function(){this.showOnlyEumWeb=this.isOnlyEumWebEnabled(),this.showOnlyEumWeb&&this.onClickEumWeb()},ApplicationSelectorController.prototype.fetchAllApplications=function(forceReload){var _this=this;void 0===forceReload&&(forceReload=!1),this.applicationsCache.getAllApplications(forceReload).then(function(){_this.allApplications=_this.applicationsCache.allApplications,_this.setupSelectedAppLabel(),_this.setupShowMobileAppContainerApps(),_this.$scope.adShowEumWeb!==!1&&(_this.showEumWeb=MasterService.instance().initData.mainNavConfig.showEum&&AppConfig.instance().eumTopLevelNavZoneEnabled),_this.$scope.adShowDbmon!==!1&&(_this.showDbMon=MasterService.instance().initData.mainNavConfig.showDatabaseMonitoring),_this.$scope.adShowAnalytics!==!1&&(_this.showAnalytics=MasterService.instance().initData.mainNavConfig.showAnalytics),_this.$scope.adShowSim!==!1&&(_this.showSim=MasterService.instance().initData.mainNavConfig.showSim),_this.setupOnlyApmMode(),_this.setupOnlyEumWebMode()})},ApplicationSelectorController.prototype.dispatchSelectedAppEvent=function(){this.mobileAppSelectorMode?this.$scope.$emit(ApplicationSelectorController.UEV_MOBILE_APPLICATION_SELECTED,this.selectedMobileApplication):this.$scope.$emit(ApplicationSelectorController.UEV_APPLICATION_SELECTED,this.selectedApplication)},ApplicationSelectorController.prototype.setupSelectedAppLabel=function(){if(this.mobileAppSelectorMode){var mobileApplication=this.getMobileApplicationById(this.getSelectedMobileAppId());this.setupSelectedAppLabelForMobileApp(mobileApplication)}else{var application=this.applicationsCache.getApplicationById(this.$scope.adSelectedApplicationId);this.selectedApplication=application,this.setupSelectedAppLabelForApp(application)}},ApplicationSelectorController.prototype.setupSelectedAppLabelForApp=function(application){application?(this.buttonLabel=ApplicationsCache.hasAnyApplicationTypes(application,[ApplicationType.APM,ApplicationType.WEB,ApplicationType.MOBILE])?application.name:ApplicationsCache.getApplicationTypeDisplayString(this.applicationsCache.getApplicationTypeById(application.id)),this.showApplicationQuickNavButton=this.$scope.adShowApplicationQuickNavButton&&ApplicationsCache.hasAnyApplicationTypes(application,[ApplicationType.APM,ApplicationType.WEB]),this.applicationQuickNavButtonIconSrc=ApplicationsCache.hasApplicationType(application,ApplicationType.APM)?"images/mainMenu/apm_gray.svg":"images/leftNav/eumWebApp_gray.svg"):(this.buttonLabel=this.resourceManager.getString("ui","ms_selectDotDotDot"),this.showApplicationQuickNavButton=!1)
},ApplicationSelectorController.prototype.setupSelectedAppLabelForMobileApp=function(mobileApp){this.buttonLabel=mobileApp?mobileApp.name+" - "+mobileApp.platform:this.resourceManager.getString("ui","ms_selectDotDotDot"),this.showApplicationQuickNavButton=!1},ApplicationSelectorController.prototype.setupLater=function(){var _this=this;this.runOnEvalAsync||(this.runOnEvalAsync=!0,this.$scope.$evalAsync(function(){_this.onEvalAsync()}))},ApplicationSelectorController.prototype.onEvalAsync=function(){this.runOnEvalAsync&&(this.runOnEvalAsync=!1,this.setupShowMobileAppContainerApps(),this.mobileAppSelectorMode=this.$scope.adMobileAppSelectorMode,this.mobileAppSelectorMode?this.fetchMobileApps():this.setupSelectedAppLabel(),this.setupOnlyApmMode(),this.setupOnlyEumWebMode())},ApplicationSelectorController.prototype.fetchMobileApps=function(){var _this=this;EUMApplicationsUiService.instance().getAllMobileApplications().then(function(mobileApps){if(_this.mobileAppsByPlatform={},_this.mobileAppsByPlatform[MobilePlatform.IOS]=[],_this.mobileAppsByPlatform[MobilePlatform.ANDROID]=[],mobileApps&&mobileApps.length>0){for(var mobileApp,i=0;i<mobileApps.length;i++)mobileApp=mobileApps[i],_this.mobileAppsByPlatform[mobileApp.platform].push(mobileApp);_this.mobileApplications=mobileApps,_this.iosMobileApps=_.sortBy(_this.mobileAppsByPlatform[MobilePlatform.IOS],"name"),_this.androidMobileApps=_.sortBy(_this.mobileAppsByPlatform[MobilePlatform.ANDROID],"name")}_this.setupSelectedAppLabel()})},ApplicationSelectorController.prototype.getMobileApplicationById=function(id){for(var i=0;i<this.mobileApplications.length;i++)if(this.mobileApplications[i].id==id)return this.mobileApplications[i];return null},ApplicationSelectorController.prototype.getSelectedMobileAppId=function(){return Util.isValidId(this.$scope.adSelectedMobileAppId)?this.$scope.adSelectedMobileAppId:Util.parseInt(URLParams.getCurrentUrlParams().mobileApp())},ApplicationSelectorController.prototype.isOnlyApmEnabled=function(){return this.$scope.adApmOnlyMode||!this.showEumWeb&&!this.showEumMobileAppContainers&&!this.showDbMon&&!this.showAnalytics&&!this.showSim},ApplicationSelectorController.prototype.isOnlyEumWebEnabled=function(){return this.$scope.adEumWebOnlyMode},ApplicationSelectorController.prototype.setupShowMobileAppContainerApps=function(){if(this.$scope.adShowEumMobileAppContainers!==!1&&this.applicationsCache.allApplications){var mobileAppContainers=this.applicationsCache.allApplications.mobileAppContainers,mobileAppContainersWithOnlyMobile=[];_.forEach(mobileAppContainers,function(mobileAppContainer){mobileAppContainer.applicationTypeInfo.applicationTypes&&1==mobileAppContainer.applicationTypeInfo.applicationTypes.length&&mobileAppContainer.applicationTypeInfo.applicationTypes[0]==ApplicationType.MOBILE&&mobileAppContainersWithOnlyMobile.push(mobileAppContainer)}),this.showEumMobileAppContainers=mobileAppContainersWithOnlyMobile.length>0}else this.showEumMobileAppContainers=!1},ApplicationSelectorController.VIEW_APM="VIEW_APM",ApplicationSelectorController.VIEW_EUM_WEB="VIEW_EUM_WEB",ApplicationSelectorController.VIEW_EUM_MOBILE="VIEW_EUM_MOBILE",ApplicationSelectorController.UEV_APPLICATION_SELECTED="UEV_APPLICATION_SELECTED",ApplicationSelectorController.UEV_MOBILE_APPLICATION_SELECTED="UEV_MOBILE_APPLICATION_SELECTED",ApplicationSelectorController.$inject=["$scope"],ApplicationSelectorController}(ControllerBase);appdynamicsModule.controller("ApplicationSelectorController",ApplicationSelectorController),define("app/view/components/applicationSelector/ApplicationSelectorController",function(){});var EntityDropDownSelectorDirective=function(){function EntityDropDownSelectorDirective(){return{restrict:"E",replace:!1,scope:{adEntityType:"=",adSelectedEntityId:"=",adApplicationId:"="},templateUrl:"app/view/components/entityDropDownSelector/EntityDropDownSelectorView.html",controller:EntityDropDownSelectorController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return EntityDropDownSelectorDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-entity-drop-down-selector"),EntityDropDownSelectorDirective),define("app/view/components/entityDropDownSelector/EntityDropDownSelectorDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EntityDropDownSelectorController=function(_super){function EntityDropDownSelectorController($scope){_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.entities=[],this.dropdownOpen=!1,this.closeDropDownFunction=function(){},this.buttonLabel=null,this.runInitLater=!1,this.fetchEntitiesOnInit=!1,this.entityCache=null,this.$scope.controller=this,this.applicationsCache=ApplicationsCache.instance()}return __extends(EntityDropDownSelectorController,_super),EntityDropDownSelectorController.prototype.link=function(scope,iElement){var _this=this;this.element=iElement,this.$scope.$watch("adApplicationId",function(val1,val2){val1!=val2&&(_this.fetchEntitiesOnInit=!0,_this.initLater())}),this.$scope.$watch("adSelectedEntityId",function(val1,val2){val1!=val2&&_this.initLater()}),this.$scope.$watch("adEntityType",function(val1,val2){val1!=val2&&(_this.fetchEntitiesOnInit=!0,_this.initLater())}),MasterService.instance().onInitDataFetch().then(function(){_this.fetchEntitiesOnInit=!0,_this.initLater()})},EntityDropDownSelectorController.prototype.init=function(){var _this=this;if(this.fetchEntitiesOnInit)if(this.fetchEntitiesOnInit=!1,this.$scope.adEntityType===EntityType.APPLICATION_COMPONENT||this.$scope.adEntityType===EntityType.BUSINESS_TRANSACTION)this.applicationsCache.getAllApplications(!1).then(function(){_this.entityCache=_this.applicationsCache.getEntityCache(_this.$scope.adEntityType,_this.$scope.adApplicationId),_this.entityCache?_this.fetchEntities(!1):_this.applicationsCache.getAllApplications(!0).then(function(){_this.entityCache=_this.applicationsCache.getEntityCache(_this.$scope.adEntityType,_this.$scope.adApplicationId),_this.entityCache&&_this.fetchEntities(!1)})});else if(this.$scope.adEntityType===EntityType.APPLICATION_COMPONENT_NODE){var nodeId=URLParams.getCurrentUrlParams().getNumberParam(UrlConstants.NODE_ID);Util.isValidId(nodeId)&&NodeUiService.instance().getApplicationComponentNodeById(nodeId).then(function(node){node&&(_this.entityCache=_this.applicationsCache.getComponentNodeCacheByComponentId(node.componentId,!0),_this.entityCache&&_this.fetchEntities())})}else this.$scope.adEntityType===EntityType.BASE_PAGE?this.applicationsCache.findApplicationById(this.$scope.adApplicationId).then(function(){_this.entityCache=_this.applicationsCache.getEntityCache(_this.$scope.adEntityType,_this.$scope.adApplicationId),_this.entityCache&&_this.fetchEntities(!1)}):this.$scope.adEntityType===EntityType.DB_SERVER&&(this.entityCache=DatabaseCache.instance(),this.entityCache&&this.fetchEntities())},EntityDropDownSelectorController.prototype.onClickEntity=function(entity){this.selectedEntity=entity,this.onSubmit()},EntityDropDownSelectorController.prototype.onSubmit=function(){this.selectedEntity&&(this.dispatchSelectedEntityEvent(),this.closeDropDownFunction())},EntityDropDownSelectorController.prototype.onRefreshEntities=function(){this.fetchEntities(!0)},EntityDropDownSelectorController.prototype.fetchEntities=function(forceReload){var _this=this;void 0===forceReload&&(forceReload=!1),this.entityCache&&this.entityCache.getEntities(forceReload).then(function(){_this.entities=_this.entityCache.entities})},EntityDropDownSelectorController.prototype.dispatchSelectedEntityEvent=function(){this.$scope.$emit(EntityDropDownSelectorController.UEV_DROP_DOWN_ENTITY_SELECTED,this.selectedEntity)},EntityDropDownSelectorController.prototype.initLater=function(){var _this=this;this.runInitLater||(this.runInitLater=!0,InjectorService.instance().$timeout()(function(){_this.runInitLater=!1,_this.init()}))},EntityDropDownSelectorController.UEV_DROP_DOWN_ENTITY_SELECTED="UEV_DROP_DOWN_ENTITY_SELECTED",EntityDropDownSelectorController.$inject=["$scope"],EntityDropDownSelectorController}(ControllerBase);appdynamicsModule.controller("EntityDropDownSelectorController",EntityDropDownSelectorController),define("app/view/components/entityDropDownSelector/EntityDropDownSelectorController",function(){});var EntityGridDirective=function(){function EntityGridDirective(){return{restrict:"E",replace:!1,scope:{adEntityType:"=",adParentEntityId:"=",adContextInfo:"=",adSelectedItems:"=",adMultiSelect:"=",adHideIcon:"=",adHideType:"=",adLabelField:"=",adColumnTitleType:"="},templateUrl:"app/view/components/entityGrid/EntityGridView.html",controller:EntityGridController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return EntityGridDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-entity-grid"),EntityGridDirective),define("app/view/components/entityGrid/EntityGridDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EntityGridController=function(_super){function EntityGridController($scope){_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.applicationTierNameMap={}}return __extends(EntityGridController,_super),EntityGridController.prototype.link=function($scope,iElement){this.$scope=$scope,this.$scope.controller=this,this.element=iElement,this.init()},EntityGridController.prototype.init=function(){EntityGridController.DEBUG&&(ADLoggerService.warn("EntityGridController.init Debug: Enter with entity type and parent entity id "+this.$scope.adEntityType+", "+this.$scope.adParentEntityId),ADLoggerService.warn("EntityGridController.init Debug: selectedItems are "+Util.stringifyWithIndent(this.$scope.adSelectedItems))),this.entityType=this.$scope.adEntityType,this.parentEntityId=this.$scope.adParentEntityId||-1,this.contextInfo=this.$scope.adContextInfo,this.hideIcon=this.$scope.adHideIcon||!1,this.multiSelect=this.$scope.adMultiSelect||!1,this.nameField=this.$scope.adNameField||"name",this.nameColumnTitle=this.$scope.adNameColumnTitle||"Name",this.hideType=this.$scope.adHideType||!1,this.typeField=this.$scope.adTypeField||"type",this.typeColumnTitle=this.$scope.adTypeColumnTitle||"Type",this.selectedItems=this.$scope.adSelectedItems,this.gridOptions=new GridOptions,this.gridOptions.columnProvider=[],this.gridOptions.dataProvider=[],this.gridOptions.multiSelect=this.multiSelect,this.gridOptions.filterFunction=this.gridFilterFunction.bind(this,this.gridOptions),this.searchString="";var gridColumn,columns=this.gridOptions.columnProvider;this.hideIcon||(gridColumn=GridColumn.createColumn(12,this.typeField," ",function(val,meta,record){var iconSource=record.raw.icon?record.raw.icon:ImageUtil.getComponentMiniIconFromType(record.raw.type);return"<img src='"+iconSource+"'/>"}),gridColumn.sortable=!0,columns.push(gridColumn)),gridColumn=GridColumn.createColumn(90,this.nameField,this.nameColumnTitle),gridColumn.sortable=!0,columns.push(gridColumn),this.hideType||columns.push(GridColumn.createColumn(48,this.typeField,this.typeColumnTitle)),this.setupWatchers(),this.setupListeners(),this.fetchData(this.entityType)},EntityGridController.prototype.fetchData=function(entityType){switch(entityType){case EntityType.APPLICATION_COMPONENT:this.entityTypeLabel=this.getString("ms_tiers"),this.fetchComponentData(this.parentEntityId);break;case EntityType.APPLICATION_COMPONENT_NODE:this.entityTypeLabel=this.getString("ms_nodes"),this.fetchNodeData(this.parentEntityId);break;case EntityType.BUSINESS_TRANSACTION:this.entityTypeLabel=this.getString("ms_businessTransactions"),this.fetchBTData(this.parentEntityId);break;case EntityType.ERROR:this.entityTypeLabel=this.getString("ms_errors"),this.fetchErrorData(this.parentEntityId);break;case EntityType.BACKEND:this.entityTypeLabel=this.getString("ms_upperBackends"),this.fetchBackendData(this.parentEntityId);break;case EntityType.DB_SERVER:this.entityTypeLabel=this.getString("ms_dbDatabaseServer"),this.fetchDbMonDBData(this.parentEntityId);break;case EntityType.MACHINE_INSTANCE:this.entityTypeLabel=this.getString("ms_serverTitle"),this.isSimApplicationId(this.parentEntityId)?this.fetchSimMachineData(this.parentEntityId):this.fetchApmSimMachineData(this.parentEntityId);break;case EntityType.APPLICATION_DIAGNOSTIC_DATA:this.entityTypeLabel="Element",this.fetchEumData(this.parentEntityId,this.contextInfo);break;default:ADLoggerService.warn("EntityGridController.fetchData Error: Called with not yet supported EntityType"+entityType.toString())}},EntityGridController.prototype.gridClick=function(event){EntityGridController.DEBUG&&ADLoggerService.warn("EntityGridController.gridClick Debug: Enter with event.data "+Util.stringifyWithIndent(event.data)),this.selectedItems=event.data,this.$scope.adSelectedItems[0]={id:this.selectedItems.id}},EntityGridController.prototype.gridFilterFunction=function(gridOptions,item){if(null==gridOptions||null==item)return!0;var match=!1,nameMatch=StringUtils.containsString(item.data.name,gridOptions.filterString.toString(),!0),typeMatch=StringUtils.containsString(item.data.type,gridOptions.filterString.toString(),!0);return match=this.hideType?nameMatch:nameMatch||typeMatch},EntityGridController.prototype.handleSearchStringChange=function(gridOptions,value){gridOptions.filterString=value},EntityGridController.prototype.fetchNodeData=function(appId){var _this=this;return Util.isValidId(appId)?(this.gridOptions.loading=!0,void UserUiService.instance().getApplicationComponentNodesByApplicationId(appId).then(function(response){var nodes=UserUiService.instance().getApplicationComponentNodesByApplicationId_response(response);_this.applyNodesResponse(nodes),_this.gridOptions.loading=!1})):void ADLoggerService.warn("EntityGridController.fetchNodeData called with invalid appId "+appId)},EntityGridController.prototype.fetchComponentData=function(appId){var _this=this;return Util.isValidId(appId)?(this.gridOptions.loading=!0,void UserUiService.instance().getAllApplicationComponents(appId).then(function(response){var components=UserUiService.instance().getAllApplicationComponents_response(response);_this.applyComponentsResponse(components),_this.gridOptions.loading=!1})):void ADLoggerService.warn("EntityGridController.fetchComponentData called with invalid appId "+appId)},EntityGridController.prototype.fetchBTData=function(appId){var _this=this;return Util.isValidId(appId)?(this.gridOptions.loading=!0,void BusinessTransactionUiService.instance().getBusinessTransactions(appId).then(function(response){var bts=BusinessTransactionUiService.instance().getBusinessTransactions_response(response);_this.applyBTsResponse(bts),_this.gridOptions.loading=!1})):void ADLoggerService.warn("EntityGridController.fetchBTData called with invalid appId "+appId)},EntityGridController.prototype.fetchBackendData=function(appId){var _this=this;return Util.isValidId(appId)?(this.gridOptions.loading=!0,void UserUiService.instance().getAllApplicationComponents(appId).then(function(response){var components=UserUiService.instance().getAllApplicationComponents_response(response);_this.applyComponentsResponseToMap(components),UserUiService.instance().getAllUnresolvedBackendCallInfos(appId).then(function(response){var backends=UserUiService.instance().getAllUnresolvedBackendCallInfos_response(response);_this.applyBackendsResponse(backends),_this.gridOptions.loading=!1})})):void ADLoggerService.warn("EntityGridController.fetchBackendData called with invalid appId "+appId)},EntityGridController.prototype.fetchEumData=function(appId,eumTypeId){var _this=this;if(!Util.isValidId(appId))return void ADLoggerService.warn("EntityGridController.fetchEumData called with invalid appId "+appId);this.gridOptions.loading=!0;var filter={types:[eumTypeId],applicationId:appId,onlyReturnExcluded:!1};UserUiService.instance().getApplicationDiagnosticDatas(filter).then(function(response){var eumViewData=UserUiService.instance().getApplicationDiagnosticDatas_response(response);_this.applyEumResponse(eumViewData),_this.gridOptions.loading=!1})},EntityGridController.prototype.fetchErrorData=function(appId){var _this=this;return Util.isValidId(appId)?(this.gridOptions.loading=!0,void UserUiService.instance().getAllApplicationComponents(appId).then(function(response){var components=UserUiService.instance().getAllApplicationComponents_response(response);_this.applyComponentsResponseToMap(components);var errorQueryFilter={applicationId:appId,types:["ERROR"]};UserUiService.instance().getApplicationDiagnosticDatas(errorQueryFilter).then(function(response){var errors=UserUiService.instance().getApplicationDiagnosticDatas_response(response);_this.applyErrorsResponse(errors),_this.gridOptions.loading=!1})})):void ADLoggerService.warn("EntityGridController.fetchErrorData called with invalid appId "+appId)},EntityGridController.prototype.isSimApplicationId=function(appId){return 3==ApplicationsCache.instance().getApplicationTypeById(appId)},EntityGridController.prototype.fetchApmSimMachineData=function(appId){var _this=this;return this.isSimApplicationId(appId)?void ADLoggerService.warn("EntityGridController.fetchApmSimMachineData called with SIM appId "+appId):(this.gridOptions.loading=!0,void CustomDashboardUiService.instance().getAllMachinesForApplication(appId).then(function(data){_this.applyApmSimMachineResponse(data),_this.gridOptions.loading=!1}))},EntityGridController.prototype.fetchSimMachineData=function(appId){var _this=this;return this.isSimApplicationId(appId)?(this.gridOptions.loading=!0,void UserUiService.instance().getApplicationComponentNodesByApplicationId(appId).then(function(data){_this.applySimMachineResponse(data),_this.gridOptions.loading=!1})):void ADLoggerService.warn("EntityGridController.fetchSimMachineData called with non-SIM appId "+appId)},EntityGridController.prototype.fetchDbMonDBData=function(appId){var _this=this;return Util.isValidId(appId)?(this.gridOptions.loading=!0,void DbMonitoringUiService.instance().getAllDatabases().then(function(data){_this.applyDbMonDBResponse(data),_this.gridOptions.loading=!1})):void ADLoggerService.warn("EntityGridController.fetchDbMonDBData called with invalid appId "+appId)},EntityGridController.prototype.setupWatchers=function(){var _this=this;this.$scope.$watch("adParentEntityId",function(entityId,oldEntityId){EntityGridController.DEBUG&&ADLoggerService.warn("EntityGridController.$watch.adParentEntityId Debug: Enter with entity id "+entityId),entityId&&entityId!=oldEntityId&&_this.init()}),this.$scope.$watch("adContextInfo",function(contextInfo,oldContextInfo){EntityGridController.DEBUG&&ADLoggerService.warn("EntityGridController.$watch.adContextInfo Debug: Enter with context info "+contextInfo),contextInfo&&contextInfo!=oldContextInfo&&_this.init()}),this.$scope.$watch("adSelectedItems",function(selectedItems){EntityGridController.DEBUG&&ADLoggerService.warn("EntityGridController.$watch.adSelectedItems Debug: Enter with selected param "+Util.stringifyWithIndent(selectedItems)),selectedItems&&(_this.selectedItems=_this.$scope.adSelectedItems)})},EntityGridController.prototype.setupListeners=function(){},EntityGridController.prototype.applyComponentsResponse=function(components){this.gridOptions.dataProvider=_.map(components,function(component){return{name:component.name,type:component.componentType.name,id:component.id,icon:ImageUtil.getComponentMiniIconFromType(component.componentType.name)}})},EntityGridController.prototype.applyNodesResponse=function(nodes){this.gridOptions.dataProvider=_.map(nodes,function(node){return{name:node.name,type:node.applicationComponentName,id:node.id,icon:ImageUtil.iconNavServer}})},EntityGridController.prototype.applyApmSimMachineResponse=function(machines){this.gridOptions.dataProvider=_.map(machines,function(machine){return{id:machine.id,name:machine.name,type:machine.osType?machine.osType.name:"",icon:ImageUtil.iconNavServer}})},EntityGridController.prototype.applySimMachineResponse=function(machines){this.gridOptions.dataProvider=_.map(machines,function(machine){return{name:machine.name,type:machine.applicationComponentName,id:machine.id,icon:ImageUtil.iconNavServer}})},EntityGridController.prototype.applyDbMonDBResponse=function(dbServers){this.gridOptions.dataProvider=_.map(dbServers,function(dbServer){return{name:dbServer.name,type:dbServer.type,id:dbServer.id,icon:ImageUtil.iconNavDB}})},EntityGridController.prototype.applyBTsResponse=function(businessTransactions){this.gridOptions.dataProvider=_.map(businessTransactions,function(bt){return{name:bt.name,id:bt.id,type:bt.applicationComponentName,icon:ImageUtil.getIconForBusinessTransactionType2(bt)}})},EntityGridController.prototype.applyErrorsResponse=function(errors){var _this=this;this.gridOptions.dataProvider=_.map(errors,function(error){return{name:error.name,id:error.id,type:_this.applicationTierNameMap[error.applicationComponentId]||"-",icon:ImageUtil.iconNavErrors}})},EntityGridController.prototype.applyBackendsResponse=function(backends){var _this=this;this.gridOptions.dataProvider=_.map(backends,function(backend){return{name:backend.displayName,id:backend.id,type:_this.applicationTierNameMap[backend.applicationComponentId]||"-",icon:ImageUtil.iconNavDB}})},EntityGridController.prototype.applyEumResponse=function(eums){this.gridOptions.dataProvider=_.map(eums,function(eum){return{name:eum.name,id:eum.id,type:eum.id+"",icon:ImageUtil.iconNavEum}})},EntityGridController.prototype.applyComponentsResponseToMap=function(components){for(var i=0;i<components.length;i++)this.applicationTierNameMap[components[i].id]=components[i].name},EntityGridController.prototype.dispatchEntitySelectedEvent=function(){this.$scope.$emit(EntityGridController.UEV_ENTITY_SELECTED,this.selectedItems)},EntityGridController.DEBUG=!1,EntityGridController.UEV_ENTITY_SELECTED="UEV_ENTITY_SELECTED",EntityGridController.$inject=["$scope"],EntityGridController}(ControllerBase);appdynamicsModule.controller("EntityGridController",EntityGridController),define("app/view/components/entityGrid/EntityGridController",function(){}),define("shared/utils/TimeZoneUtil",["require","exports"],function(require,exports){var TimeZoneUtil=function(){function TimeZoneUtil(){}return TimeZoneUtil.getDefaultTimeZone=function(){return TimeZoneUtil.getTimeZoneById(TimeZoneUtil.DEFAULT_TIME_ZONE)},TimeZoneUtil.getTimeZoneById=function(timeZoneId){return _.findWhere(TimeZoneUtil.timeZones,{timeZoneId:timeZoneId})},TimeZoneUtil.getTimeZones=function(){return TimeZoneUtil.timeZones},TimeZoneUtil.MINUTES_PER_HOUR=60,TimeZoneUtil.DEFAULT_TIME_ZONE="America/Los_Angeles",TimeZoneUtil.timeZones=[{timeZoneId:"Pacific/Midway",offsetMinutes:-11*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-11*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-11:00",name:"[GMT-11:00] Midway Island, Samoa"},{timeZoneId:"Pacific/Honolulu",offsetMinutes:-10*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-10*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-10:00",name:"[GMT-10:00] Hawaii"},{timeZoneId:"America/Anchorage",offsetMinutes:-9*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-8*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-09:00",name:"[GMT-09:00] Alaska"},{timeZoneId:"America/Los_Angeles",offsetMinutes:-8*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-7*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-08:00",name:"[GMT-08:00] Pacific Time (US & Canada)"},{timeZoneId:"America/Tijuana",offsetMinutes:-8*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-7*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-08:00",name:"[GMT-08:00] Tijuana, Baja California"},{timeZoneId:"America/Phoenix",offsetMinutes:-7*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-7*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-07:00",name:"[GMT-07:00] Arizona"},{timeZoneId:"America/Chihuahua",offsetMinutes:-7*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-6*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-07:00",name:"[GMT-07:00] Chihuahua, La Paz, Mazatlan"},{timeZoneId:"America/Denver",offsetMinutes:-7*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-6*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-07:00",name:"[GMT-07:00] Mountain Time (US & Canada)"},{timeZoneId:"America/Costa_Rica",offsetMinutes:-6*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-6*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-06:00",name:"[GMT-06:00] Central America"},{timeZoneId:"America/Chicago",offsetMinutes:-6*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-06:00",name:"[GMT-06:00] Central Time (US & Canada)"},{timeZoneId:"America/Mexico_City",offsetMinutes:-6*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-06:00",name:"[GMT-06:00] Guadalajara, Mexico City, Monterrey"},{timeZoneId:"America/Regina",offsetMinutes:-6*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-6*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-06:00",name:"[GMT-06:00] Saskatchewan"},{timeZoneId:"America/Bogota",offsetMinutes:-5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-05:00",name:"[GMT-05:00] Bogota, Lima, Quito, Rio Branco"},{timeZoneId:"America/Caracas",offsetMinutes:-4.5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-4.5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-04:30",name:"[GMT-04:30] Caracas"},{timeZoneId:"America/New_York",offsetMinutes:-5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-4*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-05:00",name:"[GMT-05:00] Eastern Time (US & Canada)"},{timeZoneId:"America/Indiana/Indianapolis",offsetMinutes:-5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-4*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-05:00",name:"[GMT-05:00] Indiana (East)"},{timeZoneId:"America/Goose_Bay",offsetMinutes:-4*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-3*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-04:00",name:"[GMT-04:00] Atlantic Time (Canada)"},{timeZoneId:"America/La_Paz",offsetMinutes:-4*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-4*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-04:00",name:"[GMT-04:00] La Paz"},{timeZoneId:"America/Manaus",offsetMinutes:-4*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-4*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-04:00",name:"[GMT-04:00] Manaus"},{timeZoneId:"America/St_Johns",offsetMinutes:-3.5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-2.5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-03:30",name:"[GMT-03:30] Newfoundland"},{timeZoneId:"America/Santiago",offsetMinutes:-3*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-3*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-03:00",name:"[GMT-03:00] Santiago"},{timeZoneId:"America/Sao_Paulo",offsetMinutes:-3*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-2*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-03:00",name:"[GMT-03:00] Sau Paulo"},{timeZoneId:"America/Argentina/Buenos_Aires",offsetMinutes:-3*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-3*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-03:00",name:"[GMT-03:00] Buenos Aires, Georgetown"},{timeZoneId:"America/Godthab",offsetMinutes:-3*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-2*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-03:00",name:"[GMT-03:00] Greenland"},{timeZoneId:"America/Montevideo",offsetMinutes:-3*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-2*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-03:00",name:"[GMT-03:00] Montevideo"},{timeZoneId:"Atlantic/South_Georgia",offsetMinutes:-2*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-2*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-02:00",name:"[GMT-02:00] Mid-Atlantic"},{timeZoneId:"Atlantic/Cape_Verde",offsetMinutes:-1*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:-1*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-01:00",name:"[GMT-01:00] Cape Verde Is."},{timeZoneId:"Atlantic/Azores",offsetMinutes:-1*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:0*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT-01:00",name:"[GMT-01:00] Azores"},{timeZoneId:"Africa/Casablanca",offsetMinutes:0*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:1*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+00:00",name:"[GMT+00:00] Casablanca"},{timeZoneId:"Africa/Monrovia",offsetMinutes:0*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:0*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+00:00",name:"[GMT+00:00] Monrovia, Reykjavik"},{timeZoneId:"UTC",offsetMinutes:0*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:1*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+00:00",name:"[GMT+00:00] Greenwich Mean Time : Dublin, Edinburgh, Lisbon, London"},{timeZoneId:"Europe/Amsterdam",offsetMinutes:1*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:2*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+01:00",name:"[GMT+01:00] Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna"},{timeZoneId:"Europe/Belgrade",offsetMinutes:1*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:2*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+01:00",name:"[GMT+01:00] Belgrade, Bratislava, Budapest, Ljubljana, Prague"},{timeZoneId:"Europe/Brussels",offsetMinutes:1*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:2*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+01:00",name:"[GMT+01:00] Brussels, Copenhagen, Madrid, Paris"},{timeZoneId:"Europe/Sarajevo",offsetMinutes:1*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:2*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+01:00",name:"[GMT+01:00] Sarajevo, Skopje, Warsaw, Zagreb"},{timeZoneId:"Africa/Windhoek",offsetMinutes:1*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:2*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+01:00",name:"[GMT+01:00] Windhoek"},{timeZoneId:"Asia/Amman",offsetMinutes:2*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:3*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+02:00",name:"[GMT+02:00] Amman"},{timeZoneId:"Europe/Athens",offsetMinutes:2*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:3*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+02:00",name:"[GMT+02:00] Athens, Bucharest, Istanbul"},{timeZoneId:"Asia/Beirut",offsetMinutes:2*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:3*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+02:00",name:"[GMT+02:00] Beirut"},{timeZoneId:"Africa/Cairo",offsetMinutes:2*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:2*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+02:00",name:"[GMT+02:00] Cairo"},{timeZoneId:"Africa/Harare",offsetMinutes:2*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:2*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+02:00",name:"[GMT+02:00] Harare, Pretoria"},{timeZoneId:"Europe/Helsinki",offsetMinutes:2*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:3*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+02:00",name:"[GMT+02:00] Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius"},{timeZoneId:"Asia/Jerusalem",offsetMinutes:2*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:3*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+02:00",name:"[GMT+02:00] Jerusalem"},{timeZoneId:"Europe/Minsk",offsetMinutes:2*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:3*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+02:00",name:"[GMT+02:00] Minsk"},{timeZoneId:"Asia/Kuwait",offsetMinutes:3*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:3*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+03:00",name:"[GMT+03:00] Kuwait, Riyadh, Baghdad"},{timeZoneId:"Europe/Moscow",offsetMinutes:3*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:3*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+03:00",name:"[GMT+03:00] Moscow, St. Petersburg, Volgograd"},{timeZoneId:"Africa/Nairobi",offsetMinutes:3*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:3*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+03:00",name:"[GMT+03:00] Nairobi"},{timeZoneId:"Asia/Tehran",offsetMinutes:3.5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:4.5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+03:30",name:"[GMT+03:30] Tehran"},{timeZoneId:"Asia/Tbilisi",offsetMinutes:4*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:4*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+04:00",name:"[GMT+04:00] Tbilisi"},{timeZoneId:"Asia/Muscat",offsetMinutes:4*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:4*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+04:00",name:"[GMT+04:00] Abu Dhabi, Muscat"},{timeZoneId:"Asia/Baku",offsetMinutes:4*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+04:00",name:"[GMT+04:00] Baku"},{timeZoneId:"Asia/Yerevan",offsetMinutes:4*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:4*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+04:00",name:"[GMT+04:00] Yerevan"},{timeZoneId:"Asia/Kabul",offsetMinutes:4.5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:4.5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+04:30",name:"[GMT+04:30] Kabul"},{timeZoneId:"Asia/Yekaterinburg",offsetMinutes:5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+05:00",name:"[GMT+05:00] Yekaterinburg"},{timeZoneId:"Asia/Karachi",offsetMinutes:5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+05:00",name:"[GMT+05:00] Islamabad, Karachi, Tashkent"},{timeZoneId:"Asia/Kolkata",offsetMinutes:5.5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:5.5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+05:30",name:"[GMT+05:30] Chennai, Kolkata, Mumbai, New Delhi"},{timeZoneId:"Asia/Kathmandu",offsetMinutes:5.75*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:5.75*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+05:45",name:"[GMT+05:45] Kathmandu"},{timeZoneId:"Asia/Almaty",offsetMinutes:6*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:6*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+06:00",name:"[GMT+06:00] Almaty, Novosibirsk"},{timeZoneId:"Asia/Dhaka",offsetMinutes:6*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:6*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+06:00",name:"[GMT+06:00] Astana, Dhaka"},{timeZoneId:"Asia/Rangoon",offsetMinutes:6.5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:6.5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+06:30",name:"[GMT+06:30] Yangon (Rangoon)"},{timeZoneId:"Asia/Bangkok",offsetMinutes:7*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:7*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+07:00",name:"[GMT+07:00] Bangkok, Hanoi, Jakarta"},{timeZoneId:"Asia/Krasnoyarsk",offsetMinutes:7*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:7*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+07:00",name:"[GMT+07:00] Krasnoyarsk"},{timeZoneId:"Asia/Shanghai",offsetMinutes:8*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:8*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+08:00",name:"[GMT+08:00] Beijing, Chongqing, Hong Kong, Urumqi"},{timeZoneId:"Asia/Kuala_Lumpur",offsetMinutes:8*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:8*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+08:00",name:"[GMT+08:00] Kuala Lumpur, Singapore"},{timeZoneId:"Asia/Irkutsk",offsetMinutes:8*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:8*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+08:00",name:"[GMT+08:00] Irkutsk, Ulaan Bataar"},{timeZoneId:"Australia/Perth",offsetMinutes:8*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:8*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+08:00",name:"[GMT+08:00] Perth"},{timeZoneId:"Asia/Taipei",offsetMinutes:8*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:8*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+08:00",name:"[GMT+08:00] Taipei"},{timeZoneId:"Asia/Tokyo",offsetMinutes:9*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:9*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+09:00",name:"[GMT+09:00] Osaka, Sapporo, Tokyo"},{timeZoneId:"Asia/Seoul",offsetMinutes:9*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:9*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+09:00",name:"[GMT+09:00] Seoul"},{timeZoneId:"Asia/Yakutsk",offsetMinutes:9*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:10*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+09:00",name:"[GMT+09:00] Yakutsk"},{timeZoneId:"Australia/Adelaide",offsetMinutes:9.5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:9.5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+09:30",name:"[GMT+09:30] Adelaide"},{timeZoneId:"Australia/Darwin",offsetMinutes:9.5*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:9.5*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+09:30",name:"[GMT+09:30] Darwin"},{timeZoneId:"Australia/Brisbane",offsetMinutes:10*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:10*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+10:00",name:"[GMT+10:00] Brisbane"},{timeZoneId:"Australia/Canberra",offsetMinutes:10*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:11*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+10:00",name:"[GMT+10:00] Canberra, Melbourne, Sydney"},{timeZoneId:"Australia/Hobart",offsetMinutes:10*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:11*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+10:00",name:"[GMT+10:00] Hobart"},{timeZoneId:"Pacific/Guam",offsetMinutes:10*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:10*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+10:00",name:"[GMT+10:00] Guam, Port Moresby"},{timeZoneId:"Asia/Vladivostok",offsetMinutes:10*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:10*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+10:00",name:"[GMT+10:00] Vladivostok"},{timeZoneId:"Asia/Magadan",offsetMinutes:11*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:12*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+11:00",name:"[GMT+11:00] Magadan, Solomon Is., New Caledonia"},{timeZoneId:"Pacific/Auckland",offsetMinutes:12*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:13*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+12:00",name:"[GMT+12:00] Auckland, Wellington"},{timeZoneId:"Pacific/Fiji",offsetMinutes:12*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:13*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+12:00",name:"[GMT+12:00] Fiji, Marshall Is."},{timeZoneId:"Asia/Kamchatka",offsetMinutes:12*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:12*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+12:00",name:"[GMT+12:00] Kamchatka"},{timeZoneId:"Pacific/Tongatapu",offsetMinutes:13*TimeZoneUtil.MINUTES_PER_HOUR,offsetMinutesDst:13*TimeZoneUtil.MINUTES_PER_HOUR,gmtAdjustment:"GMT+13:00",name:"[GMT+13:00] Tongatapu"}],TimeZoneUtil
}();exports.TimeZoneUtil=TimeZoneUtil}),define("app/view/components/timeZoneSelector/TimeZoneSelectorController",["require","exports","../../../../shared/utils/TimeZoneUtil"],function(require,exports,timeZoneUtil){var TimeZoneSelectorController=function(){function TimeZoneSelectorController($scope,$timeout){this.$scope=$scope,this.$timeout=$timeout,this.$scope.controller=this,this.init()}return TimeZoneSelectorController.prototype.init=function(){var _this=this;TimeZoneSelectorController.DEBUG&&ADLoggerService.warn("TimeZoneSelectorController.init Debug: Enter with $scope.adSelected value "+Util.stringifyWithIndent(this.$scope.adSelected)),this.timeZones=timeZoneUtil.TimeZoneUtil.getTimeZones(),this.selectedTimeZone=this.$scope.adSelected,this.$scope.$watch("adSelected",function(){TimeZoneSelectorController.DEBUG&&ADLoggerService.warn("TimeZoneSelectorController.init$watch Debug: Watch change on $scope.adSelected with value "+Util.stringifyWithIndent(_this.$scope.adSelected)),_this.selectedTimeZone=_this.$scope.adSelected})},TimeZoneSelectorController.prototype.handleSelectedTimeZoneChange=function(){var _this=this;TimeZoneSelectorController.DEBUG&&ADLoggerService.warn("TimeZoneSelectorController.handleSelectedTimeZoneChange Debug: Enter with selectedTimeZone "+Util.stringifyWithIndent(this.selectedTimeZone)),this.$scope.adSelected=this.selectedTimeZone,this.$timeout(function(){_this.$scope.adChange()})},TimeZoneSelectorController.$inject=["$scope","$timeout"],TimeZoneSelectorController.DEBUG=!1,TimeZoneSelectorController}();exports.TimeZoneSelectorController=TimeZoneSelectorController,adComponentsModule.controller("TimeZoneSelectorController",TimeZoneSelectorController)}),define("app/view/components/timeZoneSelector/TimeZoneSelectorDirective",["require","exports","./TimeZoneSelectorController"],function(require,exports,timeZoneSelectorController){var TimeZoneSelectorDirective=function(){function TimeZoneSelectorDirective(){return{restrict:"E",controller:timeZoneSelectorController.TimeZoneSelectorController,templateUrl:TimeZoneSelectorDirective.TEMPLATE_URL,scope:{adSelected:"=",adChange:"&"}}}return TimeZoneSelectorDirective.TEMPLATE_URL="app/view/components/timeZoneSelector/TimeZoneSelector.html",TimeZoneSelectorDirective}();exports.TimeZoneSelectorDirective=TimeZoneSelectorDirective,adComponentsModule.directive(StringUtils.toCamelCase("ad-time-zone-selector"),TimeZoneSelectorDirective)});var DropDown=function(){function DropDown($document,$location,$window,$compile){var openElement=null,close=null,popUpZIndex=2e3;return{restrict:"CA",link:function(scope,element,attrs){function closeHandlerPopUp(event){"true"==attrs.multiclick?event&&(ADLoggerService.log("Multiclick preventing event."),event.preventDefault(),event.stopImmediatePropagation()):close&&close(event)}scope.$watch(function(){return $location.path()},function(){close&&close(null)});var menuElement=$(element).next();element.on("mousedown",function(){function clickListener(event){event.preventDefault(),event.stopImmediatePropagation(),$(document).off("click",clickListener),setTimeout(function(){popupItem.on("click",closeHandlerPopUp),$(document).on("click",close)},0)}function resizeListener(){close(null)}if("true"!=attrs.dropDownDisabled)if(openElement)close(null);else if(!element.hasClass("toolbarButtonDisabled")){var openDirection=attrs.direction;openDirection||(openDirection=DropDown.DOWN);var leftOffset=Util.parseInt(attrs.adLeftOffset,0),topOffset=Util.parseInt(attrs.adTopOffset,0),oldWidth=menuElement[0].style.width,oldHeight=menuElement[0].style.height,popupWidth=menuElement.outerWidth(),popupHeight=menuElement.outerHeight(),popupItem=null;if("true"==attrs.inPlace)popupItem=menuElement,popupItem.css("display","inline"),popupItem.css("position","absolute"),popupItem.css("visiblity","visible");else{popupItem=menuElement.clone(!0,!0),"true"==attrs.multiclick&&(popupItem=$compile(popupItem)(scope)),popupItem.appendTo("body"),popupItem.css("display","inline"),popupItem.css("position","absolute"),popupItem.css("visiblity","hidden"),element.addClass("open");var buttonBounds=$(element)[0].getBoundingClientRect(),buttonHeight=buttonBounds.bottom-buttonBounds.top;-1!=oldWidth.indexOf("%")?popupItem.width(popupWidth):popupWidth=Math.max(popupItem.width(),popupWidth),-1!=oldHeight.indexOf("%")?popupItem.height(popupHeight):popupHeight=Math.max(popupItem.height(),popupHeight);var top=buttonBounds.top,left=buttonBounds.left;switch(openDirection){case DropDown.DOWN:top+=buttonHeight;break;case DropDown.DOWN_LEFT:top+=buttonHeight,left-=popupWidth+buttonBounds.width;break;case DropDown.UP:top-=popupHeight;break;case DropDown.LEFT:top+=buttonHeight/2-popupHeight/2,left-=popupWidth;break;case DropDown.RIGHT:top+=buttonHeight/2-popupHeight/2,left+=buttonBounds.width;break;case DropDown.ON_TOP:}left+=leftOffset,top+=topOffset,left=Math.min($(window).width()-popupWidth,Math.max(0,left)),top=Math.min($(window).height()-popupHeight,Math.max(0,top)),popupItem.css("left",left),popupItem.css("top",top),popupItem.css("z-index",popUpZIndex),popupItem.css("position","absolute"),popupItem.css("display","inline"),popupItem.css("visibility","visible")}var isolateScope=angular.element(popupItem[0]).isolateScope();isolateScope&&(isolateScope.open=!0,ViewUtil.safeApply(isolateScope)),openElement=element,close=function(event){var isolateScope=angular.element(popupItem[0]).isolateScope();isolateScope&&(isolateScope.open=!1,ViewUtil.safeApply(isolateScope)),event&&event.isDefaultPrevented()||("true"==attrs.inPlace?(popupItem=menuElement,popupItem.css("display","none"),popupItem.css("visiblity","invisible")):popupItem.remove(),event&&(event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation()),popupItem.off("click",closeHandlerPopUp),$(window).off("resize",resizeListener),$(document).off("click",close),element.parent().removeClass("open"),close=null,openElement=null)},$(document).on("click",clickListener),$(window).on("resize",resizeListener)}})}}}return DropDown.UP="up",DropDown.DOWN="down",DropDown.ON_TOP="onTop",DropDown.LEFT="left",DropDown.RIGHT="right",DropDown.DOWN_LEFT="downLeft",DropDown.$inject=["$document","$location","$window","$compile"],DropDown}();angular.module("ui.bootstrap.dropdown",[]).directive("dropdownToggleAD",DropDown),define("app/view/components/dropdown/dropdown",function(){});var DropDownController=function(){function DropDownController($scope,$element,$rootScope,$location,injectorService,$timeout,$compile){var _this=this;this.$scope=$scope,this.$element=$element,this.$rootScope=$rootScope,this.$location=$location,this.injectorService=injectorService,this.$timeout=$timeout,this.$compile=$compile,this.openElement=null,this.popUpZIndex=2e3,this.listenersSetup=!1,this._isMouseOverTriggerElement=!1,this._isMouseOverPopup=!1,$scope.$watch(function(){return $location.path()},function(){_this.openElement&&_this.closePopup()}),$scope.$watch("adDropdownOpen",function(newVal){newVal&&!_this.openElement?_this.onClickDropDownToggle():newVal===!1&&_this.openElement&&_this.closePopup()}),this.menuElement=this.$element.next(),$element.on(MouseEvents.CLICK,function(event){_this.onClickDropDownToggle(event.originalEvent)}),$element.mouseenter(function(event){_this._isMouseOverTriggerElement=!0,_this.$scope.adOpenMode==DropDownController.OPEN_MODE_MOUSEENTER&&_this.$timeout(function(){_this._isMouseOverTriggerElement&&_this.onClickDropDownToggle(event.originalEvent)},_this.getHoverOpenDelayMillis())}),$element.mouseleave(function(){_this._isMouseOverTriggerElement=!1,_this.$scope.adCloseMode==DropDownController.CLOSE_MODE_MOUSELEAVE&&_this.$timeout(function(){!_this.openElement||_this._isMouseOverPopup||_this._isMouseOverTriggerElement||_this.closePopup()},_this.getMouseleaveCloseDelayMillis())})}return DropDownController.prototype.onClickDropDownToggle=function(event){var _this=this;void 0===event&&(event=null),this.isDropDownDisabled()||this.openElement||(this.popupMenueElement=this.renderPopUp(),this.$timeout(function(){_this.setupEventListeners()},10),this.setDropDownOpen(!0))},DropDownController.prototype.setDropDownOpen=function(value){this.openElement=value?this.popupMenueElement:null,void 0!==this.$scope.adDropdownOpen&&(this.$scope.adDropdownOpen=value),_.isFunction(this.$scope.adOnDropDownToggle)&&this.$scope.adOnDropDownToggle({dropDownOpen:value})},DropDownController.prototype.link=function(scope,iElement){this.element=iElement,this.setupExternalCloseInvokeFunction()},DropDownController.prototype.setupEventListeners=function(){var _this=this;!this.listenersSetup&&this.popupMenueElement&&($(this.popupMenueElement).on(EventConstants.UEV_CLOSE,this.closePopup.bind(this)),this.onKeyboardEscape=function(event){event.which===$.ui.keyCode.ESCAPE&&_this.closePopup()},$(document).keydown(this.onKeyboardEscape),this.onDocumentClickWrapper=function(event){_this.onDocumentClick(event)},$(document).on(MouseEvents.CLICK,this.onDocumentClickWrapper),this.onMenuElementClickWrapper=function(event){_this.onClickMenuElement(event)},$(this.popupMenueElement).on(MouseEvents.CLICK,this.onMenuElementClickWrapper),this.onResizeWrapper=function(event){_this.onDocumentResize(event)},$(window).on("resize",this.onResizeWrapper),this.listenersSetup=!0,$(this.popupMenueElement).on("mouseenter",this.onMouseEnterPopup.bind(this)),$(this.popupMenueElement).on("mouseleave",this.onMouseLeavePopup.bind(this)))},DropDownController.prototype.removeEventListeners=function(){$(this.popupMenueElement).off(MouseEvents.CLICK,this.onMenuElementClickWrapper),$(this.popupMenueElement).off(EventConstants.UEV_CLOSE),$(document).off(MouseEvents.CLICK,this.onDocumentClickWrapper),$(document).off("keydown",this.onKeyboardEscape),$(window).off("resize",this.onResizeWrapper),this.listenersSetup=!1},DropDownController.prototype.renderPopUp=function(){if(0==this.menuElement.length)return null;var openDirection=this.getDirection(),topOffset=Util.parseInt(this.$scope.adTopOffset,0),oldWidth=this.menuElement[0].style.width,oldHeight=this.menuElement[0].style.height,popupWidth=this.adjustPopupWidth(this.menuElement),popupHeight=this.adjustPopupHeight(this.menuElement),popupMenuElement=null;if(this.getInPlace())popupMenuElement=this.menuElement,popupMenuElement.css("display","inline"),popupMenuElement.css("position","absolute"),popupMenuElement.css("visiblity","visible");else{this.isNewCompileMode()?(this.popupScope=this.$scope.$parent.$new(),popupMenuElement=this.$compile(this.popupRawHtmlBeforeCompile)(this.popupScope),popupHeight=this.adjustPopupHeight(popupMenuElement)):popupMenuElement=this.menuElement.clone(!0,!0),this.isMultiClickEnabled()&&(this.$scope.adDisableCompileOnRender||this.isNewCompileMode()||(this.popupScope=this.$scope.$parent.$new(),popupMenuElement=this.$compile(popupMenuElement)(this.popupScope))),this.popupScope&&ViewUtil.safeDigest(this.popupScope),popupMenuElement.css("visiblity","hidden"),popupMenuElement.appendTo("body"),popupMenuElement.css("display","inline"),popupMenuElement.css("position","absolute");var buttonBounds=this.$element[0].getBoundingClientRect(),buttonHeight=buttonBounds.bottom-buttonBounds.top;-1!=oldWidth.indexOf("%")?popupMenuElement.width(popupWidth):popupWidth=Math.max(popupMenuElement.width(),popupWidth),-1!=oldHeight.indexOf("%")?popupMenuElement.height(popupHeight):popupHeight=Math.max(popupMenuElement.height(),popupHeight);var top=buttonBounds.top,left=buttonBounds.left;switch(this.setCurrentDirection(openDirection),openDirection){case DropDownController.DOWN:top+=buttonHeight;break;case DropDownController.DOWN_LEFT:top+=buttonHeight,left-=popupWidth+buttonBounds.width;break;case DropDownController.DOWN_CENTERED:top+=buttonHeight,left-=popupWidth/2-buttonBounds.width/2;break;case DropDownController.UP:top-=popupHeight;break;case DropDownController.UP_CENTERED:top-=popupHeight,left-=popupWidth/2-buttonBounds.width/2;break;case DropDownController.DOWN_CENTERED_OR_UP_CENTERED:top+=buttonHeight,this.setCurrentDirection(DropDownController.DOWN_CENTERED),$(window).height()-popupHeight<top&&(top-=buttonHeight+popupHeight,this.setCurrentDirection(DropDownController.UP_CENTERED)),left-=popupWidth/2-buttonBounds.width/2;break;case DropDownController.LEFT:top+=buttonHeight/2-popupHeight/2,left-=popupWidth;break;case DropDownController.RIGHT:top+=buttonHeight/2-popupHeight/2,left+=buttonBounds.width;break;case DropDownController.RIGHT_DOWN:left+=buttonBounds.width}top+=topOffset,left=Math.min($(window).width()-popupWidth,Math.max(0,left)),top=Math.min($(window).height()-popupHeight,Math.max(0,top)),popupMenuElement.css("left",left),popupMenuElement.css("top",top),popupMenuElement.css("z-index",this.popUpZIndex),popupMenuElement.css("position","absolute"),popupMenuElement.css("display","inline"),popupMenuElement.css("visibility","visible")}return this.adjustPopupPosition(popupMenuElement),popupMenuElement},DropDownController.prototype.adjustPopupHeight=function(popup){var popupHeight=popup.outerHeight();if(this.$scope.adFitToScreen){var windowHeight=$(window).height();popup.css("max-height",windowHeight+"px");var constrainedHeight=Math.min(windowHeight,popupHeight);constrainedHeight>0&&constrainedHeight!=popupHeight&&(popup.height(constrainedHeight),popupHeight=constrainedHeight)}return popupHeight},DropDownController.prototype.adjustPopupWidth=function(popup){var popupWidth=popup.outerWidth();if(this.$scope.adFitToScreen){var windowWidth=$(window).width();popup.css("max-width",windowWidth+"px");var constrainedWidth=Math.min(windowWidth,popupWidth);constrainedWidth>0&&constrainedWidth!=popupWidth&&(popup.width(constrainedWidth),popupWidth=constrainedWidth)}return popupWidth},DropDownController.prototype.adjustPopupPosition=function(popup){if(this.$scope.adFitToScreen){popup.css("margin-left",""),popup.css("margin-right","");var popUpBoundingRect=popup[0].getBoundingClientRect(),bodyBoundingRect=document.body.getBoundingClientRect();popUpBoundingRect.right>bodyBoundingRect.right?popup.css("margin-left","-"+(popUpBoundingRect.right-bodyBoundingRect.right)+"px"):popUpBoundingRect.left<0&&popup.css("margin-right",popUpBoundingRect.left+"px"),popUpBoundingRect.bottom>bodyBoundingRect.bottom?popup.css("margin-top","-"+(popUpBoundingRect.bottom-bodyBoundingRect.bottom)+"px"):popUpBoundingRect.top<0&&popup.css("margin-top",popUpBoundingRect.top+"px")}},DropDownController.prototype.closePopup=function(event){event&&event.isDefaultPrevented()||(this.setDropDownOpen(!1),this.popupMenueElement&&(this.getInPlace()?(this.popupMenueElement.css("display","none"),this.popupMenueElement.css("visiblity","invisible")):(this.popupScope&&(this.popupScope.$destroy(),this.popupScope=null),this.popupMenueElement.remove(),this.popupMenueElement=null)),event&&(event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation()),this.removeEventListeners(),this.$scope.adCloseHandler&&this.$scope.adCloseHandler())},DropDownController.prototype.onClickMenuElement=function(event){var _this=this;this.closeModeAny()||(this.closeModeClick()?this.closePopup(event):($(document).off(MouseEvents.CLICK,this.onDocumentClickWrapper),this.$timeout(function(){$(document).on(MouseEvents.CLICK,_this.onDocumentClickWrapper)},10)))},DropDownController.prototype.onDocumentClick=function(event){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];this.closeModeManual()||(this.closeModeAny()?(event.preventDefault(),event.stopImmediatePropagation(),this.closePopup()):this.$scope.adCloseMode==DropDownController.CLOSE_MODE_CLICK_OUTSIDE?(event.preventDefault(),event.stopImmediatePropagation(),this.closePopup(),this.$scope.adClickOutsideCloseHandler&&this.$scope.adClickOutsideCloseHandler()):this.$scope.adCloseMode==DropDownController.CLOSE_MODE_MOUSELEAVE&&(event.preventDefault(),event.stopImmediatePropagation(),this.closePopup()))},DropDownController.prototype.onMouseEnterPopup=function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];this._isMouseOverPopup=!0},DropDownController.prototype.onMouseLeavePopup=function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];this._isMouseOverPopup=!1,this.$scope.adCloseMode==DropDownController.CLOSE_MODE_MOUSELEAVE&&(!this.openElement||this._isMouseOverPopup||this._isMouseOverTriggerElement||this.closePopup())},DropDownController.prototype.onDocumentResize=function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i]},DropDownController.prototype.getInPlace=function(){return"false"!=this.$scope.adInPlace},DropDownController.prototype.isNewCompileMode=function(){return"true"==this.$scope.adNewCompileMode},DropDownController.prototype.isDropDownDisabled=function(){return this.$scope.adDropDownDisabled},DropDownController.prototype.isMultiClickEnabled=function(){return"true"==this.$scope.adMultiClickEnabled},DropDownController.prototype.closeModeManual=function(){return this.$scope.adCloseMode==DropDownController.CLOSE_MODE_MANUAL},DropDownController.prototype.closeModeClick=function(){return!this.$scope.adCloseMode||this.$scope.adCloseMode==DropDownController.CLOSE_MODE_CLICK},DropDownController.prototype.closeModeClickOutside=function(){return this.$scope.adCloseMode==DropDownController.CLOSE_MODE_CLICK_OUTSIDE},DropDownController.prototype.closeModeAny=function(){return this.$scope.adCloseMode==DropDownController.CLOSE_MODE_CLICK_ANY},DropDownController.prototype.getDirection=function(){return this.$scope.adDirection?this.$scope.adDirection:DropDownController.DOWN},DropDownController.prototype.setCurrentDirection=function(currentDirection){Util.isDefAndNotNull(this.$scope.adCurrentDirection)&&(this.$scope.adCurrentDirection=currentDirection)},DropDownController.prototype.getHoverOpenDelayMillis=function(){var delayMs=Util.parseInt(this.$scope.adHoverOpenDelayMillis,-1);return-1!=delayMs?delayMs:0},DropDownController.prototype.getMouseleaveCloseDelayMillis=function(){var delayMs=Util.parseInt(this.$scope.adMouseleaveCloseDelayMillis,-1);return-1!=delayMs?delayMs:1e3},DropDownController.prototype.setupExternalCloseInvokeFunction=function(){var _this=this;this.$scope&&this.$scope.adCloseInvokeFunction&&(this.$scope.adCloseInvokeFunction=function(){_this.closePopup()})},DropDownController.UP="up",DropDownController.UP_CENTERED="upCentered",DropDownController.DOWN="down",DropDownController.LEFT="left",DropDownController.RIGHT="right",DropDownController.RIGHT_DOWN="rightDown",DropDownController.DOWN_LEFT="downLeft",DropDownController.DOWN_CENTERED="downCentered",DropDownController.DOWN_CENTERED_OR_UP_CENTERED="downCenteredOrUpCentered",DropDownController.OPEN_MODE_MOUSEENTER="mouseenter",DropDownController.CLOSE_MODE_CLICK="click",DropDownController.CLOSE_MODE_CLICK_OUTSIDE="clickOutside",DropDownController.CLOSE_MODE_CLICK_ANY="clickAny",DropDownController.CLOSE_MODE_MANUAL="manual",DropDownController.CLOSE_MODE_MOUSELEAVE="mouseleave",DropDownController.$inject=["$scope","$element","$rootScope","$location","injectorService","$timeout","$compile"],DropDownController}();appdynamicsModule.controller("DropDownController",DropDownController),define("app/view/components/dropdown/DropDownController",function(){});var DropDownDirective=function(){function DropDownDirective(){return{restrict:"CA",priority:1,controller:"DropDownController",scope:{adInPlace:"@",adMultiClickEnabled:"@",adOpenMode:"@",adCloseMode:"@",adDropDownDisabled:"=",adDirection:"@",adCurrentDirection:"=",adCloseInvokeFunction:"=",adCloseHandler:"=",adClickOutsideCloseHandler:"=",adDropdownOpen:"=",adOnDropDownToggle:"&",adDebug:"@",adNewCompileMode:"@",adDisableCompileOnRender:"@",adHoverOpenDelayMillis:"@",adMouseleaveCloseDelayMillis:"@",adFitToScreen:"@",adTopOffset:"@"},compile:function(element,attrs){if(attrs.adNewCompileMode){var rawElementMarkup,nextElement=element.next();nextElement&&nextElement[0]&&nextElement[0].outerHTML&&(rawElementMarkup=nextElement[0].outerHTML),nextElement.css("visibility","hidden")}return{pre:function(scope,iElement,iAttrs,controller){controller.popupRawHtmlBeforeCompile=rawElementMarkup},post:function(scope,iElement,iAttrs,controller){controller.link(scope,iElement,iAttrs)}}}}}return DropDownDirective.$inject=[],DropDownDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-drop-down-toggle"),DropDownDirective),define("app/view/components/dropdown/DropDownDirective",function(){});var SplitterComp=function(){function SplitterComp(){return{restrict:"A",replace:!1,scope:{svDisabled:"=",adHideLeft:"="},link:function(scope,iElement,attrs){function beginSplitMouse(e){if(enabled){startWidth=$(iElement).position().left;var posx=0;e||(e=window.event),e.pageX?posx=e.pageX:e.clientX&&(posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft),startX=posx,$(document).on("mousemove",splitMouseMove).on("mouseup",endSplitMouse)}}function splitMouseMove(e){e||(e=window.event);var posx=0;e.pageX?posx=e.pageX:e.clientX&&(posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);var endSize=startWidth+(posx-startX);endSize=Math.min(endSize,$(window).width()-5),endSize=Math.max(endSize,0),resplit(endSize)}function endSplitMouse(){$(document).off("mousemove",splitMouseMove).off("mouseup",endSplitMouse)}function resplit(splitterPos){if(hideLeft)return void $(iElement).next().css("left",minWidth+"px");if(minWidth>splitterPos&&(splitterPos=minWidth),$(iElement).prev().width(splitterPos),absolutePositioning){$(iElement).prev().css("right",splitterPos+"px"),$(iElement).css("left",splitterPos+"px");var rightSidePosition;rightSidePosition=isNaN(splitterPos)||0==splitterPos?0:splitterPos,$(iElement).next().css("left",rightSidePosition+"px")}scope.$parent.$parent.$broadcast(EventConstants.UEV_LAYOUT_CHANGED,splitterPos+1)}var absolutePositioning=void 0!==attrs.svUseAbsolute,minWidth=0;void 0!==attrs.adMinWidth&&(minWidth=parseInt(attrs.adMinWidth)),$(iElement).addClass("hoverable");var startX=0,startWidth=0,enabled=!scope.svDisabled,hideLeft=scope.adShowLeft;scope.$watch("svDisabled",function(){enabled=!scope.svDisabled}),scope.$watch("adHideLeft",function(){hideLeft=scope.adHideLeft,enabled&&resplit($(iElement).prev().width())}),$(iElement).addClass("vsplitbar"),$(iElement).css("background","0x123456"),absolutePositioning&&($(iElement).css("position","absolute"),$(iElement).css("z-index","3")),$(iElement).mousedown(beginSplitMouse),enabled&&resplit($(iElement).prev().width())},controller:["$rootScope",function($rootScope){this.$rootScope=$rootScope}]}}return SplitterComp}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-splitter"),SplitterComp),define("app/view/components/splitter/SplitterComp",function(){});var Accordion=function(){function Accordion(){return{restrict:"E",replace:!1,transclude:!0,scope:{svSelectedSection:"="},template:'<div style="display:table;width: 100%;height: 100%; table-layout: fixed;" class="expanded" ng-transclude></div>',link:function(scope,element){function headerClicked(child){if(openItem!=child[0]){openItem=child[0];var bodyRows=$(tableElement).children("ad-accordion-body");bodyRows.css("height","0"),bodyRows.css("max-height","0"),bodyRows.css("min-height","0"),bodyRows.css("display","none");var bodyCells=$(tableElement).children("ad-accordion-body").children();bodyCells.css("height","0"),bodyCells.css("max-height","0"),bodyCells.css("min-height","0"),bodyCells.css("overflow","hidden"),bodyCells.css("line-height","0");var selectedBody=child.next();selectedBody.css("height","100%"),selectedBody.css("max-height","100%"),selectedBody.css("min-height","100%"),selectedBody.css("display","table-row"),selectedBody.css("visibility","visible"),selectedBody.children().css("display","table-cell"),selectedBody.children().css("height",""),selectedBody.children().css("max-height",""),selectedBody.children().css("min-height",""),scope.selectedsection=child.attr("id"),scope.$root.$broadcast("layoutChanged")}}var openItem,tableElement=$(element).children().first(),headerChildren=$(tableElement).children("ad-accordion-header");if(headerChildren.each(function(index,child){return $(child).click(function(){headerClicked($(child))}),!0}),scope.$watch("svSelectedSection",function(section){var children=$(tableElement).children("ad-accordion-header");children.each(function(index,child){return $(child).attr("id")==section?(headerClicked($(child)),!1):!0})}),!scope.svSelectedSection){var children=$(tableElement).children("ad-accordion-header");children.length>0&&headerClicked(children[0])}}}}return Accordion}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-accordion"),Accordion),define("app/view/components/accordion/Accordion",function(){});var AccordionHeader=function(){function AccordionHeader(){return{restrict:"E",transclude:!0,replace:!1,template:"<div style='display:table-cell;' ng-transclude></div>",scope:{},link:function(scope,iElement){angular.element(iElement).css("display","table-row")}}}return AccordionHeader}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-accordion-header"),AccordionHeader),define("app/view/components/accordion/AccordionHeader",function(){});var AccordionBody=function(){function AccordionBody(){return{restrict:"E",transclude:!0,replace:!1,template:"<div style='display:table-cell;width:100%;height:100%;' ng-transclude></div>",scope:{},link:function(scope,iElement){angular.element(iElement).css("display","table-row")}}}return AccordionBody}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-accordion-body"),AccordionBody),define("app/view/components/accordion/AccordionBody",function(){});var AccordionHeadingPatched=function(){function AccordionHeadingPatched(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(element,attr,transclude){return function(scope,element,attr,accordionGroupCtrl){accordionGroupCtrl.setHeading(transclude(scope,function(){}))}}}}return AccordionHeadingPatched}();define("app/view/components/accordion/AccordionHeadingPatched",function(){});var Autoscroll=function(){function Autoscroll(){return{restrict:"A",scope:!0,link:function(scope,element){scope.$watch(function(){return element[0].scrollHeight},function(newValue,oldValue){var offsetHeight=element[0].offsetHeight;oldValue-offsetHeight<=element[0].scrollTop+10&&(element[0].scrollTop=newValue-offsetHeight)})}}}return Autoscroll}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-autoscroll"),Autoscroll),define("app/view/components/autoscroll/Autoscroll",function(){});var ScrollToDirective=function(){function ScrollToDirective(){return{restrict:"A",link:function(scope,iElement,attrs){var scroll=function(){iElement.parent().animate({scrollTop:iElement.position().top})};setTimeout(function(){scope.$eval(attrs.adScrollTo)&&scroll()},0),scope.$watch(attrs.adScrollTo,function(newVal,oldVal){newVal===oldVal||attrs.adDisableScroll||scroll()})}}}return ScrollToDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-scroll-to"),ScrollToDirective),define("app/view/components/scrollTo/ScrollToDirective",function(){}),define("app/view/dbMonitoring/utils/DbMonitoringUtils",["require","exports"],function(){var DbMonitoringUtils=function(){function DbMonitoringUtils(){}return DbMonitoringUtils.getErrorEventMessage=function(eventSummary){var resourceManager=AngularUtil.getADInjector().get("resourceManager"),defaultMessage=resourceManager.getString("dbmon","ms_dbAgentNotReportingData");return eventSummary&&eventSummary.severity==EventType.ERROR&&eventSummary.eventType==EventType.AGENT_EVENT&&eventSummary?eventSummary.eventSummary:defaultMessage},DbMonitoringUtils.removeUnderscoreAndCapitalize=function(input){if(!input)return"";var output=input.replace(/_/g," ");return output=output.toLowerCase().replace(/\b./g,function(a){return a.toUpperCase()})},DbMonitoringUtils.secondsToLongDateString=function(seconds){var days=seconds/86400,hours=seconds/3600%24,minutes=seconds/60%60,sec=seconds%60,retString=Math.floor(days)+"d "+Math.floor(hours)+"h "+Math.floor(minutes)+"m "+Math.floor(sec)+"s";return retString},DbMonitoringUtils.formatQueryText=function(query,insertLineBreak){if(!query)return"";var formattedQueryText=query;formattedQueryText.replace(/>/g,"&gt;"),formattedQueryText.replace(/</g,"&lt;");var prefix;return prefix=insertLineBreak?"<br>":"",_.each(DbMonitoringUtils.sqlQueryKeywordRegex,function(regex){formattedQueryText=DbMonitoringUtils.insertHtmlTag(formattedQueryText,regex.regex,regex.hasPrefix?regex.openTag+prefix:regex.openTag,DbMonitoringUtils.closeTag)}),formattedQueryText},DbMonitoringUtils.formatJsonQueryText=function(query){if(!query)return"";var jsonObject,jsonQuery;try{jsonObject=JSON.parse(query),jsonQuery=JSON.stringify(jsonObject,null,4)}catch(e){jsonQuery=query}return jsonQuery},DbMonitoringUtils.getHealthIcon=function(collectorStatus,performanceState){var health=DbMonitoringUtils.getDatabaseHealth(collectorStatus,performanceState);return ImageUtil.getSvgHealthIcon(health.toUpperCase())},DbMonitoringUtils.getDatabaseHealth=function(collectorStatus,performanceState){var health=PerformanceState.UNKNOWN;return!collectorStatus||collectorStatus!=DBCollectorStatus.UNKNOWN&&collectorStatus!=DBCollectorStatus.ERROR?performanceState&&(health=performanceState):health=PerformanceState.UNKNOWN,health},DbMonitoringUtils.isConfigError=function(collectorStatus){return collectorStatus&&collectorStatus!=DBCollectorStatus.ERROR?!1:!0},DbMonitoringUtils.isConfigStatusUnknown=function(collectorStatus){return collectorStatus&&collectorStatus==DBCollectorStatus.UNKNOWN},DbMonitoringUtils.isDBCluster=function(dbType){return dbType===DBServerType.MONGO},DbMonitoringUtils.cleanURLOnDbServerEntitySelected=function(urlParams,dbServer,isCluster){switch(isCluster?(urlParams.setParam(UrlConstants.DB_CLUSTER,"true"),urlParams.setNumberParam(UrlConstants.DATABASE_ID,dbServer.configId)):(urlParams.getParam(UrlConstants.DB_CLUSTER)&&urlParams.removeParam(UrlConstants.DB_CLUSTER),urlParams.setNumberParam(UrlConstants.DATABASE_ID,dbServer.id)),Util.isValidId(urlParams.getNumberParam(UrlConstants.DB_CLUSTER_ID))&&urlParams.removeParam(UrlConstants.DB_CLUSTER_ID),urlParams.getParam(UrlConstants.LOCATION)){case NavigationDataConstants.DB_MONITORING_QUERY_DETAILS:urlParams.removeParam(UrlConstants.LOCATION),urlParams.removeParam(UrlConstants.DB_QUERY_HASHCODE),urlParams.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_QUERY_LIST);break;case NavigationDataConstants.DB_MONITORING_TOP_ACTIVITY_REPORT:urlParams.removeParam(UrlConstants.LOCATION),urlParams.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_WAIT_REPORT);break;case NavigationDataConstants.DB_MONITORING_IO_REPORT:urlParams.removeParam(UrlConstants.LOCATION),urlParams.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_WAIT_REPORT);break;case NavigationDataConstants.DB_MONITORING_COMPARISON_REPORT:urlParams.removeParam(UrlConstants.LOCATION),urlParams.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_WAIT_REPORT);break;case NavigationDataConstants.DB_MONITORING_TOP_SQL_REPORT:urlParams.removeParam(UrlConstants.LOCATION),urlParams.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_WAIT_REPORT)}return urlParams},DbMonitoringUtils.insertHtmlTag=function(input,matcher,openTag,closeTag){for(var group,formattedQuery="",lastIndex=0;null!==(group=matcher.exec(input));)formattedQuery+=input.substring(lastIndex,group.index)+openTag+group[0]+closeTag,lastIndex=matcher.lastIndex;return formattedQuery+=input.substr(lastIndex)},DbMonitoringUtils.BYTE="byte",DbMonitoringUtils.TIME="time",DbMonitoringUtils.OVERVIEW="overview",DbMonitoringUtils.QUERIES="queries",DbMonitoringUtils.CLIENTS="clients",DbMonitoringUtils.SESSIONS="sessions",DbMonitoringUtils.NAMESPACES="namespaces",DbMonitoringUtils.DATABASES="databases",DbMonitoringUtils.SCHEMAS="schemas",DbMonitoringUtils.MODULES="modules",DbMonitoringUtils.PROGRAMS="programs",DbMonitoringUtils.DB_VENDOR="vendor",DbMonitoringUtils.DB_HOST="host",DbMonitoringUtils.DB_PORT="port",DbMonitoringUtils.DB_URL="url",DbMonitoringUtils.SESSION_NAMES={spid:"SPID",status:"Status",hostname:"Hostname",program_name:"Program Name",cmd:"Cmd",cpu:"CPU",physical_io:"Physical IO",blocked:"Blocked",db:"DB",loginame:"Login Name",login_time:"Login Time",sql_handle:"SQL Handle",text:"Text",sid:"SID","serial#":"Serial #",username:"User Name",osuser:"OS User",islocked:"Locked",sql_id:"SQL Id",prev_sql_id:"Prev SQL Id",machine:"Machine",program:"Program",logon_time:"Logon Time",event:"Event",seconds_in_wait:"Seconds in Wait",id:"Id",user:"User",host:"Host",command:"Command",time:"Time",state:"State",info:"Info",connhandle:"Conn Handle",userid:"User Id",name:"Name",temptablespacekb:"Temp Table Space KB",TempWorkSpaceKB:"Temp Work Space KB",client:"Client",transactionid:"Transaction ID",transactioncreatetime:"Transaction Create Time",versionuse:"Version Use",cmdline:"Cmd Line",pid:"PID",waiting:"Waiting",xact_start:"Xact Start",query_start:"Query Start",backend_start:"Backend Start",query:"Query",APPL_STATUS:"APPL Status",CLIENT_PID:"Client PID",CLIENT_PLATFORM:"Client Platform",CLIENT_PROTOCOL:"Client Protocol",APPL_NAME:"APPL Name",APPL_ID:"APPL Id",PRIMARY_AUTH_ID:"Primary AUTH_ID",SESSION_AUTH_ID:"Session AUTH_ID",DB_NAME:"DB Name",AGENT_ID:"Agent Id",opid:"OPID",active:"Active?",op:"Op",ns:"Namespace",desc:"Desc"},DbMonitoringUtils.NUM_CALLS_DIV_PREFIX="numCalls",DbMonitoringUtils.TIME_SPENT_DIV_PREFIX="timeSpent",DbMonitoringUtils.CPU_TIME_DIV_PREFIX="cpuTime",DbMonitoringUtils.keywordTag="<span class='ads-keyword'>",DbMonitoringUtils.redKeywordTag="<span class='ads-keyword-red'>",DbMonitoringUtils.closeTag="</span>",DbMonitoringUtils.sqlQueryKeywordRegex=[{regex:/\swhere\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!1},{regex:/select\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!0},{regex:/\shaving\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!0},{regex:/\svalues/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!0},{regex:/insert into\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!1},{regex:/update\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!1},{regex:/delete\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!1},{regex:/replace\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!1},{regex:/\sfrom\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!0},{regex:/\sand\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!0},{regex:/\sorder by\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!0},{regex:/\sgroup by\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!0},{regex:/\slimit\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!0},{regex:/\sset\s/gi,openTag:DbMonitoringUtils.keywordTag,hasPrefix:!1},{regex:/create\s/gi,openTag:DbMonitoringUtils.redKeywordTag,hasPrefix:!1},{regex:/drop\s/gi,openTag:DbMonitoringUtils.redKeywordTag,hasPrefix:!1},{regex:/alter\s/gi,openTag:DbMonitoringUtils.redKeywordTag,hasPrefix:!1}],DbMonitoringUtils.OBJECT_BROWSER_GRID_COLUMN_HEADERS={db:"Database",indexSize:"Index Size",dataSize:"Data Size"},DbMonitoringUtils
}();return adComponentsModule.filter("adDbObjectBrowserLabel",function(){return function(input){return DbMonitoringUtils.removeUnderscoreAndCapitalize(input)}}),DbMonitoringUtils});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/mainNav/titleBar/MainTitleBarController",["require","exports","app/view/dbMonitoring/utils/DbMonitoringUtils"],function(require,exports,DbMonitoringUtils){var MainTitleBarController=function(_super){function MainTitleBarController($scope,resourceManager,notificationService,navigationUiService,$rootScope,masterService,notificationConfigService,navigationService,userUiService,userPreferenceUiService,AppConfig,injectorService,homeViewService,userService,notificationCenterService,apiLoggerService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.navigationUiService=navigationUiService,this.$rootScope=$rootScope,this.masterService=masterService,this.notificationConfigService=notificationConfigService,this.navigationService=navigationService,this.userUiService=userUiService,this.userPreferenceUiService=userPreferenceUiService,this.AppConfig=AppConfig,this.injectorService=injectorService,this.homeViewService=homeViewService,this.userService=userService,this.notificationCenterService=notificationCenterService,this.apiLoggerService=apiLoggerService,this.isAdminUi=!1,this.doFetchMainNavConfig=!1,this.showDebuggerMenuItem=!1,this.showBackNextButtons=!1,this.includeTimeRange=!1,this.maximumAllowableTimeRangeDurationInMinutes=-1,this.showRefreshOnRight=!0,this.showBaselineSelector=!1,this.baselinesConfig=null,this.showCustomTimeRange=!1,this.dateFrom=null,this.dateTo=null,this.adEumWebLiteEnabled=!1,this.adEumMobileLiteEnabled=!1,this.forceShowAllTimeRangeOptions=!1,this.helpLinkCurrentScreen=null,this.videoLinkCurrentScreen=null,this.disableDefaultDeepLinkCopy=!1,this.showEvalToolbar=!1,this.navigationState=NavigationService.instance().navigationState,this.helpPopUpsEnabled=!1,this.showGettingStartedSection=!0,this.showAgentInstallWizard=!0,this.showApplicationSelector=!1,this.showOnyApmAppsInAppSelector=!1,this.disableApplicationSelector=!1,this.showApplicationQuickNavButton=!1,this.applicationIdOnUrl=-1,this.mobileAppSelectorMode=!1,this.helpBubbleEnabled=null,this.isProductTourInProgress=!1,this.showBetaIndicator=!1,this.showAnalayticsScopeSelector=!1,this.showEntityDropDownSelector=!1,this.entityDropDownSelectorEntityType=null,this.topMenuOptionsControllers=[],this.adqlDebugTabSelected=!1,this._isCurrentLocationHtml=!1,MainTitleBarController._instance=this,$scope.$watch("AppConfig.debugMode",function(){_this.showDebuggerMenuItem=AppConfig.debugMode}),$scope.$watch("controller.showBaselineSelector",function(showConfig){showConfig&&_this.initBaselineConfig()}),$scope.controller=this,$scope.$on(MasterService.UEV_LOGIN_EVENT,function(){_this.init()}),$scope.$on(MasterService.UEV_INIT_DATA_FETCHED,function(){_this.helpPopUpsEnabled=!_this.userService.getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.HELP_BUBBLE_ALL_ITEMS_DISABLED)}),EventBusService.instance().registerEventListener(UserService.UEV_GENERAL_USER_PREFERENCES_FETCHED,function(){_this.helpPopUpsEnabled=!_this.userService.getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.HELP_BUBBLE_ALL_ITEMS_DISABLED),_this.showQuestsToolbar=_this.userService.getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.SHOW_QUESTS_BAR)},$scope),EventBusService.instance().registerEventListener(EventConstants.UEV_LOCATION_BAR_DATA_SET_BY_FLEX,this.on_UEV_LOCATION_BAR_DATA_SET_BY_FLEX.bind(this),$scope),EventBusService.instance().registerEventListener(EventConstants.UEV_LOCATION_BAR_CONFIG_SET_BY_HTML,this.on_UEV_LOCATION_BAR_CONFIG_SET_BY_HTML.bind(this),$scope),EventBusService.instance().registerEventListener(MainTitleBarController.UEV_QUESTS_TOOLBAR_TOGGLE,function(showQuestsToolbar){_this.showQuestsToolbar=showQuestsToolbar},$scope),this.$scope.$on(TimeRangeService.UEV_TIME_RANGE_CHANGE_TR_SERVICE,function(event){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];_this.on_UEV_TIME_RANGE_CHANGE_TR_SERVICE(event,args[0])}),this.$scope.$on(TimeRangeService.TIMERANGE_AUTOREFRESH_EVENT,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];_this.isCurrentLocationHtml()||FlashService.instance().onAutoRefreshFromHtml()}),this.$scope.$on(ApplicationSelectorController.UEV_APPLICATION_SELECTED,function(event,args){if(_this.showApplicationSelector&&args){var appSelected=args;if(appSelected&&Util.isValidId(appSelected.id)){var urlParams=URLParams.getCurrentUrlParams();urlParams.setNumberParam(UrlConstants.APPLICATION_ID,appSelected.id),NavigationService.instance().navigateTo(urlParams.toString())}}}),this.$scope.$on(ApplicationSelectorController.UEV_MOBILE_APPLICATION_SELECTED,function(event,args){if(_this.showApplicationSelector&&_this.mobileAppSelectorMode&&args){var mobileAppSelected=args;if(mobileAppSelected&&Util.isValidId(mobileAppSelected.id)){var urlParams=URLParams.getCurrentUrlParams();urlParams.setNumberParam("mobileApp",mobileAppSelected.id),urlParams.setParam("platform",mobileAppSelected.platform),NavigationService.instance().navigateTo(urlParams.toString())}}}),this.$scope.$on(EntityDropDownSelectorController.UEV_DROP_DOWN_ENTITY_SELECTED,function(event,args){if(_this.showEntityDropDownSelector&&args){var configObject=args;if(configObject&&Util.isValidId(configObject.id)){var urlParams=URLParams.getCurrentUrlParams();if(_this.entityDropDownSelectorEntityType==EntityType.APPLICATION_COMPONENT_NODE)urlParams.setNumberParam(UrlConstants.NODE_ID,configObject.id),NodeViewService.instance().validateNodeDashboardTabForURL(urlParams,configObject).then(function(validated){validated||urlParams.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_NODE_MANAGER),NavigationService.instance().navigateTo(urlParams.toString())});else{if(_this.entityDropDownSelectorEntityType==EntityType.APPLICATION_COMPONENT)urlParams.setNumberParam(UrlConstants.COMPONENT_ID,configObject.id),ComponentViewService.instance().validateTierDashboardTabForURL(urlParams,configObject)||urlParams.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_COMPONENT_MANAGER);else if(_this.entityDropDownSelectorEntityType==EntityType.BUSINESS_TRANSACTION)urlParams.setNumberParam(UrlConstants.BUSINESS_TRANSACTION_ID,configObject.id);else if(_this.entityDropDownSelectorEntityType==EntityType.DB_SERVER){var isCluster=DbMonitoringUtils.isDBCluster(configObject.type);urlParams=DbMonitoringUtils.cleanURLOnDbServerEntitySelected(urlParams,configObject,isCluster)}else _this.entityDropDownSelectorEntityType==EntityType.BASE_PAGE&&urlParams.setNumberParam(UrlConstants.APPLICATION_DIAGNOSTIC_DATA_ID,configObject.id);NavigationService.instance().navigateTo(urlParams.toString())}}}}),EventBusService.instance().registerEventListener(NavigationService.UEV_NAV_ACTION_HTML,function(){_this.on_UEV_NAV_ACTION()},this.$scope),EventBusService.instance().registerEventListener(NavigationService.UEV_NAV_ACTION_FLASH,function(){_this.on_UEV_NAV_ACTION()},this.$scope),EventBusService.instance().registerEventListener(ProductTourService.UEV_PRODUCT_TOUR_STARTED,function(){_this.isProductTourInProgress=!0},this.$scope),this.init(),this.$scope.$on("UEV_ANALYTICS_TAB_SELECTED",function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];_this.adqlDebugTabSelected=args[0]})}return __extends(MainTitleBarController,_super),MainTitleBarController.instance=function(){return MainTitleBarController._instance},MainTitleBarController.prototype.setDisableDefaultDeepLinkCopy=function(val){this.disableDefaultDeepLinkCopy=val,_.each(this.topMenuOptionsControllers,function(topMenuOptionsController){topMenuOptionsController.disableDefaultDeepLinkCopy=val})},MainTitleBarController.prototype.link=function(scope,iElement){this.element=iElement},MainTitleBarController.prototype.init=function(){var _this=this;this.masterService.onInitDataFetch().then(function(){_this.isAdminUi=_this.injectorService.appConfig().admin;var isSharedDashboardPageWithToken=_this.masterService.isSharedDashboardPageRequestWithToken();_this.showGettingStartedSection=!isSharedDashboardPageWithToken&&!_this.isAdminUi,_this.showAgentInstallWizard=_this.showGettingStartedSection&&MasterService.instance().isPermissionEnabled(PermissionAction.ADMINISTER_RBAC),_this.processMainNavConfig(MasterService.instance().initData.mainNavConfig)}),this.showDebuggerMenuItem=this.AppConfig&&this.AppConfig.debugMode,this.showRefreshOnRight=!this.showBackNextButtons,this.initTimeRange()},MainTitleBarController.prototype.initTimeRange=function(){this.timeRange=TimeRangeService.instance().currentTimeRange,this.timeRange.type===TimeRangeSpecifierType.BETWEEN_TIMES?(this.showCustomTimeRange=!0,this.dateFrom=this.timeRange.startTime,this.dateTo=this.timeRange.endTime):this.showCustomTimeRange=!1},MainTitleBarController.prototype.processMainNavConfig=function(mainNavConfig){this.mainNavConfig=mainNavConfig,this.isProMode=this.masterService.getProductMode(this.mainNavConfig.accountEdition)===MasterService.PRODUCT_PRO_MODE},MainTitleBarController.prototype.onBackClick=function(){NavigationHistoryService.instance().goBackInHistory()},MainTitleBarController.prototype.onForwardClick=function(){NavigationHistoryService.instance().goForwardInHistory()},MainTitleBarController.prototype.onRefreshClick=function(){this.isCurrentLocationHtml()?_.isFunction(this.refreshCallbackFunctionHtml)&&this.refreshCallbackFunctionHtml.apply(null):FlashService.instance().onRefreshFromHtml()},MainTitleBarController.prototype.on_UEV_TIME_RANGE_CHANGE_TR_SERVICE=function(){this.initTimeRange(),this.isCurrentLocationHtml()||FlashService.instance().onTimeRangeChangeFromHtml()},MainTitleBarController.prototype.on_UEV_LOCATION_BAR_CONFIG_SET_BY_HTML=function(data){this._isCurrentLocationHtml=!0;var config=data;this.helpLinkCurrentScreen=config.helpLink,this.videoLinkCurrentScreen=config.videoLink,this.includeTimeRange=Util.isDefAndNotNull(config.hideTimeRange)?!config.hideTimeRange:!0,this.maximumAllowableTimeRangeDurationInMinutes=Util.isDefAndNotNull(config.maximumAllowableTimeRangeDurationInMinutes)?config.maximumAllowableTimeRangeDurationInMinutes:-1,this.showRefreshOnRight=Util.isDefAndNotNull(config.hideRefresh)?!config.hideRefresh&&!this.showBackNextButtons:!this.showBackNextButtons,_.isFunction(config.onRefreshFunction)&&(this.refreshCallbackFunctionHtml=config.onRefreshFunction),Util.isDefAndNotNull(config.showBaselineSelector)&&(this.baselinesConfig=config.baselinesConfig,this.showBaselineSelector=config.showBaselineSelector),ViewUtil.safeDigest(this.$scope)},MainTitleBarController.prototype.on_UEV_LOCATION_BAR_DATA_SET_BY_FLEX=function(flexLocationBarConfig){this._isCurrentLocationHtml=!1,this.includeTimeRange=flexLocationBarConfig.showTimeRange,this.showBaselineSelector=flexLocationBarConfig.showBaselineSelector,this.helpLinkCurrentScreen=flexLocationBarConfig.helpLink,this.videoLinkCurrentScreen=flexLocationBarConfig.videoLink,ViewUtil.safeDigest(this.$scope)},MainTitleBarController.prototype.on_UEV_NAV_ACTION=function(){var urlParams=URLParams.getCurrentUrlParams(),currentLocation=urlParams.location(),isEumMobileLocation=NavigationService.instance().isEumMobileLocation(currentLocation),showEumMobileAppSelector=isEumMobileLocation&&!AppConfig.instance().eumTopLevelNavZoneEnabled;this.showApplicationSelector=NavigationService.instance().isAlertAndRespondAppLocation(currentLocation)||showEumMobileAppSelector||currentLocation==NavigationDataConstants.REPORTS_APP_ON_DEMAND,this.showOnyApmAppsInAppSelector=this.showApplicationSelector&&currentLocation==NavigationDataConstants.REPORTS_APP_ON_DEMAND,this.disableApplicationSelector=_.contains(MainTitleBarController.DISABLED_APP_SELECTOR_LOCATIONS,currentLocation),this.showApplicationQuickNavButton=NavigationService.instance().isAlertAndRespondAppLocation(currentLocation),this.mobileAppSelectorMode=isEumMobileLocation,this.showAnalayticsScopeSelector=-1!=[NavigationDataConstants.ANALYTICS_LOGS,NavigationDataConstants.ANALYTICS_TRANSACTIONS,NavigationDataConstants.ANALYTICS_USER_WEB_ACTIVITY,NavigationDataConstants.ANALYTICS_USER_MOBILE_ACTIVITY].indexOf(currentLocation),this.navigationService.isTierDashLocation(urlParams)?(this.showEntityDropDownSelector=!0,this.entityDropDownSelectorEntityType=EntityType.APPLICATION_COMPONENT):this.navigationService.isBtDashLocation(urlParams)?(this.showEntityDropDownSelector=!0,this.entityDropDownSelectorEntityType=EntityType.BUSINESS_TRANSACTION):this.navigationService.isNodeDashLocation(urlParams)?(this.showEntityDropDownSelector=!0,this.entityDropDownSelectorEntityType=EntityType.APPLICATION_COMPONENT_NODE):this.navigationService.isDatabaseDetailsLocation(urlParams)?(this.showEntityDropDownSelector=!0,this.entityDropDownSelectorEntityType=EntityType.DB_SERVER):urlParams.location()==NavigationDataConstants.EUM_PAGE_DASHBOARD||urlParams.location()==NavigationDataConstants.EUM_PAGE_BROWSER_SNAPSHOTS?(this.showEntityDropDownSelector=!0,this.entityDropDownSelectorEntityType=EntityType.BASE_PAGE):(this.showEntityDropDownSelector=!1,this.entityDropDownSelectorEntityType=null),this.applicationIdOnUrl=URLParams.getCurrentUrlParams().applicationId();var urlParams=URLParams.getCurrentUrlParams();this.helpBubbleEnabled=isEumMobileLocation?MainTitleBarController.HELP_BUBBLE_ENABLED_MOBILE_APP_SELECTOR:this.navigationService.getTopLevelNavCurrent()==NavigationService.TOP_LEVEL_NAV_APPLICATIONS&&urlParams.location()!=NavigationDataConstants.APPS_ALL_DASHBOARD&&urlParams.location()!=NavigationDataConstants.APP_DASHBOARD?MainTitleBarController.HELP_BUBBLE_ENABLED_LOCATION_BAR:NavigationService.instance().getTopLevelNavCurrent()==NavigationService.TOP_LEVEL_NAV_ALERT_RESPOND?MainTitleBarController.HELP_BUBBLE_ENABLED_APP_SELECTOR:null,this.showBetaIndicator=this.isLocationBeta(currentLocation),this.isQuestsLocation=NavigationService.instance().isQuestsLocation()},MainTitleBarController.prototype.onApplyCustomTimeRange=function(){var timeRangeSpecifier={};timeRangeSpecifier.type=TimeRangeSpecifierType.BETWEEN_TIMES,timeRangeSpecifier.startTime=this.dateFrom,timeRangeSpecifier.endTime=this.dateTo,timeRangeSpecifier.durationInMinutes=0,timeRangeSpecifier.startTime.getTime()>timeRangeSpecifier.endTime.getTime()?NotificationService.instance().displayError(resourceManager.getString("ui","ms_startTimeCannotBeLaterThanEndTime"),""):(timeRangeSpecifier.startTime.setSeconds(0),timeRangeSpecifier.endTime.setSeconds(0),TimeRangeService.instance().changeTimeRange(timeRangeSpecifier))},MainTitleBarController.prototype.onSaveCustomTimeRange=function(){TimeRangeService.instance().viewSaveCustomTimeRange(this.dateFrom,this.dateTo)},MainTitleBarController.prototype.onToggleNotificationCenter=function(){this.notificationCenterService.togglePanel()},MainTitleBarController.prototype.onDebug=function(){var modalSettings={};modalSettings.controllerPath="app/view/common/dialogs/Debugger/DebuggerDialogController",modalSettings.templateUrl="app/view/common/dialogs/Debugger/DebuggerDialog.html",DialogService.instance().openDialogAsync(modalSettings)},MainTitleBarController.prototype.onFeedback=function(){var mailtoLink="mailto:ux-feedback@appdynamics.com";window.open(mailtoLink,"Email AppDynamics")},MainTitleBarController.prototype.onCaptureClick=function(){CustomDashboardViewService.instance().viewCreateReportModal()},MainTitleBarController.prototype.onDocsForCurrentScreen=function(){ExternalUrls.openHelp(this.helpLinkCurrentScreen)},MainTitleBarController.prototype.onVideoForCurrentScreen=function(){ExternalUrls.openHelp(this.videoLinkCurrentScreen)},MainTitleBarController.prototype.onCopyLinkClick=function(){this.disableDefaultDeepLinkCopy||WebUtil.copyToClipboard(InjectorService.instance().$location().absUrl()),this.$rootScope.$broadcast(App.UEV_COPY_LINK_TO_CLIPBOARD)},MainTitleBarController.prototype.onCopyLinkFixedTimeRange=function(){if(!this.disableDefaultDeepLinkCopy){var timeRangeSpecifierFixedTimeRange=DateTimeUtil.convertToBetweenTimes(TimeRangeService.instance().currentTimeRange),timeRangeFixedString=TimeRangeService.instance().convertToPreferenceString(timeRangeSpecifierFixedTimeRange,"."),urlParamsWithFixedTimeRange=URLParams.getCurrentUrlParams();urlParamsWithFixedTimeRange.setParam(UrlConstants.TIME_RANGE,timeRangeFixedString);var newPath="/"+urlParamsWithFixedTimeRange.toStringNoForwardSlash(),currentPath=InjectorService.instance().$location().path(),currentAbsUrl=InjectorService.instance().$location().absUrl(),absUrlWithFixedTime=currentAbsUrl.replace(currentPath,newPath);WebUtil.copyToClipboard(absUrlWithFixedTime)}this.$rootScope.$broadcast(App.UEV_COPY_LINK_TO_CLIPBOARD)},MainTitleBarController.prototype.onCopyLocationPath=function(){},MainTitleBarController.prototype.onCopyLinkWithAuth=function(){!this.disableDefaultDeepLinkCopy,this.$rootScope.$broadcast(App.UEV_COPY_LINK_TO_CLIPBOARD)},MainTitleBarController.prototype.onSetCurrentLocationAsDefaultLandingScreen=function(){this.injectorService.masterService().setCurrentLocationAsDefaultLandingScreen()},MainTitleBarController.prototype.onToggleTopMenuBar=function(){NavigationService.instance().setTopMenuBarMinimized(!this.navigationState.isTopMenuBarMinimized)},MainTitleBarController.prototype.openDocumentation=function(){var docLink=this.getDocAndVideoLinks()[0];this.openURL(docLink)},MainTitleBarController.prototype.openCommunity=function(){this.openURL(ExternalUrls.COMMUNITY)},MainTitleBarController.prototype.openOpsCentral=function(){this.openURL(ExternalUrls.OPSCENTRAL)},MainTitleBarController.prototype.openSupport=function(){this.openURL(ExternalUrls.SUPPORT)},MainTitleBarController.prototype.openMyAccount=function(){this.openURL(ExternalUrls.MY_APPDYNAMICS_ACCOUNT)},MainTitleBarController.prototype.onAboutAppDynamics=function(){DialogService.instance().showDialog("","app/view/common/dialogs/AboutDialog/AboutDialogController","app/view/common/dialogs/AboutDialog/AboutDialog.html")},MainTitleBarController.prototype.openURL=function(url){window.open(url,"_blank")},MainTitleBarController.prototype.openMyPreferences=function(){HomeViewService.instance().viewUserPreferences()},MainTitleBarController.prototype.onEnableHelpPopups=function(enabled){this.helpPopUpsEnabled=enabled,UserService.instance().setHelpBubblesEnabled(enabled)},MainTitleBarController.prototype.onGettingStarted=function(){this.homeViewService.viewGettingStarted()},MainTitleBarController.prototype.onProductTour=function(){this.homeViewService.viewProductTour()},MainTitleBarController.prototype.onVideos=function(){var videoLink=this.getDocAndVideoLinks()[1];this.openURL(videoLink)},MainTitleBarController.prototype.onWhatsNewInTheUI=function(){this.openURL(ExternalUrls.HELP_URL_WHATS_NEW_IN_UI)},MainTitleBarController.prototype.onExportControllerLogs=function(){WebUtil.loadFileDownloadURL("/controller/FileUploadServlet?action=CONTROLLER_LOGS")},MainTitleBarController.prototype.initBaselineConfig=function(){var _this=this;if(Util.isUndefOrNull(this.baselinesConfig)){var promise=BaselineUiService.instance().getDefaultBaseline(this.applicationIdOnUrl);promise.then(function(response){_this.baselinesConfig={applicationId:_this.applicationIdOnUrl,selectedBaseline:null,defaultBaseline:BaselineUiService.instance().getDefaultBaseline_response(response),navLocation:URLParams.getCurrentUrlParams().location()}})}},MainTitleBarController.prototype.onQuestsBarToggle=function(){this.showQuestsToolbar=!this.showQuestsToolbar,EventBusService.instance().dispatchEvent(MainTitleBarController.UEV_QUESTS_TOOLBAR_TOGGLE,this.showQuestsToolbar)},MainTitleBarController.prototype.getDocAndVideoLinks=function(){var docLink=ExternalUrls.HELP_URL_ROOT,videoLink=ExternalUrls.VIDEO_ROOT,topLevelNav=NavigationService.instance().getTopLevelNavCurrent();return topLevelNav==NavigationService.TOP_LEVEL_NAV_APPLICATIONS?(docLink=ExternalUrls.HELP_URL_APM_ROOT,videoLink=ExternalUrls.VIDEO_APM_ROOT):topLevelNav==NavigationService.TOP_LEVEL_NAV_EUM?NavigationService.instance().isEumMobileLocation(URLParams.getCurrentUrlParams().location())?(docLink=ExternalUrls.HELP_URL_EUM_MOBILE_ROOT,videoLink=ExternalUrls.VIDEO_EUM_MOBILE_ROOT):(docLink=ExternalUrls.HELP_URL_EUM_WEB_ROOT,videoLink=ExternalUrls.VIDEO_EUM_WEB_ROOT):topLevelNav==NavigationService.TOP_LEVEL_NAV_DB_MONITORING?(docLink=ExternalUrls.HELP_URL_DATABASES_ROOT,videoLink=ExternalUrls.VIDEO_DATABASES_ROOT):topLevelNav==NavigationService.TOP_LEVEL_NAV_SERVER_MONITORING?(docLink=ExternalUrls.HELP_URL_SERVERS_ROOT,videoLink=ExternalUrls.VIDEO_SERVERS_ROOT):topLevelNav==NavigationService.TOP_LEVEL_NAV_ANALYTICS?(docLink=ExternalUrls.HELP_URL_ANALYTICS_ROOT,videoLink=ExternalUrls.VIDEO_ANALYTICS_ROOT):topLevelNav==NavigationService.TOP_LEVEL_NAV_DASHBOARD?(docLink=ExternalUrls.HELP_URL_DASHBOARDS_ROOT,videoLink=ExternalUrls.VIDEO_DASHBOARDS_ROOT):topLevelNav==NavigationService.TOP_LEVEL_NAV_REPORTS?(docLink=ExternalUrls.HELP_URL_REPORTS_ROOT,videoLink=ExternalUrls.VIDEO_REPORTS_ROOT):topLevelNav==NavigationService.TOP_LEVEL_NAV_INFRASTRUCTURE?(docLink=ExternalUrls.HELP_URL_CLOUD_AUTO_SCALING_ROOT,videoLink=ExternalUrls.VIDEO_CLOUD_AUTO_SCALING_ROOT):topLevelNav==NavigationService.TOP_LEVEL_NAV_SETTINGS&&(docLink=ExternalUrls.HELP_URL_SETTINGS_ROOT,videoLink=ExternalUrls.VIDEO_SETTINGS_ROOT),this.helpLinkCurrentScreen&&(docLink=this.helpLinkCurrentScreen),this.videoLinkCurrentScreen&&(videoLink=this.videoLinkCurrentScreen),[docLink,videoLink]},MainTitleBarController.prototype.isLocationBeta=function(location){return _.contains(MainTitleBarController.BETA_LOCATIONS,location)},MainTitleBarController.prototype.isCurrentLocationHtml=function(){return this._isCurrentLocationHtml},MainTitleBarController.DEFAULT_TOP_BANNER_PATH="images/topMenuBar/banner_ad_600x34.png",MainTitleBarController.BANNER_AD_TIMEOUT=5e3,MainTitleBarController.UEV_QUESTS_TOOLBAR_TOGGLE="UEV_QUESTS_TOOLBAR_TOGGLE",MainTitleBarController.HELP_BUBBLE_ENABLED_LOCATION_BAR="HELP_BUBBLE_ENABLED_LOCATION_BAR",MainTitleBarController.HELP_BUBBLE_ENABLED_APP_SELECTOR="HELP_BUBBLE_ENABLED_APP_SELECTOR",MainTitleBarController.HELP_BUBBLE_ENABLED_MOBILE_APP_SELECTOR="HELP_BUBBLE_ENABLED_MOBILE_APP_SELECTOR",MainTitleBarController.DISABLED_APP_SELECTOR_LOCATIONS=[NavigationDataConstants.EUM_REQUEST_DASHBOARD,NavigationDataConstants.EUM_CRASH_DETAILS,NavigationDataConstants.EUM_REQUEST_SNAPSHOT_DETAILS,NavigationDataConstants.EUM_CRASH_GROUP_DASHBOARD],MainTitleBarController.BETA_LOCATIONS=[],MainTitleBarController.$inject=["$scope","resourceManager","notificationService","navigationUiService","$rootScope","masterService","notificationConfigService","navigationService","userUiService","userPreferenceUiService","AppConfig","injectorService","homeViewService","userService","notificationCenterService","apiLoggerService"],MainTitleBarController}(ControllerBase);return MainTitleBarController}),define("app/view/components/locationBar/AppLocationBar",["require","exports","app/view/mainNav/titleBar/MainTitleBarController"],function(require,exports,MainTitleBarController){var AppLocationBar=function(){function AppLocationBar($compile,$timeout){return{restrict:"EA",transclude:!0,templateUrl:"app/view/components/locationBar/AppLocationBar.html",replace:!1,scope:{appname:"@",refresh:"&",includeTimeRange:"@",adEumWebLiteEnabled:"@",adEumMobileLiteEnabled:"@",forceShowAllTimeRangeOptions:"@",includeFullScreenButton:"@",hideHomeIcon:"@",hideNavIcons:"@",adHelpLink:"@",adVideoLink:"@",hideCopyDeepLinkIcon:"@",disableDefaultDeepLinkCopy:"@",svShowBaseline:"@",svBaselinesConfig:"=",svLocationEntries:"="},controller:"AppLocationBarController",link:function(scope,iElement){function addLocationEntries(){var barElWidth=locationBarContainer.width(),usedWidth=appListIconWidth,numEls=locationBarEntryElements.length;remainingLocationEntries=angular.copy(storedLocationEntries),locationBarContainer.append(appListIconElement),usedWidth=addLocationEntry(appListIconElement,locationBarEntryElements[numEls-1],locationBarSeparatorElements[numEls-1],barElWidth,usedWidth),usedWidth=addLocationEntry(appListIconElement,locationBarEntryElements[0],locationBarSeparatorElements[0],barElWidth,usedWidth);for(var i=numEls-2;i>0;i--)usedWidth=addLocationEntry(locationBarEntryElements[0],locationBarEntryElements[i],locationBarSeparatorElements[i],barElWidth,usedWidth)}function addLocationEntry(priorEl,locEntryEl,locSepEl,barElWidth,usedWidth){var newElWidth=locatonBarSeparatorWidth;return usedWidth>=barElWidth?usedWidth:(locSepEl.eq(0).insertAfter(priorEl.eq(0)),locEntryEl.eq(0).insertAfter(locSepEl.eq(0)),newElWidth+=locEntryEl.width(),usedWidth+=newElWidth,usedWidth>=barElWidth-ellipsisWidth-locatonBarSeparatorWidth-5?(scope.remainingLocationEntries=remainingLocationEntries,locEntryEl.detach(),ellipsisElement.eq(0).insertAfter(locSepEl.eq(0)),usedWidth=barElWidth):remainingLocationEntries=_.filter(remainingLocationEntries,function(entry){return entry.label!==$.trim(locEntryEl.text())}),usedWidth)}function constructLocationEntries(locationEntries,scope){for(var locationEntryElements=[],i=0,size=locationEntries.length;size>i;i++)!function(currentIndex){var newEl,locationBarEntryConfig=locationEntries[currentIndex],fnName="locationFn"+currentIndex,isLastEntry=currentIndex===size-1;scope[fnName]=function(fnArg){_.isFunction(locationBarEntryConfig.clickFn)&&locationBarEntryConfig.clickFn.apply(null,Util.getArray(fnArg))},newEl=constructLocationEntry(locationBarEntryConfig.label,fnName,locationBarEntryConfig.fnArg,scope,isLastEntry),locationEntryElements.push(newEl)}(i);return locationEntryElements}function constructLocationEntry(label,fnName,fnArg,scope,lastEntry){var template='<ad-locationbarentry label="'+label+'" ng-click="'+fnName+"('"+fnArg+"')\"";return lastEntry&&(template+=' selected="true"'),template+="></ad-locationbarentry>",$compile(template)(scope)}function constructSeparator(scope){return $compile("<ad-locationbarseparator></ad-locationbarseparator>")(scope)}function constructAppList(scope){return $compile("<ad-locationbarentry-apps-list></ad-locationbarentry-apps-list>")(scope)}function constructEllipsisEl(scope){return $compile('<ad-locationbarellipsis sv-location-entries="remainingLocationEntries"></ad-locationbarellipsis>')(scope)}var storedLocationEntries=null,remainingLocationEntries=null,locatonBarSeparatorWidth=24,appListIconWidth=24,ellipsisWidth=12,appListIconElement=constructAppList(scope),ellipsisElement=constructEllipsisEl(scope),locationBarContainer=$(".adsLocationBarBreadcrumbContainer"),locationBarEntryElements=null,locationBarSeparatorElements=null;scope.$watch("svLocationEntries",function(locationEntries){locationEntries&&(locationBarContainer.children().each(function(){$(this).detach()}),storedLocationEntries=locationEntries,locationBarEntryElements=constructLocationEntries(locationEntries,scope),locationBarSeparatorElements=_.map(locationEntries,function(){return constructSeparator(scope)}),$timeout(function(){addLocationEntries()},1))}),scope.$watch("refresh",function(refreshCallbackFn){_.isFunction(refreshCallbackFn)&&(MainTitleBarController.instance().refreshCallbackFunctionHtml=refreshCallbackFn)}),MainTitleBarController.instance().includeTimeRange="true"==scope.includeTimeRange,scope.$watch("includeTimeRange",function(includeTimeRange){MainTitleBarController.instance().includeTimeRange="true"==includeTimeRange}),MainTitleBarController.instance().showBaselineSelector="true"==scope.svShowBaseline,scope.$watch("svShowBaseline",function(svShowBaseline){MainTitleBarController.instance().showBaselineSelector="true"==svShowBaseline}),MainTitleBarController.instance().baselinesConfig=scope.svBaselinesConfig,scope.$watch("svBaselinesConfig",function(svBaselinesConfig){MainTitleBarController.instance().baselinesConfig=svBaselinesConfig}),MainTitleBarController.instance().adEumWebLiteEnabled="true"==scope.adEumWebLiteEnabled,scope.$watch("adEumWebLiteEnabled",function(adEumWebLiteEnabled){MainTitleBarController.instance().adEumWebLiteEnabled="true"==adEumWebLiteEnabled}),MainTitleBarController.instance().adEumMobileLiteEnabled="true"==scope.adEumMobileLiteEnabled,scope.$watch("adEumMobileLiteEnabled",function(adEumMobileLiteEnabled){MainTitleBarController.instance().adEumMobileLiteEnabled="true"==adEumMobileLiteEnabled}),MainTitleBarController.instance().forceShowAllTimeRangeOptions="true"==scope.forceShowAllTimeRangeOptions,scope.$watch("forceShowAllTimeRangeOptions",function(forceShowAllTimeRangeOptions){MainTitleBarController.instance().forceShowAllTimeRangeOptions="true"==forceShowAllTimeRangeOptions}),MainTitleBarController.instance().helpLinkCurrentScreen=scope.adHelpLink,scope.$watch("adHelpLink",function(adHelpLink){MainTitleBarController.instance().helpLinkCurrentScreen=adHelpLink}),MainTitleBarController.instance().videoLinkCurrentScreen=scope.adVideoLink,scope.$watch("adVideoLink",function(adVideoLink){MainTitleBarController.instance().videoLinkCurrentScreen=adVideoLink}),MainTitleBarController.instance().setDisableDefaultDeepLinkCopy("true"==scope.disableDefaultDeepLinkCopy),scope.$watch("disableDefaultDeepLinkCopy",function(disableDefaultDeepLinkCopy){MainTitleBarController.instance().setDisableDefaultDeepLinkCopy("true"==disableDefaultDeepLinkCopy)}),scope.$on("layoutChanged",function(){scope.svLocationEntries&&(locationBarContainer.children().each(function(){$(this).detach()}),$timeout(function(){addLocationEntries()},1))}),scope.$watch("canGotoPreviousLocation",function(value){value()===!0?$(iElement).children(".applocationbar").children("a:nth-child(2)").removeClass("disabled"):$(iElement).children(".applocationbar").children("a:nth-child(2)").addClass("disabled")}),scope.$watch("canGotoForwardLocation",function(value){value()===!0?$(iElement).children(".applocationbar").children("a:nth-child(3)").removeClass("disabled"):$(iElement).children(".applocationbar").children("a:nth-child(3)").addClass("disabled")})}}}return AppLocationBar}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-applocationbar"),AppLocationBar)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AppLocationBarController=function(_super){function AppLocationBarController($scope,$rootScope,resourceManager,notificationService,injectorService,$location,$element,navigationHistoryService,timeRangeService,navigationService,userUiService,AppConfig,homeViewService){function createCustomTimeRange(){var panel=this.up("panel"),name=panel.down("textfield[name=name]").value,desc=panel.down("textfield[name=desc]").value;this.up("form").isValid()&&(timeRangeService.createCustomTimeRange({name:name,description:desc,timeRange:{type:TimeRangeSpecifierType.BETWEEN_TIMES,durationInMinutes:0,startTime:$scope.dateFrom.getTime(),endTime:$scope.dateTo.getTime()}}),panel.close())}function on_UEV_TIME_RANGE_CHANGE(e,timeRangeSpecifier){$scope.showCustomRange=timeRangeSpecifier.type===TimeRangeSpecifierType.BETWEEN_TIMES?!0:!1,$scope.dateFrom=timeRangeSpecifier.startTime,$scope.dateTo=timeRangeSpecifier.endTime}_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.$location=$location,this.$element=$element,this.navigationHistoryService=navigationHistoryService,this.timeRangeService=timeRangeService,this.navigationService=navigationService,this.userUiService=userUiService,this.AppConfig=AppConfig,this.homeViewService=homeViewService,this.$scope.controller=this,$scope.onHomeClick=function(){if(AppConfig.admin){var params=new URLParams($location.path());
params.setParam("location",NavigationDataConstants.ADMIN_HOME),navigationService.navigateTo(params.toString())}else homeViewService.goToHome()},$scope.onBackClick=function(){navigationHistoryService.goBackInHistory()},$scope.onForwardClick=function(){navigationHistoryService.goForwardInHistory()},$scope.onRefreshClick=function(){null!==$scope.refresh&&$scope.refresh()},$scope.onFullScreenClick=function(){BrowserUtils.openFullScreen()},$scope.applyCustomTimeRange=function(){var timeRangeSpecifier={};timeRangeSpecifier.type=TimeRangeSpecifierType.BETWEEN_TIMES,timeRangeSpecifier.startTime=$scope.dateFrom,timeRangeSpecifier.endTime=$scope.dateTo,timeRangeSpecifier.durationInMinutes=0,timeRangeSpecifier.startTime.getTime()>timeRangeSpecifier.endTime.getTime()?notificationService.displayError(resourceManager.getString("ui","ms_startTimeCannotBeLaterThanEndTime"),""):timeRangeService.changeTimeRange(timeRangeSpecifier)},$scope.saveCustomTimeRange=function(){var anchor=$element.find(".save-time-range-button")[0],closeWin=function(e,t){var el=$scope.form.getEl();el.dom===t||el.contains(t)||t===anchor||anchor.contains(t)||$scope.form.close()};$scope.form=Ext.create("AppD.Form.CustomRange",{renderTo:$("body")[0],name:"timeRangeForm",listeners:{render:function(){Ext.getBody().on("click",closeWin)},beforeDestroy:function(){Ext.getBody().un("click",closeWin)}}}),$scope.form.anchorTo(anchor),$scope.form.down("button[text=OK]").setHandler(createCustomTimeRange)},$scope.$on(TimeRangeService.UEV_TIME_RANGE_CHANGE_TR_SERVICE,function(event){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];on_UEV_TIME_RANGE_CHANGE(event,args[0])}),$scope.$on(TimeRangeSelectorController.UEV_TIME_RANGE_CHANGE,function(event){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];on_UEV_TIME_RANGE_CHANGE(event,args[0])}),$scope.canGotoPreviousLocation=function(){return navigationHistoryService.canGotoPreviousLocation()},$scope.canGotoForwardLocation=function(){return navigationHistoryService.canGotoForwardLocation()},$scope.homeTooltip=resourceManager.getString("ui","ms_home"),$scope.backTooltip=resourceManager.getString("ui","ms_goBack"),$scope.forwardTooltip=resourceManager.getString("ui","ms_goForward"),$scope.refreshTooltip=resourceManager.getString("ui","ms_refresh"),$scope.helpTooltip=resourceManager.getString("ui","ms_helpDoc"),$scope.videoTooltip=resourceManager.getString("ui","ms_helpVideo"),$scope.copyLinkTooltip=resourceManager.getString("ui","ms_copyLinkToThisLocationToClipboard"),$scope.fullScreenTooltip=resourceManager.getString("ui","ms_fullScreen"),$scope.compareTooltip=resourceManager.getString("ui","ms_compareResponseTimeAgainstBaseline"),$scope.helpLink||($scope.helpLink=ExternalUrls.HELP_URL_PRO_DOCUMENTATION),$scope.timeRange=timeRangeService.currentTimeRange,$scope.timeRange.type===TimeRangeSpecifierType.BETWEEN_TIMES?($scope.showCustomRange=!0,$scope.dateFrom=$scope.timeRange.startTime,$scope.dateTo=$scope.timeRange.endTime):$scope.showCustomRange=!1,this.init()}return __extends(AppLocationBarController,_super),AppLocationBarController.prototype.init=function(){},AppLocationBarController.prototype.onCopyLinkClick=function(){this.$scope.disableDefaultDeepLinkCopy||WebUtil.copyToClipboard(this.$location.absUrl()),this.$rootScope.$broadcast(App.UEV_COPY_LINK_TO_CLIPBOARD)},AppLocationBarController.prototype.onCopyLinkFixedTimeRange=function(){if(!this.$scope.disableDefaultDeepLinkCopy){var timeRangeSpecifierFixedTimeRange=DateTimeUtil.convertToBetweenTimes(this.timeRangeService.currentTimeRange),timeRangeFixedString=this.timeRangeService.convertToPreferenceString(timeRangeSpecifierFixedTimeRange,"."),urlParamsWithFixedTimeRange=URLParams.getCurrentUrlParams();urlParamsWithFixedTimeRange.setParam(UrlConstants.TIME_RANGE,timeRangeFixedString);var newPath="/"+urlParamsWithFixedTimeRange.toStringNoForwardSlash(),currentPath=this.$location.path(),currentAbsUrl=this.$location.absUrl(),absUrlWithFixedTime=currentAbsUrl.replace(currentPath,newPath);WebUtil.copyToClipboard(absUrlWithFixedTime)}this.$rootScope.$broadcast(App.UEV_COPY_LINK_TO_CLIPBOARD)},AppLocationBarController.prototype.onCopyLocationPath=function(){},AppLocationBarController.prototype.onCopyLinkWithAuth=function(){!this.$scope.disableDefaultDeepLinkCopy,this.$rootScope.$broadcast(App.UEV_COPY_LINK_TO_CLIPBOARD)},AppLocationBarController.prototype.onSetCurrentLocationAsDefaultLandingScreen=function(){this.injectorService.masterService().setCurrentLocationAsDefaultLandingScreen()},AppLocationBarController.$inject=["$scope","$rootScope","resourceManager","notificationService","injectorService","$location","$element","navigationHistoryService","timeRangeService","navigationService","userUiService","AppConfig","homeViewService"],AppLocationBarController}(ControllerBase);appdynamicsModule.controller("AppLocationBarController",AppLocationBarController),define("app/view/components/locationBar/AppLocationBarController",function(){});var LocationBarEntry=function(){function LocationBarEntry(){return{restrict:"EA",transclude:!1,template:'<div ng-hide="hideentry" class="adsLocationBarBreadcrumbEntry" title="{{locationTooltip}}">  {{label}}</div>',replace:!0,scope:{label:"@",locationTooltip:"@",selected:"@",location:"@",hideentry:"@"},link:function(scope,iElement){scope.$watch("selected",function(theSelected){iElement&&theSelected&&iElement.addClass("adsLocationBarBreadcrumbEntrySelected")})}}}return LocationBarEntry.$inject=["$location","navigationHistoryService","navigationService"],LocationBarEntry}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-locationbarentry"),LocationBarEntry),define("app/view/components/locationBar/LocationBarEntry",function(){});var LocationBarSeparator=function(){function LocationBarSeparator(navigationUiService,resourceManager,navigationService){return{restrict:"EA",transclude:!1,template:'<div ng-hide="hideentry" class="adsLocationBarBreadcrumbEntrySeparator" ng-click="openMenu()">  <span><img ng-src="{{icon}}"></span>  </div>  ',replace:!0,scope:{label:"@",mode:"@",iconUrl:"@",hideentry:"@"},controller:function($scope,$location){function convertIdToURLFragment(idToDeCode){return idToDeCode.replace("--","=").replace("-","&")}$scope.$watch("iconUrl",function(newValue){$scope.icon=newValue?newValue:"images/locationBar/arrow_head_right_gray_16x16.png"}),$scope.loadApplicationMenu=function(){},$scope.onItemClick=function(item){if(item&&item.data){var urlFragment=convertIdToURLFragment(item.data),params=new URLParams($location.path());params.setParam("location",urlFragment),$scope.$apply(function(){navigationService.navigateTo(params.toString())})}}},link:function(scope,iElement){if(scope.mode&&scope.mode.length>0)switch(scope.mode){case LocationBarSeparator.APPLICATION_MODE:scope.locationTooltip="View application menu";break;case LocationBarSeparator.BT_MODE:scope.locationTooltip="View business transaction menu";break;default:scope.locationTootltip=""}scope.openMenu=function(){if(scope.mode==LocationBarSeparator.APPLICATION_MODE){scope.menu=Ext.create("Ext.menu.Menu",{border:0,shadow:!0,shadowOffset:5,toFrontOnShow:!0,resizable:!1,draggable:!1,plain:!0,floating:!0,renderTo:Ext.getBody()});var timeRangeDropDown=Ext.get(iElement[0]),x=timeRangeDropDown.getX(),y=timeRangeDropDown.getY();scope.menu.showAt(x,y),scope.menu.anchorTo(iElement[0],"tl-tr",[0,0],!1,0,!1),scope.loadApplicationMenu()}}}}}return LocationBarSeparator.$inject=["navigationUiService","resourceManager","navigationService"],LocationBarSeparator.APPLICATION_MODE="APPLICATION",LocationBarSeparator.BT_MODE="BT",LocationBarSeparator}();adComponentsModule.directive(StringUtils.toCamelCase("ad-locationbarseparator"),LocationBarSeparator),define("app/view/components/locationBar/LocationBarSeparator",function(){});var LocationBarEntryApplicationsList=function(){function LocationBarEntryApplicationsList($location,applicationViewService,resourceManager){return{restrict:"EA",transclude:!1,template:'<div ng-hide="hideentry" class="adsLocationBarBreadcrumbEntry"><div class="adsLocationBarAppsListIcon" ng-click="goToAppDashboard()" title="{{tooltip}}" /></div>',replace:!0,scope:{hideentry:"@"},link:function(scope){scope.tooltip=resourceManager.getString("ui","ms_viewExistingApps"),scope.goToAppDashboard=function(){applicationViewService.viewAllApplicationsDashboard()}}}}return LocationBarEntryApplicationsList.$inject=["$location","applicationViewService","resourceManager"],LocationBarEntryApplicationsList}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-locationbarentry-apps-list"),LocationBarEntryApplicationsList),define("app/view/components/locationBar/LocationBarEntryApplicationsList",function(){});var LocationBarEllipsis=function(){function LocationBarEllipsis(){return{restrict:"EA",transclude:!1,template:'<span class="adsLocationBarBreadcrumbEntry"><span class="dropdown-toggleAD">...</span><div class="dropdown-menu"><div class="adsTabLevel2" ng-repeat="entry in svLocationEntries" ng-click="clickFn(entry)"style="display: block; padding-top: 13px; padding-bottom: 23px;">{{entry.label}}</div></div></span>',replace:!0,scope:{svLocationEntries:"="},link:function(scope){scope.Util=Util,scope.clickFn=function(entry){entry.clickFn.apply(null,Util.getArray(entry.fnArg))}}}}return LocationBarEllipsis.$inject=[],LocationBarEllipsis}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-locationbarellipsis"),LocationBarEllipsis),define("app/view/components/locationBar/LocationBarEllipsis",function(){});var DashboardListBase=function(){function DashboardListBase(resourceManager,appId){this.resourceManager=resourceManager,this.appId=appId}return DashboardListBase.gotoItemDash=function(appId,nodeId,entityType){switch(entityType){case EntityType.APPLICATION_COMPONENT:ComponentViewService.instance().viewComponent(appId,nodeId);break;case EntityType.APPLICATION:ApplicationViewService.instance().viewApplicationDashboard(nodeId);break;case EntityType.NETWORK_ELEMENT:this.gotoNetworkItemDash(appId,nodeId,entityType);break;default:case EntityType.BACKEND:BackendDashboardViewService.instance().viewBackendDashboard(appId,nodeId)}},DashboardListBase.gotoNetworkItemDash=function(appId,nodeId,entityType){switch(entityType){case EntityType.APPLICATION_COMPONENT:NetworkMonitoringViewService.instance().viewNpmComponentDashboard(appId,nodeId);break;case EntityType.APPLICATION:NetworkMonitoringViewService.instance().viewNpmApplicationDashboard(nodeId);break;case EntityType.NETWORK_ELEMENT:ADLoggerService.getInstance().warn("No network element handling in place for network dashboards. Defaulting to the app dash"),NetworkMonitoringViewService.instance().viewNpmApplicationDashboard(appId);break;default:case EntityType.BACKEND:BackendDashboardViewService.instance().viewBackendDashboard(appId,nodeId)}},DashboardListBase.prototype.getIconForEntity=function(node){var srcUrl="";switch(node.entityType){case EntityType.APPLICATION_COMPONENT:srcUrl=ImageUtil.getFlowMapComponentIconFromType(node.componentType);break;case EntityType.APPLICATION:srcUrl=ImageUtil.iconNavApplication;break;case EntityType.NETWORK_ELEMENT:srcUrl=ImageUtil.getNetworkLoadBalancerIconSource();break;case EntityType.BACKEND:default:srcUrl=ImageUtil.getBackendMiniIconSource(node.backendType)}return"<img class='adsDashGridCellSpacing adsDashListTypeIcon' src='"+srcUrl+"'/>"},DashboardListBase.prototype.getIconForApplicationComponent=function(component){var srcUrl=ImageUtil.getFlowMapComponentIconFromType(component.componentType.name);return"<img class='adsDashGridCellSpacing adsDashListTypeIcon' src='"+srcUrl+"'/>"},DashboardListBase.prototype.getPerformanceStatsFromItem=function(item){var stats;return stats=item.raw.id?item.raw.stats:item.raw.stats[0]},DashboardListBase.prototype.renderType=function(value,metadata,item){var message="",iconUrl="";if(item.raw.id){message+="Tier Stats";var node=item.raw;iconUrl=this.getIconForEntity(node)}else{var edge=item.raw;message+="Exit Call Stats"+(edge.stats[0]&&edge.stats[0].async?" "+this.resourceManager.getString("ui","ms_asyncCallType"):""),iconUrl="<img class='adsDashGridCellSpacing adsDashListTypeIcon' src='images/callOutgoing.png'/>"}return"<span>"+iconUrl+this.renderString(message)+"</span>"},DashboardListBase.prototype.typeSorter=function(model1,model2){var value1="Exit Call Stats",value2="Exit Call Stats";return model1.raw.id&&(value1="Tier Stats"),model2.raw.id&&(value2="Tier Stats"),value1>value2?1:value2>value1?-1:0},DashboardListBase.prototype.renderSummary=function(value,metadata,item){var rtn="";if(item.raw.id){var node=item.raw;rtn=this.renderLinkedNodeNameWithIconFromGraphNode(node)}else{var edge=item.raw,sourceNode=item.raw.source,targetNode=item.raw.target,linkIcon="images/callFrom.png";rtn=this.renderLinkedNodeNameWithIconFromGraphNode(sourceNode)+("<span><img class='adsDashGridCellSpacing' src='"+linkIcon+"'/></span>")+this.renderLinkedNodeNameWithIconFromGraphNode(targetNode);var appendUpstreamCrossAppTier=!1,upstreamCrossAppTier=null;if(edge&&edge.crossAppOriginTierDefinition&&(upstreamCrossAppTier=this.entityMap.getEntity(edge.crossAppOriginTierDefinition),appendUpstreamCrossAppTier=null!=upstreamCrossAppTier),appendUpstreamCrossAppTier){var tierLinkHTML="<span><span class='adsDashGridCellSpacing'>"+this.getIconForApplicationComponent(upstreamCrossAppTier)+"<span class='adsDashGridTextSpacing adsUnderlineTextOnHover blueText adsCursorPointer'"+this.generateLinkTextForEntityDefinition(edge.crossAppOriginTierDefinition)+">"+upstreamCrossAppTier.name+"</span><span> on </span>";rtn=tierLinkHTML+rtn}}return rtn},DashboardListBase.prototype.renderExitCallType=function(value,metadata,item){var edge=item.raw;if(!edge||!edge.stats||0==edge.stats.length)return"--";if(edge.stats.length>1)return"--";var stat=edge.stats[0];return stat&&stat.exitPointCall?stat.exitPointCall.customExitPoint?this.resourceManager.getString("ui","ms_CUSTOM"):ExitPointUtil.getLabelForType(stat.exitPointCall.exitPointType):"--"},DashboardListBase.prototype.summarySorter=function(model1,model2){var x1=model1.raw.name||model1.raw.source.name+model1.raw.target.name,x2=model2.raw.name||model2.raw.source.name+model2.raw.target.name;return x1>x2?1:x2>x1?-1:0},DashboardListBase.prototype.getTime=function(defaultValue,item){var result=-1,stats=this.getPerformanceStatsFromItem(item);return stats&&stats.averageResponseTime.metricValue>=0&&(result=stats.averageResponseTime.metricValue),result},DashboardListBase.prototype.getCalls=function(defaultValue,item){var result=-1,stats=this.getPerformanceStatsFromItem(item);return stats&&stats.numberOfCalls.metricValue>=0&&(result=stats.numberOfCalls.metricValue),result},DashboardListBase.prototype.getCallsPerMin=function(defaultValue,item){var result=-1,stats=this.getPerformanceStatsFromItem(item);return stats&&stats.callsPerMinute.metricValue>=0&&(result=stats.callsPerMinute.metricValue),result},DashboardListBase.prototype.getErrors=function(defaultValue,item){var result=-1,stats=this.getPerformanceStatsFromItem(item);return stats&&stats.numberOfErrors.metricValue>=0&&(result=stats.numberOfErrors.metricValue),result},DashboardListBase.prototype.getErrorsPerMin=function(defaultValue,item){var result=-1,stats=this.getPerformanceStatsFromItem(item);return stats&&stats.errorsPerMinute.metricValue>=0&&(result=stats.errorsPerMinute.metricValue),result},DashboardListBase.prototype.renderNumber=function(value){return'<span class="adsDashGridTextSpacing"> '+ViewUtil.formatPositiveLargeNumber(value)+" </span>"},DashboardListBase.prototype.renderString=function(value){return'<span class="adsDashGridTextSpacing" title="'+value+'"> '+value+" </span>"},DashboardListBase.prototype.renderLinkedNodeNameWithIconFromGraphNode=function(node){return this.getIconForEntity(node)+('<span class="adsDashGridTextSpacing adsUnderlineTextOnHover adsLinkText" title="'+node.name+'"\n                   onclick="DashboardListBase.gotoItemDash('+this.appId+", "+node.idNum+", '"+node.entityType+"')\">\n                   "+node.name+"\n            </span>")},DashboardListBase.prototype.generateLinkText=function(d){return" onclick='DashboardListBase.gotoItemDash("+this.appId+", "+d.idNum+', "'+d.entityType+"\")'"},DashboardListBase.prototype.generateLinkTextForEntityDefinition=function(eDef){return" onclick='DashboardListBase.gotoItemDash("+this.appId+", "+eDef.entityId+', "'+eDef.entityType+"\")'"},DashboardListBase.prototype.updateGridOptions=function(listViewData,currentGridOpts){var gridOpts=Util.isDefAndNotNull(currentGridOpts)?currentGridOpts:this.buildGridOptions();return gridOpts.dataProvider=this.buildDataProviderFromGraph(listViewData),gridOpts},DashboardListBase.prototype.buildGridOptions=function(){throw new Error("buildGridOptions called but not implemented")},DashboardListBase.prototype.buildDataProviderFromGraph=function(listViewData){return Util.isDefAndNotNull(listViewData)?listViewData.edges:[]},DashboardListBase.NO_DATA="-",DashboardListBase}();define("app/view/components/dashListView/DashboardListBase",function(){}),define("app/view/components/dashMainContent/DashMainContent",["require","exports"],function(){var DashMainContent=function(){function DashMainContent(){return{restrict:"EA",transclude:!1,replace:!1,templateUrl:DashMainContent.TEMPLATE_URL,scope:!1,link:function(scope,element,attrs){scope.GlobalConstants=GlobalConstants,scope.adBasicConfigurator=!1,attrs&&"true"==attrs.adBasicConfigurator&&(scope.adBasicConfigurator=!0,ADLoggerService.warn("DashMainContent.link Info: Configurator is basic"));var resourceManager=AngularUtil.getADInjector().get("resourceManager");scope.adGridViewTitle=resourceManager.getString("ui","ms_appFlowListView"),attrs&&attrs.adGridViewTitle&&(scope.adGridViewTitle=attrs.adGridViewTitle),scope.adTreeViewTitle=resourceManager.getString("ui","ms_btTreeViewTitle"),attrs&&attrs.adTreeViewTitle&&(scope.adTreeViewTitle=attrs.adTreeViewTitle),scope.controller&&scope.controller.addClassToLayout&&scope.controller.addClassToLayout()}}}return DashMainContent.TEMPLATE_URL="app/view/components/dashMainContent/DashMainContent.html",DashMainContent}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-dash-main-content"),DashMainContent)}),define("app/view/components/flowmap/hoverCards/HoverCardBase",["require","exports"],function(require,exports){var HoverCardBase=function(){function HoverCardBase(stats,baselineStats,innerCircle,baseline,flowmapViewType,logoUrl,showSparkStats){var _this=this;this.stats=stats,this.baselineStats=baselineStats,this.innerCircle=innerCircle,this.baseline=baseline,this.flowmapViewType=flowmapViewType,this.beingDestroyed=!1,this.beingCreated=!1,this.closeCard=function(){$(_this.toolTipElement).trigger(EventConstants.UEV_CLOSE)},this.beingCreated=!0;var graphResponseData,injector=AngularUtil.getADInjector(),$compile=injector.get("$compile"),rootScope=injector.get("$rootScope"),dashboardGraphService=injector.get("dashboardGraphService"),timeRangeService=injector.get("timeRangeService"),newElem=$("<div ng-class=\"displayBelowModalStack ? 'ads-hover-card-root-below-modal' : 'ads-hover-card-root-above-modal'\" ><div ng-include='\""+this.getHTMLPartialLocation()+"\"'  onload='finishedLoading()' /></div>");if(showSparkStats){var graphData=this.fetchSparkChartsData(baseline,dashboardGraphService,timeRangeService);graphData.then(function(response){graphResponseData=dashboardGraphService.getEntityStatsData_response(response),_this.toolTipElement&&!_this.beingDestroyed&&_this.setupSparkCharts(graphResponseData,$(_this.toolTipElement),_this.innerCircle)},function(error){ADLoggerService.error("Error loading HoverCard spark chart data"+error)})}if(this.toolTipScope=rootScope.$new(),this.toolTipScope.resourceManager=injector.get("resourceManager"),this.toolTipScope.averageResponseSparkPath="M 0 0 z",this.toolTipScope.callsSparkPath="M 0 0 z",this.toolTipScope.errorsSparkPath="M 0 0 z",this.toolTipScope.logoUrl=logoUrl,this.toolTipScope.appId=(new URLParams).application(),this.toolTipScope.overStatusFillColor=Ext.util.CSS.getRule(".adsHoverCard .adsTierHoverNormalCount").style.color,this.toolTipScope.displayBelowModalStack=!1,stats)if(TransactionStatUtils.hasRootPerformanceStatsSet(stats))this.toolTipScope.callsValid=stats&&stats.numberOfCalls?stats.numberOfCalls.metricValue>=0:!1,this.toolTipScope.callsPerMinuteValid=stats&&stats.callsPerMinute?stats.callsPerMinute.metricValue>=0:!1,this.toolTipScope.errorsValid=stats&&stats.numberOfErrors?stats.numberOfErrors.metricValue>=0:!1,this.toolTipScope.errorsPerMinuteValid=stats&&stats.errorsPerMinute?stats.errorsPerMinute.metricValue>=0:!1,this.toolTipScope.artValid=stats&&stats.averageResponseTime?stats.averageResponseTime.metricValue>=0:!1,this.toolTipScope.callsPerMinute=stats&&stats.callsPerMinute?stats.callsPerMinute.metricValue:-1,this.toolTipScope.calls=stats&&stats.numberOfCalls?stats.numberOfCalls.metricValue:-1,this.toolTipScope.averageResponseTime=stats&&stats.averageResponseTime?stats.averageResponseTime.metricValue:-1,this.toolTipScope.errors=stats&&stats.numberOfErrors?stats.numberOfErrors.metricValue:-1,this.toolTipScope.errorsPerMinute=stats&&stats.errorsPerMinute?stats.errorsPerMinute.metricValue:-1;else{var transactionStats=TransactionStatUtils.getTransactionStats(stats);this.toolTipScope.callsValid=!0,this.toolTipScope.calls=transactionStats.numberOfCalls,this.toolTipScope.errorsValid=!0,this.toolTipScope.errors=transactionStats.numberOfErrors,this.toolTipScope.callsPerMinuteValid=!1,this.toolTipScope.callsPerMinute=-1,this.toolTipScope.errorsPerMinuteValid=!1,this.toolTipScope.errorsPerMinute=-1,-1!=transactionStats.timeConsumedPerTransaction&&-1!=transactionStats.callsPerTransaction?(this.toolTipScope.artValid=!0,this.toolTipScope.averageResponseTime=Util.getNumberToDecimalPrecision(transactionStats.timeConsumedPerTransaction/transactionStats.callsPerTransaction,1)):(this.toolTipScope.artValid=!1,this.toolTipScope.averageResponseTime=-1)}this.toolTipScope.showBaselines=Boolean(baseline),this.toolTipScope.errorsLightClass="ads-hidden-status-light",this.toolTipScope.aRTLightClass="ads-hidden-status-light",this.toolTipScope.errorsBaselineText="",this.toolTipScope.artBaselineText="",this.toolTipScope.showBaselines&&baselineStats&&stats&&TransactionStatUtils.hasRootPerformanceStatsSet(stats)&&(this.toolTipScope.showBaselines=Boolean(baselineStats&&stats),Util.isValidId(baselineStats.errorsPerMinute.metricId)&&(this.toolTipScope.errorsPerMinuteBaseline=baselineStats.errorsPerMinute,this.toolTipScope.errorsBaselineText=this.baselineValueText(baselineStats.errorsPerMinute,resourceManager.getString("ui","ms_errorsSlashMinlcase")),this.toolTipScope.errorsLightClass="adsTierHoverLight "+this.performanceColorClassEPM(stats,baselineStats)),Util.isValidId(baselineStats.averageResponseTime.metricId)&&(this.toolTipScope.artBaseline=baselineStats.averageResponseTime,this.toolTipScope.artBaselineText=this.baselineValueText(baselineStats.averageResponseTime,resourceManager.getString("ui","ms_ms")),this.toolTipScope.aRTLightClass="adsTierHoverLight "+this.performanceColorClassART(stats,baselineStats))),this.toolTipScope.closeCard=function(){_this.closeCard()},this.toolTipScope.finishedLoading=function(){_this.toolTipElement&&!_this.beingDestroyed&&(newElem=$(_this.toolTipElement),setTimeout(function(){_this.beingDestroyed||(_this.layoutCard(innerCircle,newElem),newElem.draggable({handle:".ads-hovercard-handle",containment:"parent"}),d3.select(newElem[0]).transition().duration(HoverCardBase.FADE_DURATION).style("opacity","1"))},0))},this.toolTipScope.$on(NavigationService.UEV_NAVIGATE_TO_FRAGMENT,this.locationChanged.bind(this)),this.decorateScope(this.toolTipScope);var compiledPartial=$compile(newElem);this.toolTipElement=newElem[0],newElem.css("opacity","0"),$(document.body).append(newElem),compiledPartial(this.toolTipScope),ViewUtil.safeApply(this.toolTipScope),this.beingCreated=!1}return HoverCardBase.prototype.isFlowmapViewTypeBT=function(){return FlowRendererUtils.isViewTypeBT(this.flowmapViewType)},HoverCardBase.prototype.locationChanged=function(){this.toolTipElement&&!this.beingCreated&&this.closeCard()},HoverCardBase.prototype.fetchSparkChartsData=function(){return null},HoverCardBase.prototype.getHTMLPartialLocation=function(){return""},HoverCardBase.prototype.getAnchorHeight=function(){return 0},HoverCardBase.prototype.getAnchorWidth=function(){return 0},HoverCardBase.prototype.setupSparkCharts=function(graphResponse,newElem,innerCircle){graphResponse&&graphResponse.dataAvailable&&(this.toolTipScope.averageResponseSparkPath=this.createSparkChart(graphResponse.averageResponseTimeData.dataTimeslices),this.toolTipScope.callsSparkPath=this.createSparkChart(graphResponse.callsPerMinuteData.dataTimeslices),this.toolTipScope.errorsSparkPath=this.createSparkChart(graphResponse.errorsPerMinuteData.dataTimeslices),this.metricIds={averageResponseTimeMetricId:graphResponse.averageResponseTimeData.metricId,callsPerMinuteMetricId:graphResponse.callsPerMinuteData.metricId,errorsPerMinuteMetricId:graphResponse.errorsPerMinuteData.metricId},this.attachEventsOnSparkChart(newElem)),this.layoutCard(innerCircle,newElem)},HoverCardBase.prototype.attachEventsOnSparkChart=function(newElem){newElem.find(".adsCallsSpark").parent().on("contextmenu",this.onSparkChartContextMenu.bind(this,this.metricIds.callsPerMinuteMetricId)),newElem.find(".adsResponseSpark").parent().on("contextmenu",this.onSparkChartContextMenu.bind(this,this.metricIds.averageResponseTimeMetricId)),newElem.find(".adsErrorsSpark").parent().on("contextmenu",this.onSparkChartContextMenu.bind(this,this.metricIds.errorsPerMinuteMetricId)),newElem.find(".adsCallsSpark").parent().on(MouseEvents.DOUBLE_CLICK,this.doubleClickSparkChartHandler.bind(this,this.metricIds.callsPerMinuteMetricId)),newElem.find(".adsResponseSpark").parent().on(MouseEvents.DOUBLE_CLICK,this.doubleClickSparkChartHandler.bind(this,this.metricIds.averageResponseTimeMetricId)),newElem.find(".adsErrorsSpark").parent().on(MouseEvents.DOUBLE_CLICK,this.doubleClickSparkChartHandler.bind(this,this.metricIds.errorsPerMinuteMetricId))},HoverCardBase.prototype.doubleClickSparkChartHandler=function(){},HoverCardBase.prototype.onSparkChartContextMenu=function(metricId,event){var items=this.getContextMenuItems(metricId,event);if(items){event.preventDefault();var contextMenuOptions={cls:"ad-context-menu no-icon-menu",showSeparator:!1,disableDefaultContextMenu:!0,items:items},contextMenu=Ext.create("Ext.menu.Menu",contextMenuOptions);contextMenu.showAt([event.clientX,event.clientY])}},HoverCardBase.prototype.getContextMenuItems=function(){return null},HoverCardBase.prototype.layoutCard=function(innerCircle,element){if(element&&element.length){element.css("position","absolute"),element.css("display","inline-block");var svg=$(innerCircle).parents("svg")[0],svgY=(innerCircle.getBBox().x,innerCircle.getBBox().y),location=$(svg).parent()[0].getBoundingClientRect(),topOfNode=svg.createSVGMatrix();topOfNode.a=1,topOfNode.b=1,topOfNode.c=1,topOfNode.d=1,topOfNode.e=0,topOfNode.f=svgY;var bottomOfNode=svg.createSVGMatrix();bottomOfNode.a=1,bottomOfNode.c=1,bottomOfNode.e=0,bottomOfNode.b=1,bottomOfNode.d=1,bottomOfNode.f=svgY+innerCircle.getBBox().height;var matrix=this.getSvgTransformToElement(innerCircle,svg);topOfNode=matrix.multiply(topOfNode),bottomOfNode=matrix.multiply(bottomOfNode);var cardX=location.left+topOfNode.e-element.outerWidth()/2,cardY=location.top+topOfNode.f-element.height();0>cardY?(cardY=location.top+bottomOfNode.f,this.cardDirection="down"):this.cardDirection="up";var right=$(window).width()-element.outerWidth();cardX=Math.min(Math.max(0,cardX),right),element.css("left",cardX+"px").css("top",cardY+"px"),this.toolTipScope.$broadcast("layoutChanged")}},HoverCardBase.prototype.getHoverCardElement=function(){return this.toolTipElement},HoverCardBase.prototype.baselineValueText=function(baselineValue,units){return Util.isValidId(baselineValue.metricId)&&baselineValue.value>=0?resourceManager.getString("ui","ms_hoverCardBaselineValue",[baselineValue.value,units]):""},HoverCardBase.prototype.valueVsBaselineText=function(statusCode){return statusCode==PerformanceState.UNKNOWN||statusCode==PerformanceState.UNDEFINED?"":FlowRendererUtils.getBaselineStatusText(statusCode)},HoverCardBase.prototype.performanceColorClassART=function(stats,baselineStats){return baselineStats&&stats?this.getBaselineFillColorClass(stats.averageResponseTime.metricValue,baselineStats.averageResponseTime):""},HoverCardBase.prototype.performanceColorClassEPM=function(stats,baselineStats){return baselineStats&&stats?this.getBaselineFillColorClass(stats.errorsPerMinute.metricValue,baselineStats.errorsPerMinute):""},HoverCardBase.prototype.performanceColorClassCalls=function(stats,baselineStats){return baselineStats&&stats?this.getBaselineFillColorClass(stats.callsPerMinute.metricValue,baselineStats.callsPerMinute):""},HoverCardBase.prototype.getBaselineFillColorClass=function(currentValue,baseline){var itemPerformance=FlowRendererUtils.performanceStateAgainstBaseline(currentValue,baseline);return FlowRendererUtils.getBaselineFillColorClass(itemPerformance)},HoverCardBase.prototype.getNodeLogoPath=function(node){return ImageUtil.getFlowMapComponentIconFromType(node.componentType)},HoverCardBase.prototype.destroy=function(){var _this=this;this.toolTipElement&&(this.beingDestroyed=!0,d3.select(this.toolTipElement).transition().duration(HoverCardBase.FADE_DURATION).style("opacity","0").each("end",function(){var scope=angular.element(_this.toolTipElement).scope();$(_this.toolTipElement).remove(),_this.toolTipElement=null,scope.$destroy()}))},HoverCardBase.prototype.createSparkChart=function(data){return ChartUtil.createSparkChart(data)},HoverCardBase.prototype.getNodeSectionClass=function(index){var nodeClass;switch(index){case 0:nodeClass="adsNormalNodeColor";break;case 1:nodeClass="adsWarningNodeColor";break;case 2:default:nodeClass="adsCriticalNodeColor"}return nodeClass},HoverCardBase.prototype.getHoverCardDirection=function(){return this.cardDirection},HoverCardBase.prototype.getPopupWidth=function(){var svg=$(this.innerCircle).parents("svg")[0],matrix=this.getSvgTransformToElement(svg,this.innerCircle);return matrix.a*$(this.toolTipElement).width()},HoverCardBase.prototype.getPopupHeight=function(){var svg=$(this.innerCircle).parents("svg")[0],matrix=this.getSvgTransformToElement(svg,this.innerCircle);return matrix.a*($(this.toolTipElement).height()+this.getAnchorHeight())},HoverCardBase.prototype.getSvgTransformToElement=function(sourceElement,targetElement){return sourceElement.getTransformToElement?sourceElement.getTransformToElement(targetElement):targetElement.getScreenCTM().inverse().multiply(sourceElement.getScreenCTM())},HoverCardBase.prototype.decorateScope=function(){},HoverCardBase.FADE_DURATION=250,HoverCardBase.HOVER_CARD_EVENTS=".hoverCard",HoverCardBase}();exports.HoverCardBase=HoverCardBase}),define("app/view/components/flowmap/renderers/RendererBase",["require","exports","../hoverCards/HoverCardBase"],function(require,exports,hoverCardBase){var RendererBase=function(){function RendererBase($scope,flowmapViewType,parentGraph){var _this=this;void 0===flowmapViewType&&(flowmapViewType=EntityType.APPLICATION),void 0===parentGraph&&(parentGraph=null),this.flowmapViewType=flowmapViewType,this.parentGraph=parentGraph,$scope.$on("$destroy",function(){_this.card&&_this.card.closeCard()})}return RendererBase.prototype.isFlowmapViewTypeBT=function(){return FlowRendererUtils.isViewTypeBT(this.flowmapViewType)},RendererBase.prototype.setFlowmapViewType=function(flowmapViewType){this.flowmapViewType=flowmapViewType},RendererBase.prototype.getFlowmapViewType=function(){return this.flowmapViewType},RendererBase.prototype.setParentGraph=function(parentGraph){this.parentGraph=parentGraph},RendererBase.prototype.getParentGraph=function(){return this.parentGraph},RendererBase.prototype.getEdgeID=function(d){return d.source.entityType+d.source.idNum+"_"+d.target.entityType+d.target.idNum
},RendererBase.prototype.getEdgeHitAreaID=function(d){return d.source.entityType+d.source.idNum+"_"+d.target.entityType+d.target.idNum+"_hitarea"},RendererBase.prototype.getNodeId=function(d){return d.entityType+d.idNum},RendererBase.prototype.mouseDownOutsidePopup=function(event){var target=GridComp.getEventTarget(event);if(this.card&&!$.contains(this.card.toolTipElement,target)&&target!=this.card.toolTipElement){if(SharedInjectorService.instance().$modalStack().getTop()){var modalElement=SharedInjectorService.instance().$modalStack().getTop().value.modalDomEl,modalZIndex=parseInt(modalElement.css("zIndex"));if(modalZIndex>parseInt($(this.card.toolTipElement).css("zIndex")))return}var flyOutElement=$(target).closest(".ads-fly-out-container");if(flyOutElement.length){var flyOutElement,flyOutZIndex=parseInt(flyOutElement.css("z-index"));if(flyOutZIndex>parseInt($(this.card.toolTipElement).css("zIndex")))return}this.closePopup()}},RendererBase.prototype.closePopup=function(){$(document).off(MouseEvents.MOUSE_DOWN+hoverCardBase.HoverCardBase.HOVER_CARD_EVENTS),this.card&&($(this.card.toolTipElement).off("close"),this.card.destroy(),this.card=null)},RendererBase}();return RendererBase}),define("app/view/components/flowmap/renderers/BTStatsRenderer",["require","exports"],function(require,exports){var BTStatsRenderer=function(){function BTStatsRenderer(){}return BTStatsRenderer.prototype.renderStatsText=function(item,radius,totalTransactionTime){var _this=this;void 0===totalTransactionTime&&(totalTransactionTime=-1);var shadowOverlap=2,lineHeight=9,tierDetailsClass="adsFlowMapStatsDetails adsFlowMapZoom3 adsBTStatsText",detailedHealthArea=item.append("g").attr("class","detailedHealthArea").style("visibility",function(d){return d.hasTransactionStats?"visible":"hidden"}).attr("transform",function(){return"translate("+(radius+shadowOverlap)+",0)"});return FlowRendererUtils.createShadowedText(function(d){var btLabel="",btStat=-1,btPercent=-1;return TransactionStatUtils.hasSyncTransactionStatsSet(d.stats)&&d.stats.transactionStats&&d.stats.transactionStats.timeConsumedPerTransaction&&(btStat=d.stats.transactionStats.timeConsumedPerTransaction,btStat&&btStat>=0&&totalTransactionTime>0&&(btPercent=btStat/totalTransactionTime*100),btLabel=APMUtil.renderDuration(btStat),btPercent>=0&&totalTransactionTime>0&&(btLabel+=" ("+Util.getNumberToDecimalPrecision(btStat/totalTransactionTime*100,1)+"%)")),btLabel},function(d){return"translate(0,"+_this.getStatTextVerticalPosition(BTStatsRenderer.TIME_PER_TX_SYNC,d,lineHeight)+")"},detailedHealthArea,tierDetailsClass,function(d){return _this.getStatTextVisibility(BTStatsRenderer.TIME_PER_TX_SYNC,d)}),FlowRendererUtils.createShadowedText(function(d){var btLabel="";return TransactionStatUtils.hasAsyncTransactionStatsSet(d.stats)&&d.stats.asyncTransactionStats&&d.stats.asyncTransactionStats.timeConsumedPerTransaction&&(btLabel=APMUtil.renderDuration(d.stats.asyncTransactionStats.timeConsumedPerTransaction)+" "+resourceManager.getString("ui","ms_asyncCallType")),btLabel},function(d){return"translate(0,"+_this.getStatTextVerticalPosition(BTStatsRenderer.TIME_PER_TX_ASYNC,d,lineHeight)+")"},detailedHealthArea,tierDetailsClass,function(d){return _this.getStatTextVisibility(BTStatsRenderer.TIME_PER_TX_ASYNC,d)}),FlowRendererUtils.createShadowedText(function(d){return _this.getStatTextVisibility(BTStatsRenderer.TOTAL_CALLS,d)?_this.pluralizeAndFormat(d.stats.transactionStats.numberOfCalls," "+resourceManager.getString("ui","ms_call")," "+resourceManager.getString("ui","ms_calls")):""},function(d){return"translate(0, "+_this.getStatTextVerticalPosition(BTStatsRenderer.TOTAL_CALLS,d,lineHeight)+")"},detailedHealthArea,tierDetailsClass,function(d){return _this.getStatTextVisibility(BTStatsRenderer.TOTAL_CALLS,d)}),FlowRendererUtils.createShadowedText(function(d){return _this.getStatTextVisibility(BTStatsRenderer.TOTAL_ERRORS,d)?_this.pluralizeAndFormat(d.stats.transactionStats.numberOfErrors," "+resourceManager.getString("ui","ms_error")," "+resourceManager.getString("ui","ms_errors")):""},function(d){return"translate(0, "+_this.getStatTextVerticalPosition(BTStatsRenderer.TOTAL_ERRORS,d,lineHeight)+")"},detailedHealthArea,tierDetailsClass,function(d){return _this.getStatTextVisibility(BTStatsRenderer.TOTAL_ERRORS,d)}),detailedHealthArea},BTStatsRenderer.prototype.getStatTextVisibility=function(stat,node){switch(stat){case BTStatsRenderer.TIME_PER_TX_SYNC:return TransactionStatUtils.hasSyncTransactionStatsSet(node.stats)&&node.stats.transactionStats.timeConsumedPerTransaction&&node.stats.transactionStats.timeConsumedPerTransaction>=0;case BTStatsRenderer.TIME_PER_TX_ASYNC:return TransactionStatUtils.hasAsyncTransactionStatsSet(node.stats)&&node.stats.asyncTransactionStats.timeConsumedPerTransaction&&node.stats.asyncTransactionStats.timeConsumedPerTransaction>=0;case BTStatsRenderer.TOTAL_CALLS:return TransactionStatUtils.hasSyncTransactionStatsSet(node.stats)&&node.stats.transactionStats.numberOfCalls&&node.stats.transactionStats.numberOfCalls>0;case BTStatsRenderer.TOTAL_ERRORS:return TransactionStatUtils.hasSyncTransactionStatsSet(node.stats)&&node.stats.transactionStats.numberOfErrors&&node.stats.transactionStats.numberOfErrors>0;default:return!1}},BTStatsRenderer.prototype.getStatTextVerticalPosition=function(stat,node,lineHeight){var _this=this,heights=[-lineHeight/2,lineHeight/2,1.5*lineHeight,2.5*lineHeight],visibleStats=[BTStatsRenderer.TIME_PER_TX_SYNC,BTStatsRenderer.TIME_PER_TX_ASYNC,BTStatsRenderer.TOTAL_CALLS,BTStatsRenderer.TOTAL_ERRORS].filter(function(stat){return _this.getStatTextVisibility(stat,node)});return 1===visibleStats.length?lineHeight/2:heights[visibleStats.indexOf(stat)]},BTStatsRenderer.prototype.pluralizeAndFormat=function(value,singularInput,pluralInput){return ViewUtil.formatLargeNumber(value,2,1e3)+(value>1?pluralInput:singularInput)},BTStatsRenderer.TIME_PER_TX_SYNC="timeConsumedPerTransactionSync",BTStatsRenderer.TIME_PER_TX_ASYNC="timeConsumedPerTransactionAsync",BTStatsRenderer.TOTAL_CALLS="numberOfCalls",BTStatsRenderer.TOTAL_ERRORS="numberOfErrors",BTStatsRenderer}();exports.BTStatsRenderer=BTStatsRenderer}),define("app/view/components/flowmap/renderers/PerformanceStatsRenderer",["require","exports"],function(require,exports){var PerformanceStatsRenderer=function(){function PerformanceStatsRenderer(){}return PerformanceStatsRenderer.prototype.renderStatsText=function(item,radius,totalTransactionTime){var _this=this;void 0===totalTransactionTime&&(totalTransactionTime=-1);var lineHeight=9,shadowOverlap=2,tierDetailsClass=" adsFlowMapStatsDetails adsFlowMapZoom3 ",detailedHealthArea=item.append("g").attr("class","detailedHealthArea").filter(function(d){return d.stats?!0:!1}).attr("transform",function(){return"translate("+(radius+shadowOverlap)+",0)"});return FlowRendererUtils.createShadowedText(function(d){return d.stats.callsPerMinute?_this.pluralizeAndFormat(d.stats.callsPerMinute.metricValue," call / min"," calls / min"):""},function(){return"translate(0, "+-lineHeight/2+")"},detailedHealthArea,tierDetailsClass+" adsUnknownFlowMapColor",function(d){return d.stats&&d.stats.callsPerMinute&&d.stats.callsPerMinute.metricValue>=0}),FlowRendererUtils.createShadowedText(function(d){return d.stats.averageResponseTime?APMUtil.renderDuration(d.stats.averageResponseTime.metricValue):""},function(){return"translate(0,"+lineHeight/2+")"},detailedHealthArea,function(d){return FlowRendererUtils.nodePerformanceColorClassART(d)+" "+tierDetailsClass},function(d){return d.stats&&d.stats.averageResponseTime&&d.stats.averageResponseTime.metricValue>=0}),FlowRendererUtils.createShadowedText(function(d){return d.stats.errorsPerMinute?_this.pluralizeAndFormat(d.stats.errorsPerMinute.metricValue," error / min"," errors / min"):""},function(){return"translate(0,"+1.5*lineHeight+")"},detailedHealthArea,function(d){return FlowRendererUtils.nodePerformanceColorClassEPM(d)+" "+tierDetailsClass},function(d){return d.stats&&d.stats.errorsPerMinute&&d.stats.errorsPerMinute.metricValue>0}),detailedHealthArea},PerformanceStatsRenderer.prototype.nodeHasValidBaselines=function(d){return d.baselineStats&&d.baselineStats.averageResponseTime&&null!=d.baselineStats.averageResponseTime.metricValue},PerformanceStatsRenderer.prototype.pluralizeAndFormat=function(value,singularInput,pluralInput){return ViewUtil.formatLargeNumber(value,2,1e3)+(value>1?pluralInput:singularInput)},PerformanceStatsRenderer}();exports.PerformanceStatsRenderer=PerformanceStatsRenderer});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/renderers/DefaultNodeRenderer",["require","exports","app/view/components/flowmap/renderers/RendererBase","./BTStatsRenderer","./PerformanceStatsRenderer"],function(require,exports,RendererBase,btStatsModule,performanceStatsModule){var DefaultNodeRenderer=function(_super){function DefaultNodeRenderer($scope,flowmapViewType,parentGraph){void 0===flowmapViewType&&(flowmapViewType=EntityType.APPLICATION),void 0===parentGraph&&(parentGraph=null),_super.call(this,$scope,flowmapViewType,parentGraph),this.$scope=$scope,this.appId=0,this.isMouseDown=!1,this.isMouseOver=!1,this.movedWhileDown=!1,this.btStatsRenderer=new btStatsModule.BTStatsRenderer,this.performanceStatsRenderer=new performanceStatsModule.PerformanceStatsRenderer,this.nodeRadius=this.getNodeRadius()}return __extends(DefaultNodeRenderer,_super),DefaultNodeRenderer.prototype.render=function(canvas,items){var _this=this;this.canvas=canvas;var rtn=canvas.selectAll("."+this.getNodeRendererClass()).data(items).enter().append("g").attr("id",this.getNodeId).attr("class","adsFlowMapNode "+this.getNodeRendererClass());rtn.append("title").text(function(d){return _this.getToolTip(d)}),this.drawShape(rtn),this.decorateNode(rtn);{var textContainer=rtn.append("g").attr("class","adsFlowMapTextContainer"),labelHeight=12;FlowRendererUtils.createShadowedText(this.getName,function(d){return"translate(0,"+(_this.getRadius(d)+labelHeight)+")"},textContainer," adsFlowMapText adsFlowMapZoom2 adsFlowMapNodeName ",function(){return!0},!0)}this.addMouseTarget(textContainer),rtn.filter(function(d){return d.startComponent?!0:!1}).append("g").append("image").attr("xlink:href","images/startBox.png").attr("x",-28.5).attr("y",40).attr("width",57).attr("height",18);var renderer=this;return rtn.on("contextmenu",function(data){d3.event.preventDefault(),renderer.onContextMenu(data,this)}),rtn},DefaultNodeRenderer.prototype.drawPerformanceIndicators=function(item,radius){var statsRenderer,totalTransactionTime=-1;this.isFlowmapViewTypeBT()?(this.getParentGraph()&&this.getParentGraph().totalTransactionTime&&(totalTransactionTime=this.getParentGraph().totalTransactionTime),statsRenderer=this.btStatsRenderer):statsRenderer=this.performanceStatsRenderer;var renderedStatsContainer=statsRenderer.renderStatsText(item,radius,totalTransactionTime);this.addMouseTarget(renderedStatsContainer)},DefaultNodeRenderer.prototype.getNodeRadius=function(){return DefaultNodeRenderer.NODE_RADIUS},DefaultNodeRenderer.prototype.getName=function(d){if(d.name)return d.name;var name="";switch(d.entityType){case EntityType.APPLICATION:name="Application";break;case EntityType.APPLICATION_COMPONENT:name="Component";break;case EntityType.APPLICATION_COMPONENT_NODE:name="ComponentNode";break;default:name="Backend"}return name=resourceManager.getString("ui","ms_unknown"+name),name+=d.idNum},DefaultNodeRenderer.prototype.onContextMenu=function(data,element){var items=this.getContextMenuItems(data,element);if(items){var contextMenuOptions={cls:"ad-context-menu no-icon-menu",showSeparator:!1,disableDefaultContextMenu:!0,items:items},contextMenu=Ext.create("Ext.menu.Menu",contextMenuOptions);contextMenu.showAt([d3.event.clientX,d3.event.clientY])}},DefaultNodeRenderer.prototype.getContextMenuItems=function(){return null},DefaultNodeRenderer.prototype.addMouseTarget=function(element){var renderer=this;element.on(MouseEvents.MOUSE_DOWN,function(d,index){renderer.isMouseDown=!0,renderer.lastMouseDownLocation=new Point2D(d.x,d.y),renderer.mouseDown(d,index,this)}),element.on(MouseEvents.MOUSE_MOVE,function(d,index){!renderer.isMouseDown||renderer.lastMouseDownLocation.x===d.x&&renderer.lastMouseDownLocation.y===d.y||(renderer.movedWhileDown=!0),renderer.mouseMove(d,index,this)}),element.on(MouseEvents.MOUSE_UP,function(d,index){renderer.isMouseDown=!1,renderer.lastMouseDownLocation=null,renderer.mouseUp(d,index,this)}),element.on(MouseEvents.MOUSE_ENTER,function(d,index){renderer.isMouseOver=!0,renderer.mouseOver(d,index,this)}),element.on(MouseEvents.MOUSE_LEAVE,function(d,index){renderer.isMouseOver=!1,renderer.removeLineArrowAnimation(),renderer.mouseOut(d,index,this)}),element.on(MouseEvents.CLICK,function(d,index){FlowRendererUtils.isControlDown()||renderer.movedWhileDown||renderer.mouseClick(d,index,this),renderer.movedWhileDown=!1,renderer.isMouseDown=!1}),element.on(MouseEvents.DOUBLE_CLICK,function(d,index){renderer.mouseDoubleClick(d,index,this)})},DefaultNodeRenderer.prototype.mouseDown=function(){this.removeLineArrowAnimation()},DefaultNodeRenderer.prototype.mouseMove=function(){},DefaultNodeRenderer.prototype.mouseOver=function(d){var _this=this;if(!this.isMouseDown&&this.isMouseOver){this.removeLineArrowAnimation();var arrows=this.canvas.selectAll(".adsFlowAnimationArrow").data(d.$$edges).enter().append("path").attr({d:function(d){return d.linkType===LinkType.NETWORK?" ":FlowRendererUtils.createArrow(4)},"class":function(d){return"adsFlowMapLink adsFlowMapLinkColor adsFlowAnimationArrow "+FlowRendererUtils.performanceColorClassART(d)}}),translateAlong=function(d){var item=$("#"+_this.getEdgeHitAreaID(d)),path=item[0];if(path){var multiplier=d.source==d.target?2:1,length=path.getTotalLength()/multiplier,timePrev=0;return function(time){var p0=path.getPointAtLength(timePrev*length),p=path.getPointAtLength(time*length),angle=180*Math.atan2(p.y-p0.y,p.x-p0.x)/Math.PI-90;timePrev=time;var centerX=p.x,centerY=p.y;return"translate("+centerX+","+centerY+")rotate("+angle+")"}}return null},transition=function(){var totalArrows=arrows.length;_this.isMouseOver&&arrows.transition().duration(3e3).ease("linear").attrTween("transform",translateAlong).each("end",function(){0==--totalArrows&&transition()})};transition()}},DefaultNodeRenderer.prototype.getNodeLabel=function(nodeCount){return resourceManager.getString("ui",1==nodeCount?"ms_componentNode":"ms_componentNodes")},DefaultNodeRenderer.prototype.getComponentLabel=function(componentCount){return resourceManager.getString("ui",1==componentCount?"ms_component":"ms_components")},DefaultNodeRenderer.prototype.mouseOut=function(){},DefaultNodeRenderer.prototype.removeLineArrowAnimation=function(){this.canvas.selectAll(".adsFlowAnimationArrow").remove()},DefaultNodeRenderer.prototype.mouseUp=function(){},DefaultNodeRenderer.prototype.mouseDoubleClick=function(){this.stopD3EventPropogation()},DefaultNodeRenderer.prototype.mouseClick=function(){},DefaultNodeRenderer.prototype.getToolTip=function(d){return this.getName(d)},DefaultNodeRenderer.prototype.drawShape=function(){},DefaultNodeRenderer.prototype.setRadius=function(value){this.nodeRadius=value},DefaultNodeRenderer.prototype.getRadius=function(d){return void 0===d&&(d=null),this.nodeRadius},DefaultNodeRenderer.prototype.getShapeClass=function(){return"adsFlowMapNodeStyle"},DefaultNodeRenderer.prototype.getShapeIconURL=function(){return""},DefaultNodeRenderer.prototype.getNodeRendererClass=function(){throw new Error("Subclasses must implement with a unique CSS class.")},DefaultNodeRenderer.prototype.decorateNode=function(){},DefaultNodeRenderer.prototype.hideItem=function(data){this.$scope.$emit(DefaultNodeRenderer.HIDE_ITEM,data)},DefaultNodeRenderer.prototype.getEntityTypeVariant=function(){return""},DefaultNodeRenderer.prototype.stopD3EventPropogation=function(){if(d3.event&&d3.event.stopImmediatePropagation){var originalEvent=d3.event;originalEvent.stopImmediatePropagation()}},DefaultNodeRenderer.prototype.drawDrillDown=function(items){var _this=this,drillDownableNodes=this.getDrillDownableNodes(items);drillDownableNodes.append("g").attr("class","ads-drill-down");var mouseTargets=drillDownableNodes.selectAll(".ads-drill-down");mouseTargets.append("title").text(function(node){return _this.getDrillDownTitle(node)});var cornerRadius=4,callOutSize=10,width=110,height=25,y=-this.getNodeRadius()-height-callOutSize,x=-width/2;mouseTargets.append("path").attr("width",width).attr("height",height).attr("class","adsDrillDownRect").attr("d",function(){return"M"+x+","+(y+cornerRadius)+"a"+cornerRadius+","+cornerRadius+" 0 0 1 "+cornerRadius+","+-cornerRadius+"h"+(width-2*cornerRadius)+"a"+cornerRadius+","+cornerRadius+" 0 0 1 "+cornerRadius+","+cornerRadius+"v"+(height-2*cornerRadius)+"a"+cornerRadius+","+cornerRadius+" 0 0 1 "+-cornerRadius+","+cornerRadius+"h"+(callOutSize/2+cornerRadius-width/2)+"l"+-callOutSize/2+","+callOutSize+"l"+-callOutSize/2+","+-callOutSize+"h"+(callOutSize/2+cornerRadius-width/2)+"a"+cornerRadius+","+cornerRadius+" 0 0 1 "+-cornerRadius+","+-cornerRadius+"z"}),mouseTargets.append("text").text(function(node){return _this.getDrillDownText(node)}).attr("y",y+17.5).attr("x",10).attr("class","adsDrillDownText"),mouseTargets.append("image").attr("xlink:href",function(node){return _this.getDrillDownExperienceIcon(node)}).style("pointer-events","none").attr("y",y+5).attr("x",x+10).attr("width","17px").attr("height","17px"),this.addMouseTarget(mouseTargets)},DefaultNodeRenderer.prototype.getDrillDownableNodes=function(items){return items.filter(function(node){return node.requestSegmentDataItems&&node.requestSegmentDataItems.length>0})},DefaultNodeRenderer.prototype.getDrillDownTitle=function(node){return node.requestSegmentDataItems.length>1?resourceManager.getString("ui","ms_drillDownTipMultiple"):resourceManager.getString("ui","ms_drillDownTip")},DefaultNodeRenderer.prototype.getDrillDownText=function(node){return node.requestSegmentDataItems.length>1?resourceManager.getString("ui","ms_drillDownMultiple"):resourceManager.getString("ui","ms_drillDown")},DefaultNodeRenderer.prototype.getDrillDownExperienceIcon=function(node){return ImageUtil.getUserExperienceIcon(APMUtil.getWorstUserExperienceValueFromRsds(node.requestSegmentDataItems))},DefaultNodeRenderer.NODE_RADIUS=15,DefaultNodeRenderer.HIDE_ITEM="hideItem",DefaultNodeRenderer}(RendererBase);return DefaultNodeRenderer});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/renderers/NodeNodeRenderer",["require","exports","./DefaultNodeRenderer"],function(require,exports,DefaultNodeRenderer){var NodeNodeRenderer=function(_super){function NodeNodeRenderer($scope,flowmapViewType,parentGraph){void 0===$scope&&($scope=null),void 0===flowmapViewType&&(flowmapViewType=EntityType.APPLICATION_COMPONENT_NODE),void 0===parentGraph&&(parentGraph=null),_super.call(this,$scope,flowmapViewType,parentGraph),this.showNodeType=!0,this.appServerTypeRadius=this.getServerTypeRadius(),this.outerRadius=this.getOuterRadius(),this.nodeRadius+=this.outerRadius,this.statsRadius=this.nodeRadius/NodeNodeRenderer.HEIGHT_TO_WIDTH_PROPORTION}return __extends(NodeNodeRenderer,_super),NodeNodeRenderer.prototype.getNodeRendererClass=function(){return NodeNodeRenderer.NODE_RENDERER_CLASS},NodeNodeRenderer.prototype.getServerTypeRadius=function(){return NodeNodeRenderer.SERVER_TYPE_RADIUS},NodeNodeRenderer.prototype.getNodeRadius=function(){return NodeNodeRenderer.NODE_RADIUS},NodeNodeRenderer.prototype.getOuterRadius=function(){return NodeNodeRenderer.OUTER_RADIUS},NodeNodeRenderer.prototype.render=function(canvas,nodes){return _super.prototype.render.call(this,canvas,nodes)},NodeNodeRenderer.prototype.decorateNode=function(item){this.showNodeType&&this.addAppTypeIcon(item,this.nodeRadius),this.drawPerformanceIndicators(item,this.statsRadius)},NodeNodeRenderer.prototype.drawShape=function(item){NodeNodeRenderer.SHOW_OUTER_RING?this.drawMachineIconWithRing(item):this.drawMachineIcon(item)},NodeNodeRenderer.prototype.drawMachineIcon=function(item){{var circleContainer=item.append("g").attr("class","adsNodeCountContainer");this.nodeRadius}circleContainer.append("image").attr({x:-this.nodeRadius,y:-this.nodeRadius,width:2*this.nodeRadius,height:2*this.nodeRadius,"class":"adsFlowMapNodeImage","xlink:href":function(d){return ImageUtil.getScalableNodeFlowmapIcon(d)}});var circleContainer=item.select(".adsNodeCountContainer");this.addMouseTarget(circleContainer)},NodeNodeRenderer.prototype.drawMachineIconWithRing=function(item){var innerCircleRadius=this.nodeRadius-this.outerRadius,circleContainer=item.append("g").attr("class","adsNodeCountContainer");this.createPie(circleContainer),circleContainer.append("circle").attr({cx:0,cy:0,r:innerCircleRadius,"class":"adsNodeCountBackground adsNodeCountText"}).style("fill","adsNodeCountBackground").style("stroke","#FFFFFF").style("stroke-width","1px");var nodeIconRadius=innerCircleRadius-NodeNodeRenderer.ICON_RING_ADJUSTMENT;circleContainer.append("image").attr({x:-nodeIconRadius,y:-nodeIconRadius,width:2*nodeIconRadius,height:2*nodeIconRadius,"class":"adsFlowMapNodeImage","xlink:href":function(d){return ImageUtil.getScalableNodeFlowmapIcon(d)}});var circleContainer=item.select(".adsNodeCountContainer");this.addMouseTarget(circleContainer)},NodeNodeRenderer.prototype.addAppTypeIcon=function(item,outerTierRadius){var _this=this,totalRadius=outerTierRadius+this.appServerTypeRadius,imageX=-Math.cos(Math.PI/180*45)*totalRadius,imageY=Math.sin(Math.PI/180*45)*totalRadius,tierTypeContainer=item.append("g").attr("transform","translate("+imageX+","+imageY+")"),tierTypeImage=tierTypeContainer.append("image").attr({x:-this.appServerTypeRadius,y:-2*this.appServerTypeRadius,width:2*this.appServerTypeRadius,height:2*this.appServerTypeRadius,"class":"adsFlowNodeTypeIcon adsFlowMapZoom2","xlink:href":function(d){return _this.getShapeIconURL(d)}});this.addMouseTarget(tierTypeImage)},NodeNodeRenderer.prototype.getToolTip=function(d){return d.name},NodeNodeRenderer.prototype.createPie=function(item){var pie=d3.layout.pie().sort(null),arc=d3.svg.arc().innerRadius(this.nodeRadius-this.outerRadius).outerRadius(this.nodeRadius),pieGroup=item.selectAll("path").attr("class","adsFlowMapZoom4").data(function(){return pie([1])}).enter().append("path").attr({"class":"adsNodeFlowmapNodeColor",d:arc});return pieGroup},NodeNodeRenderer.prototype.getShapeIconURL=function(node){return ImageUtil.getFlowMapComponentIconFromType(node.componentType)},NodeNodeRenderer.prototype.getContextMenuItems=function(data){var _this=this;return[{text:resourceManager.getString("ui","ms_deleteNode"),handler:function(){_this.onDeleteNode(data)}}]},NodeNodeRenderer.prototype.onDeleteNode=function(data){var deleteMessage=data.name,dialogService=AngularUtil.getADInjector().get("dialogService");dialogService.showConfirmation(resourceManager.getString("ui","ms_confirmDelete"),resourceManager.getString("ui","ms_deleteItemsConfirmation")+"<br/>"+deleteMessage,this.deleteNode.bind(this,data))},NodeNodeRenderer.prototype.deleteNode=function(data){var nodeViewService=AngularUtil.getADInjector().get("nodeViewService");nodeViewService.deleteNode(data.idNum,this.appId,data.name);var applicationViewService=AngularUtil.getADInjector().get("applicationViewService");applicationViewService.viewAppInfrastructure(this.appId)},NodeNodeRenderer.NODE_RADIUS=20,NodeNodeRenderer.OUTER_RADIUS=10,NodeNodeRenderer.SERVER_TYPE_RADIUS=10,NodeNodeRenderer.NODE_RENDERER_CLASS="adsNodeNode",NodeNodeRenderer.SHOW_OUTER_RING=!1,NodeNodeRenderer.ICON_RING_ADJUSTMENT=4,NodeNodeRenderer.HEIGHT_TO_WIDTH_PROPORTION=1.5,NodeNodeRenderer}(DefaultNodeRenderer);return NodeNodeRenderer});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/hoverCards/NodeHoverCard",["require","exports","./HoverCardBase"],function(require,exports,hoverCardBase){var NodeHoverCard=function(_super){function NodeHoverCard(data,innerCircle,baseline,flowmapViewType,logoUrl,showSparkCharts){void 0===showSparkCharts&&(showSparkCharts=!1),this.data=data,_super.call(this,data.stats,data.baselineStats,innerCircle,baseline,flowmapViewType,logoUrl,showSparkCharts)}return __extends(NodeHoverCard,_super),NodeHoverCard.prototype.decorateScope=function(scope){scope.nodeLogoPath=this.getNodeLogoPath(this.data),scope.nodeName=this.data.name,scope.nodeCount=this.data.nodeCount,scope.entityId=this.data.idNum,scope.entityType=this.data.entityType,scope.noDataDisplayString=MetricUtil.NO_DATA_DISPLAY_STRING},NodeHoverCard.prototype.makePieChart=function(normalNodes,warningNodes,criticalNodes,unknownNodes){var healthChart=ChartUtil.simplePieChart();if(healthChart.series[0].data=[{name:"Normal",y:normalNodes,color:Ext.util.CSS.getRule(".adsHoverCard .adsTierHoverNormalCount").style.color},{name:"Warning",y:warningNodes,color:Ext.util.CSS.getRule(".adsHoverCard .adsTierHoverWarningCount").style.color},{name:"Critical",y:criticalNodes,color:Ext.util.CSS.getRule(".adsHoverCard .adsTierHoverCriticalCount").style.color}],unknownNodes>0){var unknownItem={name:"Unknown",y:unknownNodes,color:Ext.util.CSS.getRule(".adsHoverCard .adsTierHoverUnknownCount").style.color};healthChart.series[0].data.push(unknownItem)}return healthChart.chart.height=55,healthChart.chart.width=135,healthChart.plotOptions.pie.center=["5%","50%"],healthChart.plotOptions.pie.innerSize=25,healthChart.plotOptions.pie.size=45,healthChart.plotOptions.pie.showInLegend=!0,healthChart.legend={align:"right",margin:-5,padding:0,x:-10,borderWidth:0,itemMarginBottom:3,layout:"vertical",verticalAlign:"middle",labelFormatter:function(){return this.y+" "+this.name},itemStyle:{color:Ext.util.CSS.getRule(".adsHoverCard .adsHoverCardBlackText").style.color,fontFamily:Ext.util.CSS.getRule(".adsHoverCard .adsHoverCardBlackText").style.fontFamily,fontWeight:Ext.util.CSS.getRule(".adsHoverCard .adsHoverCardBlackText").style.fontWeight,fontSize:"10px"},enabled:!0},healthChart},NodeHoverCard}(hoverCardBase.HoverCardBase);return NodeHoverCard});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/hoverCards/baselineSparkGraph/BaselineSparkGraph",["require","exports"],function(require,exports){var BaselineSparkGraph=function(){function BaselineSparkGraph(){return{restrict:"E",scope:{adBaselineValue:"=",adCurrentValue:"=",adUnitType:"@"},controller:"BaselineSparkGraphController",templateUrl:"app/view/components/flowmap/hoverCards/baselineSparkGraph/BaselineSparkGraphView.html"}}return BaselineSparkGraph}();exports.BaselineSparkGraph=BaselineSparkGraph;var BaselineSparkGraphController=function(_super){function BaselineSparkGraphController($scope){_super.call(this,$scope),this.$scope=$scope,$scope.controller=this,$scope.$watch("adBaselineValue",this.onBaselineValues.bind(this)),$scope.$watch("adCurrentValue",this.onCurrentValue.bind(this))}return __extends(BaselineSparkGraphController,_super),BaselineSparkGraphController.prototype.onBaselineValues=function(baseline){void 0!==baseline&&(this.errorBaselineValue=FlowRendererUtils.criticalThresholdAdjusted(baseline),this.warningBaselineValue=FlowRendererUtils.warningThresholdAdjusted(baseline),this.roundedErrorBaselineValue=ViewUtil.formatPositiveLargeNumber(this.errorBaselineValue),this.roundedWarningBaselineValue=ViewUtil.formatPositiveLargeNumber(this.warningBaselineValue),this.formattedBaselineValue=ViewUtil.formatPositiveLargeNumber(baseline.value),this.onCurrentValue(this.$scope.adCurrentValue))},BaselineSparkGraphController.prototype.onCurrentValue=function(value){if(void 0!==value){var perfState;perfState=value>this.errorBaselineValue?PerformanceState.CRITICAL:value>this.warningBaselineValue?PerformanceState.WARNING:PerformanceState.NORMAL,this.$scope.warningLevel=MetricUtil.getResponseTimeVsBaselineIndicatorPosition(value,this.warningBaselineValue,this.errorBaselineValue,perfState,53)}},BaselineSparkGraphController.$inject=["$scope"],BaselineSparkGraphController}(ControllerBase);exports.BaselineSparkGraphController=BaselineSparkGraphController,appdynamicsModule.controller("BaselineSparkGraphController",BaselineSparkGraphController),appdynamicsModule.directive(StringUtils.toCamelCase("ad-baseline-spark"),BaselineSparkGraph)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("lib/controller/services/npm/DashboardNetworkGraphUiService",["require","exports"],function(){var DashboardNetworkGraphUiService=function(_super){function DashboardNetworkGraphUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(DashboardNetworkGraphUiService,_super),DashboardNetworkGraphUiService.instance=function(){return AngularUtil.getADInjector().get("dashboardNetworkGraphUiService")},DashboardNetworkGraphUiService.prototype.getApplicationFlowEntityNetworkStatsGraphData=function(entityId,entityType,timeRange,baselineId){var path="npm/dashboardNetworkUiService/appFlowEntityNetworkStatsGraphData/"+entityId+"?entityType="+entityType+"&time-range="+timeRange+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardNetworkGraphUiService","getApplicationFlowEntityNetworkStatsGraphData",path,[entityId,entityType,timeRange,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["latency.dataTimeslices.startTime","packetLoss.dataTimeslices.startTime","throughput.dataTimeslices.startTime","tcpSocketEstablished.dataTimeslices.startTime","tcpSocketWait.dataTimeslices.startTime","tcpSocketOpen.dataTimeslices.startTime","latencyBaseline.dataTimeslices.startTime","throughputBaseline.dataTimeslices.startTime","packetLossBaseline.dataTimeslices.startTime"]),response})},DashboardNetworkGraphUiService.prototype.getApplicationFlowEntityNetworkStatsGraphData_response=function(response){return response},DashboardNetworkGraphUiService.prototype.getApplicationFlowLinkNetworkStatsGraphData=function(sourceEntityId,sourceEntityType,exitType,destinationEntityId,destinationEntityType,timeRange,baselineId){var path="npm/dashboardNetworkUiService/appFlowLinkNetworkStatsGraphData?sourceEntityId="+sourceEntityId+"&sourceEntityType="+sourceEntityType+"&exitType="+exitType+"&destinationEntityId="+destinationEntityId+"&destinationEntityType="+destinationEntityType+"&time-range="+timeRange+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardNetworkGraphUiService","getApplicationFlowLinkNetworkStatsGraphData",path,[sourceEntityId,sourceEntityType,exitType,destinationEntityId,destinationEntityType,timeRange,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));
var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["latency.dataTimeslices.startTime","packetLoss.dataTimeslices.startTime","throughput.dataTimeslices.startTime","tcpSocketEstablished.dataTimeslices.startTime","tcpSocketWait.dataTimeslices.startTime","tcpSocketOpen.dataTimeslices.startTime","latencyBaseline.dataTimeslices.startTime","throughputBaseline.dataTimeslices.startTime","packetLossBaseline.dataTimeslices.startTime"]),response})},DashboardNetworkGraphUiService.prototype.getApplicationFlowLinkNetworkStatsGraphData_response=function(response){return response},DashboardNetworkGraphUiService.prototype.getNetworkFlowStatsGraphData=function(sourceEntityId,sourceEntityType,destinationEntityId,destinationEntityType,latencyMetricId,packetLossMetricId,throughputMetricId,timeRange,baselineId){var path="npm/dashboardNetworkUiService/networkFlowStatsGraphData?sourceEntityId="+sourceEntityId+"&sourceEntityType="+sourceEntityType+"&destinationEntityId="+destinationEntityId+"&destinationEntityType="+destinationEntityType+"&latencyMetricId="+latencyMetricId+"&packetLossMetricId="+packetLossMetricId+"&throughputMetricId="+throughputMetricId+"&time-range="+timeRange+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardNetworkGraphUiService","getNetworkFlowStatsGraphData",path,[sourceEntityId,sourceEntityType,destinationEntityId,destinationEntityType,latencyMetricId,packetLossMetricId,throughputMetricId,timeRange,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["latency.dataTimeslices.startTime","packetLoss.dataTimeslices.startTime","throughput.dataTimeslices.startTime","tcpSocketEstablished.dataTimeslices.startTime","tcpSocketWait.dataTimeslices.startTime","tcpSocketOpen.dataTimeslices.startTime","latencyBaseline.dataTimeslices.startTime","throughputBaseline.dataTimeslices.startTime","packetLossBaseline.dataTimeslices.startTime"]),response})},DashboardNetworkGraphUiService.prototype.getNetworkFlowStatsGraphData_response=function(response){return response},DashboardNetworkGraphUiService.prototype.getNodeNetworkStackSummary=function(entityId,entityType,timeRange,baselineId){var path="npm/dashboardNetworkUiService/nodeNetworkStackSummary/"+entityId+"?entityType="+entityType+"&time-range="+timeRange+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardNetworkGraphUiService","getNodeNetworkStackSummary",path,[entityId,entityType,timeRange,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DashboardNetworkGraphUiService.prototype.getNodeNetworkStackSummary_response=function(response){return response},DashboardNetworkGraphUiService.prototype.getNodeNetworkStackElementDetails=function(entityId,entityType,networkStackElementType,timeRange,baselineId){var path="npm/dashboardNetworkUiService/nodeNetworkStackElementDetails/"+entityId+"?entityType="+entityType+"&networkStackElementType="+networkStackElementType+"&time-range="+timeRange+"&baselineId="+baselineId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardNetworkGraphUiService","getNodeNetworkStackElementDetails",path,[entityId,entityType,networkStackElementType,timeRange,baselineId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["latency.dataTimeslices.startTime","packetLoss.dataTimeslices.startTime","throughput.dataTimeslices.startTime","tcpSocketEstablished.dataTimeslices.startTime","tcpSocketWait.dataTimeslices.startTime","tcpSocketOpen.dataTimeslices.startTime","latencyBaseline.dataTimeslices.startTime","throughputBaseline.dataTimeslices.startTime","packetLossBaseline.dataTimeslices.startTime"]),response})},DashboardNetworkGraphUiService.prototype.getNodeNetworkStackElementDetails_response=function(response){return response},DashboardNetworkGraphUiService.prototype.getNetworkFlowGroupMetrics=function(sourceEntityId,sourceEntityType,exitType,destinationEntityId,destinationEntityType){var path="npm/dashboardNetworkUiService/networkFlowGroupDetails?sourceEntityId="+sourceEntityId+"&sourceEntityType="+sourceEntityType+"&exitType="+exitType+"&destinationEntityId="+destinationEntityId+"&destinationEntityType="+destinationEntityType,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DashboardNetworkGraphUiService","getNetworkFlowGroupMetrics",path,[sourceEntityId,sourceEntityType,exitType,destinationEntityId,destinationEntityType]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DashboardNetworkGraphUiService.prototype.getNetworkFlowGroupMetrics_response=function(response){return response},DashboardNetworkGraphUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],DashboardNetworkGraphUiService}(ControllerUiServiceBase);return appdynamicsModule.service("dashboardNetworkGraphUiService",DashboardNetworkGraphUiService),DashboardNetworkGraphUiService}),define("app/view/networkMonitoring/shared/utils/NPMUtils",["require","exports"],function(){var NPMUtils=function(){function NPMUtils(){}return NPMUtils.getFormattedThroughputValueAndUnit=function(throughput,numOfDigitsAfterDecimal){void 0===numOfDigitsAfterDecimal&&(numOfDigitsAfterDecimal=3);var isThroughput=!0,keepZeroes=!0;return Util.isDefAndNotNull(throughput)&&throughput>-1?ViewUtil.getFormattedStorageNumberAndUnit(throughput,numOfDigitsAfterDecimal,keepZeroes,isThroughput):[MetricUtil.NO_DATA_DISPLAY_STRING,""]},NPMUtils.getFormattedThroughputValueInKbps=function(throughput,numOfDigitsAfterDecimal){void 0===numOfDigitsAfterDecimal&&(numOfDigitsAfterDecimal=3);var returnValueInKbps=MetricUtil.NO_DATA_DISPLAY_STRING;if(Util.isDefAndNotNull(throughput)){var valueInKbps=throughput/1024;returnValueInKbps=valueInKbps.toFixed(3)}return returnValueInKbps},NPMUtils.getFormattedThroughputMetricValue=function(throughput){var formattedMetricValue;return Util.isDefAndNotNull(throughput.value)&&(formattedMetricValue={value:parseInt(ViewUtil.getFormattedStorageNumberAndUnit(throughput.value,3,!0,!0)[0]),min:throughput.min,max:throughput.max,current:parseInt(ViewUtil.getFormattedStorageNumberAndUnit(throughput.current,3,!0,!0)[0]),sum:throughput.sum,count:throughput.count,useRange:throughput.useRange,standardDeviation:parseInt(ViewUtil.getFormattedStorageNumberAndUnit(throughput.standardDeviation,3,!0,!0)[0]),occurances:throughput.occurances,groupCount:throughput.groupCount}),formattedMetricValue},NPMUtils.getFormattedLatencyValueAndUnit=function(latency){return Util.isDefAndNotNull(latency)&&latency>-1?[new String(latency/1e3).toString(),NPMUtils.MILLISEC]:[MetricUtil.NO_DATA_DISPLAY_STRING,""]},NPMUtils.getFormattedMetricValue=function(metric){var formattedMetricValue;return Util.isDefAndNotNull(metric.value)&&(formattedMetricValue={value:metric.value/1e3,min:metric.min,max:metric.max,current:metric.current/1e3,sum:metric.sum,count:metric.count,useRange:metric.useRange,standardDeviation:metric.standardDeviation/1e3,occurances:metric.occurances,groupCount:metric.groupCount}),formattedMetricValue},NPMUtils.getFormattedPacketLossValueAndUnit=function(packetLoss){return Util.isDefAndNotNull(packetLoss)&&packetLoss>-1?[(packetLoss/1e3).toString(),NPMUtils.PERCENTAGE]:[MetricUtil.NO_DATA_DISPLAY_STRING,""]},NPMUtils.LATENCY="LATENCY",NPMUtils.THROUGHPUT="THROUGHPUT",NPMUtils.MILLISEC="ms",NPMUtils.PERCENTAGE="%",NPMUtils}();return NPMUtils}),define("app/view/networkMonitoring/shared/NPMConstants",["require","exports"],function(){var NPMConstants=function(){function NPMConstants(){}return NPMConstants.SPARK_CHART_FOR_LINK="link",NPMConstants.SPARK_CHART_FOR_NODE="node",NPMConstants}();return NPMConstants});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/networkMonitoring/flowMap/hoverCards/sparkChart/NetworkSparkChartController",["require","exports","../../../../../../lib/controller/services/npm/DashboardNetworkGraphUiService","../../../shared/utils/NPMUtils","../../../shared/NPMConstants"],function(require,exports,DashboardNetworkGraphUiService,NPMUtils,NPMConstants){var NetworkSparkChartController=function(_super){function NetworkSparkChartController($scope){_super.call(this,$scope,resourceManager,NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.$scope.controller=this,this.showApplicationMetrics="false"==this.$scope.adIncludeApplicationMetrics?!1:!0,this.showBaselines=this.$scope.adNetStatOptions.baselineId>0?!0:!1,this.netStatOptions=this.$scope.adNetStatOptions,this.fetchData()}return __extends(NetworkSparkChartController,_super),NetworkSparkChartController.prototype.fetchData=function(){this.netStatOptions.networkStats?this.fetchDataWithMetricIDs():this.netStatOptions.sparkChartType==NPMConstants.SPARK_CHART_FOR_LINK?this.fetchDataForEdgesWithNoNetworkStats():this.fetchDataforTiersWithNoNetworkStats(),this.noDataDisplayString=MetricUtil.NO_DATA_DISPLAY_STRING},NetworkSparkChartController.prototype.fetchDataWithMetricIDs=function(){var _this=this,netStatOptions=this.netStatOptions,destinationEntityID=netStatOptions.destinationEntityID?netStatOptions.destinationEntityID:-1,destinationEntityType=netStatOptions.destinationEntityType?netStatOptions.destinationEntityType:"";DashboardNetworkGraphUiService.instance().getNetworkFlowStatsGraphData(netStatOptions.sourceEntityID,netStatOptions.sourceEntityType,destinationEntityID,destinationEntityType,netStatOptions.networkStats.latency.metricId,netStatOptions.networkStats.packetLoss.metricId,netStatOptions.networkStats.throughput.metricId,TimeRangeService.instance().getCurrentTimeRangeStringForUrl(),netStatOptions.baselineId).then(function(dashboardNetworkGraphData){dashboardNetworkGraphData&&(_this.setupSparkCharts(dashboardNetworkGraphData),_this.setPerformanceStats(dashboardNetworkGraphData))})},NetworkSparkChartController.prototype.fetchDataForEdgesWithNoNetworkStats=function(){var _this=this,netStatOptions=this.netStatOptions,destinationEntityID=netStatOptions.destinationEntityID?netStatOptions.destinationEntityID:-1,destinationEntityType=netStatOptions.destinationEntityType?netStatOptions.destinationEntityType:"";DashboardNetworkGraphUiService.instance().getApplicationFlowLinkNetworkStatsGraphData(netStatOptions.sourceEntityID,netStatOptions.sourceEntityType,netStatOptions.exitType,destinationEntityID,destinationEntityType,TimeRangeService.instance().getCurrentTimeRangeStringForUrl(),netStatOptions.baselineId).then(function(dashboardNetworkGraphData){dashboardNetworkGraphData&&(_this.setupSparkCharts(dashboardNetworkGraphData),_this.setPerformanceStats(dashboardNetworkGraphData))})},NetworkSparkChartController.prototype.fetchDataforTiersWithNoNetworkStats=function(){var _this=this,netStatOptions=this.netStatOptions;DashboardNetworkGraphUiService.instance().getApplicationFlowEntityNetworkStatsGraphData(netStatOptions.sourceEntityID,netStatOptions.sourceEntityType,TimeRangeService.instance().getCurrentTimeRangeStringForUrl(),netStatOptions.baselineId).then(function(dashboardNetworkGraphData){dashboardNetworkGraphData&&(_this.setupSparkCharts(dashboardNetworkGraphData),_this.setPerformanceStats(dashboardNetworkGraphData))})},NetworkSparkChartController.prototype.setupSparkCharts=function(graphResponse){graphResponse?(this.networkThroughputPath=graphResponse.throughput&&graphResponse.throughput.dataTimeslices?ChartUtil.createSparkChart(graphResponse.throughput.dataTimeslices):null,this.networkLatencyDataPath=graphResponse.latency&&graphResponse.latency.dataTimeslices?ChartUtil.createSparkChart(graphResponse.latency.dataTimeslices):null,this.packetLossPath=graphResponse.packetLoss&&graphResponse.packetLoss.dataTimeslices?ChartUtil.createSparkChart(graphResponse.packetLoss.dataTimeslices):null,this.addSparkChartClickHandlersAndContextMenus(graphResponse)):(ADLoggerService.log("Could not setup Spark charts as no data was returned."),this.resetSparkChartData())},NetworkSparkChartController.prototype.addSparkChartClickHandlersAndContextMenus=function(graphResponse){angular.element(".adsThroughputSpark").parent().on("contextmenu",this.onSparkChartContextMenu.bind(this,graphResponse.throughput.metricId)),angular.element(".adsLatencySpark").parent().on("contextmenu",this.onSparkChartContextMenu.bind(this,graphResponse.latency.metricId)),angular.element(".adsPacketLossSpark").parent().on("contextmenu",this.onSparkChartContextMenu.bind(this,graphResponse.packetLoss.metricId)),this.clearDblClickListeners(),angular.element(".adsThroughputSpark").parent().on(MouseEvents.DOUBLE_CLICK,this.doubleClickSparkChartHandler.bind(this,graphResponse.throughput.metricId)),angular.element(".adsLatencySpark").parent().on(MouseEvents.DOUBLE_CLICK,this.doubleClickSparkChartHandler.bind(this,graphResponse.latency.metricId)),angular.element(".adsPacketLossSpark").parent().on(MouseEvents.DOUBLE_CLICK,this.doubleClickSparkChartHandler.bind(this,graphResponse.packetLoss.metricId))},NetworkSparkChartController.prototype.clearDblClickListeners=function(){angular.element(".adsThroughputSpark").parent().off(MouseEvents.DOUBLE_CLICK),angular.element(".adsLatencySpark").parent().off(MouseEvents.DOUBLE_CLICK),angular.element(".adsPacketLossSpark").parent().off(MouseEvents.DOUBLE_CLICK)},NetworkSparkChartController.prototype.onSparkChartContextMenu=function(metricId,event){var items=this.getContextMenuItems(metricId,event);if(items){event.preventDefault();var contextMenuOptions={cls:"ad-context-menu no-icon-menu",showSeparator:!1,disableDefaultContextMenu:!0,items:items},contextMenu=Ext.create("Ext.menu.Menu",contextMenuOptions);contextMenu.showAt([event.clientX,event.clientY])}},NetworkSparkChartController.prototype.getContextMenuItems=function(metricId){var _this=this;return!isNaN(metricId)&&metricId>=0?[{text:resourceManager.getString("ui","ms_viewPerformanceMetrics"),handler:function(){MetricBrowserViewService.instance().openMetricBrowser(_this.getApplicationIdFromUrl(),metricId,EntityUtils.getEntityDefinition(_this.netStatOptions.sourceEntityType,_this.netStatOptions.sourceEntityID))}}]:null},NetworkSparkChartController.prototype.doubleClickSparkChartHandler=function(metricId){MetricBrowserViewService.instance().openMetricBrowser(this.getApplicationIdFromUrl(),metricId,EntityUtils.getEntityDefinition(this.netStatOptions.sourceEntityType,this.netStatOptions.sourceEntityID)),this.netStatOptions.closeCardFunction()},NetworkSparkChartController.prototype.setPerformanceStats=function(graphResponse){if(this.netStatOptions.networkStats){var netStats=this.netStatOptions.networkStats;this.networkThroughputValueAndUnit=netStats.throughput&&netStats.throughput.metricValue?NPMUtils.getFormattedThroughputValueAndUnit(netStats.throughput.metricValue.value):[MetricUtil.NO_DATA_DISPLAY_STRING,""],this.networkLatencyValueAndUnit=netStats.latency&&netStats.latency.metricValue?NPMUtils.getFormattedLatencyValueAndUnit(netStats.latency.metricValue.value):[MetricUtil.NO_DATA_DISPLAY_STRING,""],this.packetLossValueAndUnit=netStats.packetLoss&&netStats.packetLoss.metricValue?NPMUtils.getFormattedPacketLossValueAndUnit(netStats.packetLoss.metricValue.value):[MetricUtil.NO_DATA_DISPLAY_STRING,""]}else this.networkThroughputValueAndUnit=NPMUtils.getFormattedThroughputValueAndUnit(graphResponse.networkPerformanceStats.throughput.value),this.networkLatencyValueAndUnit=NPMUtils.getFormattedLatencyValueAndUnit(graphResponse.networkPerformanceStats.latency.value),this.packetLossValueAndUnit=NPMUtils.getFormattedPacketLossValueAndUnit(graphResponse.networkPerformanceStats.packetLoss.value);this.showBaselines&&this._setBaselinePerformanceStats(graphResponse)},NetworkSparkChartController.prototype._setBaselinePerformanceStats=function(graphResponse){var performanceValue={},baselineSparkData={};Util.isDefAndNotNull(graphResponse.throughputBaseline)&&(performanceValue.metricValue=NPMUtils.getFormattedThroughputMetricValue(graphResponse.throughputBaseline.dataTimeslices[0].metricValue),performanceValue.value=parseInt(NPMUtils.getFormattedThroughputValueAndUnit(graphResponse.throughputBaseline.dataTimeslices[0].metricValue.value)[0]),baselineSparkData.baselineValue=performanceValue,baselineSparkData.currentValue=parseInt(NPMUtils.getFormattedThroughputValueAndUnit(graphResponse.networkPerformanceStats.throughput.value)[0]),this.networkThroughputBaseline=[baselineSparkData.baselineValue,baselineSparkData.currentValue]),Util.isDefAndNotNull(graphResponse.latencyBaseline)&&(performanceValue={},baselineSparkData={},performanceValue.metricValue=NPMUtils.getFormattedMetricValue(graphResponse.latencyBaseline.dataTimeslices[0].metricValue),performanceValue.value=parseInt(NPMUtils.getFormattedLatencyValueAndUnit(graphResponse.latencyBaseline.dataTimeslices[0].metricValue.value)[0]),baselineSparkData.baselineValue=performanceValue,baselineSparkData.currentValue=parseInt(NPMUtils.getFormattedLatencyValueAndUnit(graphResponse.networkPerformanceStats.latency.value)[0]),this.networkLatencyBaseline=[baselineSparkData.baselineValue,baselineSparkData.currentValue]),Util.isDefAndNotNull(graphResponse.packetLossBaseline)&&(performanceValue={},baselineSparkData={},performanceValue.metricValue=NPMUtils.getFormattedMetricValue(graphResponse.packetLossBaseline.dataTimeslices[0].metricValue),performanceValue.value=parseInt(NPMUtils.getFormattedPacketLossValueAndUnit(graphResponse.packetLossBaseline.dataTimeslices[0].metricValue.value)[0]),baselineSparkData.baselineValue=performanceValue,baselineSparkData.currentValue=parseInt(NPMUtils.getFormattedPacketLossValueAndUnit(graphResponse.networkPerformanceStats.packetLoss.value)[0]),this.packetLossBaseline=[baselineSparkData.baselineValue,baselineSparkData.currentValue])},NetworkSparkChartController.prototype.resetSparkChartData=function(){this.networkThroughputPath=null,this.networkLatencyDataPath=null,this.packetLossPath=null},NetworkSparkChartController.$inject=["$scope"],NetworkSparkChartController}(ControllerBase);return NetworkSparkChartController}),define("app/view/networkMonitoring/flowMap/hoverCards/sparkChart/NetworkSparkChartDirective",["require","exports","app/view/networkMonitoring/flowMap/hoverCards/sparkChart/NetworkSparkChartController"],function(require,exports,NetworkSparkChartController){var NetworkSparkChartDirective=function(){function NetworkSparkChartDirective(){return{restrict:"E",scope:{adNetStatOptions:"=",adIncludeApplicationMetrics:"@"},templateUrl:"app/view/networkMonitoring/flowMap/hoverCards/sparkChart/NetworkSparkChart.html",controller:NetworkSparkChartController}}return NetworkSparkChartDirective}();exports.NetworkSparkChartDirective=NetworkSparkChartDirective,appdynamicsModule.directive(StringUtils.toCamelCase("ad-network-spark-chart"),NetworkSparkChartDirective)}),define("app/view/serverMonitoring/machines/shared/SIMConstants",["require","exports"],function(){var SIMConstants=function(){function SIMConstants(resourceManager){void 0===resourceManager&&(resourceManager=ResourceManager.instance()),this.resourceManager=resourceManager,this.HEALTH_NORMAL_ICON="images/health/normal.svg",this.HEALTH_WARNING_ICON="images/health/warning.svg",this.HEALTH_CRITICAL_ICON="images/health/critical.svg",this.HEALTH_UNKNOWN_ICON="images/health/unknown.svg",this.PERCENT=this.resourceManager.getString("ui","ms_percent"),this.KBPS=this.resourceManager.getString("ui","ms_kBps"),this.MBPS=this.resourceManager.getString("ui","ms_mBps"),this.GBPS=this.resourceManager.getString("ui","ms_gBps"),this.B=this.resourceManager.getString("ui","ms_B"),this.KB=this.resourceManager.getString("ui","ms_kB"),this.MB=this.resourceManager.getString("ui","ms_mB"),this.GB=this.resourceManager.getString("ui","ms_gB"),this.ms=this.resourceManager.getString("ui","ms_ms"),this.OS_TYPE_UNKNOWN="UNKNOWN",this.OS_TYPE_LINUX="LINUX",this.OS_TYPE_OSX="OSX",this.OS_TYPE_AIX="AIX",this.OS_TYPE_WINDOWS="WINDOWS",this.OS_TYPE_SOLARIS="SOLARIS",this.APM_APP_MODE="APM_APP_MODE",this.APM_TIER_HOVERCARD_MODE="APM_TIER_HOVERCARD_MODE",this.APM_TIER_MODE="APM_TIER_MODE",this.SIM_MODE="SIM_MODE",this.APM_SNAPSHOT_MODE="APM_SNAPSHOT_MODE",this.APM_MACHINE_MODE="APM_MACHINE_MODE",this.APM_NODE_MODE="APM_NODE_MODE",this.APM_SNAPSHOT_MACHINE_MODE="APM_SNAPSHOT_MACHINE_MODE",this.APM_SNAPSHOT_NODE_MODE="APM_SNAPSHOT_NODE_MODE",this.UEV_SIM_REFRESH_DATA="UEV_SIM_REFRESH_DATA",this.UEV_SIM_DASH_SET_MACHINE_NAME="UEV_SIM_DASH_SET_MACHINE_NAME",this.MACHINE_ENABLED="ENABLED",this.MACHINE_DISABLED="DISABLED",this.OS_ICON_UNKNOWN="images/sim/os/unknown.svg",this.OS_ICON_LINUX="images/sim/os/linux.svg",this.OS_ICON_OSX="images/sim/os/osx.svg",this.OS_ICON_AIX="images/sim/os/aix.svg",this.OS_ICON_SOLARIS="images/sim/os/solaris.svg",this.OS_ICON_WINDOWS="images/sim/os/windows.svg",this.STATUS_CODE="STATUS_CODE",this.NUMBER="NUMBER",this.TEXT="TEXT"}return SIMConstants.instance=function(){return AngularUtil.getADInjector().get(SIMConstants.SERVICE_NAME)},SIMConstants.SERVICE_NAME="simConstants",SIMConstants}();return appdynamicsModule.service(SIMConstants.SERVICE_NAME,SIMConstants),SIMConstants}),define("app/view/serverMonitoring/machines/shared/SIMValueFormatter",["require","exports","./SIMConstants"],function(require,exports,SIMConstants){var SIMValueFormatter=function(){function SIMValueFormatter(simConstants){void 0===simConstants&&(simConstants=SIMConstants.instance()),this.simConstants=simConstants,this.multiplierMap={},this.buildMultiplierMap()}return SIMValueFormatter.instance=function(){return AngularUtil.getADInjector().get(SIMValueFormatter.SERVICE_NAME)},SIMValueFormatter.prototype.buildMultiplierMap=function(){this.multiplierMap={},this.multiplierMap[this.simConstants.KBPS]={multiplier:ViewUtil.BYTES_PER_KB,unit:"B/s"},this.multiplierMap[this.simConstants.MBPS]={multiplier:ViewUtil.BYTES_PER_MB,unit:"B/s"},this.multiplierMap[this.simConstants.GBPS]={multiplier:ViewUtil.BYTES_PER_GB,unit:"B/s"},this.multiplierMap[this.simConstants.B]={multiplier:1,unit:"B"},this.multiplierMap[this.simConstants.KB]={multiplier:ViewUtil.BYTES_PER_KB,unit:"B"},this.multiplierMap[this.simConstants.MB]={multiplier:ViewUtil.BYTES_PER_MB,unit:"B"},this.multiplierMap[this.simConstants.GB]={multiplier:ViewUtil.BYTES_PER_GB,unit:"B"}},SIMValueFormatter.prototype.percentFormatter=function(value){var formattedValue=ViewUtil.formatPositiveNumber(value,1,1);return{plainValue:value,baseUnit:this.simConstants.PERCENT,formattedUnit:this.simConstants.PERCENT,formattedValue:formattedValue}},SIMValueFormatter.prototype.unitFormatter=function(existingUnit,value){if(!existingUnit||""==existingUnit)return this.numberFormatter(value);var suffixToNumberMap={KB:ViewUtil.BYTES_PER_KB,MB:ViewUtil.BYTES_PER_MB,GB:ViewUtil.BYTES_PER_GB},unitMultiplier=this.multiplierMap[existingUnit]?this.multiplierMap[existingUnit].multiplier:1,baseUnit=this.multiplierMap[existingUnit]?this.multiplierMap[existingUnit].unit:"",plainValue=Util.isUndefOrNull(value)?null:value*unitMultiplier,valueAndUnit=ViewUtil.getFormattedStorageNumberAndUnit(plainValue,1,!0),formattedMultiplier=suffixToNumberMap[valueAndUnit[1]]||1;valueAndUnit[1]=suffixToNumberMap[valueAndUnit[1]]?valueAndUnit[1].charAt(0):"";var formattedValue=valueAndUnit[0],formattedUnit="",tmpNumber=parseFloat(valueAndUnit[0]);return!isNaN(tmpNumber)&&parseFloat(valueAndUnit[0])>0?(tmpNumber>100&&(formattedValue=Math.round(tmpNumber).toString()),formattedUnit=valueAndUnit[1].toUpperCase()+baseUnit):formattedUnit=existingUnit,{plainValue:plainValue,baseUnit:baseUnit,multiplier:unitMultiplier,formattedUnit:formattedUnit,formattedValue:formattedValue,formattedMultiplier:formattedMultiplier}},SIMValueFormatter.prototype.numberFormatter=function(value){var plainValue=value,valueAndUnit=ViewUtil.formatLargeNumber(value,2,100,!0).split(/([aA-zZ])/),formattedValue=valueAndUnit[0],formattedUnit=valueAndUnit[1]||"",suffixToNumberMap={k:1e3,m:1e6,b:1e9},formattedMultiplier=suffixToNumberMap[valueAndUnit[1]]||1;return{plainValue:plainValue,baseUnit:"",multiplier:1,formattedUnit:formattedUnit,formattedValue:formattedValue,formattedMultiplier:formattedMultiplier}},SIMValueFormatter.SERVICE_NAME="simValueFormatter",SIMValueFormatter}();exports.SIMValueFormatter=SIMValueFormatter,appdynamicsModule.service(SIMValueFormatter.SERVICE_NAME,SIMValueFormatter)}),define("app/view/serverMonitoring/machines/shared/SIMDataFetcher",["require","exports","./SIMVOConverter","./SIMUtil"],function(require,exports,SIMVOConverter,SIMUtil){var SIMDataFetcher=function(){function SIMDataFetcher(simMachinesService,simMetricDataService,simHealthService,samTargetsHttpUserService,$q,simVOConverter,simUtil){void 0===simMachinesService&&(simMachinesService=SimMachinesService.instance()),void 0===simMetricDataService&&(simMetricDataService=SimMetricDataService.instance()),void 0===simHealthService&&(simHealthService=SimHealthService.instance()),void 0===samTargetsHttpUserService&&(samTargetsHttpUserService=SamTargetsHttpUserService.instance()),void 0===$q&&($q=InjectorService.instance().$q()),void 0===simVOConverter&&(simVOConverter=SIMVOConverter.instance()),void 0===simUtil&&(simUtil=SIMUtil.instance()),this.simMachinesService=simMachinesService,this.simMetricDataService=simMetricDataService,this.simHealthService=simHealthService,this.samTargetsHttpUserService=samTargetsHttpUserService,this.$q=$q,this.simVOConverter=simVOConverter,this.simUtil=simUtil}return SIMDataFetcher.instance=function(){return AngularUtil.getADInjector().get(SIMDataFetcher.SERVICE_NAME)},SIMDataFetcher.prototype.getAverages=function(timeRange,machineIds,metrics){return this.getMachinesMetrics(timeRange,machineIds,metrics,[1])},SIMDataFetcher.prototype.getAveragesAndAll=function(timeRange,machineIds,metrics,baseline){return void 0===baseline&&(baseline=null),this.getMetricsAveragesAndAll(timeRange,machineIds,metrics,[1],baseline)},SIMDataFetcher.prototype.getHealth=function(timeRange,machineIds){var _this=this,promise=this._getPromise();if(null==promise){var healthQueryDto={timeRangeSpecifier:timeRange,machineIds:machineIds};promise=this.simHealthService.queryHealth(healthQueryDto)}return promise.then(function(healthData){return _this.$q.when(healthData.health)},function(err){return ADLoggerService.error("error retrieving health data."),_this.$q.reject(err)})},SIMDataFetcher.prototype.getMetricsPerRollupPoints=function(timeRange,machineIds,metrics,rollupPoints){var _this=this;void 0===rollupPoints&&(rollupPoints=null),rollupPoints=rollupPoints||[1];var metricSearchFilter=this._getSearchFilter(timeRange,machineIds,metrics,rollupPoints),promise=this._getPromise();return null==promise&&(promise=this.simMetricDataService.queryMachineMetrics(metricSearchFilter)),promise.then(function(dto){for(var metricDtoVOs=[],i=0;i<rollupPoints.length;i++)metricDtoVOs.push(_this.simVOConverter.extractMetrics(machineIds,metrics,dto.data[rollupPoints[i]]));return _this.$q.when(metricDtoVOs)},function(err){return ADLoggerService.error("Error fetching machine metrics."),_this.$q.reject(err)})},SIMDataFetcher.prototype.getMetricsAveragesAndAll=function(timeRange,machineIds,metrics,rollupPoints,baseline,isNodeAPI){var _this=this;void 0===rollupPoints&&(rollupPoints=null),void 0===baseline&&(baseline=null),void 0===isNodeAPI&&(isNodeAPI=!1),rollupPoints=rollupPoints||[1];var metricSearchFilter=this._getSearchFilter(timeRange,machineIds,metrics,rollupPoints,baseline),promise=this._getPromise();return isNodeAPI?promise=this.simMetricDataService.queryNodeMetrics(metricSearchFilter):null==promise&&(promise=this.simMetricDataService.queryMachineMetrics(metricSearchFilter)),promise.then(function(dto){var metricDtoVOAvg=_this.simVOConverter.extractMetrics(machineIds,metrics,dto.data[rollupPoints[0]]),metricDtoVOAll=_this.simVOConverter.extractMetrics(machineIds,metrics,dto.data[0]);return _this.$q.when([metricDtoVOAvg,metricDtoVOAll])},function(err){return ADLoggerService.error("Error fetching machine metrics."),_this.$q.reject(err)})},SIMDataFetcher.prototype.getMachinesMetrics=function(timeRange,machineIds,metrics,rollupPoints){var _this=this;void 0===rollupPoints&&(rollupPoints=null),rollupPoints=rollupPoints||[1];var metricSearchFilter=this._getSearchFilter(timeRange,machineIds,metrics,rollupPoints),promise=this._getPromise();return null==promise&&(promise=this.simMetricDataService.queryMachineMetrics(metricSearchFilter)),promise.then(function(dto){for(var metricDtoVOs=[],i=0;i<rollupPoints.length;i++){for(var tmpDtos=_this.simVOConverter.extractMetrics(machineIds,metrics,dto.data[rollupPoints[i]]),j=0;j<tmpDtos.length;j++)tmpDtos[j].rollupPoints=rollupPoints[i];metricDtoVOs=metricDtoVOs.concat(tmpDtos)}return _this.$q.when(metricDtoVOs)},function(err){return ADLoggerService.error("Error fetching machine metrics."),_this.$q.reject(err)})},SIMDataFetcher.prototype.getMachinesByAPMFilter=function(appIds,tierIds,nodeIds,machineIds){var _this=this;void 0===appIds&&(appIds=[]),void 0===tierIds&&(tierIds=[]),void 0===nodeIds&&(nodeIds=[]),void 0===machineIds&&(machineIds=null),appIds=appIds||[],tierIds=tierIds||[],nodeIds=nodeIds||[];var promise=this._getPromise([]);return null!=promise?promise:null==machineIds?(promise=this.simMachinesService.getMachines(appIds.toString(),tierIds.toString(),nodeIds.toString()),promise.then(function(result){var dtos=result;return _.forEach(dtos,function(dto){dto=_this.simVOConverter.convertToVO(dto)}),_this.$q.when(dtos)},function(err){return ADLoggerService.error(ResourceManager.instance().getString("ui","ms_sim_err_retrieving_machine_summary")),NotificationService.instance().displayError(ResourceManager.instance().getString("ui","ms_sim_err_retrieving_machine_summary"),""),_this.$q.reject(err)})):(promise=this.simMachinesService.getMachine(machineIds[0]),promise.then(function(result){var dto=_this.simVOConverter.convertToVO(result);return _this.$q.when([dto])},function(err){return ADLoggerService.error(ResourceManager.instance().getString("ui","ms_sim_err_retrieving_machine_summary")),NotificationService.instance().displayError(ResourceManager.instance().getString("ui","ms_sim_err_retrieving_machine_summary"),""),_this.$q.reject(err)}))},SIMDataFetcher.prototype.getAllMachinesSummary=function(machineIds){return void 0===machineIds&&(machineIds=null),this.getMachinesByAPMFilter(null,null,null,machineIds)},SIMDataFetcher.prototype.getMachinesHealthSummaryForApp=function(timeRange,appId,tierId){var _this=this;void 0===appId&&(appId=null),void 0===tierId&&(tierId=null);var machineHealthSummary={criticalCount:0,normalCount:0,warningCount:0,unknownCount:0,isVisible:!1},allMachines=[],idToMachineMap={},deferred=this.$q.defer(),tierIds=Util.isDefAndNotNull(tierId)?[tierId]:[],appIds=Util.isDefAndNotNull(appId)?[appId]:[],promise=this._getPromise();if(null!=promise)return promise;var healthMetricScheduler=this.simUtil.getHealthMetricScheduler(timeRange);return this.getMachinesByAPMFilter(appIds,tierIds).then(function(fetchedMachines){allMachines=fetchedMachines,machineHealthSummary.unknownCount=allMachines.length,idToMachineMap=_.indexBy(allMachines,"id");
var simEnabledMachines=_.filter(fetchedMachines,function(machine){return machine.simEnabled}),simEnabledMachineIds=_.pluck(simEnabledMachines,"id");return 0==simEnabledMachineIds.length?{}:_this.getMachineHealthInBatch(healthMetricScheduler,simEnabledMachineIds)}).then(function(machineIdToHealthMap){var machineIds=_.keys(machineIdToHealthMap);_.each(allMachines,function(machine){machine.health=machineIdToHealthMap[machine.id]||{healthStatus:SimMachineHealth.UNKNOWN,normalCount:0,criticalCount:0,warningCount:0,unknownCount:0}});var healthCountMap=_.countBy(machineIds,function(machineId){return machineIdToHealthMap[machineId].healthStatus});machineHealthSummary.criticalCount=healthCountMap[SimMachineHealth.CRITICAL]||0,machineHealthSummary.normalCount=healthCountMap[SimMachineHealth.NORMAL]||0,machineHealthSummary.warningCount=healthCountMap[SimMachineHealth.WARNING]||0,machineHealthSummary.unknownCount=allMachines.length-(machineHealthSummary.criticalCount+machineHealthSummary.normalCount+machineHealthSummary.warningCount),machineHealthSummary.isVisible=!0}).finally(function(){healthMetricScheduler.clear(),deferred.resolve([allMachines,machineHealthSummary])}),deferred.promise},SIMDataFetcher.prototype.getAllMachinesAndHealth=function(timeRangeString){var deferred=this.$q.defer(),promise=this._getPromise();if(null!=promise)return promise;var healthSummary={},machines=[];return healthSummary.normal=0,healthSummary.critical=0,healthSummary.warning=0,healthSummary.undefined=0,healthSummary.unknown=0,this.getMachinesHealthSummaryForApp(timeRangeString).then(function(machinesAndHealthSummary){var machineHealthSummary=machinesAndHealthSummary[1];machines=machinesAndHealthSummary[0],healthSummary.normal=machineHealthSummary.normalCount||0,healthSummary.critical=machineHealthSummary.criticalCount||0,healthSummary.warning=machineHealthSummary.warningCount||0,healthSummary.unknown=machineHealthSummary.unknownCount||0}).finally(function(){deferred.resolve([machines,healthSummary])}),deferred.promise},SIMDataFetcher.prototype.getSimHealthFromMachine=function(machine){return machine.health},SIMDataFetcher.prototype.getSAMTargetById=function(targetId){var _this=this,deferred=this.$q.defer(),unknown=ResourceManager.instance().getString("ui","ms_unknown");return this.samTargetsHttpUserService.getSamTarget(targetId).then(function(target){var targetVO=target;targetVO.machineName=unknown,_this.getAllMachinesSummary([target.machineId]).then(function(machines){var machineName=machines[0]?machines[0].name:unknown;targetVO.machineName=machineName}).finally(function(){deferred.resolve(targetVO)})},function(err){deferred.reject(err)}),deferred.promise},SIMDataFetcher.prototype.getAllSAMConfigs=function(){var _this=this,deferred=this.$q.defer(),promise=this._getPromise();return null!=promise?promise:(this.samTargetsHttpUserService.getSamTargets().then(function(targets){_this.getAllMachinesSummary().then(function(machines){_this._updateSAMConfigs(targets,machines)}).finally(function(){deferred.resolve(targets)})},function(err){deferred.reject(err)}),deferred.promise)},SIMDataFetcher.prototype.getMachineMetricsInBatch=function(metricScheduler,machineIds,metrics){var metricDtoVOs=[],deferred=this.$q.defer();machineIds=_.unique(machineIds)||[],metrics=metrics||[];var count=machineIds.length*metrics.length;if(0==count)deferred.resolve([]);else{var fetchedCount=0;_.each(machineIds,function(machineId){_.each(metrics,function(metricName){var promise=metricScheduler.addRequest(machineId,metricName);promise.then(function(metricDtoVO){metricDtoVOs.push(metricDtoVO)}).finally(function(){fetchedCount++,fetchedCount==count&&deferred.resolve(metricDtoVOs)})})})}return deferred.promise},SIMDataFetcher.prototype.getMachineHealthInBatch=function(metricScheduler,machineIds){var healthDto={},deferred=this.$q.defer();machineIds=machineIds||[];var count=machineIds.length;if(0==count)deferred.resolve({});else{var fetchedCount=0;_.each(machineIds,function(machineId){var promise=metricScheduler.addRequest(machineId,"");promise.then(function(health){healthDto[machineId]=health}).finally(function(){fetchedCount++,fetchedCount==count&&deferred.resolve(healthDto)})})}return deferred.promise},SIMDataFetcher.prototype._updateSAMConfigs=function(targets,machines){var machineIdToServiceMap=_.groupBy(targets,function(target){return target.machineId}),unknown=ResourceManager.instance().getString("ui","ms_unknown");_.each(targets,function(target){target.machineName=unknown}),_.each(machines,function(machine){_.each(machineIdToServiceMap[machine.id],function(target){target.machineName=machine.name})})},SIMDataFetcher.prototype._getSearchFilter=function(timeRange,machineIds,metrics,rollupPoints,baseline){void 0===rollupPoints&&(rollupPoints=null),void 0===baseline&&(baseline=null);var metricSearchFilter={};return metricSearchFilter.timeRange=timeRange,metricSearchFilter.metricNames=metrics,metricSearchFilter.rollups=rollupPoints,metricSearchFilter.ids=machineIds,metricSearchFilter.baselineId=baseline?baseline.id:null,metricSearchFilter},SIMDataFetcher.prototype._getPromise=function(resolveWith){if(ServerMonitoringViewService.instance().isSIMEnabled())return null;var deferred=this.$q.defer();return resolveWith?deferred.resolve(resolveWith):deferred.reject(),deferred.promise},SIMDataFetcher.SERVICE_NAME="simDataFetcher",SIMDataFetcher}();return appdynamicsModule.service(SIMDataFetcher.SERVICE_NAME,SIMDataFetcher),SIMDataFetcher}),define("app/view/serverMonitoring/machines/machine/dash/SIMMachineDashModeService",["require","exports","../../shared/SIMConstants"],function(require,exports,SIMConstants){var SIMMachineDashModeService=function(){function SIMMachineDashModeService(simConstants,serverMonitoringViewService){void 0===simConstants&&(simConstants=SIMConstants.instance()),void 0===serverMonitoringViewService&&(serverMonitoringViewService=ServerMonitoringViewService.instance()),this.simConstants=simConstants,this.serverMonitoringViewService=serverMonitoringViewService,this._setupSIMAppId()}return SIMMachineDashModeService.instance=function(){return AngularUtil.getADInjector().get(SIMMachineDashModeService.SERVICE_NAME)},SIMMachineDashModeService.prototype.setupMode=function(mode,appId){switch(void 0===appId&&(appId=null),this._mode=mode,mode){case this.simConstants.APM_SNAPSHOT_NODE_MODE:this._appId=appId;break;case this.simConstants.APM_NODE_MODE:this._appId=URLParams.getCurrentUrlParams().applicationId();break;default:this._setupSIMAppId()}},SIMMachineDashModeService.prototype.resetMode=function(){this._mode=null,this._setupSIMAppId()},SIMMachineDashModeService.prototype.getTimeRangeForCurrentSetup=function(){var timeRange=this._mode==this.simConstants.APM_SNAPSHOT_MACHINE_MODE||this._mode==this.simConstants.APM_SNAPSHOT_NODE_MODE?URLParams.getCurrentUrlParams().rsdTime():TimeRangeService.instance().getCurrentTimeRangeStringForUrl();return timeRange},SIMMachineDashModeService.prototype.getMode=function(){return this._mode},SIMMachineDashModeService.prototype.getAppId=function(){return this._appId?this._appId:URLParams.getCurrentUrlParams().applicationId()},SIMMachineDashModeService.prototype._setupSIMAppId=function(){var _this=this;this.serverMonitoringViewService.fetchSIMSpecificData().then(function(appId){_this._appId=appId},function(){_this._appId=-1})},SIMMachineDashModeService.$inject=[],SIMMachineDashModeService.SERVICE_NAME="simMachineDashModeService",SIMMachineDashModeService}();return appdynamicsModule.service(SIMMachineDashModeService.SERVICE_NAME,SIMMachineDashModeService),SIMMachineDashModeService}),define("app/view/serverMonitoring/shared/SIMMetricScheduler",["require","exports","../machines/shared/SIMDataFetcher","../machines/machine/dash/SIMMachineDashModeService"],function(require,exports,SIMDataFetcher,SIMMachineDashModeService){var SIMMetricScheduler=function(){function SIMMetricScheduler($timeout,$q,timeRangeService,simDataFetcher,simDashModeService,requestsInterval,requestsSize,useInterval,rollupPoints,timeRange,isHealth){this.$timeout=$timeout,this.$q=$q,this.timeRangeService=timeRangeService,this.simDataFetcher=simDataFetcher,this.simDashModeService=simDashModeService,this.requestsInterval=requestsInterval,this.requestsSize=requestsSize,this.useInterval=useInterval,this.rollupPoints=rollupPoints,this.timeRange=timeRange,this.isHealth=isHealth,this._metricToDeferredMapIn={},this._requestedMetricsToDeferredMap={}}return SIMMetricScheduler.prototype.addRequest=function(machineId,metricName){var deferred=this.$q.defer(),promise=deferred.promise;this.isHealth&&(metricName="");var uniqueMetricId=this._getUniqueMetricId(machineId,metricName);return this._requestedMetricsToDeferredMap[uniqueMetricId]?(this._requestedMetricsToDeferredMap[uniqueMetricId].deferred.reject(),this._requestedMetricsToDeferredMap[uniqueMetricId].deferred=deferred):this._metricToDeferredMapIn[uniqueMetricId]={machineId:machineId,metricName:metricName,deferred:deferred},this._tryRequests(),promise},SIMMetricScheduler.prototype.clear=function(){var _this=this;this._timeoutId&&(this.$timeout.cancel(this._timeoutId),this._timeoutId=null);var keys=_.keys(this._metricToDeferredMapIn);_.each(keys,function(key){_this._metricToDeferredMapIn[key].deferred.reject(),delete _this._metricToDeferredMapIn[key]})},SIMMetricScheduler.prototype._getUniqueMetricId=function(machineId,metricName){return machineId+"-"+metricName},SIMMetricScheduler.prototype._cleanup=function(key,metricToDeferredMap,requestedMetrics){delete metricToDeferredMap[key],delete requestedMetrics[key]},SIMMetricScheduler.prototype._tryRequests=function(){var _this=this;!this.useInterval&&_.size(this._metricToDeferredMapIn)>=this.requestsSize?(this.$timeout.cancel(this._timeoutId),this._timeoutId=null,this._makeRequest()):this._timeoutId||(this._timeoutId=this.$timeout(function(){_this._makeRequest()},this.requestsInterval))},SIMMetricScheduler.prototype._makeRequest=function(){var serverRequestsMap=this._metricToDeferredMapIn;this._metricToDeferredMapIn={},this._fetchData(serverRequestsMap),this._timeoutId=null},SIMMetricScheduler.prototype._fetchHealth=function(timeRange,machineIds,metricToDeferredMap){var _this=this;this.simDataFetcher.getHealth(timeRange,machineIds).then(function(machineIdToHealthMap){_.each(machineIdToHealthMap,function(healthDataDto,machineId){var key=_this._getUniqueMetricId(machineId,"");if(metricToDeferredMap[key]){var metricRequest=metricToDeferredMap[key];metricRequest.deferred.resolve(healthDataDto),_this._cleanup(key,metricToDeferredMap,_this._requestedMetricsToDeferredMap)}})}).finally(function(){_.each(metricToDeferredMap,function(request,key){request.deferred.resolve({healthStatus:null,normalCount:0,warningCount:0,criticalCount:0}),_this._cleanup(key,metricToDeferredMap,_this._requestedMetricsToDeferredMap)})})},SIMMetricScheduler.prototype._fetchMetrics=function(timeRange,machineIds,metrics,metricToDeferredMap){var _this=this;this.simDataFetcher.getMachinesMetrics(timeRange,machineIds,metrics,[this.rollupPoints]).then(function(metricDtoVOs){_.each(metricDtoVOs,function(metricDtoVO){var key=_this._getUniqueMetricId(metricDtoVO.infraId,metricDtoVO.metricName);if(metricToDeferredMap[key]){var metricRequest=metricToDeferredMap[key];metricRequest.deferred.resolve(metricDtoVO),_this._cleanup(key,metricToDeferredMap,_this._requestedMetricsToDeferredMap)}})}).finally(function(){_.each(metricToDeferredMap,function(request,key){request.deferred.resolve({infraId:request.machineId,metricId:null,metricName:request.metricName,values:[],timestamps:[],frequency:null,isAllNull:!0,rollupPoints:_this.rollupPoints,baselineValues:[],reportingEntityId:null}),_this._cleanup(key,metricToDeferredMap,_this._requestedMetricsToDeferredMap)})})},SIMMetricScheduler.prototype._fetchData=function(metricToDeferredMap){var _this=this,metrics=_.unique(_.pluck(metricToDeferredMap,"metricName"))||[],machineIds=_.pluck(metricToDeferredMap,"machineId")||[];if(machineIds=_.unique(machineIds),0!=machineIds.length){var timeRange=this.simDashModeService.getTimeRangeForCurrentSetup();_.each(metricToDeferredMap,function(request,key){_this._requestedMetricsToDeferredMap[key]=request}),this.isHealth?this._fetchHealth(timeRange,machineIds,metricToDeferredMap):this._fetchMetrics(timeRange,machineIds,metrics,metricToDeferredMap)}},SIMMetricScheduler}();exports.SIMMetricScheduler=SIMMetricScheduler;var SIMMetricSchedulerFactory=function(){function SIMMetricSchedulerFactory(){}return SIMMetricSchedulerFactory.instance=function(){return AngularUtil.getADInjector().get(SIMMetricSchedulerFactory.SERVICE_NAME)},SIMMetricSchedulerFactory.prototype.getInstance=function(requestsInterval,requestsSize,useInterval,rollupPoints,timeRange,isHealth){void 0===requestsSize&&(requestsSize=50),void 0===useInterval&&(useInterval=!1),void 0===rollupPoints&&(rollupPoints=50),void 0===timeRange&&(timeRange=null),void 0===isHealth&&(isHealth=!1);var scheduler=new SIMMetricScheduler(InjectorService.instance().$timeout(),InjectorService.instance().$q(),TimeRangeService.instance(),SIMDataFetcher.instance(),SIMMachineDashModeService.instance(),requestsInterval,requestsSize,useInterval,rollupPoints,timeRange,isHealth);return scheduler},SIMMetricSchedulerFactory.SERVICE_NAME="simMetricSchedulerFactory",SIMMetricSchedulerFactory}();exports.SIMMetricSchedulerFactory=SIMMetricSchedulerFactory,appdynamicsModule.service(SIMMetricSchedulerFactory.SERVICE_NAME,SIMMetricSchedulerFactory)}),define("app/view/serverMonitoring/machines/shared/SIMUtil",["require","exports","./SIMConstants","./SIMValueFormatter","../../shared/SIMMetricScheduler"],function(require,exports,SIMConstants,simFormatterModule,simMetricSchedulerModule){var SIMValueFormatter=simFormatterModule.SIMValueFormatter,SIMMetricSchedulerFactory=simMetricSchedulerModule.SIMMetricSchedulerFactory,SIMUtil=function(){function SIMUtil(simConstants,simValueFormatter,serverMonitoringViewService,$q,simMetricSchedulerFactory){void 0===simConstants&&(simConstants=SIMConstants.instance()),void 0===simValueFormatter&&(simValueFormatter=SIMValueFormatter.instance()),void 0===serverMonitoringViewService&&(serverMonitoringViewService=ServerMonitoringViewService.instance()),void 0===$q&&($q=InjectorService.instance().$q()),void 0===simMetricSchedulerFactory&&(simMetricSchedulerFactory=SIMMetricSchedulerFactory.instance()),this.simConstants=simConstants,this.simValueFormatter=simValueFormatter,this.serverMonitoringViewService=serverMonitoringViewService,this.$q=$q,this.simMetricSchedulerFactory=simMetricSchedulerFactory,this.OS_ICON_MAP={},this.OS_TYPES=[],this.OS_TYPES_SUPPORTED=[this.simConstants.OS_TYPE_LINUX,this.simConstants.OS_TYPE_WINDOWS],this.MACHINE_STATE_ICON_MAP={},this.buildOSIconsMap()}return SIMUtil.instance=function(){return AngularUtil.getADInjector().get(SIMUtil.SERVICE_NAME)},SIMUtil.prototype.getHealthMetricScheduler=function(timeRange){var healthStatusScheduler=this.simMetricSchedulerFactory.getInstance(200,200,!1,1,timeRange,!0);return healthStatusScheduler},SIMUtil.prototype.getMetricBrowserClickHandler=function(metricDto,appId){void 0===appId&&(appId=null);var metricDtos=[],metricDataQueryScopes=[];return metricDtos=_.isArray(metricDto)?metricDto:[metricDto],metricDtos=_.compact(metricDtos),_.each(metricDtos,function(dto){metricDataQueryScopes.push({metricId:dto.metricId,entityId:dto.reportingEntityId,entityType:EntityType.APPLICATION_COMPONENT_NODE})}),0==metricDataQueryScopes.length?void 0:function(){ServerMonitoringViewService.instance().fetchSIMSpecificData().then(function(simAppId){appId||(appId=simAppId),MetricBrowserViewService.instance().openMetricBrowserDialog(appId,metricDataQueryScopes)})}},SIMUtil.prototype.setBaselineConfig=function(config){var deferred=this.$q.defer();return this.serverMonitoringViewService.fetchSIMSpecificData().then(function(appID){BaselineUiService.instance().getDefaultBaseline(appID).then(function(defaultBaseline){config.baselinesConfig={applicationId:appID,selectedBaseline:null,defaultBaseline:defaultBaseline,navLocation:NavigationDataConstants.SERVER_MONITORING_BASELINES},deferred.resolve(config)},function(error){deferred.reject(error)})}),deferred.promise},SIMUtil.prototype.getFormattedValue=function(value,existingUnit){var formattedValue=null;switch(existingUnit){case this.simConstants.PERCENT:formattedValue=this.simValueFormatter.percentFormatter(value);break;case this.simConstants.ms:formattedValue={formattedValue:ViewUtil.formatPositiveNumber(value,0,0/0,!0),formattedUnit:this.simConstants.ms};break;default:formattedValue=this.simValueFormatter.unitFormatter(existingUnit,value)}return formattedValue},SIMUtil.prototype.buildStatsObject=function(value,unit,name,avgLbl){void 0===avgLbl&&(avgLbl="");var formattedObj=this.getFormattedValue(value,unit),stat={value:formattedObj.formattedValue,unit:formattedObj.formattedUnit,name:name};return avgLbl&&(stat.tooltip=avgLbl),stat},SIMUtil.prototype.getAveragePrefixedText=function(lbl){return InjectorService.instance().resourceManager().getString("ui","ms_averageLabel")+" "+lbl},SIMUtil.prototype.getTotalForNumbers=function(values){var isUndef=!1,total=0;return values&&values.length>0?values.forEach(function(val){Util.isUndefOrNull(val)?isUndef=!0:total+=val}):isUndef=!0,isUndef?void 0:total},SIMUtil.prototype.getOSIconSrc=function(osType){var type=this.simConstants.OS_TYPE_UNKNOWN;return osType=osType||"",this.OS_ICON_MAP[osType]?this.OS_ICON_MAP[osType]:type},SIMUtil.prototype.getOSType=function(osType){var type=this.simConstants.OS_TYPE_UNKNOWN;osType=osType||"";for(var i=0;i<this.OS_TYPES.length;i++)if(osType.toUpperCase()==this.OS_TYPES[i]){type=this.OS_TYPES[i];break}return type},SIMUtil.prototype.isOSSupported=function(osType){var isSupported=!1;return-1!=this.OS_TYPES_SUPPORTED.indexOf(osType)&&(isSupported=!0),isSupported},SIMUtil.prototype.getHealthIconSrc=function(state){var src="";switch(state){case SimMachineHealth.NORMAL:src=this.simConstants.HEALTH_NORMAL_ICON;break;case SimMachineHealth.WARNING:src=this.simConstants.HEALTH_WARNING_ICON;break;case SimMachineHealth.CRITICAL:src=this.simConstants.HEALTH_CRITICAL_ICON;break;case SimMachineHealth.UNDEFINED:case SimMachineHealth.UNKNOWN:default:src=this.simConstants.HEALTH_UNKNOWN_ICON}return src},SIMUtil.prototype.buildImage=function(title,width,height,src){var img="",compiled=_.template('<img src="<%=src%>" width="<%=width%>" height="<%=height%>" title="<%=title%>"/>');return img=compiled({src:src,width:width,height:height,title:title})},SIMUtil.prototype.getToolTipForMachineHealth=function(state){var toolTip="";switch(state){case SimMachineHealth.NORMAL:toolTip=ResourceManager.instance().getString("ui","ms_machineHealthStatusTooltipNormal");break;case SimMachineHealth.WARNING:toolTip=ResourceManager.instance().getString("ui","ms_machineHealthStatusTooltipWarning");break;case SimMachineHealth.CRITICAL:toolTip=ResourceManager.instance().getString("ui","ms_machineHealthStatusTooltipCritical");break;case SimMachineHealth.UNKNOWN:case SimMachineHealth.UNDEFINED:default:toolTip=ResourceManager.instance().getString("ui","ms_machineHealthStatusTooltipUnknown")}return toolTip},SIMUtil.prototype.getStringByCombining=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i-0]=arguments[_i];var result=[].join.call(args," ");return result},SIMUtil.prototype.buildEmptyViewModel=function(title){return{view:{title:title,link:"",details:[],graphConfig:null,isLoading:!0,fillLegend:!1}}},SIMUtil.prototype.updateSparkChart=function(divId,metricDtoVO,yMax){void 0===yMax&&(yMax=null);var chart=null,elem=Ext.get(divId),data=this.buildChartPoints(metricDtoVO.timestamps,metricDtoVO.values),isAllNull=metricDtoVO.isAllNull;if(elem){var options=ChartUtil.getGridAreaChartConfig(null,null,yMax);return options.chart.renderTo=divId,options.series[0].data=data,!data||0==data.length||isAllNull?elem.setHTML(MetricUtil.NO_DATA_DISPLAY_STRING):chart=new Highcharts.Chart(options),chart}},SIMUtil.prototype.buildChartPoints=function(allXes,allYes){var chartPoints=[];return allYes.length!=allXes.length?(ADLoggerService.error("SIMUtil : Couldn't build chartPoints, x & y data points vary"),chartPoints):(allYes.forEach(function(val,index){var prev=allYes[index-1],next=allYes[index+1],dataPoint={x:allXes[index],y:allYes[index]};null!=val&&null==prev&&null==next&&(dataPoint.marker={enabled:!0,radius:2}),chartPoints.push(dataPoint)}),chartPoints)},SIMUtil.prototype.setDefaultConfig=function(seriesNames,trends,suffix,yMax,chartConfig,showBaseline){var _this=this;void 0===suffix&&(suffix="B/s"),void 0===yMax&&(yMax=null),void 0===chartConfig&&(chartConfig=null),void 0===showBaseline&&(showBaseline=!1);var colors=["MAIN_DASH_PERF_CHART_SERIES_COLOR","DATA_CHART_COLOR5"];if(trends&&chartConfig){suffix==this.simConstants.PERCENT&&(chartConfig.yAxis.max=yMax?yMax:100,chartConfig.yAxis.tickPositions=[0,chartConfig.yAxis.max]),(trends.length>1||showBaseline)&&(chartConfig.legend={align:"center",verticalAlign:"bottom"},chartConfig.chart.height=180);var legendIndex=0;trends.forEach(function(trend,index){var color=colors[index%colors.length];if(trend){var allXes=trend.timestamps||[],allYes=trend.values||[],chartPoints=_this.buildChartPoints(allXes,allYes);if(chartConfig.series.push({data:chartPoints,name:seriesNames[index],color:UiConfig.getColor(color),lineColor:UiConfig.getColor(color),lineWidth:ChartUtil.AREA_CHART_LINE_WIDTH,pointInterval:trend.frequency,tooltip:{valueSuffix:suffix},legendIndex:legendIndex}),legendIndex++,showBaseline){var baselineData=trend.baselineValues;baselineData&&0!=baselineData.length&&(chartPoints=_this.buildChartPoints(allXes,baselineData)),chartConfig.series.push({type:"spline",dashStyle:"dot",data:chartPoints,name:seriesNames[index]+" Baseline",color:UiConfig.getColor(color),lineColor:UiConfig.getColor(color),lineWidth:ChartUtil.AREA_CHART_LINE_WIDTH,pointInterval:trend.frequency,tooltip:{valueSuffix:suffix},legendIndex:legendIndex}),legendIndex++}}})}},SIMUtil.prototype.getStackedChartsConfig=function(seriesNames,trends,suffix,yMax,noFormat,showBaseline){void 0===suffix&&(suffix=null),void 0===yMax&&(yMax=null),void 0===noFormat&&(noFormat=!1),void 0===showBaseline&&(showBaseline=!1);var chartConfig=this.getChartConfig(suffix);return this.setDefaultConfig(seriesNames,trends,suffix,yMax,chartConfig,showBaseline),this.setStackedChartOptions(chartConfig),noFormat||this.setYAxisLabelFormatter(chartConfig,suffix),chartConfig},SIMUtil.prototype.getGraphConfig=function(seriesName,trend,suffix,yMax,showBaseline){void 0===suffix&&(suffix=this.simConstants.PERCENT),void 0===yMax&&(yMax=null),void 0===showBaseline&&(showBaseline=!1);var chartConfig=this.getChartConfig(suffix);return this.setDefaultConfig([seriesName],[trend],suffix,yMax,chartConfig,showBaseline),chartConfig.chart.height=ChartUtil.TWO_D_TIME_CHART_CONFIG_HEIGHT,chartConfig},SIMUtil.prototype.getLineGraphConfig=function(seriesNames,trends,suffix,yMax,showBaseline){void 0===suffix&&(suffix=""),void 0===yMax&&(yMax=null),void 0===showBaseline&&(showBaseline=!1);var chartConfig=this.getChartConfig(suffix);return this.setDefaultConfig(seriesNames,trends,suffix,yMax,chartConfig,showBaseline),this.setLineChartOptions(chartConfig),this.setYAxisLabelFormatter(chartConfig,suffix),chartConfig},SIMUtil.prototype.getChartConfig=function(suffix){void 0===suffix&&(suffix="");var chartConfig=ChartUtil.getTwoDTimeChartConfig(null,suffix);return chartConfig.series=[],chartConfig.yAxis.ceiling=null,chartConfig.yAxis.floor=0,chartConfig.yAxis.min=0,chartConfig},SIMUtil.prototype.setStackedChartOptions=function(chartConfig){chartConfig.chart.type="areaspline",chartConfig.plotOptions={areaspline:{stacking:"normal",lineWidth:ChartUtil.AREA_CHART_LINE_WIDTH,marker:{enabled:!1,radius:0}}},this.resetChartAxis(chartConfig)},SIMUtil.prototype.setLineChartOptions=function(chartConfig){chartConfig.chart.type="spline",chartConfig.plotOptions={spline:{lineWidth:ChartUtil.LINE_CHART_LINE_WIDTH,marker:{enabled:!1,radius:0}}},this.resetChartAxis(chartConfig),chartConfig.series.forEach(function(trend){trend.lineWidth=ChartUtil.LINE_CHART_LINE_WIDTH})},SIMUtil.prototype.setYAxisLabelFormatter=function(chartConfig,suffix){var self=this;chartConfig.yAxis.labels.formatter=function(){var max=null,curr=null,formattedString="";switch(suffix){case self.simConstants.PERCENT:max=self.simValueFormatter.percentFormatter(this.axis.getExtremes().max),curr=self.simValueFormatter.percentFormatter(this.value),formattedString=curr.plainValue.toString()+self.simConstants.PERCENT;break;default:max=self.simValueFormatter.unitFormatter(suffix,this.axis.getExtremes().max),curr=self.simValueFormatter.unitFormatter(suffix,this.value);for(var i=0;3>i;i++){var dupArray={},isDup=!1;if(_.forEach(this.axis.tickPositions,function(tickValue){var tmp=self.simValueFormatter.unitFormatter(suffix,tickValue),testValue=(tmp.plainValue/max.formattedMultiplier).toFixed(i);dupArray[testValue]?isDup=!0:dupArray[testValue]=testValue}),!isDup)break}formattedString=(curr.plainValue/max.formattedMultiplier).toFixed(i)+" "+max.formattedUnit}return formattedString}},SIMUtil.prototype.resetChartAxis=function(chartConfig){chartConfig.yAxis.tickPositioner=function(){var positions=[];return 0==this.dataMax?positions=this.originalTickPositions||[0,1]:(positions=this.tickPositions,positions&&positions.length>0&&(this.originalTickPositions=positions)),positions}},SIMUtil.prototype.buildOSIconsMap=function(){this.OS_TYPES=[this.simConstants.OS_TYPE_AIX,this.simConstants.OS_TYPE_LINUX,this.simConstants.OS_TYPE_OSX,this.simConstants.OS_TYPE_SOLARIS,this.simConstants.OS_TYPE_WINDOWS],this.OS_ICON_MAP[this.simConstants.OS_TYPE_UNKNOWN]=this.simConstants.OS_ICON_UNKNOWN,this.OS_ICON_MAP[this.simConstants.OS_TYPE_LINUX]=this.simConstants.OS_ICON_LINUX,this.OS_ICON_MAP[this.simConstants.OS_TYPE_OSX]=this.simConstants.OS_ICON_OSX,this.OS_ICON_MAP[this.simConstants.OS_TYPE_AIX]=this.simConstants.OS_ICON_AIX,this.OS_ICON_MAP[this.simConstants.OS_TYPE_SOLARIS]=this.simConstants.OS_ICON_SOLARIS,this.OS_ICON_MAP[this.simConstants.OS_TYPE_WINDOWS]=this.simConstants.OS_ICON_WINDOWS},SIMUtil.SERVICE_NAME="simUtil",SIMUtil.HealthStateToScoreMap={UNDEFINED:0,UNKNOWN:0,NORMAL:1,WARNING:2,CRITICAL:3},SIMUtil}();return appdynamicsModule.service(SIMUtil.SERVICE_NAME,SIMUtil),SIMUtil}),define("app/view/serverMonitoring/machines/shared/SIMVOConverter",["require","exports","./SIMUtil"],function(require,exports,SIMUtil){var SIMVOConverter=function(){function SIMVOConverter(simUtil){void 0===simUtil&&(simUtil=SIMUtil.instance()),this.simUtil=simUtil}return SIMVOConverter.instance=function(){return AngularUtil.getADInjector().get(SIMVOConverter.SERVICE_NAME)},SIMVOConverter.prototype.convertToVO=function(root){var temp=root;return temp.hierarchyJoined=temp.hierarchy.join("|"),temp.osType=this._getOSType(root),temp.isOSSupported=this.simUtil.isOSSupported(temp.osType),temp.numOfCores=this.calculateNumOfCores(root),temp.hasProperties=this.checkProperties(root),temp},SIMVOConverter.prototype.checkProperties=function(machine){return machine.properties&&0!=Object.keys(machine.properties).length?!0:!1},SIMVOConverter.prototype.calculateNumOfCores=function(machine){var cpuCores=_.map(machine.cpus,function(cpu){return cpu.coreCount});return _.reduce(cpuCores,function(core,num){return core+num},0)},SIMVOConverter.prototype.convertMachineToVO=function(root){var temp={};return temp.children=null,temp.serverData=root,temp.type=0,temp},SIMVOConverter.prototype.extractMachineDTOs=function(root){var _this=this,machines=[];return root.subGroups.forEach(function(grp){machines=machines.concat(_this.extractMachineDTOs(grp))}),root.machines.forEach(function(machineDto){machines.push(_this.convertMachineToVO(machineDto))}),machines},SIMVOConverter.prototype.getMachineDtoVO=function(root){var _this=this,machines=[];return root.subGroups.forEach(function(grp){machines=machines.concat(_this.getMachineDtoVO(grp))}),root.machines.forEach(function(machineDto){machines.push(machineDto)}),machines},SIMVOConverter.prototype.extractMetrics=function(infraIds,metricNames,objIdsToMetricData){var metricData=[];return objIdsToMetricData&&infraIds.forEach(function(infraId){metricNames.forEach(function(metricName){var iMetricDtoVO={metricId:-1,infraId:infraId,metricName:metricName,values:[],timestamps:[],frequency:0,isAllNull:!0,rollupPoints:0,baselineValues:[],reportingEntityId:-1},doRound=metricName!=SimMetricsConstants.SIM_MACHINE_AGENT_AVAIL_METRIC,simEntityMetricDataDto=objIdsToMetricData[infraId];if(simEntityMetricDataDto&&simEntityMetricDataDto.metricData[metricName]){var metricTimeSeriesDto=simEntityMetricDataDto.metricData[metricName];metricData.push(iMetricDtoVO);var metricValues=metricTimeSeriesDto.simMeasurementDtos;iMetricDtoVO.frequency=ChartTimeSeriesData.getFrequencyFromString(metricTimeSeriesDto.resolution)*ChartUtil.MILLISECONDS_PER_MINUTE,iMetricDtoVO.metricId=simEntityMetricDataDto.metricData[metricName].metricId,iMetricDtoVO.reportingEntityId=simEntityMetricDataDto.reportingEntityId,metricValues=_.sortBy(metricValues,"timestamp"),metricValues.forEach(function(measurementDto){if(iMetricDtoVO.baselineValues.push(measurementDto.baselineValue),null!=measurementDto.metricValue){var metricValue=measurementDto.metricValue.value,roundedValue=doRound?Util.getNumberToDecimalPrecision(metricValue,1):metricValue;iMetricDtoVO.values.push(roundedValue),iMetricDtoVO.isAllNull=!1}else iMetricDtoVO.values.push(null);iMetricDtoVO.timestamps.push(parseInt(measurementDto.timestamp.toString()))})}})}),metricData},SIMVOConverter.prototype._getOSType=function(machine){var type=null;return type=this.simUtil.getOSType(machine.properties&&machine.properties["OS|Kernel|Name"]?machine.properties["OS|Kernel|Name"]:null)},SIMVOConverter.SERVICE_NAME="simVOConverter",SIMVOConverter}();return appdynamicsModule.service(SIMVOConverter.SERVICE_NAME,SIMVOConverter),SIMVOConverter}),define("app/view/serverMonitoring/machines/shared/SIMMetricInterfaces",["require","exports"],function(require,exports){var sim;!function(sim){var shared;!function(shared){var metricinterfaces;!function(metricinterfaces){var METRIC_NAME=function(){function METRIC_NAME(){}return METRIC_NAME.MACHINE_STATE="STATE",METRIC_NAME.OS="OS",METRIC_NAME.HOSTID="HOSTID",METRIC_NAME.NAME="NAME",METRIC_NAME.HIERARCHY="HIERARCHY",METRIC_NAME.HEALTH="HEALTH",METRIC_NAME.VOLUME_USAGE_TREND="VOLUME_USAGE_TREND",METRIC_NAME.AVG_VOLUME_USAGE="AVG_VOLUME_USAGE_TREND",METRIC_NAME.AVG_CPU_BUSY="AVG_CPU_BUSY",METRIC_NAME.CPU_BUSY_TREND="CPU_BUSY_TREND",METRIC_NAME.AVG_MEMORY_UTILIZATION="AVG_MEMORY_UTILIZATION",METRIC_NAME.MEMORY_UTILIZATION_TREND="MEMORY_UTILIZATION_TREND",METRIC_NAME.AVG_DISK_IO_UTILIZATION="AVG_DISK_IO_UTILIZATION",METRIC_NAME.DISK_IO_UTILIZATION_TREND="DISK_IO_UTILIZATION_TREND",METRIC_NAME.AVG_NW_IO_UTILIZATION="AVG_NW_IO_UTILIZATION",METRIC_NAME.NW_IO_UTILIZATION_TREND="NW_IO_UTILIZATION_TREND",METRIC_NAME.AVG_NW_INCOMING_KB_PER_SEC="AVG_NW_INCOMING_KB_PER_SEC",METRIC_NAME.NW_INCOMING_KB_PER_SEC_TREND="NW_INCOMING_KB_PER_SEC_TREND",METRIC_NAME.AVG_NW_OUTGOING_KB_PER_SEC="AVG_NW_OUTGOING_KB_PER_SEC",METRIC_NAME.NW_OUTGOING_KB_PER_SEC_TREND="NW_OUTGOING_KB_PER_SEC_TREND",METRIC_NAME.AVG_AVAILABILITY="AVG_AVAILABILITY",METRIC_NAME.AVAILABILITY_TREND="AVG_AVAILABILITY_TREND",METRIC_NAME.AVG_THREAD_COUNT="AVG_THREAD_COUNT",METRIC_NAME.THREAD_COUNT_TREND="THREAD_COUNT_TREND",METRIC_NAME.AVG_PROCESS_COUNT="AVG_PROCESS_COUNT",METRIC_NAME.PROCESS_COUNT_TREND="PROCESS_COUNT_TREND",METRIC_NAME.MONITORED_SERVICE="MONITORED_SERVICE",METRIC_NAME.SERVICE_MACHINE="MACHINE",METRIC_NAME.SERVICE_STATE="SERVICE_STATE",METRIC_NAME.SERVICE_SUCCESS_RATE="SERVICE_SUCCESS_RATE",METRIC_NAME.SERVICE_SUCCESS_RATE_TREND="SERVICE_SUCCESS_RATE_TREND",METRIC_NAME.SERVICE_RESPONSE_TIME="SERVICE_RESPONSE_TIME",METRIC_NAME.SERVICE_RESPONSE_TIME_TREND="SERVICE_RESPONSE_TIME_TREND",METRIC_NAME.SERVICE_RESPONSE_SIZE="SERVICE_RESPONSE_SIZE",METRIC_NAME.SERVICE_RESPONSE_SIZE_TREND="SERVICE_RESPONSE_SIZE_TREND",METRIC_NAME.TOTAL_VOLUME_SIZE="TOTAL_VOLUME_SIZE",METRIC_NAME.FREE_VOLUME_SIZE="FREE_VOLUME_SIZE",METRIC_NAME.AVG_VOL_IO_UTILIZATION="AVG_VOL_IO_UTILIZATION",METRIC_NAME.VOL_IO_UTILIZATION_TREND="VOL_IO_UTILIZATION_TREND",METRIC_NAME.AVG_VOL_IO_RATE_READ="AVG_VOL_IO_RATE_READ",METRIC_NAME.VOL_IO_RATE_READ_TREND="VOL_IO_RATE_READ_TREND",METRIC_NAME.AVG_VOL_IO_RATE_WRITE="AVG_VOL_IO_RATE_WRITE",METRIC_NAME.VOL_IO_RATE_WRITE_TREND="VOL_IO_RATE_WRITE_TREND",METRIC_NAME.AVG_VOL_IO_OPS_PER_SEC_READ="AVG_VOL_IO_OPS_PER_SEC_READ",METRIC_NAME.VOL_IO_OPS_PER_SEC_READ_TREND="VOL_IO_OPS_PER_SEC_READ_TREND",METRIC_NAME.AVG_VOL_IO_OPS_PER_SEC_WRITE="AVG_VOL_IO_OPS_PER_SEC_WRITE",METRIC_NAME.VOL_IO_OPS_PER_SEC_WRITE_TREND="VOL_IO_OPS_PER_SEC_WRITE_TREND",METRIC_NAME.AVG_VOL_IO_WAIT_TIME_READ="AVG_VOL_IO_WAIT_TIME_READ",METRIC_NAME.VOL_IO_WAIT_TIME_READ_TREND="VOL_IO_WAIT_TIME_READ_TREND",METRIC_NAME.AVG_VOL_IO_WAIT_TIME_WRITE="AVG_VOL_IO_WAIT_TIME_WRITE",METRIC_NAME.VOL_IO_WAIT_TIME_WRITE_TREND="VOL_IO_WAIT_TIME_WRITE_TREND",METRIC_NAME.AVG_NW_PACKETS_RECEIVED="AVG_NW_PACKETS_RECEIVED",METRIC_NAME.NW_PACKETS_RECEIVED_TREND="NW_PACKETS_RECEIVED_TREND",METRIC_NAME.AVG_NW_PACKETS_SENT="AVG_NW_PACKETS_SENT",METRIC_NAME.NW_PACKETS_SENT_TREND="NW_PACKETS_SENT_TREND",METRIC_NAME.AVG_NW_INCOMING_CONNECTIONS="AVG_NW_INCOMING_CONNECTIONS",METRIC_NAME.NW_INCOMING_CONNECTIONS_TREND="NW_INCOMING_CONNECTIONS_TREND",METRIC_NAME.AVG_NW_OUTGOING_CONNECTIONS="AVG_NW_OUTGOING_CONNECTIONS",METRIC_NAME.NW_OUTGOING_CONNECTIONS_TREND="NW_OUTGOING_CONNECTIONS_TREND",METRIC_NAME.AVG_NW_RECEIVE_THROUGHPUT="AVG_NW_RECEIVE_THROUGHPUT",METRIC_NAME.NW_RECEIVE_THROUGHPUT_TREND="NW_RECEIVE_THROUGHPUT_TREND",METRIC_NAME.AVG_NW_SENT_THROUGHPUT="AVG_NW_SENT_THROUGHPUT",METRIC_NAME.NW_SENT_THROUGHPUT_TREND="NW_SENT_THROUGHPUT_TREND",METRIC_NAME
}();metricinterfaces.METRIC_NAME=METRIC_NAME,function(METRIC_TYPE){METRIC_TYPE[METRIC_TYPE.VALUE=0]="VALUE",METRIC_TYPE[METRIC_TYPE.TREND=1]="TREND",METRIC_TYPE[METRIC_TYPE.NA=2]="NA"}(metricinterfaces.METRIC_TYPE||(metricinterfaces.METRIC_TYPE={}));metricinterfaces.METRIC_TYPE}(metricinterfaces=shared.metricinterfaces||(shared.metricinterfaces={}))}(shared=sim.shared||(sim.shared={}))}(sim=exports.sim||(exports.sim={}))}),define("app/view/serverMonitoring/machines/list/SIMListGridDataManager",["require","exports","./../shared/SIMDataFetcher","./../shared/SIMConstants","../shared/SIMMetricInterfaces","./../shared/SIMUtil","../../shared/SIMMetricScheduler"],function(require,exports,SIMDataFetcher,SIMConstants,simSharedModule,SIMUtil,metricSchedulerModule){var METRIC_NAME=simSharedModule.sim.shared.metricinterfaces.METRIC_NAME,SIMMetricSchedulerFactory=(simSharedModule.sim.shared.metricinterfaces.METRIC_TYPE,metricSchedulerModule.SIMMetricSchedulerFactory),SIMListGridDataManager=function(){function SIMListGridDataManager(simDataFetcher,$q,simConstants,simUtil,timeRangeService,simMetricSchedulerFactory,resourceManager){this.simDataFetcher=simDataFetcher,this.$q=$q,this.simConstants=simConstants,this.simUtil=simUtil,this.timeRangeService=timeRangeService,this.simMetricSchedulerFactory=simMetricSchedulerFactory,this.resourceManager=resourceManager,this.colNamesMap={},this.timeoutId=null,this.trendColumns=[5,7,9,11,13],this.columns=[],this.mode=this.simConstants.SIM_MODE,this.tierId=-1,this.appId=-1,this._charts=[],this.initColNamesMap(),this._sparkChartScheduler=this.simMetricSchedulerFactory.getInstance(200,250,!1,50,null,!1),this._avgMetricScheduler=this.simMetricSchedulerFactory.getInstance(200,200,!1,1,null,!1),this._healthStatusScheduler=this.simMetricSchedulerFactory.getInstance(200,200,!1,1,null,!0)}return SIMListGridDataManager.createIndex=function(machineId,colIdx){return machineId+"-"+colIdx},SIMListGridDataManager.prototype.clear=function(){for(this._sparkChartScheduler&&this._sparkChartScheduler.clear(),this._avgMetricScheduler&&this._avgMetricScheduler.clear(),this._healthStatusScheduler&&this._healthStatusScheduler.clear();0!=this._charts.length;)this._charts.pop().destroy()},SIMListGridDataManager.prototype.renderValue=function(value,meta,data){var avgValue=null,dto=data.raw;switch(meta.column.dataIndex){case METRIC_NAME.AVG_CPU_BUSY:avgValue=dto.cpuAvg;break;case METRIC_NAME.AVG_MEMORY_UTILIZATION:avgValue=dto.memoryAvg;break;case METRIC_NAME.AVG_DISK_IO_UTILIZATION:avgValue=dto.diskIOAvg;break;case METRIC_NAME.AVG_NW_IO_UTILIZATION:avgValue=dto.networkIOAvg}return Util.isUndefOrNull(avgValue)&&(avgValue=Number.NaN),ViewUtil.formatPositiveNumber(avgValue,1,0/0,!0)},SIMListGridDataManager.prototype.renderHealth=function(value,column,data){var machine=data.raw,renderedText=MetricUtil.NO_DATA_DISPLAY_STRING,state=machine.health?machine.health.healthStatus:SimMachineHealth.UNKNOWN;if(column.tdAttr='title="'+this.simUtil.getToolTipForMachineHealth(state)+'"',machine.simEnabled){var src=this.simUtil.getHealthIconSrc(state);renderedText='<img class="adsSvgIconSmall" src="'+src+'"/>'}return renderedText},SIMListGridDataManager.prototype.renderOSType=function(value,column,data){var machine=data.raw,osType=machine.osType?machine.osType:this.simConstants.OS_TYPE_UNKNOWN,renderedText=MetricUtil.NO_DATA_DISPLAY_STRING;if(column.tdAttr='title="'+machine.osType+'"',machine.simEnabled){var src=this.simUtil.getOSIconSrc(osType);renderedText='<img width="20" height="20" src="'+src+'"/>'}return renderedText},SIMListGridDataManager.prototype.renderMachineState=function(value,column,data){var item=data.raw,text=item.simEnabled?resourceManager.getString("ui","ms_yes"):resourceManager.getString("ui","ms_no");return item.simEnabled?(column.tdAttr='title= "'+resourceManager.getString("ui","ms_simMachineEnabledTooltip")+'"',item.isOSSupported||(text=resourceManager.getString("ui","ms_simOSNotSupported"),column.tdAttr='title="'+resourceManager.getString("ui","ms_simOSNotSupportedMsg")+'"')):column.tdAttr='title= "'+resourceManager.getString("ui","ms_simMachineDisabledTooltip")+'"',""+text},SIMListGridDataManager.prototype.renderAreaChart=function(value,meta,data){var _this=this,dto=data.raw,divId=Ext.id(),displayText=MetricUtil.NO_DATA_DISPLAY_STRING;if(dto.simEnabled){var machineId=dto.id,metricColData=this.colNamesMap[meta.column.dataIndex];displayText=ResourceManager.instance().getString("ui","ms_loading");var metricName=metricColData.name,yMax=100;this._sparkChartScheduler.addRequest(machineId,metricName).then(function(metricDtoVO){_this.renderHighChart(divId,metricDtoVO,yMax)},function(){$("#"+divId).html(MetricUtil.NO_DATA_DISPLAY_STRING)})}return'<div id="'+divId+'" style="background-color:transparent; height:20px;width:80px; padding:0 4px">'+displayText+"</div>"},SIMListGridDataManager.prototype.renderHighChart=function(divId,metricDtoVO,yMax){void 0===yMax&&(yMax=null);var chart=this.simUtil.updateSparkChart(divId,metricDtoVO,yMax);chart&&this._charts.push(chart)},SIMListGridDataManager.prototype.fetchAllMachineSummary=function(){var _this=this;return this.mode===this.simConstants.SIM_MODE?this.fetchMachines().then(function(dtos){return _this.fetchHealthAndAverages(dtos)}):this.fetchMachinesByAppAndTierId(this.appId,this.tierId).then(function(dtos){return _this.fetchHealthAndAverages(dtos)})},SIMListGridDataManager.prototype.fetchMachinesByAppAndTierId=function(appId,tierId){return this.simDataFetcher.getMachinesByAPMFilter([appId],[tierId])},SIMListGridDataManager.prototype.fetchAverages=function(machinesList){var metrics=this.getAvgMetrics(),promise=this.simDataFetcher.getMachineMetricsInBatch(this._avgMetricScheduler,machinesList,metrics);return promise},SIMListGridDataManager.prototype.fetchMachines=function(){return this.simDataFetcher.getAllMachinesSummary()},SIMListGridDataManager.prototype.fetchHealth=function(timeRange,machineIds){var promise=this.simDataFetcher.getMachineHealthInBatch(this._healthStatusScheduler,machineIds);return promise},SIMListGridDataManager.prototype.getAvgMetrics=function(){var metrics=_.map(this.colNamesMap,function(value){return 0==value.type?value.name:null});return metrics=_.compact(metrics)},SIMListGridDataManager.prototype.getGridColumns=function(){var _this=this,getNumber=function(num){return Util.isUndefOrNull(num)||isNaN(parseFloat(num.toString()))?Number.NEGATIVE_INFINITY:parseFloat(num.toString())},compareNumbers=function(value1,value2){return value1=getNumber(value1),value2=getNumber(value2),value1>value2?1:value2>value1?-1:0},getSorter=function(metricName){return function(o1,o2){var value=0;switch(metricName){case METRIC_NAME.MACHINE_STATE:var state1=o1.raw.isOSSupported?o1.raw.simEnabled.toString():"NA",state2=o2.raw.isOSSupported?o2.raw.simEnabled.toString():"NA";value=StringUtils.compareStrings(state1,state2);break;case METRIC_NAME.NAME:value=StringUtils.compareStrings(o1.raw.name,o2.raw.name);break;case METRIC_NAME.HOSTID:value=StringUtils.compareStrings(o1.raw.hostId,o2.raw.hostId);break;case METRIC_NAME.HIERARCHY:value=StringUtils.compareStrings(o1.raw.hierarchyJoined,o2.raw.hierarchyJoined);break;case METRIC_NAME.OS:value=StringUtils.compareStrings(o1.raw.osType,o2.raw.osType);break;case METRIC_NAME.AVG_CPU_BUSY:value=compareNumbers(o1.raw.cpuAvg,o2.raw.cpuAvg);break;case METRIC_NAME.AVG_MEMORY_UTILIZATION:value=compareNumbers(o1.raw.memoryAvg,o2.raw.memoryAvg);break;case METRIC_NAME.AVG_DISK_IO_UTILIZATION:value=compareNumbers(o1.raw.diskIOAvg,o2.raw.diskIOAvg);break;case METRIC_NAME.AVG_NW_IO_UTILIZATION:value=compareNumbers(o1.raw.networkIOAvg,o2.raw.networkIOAvg);break;case METRIC_NAME.HEALTH:var health1=o1.raw.health?o1.raw.health.healthStatus:null,health2=o2.raw.health?o2.raw.health.healthStatus:null,value1=health1?SIMUtil.HealthStateToScoreMap[health1]:SIMUtil.HealthStateToScoreMap[SimMachineHealth.UNKNOWN],value2=health2?SIMUtil.HealthStateToScoreMap[health2]:SIMUtil.HealthStateToScoreMap[SimMachineHealth.UNKNOWN];return compareNumbers(value1,value2)}return value}},trendLbl=resourceManager.getString("ui","ms_trend"),percentSymbol="("+resourceManager.getString("ui","ms_percent")+")",columns=[new GridColumn({dataIndex:METRIC_NAME.OS,header:"",renderer:function(value,column,data,rowIdx,colIdx){return _this.renderOSType(value,column,data,rowIdx,colIdx)},menuDisabled:!0,flex:1,align:"center",tooltip:resourceManager.getString("ui","ms_operatingSystem"),hidden:null,sortFn:getSorter(METRIC_NAME.OS),sortable:!0,resizable:!1}),new GridColumn({dataIndex:METRIC_NAME.HOSTID,header:resourceManager.getString("ui","ms_simHostId"),renderer:this.getTooltipRenderer("hostId"),menuDisabled:!0,flex:3.5,align:"left",tooltip:resourceManager.getString("ui","ms_simHostId"),hidden:!0,sortFn:getSorter(METRIC_NAME.HOSTID),sortable:!0}),new GridColumn({dataIndex:METRIC_NAME.NAME,header:resourceManager.getString("ui","ms_name"),renderer:this.getTooltipRenderer("name"),menuDisabled:!0,flex:3.5,align:"left",tooltip:resourceManager.getString("ui","ms_name"),hidden:null,sortFn:getSorter(METRIC_NAME.NAME),sortable:!0}),new GridColumn({dataIndex:METRIC_NAME.HIERARCHY,header:resourceManager.getString("ui","ms_simHierarchy"),renderer:this.getTooltipRenderer("hierarchyJoined"),menuDisabled:!0,flex:4,align:"left",tooltip:resourceManager.getString("ui","ms_simHierarchy"),hidden:null,sortFn:getSorter(METRIC_NAME.HIERARCHY),sortable:!0}),new GridColumn({dataIndex:METRIC_NAME.HEALTH,header:resourceManager.getString("ui","ms_health"),renderer:function(value,column,data,rowIdx,colIdx){return _this.renderHealth(value,column,data,rowIdx,colIdx)},menuDisabled:!0,flex:2,align:"center",tooltip:resourceManager.getString("ui","ms_health"),hidden:null,sortFn:getSorter(METRIC_NAME.HEALTH),sortable:!0}),new GridColumn({dataIndex:METRIC_NAME.VOLUME_USAGE_TREND,header:this.simUtil.getStringByCombining(this.resourceManager.getString("ui","ms_simDiskUsage"),percentSymbol,trendLbl),renderer:function(value,column,data,rowIdx,colIdx){return _this.renderAreaChart(value,column,data,rowIdx,colIdx)},menuDisabled:!0,flex:3,align:"left",tooltip:this.simUtil.getStringByCombining(this.resourceManager.getString("ui","ms_simDiskUsage"),percentSymbol,trendLbl),hidden:!0,sortFn:null,sortable:!1}),new GridColumn({dataIndex:METRIC_NAME.AVG_CPU_BUSY,header:this.simUtil.getStringByCombining(this.resourceManager.getString("ui","ms_cpu"),percentSymbol),renderer:function(value,column,data,rowIdx,colIdx){return _this.renderValue(value,column,data,rowIdx,colIdx)},menuDisabled:!0,flex:2,align:"right",tooltip:this.simUtil.getStringByCombining(this.resourceManager.getString("ui","ms_cpu"),percentSymbol),hidden:null,sortFn:getSorter(METRIC_NAME.AVG_CPU_BUSY),sortable:!0}),new GridColumn({dataIndex:METRIC_NAME.CPU_BUSY_TREND,header:this.simUtil.getStringByCombining(this.resourceManager.getString("ui","ms_cpu"),percentSymbol,trendLbl),renderer:function(value,column,data,rowIdx,colIdx){return _this.renderAreaChart(value,column,data,rowIdx,colIdx)},menuDisabled:!0,flex:3,align:"left",tooltip:this.simUtil.getStringByCombining(this.resourceManager.getString("ui","ms_cpu"),percentSymbol,trendLbl),hidden:!0,sortFn:null,sortable:!1}),new GridColumn({dataIndex:METRIC_NAME.AVG_MEMORY_UTILIZATION,header:this.simUtil.getStringByCombining(resourceManager.getString("ui","ms_memoryLabel"),percentSymbol),renderer:function(value,column,data,rowIdx,colIdx){return _this.renderValue(value,column,data,rowIdx,colIdx)},menuDisabled:!0,flex:2,align:"right",tooltip:this.simUtil.getStringByCombining(this.resourceManager.getString("ui","ms_memoryLabel"),percentSymbol),hidden:null,sortFn:getSorter(METRIC_NAME.AVG_MEMORY_UTILIZATION),sortable:!0}),new GridColumn({dataIndex:METRIC_NAME.MEMORY_UTILIZATION_TREND,header:this.simUtil.getStringByCombining(resourceManager.getString("ui","ms_memoryLabel"),percentSymbol,trendLbl),renderer:function(value,column,data,rowIdx,colIdx){return _this.renderAreaChart(value,column,data,rowIdx,colIdx)},menuDisabled:!0,flex:3,align:"left",tooltip:this.simUtil.getStringByCombining(resourceManager.getString("ui","ms_memoryLabel"),percentSymbol,trendLbl),hidden:!0,sortFn:null,sortable:!1}),new GridColumn({dataIndex:METRIC_NAME.AVG_DISK_IO_UTILIZATION,header:this.simUtil.getStringByCombining(resourceManager.getString("ui","ms_diskIO"),percentSymbol),renderer:function(value,column,data,rowIdx,colIdx){return _this.renderValue(value,column,data,rowIdx,colIdx)},menuDisabled:!0,flex:2,align:"right",tooltip:this.simUtil.getStringByCombining(resourceManager.getString("ui","ms_diskIO"),percentSymbol),hidden:null,sortFn:getSorter(METRIC_NAME.AVG_DISK_IO_UTILIZATION),sortable:!0}),new GridColumn({dataIndex:METRIC_NAME.DISK_IO_UTILIZATION_TREND,header:this.simUtil.getStringByCombining(resourceManager.getString("ui","ms_diskIO"),percentSymbol,trendLbl),renderer:function(value,column,data,rowIdx,colIdx){return _this.renderAreaChart(value,column,data,rowIdx,colIdx)},menuDisabled:!0,flex:3,align:"left",tooltip:this.simUtil.getStringByCombining(resourceManager.getString("ui","ms_diskIO"),percentSymbol,trendLbl),hidden:!0,sortFn:null,sortable:!1}),new GridColumn({dataIndex:METRIC_NAME.AVG_NW_IO_UTILIZATION,header:this.simUtil.getStringByCombining(resourceManager.getString("ui","ms_networkIO")+" <br/>",percentSymbol),renderer:function(value,column,data,rowIdx,colIdx){return _this.renderValue(value,column,data,rowIdx,colIdx)},menuDisabled:!0,flex:2,align:"right",tooltip:this.simUtil.getStringByCombining(resourceManager.getString("ui","ms_networkIO"),percentSymbol),hidden:null,sortFn:getSorter(METRIC_NAME.AVG_NW_IO_UTILIZATION),sortable:!0}),new GridColumn({dataIndex:METRIC_NAME.NW_IO_UTILIZATION_TREND,header:this.simUtil.getStringByCombining(resourceManager.getString("ui","ms_networkIO"),percentSymbol,trendLbl),renderer:function(value,column,data,rowIdx,colIdx){return _this.renderAreaChart(value,column,data,rowIdx,colIdx)},menuDisabled:!0,flex:3,align:"left",tooltip:this.simUtil.getStringByCombining(resourceManager.getString("ui","ms_networkIO"),percentSymbol,trendLbl),hidden:!0,sortFn:null,sortable:!1}),new GridColumn({dataIndex:METRIC_NAME.MACHINE_STATE,header:"Server Monitoring Enabled",renderer:function(value,column,data,rowIdx,colIdx){return _this.renderMachineState(value,column,data,rowIdx,colIdx)},menuDisabled:!0,flex:2,align:"left",tooltip:"Server Monitoring Enabled",hidden:null,sortFn:getSorter(METRIC_NAME.MACHINE_STATE),sortable:!0})];return this.columns=columns,columns},SIMListGridDataManager.prototype.initColNamesMap=function(){this.colNamesMap[METRIC_NAME.OS]={name:"",colIdx:0,type:2},this.colNamesMap[METRIC_NAME.HOSTID]={name:"",colIdx:1,type:2},this.colNamesMap[METRIC_NAME.NAME]={name:"",colIdx:2,type:2},this.colNamesMap[METRIC_NAME.HIERARCHY]={name:"",colIdx:3,type:2},this.colNamesMap[METRIC_NAME.HEALTH]={name:"",colIdx:4,type:2},this.colNamesMap[METRIC_NAME.VOLUME_USAGE_TREND]={name:SimMetricsConstants.PARTITIONS_CUMULATIVE_USED_PCT,colIdx:5,type:1},this.colNamesMap[METRIC_NAME.AVG_CPU_BUSY]={name:HardwarePerformanceMetrics.CPU_PERCENT_BUSY,colIdx:6,type:0},this.colNamesMap[METRIC_NAME.CPU_BUSY_TREND]={name:HardwarePerformanceMetrics.CPU_PERCENT_BUSY,colIdx:7,type:1},this.colNamesMap[METRIC_NAME.AVG_MEMORY_UTILIZATION]={name:HardwarePerformanceMetrics.MEMORY_USED_PERCENT,colIdx:8,type:0},this.colNamesMap[METRIC_NAME.MEMORY_UTILIZATION_TREND]={name:HardwarePerformanceMetrics.MEMORY_USED_PERCENT,colIdx:9,type:1},this.colNamesMap[METRIC_NAME.AVG_DISK_IO_UTILIZATION]={name:SimMetricsConstants.DISKS_IO_UTILIZATION_PCT,colIdx:10,type:0},this.colNamesMap[METRIC_NAME.DISK_IO_UTILIZATION_TREND]={name:SimMetricsConstants.DISKS_IO_UTILIZATION_PCT,colIdx:11,type:1},this.colNamesMap[METRIC_NAME.AVG_NW_IO_UTILIZATION]={name:SimMetricsConstants.NETWORK_UTILIZATION_PCT,colIdx:12,type:0},this.colNamesMap[METRIC_NAME.NW_IO_UTILIZATION_TREND]={name:SimMetricsConstants.NETWORK_UTILIZATION_PCT,colIdx:13,type:1},this.colNamesMap[METRIC_NAME.MACHINE_STATE]={name:"",colIdx:14,type:2}},SIMListGridDataManager.prototype.showSparkCharts=function(columns){var indexes=this.getSparkChartColumnIndexes();indexes.forEach(function(val){columns[val].hidden=!1})},SIMListGridDataManager.prototype.hideSparkCharts=function(columns){var indexes=this.getSparkChartColumnIndexes();indexes.forEach(function(val){columns[val].hidden=!0})},SIMListGridDataManager.prototype.showHostIds=function(columns){columns[1].hidden=!1},SIMListGridDataManager.prototype.hideHostIds=function(columns){columns[1].hidden=!0},SIMListGridDataManager.prototype.getSparkChartColumnIndexes=function(){var indexes=_.pluck(_.where(this.colNamesMap,{type:1}),"colIdx");return indexes},SIMListGridDataManager.prototype.getTooltipRenderer=function(property){return function(value,column,data){var item=data.raw[property];return item?column.tdAttr='title="'+item+'"':item=MetricUtil.NO_DATA_DISPLAY_STRING,"<span>"+item+"</span>"}},SIMListGridDataManager.prototype.setAPMData=function(appId,tierId){this.appId=appId,this.tierId=tierId},SIMListGridDataManager.prototype.setMode=function(mode){this.mode=mode},SIMListGridDataManager.prototype.fetchHealthAndAverages=function(dtos){var _this=this,machineMap={},machineIds=[],machines=dtos;machines=_.flatten(machines),_.forEach(machines,function(m){m.simEnabled&&(machineMap[m.id]=m,machineIds.push(m.id))});var timeRange=this.timeRangeService.getCurrentTimeRangeStringForUrl();return this.$q.all([this.fetchHealth(timeRange,machineIds),this.fetchAverages(machineIds)]).then(function(responses){var healthResponse=responses[0],averagesResponses=responses[1];return _.forEach(machineIds,function(machineId){machineMap[machineId].health=healthResponse[machineId],_.forEach(averagesResponses,function(average){switch(average.metricName){case HardwarePerformanceMetrics.CPU_PERCENT_BUSY:machineMap[average.infraId].cpuAvg=average.values[0];break;case HardwarePerformanceMetrics.MEMORY_USED_PERCENT:machineMap[average.infraId].memoryAvg=average.values[0];break;case SimMetricsConstants.NETWORK_UTILIZATION_PCT:machineMap[average.infraId].networkIOAvg=average.values[0];break;case SimMetricsConstants.DISKS_IO_UTILIZATION_PCT:machineMap[average.infraId].diskIOAvg=average.values[0]}})}),_this.$q.when(dtos)},function(){return ADLoggerService.error("Error retrieving machines health and other metrics."),_this.$q.when(dtos)})},SIMListGridDataManager}();exports.SIMListGridDataManager=SIMListGridDataManager,function(COL_NUMBER){COL_NUMBER[COL_NUMBER.OS=0]="OS",COL_NUMBER[COL_NUMBER.HOSTID=1]="HOSTID",COL_NUMBER[COL_NUMBER.NAME=2]="NAME",COL_NUMBER[COL_NUMBER.HIERARCHY=3]="HIERARCHY",COL_NUMBER[COL_NUMBER.HEALTH=4]="HEALTH",COL_NUMBER[COL_NUMBER.VOLUME_USAGE_TREND=5]="VOLUME_USAGE_TREND",COL_NUMBER[COL_NUMBER.AVG_CPU_BUSY=6]="AVG_CPU_BUSY",COL_NUMBER[COL_NUMBER.CPU_BUSY_TREND=7]="CPU_BUSY_TREND",COL_NUMBER[COL_NUMBER.AVG_MEMORY_UTILIZATION=8]="AVG_MEMORY_UTILIZATION",COL_NUMBER[COL_NUMBER.MEMORY_UTILIZATION_TREND=9]="MEMORY_UTILIZATION_TREND",COL_NUMBER[COL_NUMBER.AVG_DISK_IO_UTILIZATION=10]="AVG_DISK_IO_UTILIZATION",COL_NUMBER[COL_NUMBER.DISK_IO_UTILIZATION_TREND=11]="DISK_IO_UTILIZATION_TREND",COL_NUMBER[COL_NUMBER.AVG_NW_IO_UTILIZATION=12]="AVG_NW_IO_UTILIZATION",COL_NUMBER[COL_NUMBER.NW_IO_UTILIZATION_TREND=13]="NW_IO_UTILIZATION_TREND",COL_NUMBER[COL_NUMBER.MACHINE_STATE=14]="MACHINE_STATE"}(exports.COL_NUMBER||(exports.COL_NUMBER={}));var SIMListGridManagerFactory=(exports.COL_NUMBER,function(){function SIMListGridManagerFactory(){}return SIMListGridManagerFactory.getNewInstance=function(){return new SIMListGridDataManager(SIMDataFetcher.instance(),InjectorService.instance().$q(),SIMConstants.instance(),SIMUtil.instance(),TimeRangeService.instance(),SIMMetricSchedulerFactory.instance(),ResourceManager.instance())},SIMListGridManagerFactory}());exports.SIMListGridManagerFactory=SIMListGridManagerFactory});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/serverMonitoring/machines/list/SIMMachinesListController",["require","exports","./../shared/SIMVOConverter","./SIMListGridDataManager","../../../common/GridViewStateBase","../shared/SIMConstants"],function(require,exports,SIMVOConverter,gridModule,gridViewStateModule,SIMConstants){var SIMMachinesListController=function(_super){function SIMMachinesListController($scope,$rootScope,$location,resourceManager,notificationService,injectorService,serverMonitoringViewService,globalCacheService,simConstants,$q){void 0===$rootScope&&($rootScope=InjectorService.instance().$rootScope()),void 0===$location&&($location=InjectorService.instance().$location()),void 0===resourceManager&&(resourceManager=ResourceManager.instance()),void 0===notificationService&&(notificationService=NotificationService.instance()),void 0===injectorService&&(injectorService=InjectorService.instance()),void 0===serverMonitoringViewService&&(serverMonitoringViewService=ServerMonitoringViewService.instance()),void 0===globalCacheService&&(globalCacheService=InjectorService.instance().getADInjector().get("globalCacheService")),void 0===simConstants&&(simConstants=SIMConstants.instance()),void 0===$q&&($q=SharedInjectorService.instance().$q()),_super.call(this,$scope,$rootScope,$location,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.serverMonitoringViewService=serverMonitoringViewService,this.globalCacheService=globalCacheService,this.simConstants=simConstants,this.$q=$q,this.filterString="",this.itemsShown=0,this.totalItems=0,this.selectedMachines=null,this.multipleItemsSelected=!1,this.singleItemSelected=!1,this.isControlsBarShown=!0,this.isViewDashboardButtonDisabled=!0,this.isDeleteMachineButtonDisabled=!0,this.showInProgressIndicator=!0,this.isSparkChartsShown=!0,this.isHostIdsShown=!1,this.contextMenuOptions={},this.noServers=!0,this.noSimEnabledSevers=!1,this.showAPMTabs=!1,this.componentNavigationTabs=[],this.viewOptions=[{name:this.getString("ms_simServerOptionAllMachines"),value:SIMMachineGridViewOptions.ALL},{name:this.getString("ms_viewSimEnabled"),value:SIMMachineGridViewOptions.ENABLED},{name:this.getString("ms_viewSimDisabled"),value:SIMMachineGridViewOptions.DISABLED}],this.videoHref=ExternalUrls.VIDEO_INTRO_SIM,this.gridDataManager=gridModule.SIMListGridManagerFactory.getNewInstance(),this.init()}return __extends(SIMMachinesListController,_super),SIMMachinesListController.prototype.init=function(){this.$scope.controller=this;var mode=this.$scope.adMode||this.getMode();switch(this._appId=this.$scope.adAppId||this.getApplicationIdFromUrl(),this._tierId=this.$scope.adTierId||this.getCurrentUrlParams().componentId(),this.initGridViewState(mode),this.initMachinesGrid(mode),this.selectedViewOption=_.findWhere(this.viewOptions,{value:SIMMachineGridViewOptions.ALL}),mode){case this.simConstants.SIM_MODE:this._setupSIMMode();break;case this.simConstants.APM_APP_MODE:this._setupAPMAppMode();break;case this.simConstants.APM_TIER_MODE:this._setupAPMTierMode();break;case this.simConstants.APM_TIER_HOVERCARD_MODE:this._setupAPMTierHoverCardMode()}_super.prototype.init.call(this)},SIMMachinesListController.prototype.fetchInitViewData=function(){var _this=this;this.showInProgressIndicator=!0,this.gridDataManager.clear(),this.gridDataManager.fetchAllMachineSummary().then(function(dtos){_this.updateGridData(dtos),_this.noServers=!dtos||0==dtos.length}).finally(function(){_this.showInProgressIndicator=!1})},SIMMachinesListController.prototype.fetchData=function(){this.fetchInitViewData()},SIMMachinesListController.prototype.onRefresh=function(){this.fetchInitViewData()},SIMMachinesListController.prototype.onViewDataChange=function(selectedOption){var machines=this._filterMachinesByViewOptions(selectedOption);this.treeGridOptions.dataProvider=machines},SIMMachinesListController.prototype.onViewMachineDashboard=function(){ServerMonitoringViewService.instance().viewMachine(this.selectedMachines[0])},SIMMachinesListController.prototype.onDeleteMachines=function(){var _this=this;DialogService.instance().showDialog("","app/view/serverMonitoring/machines/list/deleteDialog/SIMMachineDeleteDialogController","app/view/serverMonitoring/machines/list/deleteDialog/SIMMachineDeleteDialogView.html",this.selectedMachines).then(function(modal){modal.result.then(function(){_this.onRefresh()})})},SIMMachinesListController.prototype.updateGridData=function(dtos){var data=dtos||[];this._machines=data,this.treeGridOptions.dataProvider=this._filterMachinesByViewOptions(this.selectedViewOption);for(var numSimEnabledServers=0,i=0;i<this._machines.length;i++)this._machines[i].simEnabled&&numSimEnabledServers++;return this.noSimEnabledSevers=0===numSimEnabledServers,data},SIMMachinesListController.prototype.filterFunction=function(item){var data=item.raw,filterString=this.treeGridOptions.filterString.toLowerCase();return filterString&&data?Util.isDefAndNotNull(data.name)&&-1!=data.name.toLowerCase().indexOf(filterString)||Util.isDefAndNotNull(data.hierarchyJoined)&&-1!=data.hierarchyJoined.toLowerCase().indexOf(filterString)?!0:(this.gridDataManager.clear(),!1):!0},SIMMachinesListController.prototype.filterSummaryFunction=function(shown,total){this.itemsShown=shown,this.totalItems=total},SIMMachinesListController.prototype.createLocationBarEntryConfigs=function(){var configs=[];return this.locationBarEntries=[this.serverMonitoringViewService.getSIMHomeLocationBarEntryConfig()],configs=this.locationBarEntries},SIMMachinesListController.prototype.initLocationBar=function(mode){var config,_this=this;mode===this.simConstants.SIM_MODE?(this.locationBarEntries=this.createLocationBarEntryConfigs(),config=this.createLocationBarConfigData(this.locationBarEntries,!1,null,null)):mode===this.simConstants.APM_TIER_MODE?(this.locationBarEntries=this.createLocationBarEntryConfigsForTier(),config=this.createLocationBarConfigData(this.locationBarEntries,!0,null,null)):(this.locationBarEntries=this.createLocationBarEntryConfigsForApp(),config=this.createLocationBarConfigData(this.locationBarEntries,!0,null,null)),config.isMainZoneRoot=!1,config.showBaselineSelector=!1,config.onRefreshFunction=function(){_this.onRefresh()},this.setLocationBarConfig(config)},SIMMachinesListController.prototype.createLocationBarEntryConfigsForApp=function(){var configs=[];return this.locationBarEntries=[ApplicationViewService.instance().getApplicationLocationBarEntryConfigFromNameAndId(this.getApplicationIdFromUrl(),this._appName)],configs=this.locationBarEntries},SIMMachinesListController.prototype.createLocationBarEntryConfigsForTier=function(){var configs=[];return this.locationBarEntries=[ApplicationViewService.instance().getApplicationLocationBarEntryConfigFromNameAndId(this.getApplicationIdFromUrl(),this._appName),ComponentViewService.instance().getComponentDashLocationBarEntryConfig({applicationId:this.getApplicationIdFromUrl(),id:this._tierId,name:this._tierName})],configs=this.locationBarEntries},SIMMachinesListController.prototype.onSelectionChange=function(event){this.selectedMachines=[],this.selectedMachines=_.pluck(event.selected.items,"raw"),this.multipleItemsSelected=this.selectedMachines.length>1?!0:!1,this.singleItemSelected=1==this.selectedMachines.length?!0:!1,this.updateButtons()},SIMMachinesListController.prototype.onDoubleClick=function(event){this.selectedMachines=[event.raw],this.onViewMachineDashboard()},SIMMachinesListController.prototype.onToggleSparkCharts=function(){this._gridViewState.isSparkChartsShown=this.isSparkChartsShown,this.isSparkChartsShown?this.gridDataManager.showSparkCharts(this.treeGridOptions.columnProvider):this.gridDataManager.hideSparkCharts(this.treeGridOptions.columnProvider)},SIMMachinesListController.prototype.onToggleHostIds=function(){this._gridViewState.isHostIdsShown=this.isHostIdsShown,this.isHostIdsShown?this.gridDataManager.showHostIds(this.treeGridOptions.columnProvider):this.gridDataManager.hideHostIds(this.treeGridOptions.columnProvider)},SIMMachinesListController.prototype.onSIMGettingStarted=function(){HomeViewService.instance().viewServerGettingStarted()},SIMMachinesListController.prototype.initMachinesGrid=function(gridName){var columns,_this=this,gridOptions=new GridOptions;columns=this.gridDataManager.getGridColumns(),gridOptions.useBufferedRenderer=!0,gridOptions.columnProvider=columns,gridOptions.dataProvider=[],gridOptions.multiSelect=!0,gridOptions.filterString="",gridOptions.filterFunction=function(item){return _this.filterFunction(item)},gridOptions.filterSummaryFunction=function(shown,total){_this._gridViewState.filters.filterString=_this.treeGridOptions.filterString,_this.filterSummaryFunction(shown,total)},gridOptions.filterString=this._gridViewState.filters.filterString,gridOptions.stateful=!0,gridOptions.stateId="SIMMachinesListController-stateId-"+gridName,this.isHostIdsShown=this._gridViewState.isHostIdsShown,this.isSparkChartsShown=this._gridViewState.isSparkChartsShown,this.treeGridOptions=gridOptions},SIMMachinesListController.prototype.setupEventListeners=function(){var _this=this;this.$scope.$on("$destroy",function(){_this.gridDataManager.clear()})},SIMMachinesListController.prototype.initGridViewState=function(gridName){void 0===gridName&&(gridName="SIMMachinesListController.viewState"),this.globalCacheService[gridName]?this._gridViewState=this.globalCacheService[gridName]:(this._gridViewState={viewOptionsColumnStates:[],isSparkChartsShown:!0,filters:{filterString:""}},this.globalCacheService[gridName]=this._gridViewState)},SIMMachinesListController.prototype.populateContextMenuOptions=function(){var _this=this,menuItems=[{text:this.getString("ms_viewDashboard"),handler:function(){_this.onViewMachineDashboard()},disabledFn:function(){return!_this.singleItemSelected},hidden:!1},{text:this.getString("ms_simDeleteMachine"),handler:function(){_this.onDeleteMachines()},disabledFn:function(){return!(_this.singleItemSelected||_this.multipleItemsSelected)},hidden:!1}];this.contextMenuOptions.disableDefaultContextMenu=!0,this.contextMenuOptions.items=menuItems},SIMMachinesListController.prototype.getMode=function(){var location=URLParams.getCurrentUrlParams().location();switch(location){case NavigationDataConstants.APP_MACHINE_LIST:return this.simConstants.APM_APP_MODE;case NavigationDataConstants.APP_COMPONENT_MACHINE_LIST:return this.simConstants.APM_TIER_MODE;case NavigationDataConstants.SERVER_MONITORING_MACHINE_LIST:return this.simConstants.SIM_MODE;default:return null}},SIMMachinesListController.prototype.updateButtons=function(){this.isViewDashboardButtonDisabled=!this.singleItemSelected,this.isDeleteMachineButtonDisabled=!this.singleItemSelected&&!this.multipleItemsSelected},SIMMachinesListController.prototype._setupSIMMode=function(){this.initLocationBar(this.simConstants.SIM_MODE),this.populateContextMenuOptions()},SIMMachinesListController.prototype._setupAPMAppMode=function(){var _this=this;this.gridDataManager.setMode(this.simConstants.APM_APP_MODE),this.gridDataManager.setAPMData(this._appId,null),this.populateContextMenuOptions(),ApplicationUiService.instance().getApplicationById(this._appId).then(function(application){_this._appName=application.name,_this.initLocationBar(_this.simConstants.APM_APP_MODE)})},SIMMachinesListController.prototype._setupAPMTierMode=function(){var _this=this;this.gridDataManager.setMode(this.simConstants.APM_TIER_MODE),this.gridDataManager.setAPMData(this._appId,this._tierId),this.populateContextMenuOptions(),this.showAPMTabs=!0,this.$q.all([ApplicationUiService.instance().getApplicationById(this._appId),ComponentUiService.instance().getComponent(this._tierId)]).then(function(responses){var application=responses[0],component=responses[1];_this._appName=application.name,_this._tierName=component.name,_this.componentNavigationTabs=ComponentViewService.instance().getComponentNavigationTabs(_this._appId,component,ComponentViewService.Tabs.SERVERS,null),_this.initLocationBar(_this.simConstants.APM_TIER_MODE)
})},SIMMachinesListController.prototype._setupAPMTierHoverCardMode=function(){this.isControlsBarShown=!1,this.gridDataManager.setMode(this.simConstants.APM_TIER_HOVERCARD_MODE),this.gridDataManager.setAPMData(this._appId,this._tierId),this.gridDataManager.hideSparkCharts(this.treeGridOptions.columnProvider)},SIMMachinesListController.prototype._filterMachinesByViewOptions=function(selectedOption){var machines=this._machines;switch(selectedOption.value){case SIMMachineGridViewOptions.ENABLED:machines=_.filter(machines,function(machine){return machine.simEnabled});break;case SIMMachineGridViewOptions.DISABLED:machines=_.filter(machines,function(machine){return!machine.simEnabled});break;default:machines=this._machines}return machines},SIMMachinesListController.$inject=["$scope"],SIMMachinesListController}(MainViewControllerBase);exports.SIMMachinesListController=SIMMachinesListController;{var SIMMachineGridViewOptions=function(){function SIMMachineGridViewOptions(){}return SIMMachineGridViewOptions.ENABLED="enabled",SIMMachineGridViewOptions.DISABLED="disabled",SIMMachineGridViewOptions.ALL="all",SIMMachineGridViewOptions}();!function(_super){function SIMMachinesListGridViewState(){_super.apply(this,arguments),this.initialSortField="name",this.initialSortDirection=GridComp.ASC}return __extends(SIMMachinesListGridViewState,_super),SIMMachinesListGridViewState}(gridViewStateModule.GridViewStateBase)}}),define("app/view/serverMonitoring/machines/list/SIMMachinesListDirective",["require","exports","./SIMMachinesListController"],function(require,exports,simMachinesListModule){var SIMMachinesListController=simMachinesListModule.SIMMachinesListController,SIMMachinesListDirective=function(){function SIMMachinesListDirective(){return{restrict:"E",replace:!1,scope:{adMode:"@",adAppId:"=",adTierId:"="},templateUrl:"app/view/serverMonitoring/machines/list/SIMMachinesListView.html",controller:SIMMachinesListController}}return SIMMachinesListDirective}();return appdynamicsModule.directive(StringUtils.toCamelCase("ad-sim-machines-list"),SIMMachinesListDirective),SIMMachinesListDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/hoverCards/TierHoverCard",["require","exports","./NodeHoverCard","./baselineSparkGraph/BaselineSparkGraph","app/view/networkMonitoring/flowMap/hoverCards/sparkChart/NetworkSparkChartDirective","../../../serverMonitoring/machines/list/SIMMachinesListDirective","../../../networkMonitoring/shared/NPMConstants"],function(require,exports,NodeHoverCard,BaselineSparkGraph,networkSparkChart,SIMMachinesListDirective,NPMConstants){var TierHoverCard=function(_super){function TierHoverCard(data,innerCircle,baseline,flowmapViewType,showNodesTab,showSlowestDBTab,showBTsTab,showMachinesTab,showNetworkTab,showIncomingTab){void 0===showNodesTab&&(showNodesTab=!0),void 0===showSlowestDBTab&&(showSlowestDBTab=!0),void 0===showBTsTab&&(showBTsTab=!0),void 0===showMachinesTab&&(showMachinesTab=!1),void 0===showNetworkTab&&(showNetworkTab=!0),void 0===showIncomingTab&&(showIncomingTab=!0),this.showNodesTab=showNodesTab,this.showSlowestDBTab=showSlowestDBTab&&!NetworkMonitoringViewService.instance().isLocationAppNetworkDashboard(),this.showBTsTab=showBTsTab&&!NetworkMonitoringViewService.instance().isLocationAppNetworkDashboard(),this.showNetworkTab=showNetworkTab,this.showMachinesTab=showMachinesTab,this.showIncomingTab=showIncomingTab,this.baseline=baseline;var showSpark=data.entityType===EntityType.APPLICATION_COMPONENT&&!data.onSnapshotFlow;_super.call(this,data,innerCircle,baseline,flowmapViewType,"",showSpark),this.fetchEntitiesForIncomingEdges()}return __extends(TierHoverCard,_super),TierHoverCard.prototype.getHTMLPartialLocation=function(){return"app/view/components/flowmap/hoverCards/TierHoverCard.html"},TierHoverCard.prototype.fetchSparkChartsData=function(baseline,dashboardGraphService,timeRangeService){if(this.isFlowmapViewTypeBT()&&this.data&&this.data.stats&&this.data.stats.averageResponseTime&&this.data.stats.callsPerMinute&&this.data.stats.errorsPerMinute){var stats=this.data.stats;return dashboardGraphService.getLinkStatsData(this.data.idNum,this.data.entityType,stats.averageResponseTime.metricId,stats.callsPerMinute.metricId,stats.errorsPerMinute.metricId,timeRangeService.getCurrentTimeRangeStringForUrl(),-1)}return dashboardGraphService.getEntityStatsData(this.data.idNum,EntityType.APPLICATION_COMPONENT,timeRangeService.getCurrentTimeRangeStringForUrl(),baseline?baseline.id:-1)},TierHoverCard.prototype.getContextMenuItems=function(metricId){var _this=this;return!isNaN(metricId)&&metricId>=0?[{text:resourceManager.getString("ui","ms_viewPerformanceMetrics"),handler:function(){MetricBrowserViewService.instance().openMetricBrowser(parseInt(_this.toolTipScope.appId),metricId,{entityId:_this.data.idNum,entityType:_this.data.entityType})}}]:null},TierHoverCard.prototype.doubleClickSparkChartHandler=function(metricId){MetricBrowserViewService.instance().openMetricBrowser(parseInt(this.toolTipScope.appId),metricId,{entityId:this.data.idNum,entityType:this.data.entityType}),this.closeCard()},TierHoverCard.prototype.decorateScope=function(scope){var _this=this;_super.prototype.decorateScope.call(this,scope),scope.tierId=this.data.idNum,scope.entityId=this.data.idNum,scope.entityType=EntityType.APPLICATION_COMPONENT,scope.showNodesTab=this.showNodesTab,scope.showSlowestDBTab=this.showSlowestDBTab,scope.showBTsTab=this.showBTsTab,scope.showNetworkTab=this.showNetworkTab,scope.controller=this,scope.showMachinesTab=this.showMachinesTab,scope.showIncomingTab=this.showIncomingTab,scope.incomingGridOptions=this.generateIncomingGridOptions(),this.data.componentHealthStats&&(scope.normalNodes=this.data.componentHealthStats.normalNodes,scope.warningNodes=this.data.componentHealthStats.warningNodes,scope.criticalNodes=this.data.componentHealthStats.criticalNodes,scope.tierHealthChart=this.makePieChart(scope.normalNodes,scope.warningNodes,scope.criticalNodes,this.data.componentHealthStats.unknownNodes)),scope.displayBelowModalStack=this.showSlowestDBTab;var lastSection="overview";NetworkMonitoringViewService.instance().isLocationAppNetworkDashboard()&&(lastSection=TierHoverCard.NETWORK_MONITORING_SECTION,this.decorateScopeForNetworkStats()),scope[lastSection]=!0,scope.selectPanel=function(section){lastSection&&(scope[lastSection]=!1),section==TierHoverCard.OVERVIEW&&lastSection!=section&&ViewUtil.doAfterDigest(function(){_this.attachEventsOnSparkChart($(_this.toolTipElement))}),scope[section]=!0,lastSection=section,section!=TierHoverCard.NETWORK_MONITORING_SECTION||_this.netStatOption||_this.decorateScopeForNetworkStats()},NetworkMonitoringViewService.instance().isNetworkMonitoringEnabled&&scope.$watch("averageResponseSparkPath",function(newValue){_this.netStatOption&&(_this.netStatOption.averageResponseSparkPath=newValue)})},TierHoverCard.prototype.generateIncomingGridOptions=function(){this._incomingEdgeDataProvider=this.getInboundEdges();var rtn=new GridOptions;return rtn.columnProvider=this.isFlowmapViewTypeBT()?this.generateIncomingGridColumnsForBT():this.generateIncomingGridColumnsForNonBT(),rtn.dataProvider=this._incomingEdgeDataProvider,rtn.loading=!1,rtn},TierHoverCard.prototype.generateIncomingGridColumnsForBT=function(){var columns=this.getCommonColumns(),callsPerTransColumn=GridColumn.createColumn(70,"stats",ResourceManager.instance().getString("ui","ms_columnHeaderCallsPerTransaction"),function(eps){var stats=TransactionStatUtils.hasSyncTransactionStatsSet(eps)?eps.transactionStats:eps.asyncTransactionStats;return stats?ViewUtil.formatNumber(stats.callsPerTransaction,0):MetricUtil.NO_DATA_DISPLAY_STRING},!0),callsColumn=GridColumn.createColumn(70,"stats",ResourceManager.instance().getString("ui","ms_columnHeaderCalls"),function(eps){var stats=TransactionStatUtils.hasSyncTransactionStatsSet(eps)?eps.transactionStats:eps.asyncTransactionStats;return stats?ViewUtil.formatNumber(stats.numberOfCalls,0):MetricUtil.NO_DATA_DISPLAY_STRING},!0),errorsPercent=GridColumn.createColumn(70,"stats",ResourceManager.instance().getString("ui","ms_columnHeaderErrorsPercent"),function(eps){var stats=TransactionStatUtils.hasSyncTransactionStatsSet(eps)?eps.transactionStats:eps.asyncTransactionStats;return stats?ViewUtil.formatNumber(stats.errorsPercentage,0):MetricUtil.NO_DATA_DISPLAY_STRING},!0),errorsColumn=GridColumn.createColumn(70,"stats",ResourceManager.instance().getString("ui","ms_columnHeaderErrors"),function(eps){var stats=TransactionStatUtils.hasSyncTransactionStatsSet(eps)?eps.transactionStats:eps.asyncTransactionStats;return stats?ViewUtil.formatNumber(stats.numberOfErrors,0):MetricUtil.NO_DATA_DISPLAY_STRING},!0),timeConsumedColumn=GridColumn.createColumn(70,"stats",ResourceManager.instance().getString("ui","ms_columnHeaderTimeConsumed"),function(eps){var stats=TransactionStatUtils.hasSyncTransactionStatsSet(eps)?eps.transactionStats:eps.transactionStats;return stats?ViewUtil.formatNumber(stats.timeConsumedPerTransaction,0):MetricUtil.NO_DATA_DISPLAY_STRING},!0);return columns.push(callsPerTransColumn),columns.push(callsColumn),columns.push(errorsPercent),columns.push(errorsColumn),columns.push(timeConsumedColumn),columns},TierHoverCard.prototype.generateIncomingGridColumnsForNonBT=function(){var columns=this.getCommonColumns(),callsPerMinuteColumn=GridColumn.createColumn(70,"stats","Calls/min",function(eps){return eps&&eps.callsPerMinute&&MetricUtil.isValidMetricData(eps.callsPerMinute.metricValue)?eps.callsPerMinute.metricValue.toString():"--"},!0),callsColumn=GridColumn.createColumn(70,"stats","Calls",function(eps){return eps&&eps.numberOfCalls&&MetricUtil.isValidMetricData(eps.numberOfCalls.metricValue)?eps.numberOfCalls.metricValue.toString():"--"},!0),artColumn=GridColumn.createColumn(70,"stats","ART (ms)",function(eps){return eps&&eps.averageResponseTime&&MetricUtil.isValidMetricData(eps.averageResponseTime.metricValue)?eps.averageResponseTime.metricValue.toString():"--"},!0),errorsPerMinuteColumn=GridColumn.createColumn(70,"stats","Errors/min",function(eps){return eps&&eps.errorsPerMinute&&MetricUtil.isValidMetricData(eps.errorsPerMinute.metricValue)?eps.errorsPerMinute.metricValue.toString():"--"},!0),errorsColumn=GridColumn.createColumn(70,"stats","Errors",function(eps){return eps&&eps.numberOfErrors&&MetricUtil.isValidMetricData(eps.numberOfErrors.metricValue)?eps.numberOfErrors.metricValue.toString():"--"},!0);return columns.push(artColumn),columns.push(callsPerMinuteColumn),columns.push(callsColumn),columns.push(errorsPerMinuteColumn),columns.push(errorsColumn),columns},TierHoverCard.prototype.getCommonColumns=function(){var _this=this,rtn=[],labelColumn=GridColumn.createColumn(70,"exitPointCall",resourceManager.getString("ui","ms_call"),function(val){return ExitPointUtil.getLabelForType(val.exitPointType)},!0),fromApplicationColumn=GridColumn.createColumn(100,"",ResourceManager.instance().getString("ui","ms_application"),function(value,metadata,item){var edgeCall=item.raw,applicationName="--";return edgeCall&&edgeCall.originalEdge&&edgeCall.originalEdge.sourceNodeDefinition&&edgeCall.originalEdge.sourceNodeDefinition.entityType==EntityType.APPLICATION&&(applicationName=edgeCall.source.name),applicationName},!0),fromTierColumn=GridColumn.createColumn(100,"",ResourceManager.instance().getString("ui","ms_tier"),function(value,metadata,item){var edgeCall=item.raw,tierName="--";if(edgeCall.originalEdge&&edgeCall.originalEdge.crossAppOriginTierDefinition){if(_this._entityMap){var component=_this._entityMap.getEntity(edgeCall.originalEdge.crossAppOriginTierDefinition);component&&component.name&&(tierName=component.name)}}else edgeCall.originalEdge&&edgeCall.originalEdge.sourceNodeDefinition&&edgeCall.sourceNodeDefinition.entityType&&edgeCall.sourceNodeDefinition.entityType==EntityType.APPLICATION_COMPONENT&&(tierName=edgeCall.source.name);return tierName},!0);return rtn.push(labelColumn),rtn.push(fromApplicationColumn),rtn.push(fromTierColumn),rtn},TierHoverCard.prototype.getInboundEdges=function(){var rtn=[];if(this.data&&this.data.$$edges)for(var i=0;i<this.data.$$edges.length;i++){var currentEdge=this.data.$$edges[i];if(currentEdge&&currentEdge.sourceNodeDefinition&&currentEdge.targetNodeDefinition&&currentEdge.targetNodeDefinition.entityId==this.data.idNum&&currentEdge.targetNodeDefinition.entityType==this.data.entityType&&currentEdge.stats)for(var statNum=0;statNum<currentEdge.stats.length;statNum++){var stat=currentEdge.stats[statNum];rtn.push(this.createEdgeCall(stat,stat.exitPointCall,currentEdge))}}return rtn},TierHoverCard.prototype.createEdgeCall=function(stat,exitPointCall,currentEdge){var rtn={stats:stat,exitPointCall:exitPointCall,originalEdge:currentEdge,source:currentEdge.source,target:currentEdge.target,sourceNodeDefinition:currentEdge.sourceNodeDefinition,targetNodeDefinition:currentEdge.targetNodeDefinition,sourceSubNodeName:null};return rtn},TierHoverCard.prototype.fetchEntitiesForIncomingEdges=function(){var _this=this;if(this._incomingEdgeDataProvider&&0!=this._incomingEdgeDataProvider.length){for(var entitiesToFetchMap={},i=0;i<this._incomingEdgeDataProvider.length;i++){var tmpEdge=this._incomingEdgeDataProvider[i];if(tmpEdge&&tmpEdge.originalEdge&&tmpEdge.originalEdge.crossAppOriginTierDefinition){var key=tmpEdge.originalEdge.crossAppOriginTierDefinition.entityType+"_"+tmpEdge.originalEdge.crossAppOriginTierDefinition.entityId;entitiesToFetchMap[key]=tmpEdge.originalEdge.crossAppOriginTierDefinition}}var entitiesToFetch=[];for(var k in entitiesToFetchMap)entitiesToFetch.push(entitiesToFetchMap[k]);var entityService=EntityService.instance(),onEntityMapLoaded=function(){_this._entityMap=entityMap,_this._incomingEdgeDataProvider=_this.getInboundEdges()},entityMap=entityService.fetchEntities(entitiesToFetch,onEntityMapLoaded)}},TierHoverCard.prototype.decorateScopeForNetworkStats=function(){this.netStatOption={sourceEntityID:this.data.idNum,sourceEntityType:this.data.entityType,networkStats:this.data.networkStats?this.data.networkStats:null,sparkChartType:NPMConstants.SPARK_CHART_FOR_NODE,averageResponseTimeMetricId:this.data.stats.averageResponseTime.metricId,averageResponseTime:this.toolTipScope.averageResponseTime,averageResponseSparkPath:this.toolTipScope.averageResponseSparkPath,baselineId:this.baseline?this.baseline.id:-1,closeCardFunction:this.closeCard}},TierHoverCard.NETWORK_MONITORING_SECTION="networkMon",TierHoverCard.OVERVIEW="overview",TierHoverCard}(NodeHoverCard);return TierHoverCard});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/renderers/TierNodeRenderer",["require","exports","../hoverCards/TierHoverCard","../hoverCards/HoverCardBase","./DefaultNodeRenderer"],function(require,exports,TierHoverCard,hoverCardBase,DefaultNodeRenderer){var TierNodeRenderer=function(_super){function TierNodeRenderer($scope,flowmapViewType,parentGraph){var _this=this;void 0===flowmapViewType&&(flowmapViewType=EntityType.APPLICATION),void 0===parentGraph&&(parentGraph=null),_super.call(this,$scope,flowmapViewType,parentGraph),this.showNodeType=!0,this.showMachinesTab=!1,this.showNetworkTab=!1,this.showIncomingTab=!0,this.appServerTypeRadius=this.getServerTypeRadius(),this.outerRadius=this.getOuterRadius(),this.nodeRadius+=this.outerRadius,MasterService.instance().onInitDataFetch().then(function(){_this.showMachinesTab=MasterService.instance().initData.mainNavConfig.showSim||!1,_this.showNetworkTab=MasterService.instance().initData.mainNavConfig.showNpm||!1,_this.showIncomingTab=!NetworkMonitoringViewService.instance().isLocationAppNetworkDashboard()})}return __extends(TierNodeRenderer,_super),TierNodeRenderer.prototype.getServerTypeRadius=function(){return TierNodeRenderer.SERVER_TYPE_RADIUS},TierNodeRenderer.prototype.getNodeRadius=function(){return DefaultNodeRenderer.NODE_RADIUS},TierNodeRenderer.prototype.getOuterRadius=function(){return TierNodeRenderer.OUTER_RADIUS},TierNodeRenderer.prototype.render=function(canvas,tiers){return _super.prototype.render.call(this,canvas,tiers)},TierNodeRenderer.prototype.decorateNode=function(item){this.showNodeType&&this.addAppTypeIcon(item,this.nodeRadius),this.drawPerformanceIndicators(item,this.nodeRadius),this.drawDrillDown(item)},TierNodeRenderer.prototype.drawShape=function(item){var _this=this,innerCircleRadius=this.nodeRadius-this.outerRadius,circleContainer=item.append("g").attr("class","adsNodeCountContainer");this.createPie(circleContainer),circleContainer.append("circle").attr({cx:0,cy:0,r:innerCircleRadius,"class":" adsNodeCountBackground adsNodeCountText "}).style("fill",function(d){return _this.innerCircleFill(d)}).style("stroke","#FFFFFF").style("stroke-width","1px");var textScale=this.getInnerTextScaleFactor(),textTranslate=this.getInnerTextScaleFactor()*TierNodeRenderer.INNER_TEXT_TRANSLATE;circleContainer.append("text").attr("transform","translate(0, 0),scale("+textScale.toString()+")").classed("adsNodeCountText",!0).classed("adsFlowMapZoom2",!0).style("fill",function(d){return _this.innerCircleTextColor(d)}).text(function(d){return d.nodeCount.toString()}),circleContainer.append("text").attr("transform","translate(0, "+textTranslate.toString()+"),scale("+textScale.toString()+")").classed("adsNodeCountTextSmall",!0).classed("adsFlowMapZoom3",!0).style("fill",function(d){return _this.innerCircleTextColor(d)}).text(function(d){return _this.getNodeLabel(d.nodeCount)});var circleContainer=item.select(".adsNodeCountContainer");this.addMouseTarget(circleContainer)},TierNodeRenderer.prototype.innerCircleTextColor=function(d){var textColor;return textColor=UiConfig.getColor("adsNodeCountBackground"==this.innerCircleFillClass(d)?"GLOBAL_FONT_COLOR":"WHITE")},TierNodeRenderer.prototype.innerCircleFill=function(d){var finalColorClass=this.innerCircleFillClass(d),finalColorStyle=Ext.util.CSS.getRule("."+finalColorClass).style.fill;return finalColorStyle},TierNodeRenderer.prototype.innerCircleFillClass=function(d){var finalColorClass="adsNodeCountBackground";if(d.baselineStats&&d.stats){var stats=d.stats,baselineStat=d.baselineStats,artPerformance=FlowRendererUtils.performanceStateAgainstBaseline(stats.averageResponseTime.metricValue,baselineStat.averageResponseTime),errorsPerformance=FlowRendererUtils.performanceStateAgainstBaseline(stats.errorsPerMinute.metricValue,baselineStat.errorsPerMinute);artPerformance==PerformanceState.CRITICAL||errorsPerformance==PerformanceState.CRITICAL?finalColorClass=FlowRendererUtils.getBaselineFillColorClass(artPerformance==PerformanceState.CRITICAL?artPerformance:errorsPerformance):artPerformance==PerformanceState.WARNING||errorsPerformance==PerformanceState.WARNING?finalColorClass=FlowRendererUtils.getBaselineFillColorClass(artPerformance==PerformanceState.WARNING?artPerformance:errorsPerformance):(artPerformance==PerformanceState.NORMAL||errorsPerformance==PerformanceState.NORMAL)&&(finalColorClass=FlowRendererUtils.getBaselineFillColorClass(artPerformance==PerformanceState.NORMAL?artPerformance:errorsPerformance))}else if(d.networkBaselineStats&&d.networkStats){var networkStats=d.networkStats,networkBaselineStat=d.networkBaselineStats,latencyPerformance=FlowRendererUtils.performanceStateAgainstBaseline(networkStats.latency.value,networkBaselineStat.latency),packetLossPerformance=FlowRendererUtils.performanceStateAgainstBaseline(networkStats.packetLoss.value,networkBaselineStat.packetLoss);finalColorClass=FlowRendererUtils.getBaselineFillColorClass(latencyPerformance==PerformanceState.CRITICAL||packetLossPerformance==PerformanceState.CRITICAL?PerformanceState.CRITICAL:latencyPerformance==PerformanceState.WARNING||packetLossPerformance==PerformanceState.WARNING?PerformanceState.WARNING:latencyPerformance==PerformanceState.NORMAL||packetLossPerformance==PerformanceState.NORMAL?PerformanceState.NORMAL:finalColorClass)}return finalColorClass},TierNodeRenderer.prototype.addAppTypeIcon=function(item,outerTierRadius){var _this=this,totalRadius=outerTierRadius+this.appServerTypeRadius,imageX=-Math.cos(Math.PI/180*45)*totalRadius,imageY=Math.sin(Math.PI/180*45)*totalRadius,tierTypeContainer=item.append("g").attr("transform","translate("+imageX+","+imageY+")"),tierTypeImage=tierTypeContainer.append("image").attr({x:-this.appServerTypeRadius,y:-2*this.appServerTypeRadius,width:2*this.appServerTypeRadius,height:2*this.appServerTypeRadius,"class":"adsFlowNodeTypeIcon adsFlowMapZoom2","xlink:href":function(d){return _this.getShapeIconURL(d)}});this.addMouseTarget(tierTypeImage)},TierNodeRenderer.prototype.mouseClick=function(d,index,element){var _this=this;if(_super.prototype.mouseClick.call(this,d,index,element),d3.select(element).classed("ads-drill-down")){var snapshotViewService=AngularUtil.getADInjector().get("snapshotViewService");snapshotViewService.viewMultipleRequestSegmentData(d.requestSegmentDataItems)}else this.card?this.closePopup():d.stats?this.renderHoverCard(d,element):this.getNodeStats(d).then(function(nodeStats){d.stats=nodeStats,_this.renderHoverCard(d,element)})},TierNodeRenderer.prototype.getNodeStats=function(d){return BusinessTransactionUiService.instance().getPerformanceRequestStats(this.appId,d.entityType,d.idNum,TimeRangeService.instance().getCurrentTimeRangeStringForUrl()).then(function(response){var nodeStats;return nodeStats={averageResponseTime:{metricValue:response.performanceStats.averageResponseTime.value,metricId:response.performanceStats.averageResponseTime.metricId,sum:0,count:0,useRange:!1},callsPerMinute:{metricValue:response.performanceStats.callsPerMinute.value,metricId:response.performanceStats.callsPerMinute.metricId,sum:0,count:0,useRange:!1},errorsPerMinute:{metricValue:response.performanceStats.errorsPerMinute.value,metricId:response.performanceStats.errorsPerMinute.metricId,sum:0,count:0,useRange:!1},numberOfErrors:{metricValue:response.performanceStats.numberOfErrors.value,metricId:response.performanceStats.numberOfErrors.metricId,sum:0,count:0,useRange:!1},numberOfCalls:{metricValue:response.performanceStats.numberOfCalls.value,metricId:response.performanceStats.numberOfCalls.metricId,sum:0,count:0,useRange:!1},transactionStats:null,asyncTransactionStats:null},InjectorService.instance().$q().when(nodeStats)})},TierNodeRenderer.prototype.renderHoverCard=function(d,element){this.card=new TierHoverCard(d,element,this.baseline,this.getFlowmapViewType(),!0,!this.isFlowmapViewTypeBT(),!this.isFlowmapViewTypeBT(),this.showMachinesTab,this.showNetworkTab,this.showIncomingTab),$(this.card.toolTipElement).on(EventConstants.UEV_CLOSE,this.closePopup.bind(this)),$(document).on(MouseEvents.MOUSE_DOWN+hoverCardBase.HoverCardBase.HOVER_CARD_EVENTS,this.mouseDownOutsidePopup.bind(this))},TierNodeRenderer.prototype.getNodeRendererClass=function(){return"adsTierNode"},TierNodeRenderer.prototype.getToolTip=function(d){return d.name},TierNodeRenderer.prototype.createPie=function(item){var _this=this,pie=d3.layout.pie().sort(null),arc=d3.svg.arc().innerRadius(this.nodeRadius-this.outerRadius).outerRadius(this.nodeRadius),pieGroup=item.selectAll("path").attr("class","adsFlowMapZoom4").data(function(d){return _this.getPieData(d,pie)}).enter().append("path").attr({"class":function(d,i){return _this.getNodeSectionClass(i)},d:arc});return pieGroup},TierNodeRenderer.prototype.getPieData=function(d,pieFunc){return d.entityType==EntityType.BACKEND?[1,0,0]:pieFunc(d.componentHealthStats&&d.nodeCount>0?[d.componentHealthStats.normalNodes,d.componentHealthStats.warningNodes,d.componentHealthStats.criticalNodes,d.componentHealthStats.unknownNodes]:[1,0,0,0])},TierNodeRenderer.prototype.getNodeSectionClass=function(index){var nodeClass;switch(index){case 0:nodeClass="adsNormalNodeColor";break;case 1:nodeClass="adsWarningNodeColor";break;case 2:nodeClass="adsCriticalNodeColor";break;case 3:default:nodeClass="adsUnknownFlowMapColor"}return nodeClass},TierNodeRenderer.prototype.getShapeClass=function(){return""},TierNodeRenderer.prototype.getShapeIconURL=function(node){return ImageUtil.getFlowMapComponentIconFromType(node.componentType)},TierNodeRenderer.prototype.mouseDoubleClick=function(d,index,element){_super.prototype.mouseDoubleClick.call(this,d,index,element),d3.select(element).classed("ads-drill-down")||this.gotoTierDash(d,index)},TierNodeRenderer.prototype.gotoTierDash=function(d){var componentDashService=AngularUtil.getADInjector().get("componentViewService");componentDashService.viewComponent(this.appId,d.idNum)},TierNodeRenderer.prototype.getContextMenuItems=function(data){var _this=this;return[{text:resourceManager.getString("ui","ms_viewDashboard"),handler:function(){_this.gotoTierDash(data,-1)}},{text:resourceManager.getString("ui","ms_delete"),handler:function(){_this.deleteTier(data)}},{text:resourceManager.getString("ui","ms_hideInThisFlowmap"),handler:function(){_this.hideItem(data)}}]},TierNodeRenderer.prototype.deleteTier=function(data){var deleteMessage=data.name,dialogService=AngularUtil.getADInjector().get("dialogService");dialogService.showConfirmation(resourceManager.getString("ui","ms_confirmDelete"),resourceManager.getString("ui","ms_deleteItemsConfirmation")+"<br/>"+deleteMessage,this.onDeleteTier.bind(this,data))},TierNodeRenderer.prototype.onDeleteTier=function(data){var componentViewService=AngularUtil.getADInjector().get("componentViewService");componentViewService.deleteComponent(data.idNum,this.appId,data.name)},TierNodeRenderer.prototype.getInnerTextScaleFactor=function(){return TierNodeRenderer.INNER_TEXT_SCALE_FACTOR},TierNodeRenderer.OUTER_RADIUS=10,TierNodeRenderer.SERVER_TYPE_RADIUS=10,TierNodeRenderer.INNER_TEXT_TRANSLATE=9,TierNodeRenderer.INNER_TEXT_SCALE_FACTOR=1,TierNodeRenderer}(DefaultNodeRenderer);return TierNodeRenderer});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/renderers/BigTierNodeRenderer",["require","exports","./TierNodeRenderer"],function(require,exports,TierNodeRenderer){var BigTierNodeRenderer=function(_super){function BigTierNodeRenderer($scope,flowmapViewType,parentGraph){void 0===flowmapViewType&&(flowmapViewType=EntityType.APPLICATION_COMPONENT),void 0===parentGraph&&(parentGraph=null),_super.call(this,$scope,flowmapViewType,parentGraph)}return __extends(BigTierNodeRenderer,_super),BigTierNodeRenderer.prototype.getNodeRendererClass=function(){return BigTierNodeRenderer.NODE_RENDERER_CLASS},BigTierNodeRenderer.prototype.getServerTypeRadius=function(){return BigTierNodeRenderer.SERVER_TYPE_RADIUS},BigTierNodeRenderer.prototype.getNodeRadius=function(){return BigTierNodeRenderer.NODE_RADIUS},BigTierNodeRenderer.prototype.getOuterRadius=function(){return BigTierNodeRenderer.OUTER_RADIUS},BigTierNodeRenderer.prototype.getEntityTypeVariant=function(){return BigTierNodeRenderer.ENTITY_TYPE_VARIANT},BigTierNodeRenderer.prototype.getInnerTextScaleFactor=function(){return BigTierNodeRenderer.INNER_TEXT_SCALE_FACTOR},BigTierNodeRenderer.NODE_RADIUS=22,BigTierNodeRenderer.OUTER_RADIUS=10,BigTierNodeRenderer.SERVER_TYPE_RADIUS=10,BigTierNodeRenderer.INNER_TEXT_SCALE_FACTOR=1.4,BigTierNodeRenderer.NODE_RENDERER_CLASS="adsBigTierNode",BigTierNodeRenderer.ENTITY_TYPE_VARIANT="_big",BigTierNodeRenderer}(TierNodeRenderer);return BigTierNodeRenderer});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/hoverCards/app/AppHoverCardController",["require","exports","../NodeHoverCard"],function(require,exports,NodeHoverCard){var AppHoverCardController=function(_super){function AppHoverCardController(data,innerCircle,baseline,flowmapViewType,showNodesTab,showSlowestDBTab,showBTsTab){void 0===showNodesTab&&(showNodesTab=!0),void 0===showSlowestDBTab&&(showSlowestDBTab=!0),void 0===showBTsTab&&(showBTsTab=!0),_super.call(this,data,innerCircle,baseline,flowmapViewType,"",!1),this.appId=data.idNum,this.showNodesTab=showNodesTab,this.showSlowestDBTab=showSlowestDBTab,this.showBTsTab=showBTsTab}return __extends(AppHoverCardController,_super),AppHoverCardController.prototype.getHTMLPartialLocation=function(){return"app/view/components/flowmap/hoverCards/app/AppHoverCard.html"},AppHoverCardController.prototype.decorateScope=function(scope){_super.prototype.decorateScope.call(this,scope),this.lastSection="overview",this[this.lastSection]=!0;var disabledColor=Ext.util.CSS.getRule(".adsHoverCard .adsDisabledPieSection").style.color;if(this.data.transactionSummary&&(this.transactionHealthChart=this.makePieChart(this.data.transactionSummary.normal,this.data.transactionSummary.warning,this.data.transactionSummary.critical,this.data.transactionSummary.unknown+this.data.transactionSummary.undefined),this.transactionHealthChart.chart.height=65,this.transactionHealthChart.plotOptions.pie.innerSize=35,this.transactionHealthChart.series.push({name:" ",type:"pie",showInLegend:!1,data:[{name:" ",y:10,color:disabledColor}],size:35,innerSize:20})),this.data.componentHealthStats&&(this.nodeHealthChart=this.makePieChart(this.data.componentHealthStats.normalNodes,this.data.componentHealthStats.warningNodes,this.data.componentHealthStats.criticalNodes,this.data.componentHealthStats.unknownNodes),this.nodeHealthChart.chart.height=65,this.nodeHealthChart.plotOptions.pie.size=35,this.nodeHealthChart.plotOptions.pie.innerSize=20,this.nodeHealthChart.series.push({name:" ",showInLegend:!1,type:"pie",data:[{name:" ",y:10,color:disabledColor}],size:45,innerSize:35})),this.data.incidentSummary){var severitySummary="";this.data.incidentSummary.critical>0?severitySummary=Severity.CRITICAL:this.data.incidentSummary.warning>0?severitySummary=Severity.WARNING:this.data.incidentSummary.info>0&&(severitySummary=Severity.INFO),this.problemSeverityURL=ImageUtil.getProblemSeverityIconURL(severitySummary,IconSize.LARGE),this.violationsCount=this.data.incidentSummary.currentlyOpen}scope.controller=this},AppHoverCardController.prototype.selectPanel=function(section){this.lastSection&&(this[this.lastSection]=!1),this[section]=!0,this.lastSection=section},AppHoverCardController}(NodeHoverCard);exports.AppHoverCardController=AppHoverCardController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/renderers/AppNodeRenderer",["require","exports","app/view/components/flowmap/renderers/DefaultNodeRenderer","app/view/components/flowmap/hoverCards/app/AppHoverCardController","app/view/components/flowmap/hoverCards/HoverCardBase"],function(require,exports,DefaultNodeRenderer,AppHoverCardController,HoverCardBase){var AppNodeRenderer=function(_super){function AppNodeRenderer($scope,flowmapViewType,parentGraph){void 0===flowmapViewType&&(flowmapViewType=EntityType.ACCOUNT),void 0===parentGraph&&(parentGraph=null),_super.call(this,$scope,flowmapViewType,parentGraph),this.btRingWidth=2,this.nodeRingWidth=6,this.ringSpacer=2,this.innerRadius=28,this.nodeHealthRadius=this.innerRadius,this.btRingRadius=this.nodeRingWidth+this.nodeHealthRadius+this.ringSpacer,this.nodeRadius=this.btRingRadius+this.btRingWidth}return __extends(AppNodeRenderer,_super),AppNodeRenderer.prototype.render=function(canvas,apps){return _super.prototype.render.call(this,canvas,apps)},AppNodeRenderer.prototype.decorateNode=function(items){this.drawPerformanceIndicators(items,this.nodeRadius)},AppNodeRenderer.prototype.drawShape=function(item){var _this=this,innerCircleRadius=this.innerRadius,circleContainer=item.append("g").attr("class","adsNodeCountContainer");this.createNodePie(circleContainer),this.createSpacerPie(circleContainer),this.createBTPie(circleContainer),circleContainer.append("circle").attr({cx:0,cy:0,r:innerCircleRadius,"class":" adsNodeCountBackground adsNodeCountText "}).style("fill",function(d){return _this.innerCircleFill(d)
}).style("stroke","#FFFFFF").style("stroke-width","1px"),circleContainer.filter(function(d){return d.viewPermission}).append("text").attr("transform","translate(0,-13)").classed("adsNodeCountText",!0).classed("adsFlowMapZoom2",!0).style("fill",function(d){return _this.innerCircleTextColor(d)}).text(function(d){return d.componentCount.toString()}),circleContainer.filter(function(d){return d.viewPermission}).append("text").attr("transform","translate(0, -3)").classed("adsNodeCountTextSmall",!0).classed("adsFlowMapZoom3",!0).style("fill",function(d){return _this.innerCircleTextColor(d)}).text(function(d){return _this.getComponentLabel(d.componentCount).toUpperCase()}),circleContainer.filter(function(d){return d.viewPermission}).append("text").attr("transform","translate(0,13)").classed("adsNodeCountText",!0).classed("adsFlowMapZoom2",!0).style("fill",function(d){return _this.innerCircleTextColor(d)}).text(function(d){return d.nodeCount.toString()}),circleContainer.filter(function(d){return d.viewPermission}).append("text").attr("transform","translate(0, 22)").classed("adsNodeCountTextSmall",!0).classed("adsFlowMapZoom3",!0).style("fill",function(d){return _this.innerCircleTextColor(d)}).text(function(d){return _this.getNodeLabel(d.nodeCount).toUpperCase()}),circleContainer.append("path").attr("d","m -25 0 L 25 0 ").attr("stroke-width","1px").attr("stroke","#DDDDDD").classed("adsFlowMapZoom3",!0);var circleContainer=item.select(".adsNodeCountContainer");this.addMouseTarget(circleContainer)},AppNodeRenderer.prototype.innerCircleTextColor=function(d){var textColor;return textColor=UiConfig.getColor("adsNodeCountBackground"==this.innerCircleFillClass(d)?"GLOBAL_FONT_COLOR":"WHITE")},AppNodeRenderer.prototype.innerCircleFill=function(d){var finalColorClass=this.innerCircleFillClass(d),finalColorStyle=Ext.util.CSS.getRule("."+finalColorClass).style.fill;return finalColorStyle},AppNodeRenderer.prototype.innerCircleFillClass=function(d){var finalColorClass="adsNodeCountBackground";if(d.baselineStats&&d.stats){var stats=d.stats,baselineStat=d.baselineStats,artPerformance=FlowRendererUtils.performanceStateAgainstBaseline(stats.averageResponseTime.metricValue,baselineStat.averageResponseTime),errorsPerformance=FlowRendererUtils.performanceStateAgainstBaseline(stats.errorsPerMinute.metricValue,baselineStat.errorsPerMinute);artPerformance==PerformanceState.CRITICAL||errorsPerformance==PerformanceState.CRITICAL?finalColorClass=FlowRendererUtils.getBaselineFillColorClass(artPerformance==PerformanceState.CRITICAL?artPerformance:errorsPerformance):artPerformance==PerformanceState.WARNING||errorsPerformance==PerformanceState.WARNING?finalColorClass=FlowRendererUtils.getBaselineFillColorClass(artPerformance==PerformanceState.WARNING?artPerformance:errorsPerformance):(artPerformance==PerformanceState.NORMAL||errorsPerformance==PerformanceState.NORMAL)&&(finalColorClass=FlowRendererUtils.getBaselineFillColorClass(artPerformance==PerformanceState.NORMAL?artPerformance:errorsPerformance))}return finalColorClass},AppNodeRenderer.prototype.getNodeRendererClass=function(){return"adsApplicationNode"},AppNodeRenderer.prototype.mouseClick=function(d,index,element){_super.prototype.mouseClick.call(this,d,index,element),!this.card&&d.viewPermission?(this.card=new AppHoverCardController.AppHoverCardController(d,element,this.baseline,!0,!this.isFlowmapViewTypeBT(),!this.isFlowmapViewTypeBT()),$(this.card.toolTipElement).on(EventConstants.UEV_CLOSE,this.closePopup.bind(this)),$(document).on(MouseEvents.MOUSE_DOWN+HoverCardBase.HoverCardBase.HOVER_CARD_EVENTS,this.mouseDownOutsidePopup.bind(this))):this.closePopup()},AppNodeRenderer.prototype.createNodePie=function(item){return this.createPie(item,this.getPieNodeHealthData.bind(this),this.nodeHealthRadius,this.nodeRingWidth,"ads-node-health-pie ")},AppNodeRenderer.prototype.createSpacerPie=function(item){return this.createPie(item,function(d,pie){return pie([1])},this.nodeHealthRadius+this.nodeRingWidth,this.ringSpacer,"ads-node-ring-spacer ")},AppNodeRenderer.prototype.createBTPie=function(item){return this.createPie(item,this.getPieBTData.bind(this),this.btRingRadius,this.btRingWidth,"ads-transaction-health-pie ")},AppNodeRenderer.prototype.createPie=function(item,getData,innerRadius,ringWidth,styleClass){var _this=this,pie=d3.layout.pie().sort(null),arc=d3.svg.arc().innerRadius(innerRadius).outerRadius(innerRadius+ringWidth),pieGroup=item.selectAll("."+styleClass).attr("class","adsFlowMapZoom4").data(function(d){return getData(d,pie)}).enter().append("path").attr({"class":function(d,i){return styleClass+_this.getNodeSectionClass(i)},d:arc});return pieGroup},AppNodeRenderer.prototype.getPieNodeHealthData=function(d,pie){var stats=d.componentHealthStats;return pie(d.viewPermission?stats&&d.nodeCount>0?[stats.normalNodes,stats.warningNodes,stats.criticalNodes,stats.unknownNodes]:[1,0,0,0]:[0,0,0,0,1])},AppNodeRenderer.prototype.getPieBTData=function(d,pie){var btSummary=d.transactionSummary;if(!d.viewPermission)return pie([0,0,0,0,1]);if(!(btSummary&&btSummary.normal+btSummary.warning+btSummary.critical+btSummary.unknown+btSummary.undefined>0))return pie([1,0,0,0]);var transactionData=[btSummary.normal,btSummary.warning,btSummary.critical,btSummary.unknown+btSummary.undefined];return transactionData?pie(transactionData):void 0},AppNodeRenderer.prototype.getNodeSectionClass=function(index){var nodeClass;switch(index){case 0:nodeClass="adsNormalNodeColor";break;case 1:nodeClass="adsWarningNodeColor";break;case 2:nodeClass="adsCriticalNodeColor";break;case 4:nodeClass="ads-flowmap-no-permission-color";break;case 3:default:nodeClass="adsUnknownFlowMapColor"}return nodeClass},AppNodeRenderer.prototype.mouseDoubleClick=function(d,index,element){_super.prototype.mouseDoubleClick.call(this,d,index,element),this.onAppDrillDown(d,index)},AppNodeRenderer.prototype.onAppDrillDown=function(d){d.viewPermission&&(d.crossApplicationSnapshot?SnapshotViewService.instance().viewRequestSegmentDataByGuid(d.crossApplicationSnapshot,d.idNum):ApplicationViewService.instance().viewApplicationDashboard(d.idNum))},AppNodeRenderer.prototype.getContextMenuItems=function(data){var _this=this;return data.viewPermission?[{text:data.crossApplicationSnapshot?resourceManager.getString("ui","ms_viewAssociatedSnaphot"):resourceManager.getString("ui","ms_viewDashboard"),handler:function(){_this.onAppDrillDown(data,-1)}},{text:resourceManager.getString("ui","ms_appDeleteApplication"),handler:function(){_this.deleteApplication(data)}}]:null},AppNodeRenderer.prototype.deleteApplication=function(data){var deleteMessage=data.name,dialogService=AngularUtil.getADInjector().get("dialogService");dialogService.showConfirmation(resourceManager.getString("ui","ms_confirmDelete"),resourceManager.getString("ui","ms_deleteItemsConfirmation")+"<br/>"+deleteMessage,this.onDeleteApplication.bind(this,data))},AppNodeRenderer.prototype.onDeleteApplication=function(data){var applicationViewService=AngularUtil.getADInjector().get("applicationViewService");applicationViewService.deleteApplication(data.idNum,data.name)},AppNodeRenderer}(DefaultNodeRenderer);return AppNodeRenderer});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/hoverCards/BackendHoverCardBase",["require","exports","./NodeHoverCard"],function(require,exports,NodeHoverCard){var BackendHoverCardBase=function(_super){function BackendHoverCardBase(data,innerCircle,baseline,flowmapViewType,iconUrl){_super.call(this,data,innerCircle,baseline,flowmapViewType,iconUrl)}return __extends(BackendHoverCardBase,_super),BackendHoverCardBase}(NodeHoverCard);exports.BackendHoverCardBase=BackendHoverCardBase});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/hoverCards/BackendHoverCard",["require","exports","./BackendHoverCardBase"],function(require,exports,backendHoverCardBase){var BackendHoverCard=function(_super){function BackendHoverCard(data,innerCircle,baseline,flowmapViewType,iconUrl){_super.call(this,data,innerCircle,baseline,flowmapViewType,iconUrl)}return __extends(BackendHoverCard,_super),BackendHoverCard.prototype.getHTMLPartialLocation=function(){return"app/view/components/flowmap/hoverCards/BackendHoverCard.html"},BackendHoverCard.prototype.getAnchorWidth=function(){return 20},BackendHoverCard.prototype.getAnchorHeight=function(){return 20},BackendHoverCard}(backendHoverCardBase.BackendHoverCardBase);exports.BackendHoverCard=BackendHoverCard});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/hoverCards/MultipleBackendHoverCard",["require","exports","./BackendHoverCard","./BackendHoverCardBase"],function(require,exports,backendHoverCard,backendHoverCardBase){var MultipleBackendHoverCard=function(_super){function MultipleBackendHoverCard(data,innerCircle,baseline,flowmapViewType,iconUrl,appId){_super.call(this,data,innerCircle,baseline,flowmapViewType,iconUrl),this.appId=appId,this.card=null}return __extends(MultipleBackendHoverCard,_super),MultipleBackendHoverCard.prototype.getHTMLPartialLocation=function(){return"app/view/components/flowmap/hoverCards/MultiBackendHoverCard.html"},MultipleBackendHoverCard.prototype.decorateScope=function(scope){_super.prototype.decorateScope.call(this,scope),scope.controller=this,this.title=resourceManager.getString("ui","ms_callToMutplieBackends"),this.description=resourceManager.getString("ui","ms_callsToMultipleBackendsDescription",[this.data.backendType]),this.isTransactionView=_.any(this.data.$$groupItems,function(node){return TransactionStatUtils.hasSyncTransactionStatsSet(node.stats)}),this.gridOptions=new GridOptions({dataProvider:this.data.$$groupItems.map(this.convertNodeToGridItem,this),columnProvider:this.buildGridColumns(),compileRenderers:!1,loading:!1})},MultipleBackendHoverCard.prototype.drillDownIntoExitCall=function(){this.selectedNode&&(this.toolTipScope.closeCard(),this.card=new backendHoverCard.BackendHoverCard(this.selectedNode,this.innerCircle,this.baseline,this.flowmapViewType,this.toolTipScope.logoUrl),this.closeListener=this.destroyPopup.bind(this),this.mouseDownListener=this.mouseDownOutsidePopup.bind(this),$(this.card.toolTipElement).on(EventConstants.UEV_CLOSE,this.closeListener),$(document).on(MouseEvents.MOUSE_DOWN,this.mouseDownListener))},MultipleBackendHoverCard.prototype.viewBackendDetails=function(){var backendViewService=BackendDashboardViewService.instance();backendViewService.viewBackendDashboard(this.appId,this.selectedNode.idNum)},MultipleBackendHoverCard.prototype.itemSelected=function(event){this.selectedNode=event.selected.items.length>0?event.selected.items[0].raw.node:null,ViewUtil.safeApply(this.toolTipScope)},MultipleBackendHoverCard.prototype.mouseDownOutsidePopup=function(event){this.card&&!$.contains(this.card.toolTipElement,event.target)&&event.target!=this.card.toolTipElement&&this.destroyPopup(event)},MultipleBackendHoverCard.prototype.destroyPopup=function(){this.card&&($(document).off(MouseEvents.MOUSE_DOWN,this.mouseDownListener),$(this.card.toolTipElement).off(EventConstants.UEV_CLOSE,this.closeListener),this.mouseDownListener=null,this.closeListener=null,this.card.destroy(),this.card=null)},MultipleBackendHoverCard.prototype.formatMetricValue=function(stats,member){return stats&&stats[member]?MetricUtil.getMetricDisplay(stats[member].metricValue):DashboardListBase.NO_DATA},MultipleBackendHoverCard.prototype.buildGridColumns=function(){var columns=[];return columns.push(new GridColumn({flex:1,dataIndex:"name",header:resourceManager.getString("ui","ms_entityType_BACKEND")})),this.isTransactionView||columns.push(new GridColumn({flex:.3,callsPerMinut:"callsPerMinute",header:resourceManager.getString("ui","ms_callsPerMin")})),columns.push(new GridColumn({flex:.3,dataIndex:"numberOfCalls",header:resourceManager.getString("ui","ms_calls")})),columns.push(new GridColumn({flex:.3,dataIndex:"averageResponseTime",header:resourceManager.getString("ui","ms_responseTimeMs")})),this.isTransactionView||columns.push(new GridColumn({flex:.3,dataIndex:"errorsPerMinute",header:resourceManager.getString("ui","ms_errorsPerMin")})),columns.push(new GridColumn({flex:.3,dataIndex:"numberOfErrors",header:resourceManager.getString("ui","ms_errors")})),columns},MultipleBackendHoverCard.prototype.convertNodeToGridItem=function(node){return node?this.isTransactionView?{name:node.name,node:node,numberOfCalls:MetricUtil.getMetricDisplay(node.stats.transactionStats.numberOfCalls,0),numberOfErrors:MetricUtil.getMetricDisplay(node.stats.transactionStats.numberOfErrors,0),averageResponseTime:MetricUtil.getMetricDisplay(node.stats.transactionStats.timeConsumedPerTransaction/node.stats.transactionStats.callsPerTransaction)}:{name:node.name,node:node,callsPerMinute:this.formatMetricValue(node.stats,"callsPerMinute"),numberOfCalls:this.formatMetricValue(node.stats,"numberOfCalls"),averageResponseTime:this.formatMetricValue(node.stats,"averageResponseTime"),errorsPerMinute:this.formatMetricValue(node.stats,"errorsPerMinute"),numberOfErrors:this.formatMetricValue(node.stats,"numberOfErrors")}:void 0},MultipleBackendHoverCard}(backendHoverCardBase.BackendHoverCardBase);exports.MultipleBackendHoverCard=MultipleBackendHoverCard});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("lib/controller/services/dbMonitoring/DBBackendMappingUiService",["require","exports"],function(){var DBBackendMappingUiService=function(_super){function DBBackendMappingUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(DBBackendMappingUiService,_super),DBBackendMappingUiService.instance=function(){return AngularUtil.getADInjector().get("dBBackendMappingUiService")},DBBackendMappingUiService.prototype.addBackendMapping=function(backendId,serverId){var path="restui/dbMonitoring/backendMapping/addBackendMapping/"+backendId+"?serverId="+serverId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DBBackendMappingUiService","addBackendMapping",path,[backendId,serverId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DBBackendMappingUiService.prototype.unmapBackend=function(backendId){var path="restui/dbMonitoring/backendMapping/unmapBackend?backendId="+backendId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DBBackendMappingUiService","unmapBackend",path,[backendId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DBBackendMappingUiService.prototype.getMappedDBServerForBackend=function(backendId){var path="restui/dbMonitoring/backendMapping/getMappedDBServer?backendId="+backendId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DBBackendMappingUiService","getMappedDBServerForBackend",path,[backendId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DBBackendMappingUiService.prototype.getMappedDBServerForBackend_response=function(response){return response},DBBackendMappingUiService.prototype.getAllDBServersForMapping=function(){var path="restui/dbMonitoring/backendMapping/getAllDBServersForMapping",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DBBackendMappingUiService","getAllDBServersForMapping",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DBBackendMappingUiService.prototype.getAllDBServersForMapping_response=function(response){return response},DBBackendMappingUiService.prototype.describe=function(){var path="restui/dbMonitoring/backendMapping/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DBBackendMappingUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DBBackendMappingUiService.prototype.describe_response=function(response){return response},DBBackendMappingUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],DBBackendMappingUiService}(ControllerUiServiceBase);return appdynamicsModule.service("dBBackendMappingUiService",DBBackendMappingUiService),DBBackendMappingUiService});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("lib/controller/services/dbMonitoring/CollectorsUiService",["require","exports"],function(){var CollectorsUiService=function(_super){function CollectorsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(CollectorsUiService,_super),CollectorsUiService.instance=function(){return AngularUtil.getADInjector().get("collectorsUiService")},CollectorsUiService.prototype.getAllDbConfigurations=function(){var path="restui/dbMonitoring/collectors/configurations",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CollectorsUiService","getAllDbConfigurations",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["config.createdOn","config.modifiedOn","eventSummary.eventTime"]),response})},CollectorsUiService.prototype.getAllDbConfigurations_response=function(response){return response},CollectorsUiService.prototype.getDbConfiguration=function(configurationId){var path="restui/dbMonitoring/collectors/configurations/"+configurationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CollectorsUiService","getDbConfiguration",path,[configurationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn","modifiedOn"]),response})},CollectorsUiService.prototype.getDbConfiguration_response=function(response){return response},CollectorsUiService.prototype.createDbConfiguration=function(arg0){var path="restui/dbMonitoring/collectors/createConfiguration",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CollectorsUiService","createDbConfiguration",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn","modifiedOn"]),response})},CollectorsUiService.prototype.createDbConfiguration_response=function(response){return response},CollectorsUiService.prototype.updateDbConfiguration=function(arg0){var path="restui/dbMonitoring/collectors/updateConfiguration",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CollectorsUiService","updateDbConfiguration",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn","modifiedOn"]),response})},CollectorsUiService.prototype.updateDbConfiguration_response=function(response){return response},CollectorsUiService.prototype.batchDeleteDbConfigurationByIds=function(arg0){var path="restui/dbMonitoring/collectors/configuration/batchDelete",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CollectorsUiService","batchDeleteDbConfigurationByIds",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CollectorsUiService.prototype.isNewConfigCreationAllowed=function(){var path="restui/dbMonitoring/collectors/allowNewConfigCreation",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CollectorsUiService","isNewConfigCreationAllowed",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CollectorsUiService.prototype.isNewConfigCreationAllowed_response=function(response){return response},CollectorsUiService.prototype.getStatusForCollector=function(collectorId){var path="restui/dbMonitoring/collectors/getStatusForCollector?collectorId="+collectorId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CollectorsUiService","getStatusForCollector",path,[collectorId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["config.createdOn","config.modifiedOn","eventSummary.eventTime"]),response})},CollectorsUiService.prototype.getStatusForCollector_response=function(response){return response},CollectorsUiService.prototype.getAvailableAgentNames=function(){var path="restui/dbMonitoring/collectors/availableAgentNames",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CollectorsUiService","getAvailableAgentNames",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CollectorsUiService.prototype.getAvailableAgentNames_response=function(response){return response},CollectorsUiService.prototype.describe=function(){var path="restui/dbMonitoring/collectors/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("CollectorsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},CollectorsUiService.prototype.describe_response=function(response){return response},CollectorsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],CollectorsUiService}(ControllerUiServiceBase);return appdynamicsModule.service("collectorsUiService",CollectorsUiService),CollectorsUiService});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/dbMonitoring/common/DBControllerBase",["require","exports","../../../../lib/controller/services/dbMonitoring/CollectorsUiService"],function(require,exports,CollectorsUiService){var DBControllerBase=function(_super){function DBControllerBase($scope,$rootScope,$location,resourceManager,notificationService,injectorService,dbMonitoringViewService,dbMonitoringUiService){var _this=this;_super.call(this,$scope,$rootScope,$location,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.dbMonitoringViewService=dbMonitoringViewService,this.dbMonitoringUiService=dbMonitoringUiService,this.isDBMonHome=!1,this.initLocationBar=function(){var locationBarConfig=_this.createLocationBarConfigData(_this.createLocationBarEntryConfigs());locationBarConfig.isMainZoneRoot=_this.isDBMonHome,_this.setLocationBarConfig(locationBarConfig)},this.initLocationBarForClusterNode=function(){var configPromise=CollectorsUiService.instance().getDbConfiguration(_this.getClusterId());configPromise.then(function(clusterConfig){var locationEntries=_this.createLocationBarEntryConfigs(),clusterLocationEntry=DBMonitoringViewService.instance().getDBClusterLocationBarEntryConfig(_this.getClusterId(),clusterConfig.name);locationEntries.splice(1,0,clusterLocationEntry);var locationBarConfig=_this.createLocationBarConfigData(locationEntries);locationBarConfig.isMainZoneRoot=_this.isDBMonHome,_this.setLocationBarConfig(locationBarConfig)})},this.onViewDbReport=function(location){_this.dbMonitoringViewService.viewDbReport(location,_this.getDatabaseId(),_this.isCluster(),_this.getClusterId())},$scope.$on(TimeRangeSelectorController.UEV_TIME_RANGE_CHANGE,function(){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];_this.fetchData()}),this.removeAutoRefreshListener=$scope.$on(TimeRangeService.TIMERANGE_AUTOREFRESH_EVENT,function(){_this.fetchData()}),$scope.$on(TimeRangeService.UEV_TIME_RANGE_CHANGE_TR_SERVICE,function(){_this.fetchData()})}return __extends(DBControllerBase,_super),DBControllerBase.prototype.getDatabaseId=function(){return parseInt(this.getCurrentUrlParams().database())},DBControllerBase.prototype.getQueryId=function(){return parseInt(this.getCurrentUrlParams().dbQueryId())},DBControllerBase.prototype.getClusterId=function(){return this.getCurrentUrlParams().getNumberParam(UrlConstants.DB_CLUSTER_ID)},DBControllerBase.prototype.getSnapshotGuid=function(){var urlParams=this.getCurrentUrlParams();return urlParams.getParam(UrlConstants.DB_SNAPSHOT_GUID)},DBControllerBase.prototype.removeSnapshotGuidFromUrlParams=function(){var urlParams=this.getCurrentUrlParams();urlParams.removeParam(UrlConstants.DB_SNAPSHOT_GUID)},DBControllerBase.prototype.getQueryHashCode=function(){var urlParams=this.getCurrentUrlParams(),queryHashCode=urlParams.getParam(UrlConstants.DB_QUERY_HASHCODE);return queryHashCode},DBControllerBase.prototype.isCluster=function(){return this.getCurrentUrlParams().dbCluster()},DBControllerBase.prototype.isClusterNode=function(){return this.getCurrentUrlParams().getBooleanParam(UrlConstants.DB_CLUSTER_NODE)},DBControllerBase.prototype.getQueryListViewData=function(dbServerId){var _this=this,response=function(dbServerInfo){_this.$scope.dbName=dbServerInfo.dbName,_this.$scope.dbType=dbServerInfo.dbType,_this.setupLocationBar()},promise=this.dbMonitoringUiService.getQueryListViewData(dbServerId,this.isCluster());promise.then(response)},DBControllerBase.prototype.createPieChartGraphData=function(data){var chartData=new Array;for(var key in data)data.hasOwnProperty(key)&&chartData.push([key,data[key]]);return chartData.sort(function(a,b){return b[1]-a[1]}),chartData},DBControllerBase.prototype.createBaselineSeriesData=function(value,data){for(var baselineData=new Array,i=0;i<data.length;++i)data[i]&&baselineData.push([data[i][0],value]);return baselineData},DBControllerBase.prototype.setupLocationBar=function(){Util.isValidId(this.getClusterId())?this.initLocationBarForClusterNode():this.initLocationBar()},DBControllerBase.prototype.createLocationBarEntryConfigs=function(){var locationEntries=[];return locationEntries},DBControllerBase.DB_ICON_WIDTH=100,DBControllerBase.DB_ICON_HEIGHT=25,DBControllerBase}(MainViewControllerBase);return DBControllerBase}),define("app/view/dbMonitoring/utils/DBServerTypeUtils",["require","exports"],function(){var DBServerTypeUtils=function(){function DBServerTypeUtils(){}return DBServerTypeUtils.getDatabaseTypeDisplayName=function(dbServerType){switch(dbServerType){case DBServerType.DB2:return"DB2";case DBServerType.MSSQL:return"Microsoft SQL Server";case DBServerType.MYSQL:return"MySQL";case DBServerType.ORACLE:return"Oracle";case DBServerType.POSTGRESQL:return"PostgreSQL";case DBServerType.SYBASE:return"Sybase";case DBServerType.SQLAZURE:return"Microsoft Azure SQL";case DBServerType.MONGO:return"MongoDB";default:return"None"}},DBServerTypeUtils.getOperatingSystemDisplayName=function(operatingSystemType){switch(operatingSystemType){case DBHostOS.AIX:return"AIX";case DBHostOS.LINUX:return"Linux";case DBHostOS.SOLARIS:return"Solaris";case DBHostOS.WINDOWS:return"Windows";default:return"None"}},DBServerTypeUtils.getDBServerRoleName=function(role){var roleDisplayName="";switch(role){case DBServerRole.MONGODB_ROUTING_SERVICE:roleDisplayName=ResourceManager.instance().getString("dbmon","ms_dbMongoRoutingService");break;case DBServerRole.MONGODB_REPLICASET_PRIMARY:roleDisplayName=ResourceManager.instance().getString("dbmon","ms_dbMongoReplicaSetPrimary");break;case DBServerRole.MONGODB_REPLICASET_SECONDARY:roleDisplayName=ResourceManager.instance().getString("dbmon","ms_dbMongoReplicaSetSecondary");break;case DBServerRole.MONGODB_SHARD_PRIMARY:roleDisplayName=ResourceManager.instance().getString("dbmon","ms_dbMongoShardPrimary");break;case DBServerRole.MONGODB_SHARD_SECONDARY:roleDisplayName=ResourceManager.instance().getString("dbmon","ms_dbMongoShardSecondary");break;case DBServerRole.MONGODB_SHARD_STANDALONE:roleDisplayName=ResourceManager.instance().getString("dbmon","ms_dbMongoShardStandalone");break;case DBServerRole.STANDALONE:roleDisplayName=ResourceManager.instance().getString("dbmon","ms_dbStandalone")}return roleDisplayName},DBServerTypeUtils.getDBTypeFromVendor=function(vendor){return-1!=vendor.toLowerCase().indexOf(DBServerType.MYSQL.toLowerCase())?DBServerType.MYSQL:-1!=vendor.toLowerCase().indexOf(DBServerType.ORACLE.toLowerCase())?DBServerType.ORACLE:-1!=vendor.toLowerCase().indexOf(DBServerTypeUtils.MS_SQL.toLowerCase())?DBServerType.MSSQL:-1!=vendor.toLowerCase().indexOf(DBServerType.SYBASE.toLowerCase())?DBServerType.SYBASE:-1!=vendor.toLowerCase().indexOf(DBServerType.POSTGRESQL.toLowerCase())?DBServerType.POSTGRESQL:-1!=vendor.toLowerCase().indexOf(DBServerType.DB2.toLowerCase())?DBServerType.DB2:""
},DBServerTypeUtils.isMySql=function(dbType){return dbType&&dbType.toLowerCase()==DBServerType.MYSQL.toLowerCase()},DBServerTypeUtils.isMSSql=function(dbType){return dbType&&dbType.toLowerCase()==DBServerType.MSSQL.toLowerCase()},DBServerTypeUtils.isSQLAzure=function(dbType){return dbType&&dbType.toLowerCase()==DBServerType.SQLAZURE.toLowerCase()},DBServerTypeUtils.isMSSqlOrSqlAzure=function(dbType){return dbType&&(dbType.toLowerCase()==DBServerType.MSSQL.toLowerCase()||dbType.toLowerCase()==DBServerType.SQLAZURE.toLowerCase())},DBServerTypeUtils.isOracle=function(dbType){return dbType&&dbType.toLowerCase()==DBServerType.ORACLE.toLowerCase()},DBServerTypeUtils.isPostGreSql=function(dbType){return dbType&&dbType.toLowerCase()==DBServerType.POSTGRESQL.toLowerCase()},DBServerTypeUtils.isDB2=function(dbType){return dbType&&dbType.toLowerCase()==DBServerType.DB2.toLowerCase()},DBServerTypeUtils.isSybase=function(dbType){return dbType&&dbType.toLowerCase()==DBServerType.SYBASE.toLowerCase()},DBServerTypeUtils.isMongo=function(dbType){return dbType&&dbType.toLowerCase()==DBServerType.MONGO.toLowerCase()},DBServerTypeUtils.dbServerHasQueryStats=function(dbType){return DBServerTypeUtils.isOracle(dbType)||DBServerTypeUtils.isMSSqlOrSqlAzure(dbType)||DBServerTypeUtils.isDB2(dbType)},DBServerTypeUtils.serverTypeRenderer=function(type){return type?DBServerTypeUtils.getDatabaseTypeDisplayName(type.toString()):""},DBServerTypeUtils.dbIconRenderer=function(){return'<img src="images/dbNodeTiny.png" width="23" height="15"/>'},DBServerTypeUtils.MS_SQL="MS SQL",DBServerTypeUtils.DATABASE_TYPE_ARRAY=[DBServerType.DB2,DBServerType.SQLAZURE,DBServerType.MSSQL,DBServerType.MONGO,DBServerType.MYSQL,DBServerType.ORACLE,DBServerType.POSTGRESQL,DBServerType.SYBASE],DBServerTypeUtils}();return DBServerTypeUtils});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/dbMonitoring/configuration/backendMapping/BackendMappingDialogController",["require","exports","app/view/dbMonitoring/common/DBControllerBase","app/view/dbMonitoring/utils/DBServerTypeUtils","app/view/dbMonitoring/utils/DbMonitoringUtils","lib/controller/services/dbMonitoring/DBBackendMappingUiService"],function(require,exports,DBControllerBase,DBServerTypeUtils,DbMonitoringUtils,DBBackendMappingUiService){var BackendMappingDialogController=function(_super){function BackendMappingDialogController($scope,$rootScope,$location,$modalInstance,dialogData,resourceManager,notificationService,injectorService,dbMonitoringUiService,dbMonitoringViewService,backendUiService,flashService){_super.call(this,$scope,$rootScope,$location,resourceManager,notificationService,injectorService,dbMonitoringViewService,dbMonitoringUiService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.$modalInstance=$modalInstance,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.dbMonitoringUiService=dbMonitoringUiService,this.dbMonitoringViewService=dbMonitoringViewService,this.backendUiService=backendUiService,this.flashService=flashService,$scope.controller=this,this.editMode=dialogData.editMode,this.backendId=dialogData.backendId,this.setupGridOptions(),this.fetchData(),this.editMode&&this.fetchMappedDbServer()}return __extends(BackendMappingDialogController,_super),BackendMappingDialogController.prototype.onCreateNewDbConfig=function(){this.$modalInstance.dismiss();var dbProperties={};if(this.backend&&this.backend.resolutionInfo&&this.backend.resolutionInfo.properties)for(var index in this.backend.resolutionInfo.properties){var property=this.backend.resolutionInfo.properties[index];dbProperties[property.name.toLowerCase()]=property.value.toLowerCase()}var dbType,vendor=dbProperties[DbMonitoringUtils.DB_VENDOR];vendor&&(dbType=DBServerTypeUtils.getDBTypeFromVendor(vendor));var prefilledCollectorDetails=this.getPrefilledCollectorDetailsByDBType(dbType,dbProperties);dbType||prefilledCollectorDetails.hostname||prefilledCollectorDetails.port?this.dbMonitoringViewService.createNewDbCollectorConfigWithParams(dbType,prefilledCollectorDetails.hostname,prefilledCollectorDetails.port):this.dbMonitoringViewService.createNewDbCollectorConfig()},BackendMappingDialogController.prototype.onMappingSubmit=function(){this.selectedConfigInGrid?(this.$modalInstance.close(DBBackendMappingUiService.instance().addBackendMapping(this.backendId,this.selectedConfigInGrid.id)),this.flashService.appRefreshEvent()):this.$modalInstance.dismiss()},BackendMappingDialogController.prototype.onUnmap=function(){this.$modalInstance.close(DBBackendMappingUiService.instance().unmapBackend(this.backendId)),this.flashService.appRefreshEvent()},BackendMappingDialogController.prototype.onGridRowlick=function(event){this.selectedConfigInGrid=event.raw},BackendMappingDialogController.prototype.setupGridOptions=function(){this.gridOptions=this.gridOptions=new GridOptions;var columns=[new GridColumn({align:"left",dataIndex:"name",visible:!0,renderer:DBServerTypeUtils.dbIconRenderer,flex:.1}),new GridColumn({align:"left",header:this.getString("ms_name"),dataIndex:"name",visible:!0,type:"string",dataIndexMapping:"name",flex:1}),new GridColumn({align:"left",header:this.getString("ms_hostname"),dataIndex:"hostName",visible:!0,type:"string",dataIndexMapping:"hostName",flex:1}),new GridColumn({align:"left",header:this.getStringFromBundle("dbmon","ms_dbListenerPort"),dataIndex:"port",visible:!0,type:"string",dataIndexMapping:"port",flex:.5}),new GridColumn({align:"left",header:this.getString("ms_type"),dataIndex:"type",visible:!0,type:"string",dataIndexMapping:"type",renderer:DBServerTypeUtils.serverTypeRenderer,flex:1})];this.gridOptions.dataProvider=[],this.gridOptions.columnProvider=columns,this.gridOptions.filterFunction=this.gridFilterFunction.bind(this),this.gridOptions.sortFields=[{property:"name",direction:"ASC"}],this.gridOptions.useDataLoadReader=!0},BackendMappingDialogController.prototype.fetchData=function(){var _this=this,thisObject=this;DBBackendMappingUiService.instance().getAllDBServersForMapping().then(function(entries){_this.gridOptions.dataProvider=entries});var backendDetailsPromise=this.backendUiService.getBackendInfoById(this.backendId);backendDetailsPromise.then(function(response){response&&(thisObject.backend=thisObject.backendUiService.getBackendInfoById_response(response))},function(){ADLoggerService.error("Error getting backend info for id:"+thisObject.backendId)})},BackendMappingDialogController.prototype.fetchMappedDbServer=function(){{var _this=this;DBBackendMappingUiService.instance().getMappedDBServerForBackend(this.backendId).then(function(server){_this.mappedDBServer=server})}},BackendMappingDialogController.prototype.gridFilterFunction=function(item){if(!item||!item.data||!item.data.name)return!0;if(!this.gridOptions||!this.gridOptions.filterString)return!0;var index=item.data.name.toLowerCase().indexOf(this.gridOptions.filterString.toLowerCase());return index>-1},BackendMappingDialogController.prototype.getPrefilledCollectorDetailsByDBType=function(dbType,dbProperties){var prefilledCollectorDetails=new PrefilledCollectorDetails;if(DBServerTypeUtils.isMySql(dbType)||DBServerTypeUtils.isMSSql(dbType)||DBServerTypeUtils.isSybase(dbType)||DBServerTypeUtils.isDB2(dbType)||DBServerTypeUtils.isPostGreSql(dbType)){var hostname=dbProperties[DbMonitoringUtils.DB_HOST];hostname&&(prefilledCollectorDetails.hostname=hostname);var port=dbProperties[DbMonitoringUtils.DB_PORT];port&&(prefilledCollectorDetails.port=port)}else if(DBServerTypeUtils.isOracle(dbType)){var url=dbProperties[DbMonitoringUtils.DB_URL];url&&(prefilledCollectorDetails.hostname=StringUtils.getEverythingBeforeToken(url,":"),prefilledCollectorDetails.port=StringUtils.getEverythingAfterToken(url,":"))}return prefilledCollectorDetails},BackendMappingDialogController.$inject=["$scope","$rootScope","$location","$modalInstance","dialogData","resourceManager","notificationService","injectorService","dbMonitoringUiService","dbMonitoringViewService","backendUiService","flashService"],BackendMappingDialogController}(DBControllerBase),PrefilledCollectorDetails=function(){function PrefilledCollectorDetails(){}return PrefilledCollectorDetails}();return BackendMappingDialogController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/renderers/BackendNodeRenderer",["require","exports","./DefaultNodeRenderer","../hoverCards/BackendHoverCard","../hoverCards/HoverCardBase","../hoverCards/MultipleBackendHoverCard","lib/controller/services/dbMonitoring/DBBackendMappingUiService","app/view/dbMonitoring/configuration/backendMapping/BackendMappingDialogController","app/view/dbMonitoring/utils/DBServerTypeUtils"],function(require,exports,DefaultNodeRenderer,backendHoverCard,hoverCardBase,multipleBackendHoverCard,DBBackendMappingUiService,BackendMappingDialogController,DBServerTypeUtils){var BackendNodeRenderer=function(_super){function BackendNodeRenderer($scope,flowmapViewType,parentGraph){void 0===flowmapViewType&&(flowmapViewType=EntityType.APPLICATION),void 0===parentGraph&&(parentGraph=null),_super.call(this,$scope,flowmapViewType,parentGraph),this.backendToTypeMap=new HashMap}return __extends(BackendNodeRenderer,_super),BackendNodeRenderer.prototype.render=function(canvas,backends){return _super.prototype.render.call(this,canvas,backends)},BackendNodeRenderer.prototype.getContextMenuItems=function(data,element){var _this=this,validApp=Util.isValidId(this.appId),dbTunaService=DBTunaService.instance(),result=[];validApp&&result.push({text:resourceManager.getString("ui","ms_viewDashboard"),handler:function(){_this.gotoBackendDash(data,-1)}});var initData=MasterService.instance().initData;return initData&&initData.mainNavConfig&&initData.mainNavConfig.showDatabaseMonitoring&&!data.$$groupItems&&dbTunaService.isDB(data)&&result.push({text:resourceManager.getString("ui","ms_viewBackendInDatabaseMonitoring"),handler:function(){_this.goToDatabaseMonitoring(data,-1)}}),result.push({text:resourceManager.getString("ui","ms_drillDown"),handler:function(){_this.drillDown(data,element)}}),dbTunaService.isDB(data)&&dbTunaService.isDBMonitoringEnabled()&&result.push({text:resourceManager.getString("ui","ms_linkToDbTuna"),handler:function(){_this.linkToDBTuna(data,element)}}),dbTunaService.isDB(data)&&DBCamService.instance().isDBCamEnabled()&&result.push({text:resourceManager.getString("ui","ms_linkToDBCam"),handler:function(){_this.linkToDBCam(data)}}),data.$$groupItems?result.push({text:resourceManager.getString("ui","ms_ungroupBackends"),handler:function(){_this.ungroupBackends(data)}}):(validApp&&result.push({text:resourceManager.getString("ui","ms_hideInThisFlowmap"),handler:function(){_this.hideItem(data)}}),result.push({text:resourceManager.getString("ui","ms_renameBackend"),handler:function(){_this.renameBackend(data)}})),result},BackendNodeRenderer.prototype.drawDrillDown=function(items){for(var _this=this,backendNodes=[],graph=this.getParentGraph(),i=0;i<graph.nodes.length;i++)graph.nodes[i].entityType===EntityType.BACKEND&&backendNodes.push(graph.nodes[i].idNum);BackendUiService.instance().getBackendVendors(backendNodes).then(function(result){for(var key in result)_this.backendToTypeMap.put(key,DBServerTypeUtils.getDBTypeFromVendor(result[key]));var drillDownableNodes=_this.getDrillDownableNodes(items);_super.prototype.drawDrillDown.call(_this,drillDownableNodes)})},BackendNodeRenderer.prototype.ungroupBackends=function(data){for(var idsToUngroup=[],itr=0;itr<data.$$groupItems.length;itr++){var backendToUngroup=data.$$groupItems[itr];idsToUngroup.push(backendToUngroup.idNum)}this.$scope.$emit(BackendNodeRenderer.UNGROUP_BACKENDS,idsToUngroup)},BackendNodeRenderer.prototype.renameBackend=function(data){var backendViewService=AngularUtil.getADInjector().get("backendDashboardViewService");backendViewService.renameBackendFromNode(data)},BackendNodeRenderer.prototype.linkToDBTuna=function(data){DBTunaService.instance().linkToDBTunaFromD3Node(data)},BackendNodeRenderer.prototype.linkToDBCam=function(data){DBCamService.instance().linkToDBCamFromD3Node(data)},BackendNodeRenderer.prototype.isDrillDownable=function(backendId){var dbType=this.backendToTypeMap.get(backendId);return DBServerTypeUtils.isOracle(dbType)},BackendNodeRenderer.prototype.drillDown=function(data,element){this.isMouseDown=!0,this.mouseClick(data,-1,element)},BackendNodeRenderer.prototype.getNodeRendererClass=function(){return"adsBackendNode"},BackendNodeRenderer.prototype.decorateNode=function(item){var _this=this,rad=this.nodeRadius;item.append("image").attr({x:-rad,y:-rad,width:2*rad,height:2*rad,"class":"adsFlowMapBackendImage","xlink:href":function(d){return _this.getShapeIconURL(d)}});var centerImage=item.select("image");this.addMouseTarget(centerImage),this.drawDrillDown(item)},BackendNodeRenderer.prototype.getShapeClass=function(){return"adsFlowMapNodeStyle"},BackendNodeRenderer.prototype.getShapeIconURL=function(node){return ImageUtil.getBackendBigIconSource(ExitPointUtil.getExitPointTypeFromD3Node(node))},BackendNodeRenderer.prototype.mouseDoubleClick=function(d,index,element){_super.prototype.mouseDoubleClick.call(this,d,index,element),this.gotoBackendDash(d,index)},BackendNodeRenderer.prototype.gotoBackendDash=function(d){var backendDashService=AngularUtil.getADInjector().get("backendDashboardViewService");Util.isValidId(this.appId)&&backendDashService.viewBackendDashboard(this.appId,d.idNum)},BackendNodeRenderer.prototype.goToDatabaseMonitoring=function(d){var backendId=d.idNum;DBBackendMappingUiService.instance().getMappedDBServerForBackend(backendId).then(function(dbServer){if(!dbServer)return void DialogService.instance().showDialog(BackendMappingDialogController,"app/view/dbMonitoring/configuration/backendMapping/BackendMappingDialogController","app/view/dbMonitoring/configuration/backendMapping/BackendMappingDialog.html",{editMode:!1,backendId:backendId});var urlParams=URLParams.getCurrentUrlParams(),requestGuid=urlParams.requestGUID();StringUtils.isNullOrEmptyString(requestGuid)?DBMonitoringViewService.instance().viewDbServerHome(dbServer.id):DBMonitoringViewService.instance().viewDbQueriesListForSnapshot(dbServer.id,requestGuid)})},BackendNodeRenderer.prototype.mouseClick=function(d,index,element){if(d3.select(element).classed("ads-drill-down")){if(Util.isValidId(d.idNum)){var promise=DBBackendMappingUiService.instance().getMappedDBServerForBackend(d.idNum);SnapshotViewService.instance().viewDbServerData(promise,d.idNum)}}else if(this.card)this.closePopup();else{var iconUrl=this.getShapeIconURL(d);this.card=d.$$groupItems?new multipleBackendHoverCard.MultipleBackendHoverCard(d,element,this.baseline,this.getFlowmapViewType(),iconUrl,this.appId):new backendHoverCard.BackendHoverCard(d,element,this.baseline,this.getFlowmapViewType(),iconUrl),$(this.card.toolTipElement).on(EventConstants.UEV_CLOSE,this.closePopup.bind(this)),$(document).on(MouseEvents.MOUSE_DOWN+hoverCardBase.HoverCardBase.HOVER_CARD_EVENTS,this.mouseDownOutsidePopup.bind(this))}},BackendNodeRenderer.prototype.getDrillDownableNodes=function(items){var _this=this,initData=MasterService.instance().initData;return items.filter(function(node){var isDrillDownable=_this.isDrillDownable(node.idNum);return URLParams.getCurrentUrlParams().location()==NavigationDataConstants.APP_SNAPSHOT_VIEWER&&initData&&initData.mainNavConfig&&initData.mainNavConfig.showDatabaseMonitoring&&!node.$$groupItems&&DBTunaService.instance().isDB(node)&&isDrillDownable})},BackendNodeRenderer.prototype.getDrillDownTitle=function(){return resourceManager.getString("ui","ms_drillDownTip")},BackendNodeRenderer.prototype.getDrillDownText=function(){return resourceManager.getString("ui","ms_drillDown")},BackendNodeRenderer.prototype.getDrillDownExperienceIcon=function(){return ImageUtil.getUserExperienceIcon(RequestUserExperience.ERROR)},BackendNodeRenderer.UNGROUP_BACKENDS="UNGROUP_BACKENDS",BackendNodeRenderer}(DefaultNodeRenderer);return BackendNodeRenderer});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/renderers/BigBackendNodeRenderer",["require","exports","./BackendNodeRenderer"],function(require,exports,BackendNodeRenderer){var BigBackendNodeRenderer=function(_super){function BigBackendNodeRenderer($scope,flowmapViewType,parentGraph){void 0===flowmapViewType&&(flowmapViewType=EntityType.BACKEND),void 0===parentGraph&&(parentGraph=null),_super.call(this,$scope,flowmapViewType,parentGraph)}return __extends(BigBackendNodeRenderer,_super),BigBackendNodeRenderer.prototype.getNodeRendererClass=function(){return BigBackendNodeRenderer.NODE_RENDERER_CLASS},BigBackendNodeRenderer.prototype.getNodeRadius=function(){return BigBackendNodeRenderer.NODE_RADIUS},BigBackendNodeRenderer.prototype.getEntityTypeVariant=function(){return BigBackendNodeRenderer.ENTITY_TYPE_VARIANT},BigBackendNodeRenderer.NODE_RADIUS=22,BigBackendNodeRenderer.NODE_RENDERER_CLASS="adsBigBackendNode",BigBackendNodeRenderer.ENTITY_TYPE_VARIANT="_big",BigBackendNodeRenderer}(BackendNodeRenderer);return BigBackendNodeRenderer});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/renderers/BrowserNodeRenderer",["require","exports","app/view/components/flowmap/renderers/DefaultNodeRenderer"],function(require,exports,DefaultNodeRenderer){var BrowserNodeRenderer=function(_super){function BrowserNodeRenderer($scope,entityType,parentGraph){void 0===parentGraph&&(parentGraph=null),_super.call(this,$scope,entityType,parentGraph),this.nodeRadius+=this.getRingWidth()}return __extends(BrowserNodeRenderer,_super),BrowserNodeRenderer.prototype.getNodeRadius=function(){return DefaultNodeRenderer.NODE_RADIUS},BrowserNodeRenderer.prototype.getRingWidth=function(){return BrowserNodeRenderer.RING_WIDTH},BrowserNodeRenderer.prototype.render=function(canvas,apps){return _super.prototype.render.call(this,canvas,apps)},BrowserNodeRenderer.prototype.decorateNode=function(items){this.drawPerformanceIndicators(items,this.nodeRadius),this.addBrowserTypeIcon(items)},BrowserNodeRenderer.prototype.drawShape=function(item){var innerCircleRadius=this.getNodeRadius(),circleContainer=item.append("g").attr("class","adsNodeCountContainer");this.createEUMPie(circleContainer),circleContainer.append("circle").attr({cx:0,cy:0,r:innerCircleRadius,"class":" adsNodeCountBackground "}).style("fill","#FFFFFF").style("stroke","#FFFFFF").style("stroke-width","1px");var circleContainer=item.select(".adsNodeCountContainer");this.addMouseTarget(circleContainer)},BrowserNodeRenderer.prototype.innerCircleTextColor=function(){return UiConfig.getColor("WHITE")},BrowserNodeRenderer.prototype.getName=function(d){return d.eumSnapshotData.browser+" "+d.eumSnapshotData.browserVersion},BrowserNodeRenderer.prototype.getNodeRendererClass=function(){return"adsApplicationNode"},BrowserNodeRenderer.prototype.mouseClick=function(d,index,element){_super.prototype.mouseClick.call(this,d,index,element),!this.card&&d.viewPermission||this.closePopup()},BrowserNodeRenderer.prototype.createEUMPie=function(item){var _this=this,pie=d3.layout.pie().sort(null),arc=d3.svg.arc().innerRadius(this.getNodeRadius()).outerRadius(this.getNodeRadius()+this.getRingWidth()),pieGroup=item.selectAll(".ads-node-health-pie ").attr("class","adsFlowMapZoom4").data(function(d){return _this.getEUMTimingData.bind(_this)(d,pie)}).enter().append("path").attr({"class":function(d,i){return"ads-node-health-pie "+_this.getEUMSectionClass(i)},d:arc});return pieGroup},BrowserNodeRenderer.prototype.addBrowserTypeIcon=function(item){var _this=this,totalRadius=this.getNodeRadius()+this.getRingWidth(),imageX=-Math.cos(Math.PI/180*45)*totalRadius,imageY=Math.sin(Math.PI/180*45)*totalRadius,browserTypeContainer=item.append("g").attr("transform","translate(0,0)"),browserTypeImage=browserTypeContainer.append("image").attr({x:-BrowserNodeRenderer.BROWSER_ICON_RADIUS/2,y:-BrowserNodeRenderer.BROWSER_ICON_RADIUS/2,width:BrowserNodeRenderer.BROWSER_ICON_RADIUS,height:BrowserNodeRenderer.BROWSER_ICON_RADIUS,"class":"adsFlowNodeTypeIcon adsFlowMapZoom2","xlink:href":function(d){return _this.getBrowserIconURL(d)}});this.addMouseTarget(browserTypeImage);var pageIconContainer=item.append("g").attr("transform","translate("+imageX+","+imageY+")"),pageIconImage=pageIconContainer.append("image").attr({x:-BrowserNodeRenderer.BROWSER_ICON_RADIUS/2,y:-BrowserNodeRenderer.BROWSER_ICON_RADIUS/2,width:BrowserNodeRenderer.BROWSER_ICON_RADIUS,height:BrowserNodeRenderer.BROWSER_ICON_RADIUS,"class":"adsFlowNodeTypeIcon adsFlowMapZoom2","xlink:href":"images/eum/eum_page_32.png"});this.addMouseTarget(pageIconImage)},BrowserNodeRenderer.prototype.getBrowserIconURL=function(node){return ImageUtil.getBrowserIcon(node.eumSnapshotData.browser)},BrowserNodeRenderer.prototype.getEUMTimingData=function(d,pie){if(d.eumSnapshotData){var networkTime=d.eumSnapshotData.sslHandshakeTime+d.eumSnapshotData.tcpConnectTime+d.eumSnapshotData.domainLookupTime+d.eumSnapshotData.ajaxResponseDownloadTime,serverTime=d.requestSegmentDataItems[0].timeTakenInMilliSecs,browserTime=d.eumSnapshotData.responseTime-networkTime-serverTime;return pie([networkTime,serverTime,browserTime])}return pie([1])},BrowserNodeRenderer.prototype.getEUMSectionClass=function(index){return"adsJS_DATA_CHART_FILL"+index},BrowserNodeRenderer.prototype.mouseDoubleClick=function(d,index,element){_super.prototype.mouseDoubleClick.call(this,d,index,element),this.gotoEUMDash(d,index)},BrowserNodeRenderer.prototype.gotoEUMDash=function(d){d.viewPermission&&d.eumSnapshotData&&EumViewService.instance().viewBrowserSnapshot(this.appId,d.eumSnapshotData.eventSummary.id,d.eumSnapshotData.eventSummary.eventTime)},BrowserNodeRenderer.prototype.getContextMenuItems=function(data){var _this=this;return data.viewPermission?[{text:resourceManager.getString("ui","ms_viewDashboard"),handler:function(){_this.gotoEUMDash(data,-1)}}]:null},BrowserNodeRenderer.RING_WIDTH=10,BrowserNodeRenderer.BROWSER_ICON_RADIUS=20,BrowserNodeRenderer}(DefaultNodeRenderer);return BrowserNodeRenderer});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/renderers/NetworkLoadBalancerRenderer",["require","exports","./DefaultNodeRenderer"],function(require,exports,DefaultNodeRenderer){var NetworkLoadBalancerRenderer=function(_super){function NetworkLoadBalancerRenderer($scope,flowmapViewType,parentGraph){void 0===flowmapViewType&&(flowmapViewType=EntityType.APPLICATION),void 0===parentGraph&&(parentGraph=null),_super.call(this,$scope,flowmapViewType,parentGraph)}return __extends(NetworkLoadBalancerRenderer,_super),NetworkLoadBalancerRenderer.prototype.render=function(canvas,backends){return _super.prototype.render.call(this,canvas,backends)},NetworkLoadBalancerRenderer.prototype.getContextMenuItems=function(){return null},NetworkLoadBalancerRenderer.prototype.getNodeRendererClass=function(){return"adsLoadBalancerNode"},NetworkLoadBalancerRenderer.prototype.decorateNode=function(item){var _this=this,rad=this.nodeRadius;item.append("image").attr({x:-rad,y:-rad,width:2*rad,height:2*rad,"class":"adsFlowNodeTypeIcon","xlink:href":function(d){return _this.getShapeIconURL(d)}});var centerImage=item.select("image");this.addMouseTarget(centerImage)},NetworkLoadBalancerRenderer.prototype.getShapeIconURL=function(){return ImageUtil.getNetworkLoadBalancerIconSource()},NetworkLoadBalancerRenderer.prototype.mouseDoubleClick=function(d,index,element){_super.prototype.mouseDoubleClick.call(this,d,index,element),NetworkMonitoringViewService.instance().goToNetworkElementHealthCustomDash()},NetworkLoadBalancerRenderer.prototype.mouseClick=function(){},NetworkLoadBalancerRenderer.prototype.getName=function(d){return d.name},NetworkLoadBalancerRenderer.prototype.getToolTip=function(d){return d.name},NetworkLoadBalancerRenderer}(DefaultNodeRenderer);return NetworkLoadBalancerRenderer}),define("app/view/components/flowmap/renderers/FlowItemRendererFactory",["require","exports","./NodeNodeRenderer","./TierNodeRenderer","./BigTierNodeRenderer","./AppNodeRenderer","./BackendNodeRenderer","./BigBackendNodeRenderer","./BrowserNodeRenderer","./NetworkLoadBalancerRenderer"],function(require,exports,NodeNodeRenderer,TierNodeRenderer,BigTierNodeRenderer,AppNodeRenderer,BackendNodeRenderer,BigBackendNodeRenderer,BrowserNodeRenderer,NetworkLoadBalancerRenderer){var FlowItemRendererFactory=function(){function FlowItemRendererFactory(entityType,graph,$scope,appId,baseline){this.appRenderer=new AppNodeRenderer($scope,entityType,graph),this.tierRenderer=new TierNodeRenderer($scope,entityType,graph),this.bigTierRenderer=new BigTierNodeRenderer($scope,entityType,graph),this.nodeRenderer=new NodeNodeRenderer($scope,entityType,graph),this.backendRenderer=new BackendNodeRenderer($scope,entityType,graph),this.bigBackendRenderer=new BigBackendNodeRenderer($scope,entityType,graph),this.browserNodeRenderer=new BrowserNodeRenderer($scope,entityType,graph),this.networkLoadBalancerRenderer=new NetworkLoadBalancerRenderer($scope,entityType,graph),this.tierRenderer.appId=appId,this.bigTierRenderer.appId=appId,this.nodeRenderer.appId=appId,this.backendRenderer.appId=appId,this.bigBackendRenderer.appId=appId,this.browserNodeRenderer.appId=appId,this.tierRenderer.baseline=baseline,this.bigTierRenderer.baseline=baseline,this.nodeRenderer.baseline=baseline,this.networkLoadBalancerRenderer.baseline=baseline}return FlowItemRendererFactory.prototype.render=function(canvas,nodes,startLocation){for(var nodeRendererHash={},i=0;i<nodes.length;i++){var node=nodes[i],renderer=this.rendererForData(node),key=node.entityType+renderer.getEntityTypeVariant();nodeRendererHash[key]||(nodeRendererHash[key]=[]),nodeRendererHash[key].push(node)}for(var item in nodeRendererHash){var matchingEntityNodes=nodeRendererHash[item],renderer=this.rendererForEntityTypeVariant(item);if(matchingEntityNodes&&matchingEntityNodes.length&&matchingEntityNodes.length>0){var renderedNodes=renderer.render(canvas,matchingEntityNodes);renderedNodes.attr("x",startLocation.x).attr("y",startLocation.y)}}},FlowItemRendererFactory.prototype.largestNodeRadius=function(){var largest=0;return largest=Math.max(largest,this.appRenderer.nodeRadius),largest=Math.max(largest,this.tierRenderer.nodeRadius),largest=Math.max(largest,this.bigTierRenderer.nodeRadius),largest=Math.max(largest,this.nodeRenderer.nodeRadius),largest=Math.max(largest,this.backendRenderer.nodeRadius),largest=Math.max(largest,this.bigBackendRenderer.nodeRadius),largest=Math.max(largest,this.browserNodeRenderer.nodeRadius)},FlowItemRendererFactory.prototype.rendererForData=function(node){switch(node.entityType){case EntityType.APPLICATION:return this.appRenderer;case EntityType.APPLICATION_COMPONENT:return node.requestedEntity?this.bigTierRenderer:this.tierRenderer;case EntityType.APPLICATION_COMPONENT_NODE:return this.nodeRenderer;case EntityType.BACKEND:return node.requestedEntity?this.bigBackendRenderer:this.backendRenderer;case EntityType.AJAX_REQUEST:return this.browserNodeRenderer;case EntityType.NETWORK_ELEMENT:return this.networkLoadBalancerRenderer;default:return ADLoggerService.warn("FlowItemRendererFactory.rendererForData Warning: Using default entity type."),this.tierRenderer}},FlowItemRendererFactory.prototype.rendererForEntityTypeVariant=function(entityTypeVariant){switch(entityTypeVariant){case EntityType.APPLICATION+this.appRenderer.getEntityTypeVariant():return this.appRenderer;case EntityType.APPLICATION_COMPONENT+this.tierRenderer.getEntityTypeVariant():return this.tierRenderer;case EntityType.APPLICATION_COMPONENT+this.bigTierRenderer.getEntityTypeVariant():return this.bigTierRenderer;case EntityType.APPLICATION_COMPONENT_NODE+this.nodeRenderer.getEntityTypeVariant():return this.nodeRenderer;case EntityType.BACKEND+this.backendRenderer.getEntityTypeVariant():return this.backendRenderer;case EntityType.BACKEND+this.bigBackendRenderer.getEntityTypeVariant():return this.bigBackendRenderer;case EntityType.AJAX_REQUEST+this.backendRenderer.getEntityTypeVariant():return this.browserNodeRenderer;case EntityType.NETWORK_ELEMENT+this.networkLoadBalancerRenderer.getEntityTypeVariant():return this.networkLoadBalancerRenderer;default:return ADLoggerService.warn("FlowItemRendererFactory.rendererForCssClass Warning: Unknown entity type variant "+entityTypeVariant),this.tierRenderer}},FlowItemRendererFactory}();return FlowItemRendererFactory});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/hoverCards/LinkHoverCardBase",["require","exports","./HoverCardBase"],function(require,exports,hoverCardBase){var LinkHoverCardBase=function(_super){function LinkHoverCardBase(edge,source,target,innerCircle,baseline,flowmapViewType,showSparkCharts){this.source=source,this.target=target,this.edge=edge,_super.call(this,edge.stats[0],edge.baselineStats[0],innerCircle,baseline,flowmapViewType,"",showSparkCharts)}return __extends(LinkHoverCardBase,_super),LinkHoverCardBase.prototype.getHTMLPartialLocation=function(){return null},LinkHoverCardBase.prototype.getCardWidth=function(){return this.innerCircle.getBBox().width},LinkHoverCardBase.prototype.getCardHeight=function(){return this.innerCircle.getBBox().height},LinkHoverCardBase.prototype.layoutCard=function(innerCircle,element){if(element&&element.length){element.css("position","absolute"),element.css("display","inline-block");var svg=$(innerCircle).parents("svg")[0],svgMiddleX=innerCircle.getBBox().x+innerCircle.getBBox().width/2,svgMiddleY=innerCircle.getBBox().y+innerCircle.getBBox().height/2,location=$(svg).parent()[0].getBoundingClientRect(),middleOfNode=svg.createSVGMatrix();middleOfNode.a=1,middleOfNode.b=1,middleOfNode.c=1,middleOfNode.d=1,middleOfNode.e=svgMiddleX-this.getAnchorWidth()/2,middleOfNode.f=svgMiddleY-this.getAnchorHeight()/2;var matrix=this.getSvgTransformToElement(innerCircle,svg);middleOfNode=matrix.multiply(middleOfNode);var cardX=Math.max(0,location.left+middleOfNode.e-element.outerWidth()/2),cardY=Math.max(0,location.top+middleOfNode.f-element.height()/2);cardX=Math.min(cardX,$(document).width()-element.width()),cardY=Math.min(cardY,$(document).height()-element.height()),element.css("left",cardX+"px").css("top",cardY+"px")}},LinkHoverCardBase.prototype.getNodeLinkLogoPath=function(nodeSource){if(!nodeSource)return null;var srcUrl="";switch(nodeSource.entityType){case EntityType.APPLICATION:srcUrl=ImageUtil.iconNavApplication;break;case EntityType.APPLICATION_COMPONENT:case EntityType.APPLICATION_COMPONENT_NODE:srcUrl=ImageUtil.getFlowMapComponentIconFromType(nodeSource.componentType);break;case EntityType.BACKEND:srcUrl=ImageUtil.getBackendMiniIconSource(nodeSource.backendType);break;case EntityType.AJAX_REQUEST:srcUrl=ImageUtil.getBrowserIcon(nodeSource.eumSnapshotData.browser);break;case EntityType.NETWORK_ELEMENT:srcUrl=ImageUtil.networkLoadBalancer;break;default:ADLoggerService.error("Unknown entity in LinkHoverCardBase: "+nodeSource.entityType),srcUrl=""}return srcUrl},LinkHoverCardBase.prototype.getNameForAPersistentObject=function(entityDefinition,entity){var rtn=null;if(null!=entity&&null!=entityDefinition)switch(entityDefinition.entityType){case EntityType.BACKEND:rtn=entity.displayName;break;
default:rtn=entity.name}return(null==rtn||0==rtn.length)&&(rtn="["+entityDefinition.entityType+" "+entityDefinition.entityId+"]"),rtn},LinkHoverCardBase}(hoverCardBase.HoverCardBase);exports.LinkHoverCardBase=LinkHoverCardBase,window.LinkHoverCardBase=LinkHoverCardBase});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/hoverCards/SingleLinkHoverCard",["require","exports","app/view/components/flowmap/hoverCards/LinkHoverCardBase","app/view/networkMonitoring/flowMap/hoverCards/sparkChart/NetworkSparkChartDirective","../../../networkMonitoring/shared/NPMConstants"],function(require,exports,linkHoverCardBase,networkSparkChart,NPMConstants){var SingleLinkHoverCard=function(_super){function SingleLinkHoverCard(data,source,target,innerCircle,baseline,flowmapViewType,showSparkCharts,entityMap){void 0===entityMap&&(entityMap=null),this.entityMap=entityMap,_super.call(this,data,source,target,innerCircle,baseline,flowmapViewType,showSparkCharts)}return __extends(SingleLinkHoverCard,_super),SingleLinkHoverCard.prototype.getHTMLPartialLocation=function(){return"app/view/components/flowmap/hoverCards/SingleLinkHoverCard.html"},SingleLinkHoverCard.prototype.fetchSparkChartsData=function(baseline,dashboardGraphService,timeRangeService){var artID=this.edge.stats[0].averageResponseTime.metricId,callsId=this.edge.stats[0].callsPerMinute.metricId,errrosId=this.edge.stats[0].errorsPerMinute.metricId;return dashboardGraphService.getLinkStatsData(this.edge.sourceNodeDefinition.entityId,this.edge.sourceNodeDefinition.entityType,artID,callsId,errrosId,timeRangeService.getCurrentTimeRangeStringForUrl(),baseline?baseline.id:-1)},SingleLinkHoverCard.prototype.doubleClickSparkChartHandler=function(metricId){MetricBrowserViewService.instance().openMetricBrowser(parseInt(this.toolTipScope.appId),metricId,{entityId:this.linkScope.entityId,entityType:this.linkScope.entityType}),this.closeCard()},SingleLinkHoverCard.prototype.getContextMenuItems=function(metricId){var _this=this;return[{text:resourceManager.getString("ui","ms_viewPerformanceMetrics"),handler:function(){MetricBrowserViewService.instance().openMetricBrowser(parseInt(_this.toolTipScope.appId),metricId,{entityId:_this.linkScope.entityId,entityType:_this.linkScope.entityType})}}]},SingleLinkHoverCard.prototype.decorateScope=function(scope){var _this=this;this.linkScope=scope,this.linkScope.controller=this,this.linkScope.noDataDisplayString=MetricUtil.NO_DATA_DISPLAY_STRING;var setFromNodeName=!1;if(this.edge&&this.edge.crossAppOriginTierDefinition&&this.entityMap){var sourceSubNodeEntity=this.entityMap.getEntity(this.edge.crossAppOriginTierDefinition);null!=sourceSubNodeEntity&&(this.linkScope.fromNodeName=sourceSubNodeEntity.name+" "+ResourceManager.instance().getString("ui","ms_on_lowercase")+" "+this.edge.source.name,setFromNodeName=!0)}setFromNodeName||(this.linkScope.fromNodeName=this.edge.source.name),this.linkScope.fromNodeLogoPath=this.getNodeLinkLogoPath(this.edge.source),this.linkScope.toNodeName=this.edge.target.name,this.linkScope.toNodeLogoPath=this.getNodeLinkLogoPath(this.edge.target),this.linkScope.toExitPointTypeLabel=ExitPointUtil.getExitPointTypeLabelFromD3Node(this.edge.target),this.linkScope.entityType=this.edge.source.entityType,this.linkScope.entityId=this.edge.source.idNum,this.linkScope.targetEntityType=this.edge.target.entityType,this.linkScope.targetEntityId=this.edge.target.idNum,this.linkScope.isApplicationComponent=function(){return _this.isApplicationComponent()},this.linkScope.isTargetApplicationComponent=function(){return _this.linkScope.targetEntityType===EntityType.APPLICATION_COMPONENT};var lastSection=SingleLinkHoverCard.OVERVIEW;NetworkMonitoringViewService.instance().isLocationAppNetworkDashboard()&&(lastSection=SingleLinkHoverCard.NETWORK_MONITORING_SECTION,this.decorateScopeForNetworkStats()),this.linkScope[lastSection]=!0,this.linkScope.selectPanel=function(section){lastSection&&(_this.linkScope[lastSection]=!1),section==SingleLinkHoverCard.OVERVIEW&&lastSection!=section&&ViewUtil.doAfterDigest(function(){_this.attachEventsOnSparkChart($(_this.toolTipElement))}),_this.linkScope[section]=!0,lastSection=section,section!=SingleLinkHoverCard.NETWORK_MONITORING_SECTION||_this.netStatOption||_this.decorateScopeForNetworkStats()},this.linkScope.displayBelowModalStack=!0},SingleLinkHoverCard.prototype.isApplicationComponent=function(){return this.linkScope.entityType===EntityType.APPLICATION_COMPONENT},SingleLinkHoverCard.prototype.showBTBreakdown=function(){return this.isApplicationComponent()&&this.linkScope.targetEntityType!=EntityType.APPLICATION},SingleLinkHoverCard.prototype.showSlowestExitCalls=function(){return this.isApplicationComponent()&&this.linkScope.targetEntityType!=EntityType.APPLICATION},SingleLinkHoverCard.prototype.showNetworkCharts=function(){return this.isApplicationComponent()&&NetworkMonitoringViewService.instance().isNetworkMonitoringEnabled()},SingleLinkHoverCard.prototype.decorateScopeForNetworkStats=function(){this.netStatOption={sourceEntityID:this.linkScope.entityId,sourceEntityType:this.linkScope.entityType,destinationEntityID:this.linkScope.targetEntityId,destinationEntityType:this.linkScope.targetEntityType,exitType:FlowRendererUtils.getLinkTypeTextForNetworkFlowMap(this.edge),networkStats:this.edge.networkStats?this.edge.networkStats:null,sparkChartType:NPMConstants.SPARK_CHART_FOR_LINK,baselineId:this.baseline?this.baseline.id:-1,averageResponseTimeMetricId:this.stats.averageResponseTime.metricId,averageResponseTime:this.toolTipScope.averageResponseTime,averageResponseSparkPath:this.toolTipScope.averageResponseSparkPath,closeCardFunction:this.closeCard}},SingleLinkHoverCard.NETWORK_MONITORING_SECTION="networkMon",SingleLinkHoverCard.OVERVIEW="overview",SingleLinkHoverCard}(linkHoverCardBase.LinkHoverCardBase);exports.SingleLinkHoverCard=SingleLinkHoverCard});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/hoverCards/BTSingleLinkHoverCard",["require","exports","./SingleLinkHoverCard"],function(require,exports,singleLinkHoverCard){var BTSingleLinkHoverCard=function(_super){function BTSingleLinkHoverCard(data,source,target,innerCircle,baseline,flowmapViewType,showSparkCharts,entityMap){void 0===entityMap&&(entityMap=null),_super.call(this,data,source,target,innerCircle,baseline,flowmapViewType,showSparkCharts,entityMap),this.showSparkCharts=showSparkCharts}return __extends(BTSingleLinkHoverCard,_super),BTSingleLinkHoverCard.prototype.getHTMLPartialLocation=function(){return"app/view/components/flowmap/hoverCards/BTSingleLinkHoverCard.html"},BTSingleLinkHoverCard.prototype.decorateScope=function(scope){_super.prototype.decorateScope.call(this,scope);var transactionStats,linkScope=scope;TransactionStatUtils.hasSyncTransactionStatsSet(this.edge.stats[0])?(transactionStats=TransactionStatUtils.getSyncTransactionStats(this.edge.stats[0]),linkScope.isAsync=!1):(transactionStats=TransactionStatUtils.getAsyncTransactionStats(this.edge.stats[0]),linkScope.isAsync=!0),linkScope.callsPerTransaction=Util.getNumberToDecimalPrecision(transactionStats.callsPerTransaction,1),0==linkScope.callsPerTransaction&&(linkScope.callsPerTransaction=Util.getNumberToDecimalPrecision(transactionStats.callsPerTransaction,2)),linkScope.averageTimePerTransaction=Util.getNumberToDecimalPrecision(transactionStats.timeConsumedPerTransaction,1),linkScope.averageTimePerCall=transactionStats.callsPerTransaction>0?Util.getNumberToDecimalPrecision(transactionStats.timeConsumedPerTransaction/transactionStats.callsPerTransaction,1):-1,linkScope.displayBelowModalStack=!1},BTSingleLinkHoverCard}(singleLinkHoverCard.SingleLinkHoverCard);exports.BTSingleLinkHoverCard=BTSingleLinkHoverCard});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/hoverCards/MultiLinkHoverCard",["require","exports","./LinkHoverCardBase","./SingleLinkHoverCard","./BTSingleLinkHoverCard"],function(require,exports,linkHoverCardBase,singleLinkHoverCard,btSingleLinkHoverCard){var MultiLinkHoverCard=function(_super){function MultiLinkHoverCard(data,source,target,innerCircle,baseline,flowmapViewType,entityMap){this.entityMap=entityMap,_super.call(this,data,source,target,innerCircle,baseline,flowmapViewType,!1)}return __extends(MultiLinkHoverCard,_super),MultiLinkHoverCard.prototype.getHTMLPartialLocation=function(){return"app/view/components/flowmap/hoverCards/MultiLinkHoverCard.html"},MultiLinkHoverCard.prototype.decorateScope=function(scope){var _this=this,linkScope=scope;linkScope.itemSelected=function(event){linkScope.selectedEdge=event.selected.items.length>0?event.selected.items[0].raw:null,ViewUtil.safeApply(linkScope)},linkScope.fromNodeName=this.getNameForAPersistentObject(this.edge.sourceNodeDefinition,this.source),linkScope.fromNodeLogoPath=this.getNodeLinkLogoPath(this.edge.source),linkScope.toNodeName=this.getNameForAPersistentObject(this.edge.targetNodeDefinition,this.target),linkScope.title=linkScope.fromNodeName+" "+ResourceManager.instance().getString("ui","ms_spacerForPathString")+" ",this.edge.isAggregated?(linkScope.title+=StringUtils.capitalizeStringFirstLetter(ResourceManager.instance().getString("ui","ms_MULTIPLE")),linkScope.title+=" "+ExitPointUtil.getExitPointTypeLabelFromD3Node(this.edge.target)+" ",linkScope.title+=ResourceManager.instance().getString("ui","ms_lowerBackends")):linkScope.title+=linkScope.toNodeName,linkScope.viewCallDetails=function(){var injector=AngularUtil.getADInjector(),entityService=injector.get("entityService");if(linkScope.selectedEdge)var selectedEdge=linkScope.selectedEdge.originalEdge,entityMap=entityService.fetchEntities([selectedEdge.sourceNodeDefinition,selectedEdge.targetNodeDefinition],function(){if(_this.toolTipScope.closeCard(),_this.isFlowmapViewTypeBT())_this.card=new btSingleLinkHoverCard.BTSingleLinkHoverCard(selectedEdge,entityMap.getEntity(selectedEdge.sourceNodeDefinition),entityMap.getEntity(selectedEdge.targetNodeDefinition),_this.innerCircle,_this.baseline,_this.flowmapViewType,!1,_this.entityMap);else{var specificEdge=angular.copy(selectedEdge);specificEdge.stats=[linkScope.selectedEdge.stats],_this.card=new singleLinkHoverCard.SingleLinkHoverCard(specificEdge,entityMap.getEntity(specificEdge.sourceNodeDefinition),entityMap.getEntity(specificEdge.targetNodeDefinition),_this.innerCircle,_this.baseline,_this.flowmapViewType,!0,_this.entityMap)}_this.closeListener=_this.destroyPopup.bind(_this),_this.mouseDownListener=_this.mouseDownOutsidePopup.bind(_this),$(_this.card.toolTipElement).on(EventConstants.UEV_CLOSE,_this.closeListener),$(document).on(MouseEvents.MOUSE_DOWN,_this.mouseDownListener)})};for(var edge=this.edge,dataProvider=[],edges=edge.isAggregated?edge.aggregatedEdges:[edge],showUpstreamCrossTierColumn=!1,i=0;i<edges.length;i++)if(null!=edges[i].crossAppOriginTierDefinition){showUpstreamCrossTierColumn=!0;break}for(var edgeNum=0;edgeNum<edges.length;edgeNum++)for(var currentEdge=edges[edgeNum],statNum=0;currentEdge.stats&&statNum<currentEdge.stats.length;statNum++){var stat=currentEdge.stats[statNum];dataProvider.push(this.createEdgeCall(stat,stat.exitPointCall,currentEdge))}linkScope.gridOptions=new GridOptions({dataProvider:dataProvider,columnProvider:this.isFlowmapViewTypeBT()?this.buildBTExitCallsGridColumns(showUpstreamCrossTierColumn):this.buildExitCallsGridColumns(showUpstreamCrossTierColumn),compileRenderers:!1,loading:!1})},MultiLinkHoverCard.prototype.createEdgeCall=function(stat,exitPointCall,currentEdge){var sourceSubNodeEntity=this.entityMap.getEntity(currentEdge.crossAppOriginTierDefinition),sourceSubNodeName=null;null!=sourceSubNodeEntity&&(sourceSubNodeName=sourceSubNodeEntity.name);var rtn={stats:stat,exitPointCall:exitPointCall,originalEdge:currentEdge,source:currentEdge.source,target:currentEdge.target,sourceNodeDefinition:currentEdge.sourceNodeDefinition,targetNodeDefinition:currentEdge.targetNodeDefinition,sourceSubNodeName:sourceSubNodeName};return rtn},MultiLinkHoverCard.prototype.mouseDownOutsidePopup=function(event){this.card&&!$.contains(this.card.toolTipElement,event.target)&&event.target!=this.card.toolTipElement&&this.destroyPopup(event)},MultiLinkHoverCard.prototype.destroyPopup=function(){this.card&&($(document).off(MouseEvents.MOUSE_DOWN,this.mouseDownListener),$(this.card.toolTipElement).off(EventConstants.UEV_CLOSE,this.closeListener),this.mouseDownListener=null,this.closeListener=null,this.card.destroy(),this.card=null)},MultiLinkHoverCard.prototype.buildBTExitCallsGridColumns=function(showUpstreamCrossTierColumn){void 0===showUpstreamCrossTierColumn&&(showUpstreamCrossTierColumn=!1);var columns=[],labelColumn=GridColumn.createColumn(70,"exitPointCall",resourceManager.getString("ui","ms_call"),function(val,meta,record){return ExitPointUtil.getExitPointTypeLabelFromEdgeCall(record.raw)},!0),callsPerTransColumn=GridColumn.createColumn(70,"stats","Calls/transaction",function(eps){var stats=TransactionStatUtils.hasSyncTransactionStatsSet(eps)?eps.transactionStats:eps.asyncTransactionStats;return stats?ViewUtil.formatNumber(stats.callsPerTransaction,0):MetricUtil.NO_DATA_DISPLAY_STRING},!0,!0,"right"),callsColumn=GridColumn.createColumn(70,"stats","Calls",function(eps){var stats=TransactionStatUtils.hasSyncTransactionStatsSet(eps)?eps.transactionStats:eps.asyncTransactionStats;return stats?ViewUtil.formatNumber(stats.numberOfCalls,0):MetricUtil.NO_DATA_DISPLAY_STRING},!0,!0,"right"),errorsPercent=GridColumn.createColumn(70,"stats","Errors %",function(eps){var stats=TransactionStatUtils.hasSyncTransactionStatsSet(eps)?eps.transactionStats:eps.asyncTransactionStats;return stats?ViewUtil.formatNumber(stats.errorsPercentage,0):MetricUtil.NO_DATA_DISPLAY_STRING},!0,!0,"right"),errorsColumn=GridColumn.createColumn(70,"stats","Errors",function(eps){var stats=TransactionStatUtils.hasSyncTransactionStatsSet(eps)?eps.transactionStats:eps.asyncTransactionStats;return stats?ViewUtil.formatNumber(stats.numberOfErrors,0):MetricUtil.NO_DATA_DISPLAY_STRING},!0,!0,"right"),timeConsumedColumn=GridColumn.createColumn(70,"stats","Time Consumed (ms)",function(eps){var stats=TransactionStatUtils.hasSyncTransactionStatsSet(eps)?eps.transactionStats:eps.transactionStats;return stats?ViewUtil.formatNumber(stats.timeConsumedPerTransaction,0):MetricUtil.NO_DATA_DISPLAY_STRING},!0,!0,"right"),fromColumn=GridColumn.createColumn(showUpstreamCrossTierColumn?200:100,"source","From",function(val,meta,record){return record&&record.raw&&record.raw.sourceSubNodeName?record.raw.sourceSubNodeName+" "+ResourceManager.instance().getString("ui","ms_on_lowercase")+" "+val.name:val.name},!0),toColumn=GridColumn.createColumn(100,"target","To",function(val){return val.name},!0);return columns.push(labelColumn),columns.push(fromColumn),columns.push(toColumn),columns.push(callsPerTransColumn),columns.push(callsColumn),columns.push(errorsPercent),columns.push(errorsColumn),columns.push(timeConsumedColumn),columns},MultiLinkHoverCard.prototype.buildExitCallsGridColumns=function(showUpstreamCrossTierColumn){void 0===showUpstreamCrossTierColumn&&(showUpstreamCrossTierColumn=!1);var columns=[],labelColumn=GridColumn.createColumn(70,"exitPointCall",resourceManager.getString("ui","ms_call"),function(val,meta,record){return ExitPointUtil.getExitPointTypeLabelFromEdgeCall(record.raw)},!0),callsPerMinuteColumn=GridColumn.createColumn(70,"stats.callsPerMinute.metricValue","Calls/min",function(val,meta,record){var eps=record.raw.stats;return eps&&eps.callsPerMinute?MetricUtil.getMetricDisplay(eps.callsPerMinute.metricValue):MetricUtil.NO_DATA_DISPLAY_STRING},!0,!0,"right"),callsColumn=GridColumn.createColumn(70,"stats.numberOfCalls.metricValue","Calls",function(val,meta,record){var eps=record.raw.stats;return eps&&eps.numberOfCalls?MetricUtil.getMetricDisplay(eps.numberOfCalls.metricValue):MetricUtil.NO_DATA_DISPLAY_STRING},!0,!0,"right"),artColumn=GridColumn.createColumn(70,"stats.averageResponseTime.metricValue","ART (ms)",function(val,meta,record){var eps=record.raw.stats;return eps&&eps.averageResponseTime?MetricUtil.getMetricDisplay(eps.averageResponseTime.metricValue):MetricUtil.NO_DATA_DISPLAY_STRING},!0,!0,"right"),errorsPerMinuteColumn=GridColumn.createColumn(70,"stats.errorsPerMinute.metricValue","Errors/min",function(val,meta,record){var eps=record.raw.stats;return eps&&eps.errorsPerMinute?MetricUtil.getMetricDisplay(eps.errorsPerMinute.metricValue):MetricUtil.NO_DATA_DISPLAY_STRING},!0,!0,"right"),errorsColumn=GridColumn.createColumn(70,"stats.numberOfErrors.metricValue","Errors",function(val,meta,record){var eps=record.raw.stats;return eps&&eps.numberOfErrors?MetricUtil.getMetricDisplay(eps.numberOfErrors.metricValue):MetricUtil.NO_DATA_DISPLAY_STRING},!0,!0,"right"),fromColumn=GridColumn.createColumn(showUpstreamCrossTierColumn?200:100,"source","From",function(val,meta,record){return record&&record.raw&&record.raw.sourceSubNodeName?record.raw.sourceSubNodeName+" on "+val.name:val.name},!0),toColumn=GridColumn.createColumn(100,"target","To",function(val){return val.name},!0);return columns.push(labelColumn),columns.push(fromColumn),columns.push(toColumn),columns.push(callsPerMinuteColumn),columns.push(callsColumn),columns.push(artColumn),columns.push(errorsPerMinuteColumn),columns.push(errorsColumn),columns},MultiLinkHoverCard}(linkHoverCardBase.LinkHoverCardBase);exports.MultiLinkHoverCard=MultiLinkHoverCard});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/renderers/LinkRendererBase",["require","exports","./RendererBase","../hoverCards/HoverCardBase","../hoverCards/MultiLinkHoverCard","../hoverCards/SingleLinkHoverCard","../hoverCards/BTSingleLinkHoverCard"],function(require,exports,RendererBase,hoverCardBase,multiLinkHoverCard,singleLinkHoverCard,btSingleLinkHoverCard){var LinkRendererBase=function(_super){function LinkRendererBase($scope,rendererFactory,flowmapViewType,parentGraph){void 0===flowmapViewType&&(flowmapViewType=EntityType.APPLICATION),void 0===parentGraph&&(parentGraph=null),_super.call(this,$scope,flowmapViewType,parentGraph),this.rendererFactory=rendererFactory,this.isMouseDown=!1}return __extends(LinkRendererBase,_super),LinkRendererBase.prototype.render=function(canvas,data,arrows){var _this=this;void 0===arrows&&(arrows=!0);var linkContainer=canvas.selectAll(this.getLinkSelectorClass()).data(data).enter().insert("g",":first-child");linkContainer.append("path").attr("id",this.getEdgeHitAreaID).attr("class","adsFlowMapLink adsFlowMapLinkHitArea").attr("d",this.linkPathUpdater()),linkContainer.append("path").attr("id",this.getEdgeID).attr("class",this.getLinkCSSClasses.bind(this)).attr("d",this.linkPathUpdater()).attr("stroke-dasharray",function(d){return _this.getDashedLinePattern(d)}),linkContainer.on(MouseEvents.CLICK,this.getMouseClickHandler()),linkContainer.on(MouseEvents.MOUSE_DOWN,this.getMouseDownHandler()),linkContainer.on(MouseEvents.MOUSE_MOVE,this.getMouseMoveHandler());for(var hasAsyncExitCalls=!1,i=0;i<data.length;i++){var edge=data[i];if(hasAsyncExitCalls=hasAsyncExitCalls||edge&&this.hasAsyncActivity(edge))break}var displayARTAsPercentage=!hasAsyncExitCalls,renderer=this;return FlowRendererUtils.createShadowedText(function(d){var isNotCrossAppLink=StringUtils.isNullOrEmptyString(d.source.crossApplicationSnapshot)&&StringUtils.isNullOrEmptyString(d.target.crossApplicationSnapshot);return renderer.getSyncStatsText(d,renderer.getParentGraph().totalTransactionTime,displayARTAsPercentage&&isNotCrossAppLink)},function(d){return LinkRendererBase.positionLabel(d,this,0)},linkContainer.filter(function(d){return renderer.getSyncStatsText(d,renderer.getParentGraph().totalTransactionTime,displayARTAsPercentage)?!0:!1}),function(d){return"adsFlowMapStatsDetails adsFlowMapZoom3 adsFlowMapLinkLabels "+FlowRendererUtils.performanceColorClassART(d)}),FlowRendererUtils.createShadowedText(function(d){return renderer.getAsyncStatsText(d)},function(d){return LinkRendererBase.positionLabel(d,this,1)},linkContainer.filter(function(d){return renderer.getAsyncStatsText(d)?!0:!1}),function(d){return"adsFlowMapStatsDetails adsFlowMapZoom3 adsFlowMapLinkLabels "+FlowRendererUtils.performanceColorClassART(d)}),FlowRendererUtils.createShadowedText(function(d){return renderer.getLinkTypeText(d)},function(d){return LinkRendererBase.positionLabel(d,this,2)},linkContainer,function(d){return"adsFlowMapText adsFlowMapZoom3 "+LinkRendererBase.LABEL_TYPE_STYLE_CLASS+" adsFlowMapLinkLabels "+FlowRendererUtils.performanceColorClassART(d)}),linkContainer},LinkRendererBase.prototype.getDashedLinePattern=function(d){var dashPattern,hasAsync=this.hasAsyncActivity(d),hasSync=this.hasSyncActivity(d);return dashPattern=hasAsync&&hasSync?LinkRendererBase.MIXED_DASH_PATTERN:hasAsync?LinkRendererBase.ASYNC_DASH_PATTERN:LinkRendererBase.SYNC_DASH_PATTERN},LinkRendererBase.prototype.getMouseClickHandler=function(){var renderer=this;return function(d){var _this=this;if(!renderer.card&&renderer.isMouseDown){var injector=AngularUtil.getADInjector(),entityService=injector.get("entityService"),entitiesToFetch=[d.sourceNodeDefinition,d.targetNodeDefinition];null!=d.crossAppOriginTierDefinition&&entitiesToFetch.push(d.crossAppOriginTierDefinition);var entityMap=entityService.fetchEntities(entitiesToFetch,function(){var linkHoverCard=null,multipleCalls=d.stats&&d.stats.length>1;if(d.isAggregated||multipleCalls)linkHoverCard=new multiLinkHoverCard.MultiLinkHoverCard(d,entityMap.getEntity(d.sourceNodeDefinition),entityMap.getEntity(d.targetNodeDefinition),_this,null,renderer.getFlowmapViewType(),entityMap);else{var source=d.source;linkHoverCard=renderer.isFlowmapViewTypeBT()?new btSingleLinkHoverCard.BTSingleLinkHoverCard(d,entityMap.getEntity(d.sourceNodeDefinition),entityMap.getEntity(d.targetNodeDefinition),_this,renderer.baseline,renderer.getFlowmapViewType(),URLParams.getCurrentUrlParams().location()===NavigationDataConstants.APP_BT_DETAIL&&source.entityType!==EntityType.BACKEND,entityMap):new singleLinkHoverCard.SingleLinkHoverCard(d,entityMap.getEntity(d.sourceNodeDefinition),entityMap.getEntity(d.targetNodeDefinition),_this,renderer.baseline,renderer.getFlowmapViewType(),source.entityType!==EntityType.BACKEND,entityMap)}renderer.card=linkHoverCard,$(renderer.card.toolTipElement).on(EventConstants.UEV_CLOSE,renderer.closePopup.bind(renderer)),$(document).on(MouseEvents.MOUSE_DOWN+hoverCardBase.HoverCardBase.HOVER_CARD_EVENTS,renderer.mouseDownOutsidePopup.bind(renderer))})}else renderer.closePopup();renderer.isMouseDown=!1,renderer.mouseDownPagePoint=null}},LinkRendererBase.prototype.getMouseDownHandler=function(){var _this=this,renderer=this;return function(){renderer.mouseDownPagePoint=new Point2D(d3.event.pageX,d3.event.pageY),_this.isMouseDown=!0}},LinkRendererBase.prototype.getMouseMoveHandler=function(){var _this=this,renderer=this;return function(){_this.isMouseDown=!1,renderer.mouseDownPagePoint=null}},LinkRendererBase.prototype.getSyncStatsText=function(d,totalTransactionTime,displayARTAsPercentage){void 0===displayARTAsPercentage&&(displayARTAsPercentage=!0);var label="";if(this.isFlowmapViewTypeBT()){if(this.hasSyncActivity(d)){var btStat=TransactionStatUtils.getAggregateTimeConsumedPerTransactionSync(d.stats);if(btStat>0){var btPercent=btStat/totalTransactionTime*100;label+=APMUtil.renderDuration(btStat),totalTransactionTime>0&&displayARTAsPercentage&&(label+=" ("+Util.getNumberToDecimalPrecision(btPercent,1)+"%)")}}}else d.stats&&(label+=FlowRendererUtils.getFlowSyncStatLabelForEdgePerformanceStats(d.stats));return label},LinkRendererBase.prototype.getAsyncStatsText=function(d){var label="";if(this.isFlowmapViewTypeBT()){if(this.hasAsyncActivity(d)){var btStat=TransactionStatUtils.getAggregateTimeConsumedPerTransactionAsync(d.stats);btStat>0&&(label+=APMUtil.renderDuration(btStat)+" "+resourceManager.getString("ui","ms_asyncCallType"))}}else d.stats&&(label+=FlowRendererUtils.getFlowAsyncStatLabelForEdgePerformanceStats(d.stats));return label},LinkRendererBase.prototype.getLinkTypeText=function(d){return FlowRendererUtils.getLinkTypeText(d)},LinkRendererBase.prototype.linkPathUpdater=function(arrows){void 0===arrows&&(arrows=!0);var renderer=this;return function(d,index){return renderer.linkPathData(d,index,this,arrows)}},LinkRendererBase.prototype.linkPathData=function(data,index,element,arrows){void 0===arrows&&(arrows=!0);var d3Edge=data,source=d3Edge.source,target=d3Edge.target,drawArrows=-1==$(element).attr("class").indexOf("adsFlowMapLinkHitArea")&&arrows;if(!(target.x&&target.y&&source.x&&source.y))return"M 0,0 L 0,0";var dx=target.x-source.x,dy=target.y-source.y,dr=Math.sqrt(dx*dx+dy*dy),normalizedVecX=dx/dr,normalizedVecY=dy/dr;0>=dr&&(normalizedVecX=1,normalizedVecY=1);var startPosX,startPosY,endPosX,endPosY,sourceRadius=this.getNodeRadius(data.source),targetRadius=this.getNodeRadius(data.target),hasAsync=this.getDashedLinePattern(data)!=LinkRendererBase.SYNC_DASH_PATTERN,arrowPath="",pathEnding="";if(target==source){var selfCurveRadius=1.5*sourceRadius;if(startPosX=-Math.cos(Math.PI/4)*sourceRadius+source.x,startPosY=-Math.sin(Math.PI/4)*sourceRadius+source.y,endPosX=Math.cos(Math.PI/4)*sourceRadius+source.x,endPosY=startPosY,data.textPosX=startPosX+(endPosX-startPosX)/2,data.textPosY=startPosY-selfCurveRadius,arrowPath=" Q "+startPosX+","+(source.y-selfCurveRadius)+"  "+source.x+","+(source.y-selfCurveRadius),drawArrows){var hasAsync=this.getDashedLinePattern(data)!=LinkRendererBase.SYNC_DASH_PATTERN;arrowPath+=this.createInlineArrowMarkup(source.x-2,source.y-selfCurveRadius,1,0,hasAsync)}arrowPath+=" Q "+endPosX+","+(source.y-selfCurveRadius)+" "+endPosX+" "+endPosY,arrowPath+=" Q "+endPosX+","+(source.y-selfCurveRadius)+" "+source.x+","+(source.y-selfCurveRadius),arrowPath+=" Q "+startPosX+","+(source.y-selfCurveRadius)+"  "+startPosX+","+startPosY,pathEnding=" M "+endPosX+","+endPosY+" M "+endPosX+","+endPosY+" Z "}else{var arrowNodePadding=Math.min(dr-sourceRadius-targetRadius,30);startPosX=normalizedVecX*sourceRadius+source.x,startPosY=normalizedVecY*sourceRadius+source.y,normalizedVecX=-normalizedVecX,normalizedVecY=-normalizedVecY,endPosX=normalizedVecX*targetRadius+target.x,endPosY=normalizedVecY*targetRadius+target.y;var arrowX=startPosX+-normalizedVecX*arrowNodePadding,arrowY=startPosY+-normalizedVecY*arrowNodePadding,labelFractionOffset=LinkRendererBase.LABEL_DISTANCE,offsetVectorX=0,offsetVectorY=0;data.adjacentEdge&&(offsetVectorX=normalizedVecY*LinkRendererBase.BIDI_LINK_OFFSET,offsetVectorY=-(normalizedVecX*LinkRendererBase.BIDI_LINK_OFFSET),startPosX+=offsetVectorX,startPosY+=offsetVectorY,endPosX+=offsetVectorX,endPosY+=offsetVectorY,arrowX=startPosX+-normalizedVecX*arrowNodePadding,arrowY=startPosY+-normalizedVecY*arrowNodePadding,labelFractionOffset=LinkRendererBase.BIDI_LABEL_DISTANCE,offsetVectorX*=LinkRendererBase.BIDI_LABEL_OFFSET_FACTOR,offsetVectorY*=LinkRendererBase.BIDI_LABEL_OFFSET_FACTOR),drawArrows&&(arrowPath=this.createInlineArrowMarkup(arrowX,arrowY,-normalizedVecX,-normalizedVecY,hasAsync),arrowX=endPosX+normalizedVecX*arrowNodePadding,arrowY=endPosY+normalizedVecY*arrowNodePadding,arrowPath+=this.createInlineArrowMarkup(arrowX,arrowY,-normalizedVecX,-normalizedVecY,hasAsync)),data.textPosX=startPosX+(endPosX-startPosX)/labelFractionOffset+offsetVectorX,data.textPosY=startPosY+(endPosY-startPosY)/labelFractionOffset+offsetVectorY,pathEnding=" L "+endPosX+" , "+endPosY+" M "+startPosX+" , "+startPosY+" Z "}for(var startPath="M"+startPosX+","+startPosY,parentContainer=$(element).parent(),linkLabels=parentContainer.children("text"),visibleCount=0,i=0;i<linkLabels.length;i++)$(linkLabels[i]).attr("transform",LinkRendererBase.positionLabel(data,linkLabels[i],visibleCount)),""!=linkLabels[i].textContent&&visibleCount++;return isNaN(startPosX)?(ADLoggerService.error("Unknown start position source: target: "+target),"M 0, 0 L 0, 0"):startPath+arrowPath+pathEnding},LinkRendererBase.prototype.getLinkCSSClasses=function(d){return"adsFlowMapLink adsFlowMapLinkColor "+FlowRendererUtils.performanceColorClassART(d)},LinkRendererBase.prototype.getLinkSelectorClass=function(){return".adsFlowMapLink"},LinkRendererBase.prototype.createInlineArrowMarkup=function(arrow1X,arrow1Y,normalizedVecX,normalizedVecY,hasAsync){var arrowPath="",arrowLength=Math.sqrt(Math.pow(LinkRendererBase.ARROW_SIZE/2,2)+Math.pow(LinkRendererBase.ARROW_SIZE,2)),leftPoint=new Point2D(normalizedVecX,normalizedVecY);FlowRendererUtils.rotate(leftPoint,Math.PI/2),leftPoint.x*=LinkRendererBase.ARROW_SIZE/2,leftPoint.y*=LinkRendererBase.ARROW_SIZE/2,leftPoint.x+=arrow1X,leftPoint.y+=arrow1Y;var endPoint=new Point2D(arrow1X+normalizedVecX*arrowLength,arrow1Y+normalizedVecY*arrowLength),rightPoint=new Point2D(normalizedVecX,normalizedVecY);FlowRendererUtils.rotate(rightPoint,-Math.PI/2),rightPoint.x*=LinkRendererBase.ARROW_SIZE/2,rightPoint.y*=LinkRendererBase.ARROW_SIZE/2,rightPoint.x+=arrow1X,rightPoint.y+=arrow1Y;for(var iterations=hasAsync?3:1;iterations--;)arrowPath+=" L "+arrow1X+","+arrow1Y,arrowPath+=" L "+leftPoint.x+","+leftPoint.y,arrowPath+=" L "+endPoint.x+","+endPoint.y,arrowPath+=" L "+rightPoint.x+","+rightPoint.y,arrowPath+=" L "+arrow1X+","+arrow1Y;if(hasAsync){var patternLength=(LinkRendererBase.ARROW_SIZE*LinkRendererBase.ARROW_SIDES*3,_.reduce(LinkRendererBase.ASYNC_DASH_PATTERN.split(","),function(count,newValue){return count+Number(newValue)},0)),patternDiff=patternLength/2,backTrackX=arrow1X+normalizedVecX*patternDiff,backTrackY=arrow1Y+normalizedVecY*patternDiff,operation=" M ";arrowPath+=operation+backTrackX+","+backTrackY+operation+arrow1X+","+arrow1Y}return arrowPath},LinkRendererBase.prototype.hasAsyncActivity=function(d){var hasAsyncResult=!1;if(this.isFlowmapViewTypeBT())for(var i=0;i<d.stats.length;i++){var asyncFlag=d.stats[i].async,hasAsyncStats=(TransactionStatUtils.hasSyncTransactionStatsSet(d.stats[i]),TransactionStatUtils.hasAsyncTransactionStatsSet(d.stats[i]));if(asyncFlag){hasAsyncResult=!0;break}if(!asyncFlag&&hasAsyncStats){hasAsyncResult=!0;break}}else for(var j=0;j<d.stats.length;++j)if(d.stats[j].async){hasAsyncResult=!0;break}return hasAsyncResult},LinkRendererBase.prototype.hasSyncActivity=function(d){var hasSyncResult=!1;if(this.isFlowmapViewTypeBT())for(var i=0;i<d.stats.length;i++){var asyncFlag=d.stats[i].async,hasSyncStats=TransactionStatUtils.hasSyncTransactionStatsSet(d.stats[i]),hasAsyncStats=TransactionStatUtils.hasAsyncTransactionStatsSet(d.stats[i]);if(hasSyncStats&&hasAsyncStats){hasSyncResult=!0;break}if(!asyncFlag&&hasSyncStats){hasSyncResult=!0;break}if(!asyncFlag&&!hasSyncStats&&!hasAsyncStats){hasSyncResult=!0;break}}else for(var j=0;j<d.stats.length;j++)if(!d.stats[j].async){hasSyncResult=!0;break}return hasSyncResult},LinkRendererBase.positionLabel=function(data,linkLabel,lineOffset){void 0===lineOffset&&(lineOffset=0);var x=data.textPosX,y=data.textPosY+lineOffset*LinkRendererBase.LABEL_TYPE_FONT_SIZE;return"translate("+x+", "+y+")"},LinkRendererBase.prototype.getNodeRadius=function(data){return this.rendererFactory.rendererForData(data).getRadius()},LinkRendererBase.BIDI_LINK_OFFSET=5,LinkRendererBase.BIDI_LABEL_OFFSET_FACTOR=5,LinkRendererBase.LABEL_DISTANCE=2,LinkRendererBase.BIDI_LABEL_DISTANCE=3,LinkRendererBase.SYNC_DASH_PATTERN="",LinkRendererBase.ASYNC_DASH_PATTERN="5,5",LinkRendererBase.MIXED_DASH_PATTERN="5,5,2,5",LinkRendererBase.LABEL_TYPE_STYLE_CLASS="adsFlowMapLinkTypeLabels",LinkRendererBase.LABEL_TYPE_FONT_SIZE=12,LinkRendererBase.ARROW_SIZE=5,LinkRendererBase.ARROW_SIDES=3,LinkRendererBase
}(RendererBase);return LinkRendererBase});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/networkMonitoring/flowMap/hoverCards/flowGroups/FlowGroupInfoController",["require","exports","../../../../../../lib/controller/services/npm/DashboardNetworkGraphUiService"],function(require,exports,DashboardNetworkGraphUiService){var FlowGroupInfoController=function(_super){function FlowGroupInfoController($scope){var _this=this;_super.call(this,$scope,ResourceManager.instance(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.networkFlowGroupVOList=[],this.gridOptions=new GridOptions,this.onDoubleClickHandler=function(event){if(event){var entityType,entityId,ipNetworkFlowGroup=event.raw,appId=NetworkMonitoringViewService.instance().getApplicationIdFromUrl();_this.netStatOptions.sourceEntityType==EntityType.NETWORK_ELEMENT?(entityType=_this.netStatOptions.destinationEntityType,entityId=_this.netStatOptions.destinationEntityID):(entityType=_this.netStatOptions.sourceEntityType,entityId=_this.netStatOptions.sourceEntityID),ADLoggerService.warn("Evaluated : "+entityType+" : "+entityId),entityType=ipNetworkFlowGroup.sourceEntity.entityType,entityId=ipNetworkFlowGroup.sourceEntity.entityId,ADLoggerService.warn("Server : "+ipNetworkFlowGroup.sourceEntity.entityType+" : "+ipNetworkFlowGroup.sourceEntity.entityId+" : "+ipNetworkFlowGroup.sourceIP);var metricDataQueryScopes=[];_.each(ipNetworkFlowGroup.metricIds,function(metricId){metricDataQueryScopes.push({entityType:entityType,entityId:entityId,metricId:metricId})}),MetricBrowserViewService.instance().openMetricBrowserDialog(appId,metricDataQueryScopes),_this.closeCard()}},this.$scope.controller=this,this.init()}return __extends(FlowGroupInfoController,_super),FlowGroupInfoController.prototype.init=function(){this.netStatOptions=this.$scope.adNetStatOptions,this.closeCard=this.$scope.adCloseCard,this._initGrid(),this.fetchData()},FlowGroupInfoController.prototype.fetchData=function(){var _this=this,response=DashboardNetworkGraphUiService.instance().getNetworkFlowGroupMetrics(this.netStatOptions.sourceEntityID,this.netStatOptions.sourceEntityType,this.netStatOptions.exitType,this.netStatOptions.destinationEntityID,this.netStatOptions.destinationEntityType);response.then(function(response){_.each(response,function(subnetFlowGroup){_.each(subnetFlowGroup.networkFlowGroups,function(ipFlowGroup){_this.networkFlowGroupVOList.push({sourceSubnet:subnetFlowGroup.sourceSubnet,destinationSubnet:subnetFlowGroup.destinationSubnet,sourceIP:ipFlowGroup.sourceIP,destinationIP:ipFlowGroup.destinationIP,destinationPort:ipFlowGroup.destinationPort,sourceEntity:ipFlowGroup.sourceEntity,metricIds:ipFlowGroup.metricIds})})})}).finally(function(){_this.updateGrid()})},FlowGroupInfoController.prototype.updateGrid=function(){this.gridOptions.dataProvider=this.networkFlowGroupVOList,this.gridOptions.loading=!1},FlowGroupInfoController.prototype._initGrid=function(){var columns=[new GridColumn({flex:.4,dataIndex:"sourceIP",header:this.resourceManager.getString("ui","ms_nwSourceIP"),disableMenu:!0,type:"string",sortable:!0}),new GridColumn({flex:.4,dataIndex:"destinationIP",header:this.resourceManager.getString("ui","ms_nwDestinationIP"),disableMenu:!0,type:"string",sortable:!0}),new GridColumn({flex:.5,dataIndex:"destinationPort",header:this.resourceManager.getString("ui","ms_nwDestinationPort"),disableMenu:!0,type:"string",sortable:!0})];this.gridOptions.columnProvider=columns,this.gridOptions.onDoubleClick=this.onDoubleClickHandler,this.gridOptions.compileRenderers=!1,this.gridOptions.loading=!0,this.gridOptions.emptyText=this.getString("ms_noDataAvailable")},FlowGroupInfoController.$inject=["$scope"],FlowGroupInfoController}(ControllerBase);return FlowGroupInfoController}),define("app/view/networkMonitoring/flowMap/hoverCards/flowGroups/FlowGroupInfoDirective",["require","exports","./FlowGroupInfoController"],function(require,exports,FlowGroupInfoController){var FlowGroupInfoDirective=function(){function FlowGroupInfoDirective(){return{restrict:"E",replace:!1,templateUrl:"app/view/networkMonitoring/flowMap/hoverCards/flowGroups/FlowGroupInfoView.html",scope:{adNetStatOptions:"=",adCloseCard:"&"},controller:FlowGroupInfoController}}return FlowGroupInfoDirective}();return appdynamicsModule.directive(StringUtils.toCamelCase("ad-flow-group-info"),FlowGroupInfoDirective),FlowGroupInfoDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/networkMonitoring/flowMap/hoverCards/networkLink/NetworkLinkHoverCard",["require","exports","app/view/components/flowmap/hoverCards/LinkHoverCardBase","app/view/networkMonitoring/flowMap/hoverCards/sparkChart/NetworkSparkChartDirective","app/view/networkMonitoring/flowMap/hoverCards/flowGroups/FlowGroupInfoDirective","../../../shared/NPMConstants"],function(require,exports,linkHoverCardBase,networkSparkChart,flowGroupInfo,NPMConstants){var NetworkLinkHoverCard=function(_super){function NetworkLinkHoverCard(data,source,target,innerCircle,baseline,flowmapViewType,showSparkCharts){_super.call(this,data,source,target,innerCircle,baseline,flowmapViewType,showSparkCharts),this.baseline=baseline}return __extends(NetworkLinkHoverCard,_super),NetworkLinkHoverCard.prototype.getHTMLPartialLocation=function(){return"app/view/networkMonitoring/flowMap/hoverCards/networkLink/NetworkLinkHoverCard.html"},NetworkLinkHoverCard.prototype.decorateScope=function(scope){this.linkScope=scope,this.linkScope.controller=this,this.fromNodeName=this.getEntityNameFromNode(this.edge.source),this.fromNodeLogoPath=this.getNodeLinkLogoPath(this.edge.source),this.toNodeName=this.getEntityNameFromNode(this.edge.target),this.toNodeLogoPath=this.getNodeLinkLogoPath(this.edge.target),this.entityType=this.edge.source.entityType,this.entityId=this.edge.source.idNum,this.targetEntityType=this.edge.target.entityType,this.targetEntityId=this.edge.target.idNum,this.netStatOption||(this.netStatOption={sourceEntityID:this.entityId,sourceEntityType:this.entityType,destinationEntityID:this.targetEntityId,destinationEntityType:this.targetEntityType,exitType:FlowRendererUtils.getLinkTypeTextForNetworkFlowMap(this.edge),networkStats:this.edge.networkStats?this.edge.networkStats:null,sparkChartType:NPMConstants.SPARK_CHART_FOR_LINK,baselineId:this.baseline?this.baseline.id:-1,closeCardFunction:this.closeCard}),this.initPanels(),this.selectPanel(this.NETWORK_MON_PANEL)},NetworkLinkHoverCard.prototype.initPanels=function(){this.NETWORK_MON_PANEL="networkMon",this.FLOWGROUPS_PANEL="flowGroups"},NetworkLinkHoverCard.prototype.selectPanel=function(selectedPanel){this.selectedPanel=selectedPanel},NetworkLinkHoverCard.prototype.getEntityNameFromNode=function(source){return source.entityType==EntityType.NETWORK_ELEMENT?"":source.name},NetworkLinkHoverCard}(linkHoverCardBase.LinkHoverCardBase);return NetworkLinkHoverCard});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/renderers/NetworkLinkRenderer",["require","exports","./LinkRendererBase","../../../networkMonitoring/flowMap/hoverCards/networkLink/NetworkLinkHoverCard","../hoverCards/HoverCardBase","../../../networkMonitoring/shared/utils/NPMUtils"],function(require,exports,LinkRendererBase,networkLinkHoverCard,hoverCardBase,NPMUtils){var NetworkLinkRenderer=function(_super){function NetworkLinkRenderer($scope,rendererFactory,flowmapViewType,parentGraph){void 0===flowmapViewType&&(flowmapViewType=EntityType.APPLICATION),void 0===parentGraph&&(parentGraph=null),_super.call(this,$scope,rendererFactory,flowmapViewType,parentGraph),this.rendererFactory=rendererFactory}return __extends(NetworkLinkRenderer,_super),NetworkLinkRenderer.prototype.render=function(canvas,data,arrows){var _this=this;void 0===arrows&&(arrows=!0);var linkContainer=canvas.selectAll(this.getLinkSelectorClass()).data(data).enter().insert("g",":first-child");linkContainer.append("path").attr("id",this.getEdgeHitAreaID).attr("class","ads-flowmap-network-link ads-flowmap-network-link-hit-area").attr("d",this.linkPathUpdater(!1)),linkContainer.append("path").attr("id",this.getEdgeID).attr("class",this.getLinkCSSClasses.bind(this)).attr("d",this.linkPathUpdater(!1)).attr("stroke-dasharray",function(d){return _this.getDashedLinePattern(d)}),linkContainer.on(MouseEvents.CLICK,this.getMouseClickHandler()),linkContainer.on(MouseEvents.MOUSE_DOWN,this.getMouseDownHandler()),linkContainer.on(MouseEvents.MOUSE_MOVE,this.getMouseMoveHandler());var renderer=this;return FlowRendererUtils.createShadowedText(function(d){return renderer.getNetStatsText(d)},function(d){return LinkRendererBase.positionLabel(d,this,0)},linkContainer.filter(function(d){return renderer.getNetStatsText(d)?!0:!1}),function(d){return"adsFlowMapStatsDetails adsFlowMapZoom3 adsFlowMapLinkLabels "+FlowRendererUtils.networkPerformanceColorClassPacketLoss(d)}),linkContainer},NetworkLinkRenderer.prototype.getMouseClickHandler=function(){var renderer=this;return function(d){var _this=this;if(!renderer.card&&renderer.isMouseDown)var entityMap=EntityService.instance().fetchEntities([d.sourceNodeDefinition,d.targetNodeDefinition],function(){{var linkHoverCard=null;d.source}linkHoverCard=new networkLinkHoverCard(d,entityMap.getEntity(d.sourceNodeDefinition),entityMap.getEntity(d.targetNodeDefinition),_this,renderer.baseline,renderer.getFlowmapViewType(),!1),renderer.card=linkHoverCard,$(renderer.card.toolTipElement).on(EventConstants.UEV_CLOSE,renderer.closePopup.bind(renderer)),$(document).on(MouseEvents.MOUSE_DOWN+hoverCardBase.HoverCardBase.HOVER_CARD_EVENTS,renderer.mouseDownOutsidePopup.bind(renderer))});else renderer.closePopup();renderer.isMouseDown=!1,renderer.mouseDownPagePoint=null}},NetworkLinkRenderer.prototype.getNetStatsText=function(d){var returnLabel="",edgeNetworkStats=d.networkStats;return edgeNetworkStats&&edgeNetworkStats.latency&&edgeNetworkStats.latency.metricValue&&!isNaN(edgeNetworkStats.latency.metricValue.value)&&edgeNetworkStats.latency.metricValue.value>-1&&(returnLabel+=NPMUtils.getFormattedLatencyValueAndUnit(d.networkStats.latency.metricValue.value).join(" ")+", "),edgeNetworkStats&&edgeNetworkStats.packetLoss&&edgeNetworkStats.packetLoss.metricValue&&!isNaN(edgeNetworkStats.packetLoss.metricValue.value)&&edgeNetworkStats.packetLoss.metricValue.value>-1&&(returnLabel+=NPMUtils.getFormattedPacketLossValueAndUnit(d.networkStats.packetLoss.metricValue.value).join(" ")+", "),edgeNetworkStats&&edgeNetworkStats.throughput&&edgeNetworkStats.throughput.metricValue&&!isNaN(edgeNetworkStats.throughput.metricValue.value)&&edgeNetworkStats.throughput.metricValue.value>-1&&(returnLabel+=NPMUtils.getFormattedThroughputValueAndUnit(edgeNetworkStats.throughput.metricValue.value,1).join("").toString()),returnLabel},NetworkLinkRenderer.prototype.getLinkCSSClasses=function(d){return"ads-flowmap-network-link ads-flowmap-network-link-color "+FlowRendererUtils.networkPerformanceColorClassPacketLoss(d)},NetworkLinkRenderer.prototype.getLinkSelectorClass=function(){return".ads-flowmap-network-link"},NetworkLinkRenderer}(LinkRendererBase);return NetworkLinkRenderer}),define("app/view/components/flowmap/renderers/LinkRendererFactory",["require","exports","./LinkRendererBase","./NetworkLinkRenderer"],function(require,exports,LinkRendererBase,NetworkLinkRenderer){var LinkRendererFactory=function(){function LinkRendererFactory($scope,flowItemRendererFactory,entityType,baseline,graph){this.linkRenderer=new LinkRendererBase($scope,flowItemRendererFactory,entityType,graph),this.linkRenderer.baseline=baseline,this.networkLinkRenderer=new NetworkLinkRenderer($scope,flowItemRendererFactory,entityType,graph),this.networkLinkRenderer.baseline=baseline}return LinkRendererFactory.prototype.render=function(canvas,edges){for(var edgeRendererHash={},i=0;i<edges.length;i++){var edge=edges[i],key=edge.linkType?edge.linkType:"default";edgeRendererHash[key]||(edgeRendererHash[key]=[]),edgeRendererHash[key].push(edge)}for(var item in edgeRendererHash){var matchingEntityEdges=edgeRendererHash[item],renderer=this.rendererForEntityTypeVariant(item);if(matchingEntityEdges&&matchingEntityEdges.length&&matchingEntityEdges.length>0){var visibleNodes=matchingEntityEdges;renderer.render(canvas,visibleNodes)}}},LinkRendererFactory.prototype.getSelectorClassForAllObjectsInFactory=function(){return this.linkRenderer.getLinkSelectorClass()+", "+this.networkLinkRenderer.getLinkSelectorClass()},LinkRendererFactory.prototype.rendererForEntityTypeVariant=function(entityTypeVariant){switch(entityTypeVariant){case LinkType.NETWORK:return this.networkLinkRenderer;case LinkType.STANDARD:return this.linkRenderer;default:return this.linkRenderer}},LinkRendererFactory.prototype.showArrowsForEntityType=function(entityTypeVariant){switch(entityTypeVariant){case LinkType.NETWORK:return!1;case LinkType.STANDARD:return!0;default:return!0}},LinkRendererFactory}();return LinkRendererFactory}),define("app/view/components/flowmap/layout/CircularLayout",["require","exports"],function(){var CircularLayout=function(){function CircularLayout(){}return CircularLayout.prototype.layout=function(canvasSize,centerPoint,nodeRadius,linkRendererFactory,canvas,animate){void 0===animate&&(animate=!1);var deferred=AngularUtil.getADInjector().get("$q").defer(),visibleNodes=canvas.selectAll(".adsFlowMapNode"),visibleLinks=canvas.selectAll(linkRendererFactory.getSelectorClassForAllObjectsInFactory()),layoutWidth=canvasSize.x,layoutHeight=canvasSize.y,increase=2*Math.PI/visibleNodes[0].length,x=0,y=0,angle=0,border=nodeRadius,xOffset=border,yOffset=border,layoutRadius=Math.min(layoutWidth,layoutHeight)/2-2*border;layoutHeight>layoutWidth?yOffset+=(layoutHeight-layoutWidth)/2:xOffset+=(layoutWidth-layoutHeight)/2,xOffset-=centerPoint.x,yOffset-=centerPoint.y;for(var i=0;i<visibleNodes[0].length;i++){var elem=visibleNodes[0][i].__data__;x=layoutRadius*Math.cos(angle),y=layoutRadius*Math.sin(angle),elem.x=xOffset+(x+layoutRadius),elem.y=yOffset+(y+layoutRadius),elem.px=elem.x,elem.py=elem.y,elem.fixed=!1,angle+=increase}visibleNodes.transition().duration(animate?400:0).attr("transform",function(d){return"translate("+d.x+", "+d.y+")"});var endAll=function(transition){var n=0;transition.each("start",function(){++n}).each("end",function(){--n||deferred.resolve()})};return visibleLinks.transition().duration(animate?400:0).attr("d",function(d){var showArrows=linkRendererFactory.showArrowsForEntityType(d.linkType);return linkRendererFactory.rendererForEntityTypeVariant(d.linkType).linkPathData(d,null,this,showArrows)}).call(endAll),deferred.promise},CircularLayout}();return CircularLayout}),define("app/view/components/flowmap/layout/ForceLayout",["require","exports"],function(){var ForceLayout=function(){function ForceLayout(){}return ForceLayout.prototype.layout=function(options,element,canvas,visibleNodes,visibleLinks,forceEndListener){this.$element=element,this.layoutOptions=options,this.canvas=canvas;var screenWidth=this.$element.width(),screenHeight=this.$element.height(),numNodes=visibleNodes.length;numNodes>0&&(options.gravity||(options.gravity={value:0}),options.gravity.value=ForceLayout.STANDARD_GRAVITY_FACTOR);var chargeFunction=function(d){return options.charge.value(d,visibleNodes.length)},linkDistanceFunction=function(d){return options.linkDistance.value(d,visibleNodes.length)};this.force=d3.layout.force(),this.force.on("end",forceEndListener),this.force.gravity(this.gravity.bind(this)).chargeDistance(options.chargeDistance.value).linkDistance(linkDistanceFunction).linkStrength(options.linkStrength.value).charge(chargeFunction).size([screenWidth,screenHeight]),this.force.nodes(visibleNodes).links(visibleLinks).start();for(var cutoff=0;this.running()&&(this.force.tick(),!(cutoff++>8e3)););},ForceLayout.prototype.cleanupForce=function(){this.force&&(this.force.stop(),this.canvas.selectAll("adsFlowMapNode").on(".force",null).on("mousedown.drag",null).on("touchstart.drag",null),this.force=null)},ForceLayout.prototype.running=function(){return this.force&&this.force.alpha()>.01},ForceLayout.prototype.gravity=function(d,alpha){var aspectRatio=this.$element.width()/this.$element.height(),cx=this.$element.width()/2,cy=this.$element.height()/2,ax=alpha,ay=alpha,gravityValue=this.layoutOptions.gravity.value,distanceFromCenterX=cx-d.x,distanceFromCenterY=cy-d.y;aspectRatio>1?ax*=1/aspectRatio:ay*=aspectRatio,d.x+=distanceFromCenterX*ax*gravityValue,d.y+=distanceFromCenterY*ay*gravityValue},ForceLayout.STANDARD_GRAVITY_FACTOR=.2,ForceLayout}();return ForceLayout}),define("app/view/components/flowmap/FlowMapSelectionManager",["require","exports"],function(){var FlowMapSelectionManager=function(){function FlowMapSelectionManager($element,scope){this.$element=$element,this.scope=scope,this.drag=d3.behavior.drag(),this.dragMoved=!1,this.mouseListeners={};var self=this;this.drag.on("dragstart",function(d){self.onDragStart(d,this)}),this.drag.on("drag",function(d){self.onDragMove(d,this)}),this.drag.on("dragend",function(d){self.onDragEnd(d,this)})}return FlowMapSelectionManager.prototype.destroy=function(){this.drag.on("dragstart",null).on("drag",null).on("dragend",null),this.$element.off(MouseEvents.MOUSE_DOWN,this.mouseListeners[MouseEvents.MOUSE_DOWN]),this.$element.off(MouseEvents.CLICK,this.mouseListeners[MouseEvents.CLICK])},FlowMapSelectionManager.prototype.setMapElements=function(svg,canvas,linkFactory,canModifyFlow){var _this=this,that=this;this.svg=svg,this.canvas=canvas,this.canvas.selectAll(".adsFlowMapNode").call(this.drag),this.canvas.selectAll(".adsFlowMapNode").on(MouseEvents.MOUSE_ENTER,function(){that.onMouseOverNode(this)}),this.canvas.selectAll(".adsFlowMapNode").on(MouseEvents.MOUSE_LEAVE,function(){that.onMouseLeaveNode(this)}),this.canvas.selectAll(".adsFlowMapNode").on(MouseEvents.MOUSE_DOWN,function(){that.onMouseLeaveNode(this)}),this.linkRenderer=linkFactory.linkRenderer,this.linkFactory=linkFactory,this.canModifyFlow=canModifyFlow,this.mouseListeners[MouseEvents.MOUSE_DOWN]=function(event){_this.multiSelectStart(event)},this.mouseListeners[MouseEvents.CLICK]=function(event){_this.onCanvasClick(event)},this.mouseListeners[MouseEvents.MOUSE_MOVE]=function(event){_this.multiSelectMove(event)},this.mouseListeners[MouseEvents.MOUSE_LEAVE]=function(event){_this.multiSelectEnd(event)},this.mouseListeners[MouseEvents.MOUSE_UP]=function(event){_this.multiSelectEnd(event)},this.mouseListeners[MouseEvents.CLICK+"document"]=function(event){_this.reAddClick(event)},this.$element.on(MouseEvents.MOUSE_DOWN,this.mouseListeners[MouseEvents.MOUSE_DOWN]),this.$element.on(MouseEvents.CLICK,this.mouseListeners[MouseEvents.CLICK])},FlowMapSelectionManager.prototype.onMouseLeaveNode=function(target){this.updateLinkArrows(target,!0)},FlowMapSelectionManager.prototype.onMouseOverNode=function(target){this.updateLinkArrows(target,!1)},FlowMapSelectionManager.prototype.updateLinkArrows=function(target,drawArrows){var _this=this,nodeData=d3.select(target).data()[0],linksEdgeData=nodeData.$$edges,linkIds=_.map(linksEdgeData,function(edge){return _this.linkRenderer.getEdgeID(edge)}),linkElements=d3.selectAll($("#"+linkIds.join(",#"))),factory=this.linkFactory;linkElements.attr("d",function(d){var showArrows=factory.showArrowsForEntityType(d.linkType);return showArrows=drawArrows?showArrows:drawArrows,factory.rendererForEntityTypeVariant(d.linkType).linkPathData(d,null,this,showArrows)})},FlowMapSelectionManager.prototype.onDragStart=function(d,element){if(this.isLeftMouseButton()){var sourceEvent=d3.event.sourceEvent,elementSelection=d3.select(element);if(FlowRendererUtils.isControlDown()){var isSelected=elementSelection.classed("adsFlowmapSelected");if(elementSelection.classed("adsFlowmapSelected",!isSelected),isSelected)return}sourceEvent.preventDefault(),elementSelection.classed("dragging",!0),this.moveStartPoint=new Point2D(d3.event.sourceEvent.clientX,d3.event.sourceEvent.clientY);var selectedNodes=this.svg.selectAll(".adsFlowmapSelected");0==selectedNodes[0].length&&(elementSelection.classed("adsFlowmapSelected",!0),selectedNodes=this.svg.selectAll(".adsFlowmapSelected")),selectedNodes.each(function(d){return d.origX=d.x,d.x}),selectedNodes.each(function(d){return d.origY=d.y,d.y}),this.canvas.selectAll(".adsFlowMapNode").sort(function(d,d2){var dSelected=!isNaN(d.origX),d2Selected=!isNaN(d2.origX);return dSelected&&d2Selected?0:d2Selected?-1:1}),this.dragMoved=!1}},FlowMapSelectionManager.prototype.onDragMove=function(d,element){var _this=this,isSelected=d3.select(element).classed("adsFlowmapSelected"),sourceEvent=d3.event.sourceEvent;if(sourceEvent.preventDefault(),sourceEvent.stopImmediatePropagation(),this.isLeftMouseButton()&&isSelected)if(this.canModifyFlow){this.dragMoved=!0;var allSelectedNodes=this.svg.selectAll(".adsFlowmapSelected"),delta=new Point2D(d3.event.sourceEvent.clientX-this.moveStartPoint.x,d3.event.sourceEvent.clientY-this.moveStartPoint.y),scale=this.scope.svScale.value;allSelectedNodes.attr("transform",function(d){return d.x=d.origX+delta.x/scale,d.y=d.origY+delta.y/scale,"translate("+d.x+", "+d.y+")"});var edgeIds=[];if(_.each(allSelectedNodes.data(),function(d){edgeIds=edgeIds.concat(_.map(d.$$edges,_this.linkRenderer.getEdgeID)).concat(_.map(d.$$edges,_this.linkRenderer.getEdgeHitAreaID))}),edgeIds.length){edgeIds=_.uniq(edgeIds);var movedEdges=d3.selectAll($("#"+edgeIds.join(",#")));movedEdges.attr("d",this.linkRenderer.linkPathUpdater())}}else this.scope.$emit(FlowMapSelectionManager.MODIFY_UNSHARED_FLOW),this.scope.$emit(FlowMapSelectionManager.DRAG_END),this.unSelectAll()},FlowMapSelectionManager.prototype.onDragEnd=function(){var moved=this.dragMoved;if(this.dragMoved=!1,(moved||!FlowRendererUtils.isControlDown())&&this.canModifyFlow&&this.isLeftMouseButton()){var allSelectedNodes=this.svg.selectAll(".adsFlowmapSelected");allSelectedNodes.each(function(d){delete d.origX,delete d.origY;var selectedElement=this;d.x=selectedElement.transform.baseVal.consolidate().matrix.e}),allSelectedNodes.each(function(d){var selectedElement=this;d.y=selectedElement.transform.baseVal.consolidate().matrix.f}),this.scope.$emit(FlowMapSelectionManager.DRAG_END),this.unSelectAll()}},FlowMapSelectionManager.prototype.intersectsWith=function(rect1,rect2){return rect1.left<=rect2.right&&rect2.left<=rect1.right&&rect1.top<=rect2.bottom&&rect2.top<=rect1.bottom},FlowMapSelectionManager.prototype.multiSelectStart=function(event){event||(event=d3.event.sourceEvent);var mouseEvent=event;if(mouseEvent.altKey||mouseEvent.shiftKey){mouseEvent.preventDefault(),mouseEvent.stopImmediatePropagation();var xpos=void 0!==event.offsetX?event.offsetX:event.originalEvent.layerX,ypos=void 0!==event.offsetY?event.offsetY:event.originalEvent.layerY;this.selectionStartPoint=new Point2D(xpos,ypos),this.selectionRect=this.svg.append("rect").attr("fill","none").attr("stroke-width","1").attr("stroke","#000000").attr("stroke-dasharray","3,3").attr("x",this.selectionStartPoint.x).attr("y",this.selectionStartPoint.y),$(document).on(MouseEvents.MOUSE_MOVE,this.mouseListeners[MouseEvents.MOUSE_MOVE]),$(document).on(MouseEvents.MOUSE_LEAVE,this.mouseListeners[MouseEvents.MOUSE_LEAVE]),$(document).on(MouseEvents.MOUSE_UP,this.mouseListeners[MouseEvents.MOUSE_UP]),$(document).on(MouseEvents.CLICK,this.mouseListeners[MouseEvents.CLICK+"document"])}},FlowMapSelectionManager.prototype.reAddClick=function(){this.$element.on(MouseEvents.CLICK,this.mouseListeners[MouseEvents.CLICK]),$(document).off(MouseEvents.CLICK,this.mouseListeners[MouseEvents.CLICK+"document"])},FlowMapSelectionManager.prototype.multiSelectEnd=function(){this.selectionRect.remove(),this.selectionRect=null,$(document).off(MouseEvents.MOUSE_MOVE,this.mouseListeners[MouseEvents.MOUSE_MOVE]),$(document).off(MouseEvents.MOUSE_LEAVE,this.mouseListeners[MouseEvents.MOUSE_LEAVE]),$(document).off(MouseEvents.MOUSE_UP,this.mouseListeners[MouseEvents.MOUSE_UP]),this.$element.off(MouseEvents.CLICK,this.onCanvasClick)},FlowMapSelectionManager.prototype.multiSelectMove=function(event){var _this=this,xpos=void 0!==event.offsetX?event.offsetX:event.originalEvent.layerX,ypos=void 0!==event.offsetY?event.offsetY:event.originalEvent.layerY;event.originalEvent.stopImmediatePropagation(),event.originalEvent.preventDefault();var left=Math.min(xpos,this.selectionStartPoint.x),top=Math.min(ypos,this.selectionStartPoint.y),right=Math.max(xpos,this.selectionStartPoint.x),bottom=Math.max(ypos,this.selectionStartPoint.y);this.selectionRect.attr("width",right-left).attr("height",bottom-top).attr("x",left).attr("y",top);var selectionSVGRect=this.selectionRect[0][0].getBoundingClientRect();$.each($(".adsFlowMapNode"),function(index,testElement){var elemRect=testElement.getBoundingClientRect(),selected=_this.intersectsWith(elemRect,selectionSVGRect);if(d3.select(testElement).classed("adsFlowmapSelected",selected),BrowserUtils.isBrowserInternetExplorer9()){var images=d3.select(testElement).selectAll("image.ads-drag-selection-background"),hasSelectionImage=0!=images.size();if(selected&&!hasSelectionImage){var bbox=testElement.getBBox(),dimension=Math.min(bbox.width,bbox.height),unscaleDim=dimension;unscaleDim+=5/testElement.parentNode.transform.baseVal.consolidate().matrix.a,d3.select(testElement).insert("image","title").attr("xlink:href","images/flowmapGlowBackground.png").attr("x",-unscaleDim/2).attr("y",-unscaleDim/2).attr("width",unscaleDim).attr("height",unscaleDim).attr("class","ads-drag-selection-background")}else!selected&&hasSelectionImage&&images.remove()}return!0})},FlowMapSelectionManager.prototype.isLeftMouseButton=function(){return 0==d3.event.sourceEvent.button},FlowMapSelectionManager.prototype.onCanvasClick=function(event){FlowRendererUtils.isControlDown(event)||event.shiftKey||event.altKey||this.selectionRect||this.unSelectAll()},FlowMapSelectionManager.prototype.unSelectAll=function(){this.svg&&(this.svg.selectAll(".adsFlowMapNode").classed("adsFlowmapSelected",!1),BrowserUtils.isBrowserInternetExplorer9()&&this.svg.selectAll(".ads-drag-selection-background").remove())},FlowMapSelectionManager.MODIFY_UNSHARED_FLOW="MODIFY_UNSHARED_FLOW",FlowMapSelectionManager.DRAG_END="DRAG_END",FlowMapSelectionManager}();return FlowMapSelectionManager}),define("app/view/components/flowmap/FlowMapController",["require","exports","./renderers/FlowItemRendererFactory","./renderers/BackendNodeRenderer","./renderers/DefaultNodeRenderer","./renderers/LinkRendererFactory","./layout/CircularLayout","./layout/ForceLayout","./FlowMapSelectionManager"],function(require,exports,FlowItemRendererFactory,BackendNodeRenderer,DefaultNodeRenderer,LinkRendererFactory,CircularLayout,ForceLayout,FlowMapSelectionManager){var FlowMapController=function(){function FlowMapController($scope,$rootScope,flowMapUiService,$element,$modal,resourceManager,backendDashboardViewService){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.flowMapUiService=flowMapUiService,this.$element=$element,this.$modal=$modal,this.resourceManager=resourceManager,this.backendDashboardViewService=backendDashboardViewService,this.flowmapViewType=EntityType.APPLICATION,this.lastZoom=-1,this.hasUnfixedNodes=!1,this.scaleExtent=[FlowMapZoomLevels.LOWER_ZOOM,FlowMapZoomLevels.UPPER_ZOOM],this.circularLayout=new CircularLayout,this.forceLayout=new ForceLayout,this.zoomer=d3.behavior.zoom(),this.panningOrZooming=!1,this.initialized=!1,this.selectionManager=new FlowMapSelectionManager($element,$scope),this.onViewportResize();var listeners=[$scope.$watch("svScale.value",this.scaleUpdated.bind(this)),$scope.$watch("svFlowmapdata",this.onDataChanged.bind(this)),$scope.$watch("svLayout",this.onLayout.bind(this)),$scope.$watch("svLayout.loading",this.onLoading.bind(this)),$scope.$watch("svCenterMap",this.onCenterListener.bind(this))],destroyListener=$scope.$on("$destroy",function(){for(var listener=0;listener<listeners.length;listener++)listeners[listener]();destroyListener(),_this.forceLayout.cleanupForce(),_this.selectionManager.destroy(),_this.zoomer.on("zoom",null),_this.zoomer.on("zoomstart",null),_this.zoomer.on("zoomend",null)});$scope.$on(EventConstants.UEV_LAYOUT_CHANGED,function(){_this.onViewportResize(),!_this.svg&&_this.$scope.svFlowmapdata&&_this.onDataChanged(_this.$scope.svFlowmapdata)}),this.zoomer.translate([0,0]).scale($scope.svScale.value).scaleExtent(this.scaleExtent),this.zoomer.on("zoom",this.zoomed.bind(this)),this.zoomer.on("zoomstart",this.zoomStart.bind(this)),this.zoomer.on("zoomend",this.zoomEnd.bind(this)),$scope.$on(FlowMapSelectionManager.MODIFY_UNSHARED_FLOW,this.modifyUnsharedFlow.bind(this)),$scope.$on(FlowMapSelectionManager.DRAG_END,this.onMoveComplete.bind(this)),$scope.$on(BackendNodeRenderer.UNGROUP_BACKENDS,this.ungroupBackends.bind(this)),$scope.$on(DefaultNodeRenderer.HIDE_ITEM,this.hideFlowItem.bind(this)),this.initialized=!0}return FlowMapController.prototype.ungroupBackends=function(event,idsToUngroup){this.backendDashboardViewService.ungroupBackends(idsToUngroup,this.$scope.svFlowmapdata.properties)},FlowMapController.prototype.hideFlowItem=function(event,item){var filterItem,_this=this,properties=this.$scope.svFlowmapdata.properties;switch(item.entityType){case EntityType.APPLICATION_COMPONENT:properties.preference.componentFilter||(properties.preference.componentFilter={}),filterItem=properties.preference.componentFilter;break;case EntityType.BACKEND:properties.preference.backendFilter||(properties.preference.backendFilter={}),filterItem=properties.preference.backendFilter;break;case EntityType.APPLICATION:properties.preference.applicationFilter||(properties.preference.applicationFilter={}),filterItem=properties.preference.applicationFilter;break;default:ADLoggerService.error("Attempted to hide unknown node type:"+item.entityType)}filterItem.entityIds=filterItem.entityIds?filterItem.entityIds:[],filterItem.entityIds=_.union(filterItem.entityIds,[item.idNum]),this.flowMapUiService.setFlowmapProperties(properties).then(function(){_this.$rootScope.$broadcast(App.UEV_REFRESH)})},FlowMapController.prototype.modifyUnsharedFlow=function(){var _this=this,controllerLocation="app/view/components/flowmap/copyFlowmapDialog/CopyFlowmapDialogController";require([controllerLocation],function(controller){var modalInstance=_this.$modal.open({templateUrl:"app/view/components/flowmap/copyFlowmapDialog/CopyFlowmapDialogView.html",controller:controller,resolve:{flowmapInstance:function(){return _this.$scope.svFlowmapdata}}});modalInstance.result.then(function(setView){setView&&_this.$scope.adRefresh()},function(){})})},FlowMapController.prototype.onMoveComplete=function(){this.cachedBBox=null,this.saveAllFlowLocations(),this.onViewportResize()},FlowMapController.prototype.onViewportResize=function(){this.currentlyVisible()&&(this.layoutWidth=this.$element.width(),this.layoutHeight=this.$element.height(),this.svg&&this.svg.attr({width:this.layoutWidth,height:this.layoutHeight,viewBox:"0 0 "+this.layoutWidth+" "+this.layoutHeight}),this.canvas&&this.updateCanvasTransform(this.$scope.svScale.value,this.zoomer.translate()))},FlowMapController.prototype.onLoading=function(value){value&&!this.isPanZoomAndAutoRefresh()&&this.showMessage(this.resourceManager.getString("ui","ms_loading"))},FlowMapController.prototype.onCenterListener=function(){this.$scope.svCenterMap.execute=this.centerMap.bind(this)},FlowMapController.prototype.onLayout=function(){this.$scope.svLayout.force=this.doForce.bind(this),this.$scope.svLayout.circular=this.doCircular.bind(this),this.drawMap(!1,!0)},FlowMapController.prototype.doForce=function(){this.drawMap(!1,!0,!0)},FlowMapController.prototype.resetAllNodeLocations=function(){for(var itr=0;itr<this.$scope.svFlowmapdata.nodes.length;itr++){var node=this.$scope.svFlowmapdata.nodes[itr];
node.fixed=!1,node.px=node.x=0,node.py=node.y=0}},FlowMapController.prototype.doCircular=function(){this.onCircular(!0,!0)},FlowMapController.prototype.isPanZoomAndAutoRefresh=function(){return this.panningOrZooming&&this.$scope.svFlowmapdata&&this.$scope.svFlowmapdata.autoRefresh},FlowMapController.prototype.onDataChanged=function(data){if(!this.isPanZoomAndAutoRefresh()&&this.currentlyVisible()&&(this.cachedBBox=null,this.$scope.svFlowmapdata=data,this.$scope.svFlowmapdata)){var graph=this.$scope.svFlowmapdata;graph&&graph.properties&&graph.properties.definition&&graph.properties.definition.entityType&&(this.flowmapViewType=graph.properties.definition.entityType),this.rendererFactory=new FlowItemRendererFactory(this.flowmapViewType,graph,this.$scope,this.$scope.svAppId,this.$scope.svBaseline),this.linkRendererFactory=new LinkRendererFactory(this.$scope,this.rendererFactory,this.flowmapViewType,this.$scope.svBaseline,graph),this.serverNodes=graph.nodes,this.serverEdges=graph.edges,this.nodes=this.serverNodes,this.links=this.serverEdges;for(var nodeNum=0;nodeNum<this.nodes.length;nodeNum++){var node=this.nodes[nodeNum],serverNode=this.serverNodes[nodeNum];serverNode.preferenceValue&&serverNode.preferenceValue.position&&(node.x=serverNode.preferenceValue.position.x,node.y=serverNode.preferenceValue.position.y),0!=node.x||0!=node.y?(node.fixed=!0,node.px=node.x,node.py=node.y):(node.px=node.x=this.layoutWidth/2,node.px=node.y=this.layoutHeight/2,this.hasUnfixedNodes=!0)}this.$element.html(""),this.nodes.length<1?this.showMessage(graph.emptyText?graph.emptyText:""):(this.showMessage(this.resourceManager.getString("ui","ms_creatingFlowmap")),this.drawMap(!0,!0))}},FlowMapController.prototype.showMessage=function(msg){var data="<div class='adsFlowMapTextMessageTable'><div class='adsFlowMapTextMessageRow'><div class='adsFlowMapTextMessageCell'>"+msg+"</div></div></div>";this.$element.html(data)},FlowMapController.prototype.cleanupMessage=function(){this.$element.find(".adsFlowMapTextMessageTable").remove()},FlowMapController.prototype.onCircular=function(value,animate){if(void 0===animate&&(animate=!1),this.$scope.svLayout&&this.nodes&&this.canvas){this.forceLayout.cleanupForce();var unscaledWidth=this.layoutWidth/this.lastZoom,unscaledHeight=this.layoutHeight/this.lastZoom,centerX=this.zoomer.translate()[0]/this.lastZoom,centerY=this.zoomer.translate()[1]/this.lastZoom;this.circularLayout.layout(new Point2D(unscaledWidth,unscaledHeight),new Point2D(centerX,centerY),this.rendererFactory.largestNodeRadius(),this.linkRendererFactory,this.canvas,animate),this.hasUnfixedNodes=!0,this.saveAllFlowLocations(),this.cachedBBox=null}},FlowMapController.prototype.setCurrentTransform=function(value){this.canvas.attr("transform",value.toString())},FlowMapController.prototype.getCurrentTransform=function(){var matrix=this.canvas[0][0].transform.baseVal.consolidate().matrix;return new Transform2D(matrix)},FlowMapController.prototype.calculateZoomoutFactor=function(bbox,initialZoom,canvasWidth,canvasHeight){var minScaleX=canvasWidth/FlowMapZoomLevels.ZOOM_OUT_FACTOR/bbox.width,minScaleY=canvasHeight/FlowMapZoomLevels.ZOOM_OUT_FACTOR/bbox.height,minScale=Math.min(minScaleX,minScaleY);return this.scaleExtent[0]=minScale,this.zoomer.scaleExtent(this.scaleExtent),this.$scope.svScale.lowerBound=this.scaleExtent[0],Math.max(Math.min(Math.max(minScale,initialZoom),FlowMapZoomLevels.UPPER_ZOOM),FlowMapZoomLevels.LOWER_ZOOM)},FlowMapController.prototype.zoomed=function(event){event||(event=d3.event),event&&event.sourceEvent&&0!==event.sourceEvent.button||this.updateCanvasTransform(event.scale,event.translate)},FlowMapController.prototype.updateCanvasTransform=function(newScale,translate){(isNaN(translate[0])||isNaN(translate[1])||isNaN(newScale))&&ADLoggerService.error("Invalid params to updateCanvasTransform");var bbox;this.cachedBBox?bbox=this.cachedBBox:(bbox=this.canvas[0][0].getBBox(),this.cachedBBox=bbox);var elementWidth=this.layoutWidth,elementHeight=this.layoutHeight,oldLowerBound=this.$scope.svScale.lowerBound;newScale=this.calculateZoomoutFactor(bbox,newScale,elementWidth,elementHeight);var canvasWidth=bbox.width*newScale,canvasHeight=bbox.height*newScale,canvasAspect=canvasWidth/canvasHeight,screenAspect=elementWidth/elementHeight,xPrime=translate[0],yPrime=translate[1],left=-bbox.x*newScale,right=-bbox.x*newScale,top=-bbox.y*newScale,bottom=-bbox.y*newScale;elementWidth>canvasWidth&&elementHeight>canvasHeight?(right+=-(canvasWidth-elementWidth),bottom+=-(canvasHeight-elementHeight),xPrime=Math.min(right,Math.max(left,xPrime)),yPrime=Math.min(bottom,Math.max(top,yPrime))):canvasAspect>screenAspect?canvasHeight>elementHeight?(right+=-(canvasWidth-elementWidth),bottom+=-(canvasHeight-elementHeight),xPrime=Math.max(right,Math.min(left,xPrime)),yPrime=Math.max(bottom,Math.min(top,yPrime))):(right+=-(canvasWidth-elementWidth),bottom+=elementHeight-canvasHeight,xPrime=Math.max(right,Math.min(left,xPrime)),yPrime=Math.max(top,Math.min(bottom,yPrime))):canvasWidth>elementWidth?(right+=-(canvasWidth-elementWidth),bottom+=-(canvasHeight-elementHeight),xPrime=Math.max(right,Math.min(left,xPrime)),yPrime=Math.max(bottom,Math.min(top,yPrime))):(right+=elementWidth-canvasWidth,bottom+=-(canvasHeight-elementHeight),xPrime=Math.max(left,Math.min(right,xPrime)),yPrime=Math.max(bottom,Math.min(top,yPrime))),this.zoomer.scale(newScale).translate([xPrime,yPrime]),this.canvas.attr("transform","translate("+xPrime+", "+yPrime+") scale("+newScale+")");var needsApply=!1;(this.$scope.svScale.value!=newScale||oldLowerBound!=this.$scope.svScale.lowerBound)&&(needsApply=!0),this.$scope.svScale.value=newScale,FlowMapZoomLevels.updateZoomLevelDetail(!1,newScale,this.lastZoom,this.canvas),this.lastZoom=this.$scope.svScale.value,needsApply&&ViewUtil.safeDigest(this.$scope.$parent.$parent,this.$rootScope)},FlowMapController.prototype.zoomStart=function(){this.panningOrZooming=!0},FlowMapController.prototype.zoomEnd=function(){this.persistZoomAndPan()&&this.canModifyFlow()&&(this.setCurrentTransformOnPrefs(),this.flowMapUiService.setFlowmapProperties(this.$scope.svFlowmapdata.properties)),this.panningOrZooming=!1},FlowMapController.prototype.scaleUpdated=function(newScale){if(newScale&&this.canvas&&this.lastZoom!=newScale){var canvasWidthHalf=this.layoutWidth/2,canvasHeightHalf=this.layoutHeight/2,center={x:canvasWidthHalf,y:canvasHeightHalf},d3Translation=this.zoomer.translate(),view={x:d3Translation[0],y:d3Translation[1]},translate0={x:(center.x-view.x)/this.lastZoom,y:(center.y-view.y)/this.lastZoom};translate0.x=translate0.x*newScale+view.x,translate0.y=translate0.y*newScale+view.y,view.x+=center.x-translate0.x,view.y+=center.y-translate0.y,this.updateCanvasTransform(newScale,[view.x,view.y]),this.zoomEnd()}},FlowMapController.prototype.centerMap=function(){var newScale=this.calculateInitialZoom(),boundingRect=this.canvas[0][0].getBBox(),scaledWidth=boundingRect.width*newScale,scaledHeight=boundingRect.height*newScale,scaledX=boundingRect.x*newScale,scaledY=boundingRect.y*newScale,canvasWidth=this.layoutWidth,canvasHeight=this.layoutHeight,translateX=-scaledX+(canvasWidth-scaledWidth)/2,translateY=-scaledY+(canvasHeight-scaledHeight)/2;this.cachedBBox=null,this.updateCanvasTransform(newScale,[translateX,translateY])},FlowMapController.prototype.calculateInitialZoom=function(){var boundingRect=this.canvas[0][0].getBBox(),containerWidth=this.layoutWidth,containerHeight=this.layoutHeight,contentWidth=boundingRect.width,contentHeight=boundingRect.height,optimalZoomOut=Math.min(1.25,containerWidth/contentWidth,containerHeight/contentHeight);return optimalZoomOut=this.calculateZoomoutFactor(boundingRect,optimalZoomOut,containerWidth,containerHeight)},FlowMapController.prototype.drawMap=function(dataChanged,rebuildForce,resetNodeLocations){if(void 0===dataChanged&&(dataChanged=!1),void 0===rebuildForce&&(rebuildForce=!1),void 0===resetNodeLocations&&(resetNodeLocations=!1),this.$scope.svFlowmapdata&&this.$element&&this.$scope.svLayout&&this.initialized&&this.serverNodes&&!this.forceLayout.running()){resetNodeLocations&&(this.resetAllNodeLocations(),this.$scope.svFlowmapdata.properties.preference.position=null,this.$scope.svFlowmapdata.properties.preference.zoom=null),this.$scope.svFlowmapdata.autoRefresh&&!this.persistZoomAndPan()&&this.setCurrentTransformOnPrefs();var visibleLinks=this.serverEdges,visibleNodes=this.serverNodes;this.hasUnfixedNodes=!1;for(var nodeNum=0;nodeNum<visibleNodes.length;nodeNum++){var node=visibleNodes[nodeNum];if(node.index=nodeNum,!node.fixed){this.hasUnfixedNodes=!0;break}}if(dataChanged){this.svg=d3.select(this.$element[0]).append("svg").attr("pointer-events","all").attr("width",this.layoutWidth).attr("height",this.layoutHeight).attr("viewBox","0 0 "+this.layoutWidth+" "+this.layoutHeight),this.svg.append("style").text(".adsFlowmapSelected { filter:url(#dropGlow); } ");var svgDefs=this.svg.append("defs"),filterGroup=svgDefs.append("filter").attr("id","dropGlow").attr("filterUnits","userSpaceOnUse").attr("x","-30%").attr("y","-30%").attr("width","160%").attr("height","160%");filterGroup.append("feColorMatrix").attr("values",".137 0 0  .137 0   0 .545 0  .545 0   0 0 .953  .953 0   0 0 0  1 0 ").attr("type","matrix").attr("in","SourceAlpha").attr("result","coloredSource"),filterGroup.append("feGaussianBlur").attr("stdDeviation","7").attr("in","coloredSource").attr("result","blurSelection"),filterGroup.append("feBlend").attr("mode","normal").attr("in2","blurSelection").attr("in","SourceGraphic"),this.canvas=this.svg.append("g").attr("class","topLevelGraphics").attr("width","100%").attr("height","100%").attr("transform","translate(0,0) scale("+this.$scope.svScale.value+")"),this.rendererFactory.render(this.canvas,this.serverNodes,new Point2D(this.layoutWidth/2,this.layoutHeight/2)),this.linkRendererFactory.render(this.canvas,this.serverEdges),this.selectionManager.setMapElements(this.svg,this.canvas,this.linkRendererFactory,this.canModifyFlow()),this.svg.call(this.zoomer)}this.forceLayout.force&&rebuildForce&&this.forceLayout.cleanupForce(),this.canvas&&visibleLinks&&visibleNodes&&(!this.forceLayout.force||rebuildForce)&&(this.hasUnfixedNodes?(this.$scope.svLayout.linkDistance.value||(this.$scope.svLayout.linkDistance.value=this.linkDistance.bind(this)),this.forceLayout.layout(this.$scope.svLayout,this.$element,this.canvas,visibleNodes,visibleLinks,this.onForceEnd.bind(this))):this.onForceEnd())}},FlowMapController.prototype.linkDistance=function(d,visibleNodes){var sourceRenderer=this.rendererFactory.rendererForData(d.source),targetRenderer=this.rendererFactory.rendererForData(d.target),petDistances=sourceRenderer.nodeRadius+targetRenderer.nodeRadius;return petDistances+Math.max(130,330-10*visibleNodes)},FlowMapController.prototype.persistZoomAndPan=function(){return this.$scope.svFlowmapdata.properties.preference.persistZoomAndPan},FlowMapController.prototype.onForceEnd=function(){this.canvas.selectAll(".adsFlowMapNode").attr("transform",function(d){return"translate("+d.x+" "+d.y+")"});var factory=this.linkRendererFactory;this.canvas.selectAll(this.linkRendererFactory.getSelectorClassForAllObjectsInFactory()).attr("d",function(d){var showArrows=factory.showArrowsForEntityType(d.linkType);return factory.rendererForEntityTypeVariant(d.linkType).linkPathData(d,null,this,showArrows)}),(this.$scope.svFlowmapdata.autoRefresh||this.persistZoomAndPan())&&this.$scope.svFlowmapdata.properties.preference.position?(this.$scope.svScale.value=this.$scope.svFlowmapdata.properties.preference.zoom,this.updateCanvasTransform(this.$scope.svScale.value,[this.$scope.svFlowmapdata.properties.preference.position.x,this.$scope.svFlowmapdata.properties.preference.position.y]),this.$scope.svFlowmapdata.autoRefresh=!1):this.centerMap(),this.cleanupMessage(),ViewUtil.safeApply(this.$scope,this.$rootScope),this.hasUnfixedNodes&&(this.saveAllFlowLocations(),this.hasUnfixedNodes=!1)},FlowMapController.prototype.saveAllFlowLocations=function(){if(this.canModifyFlow()){var prefs=this.$scope.svFlowmapdata.properties.preference,newMembers={};_.each(prefs.members,function(member){newMembers[member.uid]=member});for(var itr=0;itr<this.nodes.length;itr++){var node=this.nodes[itr],member=node.preferenceValue;member.position={x:node.x,y:node.y,z:0},newMembers[node.id]=member}prefs.members=_.values(newMembers),this.persistZoomAndPan()?this.setCurrentTransformOnPrefs():this.clearTransformOnPrefs(),this.flowMapUiService.setFlowmapProperties(this.$scope.svFlowmapdata.properties)}},FlowMapController.prototype.setCurrentTransformOnPrefs=function(){if(this.canvas){var canvasTransform=this.getCurrentTransform();this.$scope.svFlowmapdata.properties.preference.zoom=canvasTransform.scale,this.$scope.svFlowmapdata.properties.preference.position=canvasTransform.translate}},FlowMapController.prototype.canModifyFlow=function(){return this.$scope.svFlowmapdata.properties.ownsFlow||this.$scope.svFlowmapdata.properties.defaultValue},FlowMapController.prototype.clearTransformOnPrefs=function(){delete this.$scope.svFlowmapdata.properties.preference.zoom,delete this.$scope.svFlowmapdata.properties.preference.position},FlowMapController.prototype.currentlyVisible=function(){return this.$element.is(":visible")},FlowMapController.$inject=["$scope","$rootScope","flowMapUiService","$element","$modal","resourceManager","backendDashboardViewService"],FlowMapController}();return FlowMapController}),define("app/view/components/flowmap/FlowMap",["require","exports","./FlowMapController"],function(require,exports,FlowMapController){var ADFlowMap=function(){function ADFlowMap(){return{restrict:"AE",replace:!1,transclude:!1,scope:{svScale:"=",svLayout:"=",svFlowmapdata:"=",svAppId:"=",svCenterMap:"=",svBaseline:"=",adRefresh:"&"},controller:FlowMapController}}return ADFlowMap}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-flowmap"),ADFlowMap)});var BackendGrouper=function(){function BackendGrouper(serverNodes,serverEdges,nodes,links,nodeHash,preferences){this.serverNodes=serverNodes,this.serverEdges=serverEdges,this.nodes=nodes,this.links=links,this.nodeHash=nodeHash,this.preferences=preferences,this.preferencesHash={},this.ungroupableHash={};for(var itr=0;preferences&&preferences.members&&itr<preferences.members.length;itr++){var pref=preferences.members[itr];this.preferencesHash[pref.uid]=pref}if(preferences&&preferences.ungroupableBackends)for(var itr=0;itr<preferences.ungroupableBackends.length;itr++)this.ungroupableHash[preferences.ungroupableBackends[itr]]=!0}return BackendGrouper.prototype.performBackendGrouping=function(){var backendInLinks=(this.serverNodes.filter(function(item){return item.entityType==EntityType.BACKEND}),{}),backendOutLinks={};for(var linkNum in this.serverEdges){var edge=this.serverEdges[linkNum],inNode=this.nodeHash[edge.targetNode],outNode=this.nodeHash[edge.sourceNode];inNode.entityType==EntityType.BACKEND&&(backendInLinks[edge.targetNode]||(backendInLinks[edge.targetNode]=[]),backendInLinks[edge.targetNode].push(edge)),outNode.entityType==EntityType.BACKEND&&(backendOutLinks[edge.sourceNode]||(backendOutLinks[edge.sourceNode]=[]),backendOutLinks[edge.sourceNode].push(edge))}var backendHash,backendGroups={};for(var backendId in backendInLinks){var backendRef=this.nodeHash[backendId],linksArry=backendInLinks[backendId];if(!backendOutLinks[backendId]&&!this.ungroupableHash[backendRef.idNum]){backendHash=this.createBackendHash(backendRef,linksArry),backendGroups[backendHash]||(backendGroups[backendHash]={backendRefs:[],inLinksDict:{}}),backendGroups[backendHash].backendRefs.push(backendRef);for(var inLinkProp in linksArry){var inLink=linksArry[inLinkProp];backendGroups[backendHash].inLinksDict[inLink.sourceNode]||(backendGroups[backendHash].inLinksDict[inLink.sourceNode]=[]),backendGroups[backendHash].inLinksDict[inLink.sourceNode].push(inLink)}}}var newGroupNodes=[],newGroupEdges=[];for(backendHash in backendGroups){var backendGroup=backendGroups[backendHash];if(this.preferences.groupBackendsByType&&backendGroup.backendRefs.length>=this.preferences.minimumBackendGroupSize){var newBackendNode=this.createBackendGroup(backendGroup.backendRefs);newGroupNodes.push(newBackendNode);var newBackendLinks=this.createBackendGroupEdges(backendGroup.inLinksDict,newBackendNode);newGroupEdges=newGroupEdges.concat(newBackendLinks)}}this.serverNodes=this.serverNodes.filter(function(d){return!d.nodeGroup}),this.serverEdges=this.serverEdges.filter(function(d){return!d.source.nodeGroup&&!d.target.nodeGroup}),this.serverNodes=this.serverNodes.concat(newGroupNodes),this.serverEdges=this.serverEdges.concat(newGroupEdges),this.nodes=this.serverNodes,this.links=this.serverEdges},BackendGrouper.prototype.createBackendGroupEdges=function(inLinksDict,newBackendNode){var newLinks=[];for(var sourceId in inLinksDict){var inLinksToAdd=inLinksDict[sourceId],newLink=angular.extend({},inLinksToAdd[0]);newLink.isAggregated=!0,newLink.aggregatedEdges=inLinksToAdd,newLink.baselineStats=[],newLink.stats=[];var sourceEdges=this.nodeHash[sourceId].$$edges;sourceEdges.push(newLink);for(var itr=0;itr<inLinksToAdd.length;itr++){var linkToAddToStats=inLinksToAdd[itr];sourceEdges.splice(sourceEdges.indexOf(linkToAddToStats),1),newLink.stats=newLink.stats.concat(linkToAddToStats.stats),newLink.baselineStats=newLink.baselineStats.concat(linkToAddToStats.baselineStats)}this.nodeHash[sourceId].nodeDegree-=inLinksToAdd.length-1,newLink.sourceNode=sourceId,newLink.targetNode=newBackendNode.id,newLink.target=newBackendNode,newLink.source=this.nodeHash[sourceId],newLink.sourceNodeDefinition=this.parseEntityDefinition(newLink.source),newLink.targetNodeDefinition=this.parseEntityDefinition(newLink.target),newLinks.push(newLink)}return newLinks},BackendGrouper.prototype.createBackendGroup=function(backendsToCollapse){var resourceManager=AngularUtil.getADInjector().get("resourceManager"),backendGroup=angular.extend({},backendsToCollapse[0]);backendGroup.name=backendsToCollapse.length+" "+ExitPointUtil.getExitPointTypeLabelFromD3Node(backendGroup)+" "+resourceManager.getString("ui","ms_lowerBackends");var pref=backendsToCollapse[0].preferenceValue,x=pref?pref.position.x:0,y=pref?pref.position.y:0;0!=x||0!=y?(backendGroup.x=backendGroup.px=x,backendGroup.y=backendGroup.py=y):(backendGroup.x=backendGroup.px=0,backendGroup.y=backendGroup.py=0,delete backendGroup.fixed);for(var backendToBeHiddenProp in backendsToCollapse)backendsToCollapse[backendToBeHiddenProp].nodeGroup=!0;return backendGroup.id=backendsToCollapse[0].id+BackendGrouper.BACKEND_GROUP,backendGroup.$$groupItems=backendsToCollapse,backendGroup.nodeGroup=!1,this.preferencesHash[backendGroup.id]?backendGroup.preferenceValue=this.preferencesHash[backendGroup.id]:backendGroup.preferenceValue||(backendGroup.preferenceValue={},backendGroup.preferenceValue.position={}),backendGroup.preferenceValue.uid=backendGroup.id,backendGroup},BackendGrouper.prototype.createBackendHash=function(backend,linksEdges){for(var linkIds=[],itr=0;itr<linksEdges.length;itr++){var link=linksEdges[itr];linkIds.push(link.sourceNode)}return linkIds.sort(),linkIds=_.uniq(linkIds,!0),backend.backendType+"_"+linkIds.join("_")},BackendGrouper.prototype.parseEntityDefinition=function(node){if(!node)return null;var rtn={};return rtn.entityId=node.idNum,rtn.entityType=node.entityType,rtn},BackendGrouper.BACKEND_GROUP="_BACKEND_GROUP",BackendGrouper}();define("app/view/components/flowmap/BackendGrouper",function(){});var FlowRendererUtils=function(){function FlowRendererUtils(){}return FlowRendererUtils.createShadowedText=function(messageFunction,transformFunc,container,classes,showFunction,truncateString){void 0===classes&&(classes=" adsFlowMapText adsFlowMapZoom2 "),void 0===showFunction&&(showFunction=function(){return!0}),void 0===truncateString&&(truncateString=!1);var parentText=container.filter(showFunction).append("text").attr("transform",transformFunc).attr("class",function(d){return classes instanceof Function?classes(d):classes});return parentText.append("tspan").attr("x",0).text(truncateString?FlowRendererUtils.shortString(messageFunction):messageFunction).attr("class","adsFlowMapTextShadow"),parentText.append("tspan").attr("x",0).text(truncateString?FlowRendererUtils.shortString(messageFunction):messageFunction).attr("class","adsFlowMapTextFace"),parentText},FlowRendererUtils.shortString=function(messageFunction){var _this=this;return function(){var value=messageFunction.apply(_this,arguments);if(value.length>FlowRendererUtils.MAX_LABEL_LENGTH){var midPoint=FlowRendererUtils.MAX_LABEL_LENGTH/2;value=value.substr(0,midPoint)+"..."+value.substr(value.length-midPoint)}return value}},FlowRendererUtils.performanceStateAgainstBaseline=function(currentValue,baseline){if(!baseline||!baseline.metricValue||isNaN(currentValue))return PerformanceState.UNKNOWN;var observedValue=currentValue;return observedValue>FlowRendererUtils.criticalThresholdAdjusted(baseline)?PerformanceState.CRITICAL:observedValue>FlowRendererUtils.warningThresholdAdjusted(baseline)?PerformanceState.WARNING:PerformanceState.NORMAL},FlowRendererUtils.getBaselineStatusText=function(itemPerformance){var resourceManager=AngularUtil.getADInjector().get("resourceManager"),stringKey="ms_unknown";switch(itemPerformance){case PerformanceState.NORMAL:stringKey="ms_normal";break;case PerformanceState.WARNING:stringKey="ms_warning";break;case PerformanceState.CRITICAL:stringKey="ms_critical";break;case PerformanceState.UNKNOWN:case PerformanceState.UNDEFINED:default:stringKey="ms_unknown"}return resourceManager.getString("ui",stringKey)},FlowRendererUtils.getBaselineFillColorClass=function(itemPerformance){var normalColorClass="adsNormalNodeColor",warningColorClass="adsWarningNodeColor",criticalColorClass="adsCriticalNodeColor",unknownColorClass="adsUnknownFlowMapColor",color=unknownColorClass;switch(itemPerformance){case PerformanceState.NORMAL:color=normalColorClass;break;case PerformanceState.WARNING:color=warningColorClass;break;case PerformanceState.CRITICAL:color=criticalColorClass;break;case PerformanceState.UNKNOWN:case PerformanceState.UNDEFINED:default:color=unknownColorClass}return color},FlowRendererUtils.warningThresholdAdjusted=function(performanceValue){var metric=performanceValue.metricValue,threshold=metric.value+Math.max(2*metric.standardDeviation,.2*metric.value);return 10>threshold&&(threshold=10),threshold},FlowRendererUtils.criticalThresholdAdjusted=function(performanceValue){var metric=performanceValue.metricValue,threshold=metric.value+Math.max(3*metric.standardDeviation,.3*metric.value);return 20>threshold&&(threshold=20),threshold},FlowRendererUtils.getFlowSyncStatLabelForEdgePerformanceStats=function(stats){for(var syncStats=[],i=0;i<stats.length;i++){var stat=stats[i];stat.async||syncStats.push(stat)}var syncLabel="";if(syncStats.length>0){var syncART=ExitStatUtils.getAggregateART(syncStats),syncCPM=ExitStatUtils.getAggregateCPM(syncStats),syncARTString=APMUtil.renderDuration(syncART),syncCPMString=FlowRendererUtils.convertNumberToLabel(syncCPM);syncLabel=syncCPMString+" calls / min, "+syncARTString}return syncLabel},FlowRendererUtils.getFlowAsyncStatLabelForEdgePerformanceStats=function(stats){for(var asyncStats=[],i=0;i<stats.length;i++){var stat=stats[i];stat.async&&asyncStats.push(stat)}var asyncLabel="";if(asyncStats.length>0){var asyncART=ExitStatUtils.getAggregateART(asyncStats),asyncCPM=ExitStatUtils.getAggregateCPM(asyncStats),asyncARTString=APMUtil.renderDuration(asyncART),asyncCPMString=FlowRendererUtils.convertNumberToLabel(asyncCPM);asyncLabel=asyncCPMString+" calls / min, "+asyncARTString+" "+resourceManager.getString("ui","ms_asyncCallType")}return asyncLabel},FlowRendererUtils.nodePerformanceColorClassART=function(d){return d.baselineStats&&d.stats?FlowRendererUtils.getBaselineFillColorClassForStat(d,d.stats.averageResponseTime.metricValue,d.baselineStats.averageResponseTime):" adsUnknownFlowMapColor "},FlowRendererUtils.nodePerformanceColorClassEPM=function(d){return d.baselineStats&&d.stats?FlowRendererUtils.getBaselineFillColorClassForStat(d,d.stats.errorsPerMinute.metricValue,d.baselineStats.errorsPerMinute):" adsUnknownFlowMapColor "},FlowRendererUtils.getBaselineFillColorClassForStat=function(d,currentValue,baseline){var itemPerformance=FlowRendererUtils.performanceStateAgainstBaseline(currentValue,baseline);return FlowRendererUtils.getBaselineFillColorClass(itemPerformance)},FlowRendererUtils.performanceColorClassART=function(d){var worstPerformance=PerformanceState.UNKNOWN;if(d.baselineStats&&d.stats)for(var statIndex=0;statIndex<d.stats.length&&statIndex<d.baselineStats.length;statIndex++){var stat=d.stats[statIndex],baselineStat=d.baselineStats[statIndex];if(stat&&stat.averageResponseTime&&baselineStat&&baselineStat.averageResponseTime){var itemPerformance=FlowRendererUtils.performanceStateAgainstBaseline(stat.averageResponseTime.metricValue,baselineStat.averageResponseTime);itemPerformance==PerformanceState.CRITICAL?worstPerformance=itemPerformance:itemPerformance==PerformanceState.WARNING&&worstPerformance!=PerformanceState.CRITICAL?worstPerformance=itemPerformance:itemPerformance==PerformanceState.NORMAL&&worstPerformance!=PerformanceState.CRITICAL&&worstPerformance!=PerformanceState.WARNING&&(worstPerformance=itemPerformance)}}return FlowRendererUtils.getBaselineFillColorClass(worstPerformance)},FlowRendererUtils.networkPerformanceColorClassPacketLoss=function(d){var worstPerformance=PerformanceState.UNKNOWN,networkBaselineStats=d.networkBaselineStats,networkStats=d.networkStats;if(networkBaselineStats&&networkStats&&networkStats.latency&&networkBaselineStats.latency){var itemPerformance=FlowRendererUtils.performanceStateAgainstBaseline(networkStats.latency.value,networkBaselineStats.latency);(itemPerformance===PerformanceState.CRITICAL||itemPerformance===PerformanceState.WARNING||itemPerformance===PerformanceState.NORMAL)&&(worstPerformance=itemPerformance)}return FlowRendererUtils.getBaselineFillColorClass(worstPerformance)},FlowRendererUtils.convertNumberToLabel=function(value){if(isNaN(value)||value==-1/0||1/0==value)return FlowRendererUtils.NO_DATA_DISPLAY_STRING;var rtn=ViewUtil.formatLargeNumber(value,2,1e3,!1);return rtn},FlowRendererUtils.statValid=function(value){return value>=0},FlowRendererUtils.isControlDown=function(event){void 0===event&&(event=null);var d3Event=d3.event&&d3.event.sourceEvent?d3.event.sourceEvent:d3.event;return event=event?event:d3Event,event?Ext.isMac?event.metaKey:event.ctrlKey:!1},FlowRendererUtils.getLinkTypeText=function(d){for(var exitCall=null,itr=0;itr<d.stats.length;itr++)if(exitCall){if(d.stats[itr].exitPointCall&&d.stats[itr].exitPointCall.exitPointType!==exitCall.exitPointType)return ResourceManager.instance().getString("ui","ms_multipleTransactionExitPoints")}else exitCall=d.stats[itr].exitPointCall;var text=ExitPointUtil.getExitPointTypeLabelFromD3Node(d.target,null);return text?text:ExitPointUtil.getLabelForType(exitCall&&exitCall.exitPointType)},FlowRendererUtils.getLinkTypeTextForNetworkFlowMap=function(d3GraphEdge){var backendType=d3GraphEdge.target&&d3GraphEdge.target.backendType;if(backendType)return backendType;var exitType=d3GraphEdge.networkStats&&d3GraphEdge.networkStats.exitPointCall&&d3GraphEdge.networkStats.exitPointCall.exitPointType;if(exitType)return exitType;for(var exitCall=null,itr=0;itr<d3GraphEdge.stats.length;itr++)if(d3GraphEdge.stats[itr].exitPointCall){exitCall=d3GraphEdge.stats[itr].exitPointCall.exitPointType;break}return exitCall},FlowRendererUtils.pathEdgePoint=function(source,d){var item=$("#"+d.source.entityType+d.source.idNum+"_"+d.target.entityType+d.target.idNum),thePath=item[0],startPoint=thePath.getPointAtLength(0),lastSegment=thePath.pathSegList.getItem(thePath.pathSegList.numberOfItems-1);lastSegment.pathSegType==SVGPathSeg.PATHSEG_CLOSEPATH&&thePath.pathSegList.numberOfItems>2&&(lastSegment=thePath.pathSegList.getItem(thePath.pathSegList.numberOfItems-3));var endPoint=thePath.ownerSVGElement.createSVGPoint();endPoint.x=lastSegment.x,endPoint.y=lastSegment.y;var point=source?startPoint:endPoint;return point},FlowRendererUtils.calculateRotation=function(start,end){var deltaY=end.y-start.y,deltaX=end.x-start.x;return 180*Math.atan2(deltaY,deltaX)/Math.PI},FlowRendererUtils.createArrow=function(arrowSize){var arrowHeight=Math.sqrt(Math.pow(arrowSize,2)-Math.pow(arrowSize/2,2)),data="M 0,"+arrowHeight+" L "+-arrowSize+","+-arrowHeight+" H "+arrowSize+" Z";return data},FlowRendererUtils.rotate=function(point,amount){var x=point.x,y=point.y;point.x=x*Math.cos(amount)-y*Math.sin(amount),point.y=x*Math.sin(amount)+y*Math.cos(amount)},FlowRendererUtils.isViewTypeBT=function(viewType){return viewType===EntityType.BUSINESS_TRANSACTION},FlowRendererUtils.NO_DATA_DISPLAY_STRING=" - ",FlowRendererUtils.MAX_LABEL_LENGTH=30,FlowRendererUtils}();define("app/view/components/flowmap/renderers/FlowRendererUtils",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},NodePopupListController=function(_super){function NodePopupListController($scope,resourceManager,notificationService,flowMapUiService,timeRangeService,navigationService,nodeViewService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.nodeViewService=nodeViewService,this.injectorService=injectorService;var promise;$scope.tierId?promise=flowMapUiService.getNodesForTier(parseInt($scope.appId),parseInt($scope.tierId),timeRangeService.getCurrentTimeRangeStringForUrl()):$scope.appId&&(promise=flowMapUiService.getNodesForApp(parseInt($scope.appId),timeRangeService.getCurrentTimeRangeStringForUrl())),promise.then(function(response){var nodes=flowMapUiService.getNodesForTier_response(response);$scope.nodes=[];for(var itemIndex=0;itemIndex<nodes.length;itemIndex++){var node=nodes[itemIndex],nodeObject={name:node.name,healthSrc:ImageUtil.getProblemSeverityIconURL(node.overallState,IconSize.MEDIUM),upStateSrc:ImageUtil.getNodeAgentUpIconURL(node.isAgentUp),nodeIconSrc:ImageUtil.getAppNodeIconURL(node.agentType==AgentType.DOT_NET_APP_AGENT),id:node.idNum};$scope.nodes.push(nodeObject)}}),$scope.nodes=[],$scope.onNodeClicked=function(node){NetworkMonitoringViewService.instance().isLocationAppNetworkDashboard()?NetworkMonitoringViewService.instance().viewNpmNodeDashboard(parseInt($scope.appId),parseInt(node.id)):nodeViewService.viewNode(parseInt($scope.appId),parseInt(node.id))}}return __extends(NodePopupListController,_super),NodePopupListController}(ControllerBase);define("app/view/components/flowmap/nodePopupList/NodePopupController",function(){});var NodePopupList=function(){function NodePopupList(){return{restrict:"E",replace:!1,scope:{tierId:"@",appId:"@"},controller:"NodePopupListController",templateUrl:"app/view/components/flowmap/nodePopupList/NodePopupList.html"}}return NodePopupList}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-node-popup-list"),NodePopupList),define("app/view/components/flowmap/nodePopupList/NodePopupList",function(){});var FlowMapLegend=function(){function FlowMapLegend(){return{restrict:"AE",replace:!1,transclude:!1,scope:{adCrossApplication:"@"},templateUrl:FlowMapLegend.TEMPLATE_URL,controller:"FlowMapLegendController"}}return FlowMapLegend.TEMPLATE_URL="app/view/components/flowmap/legend/FlowMapLegend.html",FlowMapLegend}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-flow-legend"),FlowMapLegend),define("app/view/components/flowmap/legend/FlowMapLegend",function(){});var FlowMapLegendController=function(){function FlowMapLegendController($scope){$scope.controller=this}return FlowMapLegendController.prototype.closeClicked=function(){$(document).trigger(MouseEvents.CLICK)},FlowMapLegendController.$inject=["$scope","$element"],FlowMapLegendController}();define("app/view/components/flowmap/legend/FlowMapLegendController",function(){}),define("app/view/components/slowestRemoteCalls/SlowestRemoteCallsController",["require","exports"],function(){var SlowestRemoteCallsController=function(){function SlowestRemoteCallsController($scope,timeRangeService,snapshotViewService,topSummaryStatsUiService,resourceManager){this.$scope=$scope,this.timeRangeService=timeRangeService,this.snapshotViewService=snapshotViewService,this.topSummaryStatsUiService=topSummaryStatsUiService,this.resourceManager=resourceManager,this.selectedItem={value:{detailString:"",snapshotIds:[]}},$scope.controller=this,this.lastFetchedTimeRange=timeRangeService.getTimeRange();
var columns=[GridColumn.createColumn(180,"detailString",this.getString("ms_call")),GridColumn.createColumn(100,"averageTime",this.getString("ms_avgTimePerCall"),GridColumn.itemRenderer,!0,!1,"right"),GridColumn.createColumn(80,"count",this.getString("ms_numberCalls"),GridColumn.itemRenderer,!0,!1,"right"),GridColumn.createColumn(70,"maxTime",this.getString("ms_maxTime_ms"),GridColumn.itemRenderer,!0,!1,"right"),GridColumn.createColumn(80,"totalTime",this.getString("ms_totalTime_ms"),GridColumn.itemRenderer,!0,!1,"right"),GridColumn.createColumn(130,"snapshotIds",this.getString("ms_backendSnapshots"),this.renderSnapshots.bind(this),!0,!1)];$scope.gridOptions=new GridOptions({dataProvider:[],emptyText:this.getString("ms_noSlowBackendCalls"),columnProvider:columns,compileRenderers:!1,loading:!0,onCellClick:this.onGridClick.bind(this)});var request=topSummaryStatsUiService.getTopCallsSummaryListViewData($scope.adEntityType,parseInt($scope.adEntityId),parseInt($scope.adAppId),timeRangeService.convertForUrl(this.lastFetchedTimeRange),$scope.adTargetEntityId?parseInt($scope.adTargetEntityId):void 0,Util.parseBoolean($scope.adTargetIsComponent));request.then(function(items){for(var i=0;i<items.length;i++){var item=items[i];item.averageTime=items[i].totalTime/items[i].count}$scope.gridOptions.dataProvider=items,$scope.gridOptions.loading=!1}),ViewUtil.safeApply($scope)}return SlowestRemoteCallsController.prototype.renderSnapshots=function(snapshotArray){return snapshotArray&&snapshotArray.length>0?"<img src='"+ImageUtil.iconNavRequestSnapshots+"'/> <a>"+this.getString("ms_backendViewSnapshots")+"</a>":this.getString("ms_backendNoSnapshots")},SlowestRemoteCallsController.prototype.onGridClick=function(event){var callItem=event.raw;if(event.columnIndex>-1&&"snapshotIds"===this.$scope.gridOptions.columnProvider[event.columnIndex].dataIndex&&callItem.snapshotIds&&callItem.snapshotIds.length>0){var filter={};filter.guids=callItem.snapshotIds,this.$scope.adEntityType===EntityType.APPLICATION_COMPONENT&&(filter.applicationComponentIds=[parseInt(this.$scope.adEntityId)]),filter.rangeSpecifier=this.timeRangeService.currentTimeRange,DialogService.instance().showDialog("CorrelatedSnapshotModalController","app/view/apm/backendDashboard/slowestCalls/CorrelatedSnapshotModalController","app/view/apm/backendDashboard/slowestCalls/CorrelatedSnapshotModal.html",{snapshotGuids:callItem.snapshotIds,timeRange:this.lastFetchedTimeRange})}},SlowestRemoteCallsController.prototype.getString=function(key){return this.resourceManager.getString("ui",key)},SlowestRemoteCallsController.$inject=["$scope","timeRangeService","snapshotViewService","topSummaryStatsUiService","resourceManager"],SlowestRemoteCallsController}();return SlowestRemoteCallsController}),define("app/view/components/slowestRemoteCalls/SlowestRemoteCallsDirective",["require","exports","app/view/components/slowestRemoteCalls/SlowestRemoteCallsController"],function(require,exports,SlowestRemoteCallsController){var SlowestRemoteCallsDirective=function(){function SlowestRemoteCallsDirective(){return{restrict:"E",scope:{adEntityType:"@",adEntityId:"@",adAppId:"@",adTargetEntityId:"@",adTargetIsComponent:"@"},templateUrl:"app/view/components/slowestRemoteCalls/SlowestRemoteCalls.html",controller:SlowestRemoteCallsController}}return SlowestRemoteCallsDirective.$inject=["$rootScope"],SlowestRemoteCallsDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-slowest-remote-calls"),SlowestRemoteCallsDirective)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BTBreakdownController=function(_super){function BTBreakdownController($scope,timeRangeService,businessTransactionUiService,resourceManager,notificationService,sharedInjectorService,btViewService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.timeRangeService=timeRangeService,this.businessTransactionUiService=businessTransactionUiService,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.btViewService=btViewService,$scope.controller=this;for(var columns=[GridColumn.createColumn(100,"ms_name",resourceManager.getString("ui","ms_name"),this.renderName.bind(this),!0,!0,"left"),GridColumn.createColumn(50,"ms_responseTimeMs",resourceManager.getString("ui","ms_responseTimeMs"),this.renderResponseTime,!0,!1,"right"),GridColumn.createColumn(50,"ms_calls",resourceManager.getString("ui","ms_calls"),this.renderCalls,!0,!1,"right"),GridColumn.createColumn(50,"ms_callsPerMin",resourceManager.getString("ui","ms_callsPerMin"),this.renderCallsPerMin,!0,!1,"right"),GridColumn.createColumn(50,"ms_errors",resourceManager.getString("ui","ms_errors"),this.renderErrors,!0,!1,"right"),GridColumn.createColumn(50,"ms_errorsPerMin",resourceManager.getString("ui","ms_errorsPerMin"),this.renderErrorsPerMin,!0,!1,"right")],itr=0;itr<columns.length;itr++)columns[itr].sortable=!1;$scope.options=new TreeGridOptions({dataProvider:[],columnProvider:columns}),this.fetchData()}return __extends(BTBreakdownController,_super),BTBreakdownController.prototype.viewBusinessTransaction=function(){var exitStat=this.$scope.options.selectedItem,id=exitStat.btListEntry&&!isNaN(exitStat.btListEntry.id)?exitStat.btListEntry.id:-1;if(id>0)this.btViewService.viewBusinessTransaction(parseInt(this.$scope.appId),id);else{var callPathStat=this.$scope.options.selectedItem;this.btViewService.viewBusinessTransaction(parseInt(this.$scope.appId),callPathStat.btId)}},BTBreakdownController.prototype.fetchData=function(){var request,_this=this,targetEntityId=-1,targetEntityType="";this.$scope.targetEntityId&&(targetEntityId=parseInt(this.$scope.targetEntityId),targetEntityType=this.$scope.targetEntityType),request=targetEntityType?this.businessTransactionUiService.getBTSegmentLinkStats(parseInt(this.$scope.entityId),targetEntityType,targetEntityId,this.timeRangeService.getCurrentTimeRangeStringForUrl()):this.businessTransactionUiService.getBTComponentStats(parseInt(this.$scope.entityId),this.timeRangeService.getCurrentTimeRangeStringForUrl()),request.then(function(result){var items=_this.businessTransactionUiService.getBTComponentStats_response(result);_this.addItemIcons(items),_this.$scope.options.dataProvider=items})},BTBreakdownController.prototype.addItemIcons=function(stats){for(var itr=0;itr<stats.length;++itr){var stat=stats[itr];stat.iconSource=ImageUtil.getIconForBusinessTransactionType(stat.btListEntry);for(var callItr=0;callItr<stat.children.length;++callItr){var item=stat.children[callItr];item.iconSource=ImageUtil.callOutgoing}}},BTBreakdownController.prototype.renderName=function(value,column,data){var item=data.raw;if(item.btListEntry){var btSegmentExitStat=data.raw;return btSegmentExitStat.btListEntry.name}if(item.pathNames){for(var callPath=(data.raw,item),name="",itr=0;itr<callPath.pathNames.length;itr++){var pathSection=callPath.pathNames[itr].name;callPath.pathNames[itr].exitPointType&&(pathSection+=" <img src='images/callFrom.png'> ["+ExitPointUtil.getLabelForType(callPath.pathNames[itr].exitPointType)+"]"),itr>0&&(name+="<img src='images/callFrom.png'> "),name+=pathSection}return this.$scope.toNodeName&&(name+=this.$scope.toExitPointTypeLabel?"<img src='images/callFrom.png'> ["+this.$scope.toExitPointTypeLabel+"]<img src='images/callFrom.png'> "+this.$scope.toNodeName:"<img src='images/callFrom.png'> "+this.$scope.toNodeName),name}},BTBreakdownController.prototype.renderResponseTime=function(value,column,data){var item=data.raw;if(item.btListEntry);else if(item.pathNames){var callPath=item;return callPath.stats.averageResponseTime.value.toString()}},BTBreakdownController.prototype.renderCalls=function(value,column,data){var item=data.raw;if(item.btListEntry);else if(item.pathNames){var callPath=item;return callPath.stats.numberOfCalls.value.toString()}},BTBreakdownController.prototype.renderCallsPerMin=function(value,column,data){var item=data.raw;if(item.btListEntry);else if(item.pathNames){var callPath=item;return callPath.stats.callsPerMinute.value.toString()}},BTBreakdownController.prototype.renderErrors=function(value,column,data){var item=data.raw;if(item.btListEntry);else if(item.pathNames){var callPath=item;return callPath.stats.numberOfErrors.value.toString()}},BTBreakdownController.prototype.renderErrorsPerMin=function(value,column,data){var item=data.raw;if(item.btListEntry);else if(item.pathNames){var callPath=item;return callPath.stats.errorsPerMinute.value.toString()}},BTBreakdownController.$inject=["$scope","timeRangeService","businessTransactionUiService","resourceManager","notificationService","sharedInjectorService","businessTransactionViewService"],BTBreakdownController}(ControllerBase);define("app/view/components/flowmap/hoverCards/btBreakdown/BTBreakdownController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/flowmap/configure/flowMapConfigurator/FlowMapConfiguratorController",["require","exports"],function(require,exports){var FlowMapConfiguratorController=function(_super){function FlowMapConfiguratorController($scope,$element,$rootScope,$location,resourceManager,notificationService,injectorService,flowMapUiService,applicationUiService,dialogService,$modal){_super.call(this,$scope),this.$scope=$scope,this.$element=$element,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.flowMapUiService=flowMapUiService,this.applicationUiService=applicationUiService,this.dialogService=dialogService,this.$modal=$modal,this.showFlowMapList=!0,this.tabBackends=!1,this.tierFilterTotalCallsEnabled=!1,this.tierTotalCallsFilterOperator=ConditionOperator.GREATER_THAN,this.tierFilterTotalErrorsEnabled=!1,this.tierTotalErrorsFilterOperator=ConditionOperator.GREATER_THAN,this.tierFilterTimeConsumedEnabled=!1,this.tierTimeConsumedFilterOperator=ConditionOperator.GREATER_THAN,this.tierFilterResponseTimeEnabled=!1,this.tierResponseTimeFilterOperator=ConditionOperator.GREATER_THAN,this.tierFilterCallsPerMinEnabled=!1,this.tierCallsMinFilterOperator=ConditionOperator.GREATER_THAN,this.tierFilterErrorsPerMinEnabled=!1,this.tierErrorsMinFilterOperator=ConditionOperator.GREATER_THAN,this.tierFilterSpecificTiers=!1,this.backendFilterResponseTimeEnabled=!1,this.backendResponseTimeFilterOperator=ConditionOperator.GREATER_THAN,this.backendFilterCallsPerMinEnabled=!1,this.backendCallsMinFilterOperator=ConditionOperator.GREATER_THAN,this.backendFilterErrorsPerMinEnabled=!1,this.backendErrorsMinFilterOperator=ConditionOperator.GREATER_THAN,this.groupBackends={value:!1},this.tierTab="PERF_FILTERS",this._scopesInitialized=!1,this.$scope.controller=this,this.$scope.$watch("adDropdownOpen",this.onViewToggled.bind(this)),this.$scope.$watch("adOpenToEditor",this.openAndEditSelectedFlowMap.bind(this)),this.$scope.$watch("adSelectedFlowmap",this.init.bind(this)),this._scopesInitialized=!0,this.init()}return __extends(FlowMapConfiguratorController,_super),FlowMapConfiguratorController.prototype.init=function(){this.mainDashboardController=this.$scope.adMainDashboardController,this._scopesInitialized&&this.getEntityId()>=0&&this.fetchFlowMaps(),this.isSnapshot=this.mainDashboardController.isSnapshot(),this.isBusinessTransactionDashboard=this.mainDashboardController.isBusinessTransactionDashboard()},FlowMapConfiguratorController.prototype.setControls=function(){this.flowMapPrefValue&&this.flowMapPrefValue.componentFilter?(this.tierFilterSpecificTiers=this.flowMapPrefValue.componentFilter.entityIds&&this.flowMapPrefValue.componentFilter.entityIds.length>0,this.flowMapPrefValue.componentFilter.entityIds&&this.flowMapPrefValue.componentFilter.entityIds.length>0&&(this.tierFilterSpecificTiers=!0),this.flowMapPrefValue.componentFilter.totalCallsFilter?(this.tierFilterTotalCallsEnabled=!0,this.tierTotalCallsFilterOperator=this.flowMapPrefValue.componentFilter.totalCallsFilter.conditionOperator,this.tierTotalCallsFilterValue=this.flowMapPrefValue.componentFilter.totalCallsFilter.value):(this.tierFilterTotalCallsEnabled=null,this.tierTotalCallsFilterOperator=ConditionOperator.GREATER_THAN,this.tierTotalCallsFilterValue=null),this.flowMapPrefValue.componentFilter.totalErrorsFilter?(this.tierFilterTotalErrorsEnabled=!0,this.tierTotalErrorsFilterOperator=this.flowMapPrefValue.componentFilter.totalErrorsFilter.conditionOperator,this.tierTotalErrorsFilterValue=this.flowMapPrefValue.componentFilter.totalErrorsFilter.value):(this.tierFilterTotalErrorsEnabled=null,this.tierTotalErrorsFilterOperator=ConditionOperator.GREATER_THAN,this.tierTotalErrorsFilterValue=null),this.flowMapPrefValue.componentFilter.timeConsumedFilter?(this.tierFilterTimeConsumedEnabled=!0,this.tierTimeConsumedFilterOperator=this.flowMapPrefValue.componentFilter.timeConsumedFilter.conditionOperator,this.tierTimeConsumedFilterValue=this.flowMapPrefValue.componentFilter.timeConsumedFilter.value):(this.tierFilterTimeConsumedEnabled=null,this.tierTimeConsumedFilterOperator=ConditionOperator.GREATER_THAN,this.tierTimeConsumedFilterValue=null),this.flowMapPrefValue.componentFilter.responseTimeFiler?(this.tierFilterResponseTimeEnabled=!0,this.tierResponseTimeFilterOperator=this.flowMapPrefValue.componentFilter.responseTimeFiler.conditionOperator,this.tierResponseTimeFilterValue=this.flowMapPrefValue.componentFilter.responseTimeFiler.value):(this.tierResponseTimeFilterValue=null,this.tierResponseTimeFilterOperator=ConditionOperator.GREATER_THAN,this.tierFilterResponseTimeEnabled=!1),this.flowMapPrefValue.componentFilter.callsPerMinFilter?(this.tierFilterCallsPerMinEnabled=!0,this.tierCallsMinFilterOperator=this.flowMapPrefValue.componentFilter.callsPerMinFilter.conditionOperator,this.tierCallsMinFilterValue=this.flowMapPrefValue.componentFilter.callsPerMinFilter.value):(this.tierCallsMinFilterValue=null,this.tierCallsMinFilterOperator=ConditionOperator.GREATER_THAN,this.tierFilterCallsPerMinEnabled=!1),this.flowMapPrefValue.componentFilter.errorsPerMinFilter?(this.tierFilterErrorsPerMinEnabled=!0,this.tierErrorsMinFilterOperator=this.flowMapPrefValue.componentFilter.errorsPerMinFilter.conditionOperator,this.tierErrorsMinFilterValue=this.flowMapPrefValue.componentFilter.errorsPerMinFilter.value):(this.tierErrorsMinFilterValue=null,this.tierErrorsMinFilterOperator=ConditionOperator.GREATER_THAN,this.tierFilterErrorsPerMinEnabled=!1)):(this.tierFilterSpecificTiers=!1,this.tierFilterResponseTimeEnabled=!1,this.tierFilterTotalCallsEnabled=!1,this.tierFilterTotalErrorsEnabled=!1,this.tierFilterTimeConsumedEnabled=!1,this.tierFilterErrorsPerMinEnabled=!1,this.tierFilterCallsPerMinEnabled=!1),this.flowMapPrefValue&&this.flowMapPrefValue.backendFilter?(this.flowMapPrefValue.backendFilter.responseTimeFiler?(this.backendFilterResponseTimeEnabled=!0,this.backendResponseTimeFilterOperator=this.flowMapPrefValue.backendFilter.responseTimeFiler.conditionOperator,this.backendResponseTimeFilterValue=this.flowMapPrefValue.backendFilter.responseTimeFiler.value):(this.backendResponseTimeFilterValue=null,this.backendResponseTimeFilterOperator=ConditionOperator.GREATER_THAN,this.backendFilterResponseTimeEnabled=!1),this.flowMapPrefValue.componentFilter&&this.flowMapPrefValue.componentFilter.totalCallsFilter?(this.tierFilterTotalCallsEnabled=!0,this.tierTotalCallsFilterOperator=this.flowMapPrefValue.componentFilter.totalCallsFilter.conditionOperator,this.tierTotalCallsFilterValue=this.flowMapPrefValue.componentFilter.totalCallsFilter.value):(this.tierFilterTotalCallsEnabled=null,this.tierTotalCallsFilterOperator=ConditionOperator.GREATER_THAN,this.tierTotalCallsFilterValue=null),this.flowMapPrefValue.componentFilter&&this.flowMapPrefValue.componentFilter.totalErrorsFilter?(this.tierFilterTotalErrorsEnabled=!0,this.tierTotalErrorsFilterOperator=this.flowMapPrefValue.componentFilter.totalErrorsFilter.conditionOperator,this.tierTotalErrorsFilterValue=this.flowMapPrefValue.componentFilter.totalErrorsFilter.value):(this.tierFilterTotalErrorsEnabled=null,this.tierTotalErrorsFilterOperator=ConditionOperator.GREATER_THAN,this.tierTotalErrorsFilterValue=null),this.flowMapPrefValue.componentFilter&&this.flowMapPrefValue.componentFilter.timeConsumedFilter?(this.tierFilterTimeConsumedEnabled=!0,this.tierTimeConsumedFilterOperator=this.flowMapPrefValue.componentFilter.timeConsumedFilter.conditionOperator,this.tierTimeConsumedFilterValue=this.flowMapPrefValue.componentFilter.timeConsumedFilter.value):(this.tierFilterTimeConsumedEnabled=null,this.tierTimeConsumedFilterOperator=ConditionOperator.GREATER_THAN,this.tierTimeConsumedFilterValue=null),this.flowMapPrefValue.backendFilter.callsPerMinFilter?(this.backendFilterCallsPerMinEnabled=!0,this.backendCallsMinFilterOperator=this.flowMapPrefValue.backendFilter.callsPerMinFilter.conditionOperator,this.backendCallsMinFilterValue=this.flowMapPrefValue.backendFilter.callsPerMinFilter.value):(this.backendCallsMinFilterValue=null,this.backendCallsMinFilterOperator=ConditionOperator.GREATER_THAN,this.backendFilterCallsPerMinEnabled=!1),this.flowMapPrefValue.backendFilter.errorsPerMinFilter?(this.backendFilterErrorsPerMinEnabled=!0,this.backendErrorsMinFilterOperator=this.flowMapPrefValue.backendFilter.errorsPerMinFilter.conditionOperator,this.backendErrorsMinFilterValue=this.flowMapPrefValue.backendFilter.errorsPerMinFilter.value):(this.backendErrorsMinFilterValue=null,this.backendErrorsMinFilterOperator=ConditionOperator.GREATER_THAN,this.backendFilterErrorsPerMinEnabled=!1)):(this.backendFilterErrorsPerMinEnabled=!1,this.backendFilterCallsPerMinEnabled=!1,this.backendFilterResponseTimeEnabled=!1),this.flowMapPrefValue&&(this.groupBackends.value=this.flowMapPrefValue.groupBackendsByType,this.numberToGroup=this.flowMapPrefValue.minimumBackendGroupSize)},FlowMapConfiguratorController.prototype.fetchFlowMaps=function(){var _this=this;if(this.getEntityId()>=0){var promise=this.flowMapUiService.getFlowMapsForEntity(this.getEntityType(),this.getEntityId());promise.then(function(response){var userPreferenceListDatas=_this.flowMapUiService.getFlowMapsForEntity_response(response);_this.userPreferenceListDatas=Util.sortByName(userPreferenceListDatas)})}},FlowMapConfiguratorController.prototype.getFlowMapImage=function(userPreferenceListData){return this.isSelectedFlowMap(userPreferenceListData)?"images/check_small_green.png":"images/clear_box.png"},FlowMapConfiguratorController.prototype.isSelectedFlowMap=function(userPreferenceListData){return this.mainDashboardController&&this.mainDashboardController.isSelectedFlowMapPreference(userPreferenceListData)?!0:!1},FlowMapConfiguratorController.prototype.fetchTiersAndBackends=function(){var _this=this;if(!this.$scope.adBasicConfigurator){if(this.mainDashboardController.getAppId){var applicationId=this.mainDashboardController.getAppId();this.applicationUiService.getAllApplicationComponents(applicationId).then(function(response){_this.components=_this.applicationUiService.getAllApplicationComponents_response(response);var componentsAllData=MultiSelect.getComponentData(_this.components);_this.componentsAllData=componentsAllData,_this.componentsSelectedData=MultiSelect.getSelectedDataFromEntityIds(_this.flowMapPrefValue&&_this.flowMapPrefValue.componentFilter&&_this.flowMapPrefValue.componentFilter.entityIds?_this.flowMapPrefValue.componentFilter.entityIds:[])})}this.applicationUiService.getBackends(applicationId).then(function(response){if(_this.backends=_this.applicationUiService.getBackends_response(response),_this.flowMapPrefValue){var backendsAllData=MultiSelect.getBackendData(_this.backends);_this.backendsGridOptions=new GridOptions,_this.backendsGridOptions.useBufferedRenderer=!0,_this.backendsGridOptions.dataProvider=backendsAllData.dataProvider,_this.backendsGridOptions.columnProvider=[GridColumn.createColumn(30,"type","",_this.renderBackendType,!0),GridColumn.createColumn(100,"name",_this.getString("ms_name"),null,!0),GridColumn.createColumn(40,"hidden",_this.getString("ms_hidden"),_this.renderVisible,!0),GridColumn.createColumn(40,"ungroupable",_this.getString("ms_ungroupable"),_this.renderGroupable,!0)],delete _this.backendsGridOptions.columnProvider[0].flex,_this.backendsGridOptions.columnProvider[2].menuDisabled=!1,_this.backendsGridOptions.columnProvider[2].hideDefaultMenuItems=!0,_this.backendsGridOptions.columnProvider[2].contextMenuItems=[{text:_this.getString("ms_hideAllBackends"),handler:function(){_.each(_this.backendsGridOptions.dataProvider,function(item){item.hidden=!0}),ViewUtil.safeApply(_this.$scope)}},{text:_this.getString("ms_showAllBackends"),handler:function(){_.each(_this.backendsGridOptions.dataProvider,function(item){item.hidden=!1}),ViewUtil.safeApply(_this.$scope)}}],_this.backendsGridOptions.columnProvider[3].menuDisabled=!1,_this.backendsGridOptions.columnProvider[3].hideDefaultMenuItems=!0,_this.backendsGridOptions.columnProvider[3].contextMenuItems=[{text:_this.getString("ms_makeAllUngroupable"),handler:function(){_.each(_this.backendsGridOptions.dataProvider,function(item){item.ungroupable=!0}),ViewUtil.safeApply(_this.$scope)}},{text:_this.getString("ms_makeAllGroupable"),handler:function(){_.each(_this.backendsGridOptions.dataProvider,function(item){item.ungroupable=!1}),ViewUtil.safeApply(_this.$scope)}}];var ungroupableBackends={},filteredBackends={};if(_this.flowMapPrefValue.backendFilter&&_this.flowMapPrefValue.backendFilter.entityIds)for(var filteredIdList=_this.flowMapPrefValue.backendFilter.entityIds,itr=0;itr<filteredIdList.length;itr++){var filteredId=filteredIdList[itr];filteredBackends[filteredId]||(filteredBackends[filteredId]={}),filteredBackends[filteredId].hidden=!0}if(_this.flowMapPrefValue.ungroupableBackends)for(var itr=0;itr<_this.flowMapPrefValue.ungroupableBackends.length;itr++){var ungroupableId=_this.flowMapPrefValue.ungroupableBackends[itr];ungroupableBackends[ungroupableId]||(ungroupableBackends[ungroupableId]={}),ungroupableBackends[ungroupableId].ungroupable=!0}for(var itr=0;itr<backendsAllData.dataProvider.length;itr++){var item=backendsAllData.dataProvider[itr];item.ungroupable=ungroupableBackends[item.id]&&1==ungroupableBackends[item.id].ungroupable?!0:!1,item.hidden=filteredBackends[item.id]&&1==filteredBackends[item.id].hidden?!0:!1,item.index=itr}}})}},FlowMapConfiguratorController.prototype.renderBackendType=function(value){return"<img ng-src='"+ImageUtil.getBackendMiniIconSource(value)+"'>"},FlowMapConfiguratorController.prototype.renderVisible=function(value,metaData,record){var index=record.raw.index;return"<ad-checkbox selected='gridOptions.dataProvider["+index+"].hidden'  ng-model='gridOptions.dataProvider["+index+"].hidden'></ad-checkbox>"},FlowMapConfiguratorController.prototype.renderGroupable=function(value,metaData,record){var index=record.raw.index;return"<ad-checkbox selected='gridOptions.dataProvider["+index+"].ungroupable'  ng-model='gridOptions.dataProvider["+index+"].ungroupable'></ad-checkbox>"},FlowMapConfiguratorController.prototype.getHtmlFlowPreferenceFromForm=function(){var flowMapConfig=this.flowMapProperties;flowMapConfig.preference.componentFilter||(flowMapConfig.preference.componentFilter={}),flowMapConfig.preference.backendFilter||(flowMapConfig.preference.backendFilter={}),this.tierFilterResponseTimeEnabled?(flowMapConfig.preference.componentFilter.responseTimeFiler={},flowMapConfig.preference.componentFilter.responseTimeFiler.conditionOperator=this.tierResponseTimeFilterOperator,this.flowMapPrefValue.componentFilter.responseTimeFiler.value=this.tierResponseTimeFilterValue):flowMapConfig.preference.componentFilter.responseTimeFiler=null,this.tierFilterTotalCallsEnabled?(flowMapConfig.preference.componentFilter.totalCallsFilter={},flowMapConfig.preference.componentFilter.totalCallsFilter.conditionOperator=this.tierTotalCallsFilterOperator,this.flowMapPrefValue.componentFilter.totalCallsFilter.value=this.tierTotalCallsFilterValue):flowMapConfig.preference.componentFilter.totalCallsFilter=null,this.tierFilterTotalErrorsEnabled?(flowMapConfig.preference.componentFilter.totalErrorsFilter={},flowMapConfig.preference.componentFilter.totalErrorsFilter.conditionOperator=this.tierTotalErrorsFilterOperator,this.flowMapPrefValue.componentFilter.totalErrorsFilter.value=this.tierTotalErrorsFilterValue):flowMapConfig.preference.componentFilter.totalErrorsFilter=null,this.tierFilterTimeConsumedEnabled?(flowMapConfig.preference.componentFilter.timeConsumedFilter={},flowMapConfig.preference.componentFilter.timeConsumedFilter.conditionOperator=this.tierTimeConsumedFilterOperator,this.flowMapPrefValue.componentFilter.timeConsumedFilter.value=this.tierTimeConsumedFilterValue):flowMapConfig.preference.componentFilter.timeConsumedFilter=null,this.tierFilterCallsPerMinEnabled?(flowMapConfig.preference.componentFilter.callsPerMinFilter={},flowMapConfig.preference.componentFilter.callsPerMinFilter.conditionOperator=this.tierCallsMinFilterOperator,this.flowMapPrefValue.componentFilter.callsPerMinFilter.value=this.tierCallsMinFilterValue):flowMapConfig.preference.componentFilter.callsPerMinFilter=null,this.tierFilterErrorsPerMinEnabled?(flowMapConfig.preference.componentFilter.errorsPerMinFilter={},flowMapConfig.preference.componentFilter.errorsPerMinFilter.conditionOperator=this.tierErrorsMinFilterOperator,this.flowMapPrefValue.componentFilter.errorsPerMinFilter.value=this.tierErrorsMinFilterValue):flowMapConfig.preference.componentFilter.errorsPerMinFilter=null,flowMapConfig.preference.componentFilter.entityIds=this.tierFilterSpecificTiers?MultiSelect.getSelectedEntityIdsFromSelecteData(this.componentsSelectedData):null,this.backendFilterResponseTimeEnabled?(flowMapConfig.preference.backendFilter.responseTimeFiler={},flowMapConfig.preference.backendFilter.responseTimeFiler.conditionOperator=this.backendResponseTimeFilterOperator,this.flowMapPrefValue.backendFilter.responseTimeFiler.value=this.backendResponseTimeFilterValue):flowMapConfig.preference.backendFilter.responseTimeFiler=null,this.backendFilterCallsPerMinEnabled?(flowMapConfig.preference.backendFilter.callsPerMinFilter={},flowMapConfig.preference.backendFilter.callsPerMinFilter.conditionOperator=this.backendCallsMinFilterOperator,this.flowMapPrefValue.backendFilter.callsPerMinFilter.value=this.backendCallsMinFilterValue):flowMapConfig.preference.backendFilter.callsPerMinFilter=null,this.backendFilterErrorsPerMinEnabled?(flowMapConfig.preference.backendFilter.errorsPerMinFilter={},flowMapConfig.preference.backendFilter.errorsPerMinFilter.conditionOperator=this.backendErrorsMinFilterOperator,this.flowMapPrefValue.backendFilter.errorsPerMinFilter.value=this.backendErrorsMinFilterValue):flowMapConfig.preference.backendFilter.errorsPerMinFilter=null;var backendOptions=this.backendsGridOptions.dataProvider;return flowMapConfig.preference.ungroupableBackends=backendOptions.filter(function(item){return item.ungroupable}).map(function(item){return item.id}),flowMapConfig.preference.backendFilter.entityIds=backendOptions.filter(function(item){return item.hidden}).map(function(item){return item.id}),this.groupBackends&&this.groupBackends.value?(flowMapConfig.preference.groupBackendsByType=this.groupBackends.value,flowMapConfig.preference.minimumBackendGroupSize=this.numberToGroup):flowMapConfig.preference.groupBackendsByType=!1,flowMapConfig},FlowMapConfiguratorController.prototype.saveFilter=function(redrawFlow){var updatedFlowProps,_this=this;updatedFlowProps=this.$scope.adBasicConfigurator?this.flowMapProperties:this.getHtmlFlowPreferenceFromForm(),this.flowMapUiService.setFlowmapProperties(updatedFlowProps).then(function(){redrawFlow&&_this.mainDashboardController.loadFlowMap(updatedFlowProps.mapId)})},FlowMapConfiguratorController.prototype.onEditFlowMap=function(userPreferenceListData){this.selectedUserPreferenceListData=userPreferenceListData,this.mainDashboardController&&this.mainDashboardController.flowmapdata&&(this.flowMapProperties=this.mainDashboardController.flowmapdata.properties,this._flowMapPropertiesCopy=angular.copy(this.flowMapProperties),this.flowMapPrefValue=this.mainDashboardController.flowmapdata.properties.preference,this.setControls()),this.showFlowMapList=!1,this.$element.css("left",24),this.$element.css("top",24),this.$element.draggable({containment:"parent",handle:".adsFlowMapConfiguratorEditorHeaderRow"}),this.fetchTiersAndBackends()},FlowMapConfiguratorController.prototype.triggerClose=function(){this.$element.trigger(EventConstants.UEV_CLOSE)},FlowMapConfiguratorController.prototype.onViewToggled=function(value){angular.isDefined(value)&&(value?(this.fetchFlowMaps(),this.mainDashboardController&&this.mainDashboardController.flowmapdata&&(this.flowMapProperties=this.mainDashboardController.flowmapdata.properties,this.flowMapPrefValue=this.mainDashboardController.flowmapdata.properties.preference,this.setControls()),this.showFlowMapList=!0):this.removeLocalChanges())},FlowMapConfiguratorController.prototype.onSelectFlowMap=function(userPreferenceListData){this.mainDashboardController.loadFlowMap(userPreferenceListData.id),this.triggerClose()},FlowMapConfiguratorController.prototype.openAndEditSelectedFlowMap=function(value){value&&this.onEditSelectedFlowMap()},FlowMapConfiguratorController.prototype.onEditSelectedFlowMap=function(){var _this=this,graph=this.mainDashboardController.flowmapdata;if(graph.properties.ownsFlow||graph.properties.defaultValue)this.onEditFlowMap(this.selectedUserPreferenceListData);else{var controllerLocation="app/view/components/flowmap/copyFlowmapDialog/CopyFlowmapDialogController";require([controllerLocation],function(controller){var modalInstance=_this.$modal.open({templateUrl:"app/view/components/flowmap/copyFlowmapDialog/CopyFlowmapDialogView.html",controller:controller,resolve:{flowmapInstance:function(){return graph}}});modalInstance.result.then(function(setView){setView&&_this.mainDashboardController.fetchDashboardGraphData()},function(){})})}},FlowMapConfiguratorController.prototype.onManageFlowMaps=function(){this.mainDashboardController&&(this.mainDashboardController.manageFlowMaps(),this.triggerClose())},FlowMapConfiguratorController.prototype.onApplyFilters=function(){this.saveFilter(!0)},FlowMapConfiguratorController.prototype.onSave=function(){this.validateFlowmapName()&&(delete this._flowMapPropertiesCopy,this.saveFilter(!0),this.triggerClose())},FlowMapConfiguratorController.prototype.onCancel=function(){this.removeLocalChanges(),this.triggerClose()},FlowMapConfiguratorController.prototype.removeLocalChanges=function(){this._flowMapPropertiesCopy&&(this.flowMapProperties=this._flowMapPropertiesCopy,this.mainDashboardController.flowmapdata.properties=this._flowMapPropertiesCopy,delete this._flowMapPropertiesCopy)},FlowMapConfiguratorController.prototype.getEntityId=function(){return this.mainDashboardController&&this.mainDashboardController.getConfiguratorEntityDefinition()?this.mainDashboardController.getConfiguratorEntityDefinition().entityId:-1},FlowMapConfiguratorController.prototype.getEntityType=function(){return this.mainDashboardController&&this.mainDashboardController.getConfiguratorEntityDefinition()?this.mainDashboardController.getConfiguratorEntityDefinition().entityType:null},FlowMapConfiguratorController.prototype.validateFlowmapName=function(){var flowmapNameValid=!0,errorMsg="";return StringUtils.isNullOrEmptyString(this.flowMapProperties.name)?(flowmapNameValid=!1,errorMsg=this.getString("ms_flowmapNameRequiredErrorMsg")):Util.isSafeString(this.flowMapProperties.name)||(flowmapNameValid=!1,errorMsg=this.getString("ms_safeStringValidationError")),flowmapNameValid||NotificationService.instance().displayError(errorMsg,""),this.flowmapNameForm.flowmapName.$setValidity("invalidName",flowmapNameValid,null),flowmapNameValid
},FlowMapConfiguratorController.$inject=["$scope","$element","$rootScope","$location","resourceManager","notificationService","injectorService","flowMapUiService","applicationUiService","dialogService","$modal"],FlowMapConfiguratorController}(ControllerBase);exports.FlowMapConfiguratorController=FlowMapConfiguratorController,appdynamicsModule.controller("flowMapConfiguratorController",FlowMapConfiguratorController)}),define("app/view/components/flowmap/configure/flowMapConfigurator/FlowMapConfiguratorDirective",["require","exports","./FlowMapConfiguratorController"],function(require,exports,flowMapConfiguratorController){var FlowMapConfiguratorDirective=function(){function FlowMapConfiguratorDirective(){return{restrict:"E",replace:!1,templateUrl:"app/view/components/flowmap/configure/flowMapConfigurator/FlowMapConfiguratorView.html",controller:flowMapConfiguratorController.FlowMapConfiguratorController,scope:{adMainDashboardController:"=",adBasicConfigurator:"=",adDropdownOpen:"=",adOpenToEditor:"=",adSelectedFlowmap:"@"}}}return FlowMapConfiguratorDirective.$inject=[],FlowMapConfiguratorDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-flow-map-configurator"),FlowMapConfiguratorDirective)}),define("app/view/components/chordDiagram/ChordLayout",["require","exports"],function(){var ChordLayout=function(){function ChordLayout(){}return ChordLayout.prototype.layout=function(options,matrix){this.layoutOptions=options,this.chord=d3.layout.chord().padding(.05).sortChords(d3.descending).matrix(matrix)},ChordLayout}();return ChordLayout}),define("app/view/components/chordDiagram/hoverCards/ChordHoverCardBase",["require","exports","../ChordDiagramController"],function(require,exports,ChordDiagramController){var ChordHoverCardBase=function(){function ChordHoverCardBase(hoverCardData,element){var _this=this;this.hoverCardData=hoverCardData,this.element=element,this.beingDestroyed=!1,this.beingCreated=!1,this.beingCreated=!0;var injector=AngularUtil.getADInjector(),$compile=injector.get("$compile"),rootScope=injector.get("$rootScope"),newElem=$("<div class='ads-hover-card-root-above-modal'><div ng-include='\""+this.getHTMLPartialLocation()+"\"'  onload='finishedLoading()' /></div>");this.toolTipScope=rootScope.$new(),this.toolTipScope.$on(NavigationService.UEV_NAVIGATE_TO_FRAGMENT,this.locationChanged.bind(this)),this.toolTipScope.closePopup=function(){_this.closePopup()},this.toolTipScope.finishedLoading=function(){_this.toolTipElement&&!_this.beingDestroyed&&(newElem=$(_this.toolTipElement),_this.layoutCard(element,newElem),setTimeout(function(){_this.beingDestroyed||(_this.layoutCard(element,newElem),d3.select(newElem[0]).transition().duration(ChordHoverCardBase.FADE_DURATION).style("opacity","1"))},0))},this.toolTipScope.formatValue=function(num){return MetricUtil.getMetricDisplay(num,1)===""+ChordDiagramController.MATRIX_PLACEHOLDER_VALUE?"0":MetricUtil.getMetricDisplay(num,1)},this.setupHoverCardData(hoverCardData);var compiledPartial=$compile(newElem);this.toolTipElement=newElem[0],newElem.css("opacity","0"),$(document.body).append(newElem),compiledPartial(this.toolTipScope),ViewUtil.safeApply(this.toolTipScope),this.beingCreated=!1}return ChordHoverCardBase.prototype.setupHoverCardData=function(hoverCardData){hoverCardData&&(this.toolTipScope.metricTypeDisplay=hoverCardData.metricTypeDisplay,this.toolTipScope.stats=hoverCardData.stats,this.toolTipScope.entity=hoverCardData.entity,this.toolTipScope.appId=hoverCardData.appId)},ChordHoverCardBase.prototype.locationChanged=function(){this.toolTipElement&&!this.beingCreated&&this.closePopup()},ChordHoverCardBase.prototype.getHTMLPartialLocation=function(){return""},ChordHoverCardBase.prototype.getAnchorHeight=function(){return 0},ChordHoverCardBase.prototype.getAnchorWidth=function(){return 0},ChordHoverCardBase.prototype.layoutCard=function(targetElement,tooltipElement){if(tooltipElement&&tooltipElement.length){tooltipElement.css("position","absolute"),tooltipElement.css("display","inline-block");var svg=$(targetElement).parents("svg")[0],svgY=(targetElement.getBBox().x,targetElement.getBBox().y),location=$(svg).parent()[0].getBoundingClientRect(),topOfNode=svg.createSVGMatrix();topOfNode.a=1,topOfNode.b=1,topOfNode.c=1,topOfNode.d=1,topOfNode.e=0,topOfNode.f=svgY;var bottomOfNode=svg.createSVGMatrix();bottomOfNode.a=1,bottomOfNode.c=1,bottomOfNode.e=0,bottomOfNode.b=1,bottomOfNode.d=1,bottomOfNode.f=svgY+targetElement.getBBox().height;var matrix=this.getSvgTransformToElement(targetElement,svg);topOfNode=matrix.multiply(topOfNode),bottomOfNode=matrix.multiply(bottomOfNode);var cardX=location.left+topOfNode.e-tooltipElement.outerWidth()/2,cardY=location.top+topOfNode.f-tooltipElement.height();0>cardY?(cardY=location.top+bottomOfNode.f,this.cardDirection="down"):this.cardDirection="up";var right=$(window).width()-tooltipElement.outerWidth();cardX=Math.min(Math.max(0,cardX),right),tooltipElement.css("left",cardX+"px").css("top",cardY+"px")}},ChordHoverCardBase.prototype.closePopup=function(){this.destroy()},ChordHoverCardBase.prototype.destroy=function(){var _this=this;this.toolTipElement&&(this.beingDestroyed=!0,d3.select(this.toolTipElement).transition().duration(ChordHoverCardBase.FADE_DURATION).style("opacity","0").each("end",function(){var scope=angular.element(_this.toolTipElement).scope();$(_this.toolTipElement).remove(),_this.toolTipElement=null,scope.$destroy()}))},ChordHoverCardBase.prototype.getHoverCardDirection=function(){return this.cardDirection},ChordHoverCardBase.prototype.getPopupWidth=function(){var svg=$(this.element).parents("svg")[0],matrix=this.getSvgTransformToElement(svg,this.element);return matrix.a*$(this.toolTipElement).width()},ChordHoverCardBase.prototype.getPopupHeight=function(){var svg=$(this.element).parents("svg")[0],matrix=this.getSvgTransformToElement(svg,this.element);return matrix.a*($(this.toolTipElement).height()+this.getAnchorHeight())},ChordHoverCardBase.prototype.formatValue=function(num){return MetricUtil.getMetricDisplay(num,1)===""+ChordDiagramController.MATRIX_PLACEHOLDER_VALUE?"0":MetricUtil.getMetricDisplay(num,1)},ChordHoverCardBase.prototype.getSvgTransformToElement=function(sourceElement,targetElement){return sourceElement.getTransformToElement?sourceElement.getTransformToElement(targetElement):targetElement.getScreenCTM().inverse().multiply(sourceElement.getScreenCTM())},ChordHoverCardBase.FADE_DURATION=250,ChordHoverCardBase}();exports.ChordHoverCardBase=ChordHoverCardBase});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/chordDiagram/hoverCards/ChordHoverCardController",["require","exports","./ChordHoverCardBase"],function(require,exports,hoverCardBase){var ChordHoverCardController=function(_super){function ChordHoverCardController(data,chordElement){_super.call(this,data,chordElement),this.data=data,this.chordElement=chordElement}return __extends(ChordHoverCardController,_super),ChordHoverCardController.prototype.getHTMLPartialLocation=function(){return"app/view/components/chordDiagram/hoverCards/ChordHoverCard.html"},ChordHoverCardController}(hoverCardBase.ChordHoverCardBase);exports.ChordHoverCardController=ChordHoverCardController}),define("app/view/components/chordDiagram/ChordDiagramController",["require","exports","./ChordLayout","./hoverCards/ChordHoverCardController"],function(require,exports,ChordLayout,ChordHoverCardController){var ChordDiagramController=function(){function ChordDiagramController($scope,$element){var _this=this;this.$scope=$scope,this.$element=$element,this.onChordMouseClick=function(d,index){if(_this.isMouseDown=!1,_this.isMouseMovedWhileDown)return void(_this.isMouseMovedWhileDown=!1);d3.event.stopPropagation(),_this.dimChord(d);var data=_this.createChordTooltipData(d),chordElement=_this.svg.selectAll("."+_this.getChordSelectorClass())[0][0].childNodes[index];_this.createHoverCard(data,chordElement),_this.isMouseMovedWhileDown=!1},this.onChordGroupMouseClick=function(d,index){if(_this.isMouseDown=!1,_this.isMouseMovedWhileDown)return void(_this.isMouseMovedWhileDown=!1);d3.event.stopPropagation(),_this.dimChords(d);var data=_this.createChordGroupTooltipData(d),arcElement=_this.getArcSelection()[0][index];_this.createHoverCard(data,arcElement),_this.isMouseMovedWhileDown=!1},this.chordLayout=new ChordLayout,this.tempChordGroupStats=[],this.savedRotationDegree=0,this.isMouseDown=!1,this.isMouseMovedWhileDown=!1,this.scaleExtent=[FlowMapZoomLevels.LOWER_ZOOM,FlowMapZoomLevels.UPPER_ZOOM],this.lastZoom=-1,this.panningOrZooming=!1,$scope.$watch("adChordDiagramData.stats",this.onDataChanged.bind(this)),$scope.$watch("adChordDiagramData.entities",this.onDataChanged.bind(this)),$scope.$watch("adChordDiagramData.minValue",this.onDataChanged.bind(this)),$scope.$watch("adChordDiagramData.maxValue",this.onDataChanged.bind(this)),$scope.$watch("adShowChords",this.toggleChords.bind(this)),$scope.$watch("svScale.value",this.scaleUpdated.bind(this)),$scope.$watch("adRotateDegree.value",this.rotateCanvas.bind(this)),this.setupZoomer(),this.onViewportResize(),$scope.$on(EventConstants.UEV_LAYOUT_CHANGED,this.onViewportResize.bind(this))}return ChordDiagramController.prototype.setupZoomer=function(){this.zoomer=d3.behavior.zoom(),this.zoomer.translate([0,0]).scale(this.$scope.svScale.value).scaleExtent(this.scaleExtent),this.zoomer.on("zoom",this.zoomed.bind(this)),this.zoomer.on("zoomstart",this.zoomStart.bind(this)),this.zoomer.on("zoomend",this.zoomEnd.bind(this))},ChordDiagramController.prototype.onDataChanged=function(){if(this.$scope.adChordDiagramData&&this.$scope.adChordDiagramData.entities){if(this.entities=this.$scope.adChordDiagramData.entities,this.matrix=this.filterMatrixByRange(this.$scope.adChordDiagramData.stats,this.$scope.adChordDiagramData.minValue,this.$scope.adChordDiagramData.maxValue),!this.hasValidValueInMatrix(this.matrix))return void this.removeAllChords();this.chordLayout.layout(null,this.matrix),this.clearCanvas(),this.onViewportResize(),this.drawChordDiagram(),this.centerDiagram()}},ChordDiagramController.prototype.drawChordDiagram=function(){var _this=this;if(this.$element&&this.chordLayout.chord&&this.$scope.adChordDiagramData&&this.entities){this.layoutInnerRadius=.41*Math.min(this.layoutWidth,this.layoutHeight),this.layoutOuterRadius=1.1*this.layoutInnerRadius;var thisObj=this;this.svg=d3.select(this.$element[0]).append("svg").attr("pointer-events","all").attr("width",this.layoutWidth).attr("height",this.layoutHeight),this.canvas=this.svg.append("g").attr("width","100%").attr("height","100%").attr("transform","translate("+this.layoutWidth/2+","+this.layoutHeight/2+")"),this.saveCurrentTransform();var arcSelection=this.canvas.selectAll("path").data(this.chordLayout.chord.groups()).enter().append("g").append("path").attr("class",this.getChordGroupSelectorClass()).style("fill",function(d){return _this.getEntityColor(d.index)}).style("cursor","pointer").attr("d",d3.svg.arc().innerRadius(this.layoutInnerRadius).outerRadius(this.layoutOuterRadius)).on(MouseEvents.CLICK,this.onChordGroupMouseClick),chordSelection=this.canvas.append("g").attr("class",this.getChordSelectorClass()).selectAll("path").data(this.chordLayout.chord.chords()).enter().append("path").attr("d",d3.svg.chord().radius(this.layoutInnerRadius)).style("fill",function(d){return _this.getEntityColor(d.target.index)}).style("opacity",ChordDiagramController.CHORD_DIM_OPACITY).style("cursor","pointer").on(MouseEvents.CLICK,this.onChordMouseClick),ticks=this.canvas.append("g").attr("class","ads-ticks").selectAll("g").data(this.chordLayout.chord.groups).enter().append("g").selectAll("g").data(this.groupTicks.bind(this)).enter().append("g").attr("transform",function(d){var angle=isNaN(d.angle)?0:d.angle;return"rotate("+(180*angle/Math.PI-90)+")translate("+thisObj.layoutOuterRadius+",0)"});ticks.append("svg:line").attr("x1",1).attr("y1",0).attr("x2",5).attr("y2",0).attr("stroke","#000"),ticks.append("svg:text").attr("x",8).attr("dy",".35em").attr("text-anchor",function(d){return d.angle>Math.PI?"end":null}).attr("transform",function(d){return d.angle>Math.PI?"rotate(180)translate(-16)":null}).text(function(d){return d.label}),this.addMouseTargets(arcSelection),this.addMouseTargets(chordSelection),this.svg.call(this.zoomer)}},ChordDiagramController.prototype.addMouseTargets=function(selection){var _this=this;selection.on(MouseEvents.MOUSE_DOWN,function(){_this.isMouseDown=!0}),selection.on(MouseEvents.MOUSE_MOVE,function(){_this.isMouseMovedWhileDown=_this.isMouseDown}),selection.on(MouseEvents.MOUSE_UP,function(){_this.isMouseDown=!1})},ChordDiagramController.prototype.getEntityColor=function(entityIndex){if(!Util.isDefAndNotEmptyArray(this.entities))return"#000";var entityName=this.entities[entityIndex].name;return ColorUtil.getRgbColorForString(entityName)},ChordDiagramController.prototype.onViewportResize=function(){this.layoutWidth=this.$element.width(),this.layoutHeight=this.$element.height(),this.svg&&this.svg.attr({width:this.layoutWidth,height:this.layoutHeight,viewBox:"0 0 "+this.layoutWidth+" "+this.layoutHeight}),this.canvas&&this.updateCanvasTransform(this.$scope.svScale.value,this.zoomer.translate())},ChordDiagramController.prototype.groupTicks=function(d){var k=(d.endAngle-d.startAngle)/d.value;return[{angle:d.value*k/2+d.startAngle,label:this.entities[d.index].name}]},ChordDiagramController.prototype.getChordSelectorClass=function(){return"ads-chord"},ChordDiagramController.prototype.getChordGroupSelectorClass=function(){return"ads-chord-group"},ChordDiagramController.prototype.getHoverCardSelectorClass=function(){return"adsHoverCard"},ChordDiagramController.prototype.getChordSelection=function(){return this.svg.selectAll("."+this.getChordSelectorClass()+" path")},ChordDiagramController.prototype.getArcSelection=function(){return this.svg.selectAll("."+this.getChordGroupSelectorClass())},ChordDiagramController.prototype.dimChords=function(d){this.tempChordGroupStats=[];var thisObj=this;this.getChordSelection().transition().style("opacity",function(p){return p.source?p.source.index!==d.index&&p.target.index!==d.index?ChordDiagramController.CHORD_DIM_OPACITY:((p.source.value!==ChordDiagramController.MATRIX_PLACEHOLDER_VALUE||p.target.value!==ChordDiagramController.MATRIX_PLACEHOLDER_VALUE)&&(thisObj.tempChordGroupStats=thisObj.tempChordGroupStats.concat(thisObj.getChordStats(p))),ChordDiagramController.CHORD_DISPLAY_OPACITY):void 0})},ChordDiagramController.prototype.dimChord=function(d){this.getChordSelection().transition().style("opacity",function(chord){return chord.source&&d.source?chord.source.index===d.source.index&&chord.target.index===d.target.index?ChordDiagramController.CHORD_DISPLAY_OPACITY:ChordDiagramController.CHORD_DIM_OPACITY:void 0})},ChordDiagramController.prototype.toggleChords=function(){this.svg&&(this.$scope.adShowChords?this.showAllChords():this.hideAllChords())},ChordDiagramController.prototype.removeAllChords=function(){this.svg&&this.getChordSelection().remove()},ChordDiagramController.prototype.hideAllChords=function(){this.svg&&this.getChordSelection().transition().style("visibility","hidden")},ChordDiagramController.prototype.showAllChords=function(){this.svg&&this.getChordSelection().transition().style("visibility","visible")},ChordDiagramController.prototype.createChordTooltipData=function(d){var data={};return data.metricTypeDisplay=this.$scope.adChordDiagramData.metricType,data.stats=this.getChordStats(d),data.appId=(new URLParams).applicationId(),data},ChordDiagramController.prototype.createChordGroupTooltipData=function(d){var data={};return data.metricTypeDisplay=this.$scope.adChordDiagramData.metricType,data.stats=this.tempChordGroupStats,data.appId=(new URLParams).applicationId(),data.entity=this.entities[d.index],data},ChordDiagramController.prototype.getChordStats=function(d){var stats=[];return stats.push({source:this.entities[d.source.index],target:this.entities[d.target.index],outgoingMetricValue:d.source.value,incomingMetricValue:d.target.value}),stats},ChordDiagramController.prototype.createHoverCard=function(data,element){d3.selectAll("."+this.getHoverCardSelectorClass()).remove();var card=new ChordHoverCardController.ChordHoverCardController(data,element);$(document).on(MouseEvents.CLICK,null,card,this.offHoverCardClickHandler)},ChordDiagramController.prototype.offHoverCardClickHandler=function(event){var card=event.data;Util.isDefAndNotNull(card)&&ViewUtil.isEventEmmitedFromWithin(event,$(card.toolTipElement))===!1&&card.closePopup()},ChordDiagramController.prototype.filterMatrixByRange=function(matrix,min,max){for(var rtn=new Array(matrix.length),i=0;i<matrix.length;i++){rtn[i]=new Array(matrix.length);for(var j=0;j<matrix.length;j++)rtn[i][j]=matrix[i][j]}for(var i=0;i<matrix.length;i++)for(var j=0;j<matrix.length;j++){var value=rtn[i][j];(!value||-1===value||!isNaN(min)&&min>value||!isNaN(max)&&value>max)&&(rtn[i][j]=ChordDiagramController.MATRIX_PLACEHOLDER_VALUE)}return rtn},ChordDiagramController.prototype.hasValidValueInMatrix=function(matrix){for(var i=0;i<matrix.length;i++)for(var j=0;j<matrix.length;j++)if(matrix[i][j]!==ChordDiagramController.MATRIX_PLACEHOLDER_VALUE)return!0;return!1},ChordDiagramController.prototype.clearCanvas=function(){this.$element.html("")},ChordDiagramController.prototype.rotateCanvas=function(){this.canvas&&(this.canvas.attr("transform","translate("+this.savedPosition.x+","+this.savedPosition.y+") scale("+this.lastZoom+") rotate("+this.$scope.adRotateDegree.value+")"),this.saveCurrentTransform())},ChordDiagramController.prototype.updateCanvasTransform=function(newScale,translate){(isNaN(translate[0])||isNaN(translate[1])||isNaN(newScale))&&ADLoggerService.error("Invalid params to updateCanvasTransform");var bbox;this.cachedBBox?bbox=this.cachedBBox:(bbox=this.canvas[0][0].getBBox(),this.cachedBBox=bbox);var elementWidth=this.layoutWidth,elementHeight=this.layoutHeight,oldLowerBound=this.$scope.svScale.lowerBound;newScale=this.calculateZoomoutFactor(bbox,newScale,elementWidth,elementHeight);var canvasWidth=bbox.width*newScale,canvasHeight=bbox.height*newScale,canvasAspect=canvasWidth/canvasHeight,screenAspect=elementWidth/elementHeight,xPrime=translate[0],yPrime=translate[1],left=-bbox.x*newScale,right=-bbox.x*newScale,top=-bbox.y*newScale,bottom=-bbox.y*newScale;elementWidth>canvasWidth&&elementHeight>canvasHeight?(right+=-(canvasWidth-elementWidth),bottom+=-(canvasHeight-elementHeight),xPrime=Math.min(right,Math.max(left,xPrime)),yPrime=Math.min(bottom,Math.max(top,yPrime))):canvasAspect>screenAspect?canvasHeight>elementHeight?(right+=-(canvasWidth-elementWidth),bottom+=-(canvasHeight-elementHeight),xPrime=Math.max(right,Math.min(left,xPrime)),yPrime=Math.max(bottom,Math.min(top,yPrime))):(right+=-(canvasWidth-elementWidth),bottom+=elementHeight-canvasHeight,xPrime=Math.max(right,Math.min(left,xPrime)),yPrime=Math.max(top,Math.min(bottom,yPrime))):canvasWidth>elementWidth?(right+=-(canvasWidth-elementWidth),bottom+=-(canvasHeight-elementHeight),xPrime=Math.max(right,Math.min(left,xPrime)),yPrime=Math.max(bottom,Math.min(top,yPrime))):(right+=elementWidth-canvasWidth,bottom+=-(canvasHeight-elementHeight),xPrime=Math.max(left,Math.min(right,xPrime)),yPrime=Math.max(bottom,Math.min(top,yPrime))),this.zoomer.scale(newScale).translate([xPrime,yPrime]),this.canvas.attr("transform","translate("+xPrime+", "+yPrime+") scale("+newScale+") rotate("+this.savedRotationDegree+")");var needsApply=!1;(this.$scope.svScale.value!=newScale||oldLowerBound!=this.$scope.svScale.lowerBound)&&(needsApply=!0),this.$scope.svScale.value=newScale,FlowMapZoomLevels.updateZoomLevelDetail(!1,newScale,this.lastZoom,this.canvas),this.lastZoom=this.$scope.svScale.value,needsApply&&ViewUtil.safeDigest(this.$scope.$parent.$parent),this.savedPosition.x=xPrime,this.savedPosition.y=yPrime},ChordDiagramController.prototype.centerDiagram=function(){var newScale=this.calculateInitialZoom(),boundingRect=this.canvas[0][0].getBBox(),scaledWidth=boundingRect.width*newScale,scaledHeight=boundingRect.height*newScale,scaledX=boundingRect.x*newScale,scaledY=boundingRect.y*newScale,canvasWidth=this.layoutWidth,canvasHeight=this.layoutHeight,translateX=-scaledX+(canvasWidth-scaledWidth)/2,translateY=-scaledY+(canvasHeight-scaledHeight)/2;this.cachedBBox=null,this.updateCanvasTransform(newScale,[translateX,translateY])},ChordDiagramController.prototype.calculateInitialZoom=function(){var boundingRect=this.canvas[0][0].getBBox(),containerWidth=this.layoutWidth,containerHeight=this.layoutHeight,contentWidth=boundingRect.width,contentHeight=boundingRect.height,optimalZoomOut=Math.min(1.25,containerWidth/contentWidth,containerHeight/contentHeight);return optimalZoomOut=this.calculateZoomoutFactor(boundingRect,optimalZoomOut,containerWidth,containerHeight)},ChordDiagramController.prototype.calculateZoomoutFactor=function(bbox,initialZoom,canvasWidth,canvasHeight){var minScaleX=canvasWidth/FlowMapZoomLevels.ZOOM_OUT_FACTOR/bbox.width,minScaleY=canvasHeight/FlowMapZoomLevels.ZOOM_OUT_FACTOR/bbox.height,minScale=Math.min(minScaleX,minScaleY);return this.scaleExtent[0]=minScale,this.zoomer.scaleExtent(this.scaleExtent),this.$scope.svScale.lowerBound=this.scaleExtent[0],Math.max(Math.min(Math.max(minScale,initialZoom),FlowMapZoomLevels.UPPER_ZOOM),FlowMapZoomLevels.LOWER_ZOOM)},ChordDiagramController.prototype.scaleUpdated=function(newScale){if(newScale&&this.canvas&&this.lastZoom!=newScale){var canvasWidthHalf=this.layoutWidth/2,canvasHeightHalf=this.layoutHeight/2,center={x:canvasWidthHalf,y:canvasHeightHalf},d3Translation=this.zoomer.translate(),view={x:d3Translation[0],y:d3Translation[1]},translate0={x:(center.x-view.x)/this.lastZoom,y:(center.y-view.y)/this.lastZoom};translate0.x=translate0.x*newScale+view.x,translate0.y=translate0.y*newScale+view.y,view.x+=center.x-translate0.x,view.y+=center.y-translate0.y,this.updateCanvasTransform(newScale,[view.x,view.y]),this.zoomEnd()}},ChordDiagramController.prototype.zoomed=function(event){event||(event=d3.event),event&&event.sourceEvent&&0!==event.sourceEvent.button||this.updateCanvasTransform(event.scale,event.translate)},ChordDiagramController.prototype.zoomStart=function(){this.panningOrZooming=!0},ChordDiagramController.prototype.zoomEnd=function(){this.panningOrZooming=!1,this.saveCurrentTransform()},ChordDiagramController.prototype.saveCurrentTransform=function(){if(this.canvas){var canvasTransform=this.getCurrentTransform();this.savedPosition=canvasTransform.translate,this.savedRotationDegree=this.$scope.adRotateDegree.value}},ChordDiagramController.prototype.getCurrentTransform=function(){var matrix=this.canvas[0][0].transform.baseVal.consolidate().matrix;return new Transform2D(matrix)},ChordDiagramController.CHORD_DISPLAY_OPACITY=.9,ChordDiagramController.CHORD_DIM_OPACITY=.1,ChordDiagramController.MATRIX_PLACEHOLDER_VALUE=.001,ChordDiagramController.DEBUG=!1,ChordDiagramController.$inject=["$scope","$element"],ChordDiagramController}();return ChordDiagramController}),define("app/view/components/chordDiagram/ChordDiagramDirective",["require","exports","./ChordDiagramController"],function(require,exports,ChordDiagramController){var ChordDiagramDirective=function(){function ChordDiagramDirective(){return{restrict:"AE",scope:{svScale:"=",adChordDiagramData:"=",adShowChords:"=",adRotateDegree:"="},controller:ChordDiagramController}}return ChordDiagramDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-chord-diagram"),ChordDiagramDirective)});var GeoMapGradients=function(){function GeoMapGradients(){}return GeoMapGradients.DEFAULT_DATA_POINT_RANGES=[500,700,1e3],GeoMapGradients.getGradientColor=function(metricValue){return metricValue<GeoMapGradients.DEFAULT_DATA_POINT_RANGES[0]?"green":metricValue<GeoMapGradients.DEFAULT_DATA_POINT_RANGES[1]?"#f28c10":"#d52828"},GeoMapGradients.BackgroundGradient=function(svg){var gradient=svg.append("svg:defs").append("svg:radialGradient").attr("id","gradient-background").attr("cx","50%").attr("cy","50%").attr("r","50%").attr("fx","50%").attr("fy","50%");return gradient.append("svg:stop").attr("offset","0%").attr("stop-color","rgb(38, 145, 253)").attr("stop-opacity",1),gradient.append("svg:stop").attr("offset","100%").attr("stop-color","#170305").attr("stop-opacity",1),gradient},GeoMapGradients.DataPointBlur=function(svg){var blur=svg.append("svg:defs").append("svg:filter").attr("id","dataPointCircleBlur").attr("x","0").attr("y","0");blur.append("svg:fegaussianblur").attr("in","SourceGraphic").attr("stdDeviation","5")},GeoMapGradients.DataPointGradient=function(svg,region,responseTime){var gradient=svg.append("svg:defs").append("svg:radialGradient").attr("id","gradient-"+region).attr("cx","50%").attr("cy","50%").attr("r","50%").attr("fx","50%").attr("fy","50%");return gradient.append("svg:stop").attr("offset","0%").attr("stop-color","rgb(200, 200, 200)").attr("stop-opacity",.75),gradient.append("svg:stop").attr("offset","100%").attr("stop-color",GeoMapGradients.getGradientColor(responseTime)).attr("stop-opacity",.25),gradient},GeoMapGradients}(),GeoMap=function(){function GeoMap(){return{restrict:"E",replace:!0,scope:{geoData:"=",noGlobe:"=",isHeatmap:"="},link:function($scope){function changeProjectionToMap(summaries){if(projection==projectionGlobe){$("#map").addClass("no-globe"),clearTimeout(globeRotationIntervalId),projection=projectionMercator,path.projection(projectionMercator),g.selectAll("path").transition().duration(3e3).attr("d",path),g.selectAll("circle").transition().duration(3e3);for(var summary in summaries){var circleSelector=g.select("circle[name='"+summaries[summary].region+"']");circleSelector.style("visibility","visible").attr("transform","translate("+projection([summaries[summary].geoCode.longitude,summaries[summary].geoCode.latitude])+")")}}}function renderMap(){d3.json("GeoMap_TopoJSON/countries.topo.json",function(error,regions){var dateStart=Date.now(),features=topojson.feature(regions,regions.objects.countries).features,summaries=(g.append("g").attr("id","countries").selectAll("path").data(features).enter().append("path").attr("id",function(d){return d.id}).attr("name",function(d){return d.properties.name}).attr("d",path).on("click",country_clicked),$scope.geoData),tooltip=d3.select("body").append("div").attr("class","adGeoMapTooltip").style("position","absolute").style("z-index","10").style("visibility","hidden"),maxTotalRequests=getMaxTotalRequestValue(summaries);for(var summary in summaries)if(summaries[summary]&&summaries[summary].geoCode){var region=summaries[summary].geoCode.name,dataObject=d3.select("path[name='"+region+"']");if($scope.isHeatmap)dataObject.attr("style","fill:"+GeoMapGradients.getGradientColor(summaries[summary].responseTime.value)),dataObject.on("click",function(){changeProjectionToMap(summaries)});else{var regionNoWhiteSpace=region.replace(" ","-"),currentTotalRequestsValue=summaries[summary].totalRequests.value,circleRadiusSize=currentTotalRequestsValue/maxTotalRequests*MAX_RADIUS_DATA_POINT_CIRCLE;GeoMapGradients.DataPointGradient(svg,regionNoWhiteSpace,summaries[summary].responseTime.value),currentTotalRequestsValue>0&&g.append("circle").attr("r",2*circleRadiusSize).attr("transform","translate("+projection([summaries[summary].geoCode.longitude,summaries[summary].geoCode.latitude])+")").attr("class","adsGeoMapDataPoint").attr("name",region).attr("fill","url(#gradient-"+regionNoWhiteSpace+")").attr("filter","url(#dataPointCircleBlur)").on("mouseover",function(thisRegion){return function(){return tooltip.html(getTooltipHTML({region:thisRegion,totalRequests:currentTotalRequestsValue})),tooltip.style("top",event.pageY-10+"px"),tooltip.style("left",event.pageX+15+"px"),tooltip.style("visibility","visible")}}(region)).on("click",function(){changeProjectionToMap(summaries)}).on("mouseout",function(){tooltip.style("visibility","hidden")})}}projection==projectionGlobe&&(globeRotationIntervalId=setInterval(function(){var angle=.005*(Date.now()-dateStart);projection.rotate([angle,0,0]),g.selectAll("#countries>path").attr("d",path.projection(projection));for(var summary in summaries){var pathVisible=!!g.select("path[name='"+summaries[summary].region+"']").attr("d"),circleSelector=g.select("circle[name='"+summaries[summary].region+"']");pathVisible?circleSelector.style("visibility","visible").attr("transform","translate("+projection([summaries[summary].geoCode.longitude,summaries[summary].geoCode.latitude])+")"):circleSelector.style("visibility","hidden")}},10))})}function zoom(xyz){g.transition().duration(750).attr("transform","translate("+projectionMercator.translate()+")scale("+xyz[2]+")translate(-"+xyz[0]+",-"+xyz[1]+")").selectAll("#countries, #states, #cities").style("stroke-width",1/xyz[2]+"px").selectAll(".city").attr("d",path.pointRadius(20/xyz[2]))}function get_xyz(d){var bounds=path.bounds(d),w_scale=(bounds[1][0]-bounds[0][0])/width,h_scale=(bounds[1][1]-bounds[0][1])/height,z=.96/Math.max(w_scale,h_scale),x=(bounds[1][0]+bounds[0][0])/2,y=(bounds[1][1]+bounds[0][1])/2+height/z/6;return[x,y,z]}function country_clicked(d){if(g.selectAll("#states, #cities").remove(),state=null,country&&g.selectAll("#"+country.id).style("display",null),d&&country!==d){var xyz=get_xyz(d);country=d,"USA"==d.id||"JPN"==d.id||"IND"==d.id?(console.log("Got data for "+d.id),d3.json("GeoMap_TopoJSON/states_"+d.id.toLowerCase()+".topo.json",function(error,us){console.log("Got data for "+d.id),console.log(us),g.append("g").attr("id","states").selectAll("path").data(topojson.feature(us,us.objects.states).features).enter().append("path").attr("id",function(d){return d.id}).attr("class","active").attr("d",path),console.log("Processed data for "+d.id),zoom(xyz),g.selectAll("#"+d.id).style("display","none")})):zoom(xyz)}else{var xyz=[width/2,height/1.5,1];country=null,zoom(xyz)}}function getTooltipHTML(data){return t.apply({region:data.region,totalRequests:data.totalRequests})}function getMaxTotalRequestValue(summaries){var returnValue=0;for(var s in summaries)summaries[s].totalRequests.value>returnValue&&(returnValue=summaries[s].totalRequests.value);return returnValue}$scope.$watch("geoData",function(){$scope.geoData&&renderMap()}),$scope.$watch("noGlobe",function(){$scope.noGlobe&&$("#map").addClass("no-globe")});var country,state,MAX_RADIUS_DATA_POINT_CIRCLE=25,globeRotationIntervalId=0,width=$("#map").width(),height=$("#map").height(),projectionMercator=d3.geo.mercator().scale(135).translate([width/2,height/1.5]),projectionGlobe=d3.geo.orthographic().scale(240).center([0,0]).translate([width/2,height/1.5]).clipAngle(90),projection=$scope.noGlobe?projectionMercator:projectionGlobe,path=d3.geo.path().projection(projection),svg=d3.select("#map").append("svg").attr("width",width).attr("height",height);GeoMapGradients.BackgroundGradient(svg),svg.append("rect").attr("width",width).attr("height",height).attr("style","fill:url(#gradient-background);").on("click",country_clicked);var g=svg.append("g").attr("transform","translate(0, -100)"),globe={type:"Sphere"};g.append("path").datum(globe).attr("class","foreground").attr("d",path);var t=Ext.Template.create();t.set("<div>{region}</div>","<div>Total Requests: {totalRequests}</div>")}}}return GeoMap}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-geomap"),GeoMap),define("app/view/components/geoMap/GeoMap",function(){});var Globe=function(){function Globe(){return{restrict:"E",replace:!0,scope:{geoData:"="},link:function($scope){function renderGlobe(){function latLongToVector(lat,lon,radius){var phi=lat*Math.PI/180,theta=lon*Math.PI/180,x=radius*Math.cos(phi)*Math.cos(theta),z=-radius*Math.cos(phi)*Math.sin(theta),y=radius*Math.sin(phi);return new THREE.Vector3(x,y,z)}function getGradientColor(metricValue){return 500>metricValue?9291327:700>metricValue?15895568:13969448}var WIDTH=1600,HEIGHT=1200,SPHERE_RADIUS=50,scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(70,WIDTH/HEIGHT,.1,1e3);
scene.add(camera);var renderer=new THREE.WebGLRenderer;renderer.setSize(WIDTH,HEIGHT);var mapDiv=document.getElementById("map");mapDiv.appendChild(renderer.domElement);var bitmap=new Image;bitmap.src="globe/world-big-2-grey.jpg",bitmap.onerror=function(){};var texture=THREE.ImageUtils.loadTexture(bitmap.src),geometry=new THREE.SphereGeometry(SPHERE_RADIUS,16,50),material=new THREE.MeshLambertMaterial({map:texture,transparent:!0,color:1340350}),sphere=new THREE.Mesh(geometry,material);scene.add(sphere),camera.position.z=150;var pointLight=new THREE.PointLight(16777215,10);pointLight.position.set(0,50,300),scene.add(pointLight);var pointLight=new THREE.PointLight(16777215,10);pointLight.position.set(0,0,300),scene.add(pointLight);var render=function(){requestAnimationFrame(render),sphere.rotation.y+=.005,renderer.render(scene,camera)},maxTotalRequests=0;for(var d in $scope.geoData)+$scope.geoData[d].totalRequests.value>maxTotalRequests&&(maxTotalRequests=+$scope.geoData[d].areaValue.value);for(var d in $scope.geoData){var datum=$scope.geoData[d],position=latLongToVector(datum.geoCode.latitude,datum.geoCode.longitude,SPHERE_RADIUS),color=(new THREE.MeshLambertMaterial({color:14301240,emissive:14301240}),getGradientColor(datum.areaValue.value)),boxMaterialFace=new THREE.MeshFaceMaterial([new THREE.MeshBasicMaterial({color:color}),new THREE.MeshBasicMaterial({color:color}),new THREE.MeshBasicMaterial({color:color}),new THREE.MeshBasicMaterial({color:color}),new THREE.MeshBasicMaterial({color:color}),new THREE.MeshBasicMaterial({color:color})]),box=new THREE.Mesh(new THREE.BoxGeometry(.3,.5,datum.areaValue.value/maxTotalRequests*100),boxMaterialFace);box.name=datum.region,box.position.set(position.x,position.y,position.z),box.lookAt(new THREE.Vector3(0,0,0)),sphere.add(box)}var geometryStars=new THREE.SphereGeometry(180,32,32),materialStars=new THREE.MeshBasicMaterial;materialStars.map=THREE.ImageUtils.loadTexture("globe/star-field.jpg"),materialStars.side=THREE.BackSide;var meshStars=new THREE.Mesh(geometryStars,materialStars);scene.add(meshStars),render()}$scope.$watch("geoData",function(){$scope.geoData&&renderGlobe()})}}}return Globe}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-globe"),Globe),define("app/view/components/geoMap/Globe",function(){});var GeoMapAnalyticsDirective=function(){function GeoMapAnalyticsDirective(){return{restrict:"E",replace:!0,scope:{geoData:"=",noGlobe:"=",isHeatmap:"=",selectedCountry:"=",selectedState:"="},controller:"GeoMapController",link:function(scope){scope.$watch("selectedCountry",function(){})}}}return GeoMapAnalyticsDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-geomap-analytics"),GeoMapAnalyticsDirective),define("app/view/components/geoMap/GeoMapAnalyticsDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/geoMap/GeoMapController",["require","exports"],function(require,exports){var GeoMapGradients=function(){function GeoMapGradients(){}return GeoMapGradients.getGradientColorForValueAgainstMax=function(metricValue,maxValue){var maxLoadColor="#2692FE",color=d3.rgb(maxLoadColor);return color.darker(3*Math.log(2.162277*(1-metricValue/maxValue)+1))},GeoMapGradients.DEFAULT_DATA_POINT_RANGES=[500,700,1e3],GeoMapGradients.getGradientColor=function(metricValue){return metricValue<GeoMapGradients.DEFAULT_DATA_POINT_RANGES[0]?"green":metricValue<GeoMapGradients.DEFAULT_DATA_POINT_RANGES[1]?"#f28c10":"#d52828"},GeoMapGradients.BackgroundGradient=function(svg){var gradient=svg.append("svg:defs").append("svg:radialGradient").attr("id","gradient-background").attr("cx","50%").attr("cy","50%").attr("r","50%").attr("fx","50%").attr("fy","50%");return gradient.append("svg:stop").attr("offset","0%").attr("stop-color","rgb(38, 145, 253)").attr("stop-opacity",1),gradient.append("svg:stop").attr("offset","100%").attr("stop-color","#170305").attr("stop-opacity",1),gradient},GeoMapGradients.DataPointBlur=function(svg){var blur=svg.append("svg:defs").append("svg:filter").attr("id","dataPointCircleBlur").attr("x","0").attr("y","0");blur.append("svg:fegaussianblur").attr("in","SourceGraphic").attr("stdDeviation","5")},GeoMapGradients.DataPointGradient=function(svg,region,responseTime){var gradient=svg.append("svg:defs").append("svg:radialGradient").attr("id","gradient-"+region).attr("cx","50%").attr("cy","50%").attr("r","50%").attr("fx","50%").attr("fy","50%");return gradient.append("svg:stop").attr("offset","0%").attr("stop-color","rgb(200, 200, 200)").attr("stop-opacity",.75),gradient.append("svg:stop").attr("offset","100%").attr("stop-color",GeoMapGradients.getGradientColor(responseTime)).attr("stop-opacity",.25),gradient},GeoMapGradients}(),GeoMapController=function(_super){function GeoMapController($scope,$rootScope,$location,$timeout,$q,resourceManager,notificationService,injectorService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.$timeout=$timeout,this.$q=$q,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.MAX_RADIUS_DATA_POINT_CIRCLE=25,this.globeRotationIntervalId=0,this.resolveCurrentSelectionAndZoom=_.throttle(function(){if(_this.country||_this.$scope.selectedCountry){var country=null!=_this.country&&void 0!=_this.country?_this.country.properties.name:_this.$scope.selectedCountry,currentCountryObject=d3.select('path[name="'+country.toLowerCase()+'"]').data()[0];_this.country!=currentCountryObject&&_this.country_clicked(currentCountryObject),_this.zoom(_this.get_xyz(_this.country)),_this.country&&_this.drawnCountry!=_this.country.id?_this.renderStates().then(function(){_this.afterDrawStates()}):_this.afterDrawStates()}else _this.resetZoom()},100),$scope.controller=this,this.init(),this.initScope(),this.drawMap()}return __extends(GeoMapController,_super),GeoMapController.prototype.initScope=function(){var _this=this;this.geoData=this.$scope.geoData,this.noGlobe=this.$scope.noGlobe,this.noGlobe&&$("#map").addClass("no-globe"),this.isHeatmap=this.$scope.isHeatmap,this.$scope.$watch("geoData",function(){_this.geoData=_this.$scope.geoData,_this.geoData&&_this.updateData()}),this.$scope.$watch("noGlobe",function(){_this.noGlobe=_this.$scope.noGlobe,_this.noGlobe&&$("#map").addClass("no-globe")}),this.$scope.$watch("isHeatmap",function(){_this.isHeatmap=_this.$scope.isHeatmap}),this.$scope.$watch("controller.country",function(newValue,oldValue){oldValue==newValue||newValue&&oldValue&&newValue.properties.name==oldValue.properties.name||(_this.$scope.selectedCountry=_this.country?_this.country.properties.name.toLowerCase():null,window.setTimeout(function(){ViewUtil.safeDigest(_this.$scope.$root)}))}),this.$scope.$watch("controller.state",function(newValue,oldValue){oldValue!=newValue&&(_this.$scope.selectedState=_this.state?_this.state.properties.name.toLowerCase():null,window.setTimeout(function(){ViewUtil.safeDigest(_this.$scope.$root)}))}),this.$scope.$watch("selectedCountry",function(newValue,oldValue){newValue!=oldValue&&(null==newValue&&(_this.country&&_this.g.selectAll("#"+_this.country.id).style("display",null),_this.country=null),_this.resolveCurrentSelectionAndZoom())}),this.$scope.$watch("selectedState",function(newValue,oldValue){newValue!=oldValue&&(null==newValue&&(_this.state=null),_this.resolveCurrentSelectionAndZoom())}),$(window).resize(function(){_.throttle(function(){_this.adjustSizing()},100)()})},GeoMapController.prototype.adjustSizing=function(){var _this=this;this.svg&&(this.svg.attr("viewBox","0 0 "+$("#map").width()+" "+$("#map").height()),window.setTimeout(function(){_this.state?_this.zoom(_this.get_xyz(_this.state)):_this.country?_this.zoom(_this.get_xyz(_this.country)):_this.resetZoom()},100))},GeoMapController.prototype.init=function(){this.template=Ext.Template.create(),this.template.set("<div>{region}</div><div>Total Requests: {totalRequests}</div>")},GeoMapController.prototype.drawMap=function(){var _this=this;this.svg&&this.svg.remove(),this.width=$("#map").width(),this.height=$("#map").height(),this.projectionMercator=d3.geo.mercator().scale(135).translate([this.width/2,this.height/1.5]),this.projectionGlobe=d3.geo.orthographic().scale(240).center([0,0]).translate([this.width/2,this.height/1.5]).clipAngle(90),this.projection=this.noGlobe?this.projectionMercator:this.projectionGlobe,this.path=d3.geo.path().projection(this.projection),this.svg=d3.select("#map").append("svg").attr("viewBox","0 0 "+this.width+" "+this.height).style("overflow","hidden"),GeoMapGradients.BackgroundGradient(this.svg),this.svg.append("rect").attr("width","100%").attr("height","100%").attr("style","fill:url(#gradient-background);").on("click",function(d){_this.country_clicked(d)}),this.g=this.svg.append("g").attr("transform","translate(0, -100)"),this.globe={type:"Sphere"},this.g.append("path").datum(this.globe).attr("class","foreground").attr("d",this.path).attr("width","100%").attr("height","100%").on("click",function(){_this.resetZoom()}),this.tooltip||(this.tooltip=d3.select("body").append("div").attr("class","adGeoMapTooltip").style("position","absolute").style("z-index","10").style("visibility","hidden")),d3.json("GeoMap_TopoJSON/countries.topo.json",function(error,regions){_this.dateStart=Date.now();_this.g.append("g").attr("id","countries").selectAll("path").data(topojson.feature(regions,regions.objects.countries).features).enter().append("path").attr("id",function(d){return d.id}).attr("name",function(d){return d.properties.name.toLowerCase()}).attr("d",_this.path).on("click",function(d){_this.country_clicked(d)});_this.updateData()})},GeoMapController.prototype.afterDrawStates=function(){var state=null!=this.state&&void 0!=this.state?this.state.properties.name:this.$scope.selectedState;if(void 0!=state&&null!=state){var dataObject=d3.select('path[name="'+state.toLowerCase()+'"]').data()[0];this.state!=dataObject&&this.state_clicked(state),this.zoom(this.get_xyz(this.state))}},GeoMapController.prototype.changeProjectionToMap=function(summaries){if(this.projection==this.projectionGlobe){$("#map").addClass("no-globe"),clearTimeout(this.globeRotationIntervalId),this.projection=this.projectionMercator,this.path.projection(this.projectionMercator),this.g.selectAll("path").transition().duration(3e3).attr("d",this.path),this.g.selectAll("circle").transition().duration(3e3);for(var summary in summaries){var circleSelector=this.g.select("circle[name='"+summaries[summary].region+"']");circleSelector.style("visibility","visible").attr("transform","translate("+this.projection([summaries[summary].geoCode.longitude,summaries[summary].geoCode.latitude])+")")}}},GeoMapController.prototype.updateData=function(){var _this=this,summaries=this.$scope.geoData,maxTotalRequests=this.getMaxTotalRequestValue(summaries);this.$scope.isHeatmap||d3.selectAll("#adsGepMapDataPoint").remove(),d3.selectAll("#countries, #states").selectAll("path").style("fill",null);for(var summary in summaries)if(summaries[summary]&&summaries[summary].geoCode){var region=summaries[summary].geoCode.name,dataObject=d3.select('path[name="'+region.replace("'","'").toLowerCase()+'"]');if(this.$scope.isHeatmap)dataObject.style("fill",""+GeoMapGradients.getGradientColorForValueAgainstMax(summaries[summary].totalRequests.value,maxTotalRequests)),dataObject.on("mouseover",function(thisRegion,currentTotalRequestsValue){return function(){return _this.tooltip.html(_this.getTooltipHTML({region:thisRegion,totalRequests:currentTotalRequestsValue})),_this.tooltip.style("top",event.pageY-10+"px"),_this.tooltip.style("left",event.pageX+15+"px"),_this.tooltip.style("visibility","visible")}}(region,summaries[summary].totalRequests.value)),dataObject.on("mouseout",function(){_this.tooltip.style("visibility","hidden")});else{var regionNoWhiteSpace=region.replace(" ","-"),currentTotalRequestsValue=summaries[summary].totalRequests.value,circleRadiusSize=currentTotalRequestsValue/maxTotalRequests*this.MAX_RADIUS_DATA_POINT_CIRCLE;GeoMapGradients.DataPointGradient(this.svg,regionNoWhiteSpace,summaries[summary].responseTime.value),currentTotalRequestsValue>0&&this.g.append("circle").attr("r",2*circleRadiusSize).attr("transform","translate("+this.projection([summaries[summary].geoCode.longitude,summaries[summary].geoCode.latitude])+")").attr("class","adsGeoMapDataPoint").attr("name",region).attr("fill","url(#gradient-"+regionNoWhiteSpace+")").attr("filter","url(#dataPointCircleBlur)").on("mouseover",function(thisRegion){return function(){return _this.tooltip.html(_this.getTooltipHTML({region:thisRegion,totalRequests:currentTotalRequestsValue})),_this.tooltip.style("top",event.pageY-10+"px"),_this.tooltip.style("left",event.pageX+15+"px"),_this.tooltip.style("visibility","visible")}}(region)).on("click",function(){_this.changeProjectionToMap(summaries)}).on("mouseout",function(){_this.tooltip.style("visibility","hidden")})}}this.projection==this.projectionGlobe&&(this.globeRotationIntervalId=setInterval(function(){var angle=.005*(Date.now()-_this.dateStart);_this.projection.rotate([angle,0,0]),_this.g.selectAll("#countries>path").attr("d",_this.path.projection(_this.projection));for(var summary in summaries){var pathVisible=!!_this.g.select("path[name='"+summaries[summary].region.replace("'","'")+"']").attr("d"),circleSelector=_this.g.select("circle[name='"+summaries[summary].region+"']");pathVisible?circleSelector.style("visibility","visible").attr("transform","translate("+_this.projection([summaries[summary].geoCode.longitude,summaries[summary].geoCode.latitude])+")"):circleSelector.style("visibility","hidden")}},10)),this.resolveCurrentSelectionAndZoom()},GeoMapController.prototype.zoom=function(xyz){this.g.transition().duration(750).attr("transform","translate("+[($("#map").width()-this.width)/2,0]+")translate("+this.projectionMercator.translate()+")scale("+xyz[2]+")translate(-"+xyz[0]+",-"+xyz[1]+")").selectAll("#countries, #states, #cities").style("stroke-width",1/xyz[2]+"px").selectAll(".city").attr("d",this.path.pointRadius(20/xyz[2]))},GeoMapController.prototype.get_xyz=function(d){var bounds=this.path.bounds(d),w_scale=(bounds[1][0]-bounds[0][0])/this.width,h_scale=(bounds[1][1]-bounds[0][1])/this.height,z=.96/Math.max(w_scale,h_scale),x=(bounds[1][0]+bounds[0][0])/2,y=(bounds[1][1]+bounds[0][1])/2+this.height/z/6;return[x,y,z]},GeoMapController.prototype.state_clicked=function(d){d&&(this.state=this.state!==d?d:null),ViewUtil.safeDigest(this.$scope)},GeoMapController.prototype.resetZoom=function(){var xyz=[this.width/2,this.height/1.5,1];this.g.selectAll("#states, #cities").style("display","none"),this.drawnCountry=null,this.state=null,this.country&&this.g.selectAll("#"+this.country.id).style("display",null),this.country=null,this.zoom(xyz),ViewUtil.safeDigest(this.$scope)},GeoMapController.prototype.country_clicked=function(d){this.state=null,this.country&&this.g.selectAll("#"+this.country.id).style("display",null),this.country=d,ViewUtil.safeDigest(this.$scope)},GeoMapController.prototype.renderStates=function(){var _this=this,deferred=this.$q.defer();return!this.country||"USA"!=this.country.id&&"JPN"!=this.country.id&&"IND"!=this.country.id&&"CAN"!=this.country.id?window.setTimeout(function(){_this.g.selectAll("#states, #cities").remove(),_this.drawnCountry=null,deferred.resolve()},1):(console.log("Got data for "+this.country.id),d3.json("GeoMap_TopoJSON/states_"+this.country.id.toLowerCase()+".topo.json",function(error,us){console.log("Got data for "+_this.country.id),console.log(us),_this.g.selectAll("#states, #cities").remove(),_this.drawnCountry=_this.country.id,_this.g.append("g").attr("id","states").selectAll("path").data(topojson.feature(us,us.objects.states).features).enter().append("path").attr("id",function(d){return d.id}).attr("name",function(d){return d.properties.name.toLowerCase()}).attr("class","active").attr("d",_this.path).on("click",function(d){_this.state_clicked(d)});for(var maxTotalRequests=_this.getMaxTotalRequestValue(_this.geoData),i=0;i<_this.geoData.length;i++){var dataObject=d3.select('path[name="'+_this.geoData[i].region+'"]');dataObject.attr("style","fill:"+GeoMapGradients.getGradientColorForValueAgainstMax(_this.geoData[i].totalRequests.value,maxTotalRequests)),dataObject.on("mouseover",function(data){return function(){return _this.tooltip.html(_this.getTooltipHTML({region:data.region,totalRequests:data.totalRequests.value})),_this.tooltip.style("top",event.pageY-10+"px"),_this.tooltip.style("left",event.pageX+15+"px"),_this.tooltip.style("visibility","visible")}}(_this.geoData[i])),dataObject.on("mouseout",function(){_this.tooltip.style("visibility","hidden")})}console.log("Processed data for "+_this.country.id),_this.g.selectAll("#"+_this.country.id).style("display","none"),deferred.resolve()})),deferred.promise},GeoMapController.prototype.getTooltipHTML=function(data){return this.template.apply({region:data.region,totalRequests:data.totalRequests})},GeoMapController.prototype.getMaxTotalRequestValue=function(summaries){var returnValue=0;for(var s in summaries)summaries[s].totalRequests.value>returnValue&&(returnValue=summaries[s].totalRequests.value);return returnValue},GeoMapController.$inject=["$scope","$rootScope","$location","$timeout","$q","resourceManager","notificationService","injectorService"],GeoMapController}(ControllerBase);exports.GeoMapController=GeoMapController,appdynamicsModule.controller("GeoMapController",GeoMapController)});var AmMapDirective=function(){function AmMapDirective(){return{restrict:"EA",replace:!1,scope:{mapDomId:"=",mapData:"=",selectedCountry:"=",selectedState:"=",cityMapMode:"=",tooltipUnit:"=",showValueLegend:"=",preventStateLevelNavigation:"=",zoomControlEnabled:"=",dragMap:"=",refresh:"=",legendLabels:"=",areaSelectable:"="},template:"<div id='{{mapDomId}}' style='width: 100%;height:100%;'></div>",controller:"AmMapController",link:function(){}}}return AmMapDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-ammap"),AmMapDirective),define("app/view/components/ammap/AmMapDirective",function(){}),AmCharts.maps.usaLow={svg:{g:{path:[{id:"US-AK",title:"Alaska",d:"M191.8,495.91l2.87,8.43l3.02,-2.96l9.45,2.36l-0.85,3.93l8.45,3.99l6.07,-1.1l11.73,6.53l11.14,2.37l4.41,2.47l7.93,-2.48l8.81,5.39l6.42,2.46l0,0l-0.29,61.92l-0.41,89.84l7.5,0.44l7.5,4.15l5.52,6.58l7.22,9.78l7.24,-8.8l7.5,-5.33l4.57,7.63l5.67,5.86l7.72,6.27l5.88,10.36l9.87,16.24l15.03,7.91l1.32,9.26l-3.88,7.62l-5.24,-5.02l-7.87,-3.96l-3.56,-12.68l-11.56,-11.14l-5.39,-13.83l-7.71,-0.46l-12.67,0.3l-9.46,-4l-16.5,-15.44l-7.41,-2.87l-13.37,-5.62l-10.64,1l-14.65,-7.75l-8.54,-7.13l-8.59,2.6l0.69,10.76l-4.31,0.62l-9.17,2.34l-7.32,4.4l-8.95,2.21v-9.05l5.22,-14.52l8.47,-3.82l-1.62,-4.08l-10.5,7.43l-6.45,9.48L169.57,686l4.61,8.12l-8.97,9.68l-9.49,4.89l-8.73,3.17l-3.13,6.19l-14.01,5.24l-3.92,6.35l-10.87,4.25l-5.39,-2.33l-8.57,2.31l-9.52,2.92l-8.06,3.09l-15.29,0.34l-0.64,-2.74l10.79,-4.25l9.15,-2.37l10.61,-5.76l10.46,0.68l5.31,-5.08l12.97,-6.42l2.37,-2.58l6.88,-4.06l3.48,-10.97l5.58,-8.06l-9.78,2.83l-1.99,-3.05l-5.29,4.55l-3.47,-8.58l-3.22,4.87l-1.26,-8.01l-9,4.19l-4.71,-1.12l1.45,-8.95l2.67,-5.11l-3.54,-6.46l-10.41,0.39l-4.4,-8.61l-4.04,-4.93l2.31,-8.42l-3.72,-7.91l5.2,-7.81l8.05,-6.82l4.58,-7.12l5.87,0.36l4.11,3.66l7.39,-6.02l4.68,2.52l6.33,-3.59l0.34,-7.37l-3.13,-3.67l6.35,-4.88l-4.14,-0.76l-7.89,1.7l-2.89,2.92l-4.41,-4.75l-9.88,-0.77l-8.65,-6.44l-0.92,-7.01l-5.42,-11.46l10.92,-3.79l16.26,-3.71l5.19,1.37l-2.92,7.67l13.69,2.75l-2.8,-11.1l-6.17,-8.03l-2.27,-9.16l-3.95,-8.45l-6.76,-7.45l5.78,-7.51l10.57,2.37l9.34,-5.56l3.41,-7.73l7.78,-6.53l5.97,-0.64l12.31,-5.24l4.93,2.18l10.31,-7.58L191.8,495.91zM59.27,587.82l3.09,4.29l4.68,-0.11l4.08,5.78l6.04,4.18l-1.08,1.46l-6.17,1.5l-4.07,-4.97l-1.64,-3.58l-6.21,-1.19l-1.13,-1.88L59.27,587.82zM84.05,658.96l-5.19,0.99l-4.04,-4.16l-3.25,-5.32l7.96,-0.37l5.42,3L84.05,658.96zM172.79,720.54l-8.89,4.49l-3.56,-4.44l-0.17,-7.13l8.04,-4.19l4.56,-1.67l5.13,1.72l2.78,5.07L172.79,720.54z"},{id:"US-AL",title:"Alabama",d:"M823.25,403.55L831.37,431.02L838.53,452.95L842.13,459.7L844.3,463.54L841.61,467.9L841.4,475.24L842.96,479.38L842.96,483.45L842.88,487.23L844.46,489.98L845.75,492.54L805.82,497.08L794.73,499.45L794.58,501.21L799.58,506.33L798.97,510.92L797.83,514.18L780.04,513.21L776.52,478.48L776.84,441.91L777.66,412.26L775.95,407.99L799.35,405.82z"},{id:"US-AR",title:"Arkansas",d:"M746.45,386.99L746.39,388.88L744.74,392.2L741.65,394.62L741.19,398.42L738.45,401.59L739.1,408.17L737.11,410.42L736.87,412.24L733.64,414.14L733.77,417.43L731.63,423.65L729.53,425.07L726.38,428.35L724.64,433.14L720.94,441.29L720.79,446.7L723.3,452.55L722.62,457.07L706.39,457.09L685.47,458.65L666.94,459.1L667.77,446.16L663.36,446.16L659.67,446.53L658.64,445.06L658.85,425.16L658.87,403.06L654.82,379.13L677.08,378.97L697.32,378.33L716.63,377.44L737.54,377.61L739.25,380.31L737.34,382.88L735.44,385.46L734.45,387.78z"},{id:"US-AZ",title:"Arizona",d:"M393.21,351.89L374.82,479.32L336.43,473.46L295.45,449.76L268.97,433.11L271.6,429.19L274.1,429.74L277.1,425.71L274.42,421.95L274.45,418.47L274.3,414.34L279,409.98L282.58,400.09L289.13,396.66L286.51,391.67L284.99,386.99L284.28,382.78L283.9,379.56L283.94,377.49L285.97,373.36L285.98,368.82L286.5,364.43L287.5,359.65L286.52,356.27L288.33,353.79L292.12,354.57L295.26,356.86L297.54,358.24L299.42,355.09L300.35,354.51L303.82,336.59L332.7,341.78L367.14,347.74z"},{id:"US-CA",title:"California",d:"M227.74,202.25L209.97,267.9L234.88,306L259.69,342.73L283.94,377.49L283.9,379.56L284.28,382.78L284.99,386.99L286.51,391.67L289.13,396.66L282.58,400.09L279,409.98L274.3,414.34L274.45,418.47L274.42,421.95L277.1,425.71L274.1,429.74L271.6,429.19L247.2,426.36L225.43,423.15L225.09,414.45L219.96,401.1L203.57,383L196.4,380.28L190.28,371.27L176.35,365.7L172.7,360.88L173.84,348.28L162.81,321.41L157.2,286.87L159.32,282.02L153.91,272.55L146.38,250.33L149.63,231.97L144.55,217.34L153.92,200.58L159.29,181.87z"},{id:"US-CO",title:"Colorado",d:"M524.26,297.34L522.11,332.21L519.88,365.43L502.43,364.1L480.73,362.25L449.96,359.16L421.42,355.72L393.21,351.89L406.05,262.04L423.12,264.4L440.2,266.58L474.43,270.36L491.58,271.97L525.81,274.63L524.3,296.61z"},{id:"US-CT",title:"Connecticut",d:"M1034.84,200.91L1038.24,212.85L1038.11,216.33L1031.11,219.4L1021.77,223.02L1010.11,231.52L1008.84,228.98L1011.92,225.92L1010.14,224.38L1006.81,207.31L1019.47,204.48z"},{id:"US-DC",title:"Washington, DC",d:"M963.72,293.35L963.53,292.03L961.68,290.43L962.86,289.07L965.55,290.9z"},{id:"US-DE",title:"Delaware",d:"M986.93,264.85L984.93,267.74L986.35,271.89L992.67,282.97L1000,293.17L988.42,295.83L980.78,267.93L981.69,265.89L983,264.55z"},{id:"US-FL",title:"Florida",d:"M915.25,488.75L920.47,504.83L931.05,522.16L942.9,537.63L944.43,546.48L957.31,568.23L961.78,588.44L960.97,609.01L952.91,614.56L942.16,613.5L937.22,603.98L928.48,599.97L914.49,581.98L901.97,566.79L898.51,556.09L899.92,541.71L893.44,529.65L878.58,517.85L866.13,510.74L845.03,523.09L839.71,517.25L819.88,509.08L797.83,514.18L798.97,510.92L799.58,506.33L794.58,501.21L794.73,499.45L805.82,497.08L845.75,492.54L849.47,498.29L869.32,496.79L901.59,495.62L903.65,499.35L905.87,496.93L904.7,489.07L906.93,487.93L911.06,488.99z"},{id:"US-GA",title:"Georgia",d:"M870.54,397.61L868.77,399.77L866.4,404.45L871.95,407.48L875.38,408.38L879.89,414.99L882.71,418.65L890.05,423L891.77,425.6L896.8,428.57L899.84,433.58L906.61,437.16L908.79,442.08L910.32,444.39L909.93,446.15L913.88,448.03L916.46,451.94L917.13,456.23L919.03,456.77L922.51,457.38L916.86,475.27L915.25,488.75L911.06,488.99L906.93,487.93L904.7,489.07L905.87,496.93L903.65,499.35L901.59,495.62L869.32,496.79L849.47,498.29L845.75,492.54L844.46,489.98L842.88,487.23L842.96,483.45L842.96,479.38L841.4,475.24L841.61,467.9L844.3,463.54L842.13,459.7L838.53,452.95L831.37,431.02L823.25,403.55L837.59,402.05L847.46,400.57z"},{id:"US-HI",title:"Hawaii",d:"M443.39,612.09l-3.04,0.1l-1.75,-2.38l-0.9,-4.35l2.24,-0.78l3.28,0.52l3.31,2.87l-0.17,1.63L443.39,612.09zM460.92,640.38l-0.66,3.48l-2.99,-1.37l-0.62,-2.43l-1.04,-0.48l-0.48,-0.1l-1.92,-1.63l1.05,-6.3l2.46,1.6l3.75,0.34l-1,5.34L460.92,640.38zM472.36,657.57l-3.54,-0.18l-5.86,-6.16l2.14,-1.41L472.36,657.57zM472.75,661.08l0.38,3.47l3.3,1.61l1.96,5.74l-0.91,1.33l-2.35,0.03l-5.18,-3l1.42,-4.08l-1.82,-1.98l0.38,-3.08l1.6,-0.74L472.75,661.08zM464.41,705.67l-3.3,1.32l-2.68,-4.91l3.87,-5.3l2.25,-8.02l6.97,-1.6l0.83,-3.42l1.47,-1.3l0.87,0.25l6.34,12.29l0.27,3.33l-1.3,2.37l1.01,1.2l-0.53,1.9l0.83,3.79l-6.57,0.44l-4.82,-2.11L464.41,705.67z"},{id:"US-IA",title:"Iowa",d:"M708.74,219.26L709.04,220.49L711.39,223.98L710,225.78L710.31,230.55L711.1,232.54L712.37,236.09L717.96,237.96L719.79,241.33L720.87,243L722.93,244.04L723.88,246.44L726.64,248.09L728.51,249.94L727.99,256.09L725.17,261.42L724.13,263.12L720.32,264.66L714.53,266.11L713.21,270.09L715.43,271.74L716.35,275.21L714.32,279.26L713.36,282.76L709.11,286.36L708.97,290.51L706.51,288.74L703.03,285.22L684.16,286.48L664.27,287.22L648.77,287.52L633.24,287.62L632.09,283.51L632.57,279.45L632.19,275.54L630.42,268.99L629.29,266.28L628.06,265.54L627.94,260.29L626.88,256.53L623.81,252.24L623.86,250.36L622.8,246.61L622.06,244.34L622.09,242.26L619.39,239.72L620.76,236L621.65,232.36L622.06,229.89L619.95,226.86L620.01,221.31L622.21,221.31L640.32,221.33L662.83,220.7L687.01,219.83z"},{id:"US-ID",title:"Idaho",d:"M384.7,178.06L385.21,178.56L375.87,234.37L326.11,225.41L276.58,214.43L286.18,174.71L289.06,168.74L288.45,165.54L285.82,163.34L286.7,159.8L290.12,155.29L294.56,151.7L298.48,145.04L301.92,139.8L304.17,137.26L304.11,133.69L301.91,131.28L299.24,126.14L300.3,122.21L299.68,118.48L306.56,87.28L313.23,58.66L327.79,61.98L323.71,85.85L326.37,92.69L325.47,96.73L327.51,100.93L330.57,103.82L332.38,107.84L335.18,115.68L338.48,119.77L343.09,120.94L340.37,125.56L337.65,131.15L337.77,137.18L335.65,138.25L334.63,144.02L336.98,146.81L340.63,144.78L342.87,141.95L344.65,142.95L345.92,146.4L346.33,153.84L348.59,157.19L348.46,163.24L349.11,165.06L352.25,166.24L353.6,169.87L355.34,176.23L358.88,173.67L363.99,175.46L364.82,173.33L373.63,176.35L377.44,176.27L380.5,172.2L382.13,173.11L383.16,176.53z"},{id:"US-IL",title:"Illinois",d:"M767.4,237.97L767.4,238.03L768.06,243.91L773.71,255.38L773.71,255.38L773.71,255.38L776.14,281.56L778.56,307.71L777.15,314.18L778.75,315.7L780.04,319.47L780.19,322.52L778.83,324.03L777.89,327.89L774.65,333.15L772.69,339.44L772.52,344.06L772.79,345.73L771.03,349.05L772.75,351.05L769.73,352.97L765.81,355.21L766.92,360.09L764.7,362.15L760.16,360.41L755.25,359.56L754.19,361.85L755.15,365.22L751.67,361.95L749.76,362.68L747.04,357.29L747.46,353.85L745.73,348.47L743.87,347.93L738.83,343.28L736.79,343.33L733.04,340.37L730.3,337.13L731.2,333.08L732.64,329.68L733.38,325.44L729.78,322.01L726.52,323.68L724.45,322.85L723.94,319.08L722.22,314.86L720.54,313.92L716.32,311.1L712.77,307.43L709.63,302.92L707.74,296.22L708.97,290.51L709.11,286.36L713.36,282.76L714.32,279.26L716.35,275.21L715.43,271.74L713.21,270.09L714.53,266.11L720.32,264.66L724.13,263.12L725.17,261.42L727.99,256.09L728.51,249.94L726.64,248.09L723.88,246.44L722.93,244.04L720.87,243L719.79,241.33L736.92,240.23L754.43,238.94L767.35,238.03L767.34,237.97z"},{id:"US-IN",title:"Indiana",d:"M819.8,251.07L822.26,271.46L824.84,293.39L826.66,309L825.79,310.19L827.78,314.61L827.23,316.37L824.27,316.77L821.75,319.09L817.48,318.77L817.61,323.14L815.31,325.08L813.42,329.22L810.98,330.21L807.81,337.35L803.98,335.81L802.57,333.17L799.94,337.99L798.22,340.71L794.11,338.45L790.21,341.01L789.07,343.34L783.23,340.43L779.62,343.26L774.85,341.93L774.89,344.44L772.52,344.06L772.69,339.44L774.65,333.15L777.89,327.89L778.83,324.03L780.19,322.52L780.04,319.47L778.75,315.7L777.15,314.18L778.56,307.71L776.14,281.56L773.71,255.38L773.71,255.38L775.41,256.76L781.16,256.08L785.48,253.14L785.48,253.14L803.69,251.3L819.57,249.31z"},{id:"US-KS",title:"Kansas",d:"M654.77,368.71L638.81,368.9L606.07,368.79L573.32,368.04L555.14,367.35L536.98,366.45L519.88,365.43L522.11,332.21L524.26,297.34L524.29,297.34L554.73,299.07L577.39,299.98L617.51,300.79L641.53,300.79L645.7,303.78L647.97,303.71L648.51,306.99L646.09,311.22L647.45,313.36L649.68,318.1L654.35,320.18L654.53,344.47z"},{id:"US-KY",title:"Kentucky",d:"M868.09,319.18L868.74,321.26L869.24,325.93L871.88,329.12L873.25,332.39L876.29,334.91L878.49,337.35L882.03,337.23L875.89,345L870.68,348.46L870.51,350.34L868.95,352.99L864.4,356.38L863.09,358.79L859.56,360.71L854.51,362.7L842.33,365.07L826.21,366.09L821.02,366.98L810.52,367.52L799.86,368.47L790.05,369.33L778.72,371.03L778.04,370.05L774.43,370.42L774.8,373.97L748.7,375.84L752.62,373.16L755.37,371.06L754.75,367.53L755.15,365.22L754.19,361.85L755.25,359.56L760.16,360.41L764.7,362.15L766.92,360.09L765.81,355.21L769.73,352.97L772.75,351.05L771.03,349.05L772.79,345.73L772.52,344.06L774.89,344.44L774.85,341.93L779.62,343.26L783.23,340.43L789.07,343.34L790.21,341.01L794.11,338.45L798.22,340.71L799.94,337.99L802.57,333.17L803.98,335.81L807.81,337.35L810.98,330.21L813.42,329.22L815.31,325.08L817.61,323.14L817.48,318.77L821.75,319.09L824.27,316.77L827.23,316.37L827.78,314.61L825.79,310.19L826.66,309L832.73,308.77L836.11,310.54L841.45,315.01L845.39,316.1L848.35,317.55L852.46,316.35L855.74,317.21L859.34,315.44L862.62,314.57L864.48,317.51z"},{id:"US-LA",title:"Louisiana",d:"M722.62,457.07L724.06,458.3L722.49,461.68L725.53,466.21L724.89,469.07L727.6,472.85L725.04,475.33L724.38,479.68L720.81,483.43L719.3,488.3L717.8,493.89L715.53,496.56L716.6,502.22L733.98,502.02L752.51,500.89L752.21,504.72L751.16,508.55L752.61,511.35L755.39,513.82L756.36,517.55L756.89,519.79L755.26,529.47L762.48,542.76L734.86,545.47L717.53,541.69L705.74,537.49L690.4,535.09L673.04,534.9L671.32,531.91L673.27,528.5L676.18,525.4L676.12,520.83L674.63,519.34L676.22,513.83L677.42,511.32L679.1,502.91L677.27,499.84L674.87,494.7L673.07,489.45L671.9,485.95L668.65,483.45L666.94,459.1L685.47,458.65L706.39,457.09z"},{id:"US-MA",title:"Massachusetts",d:"M1045.63,177.8L1048.77,189.44L1057.46,199.48L1064.38,198.06L1060.35,190.6L1066.65,194.01L1067.17,200.62L1057.15,207.36L1049.14,209.17L1047.75,205.96L1044.47,204.17L1041.66,198.77L1034.84,200.91L1019.47,204.48L1006.81,207.31L1006.47,191.24L1019.95,188.12L1039.54,183L1040.61,180.37L1043.61,177.93z"},{id:"US-MD",title:"Maryland",d:"M980.78,267.93L988.42,295.83L1000,293.17L1001.44,294.94L996.49,304.07L992.51,305.34L991.48,307.17L980.22,298.59L975.8,282.14L974.67,290.56L979.11,309.68L967.2,305.35L965.52,302.45L962.88,304.01L960.31,303.28L961.26,297.92L963.79,295.21L963.72,293.35L965.55,290.9L962.86,289.07L961.68,290.43L957.94,288.63L954.01,288.05L954.78,285.4L952.15,284.2L949.46,283.97L947.53,281.41L944.79,278.66L939.12,277.96L936.14,280.29L934.58,282.31L929.32,282.4L927.46,285.17L924.2,286.7L921.71,289.82L919.42,292.31L917.49,280.96L933.46,277.97L938.9,276.86L951.06,274.31L965.73,271.32z"},{id:"US-ME",title:"Maine",d:"M1046.95,172.11L1045.32,172.81L1043.71,169.97L1039.84,167.56L1039.83,165.23L1026.54,125.88L1031.85,120.24L1034.43,108.68L1034.08,90.22L1040.58,70.21L1047.3,74.47L1056.14,67.64L1064.77,71.84L1074.29,101.57L1088.28,110.6L1091.52,119.75L1078.66,131.52L1065.07,141.37L1051.08,159.84z"},{id:"US-MI",title:"Michigan",d:"M810.31,140.6L810.31,140.6l5.32,0.03l0,0l-1.7,2.51l9.03,8.01L809.3,155l-0.54,-0.04l-12.74,-0.9l-11.87,5.92l-10.61,3.16l-8.01,15.38l-0.43,-0.12l-0.01,0.04l-2.39,-2.49l0.85,-3.77l-3.55,0.12l0.4,-3.76l0.81,-1.92l-1.7,-3.07l-3.89,-1.11l-1.2,-3.67l-3.12,-0.03l-4.49,0.34l-9.47,-3.39l-14.14,-3.12l-1.54,-4.03l-2.52,-0.59l-0.02,-0.07l-0.95,0.53l-0.15,-0.11l0.14,0.1l11.76,-6.62l12,-8.35l13.09,-8.73l-3.95,12.49l9.13,2.13l11.89,7.63l13.42,-6.53l15.16,-3.76l4.06,5.97l4.91,0.32L810.31,140.6zM855.86,215.95L855.86,215.95l-0.37,0.36l-5.98,13.52l-2.54,8.4h0l-4.54,9.49l0,0l-6.33,1.07l-7.68,1.01l-8.62,1.26l-0.23,-1.76l-15.88,1.99l-18.21,1.84v0l0,0l3.1,-3.48l5.66,-11.73l-1.15,-14.96l-6.97,-13.41l-0.19,-9.69l3.06,-11.57l3.2,-8.06l5.82,-6.16l2.38,7.43l1.52,-11.52l3.25,-2.73l1.18,-8.89l14.08,2.82l13,7.22l2.75,10.08l-0.03,10.5l-7.71,10.26l1.6,5.57l3.28,-0.25l8.73,-11.34l6.35,1.38l4.89,12.62l2.21,9.1L855.86,215.95z"},{id:"US-MN",title:"Minnesota",d:"M728.42,114.75L728.41,114.76L713.15,123.35L702.62,133.13L692.46,143.3L692.56,146.66L688.46,148.11L689.15,160.93L688.65,160.93L684.81,163.61L681.49,165.93L679.36,170.21L682.88,174.37L681.86,180.15L682.07,186.34L681.75,191.37L686.66,195.58L688.61,195.71L694.02,198.73L695.92,200.19L697.18,202.59L701.49,206.31L707.21,209.4L707.84,211.25L708.17,216.72L708.74,219.26L687.01,219.83L662.83,220.7L640.32,221.33L622.21,221.31L622.54,200.03L620.69,178.18L617.89,176.38L616.33,172.84L617.22,169.75L620.82,167.22L621.12,163.9L621.15,159.74L620.18,156.26L618.88,152.54L618.15,147.88L618,142.66L617.48,141.4L616.9,134.67L616.87,131.58L616.59,128.83L615.86,124.17L614.03,119.43L612.29,115.2L612.08,111.02L611.94,106.51L612.5,103.57L612.63,100.89L611.25,97.55L611.06,95.28L642.49,95.37L642.44,86.5L647.55,86.32L650.41,98.96L655.22,102.79L665.92,103.97L681.65,107.14L696.84,113.64L709.12,109.99L728.41,114.75z"},{id:"US-MO",title:"Missouri",d:"M708.97,290.51L707.74,296.22L709.63,302.92L712.77,307.43L716.32,311.1L720.54,313.92L722.22,314.86L723.94,319.08L724.45,322.85L726.52,323.68L729.78,322.01L733.38,325.44L732.64,329.68L731.2,333.08L730.3,337.13L733.04,340.37L736.79,343.33L738.83,343.28L743.87,347.93L745.73,348.47L747.46,353.85L747.04,357.29L749.76,362.68L751.67,361.95L755.15,365.22L754.75,367.53L755.37,371.06L752.62,373.16L748.7,375.84L748.38,378.06L747.49,381.37L746.45,386.99L734.45,387.78L735.44,385.46L737.34,382.88L739.25,380.31L737.54,377.61L716.63,377.44L697.32,378.33L677.08,378.97L654.82,379.13L654.86,368.71L654.77,368.71L654.53,344.47L654.35,320.18L649.68,318.1L647.45,313.36L646.09,311.22L648.51,306.99L647.97,303.71L645.7,303.78L641.53,300.79L639.23,295.96L636.52,293.07L633.59,289.49L633.24,287.62L648.77,287.52L664.27,287.22L684.16,286.48L703.03,285.22L706.51,288.74z"},{id:"US-MS",title:"Mississippi",d:"M775.95,407.99L777.66,412.26L776.84,441.91L776.52,478.48L780.04,513.21L768.32,519.32L756.89,519.79L756.36,517.55L755.39,513.82L752.61,511.35L751.16,508.55L752.21,504.72L752.51,500.89L733.98,502.02L716.6,502.22L715.53,496.56L717.8,493.89L719.3,488.3L720.81,483.43L724.38,479.68L725.04,475.33L727.6,472.85L724.89,469.07L725.53,466.21L722.49,461.68L724.06,458.3L722.62,457.07L723.3,452.55L720.79,446.7L720.94,441.29L724.64,433.14L726.38,428.35L729.53,425.07L731.63,423.65L733.77,417.43L733.64,414.14L736.87,412.24L737.11,410.42L755.47,409.14z"},{id:"US-MT",title:"Montana",d:"M501.84,159.67L499.16,180.45L472.33,177.57L443.38,174.28L418.47,170.63L386.97,165.87L385.13,177.31L384.7,178.06L383.16,176.53L382.13,173.11L380.5,172.2L377.44,176.27L373.63,176.35L364.82,173.33L363.99,175.46L358.88,173.67L355.34,176.23L353.6,169.87L352.25,166.24L349.11,165.06L348.46,163.24L348.59,157.19L346.33,153.84L345.92,146.4L344.65,142.95L342.87,141.95L340.63,144.78L336.98,146.81L334.63,144.02L335.65,138.25L337.77,137.18L337.65,131.15L340.37,125.56L343.09,120.94L338.48,119.77L335.18,115.68L332.38,107.84L330.57,103.82L327.51,100.93L325.47,96.73L326.37,92.69L323.71,85.85L327.79,61.98L372.22,71.15L416.94,78.85L461.89,85.08L507.02,89.83L503.5,131.88z"},{id:"US-NC",title:"North Carolina",d:"M995.21,338.43L1002.75,360L994.84,379.03L978.65,391.44L965.08,405.88L958.75,408.49L934.04,391.25L913.5,394.62L913.11,392L909.59,388.69L907.98,390.48L907.51,388.53L898.72,388.9L881.69,391.36L872.29,396.68L870.54,397.61L847.46,400.57L847.25,395.75L850.98,393.82L851.93,391.24L854.18,388.16L857.83,387.06L862.01,385.43L865.93,382.9L867.46,380.66L870.69,378.36L870.36,376.75L874.51,373.03L876.28,374.79L882.37,369.54L885.58,369.5L887.79,365.3L891.33,363.75L890.63,360.58L890.64,357.69L921.25,353.54L957.11,346.86L976.05,342.75z"},{id:"US-ND",title:"North Dakota",d:"M611.06,95.28L611.25,97.55L612.63,100.89L612.5,103.57L611.94,106.51L612.08,111.02L612.29,115.2L614.03,119.43L615.86,124.17L616.59,128.83L616.87,131.58L616.9,134.67L617.48,141.4L618,142.66L618.15,147.88L618.88,152.54L620.18,156.26L621.15,159.74L621.12,163.9L590.77,164.65L564.87,163.67L532.22,161.94L501.84,159.67L503.5,131.88L507.02,89.83L559.45,93.57z"},{id:"US-NE",title:"Nebraska",d:"M622.06,244.34L622.8,246.61L623.86,250.36L623.81,252.24L626.88,256.53L627.94,260.29L628.06,265.54L629.29,266.28L630.42,268.99L632.19,275.54L632.57,279.45L632.09,283.51L633.24,287.62L633.59,289.49L636.52,293.07L639.23,295.96L641.53,300.79L617.51,300.79L577.39,299.98L554.73,299.07L524.29,297.34L524.26,297.34L524.3,296.61L525.81,274.63L491.58,271.97L495.46,226.79L527.96,229.32L552.96,230.8L586.41,232.12L590.65,235.11L596.76,237.07L598.22,236.06L602.2,236.22L608.18,236.09L612.47,239.07L617.05,241.01L617.8,242.91L619.24,244.01z"},{id:"US-NH",title:"New Hampshire",d:"M1046.95,172.11L1045.63,177.8L1043.61,177.93L1040.61,180.37L1039.54,183L1019.95,188.12L1018.05,186.18L1018.57,182.99L1017.43,177.12L1017.56,175.61L1016.72,170.27L1017.3,165.41L1018.09,163.14L1018.58,157.42L1017.99,153.78L1017.94,151.5L1020.7,149.61L1023.53,146.09L1023.4,143.19L1021.37,140.36L1021.55,133.87L1021.52,133.86L1021.57,128.01L1026.54,125.88L1039.83,165.23L1039.84,167.56L1043.71,169.97L1045.32,172.81z"},{id:"US-NJ",title:"New Jersey",d:"M1005.97,233.13L1002.85,245.27L1007.3,245.2L1008.29,261.79L999.91,281.76L997.29,276.39L993.25,276.13L987.8,271.3L986.35,271.89L984.93,267.74L986.93,264.85L989.95,262.02L990.85,260.36L994.19,256.49L995.8,253.57L989.13,249.11L988.29,246.84L986.3,246.58L985.55,243.01L986.88,239.85L985.31,237.18L987.53,234.61L989.28,228.98L991.08,227.52z"},{id:"US-NM",title:"New Mexico",d:"M502.43,364.1L501.59,375.32L497.01,434.63L493.71,477.35L475.73,475.87L440.89,472.47L423.5,470.51L423.48,472.47L425.23,476.34L391.9,472.15L390.39,481.45L374.82,479.32L393.21,351.89L421.42,355.72L449.96,359.16L480.73,362.25z"},{id:"US-NV",title:"Nevada",d:"M326.11,225.41L303.82,336.59L300.35,354.51L299.42,355.09L297.54,358.24L295.26,356.86L292.12,354.57L288.33,353.79L286.52,356.27L287.5,359.65L286.5,364.43L285.98,368.82L285.97,373.36L283.94,377.49L259.69,342.73L234.88,306L209.97,267.9L227.74,202.25L276.56,214.49L276.58,214.43z"},{id:"US-NY",title:"New York",d:"M1006.47,191.24L1006.81,207.31L1010.14,224.38L1011.92,225.92L1008.84,228.98L1010.11,231.52L1032.89,222.46L1038.92,225.29L1017.3,238.01L1006.63,240.74L1005.97,233.13L991.08,227.52L988.02,226.6L984.83,225.73L983,222.77L982.87,220.23L980.43,218.69L976.03,216.05L953.56,221.02L929.39,226.03L903.43,230.95L902.33,224.89L914.06,208.94L913.34,206.86L913.33,206.8L909.87,200.77L917.84,196.33L930.8,194.61L944.51,193.68L955.07,183.7L952.2,175.26L949.61,172.2L949.54,172.18L949.55,172.17L949.62,172.2L962.67,153.32L968.84,147.56L992.69,141.54L993.51,146.1L993.6,149.11L995.65,155.57L997.38,158.72L996.94,163.69L999.87,169.09L999.66,172.55L1000.17,173.31L1002.51,172.89z"},{id:"US-OH",title:"Ohio",d:"M895.99,263.59L893.82,265.11L895.03,267.83L895.11,273.12L894.33,279.24L893.47,284.35L893.57,286.7L889.71,292.59L887.88,294.01L885.64,295.02L883.46,294.86L880.19,299.33L880.12,303.48L879.92,305.75L878.5,306.88L877.89,304.42L875.44,304.24L873.72,309.48L874.2,314.49L872.38,317.95L868.09,319.18L864.48,317.51L862.62,314.57L859.34,315.44L855.74,317.21L852.46,316.35L848.35,317.55L845.39,316.1L841.45,315.01L836.11,310.54L832.73,308.77L826.66,309L824.84,293.39L822.26,271.46L819.8,251.07L828.42,249.81L836.1,248.8L842.43,247.72L842.43,247.72L842.43,247.73L853.5,250.9L862.09,250.8L873.84,245.91L882.78,238.09L890.88,233.62z"},{id:"US-OK",title:"Oklahoma",d:"M654.82,379.13L658.87,403.06L658.85,425.16L658.64,445.06L650.4,440.72L645.06,438.36L640.76,439.93L634.09,439.72L630.14,439.76L626.89,441.61L623.71,442.55L620.93,441.42L614.58,442.61L611.74,438.79L608.74,442.04L603.58,440.5L598.33,436.88L592.59,439.04L590.23,433.51L581.41,433.82L575.82,432.43L569.54,430.6L566.91,425.79L561.9,427.12L558.91,425.14L554.53,422.51L555.49,400.85L556.46,378.64L538.16,377.73L519.86,376.63L501.59,375.32L502.43,364.1L519.88,365.43L536.98,366.45L555.14,367.35L573.32,368.04L606.07,368.79L638.81,368.9L654.77,368.71L654.86,368.71z"},{id:"US-OR",title:"Oregon",d:"M299.24,126.14L301.91,131.28L304.11,133.69L304.17,137.26L301.92,139.8L298.48,145.04L294.56,151.7L290.12,155.29L286.7,159.8L285.82,163.34L288.45,165.54L289.06,168.74L286.18,174.71L276.58,214.43L276.56,214.49L227.74,202.25L159.29,181.87L158.03,168.07L170.35,146.42L179.28,122.31L192.49,90.34L195.72,91.03L200.31,92.59L203.38,95.72L207.41,98.33L208.97,103.37L208.26,107.16L208.47,110.57L211.77,112.47L215.57,113.53L222.2,112.96L225.89,113.27L231.12,115.79L233.22,117.63L236.67,117.76L240.68,116.96L247.56,119.17L253.95,118.28L257.44,117.29L261.12,119.3L267.26,118.43z"},{id:"US-PA",title:"Pennsylvania",d:"M991.08,227.52L989.28,228.98L987.53,234.61L985.31,237.18L986.88,239.85L985.55,243.01L986.3,246.58L988.29,246.84L989.13,249.11L995.8,253.57L994.19,256.49L990.85,260.36L989.95,262.02L986.93,264.85L983,264.55L981.69,265.89L980.78,267.93L965.73,271.32L951.06,274.31L938.9,276.86L933.46,277.97L917.49,280.96L899.53,284.16L895.99,263.59L890.88,233.62L890.88,233.62L902.3,224.93L902.33,224.89L903.43,230.95L929.39,226.03L953.56,221.02L976.03,216.05L980.43,218.69L982.87,220.23L983,222.77L984.83,225.73L988.02,226.6z"},{id:"US-RI",title:"Rhode Island",d:"M1049.14,209.17L1038.11,216.33L1038.24,212.85L1034.84,200.91L1041.66,198.77L1044.47,204.17L1047.75,205.96z"},{id:"US-SC",title:"South Carolina",d:"M958.75,408.49L954.4,425.6L940.47,442.52L922.51,457.38L919.03,456.77L917.13,456.23L916.46,451.94L913.88,448.03L909.93,446.15L910.32,444.39L908.79,442.08L906.61,437.16L899.84,433.58L896.8,428.57L891.77,425.6L890.05,423L882.71,418.65L879.89,414.99L875.38,408.38L871.95,407.48L866.4,404.45L868.77,399.77L870.54,397.61L872.29,396.68L881.69,391.36L898.72,388.9L907.51,388.53L907.98,390.48L909.59,388.69L913.11,392L913.5,394.62L934.04,391.25z"},{id:"US-SD",title:"South Dakota",d:"M622.21,221.31L620.01,221.31L619.95,226.86L622.06,229.89L621.65,232.36L620.76,236L619.39,239.72L622.09,242.26L622.06,244.34L619.24,244.01L617.8,242.91L617.05,241.01L612.47,239.07L608.18,236.09L602.2,236.22L598.22,236.06L596.76,237.07L590.65,235.11L586.41,232.12L552.96,230.8L527.96,229.32L495.46,226.79L499.16,180.45L501.84,159.67L532.22,161.94L564.87,163.67L590.77,164.65L621.12,163.9L620.82,167.22L617.22,169.75L616.33,172.84L617.89,176.38L620.69,178.18L622.54,200.03z"},{id:"US-TN",title:"Tennessee",d:"M854.51,362.7L881.54,359.56L890.64,357.69L890.63,360.58L891.33,363.75L887.79,365.3L885.58,369.5L882.37,369.54L876.28,374.79L874.51,373.03L870.36,376.75L870.69,378.36L867.46,380.66L865.93,382.9L862.01,385.43L857.83,387.06L854.18,388.16L851.93,391.24L850.98,393.82L847.25,395.75L847.46,400.57L837.59,402.05L823.25,403.55L799.35,405.82L775.95,407.99L755.47,409.14L737.11,410.42L739.1,408.17L738.45,401.59L741.19,398.42L741.65,394.62L744.74,392.2L746.39,388.88L746.45,386.99L747.49,381.37L748.38,378.06L748.7,375.84L774.8,373.97L774.43,370.42L778.04,370.05L778.72,371.03L790.05,369.33L799.86,368.47L810.52,367.52L821.02,366.98L826.21,366.09L842.33,365.07z"},{id:"US-TX",title:"Texas",d:"M658.64,445.06L659.67,446.53L663.36,446.16L667.77,446.16L666.94,459.1L668.65,483.45L671.9,485.95L673.07,489.45L674.87,494.7L677.27,499.84L679.1,502.91L677.42,511.32L676.22,513.83L674.63,519.34L676.12,520.83L676.18,525.4L673.27,528.5L671.32,531.91L673.04,534.9L656.02,540.04L637.82,557.24L617.61,567.14L606.35,578.03L601.48,588.34L601.04,604.28L601.91,615.41L605.78,623.36L597.58,623.93L582.8,618.52L566.71,610.86L561.26,599.79L557.33,583.46L545.79,569.82L539.4,556.02L530.11,539.78L516.53,529.83L500.18,529.18L486.19,546.32L470.08,538.07L460.36,530.23L456.6,517.21L451.21,504.67L440.58,493.46L431.39,485.2L425.23,476.34L423.48,472.47L423.5,470.51L440.89,472.47L475.73,475.87L493.71,477.35L497.01,434.63L501.59,375.32L519.86,376.63L538.16,377.73L556.46,378.64L555.49,400.85L554.53,422.51L558.91,425.14L561.9,427.12L566.91,425.79L569.54,430.6L575.82,432.43L581.41,433.82L590.23,433.51L592.59,439.04L598.33,436.88L603.58,440.5L608.74,442.04L611.74,438.79L614.58,442.61L620.93,441.42L623.71,442.55L626.89,441.61L630.14,439.76L634.09,439.72L640.76,439.93L645.06,438.36L650.4,440.72z"},{id:"US-UT",title:"Utah",d:"M406.05,262.04L393.21,351.89L367.14,347.74L332.7,341.78L303.82,336.59L326.11,225.41L375.87,234.37L372.15,256.16z"},{id:"US-VA",title:"Virginia",d:"M949.46,283.97l2.68,0.24l2.64,1.19l-0.78,2.65l3.93,0.58l3.75,1.8l1.84,1.6l0.19,1.32l0.07,1.86l-2.52,2.71l-0.95,5.36l2.57,0.72l2.64,-1.56l1.68,2.91l13.73,10.02l5.74,9.84l0.35,0.6l8.2,12.61l-19.16,4.32l-18.93,4.11l-35.87,6.68l-30.61,4.16l-9.1,1.87l-27.04,3.14l5.06,-2l3.53,-1.92l1.3,-2.42l4.55,-3.38l1.57,-2.65l0.17,-1.88l5.21,-3.46l6.13,-7.78l1.39,3.68l2.33,1.71l3.01,1.37l5.21,-3.61l2.41,1.22l6.36,-2.98l0.05,-2.07l2.15,0.45l1.93,-2.01l2.54,-0.11l2.53,-2.22l0.03,-2.11L911.2,328l1.72,-4.29l2.9,-3.52l0.28,-3.45l2.3,-4.51l0.8,-5.16l2.64,1.3l2.9,1.11l2.36,-1.33l0.46,-2.19l1.2,-3.09l1.34,-3.53l1.44,0.69l2.03,-3.37l2.84,-3.57l1.72,-2.63l0.2,-6.19l10.03,4.26L949.46,283.97zM988.81,323.46l1.81,0.52l5.88,-19.91l-3.99,1.27l-1.03,1.82L988.81,323.46z"},{id:"US-VT",title:"Vermont",d:"M1019.95,188.12L1006.47,191.24L1002.51,172.89L1000.17,173.31L999.66,172.55L999.87,169.09L996.94,163.69L997.38,158.72L995.65,155.57L993.6,149.11L993.51,146.1L992.69,141.54L1021.52,133.86L1021.55,133.87L1021.37,140.36L1023.4,143.19L1023.53,146.09L1020.7,149.61L1017.94,151.5L1017.99,153.78L1018.58,157.42L1018.09,163.14L1017.3,165.41L1016.72,170.27L1017.56,175.61L1017.43,177.12L1018.57,182.99L1018.05,186.18z"},{id:"US-WA",title:"Washington",d:"M313.23,58.66L306.56,87.28L299.68,118.48L300.3,122.21L299.24,126.14L267.26,118.43L261.12,119.3L257.44,117.29L253.95,118.28L247.56,119.17L240.68,116.96L236.67,117.76L233.22,117.63L231.12,115.79L225.89,113.27L222.2,112.96L215.57,113.53L211.77,112.47L208.47,110.57L208.26,107.16L208.97,103.37L207.41,98.33L203.38,95.72L200.31,92.59L195.72,91.03L192.49,90.34L194.19,70.89L198.52,49.07L217.79,59.52L219.14,78.74L224.58,74.04L227.61,55.27L226.19,34.98L269.51,47.56z"},{id:"US-WI",title:"Wisconsin",d:"M718.02,148.31L718.17,148.42L719.11,147.88L719.13,147.95L721.66,148.55L723.2,152.58L737.33,155.69L746.81,159.08L751.29,158.75L754.41,158.78L755.61,162.45L759.51,163.56L761.21,166.63L760.4,168.55L760,172.31L763.55,172.19L762.7,175.96L765.09,178.45L765.1,178.41L765.53,178.53L765.4,178.76L759.81,187.53L762.25,190.02L772.73,174.27L775.14,173.95L768.45,192.24L766.23,208.39L764.26,221.5L767.34,232.41L767.4,237.97L767.34,237.97L767.35,238.03L754.43,238.94L736.92,240.23L719.79,241.33L717.96,237.96L712.37,236.09L711.1,232.54L710.31,230.55L710,225.78L711.39,223.98L709.04,220.49L708.74,219.26L708.17,216.72L707.84,211.25L707.21,209.4L701.49,206.31L697.18,202.59L695.92,200.19L694.02,198.73L688.61,195.71L686.66,195.58L681.75,191.37L682.07,186.34L681.86,180.15L682.88,174.37L679.36,170.21L681.49,165.93L684.81,163.61L688.65,160.93L689.15,160.93L688.46,148.11L692.56,146.66L692.56,146.66L708.07,141.11z"},{id:"US-WV",title:"West Virginia",d:"M917.49,280.96L919.42,292.31L921.71,289.82L924.2,286.7L927.46,285.17L929.32,282.4L934.58,282.31L936.14,280.29L939.12,277.96L944.79,278.66L947.53,281.41L949.46,283.97L948.37,288.54L938.34,284.28L938.14,290.47L936.42,293.1L933.58,296.67L931.55,300.04L930.11,299.35L928.76,302.87L927.56,305.97L927.1,308.15L924.75,309.48L921.84,308.37L919.2,307.07L918.4,312.23L916.1,316.74L915.82,320.19L912.93,323.71L911.2,328L911.95,330.57L911.92,332.68L909.4,334.9L906.86,335.01L904.93,337.02L902.78,336.56L902.73,338.63L896.37,341.61L893.96,340.38L888.75,343.99L885.75,342.62L883.41,340.91L882.03,337.23L878.49,337.35L876.29,334.91L873.25,332.39L871.88,329.12L869.24,325.93L868.74,321.26L868.09,319.18L872.38,317.95L874.2,314.49L873.72,309.48L875.44,304.24L877.89,304.42L878.5,306.88L879.92,305.75L880.12,303.48L880.19,299.33L883.46,294.86L885.64,295.02L887.88,294.01L889.71,292.59L893.57,286.7L893.47,284.35L894.33,279.24L895.11,273.12L895.03,267.83L893.82,265.11L895.99,263.59L899.53,284.16z"},{id:"US-WY",title:"Wyoming",d:"M499.16,180.45L495.46,226.79L491.58,271.97L474.43,270.36L440.2,266.58L423.12,264.4L406.05,262.04L372.15,256.16L375.87,234.37L385.21,178.56L384.7,178.06L385.13,177.31L386.97,165.87L418.47,170.63L443.38,174.28L472.33,177.57z"}]}}},define("lib/ammap/maps/js/usaLow.js",function(){});
var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/ammap/AmMapController",["require","exports"],function(require,exports){var AmMapController=function(_super){function AmMapController($scope,$rootScope,$location,$timeout,$q,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.$timeout=$timeout,this.$q=$q,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.ammapLoaded=!1,this.levels={WORLD:"WORLD",COUNTRY:"COUNTRY"},this.mapModes={CITY:"CITY",COUNTRY:"COUNTRY"},this.currentLevel=this.levels.WORLD,this.currentMapMode=this.mapModes.COUNTRY,this.worldDataProvider={map:"worldLow",areas:[],images:[]},this.usDataProvider={map:"usaLow",areas:[],images:[]},$scope.controller=this,this.initScope(),this.downloadDependenciesRecursive(AmMapController.requiredMaps,0)}return __extends(AmMapController,_super),AmMapController.prototype.downloadDependenciesRecursive=function(requiredMaps,it){var _this=this;require([requiredMaps[it]],function(){it==requiredMaps.length-1?(_this.ammapLoaded=!0,_this.generateAmMap(),ViewUtil.safeApply(_this.$scope)):_this.downloadDependenciesRecursive(requiredMaps,++it)})},AmMapController.prototype.initScope=function(){var _this=this;this.mapData=this.$scope.mapData,this.$scope.$watch("mapData",function(){_this.mapData=_this.$scope.mapData,_this.mapData&&_this.updateData()}),this.$scope.$watch("refresh",function(){_this.$scope.refresh&&(_this.map&&setTimeout(function(){_this.map.invalidateSize()},350),_this.$scope.refresh=!1)}),this.$scope.$watch("selectedCountry",function(newValue,oldValue){_this.ammapLoaded&&newValue!=oldValue&&newValue!=_this.currentCountry&&(null!=newValue&&void 0!=newValue?_this.selectRegion(_this.$scope.selectedCountry):(_this.backToWorld(),_this.$scope.selectedState=null)),window.setTimeout(function(){ViewUtil.safeDigest(_this.$scope.$parent)},1)}),this.$scope.$watch("selectedState",function(newValue,oldValue){_this.ammapLoaded&&newValue!=oldValue&&newValue!=_this.currentState&&(null!=newValue&&void 0!=newValue?_this.currentState=newValue:_this.backToCountry()),window.setTimeout(function(){ViewUtil.safeDigest(_this.$scope.$parent)},1)}),this.$scope.$watch("cityMapMode",function(){_this.currentMapMode=_this.$scope.cityMapMode?_this.mapModes.CITY:_this.mapModes.COUNTRY})},AmMapController.prototype.updateData=function(){var _this=this,data=[],citiesData=[],minBulletSize=10,maxBulletSize=40,min=1/0,max=-1/0,maxSquare=maxBulletSize*maxBulletSize*2*Math.PI,minSquare=minBulletSize*minBulletSize*2*Math.PI;if(this.mapData&&this.mapData.length>0&&(data=_.map(this.mapData,function(geoData){if(geoData){var value,metricData;return metricData=geoData.areaValue,!metricData||!metricData.value||metricData.value<=0?{}:(value=metricData.value,min>value&&(min=value),value>max&&(max=value),_this.currentMapMode===_this.mapModes.CITY?{geoCode:geoData.geoCode,title:geoData.region,value:value,sizeValue:geoData.circleSizeValue.value,colorValue:geoData.circleColorValue.value}:{id:geoData.geoCode.key,value:value})}if(_this.currentMapMode===_this.mapModes.CITY){if(!geoData.region)return{}}else if(!geoData.geoCode)return{}}),this.currentMapMode===this.mapModes.CITY&&(citiesData=_.map(data,function(geoData){var value=geoData.value;if(!value||0>=value)return{};var size,color,alpha=.5,square=(value-min)/(max-min)*(maxSquare-minSquare)+minSquare;if(minSquare>square&&(square=minSquare),size=geoData.sizeValue?Math.sqrt(square/(2*Math.PI)):20,geoData.colorValue){switch(!0){case geoData.colorValue<=20:color=UiConfig.getColor("EUM_AMMAP_BLUE_LIGHTEST");break;case geoData.colorValue>20&&geoData.colorValue<=40:color=UiConfig.getColor("EUM_AMMAP_BLUE_LIGHTER");break;case geoData.colorValue>40&&geoData.colorValue<=60:color=UiConfig.getColor("EUM_AMMAP_BLUE_MEDIUM");break;case geoData.colorValue>60&&geoData.colorValue<=80:color=UiConfig.getColor("EUM_AMMAP_BLUE_DARKER");break;case geoData.colorValue>80&&geoData.colorValue<=100:color=UiConfig.getColor("EUM_AMMAP_BLUE_DARKEST")}alpha=1}else color=UiConfig.getColor("EUM_AMMAP_BLUE_MEDIUM");return{latitude:geoData.geoCode.latitude,longitude:geoData.geoCode.longitude,type:"circle",width:size,height:size,color:color,title:geoData.title,value:value,alpha:alpha}}))),this.currentMapMode===this.mapModes.CITY?this.usDataProvider.images=this.worldDataProvider.images=citiesData:this.usDataProvider.areas=this.worldDataProvider.areas=data,this.map){var zoomLat=this.map.zoomLatitude(),zoomLong=this.map.zoomLongitude(),zoomLevel=this.map.zoomLevel();if(this.map.validateData(),("US"!=this.$scope.selectedCountry||"US"==this.$scope.selectedCountry&&null!=this.$scope.selectedState)&&this.map.zoomToLongLat(zoomLevel,zoomLong,zoomLat,!0),this.$scope.selectedState){var stateObject=this.map.getObjectById(this.$scope.selectedState);null!=stateObject?this.map.selectObject(stateObject):this.mapData&&1===this.mapData.length&&this.mapData[0].geoCode.name===this.$scope.selectedState&&(stateObject=this.map.getObjectById(this.mapData[0].geoCode.key),stateObject&&(this.map.selectObject(stateObject),this.changeButton("backToWorld","backToCountry","Back To Country")))}else if(this.$scope.selectedCountry&&"US"!=this.$scope.selectedCountry){var countryObject=this.map.getObjectById(this.$scope.selectedCountry);null!=countryObject&&this.map.selectObject(countryObject)}}},AmMapController.prototype.generateAmMap=function(){function getTextWidth(text){var canvas=document.createElement("canvas"),context=canvas.getContext("2d");context.font="11pt Verdana";var metrics=context.measureText(text);return metrics.width}var _this=this,areaSelectable=this.$scope.areaSelectable||!1,ammapConfigObject={type:"map",theme:"light",pathToImages:"lib/ammap/images/",steps:10,dataProvider:this.worldDataProvider,dragMap:this.$scope.dragMap,color:UiConfig.getColor("GLOBAL_FONT_COLOR"),mouseWheelZoomEnabled:!1,zoomOnDoubleClick:areaSelectable,areasSettings:{autoZoom:areaSelectable,balloonText:" [[title]] : [[value]] "+this.$scope.tooltipUnit,selectable:areaSelectable,selectedColor:"#003767",unlistedAreasColor:"#676E85"},imagesSettings:{balloonText:" [[title]] : [[value]] "+this.$scope.tooltipUnit,selectedLabelColor:"#003767"},zoomControl:{zoomControlEnabled:this.$scope.zoomControlEnabled,homeButtonEnabled:areaSelectable||this.$scope.zoomControlEnabled,top:45,left:25,panControlEnabled:!1}};if(this.$scope.showValueLegend){var minValueText=this.$scope.legendLabels&&this.$scope.legendLabels.minValue?this.$scope.legendLabels.minValue:"Few "+this.$scope.tooltipUnit,maxValueText=this.$scope.legendLabels&&this.$scope.legendLabels.maxValue?this.$scope.legendLabels.maxValue:"Many "+this.$scope.tooltipUnit,textWidth=getTextWidth(minValueText+maxValueText);ammapConfigObject.valueLegend={left:20,bottom:30,width:textWidth>200?textWidth:200,fontSize:11,minValue:minValueText,maxValue:maxValueText,color:UiConfig.getColor("GLOBAL_FONT_COLOR"),borderThickness:2,borderAlpha:0,borderColor:"#8990a8"}}this.map=AmCharts.makeChart("ammapDiv",ammapConfigObject),this.map.addListener("clickMapObject",function(event){event.event.currentTarget&&("g"==event.event.currentTarget.tagName?"backToWorld"==event.mapObject.id?_this.backToWorld():"backToCountry"==event.mapObject.id&&_this.backToCountry():"path"==event.event.currentTarget.tagName&&_this.selectRegion(event.mapObject.id)),ViewUtil.safeDigest(_this.$scope)}),this.map.write(this.$scope.mapDomId)},AmMapController.prototype.removeButton=function(id){for(var images=this.map.imagesProcessor.allObjects,i=0;i<images.length;i++)images[i].id==id&&(images[i].id="disabled",images[i].label="",images[i].selectable=!1)},AmMapController.prototype.selectRegion=function(id){var _this=this;this.currentLevel==this.levels.WORLD?(this.currentCountry=id,this.$scope.selectedCountry=id,"US"!=id||this.$scope.preventStateLevelNavigation?this.changeButton("disabled","backToWorld","Back To World"):(this.currentLevel=this.levels.COUNTRY,require(["lib/ammap/maps/js/usaLow.js"],function(){_this.map.dataProvider=_this.usDataProvider,_this.map.validateData(),null!=_this.currentState&&_this.map.selectObject(_this.map.getObjectById(_this.currentState))}))):this.currentLevel==this.levels.COUNTRY&&id!=this.currentCountry&&(null==this.map.getObjectById(id)?(this.backToWorld(),this.map.selectObject(this.map.getObjectById(id)),this.currentCountry=id,this.$scope.selectedCountry=id,this.changeButton("disabled","backToWorld","Back to World")):(this.currentState=id,this.$scope.selectedState=id,this.changeButton("backToWorld","backToCountry","Back To Country")))},AmMapController.prototype.changeButton=function(oldId,newId,newText){for(var images=this.map.imagesProcessor.allObjects,i=0;i<images.length;i++)images[i].id==oldId&&(images[i].id=newId,images[i].label=newText,images[i].selectable=!0);this.map.selectObject(this.map.selectedObject)},AmMapController.prototype.backToCountry=function(){this.changeButton("backToCountry","backToWorld","Back To World"),this.map.selectObject(null),this.currentState=null,this.$scope.selectedState=null},AmMapController.prototype.backToWorld=function(){this.currentLevel=this.levels.WORLD,this.map.dataProvider=this.worldDataProvider,this.map.validateData(),this.removeButton("backToWorld"),this.map.selectObject(null),this.currentCountry=null,this.$scope.selectedCountry=null},AmMapController.$inject=["$scope","$rootScope","$location","$timeout","$q","resourceManager","notificationService","injectorService"],AmMapController.requiredMaps=["lib/ammap/ammap.js","lib/ammap/maps/js/worldLow.js","lib/ammap/themes/light.js"],AmMapController}(ControllerBase);exports.AmMapController=AmMapController,appdynamicsModule.controller("AmMapController",AmMapController)});var ADVerticalAlign=function(){function ADVerticalAlign(){return{restrict:"A",replace:!0,transclude:!0,template:'<div style="display: table; height: 100%; width: 100%;"><div style="display: table-cell; vertical-align: middle;"><div ng-transclude></div></div></div>'}}return ADVerticalAlign}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-vertical-align"),ADVerticalAlign),define("app/view/components/verticalAlign/VerticalAlign",function(){});var BaselineSelectorChangeEvent=function(){function BaselineSelectorChangeEvent(){}return BaselineSelectorChangeEvent.UEV_BASELINE_SELECTOR_CHANGE="UEV_BASELINE_SELECTOR_CHANGE",BaselineSelectorChangeEvent}(),ADBaselineSelector=function(){function ADBaselineSelector(resourceManager,applicationConfigurationViewService,baselineUiService){return{restrict:"E",transclude:!1,templateUrl:"app/view/components/baselineSelector/ADBaselineSelector.html",replace:!1,scope:{svBaselinesConfig:"=",adGlobalBaselineMode:"@"},controller:function($scope){$scope.$watch("svBaselinesConfig.applicationId",function(applicationId){applicationId&&($scope.svBaselinesConfig.showAllBaselines&&baselineUiService.getAllBaselines(applicationId).then(function(response){$scope.allBaselines=response}),baselineUiService.getDefaultBaseline(applicationId).then(function(result){$scope.defaultBaseline=result,$scope.svBaselinesConfig.defaultBaseline=$scope.defaultBaseline,UserService.instance().getGeneralUserPreferenceBooleanValue(UserService.AUTO_SELECT_COMPARE_VS_DEFAULT_BASELINE)&&($scope.svBaselinesConfig.selectedBaseline=$scope.defaultBaseline,$scope.setMenuTitle())}))}),$scope.$watch("svBaselinesConfig.defaultBaseline",function(){$scope.svBaselinesConfig&&($scope.defaultBaseline=$scope.svBaselinesConfig.defaultBaseline,$scope.isNoBaselineSelected()||$scope.selectBaseline($scope.defaultBaseline)),$scope.setMenuTitle()}),$scope.$watch("svBaselinesConfig.showAllBaselines",function(showAllBaselines){showAllBaselines&&baselineUiService.getAllBaselines($scope.svBaselinesConfig.applicationId).then(function(response){$scope.allBaselines=response})}),$scope.isBaselineSelected=function(baseline){return $scope.svBaselinesConfig&&$scope.svBaselinesConfig.selectedBaseline&&baseline&&baseline.id==$scope.svBaselinesConfig.selectedBaseline.id?!0:!1},$scope.isNoBaselineSelected=function(){return $scope.svBaselinesConfig&&$scope.svBaselinesConfig.selectedBaseline?!1:!0},$scope.resourceManager=resourceManager,$scope.configureBaselines=function(){applicationConfigurationViewService.viewConfigureBaselines($scope.svBaselinesConfig.applicationId,$scope.svBaselinesConfig.navLocation)},$scope.stopComparingAgainstBaseline=function(){UserService.instance().setGeneralUserPreferenceBooleanValue(UserService.AUTO_SELECT_COMPARE_VS_DEFAULT_BASELINE,!1),$scope.svBaselinesConfig.selectedBaseline=null,$scope.setMenuTitle(),$scope.dispatchSelectedEvent()},$scope.selectBaseline=function(baseline){$scope.svBaselinesConfig.selectedBaseline=baseline,$scope.setMenuTitle(),$scope.defaultBaseline&&$scope.defaultBaseline.id===baseline.id&&UserService.instance().setGeneralUserPreferenceBooleanValue(UserService.AUTO_SELECT_COMPARE_VS_DEFAULT_BASELINE,!0),$scope.dispatchSelectedEvent()},$scope.dispatchSelectedEvent=function(){var event=new BaselineSelectorChangeEvent;event.selectedBaseline=$scope.svBaselinesConfig.selectedBaseline,$scope.setMenuTitle(),$scope.adGlobalBaselineMode?EventBusService.instance().dispatchEvent(BaselineSelectorChangeEvent.UEV_BASELINE_SELECTOR_CHANGE,event):$scope.$emit(BaselineSelectorChangeEvent.UEV_BASELINE_SELECTOR_CHANGE,event)},$scope.setMenuTitle=function(){$scope.menuTitle=$scope.svBaselinesConfig&&$scope.svBaselinesConfig.selectedBaseline?$scope.svBaselinesConfig.selectedBaseline.name:resourceManager.getString("ui","ms_baselineNotSelected")}}}}return ADBaselineSelector.$inject=["resourceManager","applicationConfigurationViewService","baselineUiService"],ADBaselineSelector}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-baseline-selector"),ADBaselineSelector),define("app/view/components/baselineSelector/ADBaselineSelector",function(){});var AdWaterfallChart=function(){function AdWaterfallChart($compile,resourceManager){return{restrict:"A",replace:!1,templateUrl:"app/view/components/waterfallChart/AdWaterfallChart.html",scope:{chartData:"=adWaterfallChart",svLoading:"&",groupOverallEnable:"=svGroupOverall",groupServerConnectionEnable:"=svGroupServerConnection",groupServerTimeEnable:"=svGroupServerTime",groupPageCompEnable:"=svGroupPageComp",groupAjaxOverallEnable:"=svGroupAjaxOverall",groupAjaxServerTimeEnable:"=svGroupAjaxServerTime",groupSyntheticEnable:"=svGroupSynthetic",scrollContainer:"@svScrollContainer",disableGroups:"@svDisableGroups",showWithoutLoad:"=svShowWithoutLoad"},link:function(scope){function processData(){if("object"==typeof scope.chartData&&null!=scope.chartData){var waterfallTimeLength,numberOfGroups,totalChartHeight=0,numberOfRows=0,heightPerRow=20,minimumGroupHeight=30;waterfallTimeLength=0,numberOfGroups=scope.chartData.groups.length;for(var groupIndex in scope.chartData.groups)if(scope.chartData.groups.hasOwnProperty(groupIndex)&&(group=scope.chartData.groups[groupIndex],angular.isArray(scope.chartData.groups)&&group.rows.length>0)){var numRows=group.rows.length;for(var rowIndex in group.rows)if(group.rows.hasOwnProperty(rowIndex)){row=group.rows[rowIndex];var isTallRow=!1;for(var eventIndex in row.events)if(row.showAsTallRow&&(isTallRow=!0),row.events.hasOwnProperty(eventIndex)){var event=row.events[eventIndex];event.duration&&event.startTime+event.duration>waterfallTimeLength?waterfallTimeLength=event.startTime+event.duration:event.startTime+event.duration>waterfallTimeLength&&(waterfallTimeLength=event.startTime)}isTallRow&&numRows++}totalChartHeight+=2>numRows?minimumGroupHeight:numRows*heightPerRow,numberOfRows+=numRows}totalChartHeight+=5*(numberOfGroups-1)+1,scope.chartData.markers.sort(function(a,b){return a.startTime-b.startTime}),scope.totalChartLength=waterfallTimeLength,scope.totalChartHeight=totalChartHeight}}scope.chartData=scope.chartData;var row,group;scope.resourceManager=resourceManager,scope.chartIsLoading=1==scope.svLoading(),scope.scope=scope,scope.getGroupCheckboxEnableVar=function(id){return"group"+id+"Enable"},scope.$watch(function(){return 1==scope.svLoading()},function(newValue,oldValue){newValue!=oldValue&&(scope.chartIsLoading=newValue)}),scope.isOverflowHidden=function(row){return row&&"ms_RUM_APPLICATION_SERVER_TIME"==row.name},scope.jumpToSection=function(name,groupId){var groupToggle="group"+groupId+"Enable";scope[groupToggle]===!1&&(scope[groupToggle]=!0),window.setTimeout(function(){var element=$(".ad_scroll_"+name),container=$(scope.scrollContainer);null!=element&&0!=element.length&&null!=container&&0!=container.length&&container.scrollTop(element.position().top+container.scrollTop()-container.position().top)},1)},scope.totalChartLength=0,scope.$watch("chartData",processData),scope.getHoverText=function(row){return null!=row.description&&""!=row.description&&void 0!=resourceManager.getString("ui",row.description)?'popover="'+resourceManager.getString("ui",row.description)+'" popover-placement="bottom" popover-trigger="mouseenter" popover-popup-delay="600"':""},scope.getValueStyleFor=function(row){if("object"==typeof row&&null!=row){if(row.length>-1&&null!=row.length)return"value";for(var eventIndex in row.events)if(row.events.hasOwnProperty(eventIndex)){var event=row.events[eventIndex];if(event.displayType==AdWaterfallEvent.displayTypes.EVENT||event.displayType==AdWaterfallEvent.displayTypes.SUMMARY||event.displayType==AdWaterfallEvent.displayTypes.FLOATING_BLUR)return"unknown"}}return""},scope.getRowValueText=function(row){if("object"==typeof row&&null!=row){if(row.length>-1&&null!=row.length)return"<span class='adsWaterfallRowTimeValue'>"+row.length+"</span>&nbsp;<span class='adsWaterfallRowTimeUnits'>ms</span>";for(var eventIndex in row.events)if(row.events.hasOwnProperty(eventIndex)){var event=row.events[eventIndex];if(event.displayType==AdWaterfallEvent.displayTypes.EVENT||event.displayType==AdWaterfallEvent.displayTypes.SUMMARY||event.displayType==AdWaterfallEvent.displayTypes.FLOATING_BLUR)return"Unknown"}}return""}}}}return AdWaterfallChart.$inject=["$compile","resourceManager"],AdWaterfallChart}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-waterfall-chart"),AdWaterfallChart),define("app/view/components/waterfallChart/AdWaterfallChart",function(){});var AdWaterfallEvent=function(){function AdWaterfallEvent($compile){return{restrict:"A",replace:!1,scope:{eventList:"=adWaterfallEvent",totalTimeLength:"=svTotalTimeLength",hideOverflow:"=svHideOverflow",useLoadMessage:"=svUseLoadMessage"},link:function(scope,iElement){function getPercentageFromTime(time,totalTimeLength){if(0==time)return 0;if(time==totalTimeLength)return 100;var ratio=100/totalTimeLength;return Math.round(100*time*ratio)/100}function renderRowEvents(){var rowHtml="<div class='adsWaterfallCellInnerDiv"+(scope.hideOverflow?" hideOverflow":"")+"'>";for(var eventIndex in scope.eventList)if(scope.eventList.hasOwnProperty(eventIndex)){var event=scope.eventList[eventIndex];if(event.displayType==AdWaterfallEvent.displayTypes.EVENT)rowHtml+="<div class='adsWaterfallCellEventBox' style='left:"+getPercentageFromTime(event.startTime,scope.totalTimeLength)+"%;width:"+getPercentageFromTime(event.duration,scope.totalTimeLength)+"%;"+(event.duration>0?"min-width:1px;z-index:650;":"")+"'><div class='adsWaterfallCellEventInner'></div></div>";else if(event.displayType==AdWaterfallEvent.displayTypes.SUMMARY)rowHtml+="<div class='adsWaterfallCellSummaryBox' style='left:"+getPercentageFromTime(event.startTime,scope.totalTimeLength)+"%;width:"+getPercentageFromTime(event.duration,scope.totalTimeLength)+"%;"+(event.duration>0?"min-width:1px;z-index:650;":"")+"'><div class='adsWaterfallCellSummaryInner'></div></div>";else if(event.displayType==AdWaterfallEvent.displayTypes.FLOATING_BLOCK)rowHtml+="<div class='adsWaterfallCellFloatingBlockBox' style='left:"+getPercentageFromTime(event.startTime,scope.totalTimeLength)+"%;'><div class='adsWaterfallFloatingBlockInner'></div></div>";else if(event.displayType==AdWaterfallEvent.displayTypes.FLOATING_BLUR)rowHtml+="<div class='adsWaterfallCellFloatingBlurBox' style='left:"+getPercentageFromTime(event.startTime,scope.totalTimeLength)+"%;width:"+getPercentageFromTime(event.duration,scope.totalTimeLength)+"%;"+(event.duration>0?"min-width:1px;z-index:650;":"")+"'><div class='adsWaterfallFloatingBlurOuter'><div class='adsWaterfallFloatingBlurInner left'></div><div class='adsWaterfallFloatingBlurInner middle'></div><div class='adsWaterfallFloatingBlurInner right'></div></div></div>";else if(event.displayType==AdWaterfallEvent.displayTypes.FADEOUT)rowHtml+="<div class='adsWaterfallCellFadeoutBox' style='left:"+getPercentageFromTime(event.startTime,scope.totalTimeLength)+"%;'><div class='adsWaterfallFadeOutInnerBody'></div><div class='adsWaterfallFadeOutInnerEnd'></div></div>";else if(event.displayType==AdWaterfallEvent.displayTypes.AJAX||event.displayType==AdWaterfallEvent.displayTypes.AJAX_FADEOUT)rowHtml+="<div class='adsWaterfallCellAJAXBox' ng-if='(useLoadMessage && \""+event.hasLoadText+'" != "undefined") || (!useLoadMessage && "'+event.text+'" != "undefined")\' style=\'left:'+getPercentageFromTime(event.startTime,scope.totalTimeLength)+"%;"+(event.displayType==AdWaterfallEvent.displayTypes.AJAX?"width:"+getPercentageFromTime(event.duration,scope.totalTimeLength)+"%;":"")+(event.duration>0?"min-width:1px;z-index:650;":"")+"'><div class='adsWaterfallCellAJAXInnerBox'></div><div class='adsWaterfallCellAJAXInnerDot'></div><div class='adsWaterfallCellAJAXInnerTextbox'><div class='adsWaterfallCellAJAXInnerText' ng-if='useLoadMessage'>"+event.hasLoadText+"</div><div class='adsWaterfallCellAJAXInnerText' ng-if='!useLoadMessage'>"+event.text+"</div></div></div>";else if(event.displayType==AdWaterfallEvent.displayTypes.OVERLAY){var eventDuration=getPercentageFromTime(event.duration,scope.totalTimeLength);rowHtml+="<div class='adsWaterfallRequestOverlayWrapper"+(eventDuration>50?" overflow":"")+"' ng-if='(useLoadMessage && \""+event.hasLoadText+'" != "undefined") || (!useLoadMessage && "'+event.text+'" != "undefined")\' style=\'left:'+getPercentageFromTime(event.startTime,scope.totalTimeLength)+"%; width:"+eventDuration+"%;"+(event.duration>0?"min-width:1px;z-index:650;":"")+"'><div class='adsWaterfallRequestOverlayDot'></div><div class='adsWaterfallRequestOverlayLine'></div><div class='adsWaterfallRequestOverlayLineOutside'></div><div class='adsWaterfallRequestOverlayText' ng-if='useLoadMessage'>"+event.hasLoadText+"</div><div class='adsWaterfallRequestOverlayText' ng-if='!useLoadMessage'>"+event.text+"</div></div>"}}rowHtml+="</div>";var elem=angular.element(rowHtml);iElement.html(elem),$compile(elem)(scope)}scope.$watch("eventList",renderRowEvents),renderRowEvents()}}}return AdWaterfallEvent.displayTypes={FLOATING_BLUR:"floatingBlur",FLOATING_BLOCK:"floatingBlock",FADEOUT:"fadeout",SUMMARY:"summary",OVERLAY:"overlay",EVENT:"event",MARKER:"marker",SPACER:"spacer",AJAX:"ajax",AJAX_FADEOUT:"ajaxFadeout"},AdWaterfallEvent.$inject=["$compile","resourceManager"],AdWaterfallEvent}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-waterfall-event"),AdWaterfallEvent),define("app/view/components/waterfallChart/AdWaterfallEvent",function(){});var AdWaterfallMarkers=function(){function AdWaterfallMarkers(resourceManager){return{restrict:"A",replace:!0,template:"<div><div ng-if='useLegend' class='adsWaterfallMarkerLegend'><div class='legendItem' ng-repeat='marker in markers'><div class='legendColorBox' ng-class='getMarkerIdClass(marker)'></div> {{resourceManager.getString('ui', marker.text) + ' (' + (marker.startTime | adDisplayTimeNumber) + ' ms)'}}</div></div><div class='adsWaterfallMarkers'><div class='markers' ng-repeat='marker in markers'><div class='adsWaterfallCellInnerDiv' ng-class='getMarkerIdClass(marker)' ng-style='getMarkerStartPosition(marker)'><div class='adsWaterfallMarkerLine' ng-style='getChartHeight()'></div><div ng-if='!useLegend' class='adsWaterfallMarkerTop' ng-style='getMarkerTopHeight(marker, $index)'></div><div ng-if='!useLegend' class='adsWaterfallMarkerText' ng-class='' ng-style='getMarkerTextBottom($index)'>{{resourceManager.getString('ui', marker.text)}}</div></div></div></div></div>",scope:{markers:"=adWaterfallMarkers",totalTimeLength:"=svTotalTimeLength",totalChartHeight:"=svChartHeight",useLegend:"@svUseLegend"},link:function(scope){function getPercentageFromTime(time,totalTimeLength){if(0==time)return 0;if(time==totalTimeLength)return 100;var ratio=100/totalTimeLength;return Math.round(100*time*ratio)/100}scope.resourceManager=resourceManager,scope.baseMarkerHeight=7,scope.markerLineHeight=13,scope.getMarkerHeight=function(index){return scope.markers&&scope.markers.length>0&&index>-1?scope.markerLineHeight*(scope.markers.length-1-index):0},scope.getMarkerStartPosition=function(marker){return{left:getPercentageFromTime(marker.startTime,scope.totalTimeLength)+"%"}},scope.getChartHeight=function(){return{height:scope.totalChartHeight+"px"}},scope.getMarkerTopHeight=function(marker,$index){return{height:scope.baseMarkerHeight+scope.getMarkerHeight($index)+"px"}},scope.getMarkerTextBottom=function($index){return{bottom:scope.getMarkerHeight($index)+"px"}},scope.getMarkerIdClass=function(marker){return"adsMarker_"+marker.text}}}}return AdWaterfallMarkers.$inject=["resourceManager"],AdWaterfallMarkers}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-waterfall-markers"),AdWaterfallMarkers),define("app/view/components/waterfallChart/AdWaterfallMarkers",function(){});var AdAutoFillFix=function(){function AdAutoFillFix(){return{restrict:"A",link:function(scope,elem,attrs){elem.prop("method","POST"),attrs.ngSubmit&&setTimeout(function(){elem.unbind("submit").submit(function(e){e.preventDefault(),elem.find("input, textarea, select").trigger("input").trigger("change").trigger("keydown"),scope.$apply(attrs.ngSubmit)})},0)}}}return AdAutoFillFix}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-auto-fill-fix"),AdAutoFillFix),define("app/view/components/autoFillFix/AdAutoFillFix",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ChartCardDirective=function(){function ChartCardDirective(){return{restrict:"E",replace:!1,templateUrl:"app/view/components/chartCard/ChartCardView.html",scope:{adLoading:"=",adTitle:"=",adConfig:"=",adStats:"=",adOptionsMenu:"=",adNoData:"=",adNoDataMessage:"=",adFillLegend:"=",adTooltipListener:"=",adStackStatsLeft:"@"},controller:ChartCardController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return ChartCardDirective.$inject=[],ChartCardDirective}(),ChartCardController=function(_super){function ChartCardController($scope){_super.call(this,$scope,ResourceManager.instance(),NotificationService.instance(),SharedInjectorService.instance()),this.$scope=$scope,this.statColCls="col-md-4",this.$scope.controller=this}return __extends(ChartCardController,_super),ChartCardController.prototype.link=function(scope){var _this=this;scope.$watch("adStats",function(newStats){if(newStats)if(Util.parseBoolean(scope.adStackStatsLeft))_this.statColCls="ads-stats-column-fixed-width pull-left";else{var statCount=newStats.length>3?Math.ceil(12/newStats.length):4;_this.statColCls="col-md-"+statCount}})},ChartCardController.$inject=["$scope"],ChartCardController}(ControllerBase);appdynamicsModule.directive(StringUtils.toCamelCase("ad-chart-card"),ChartCardDirective),define("app/view/components/chartCard/ChartCardDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/components/emailConfigWarning/EmailConfigWarningController",["require","exports"],function(require,exports){var EmailConfigWarningController=function(_super){function EmailConfigWarningController($scope,injectorService,accountUiService){_super.call(this,$scope,injectorService.resourceManager(),injectorService.notificationService(),injectorService),this.$scope=$scope,this.injectorService=injectorService,this.accountUiService=accountUiService,this.isEmailConfigured=!0,$scope.controller=this,this.checkEmailConfiguration()}return __extends(EmailConfigWarningController,_super),EmailConfigWarningController.prototype.configureEmail=function(){var _this=this;this.$scope.adCloseParentModal&&this.$scope.adCloseParentModal(),NotificationConfigService.instance().openEmailSMSConfig(this.$scope,function(){_this.checkEmailConfiguration()})},EmailConfigWarningController.prototype.checkEmailConfiguration=function(){var _this=this;this.accountUiService.getNotificationConfig().then(function(response){var notificationConfig=_this.accountUiService.getNotificationConfig_response(response);_this.isEmailConfigured=null===notificationConfig||null===notificationConfig.smtpHost||0===notificationConfig.smtpHost.length?!1:!0,_this.$scope.$emit(EventConstants.UEV_EMAIL_CONFIG_UPDATE,_this.isEmailConfigured)})},EmailConfigWarningController.$inject=["$scope","injectorService","accountUiService"],EmailConfigWarningController}(ControllerBase);exports.EmailConfigWarningController=EmailConfigWarningController,appdynamicsModule.controller("EmailConfigWarningController",EmailConfigWarningController)}),define("app/view/components/emailConfigWarning/EmailConfigWarningDirective",["require","exports","./EmailConfigWarningController"],function(require,exports,importController){var EmailConfigWarningDirective=function(){function EmailConfigWarningDirective(){return{restrict:"E",controller:importController.EmailConfigWarningController,templateUrl:EmailConfigWarningDirective.TEMPLATE_URL,scope:{adCloseParentModal:"&"}}}return EmailConfigWarningDirective.TEMPLATE_URL="app/view/components/emailConfigWarning/EmailConfigWarningView.html",EmailConfigWarningDirective.$inject=[],EmailConfigWarningDirective}();exports.EmailConfigWarningDirective=EmailConfigWarningDirective,appdynamicsModule.directive(StringUtils.toCamelCase("ad-email-config-warning"),EmailConfigWarningDirective)});var Login=function(){function Login(){return{restrict:"E",scope:{loginVisible:"="},templateUrl:"app/view/LoginView/Login.html",replace:!0,controller:"LoginController"}}return Login}();appdynamicsModule.directive("loginview",Login),define("app/view/LoginView/Login",function(){}),define("app/view/components/progressBar/ProgressBarController",["require","exports"],function(){var ProgressBarController=function(){function ProgressBarController($scope){var _this=this;this.$scope=$scope,$scope.controller=this,$scope.adColor=angular.isDefined($scope.adColor)?$scope.adColor:AdColorPalette.COLOR_PALETTE_HEALTH_NORMAL,$scope.adBackground=angular.isDefined($scope.adBackground)?$scope.adBackground:"#FFFFFF",$scope.$watch("adProgress",function(newValue,oldValue){newValue&&newValue!==oldValue&&_this.generate()}),$scope.$watch("adColor",function(newValue,oldValue){newValue&&newValue!==oldValue&&_this.generate()}),$scope.$watch("adBackground",function(newValue,oldValue){newValue&&newValue!==oldValue&&_this.generate()}),this.generate()}return ProgressBarController.prototype.generate=function(){this.background={"background-color":this.$scope.adBackground},this.style={width:this.$scope.adProgress+"%","background-color":this.$scope.adColor}},ProgressBarController.$inject=["$scope"],ProgressBarController}();return ProgressBarController}),define("app/view/components/progressBar/ProgressBarDirective",["require","exports","./ProgressBarController"],function(require,exports,ProgressBarController){var ProgressBarDirective=function(){function ProgressBarDirective(){return{restrict:"E",templateUrl:"app/view/components/progressBar/ProgressBar.html",replace:!1,scope:{adProgress:"=",adColor:"=?",adBackground:"=?"},controller:ProgressBarController}
}return ProgressBarDirective}();return adComponentsModule.directive(StringUtils.toCamelCase("ad-progress-bar"),ProgressBarDirective),ProgressBarDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ProductDowngradeDialogController=function(_super){function ProductDowngradeDialogController($scope,dialog,resourceManager,notificationService,injectorService,userPreferenceUiService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.dialog=dialog,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.userPreferenceUiService=userPreferenceUiService,$scope.close=function(){dialog.close()},$scope.onOkClicked=function(){userPreferenceUiService.setGeneralUserPreferenceBoolean(GeneralUserPreferenceConstants.DONT_SHOW_LITE_DOWNGRADE_NOTIFICATION,!0),dialog.close()},$scope.onLearnLiteEditionLinkClicked=function(){WebUtil.loadURL(ExternalUrls.HELP_URL_LEARN_NEW_LITE)},$scope.onBuyNowClicked=function(){WebUtil.loadURL(ExternalUrls.BUY_NOW_PAGE)},$scope.onLoginToAppDynamics=function(){WebUtil.loadURL(ExternalUrls.AD_LOGIN_PAGE)}}return __extends(ProductDowngradeDialogController,_super),ProductDowngradeDialogController.$inject=["$scope","dialog","resourceManager","notificationService","injectorService","userPreferenceUiService"],ProductDowngradeDialogController}(ControllerBase);define("app/view/common/dialogs/ProductDowngradeDialog/ProductDowngradeDialogController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/mainNav/topMenuBar/TopMenuBarController",["require","exports","app/view/mainNav/titleBar/MainTitleBarController","app/services/QuestStateService","app/view/components/progressBar/ProgressBarDirective"],function(require,exports,MainTitleBarController,QuestStateService,ProgressBarDirective){var TopMenuBarController=function(_super){function TopMenuBarController($scope,$dialog,$location,flashService,resourceManager,notificationService,navigationUiService,$rootScope,masterService,notificationConfigService,navigationService,$http,userUiService,userPreferenceUiService,AppConfig,injectorService,homeViewService,userService,notificationCenterService,apiLoggerService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$dialog=$dialog,this.resourceManager=resourceManager,this.notificationService=notificationService,this.navigationUiService=navigationUiService,this.$rootScope=$rootScope,this.masterService=masterService,this.notificationConfigService=notificationConfigService,this.navigationService=navigationService,this.userUiService=userUiService,this.userPreferenceUiService=userPreferenceUiService,this.AppConfig=AppConfig,this.injectorService=injectorService,this.homeViewService=homeViewService,this.userService=userService,this.notificationCenterService=notificationCenterService,this.apiLoggerService=apiLoggerService,this.isAdminUi=!1,this.showSetupMenu=!0,this.showUserMenu=!1,this.isZoneSwitcherMenuEnabled=!0,this.showDebuggerMenuItem=!1,this.showBackNextButtons=!1,this.includeTimeRange=!1,this.showRefreshOnRight=!0,this.showBaselineSelector=!1,this.baselinesConfig=null,this.showCustomTimeRange=!1,this.dateFrom=null,this.dateTo=null,this.adEumWebLiteEnabled=!1,this.adEumMobileLiteEnabled=!1,this.forceShowAllTimeRangeOptions=!1,this.helpLinkCurrentScreen=null,this.videoLinkCurrentScreen=null,this.disableDefaultDeepLinkCopy=!1,this.showEvalToolbar=!1,this.showFullLogo=!0,this.minimizedLeftNav=!1,this._isCurrentLocationHtml=!1,TopMenuBarController._instance=this,$scope.$watch("AppConfig.debugMode",function(){_this.showDebuggerMenuItem=AppConfig.debugMode}),$scope.controller=this,$rootScope.$on(MasterService.UEV_INIT_DATA_FETCHED,function(){_this.init()}),$rootScope.$on(EventConstants.UEV_SHOW_CLOUD_AUTOMATION_CHANGED,this.init.bind(this)),this.init()}return __extends(TopMenuBarController,_super),TopMenuBarController.instance=function(){return TopMenuBarController._instance},TopMenuBarController.prototype.link=function(scope,iElement){this.element=iElement},TopMenuBarController.prototype.init=function(){var _this=this;this.isAdminUi=this.injectorService.appConfig().admin,this.showSetupMenu=!0,this.isZoneSwitcherMenuEnabled=!this.isAdminUi&&!this.masterService.isDashboardViewerApp(),this.masterService.initData?this.processMainNavConfig(MasterService.instance().initData.mainNavConfig):InjectorService.instance().$rootScope().$on(MasterService.UEV_INIT_DATA_FETCHED,function(){_this.processMainNavConfig(MasterService.instance().initData.mainNavConfig)}),this.showDebuggerMenuItem=this.AppConfig&&this.AppConfig.debugMode,this.showRefreshOnRight=!this.showBackNextButtons,this.initTimeRange(),this.initQuests(),this.setupMinimized(),EventBusService.instance().registerEventListener(QuestStateService.QUEST_STATE_CHANGED,function(){_this.getQuests()},this.$scope),EventBusService.instance().registerEventListener(MainTitleBarController.UEV_QUESTS_TOOLBAR_TOGGLE,function(showQuestsToolbar){_this.showQuestsToolbar=showQuestsToolbar,UserService.instance().setGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.SHOW_QUESTS_BAR,_this.showQuestsToolbar)},this.$scope),EventBusService.instance().registerEventListener(NavigationService.UEV_NAV_ACTION_HTML,function(){if(NavigationService.instance().isQuestsLocation()){if(_this.showQuestsToolbar=_this.userService.getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.SHOW_QUESTS_BAR),_this.showEvalToolbar&&(_this.showQuestsToolbar=!0),!_this.questApplications)return;var topLevelNav=NavigationService.instance().getTopLevelNavCurrent();if(topLevelNav===NavigationService.TOP_LEVEL_NAV_APPLICATIONS||topLevelNav===NavigationService.TOP_LEVEL_NAV_DASHBOARDS_REPORTS)_this.onChangeQuestApplication(_this.questApplications[QuestStateService.QUESTS_APP_APM]);else if(topLevelNav===NavigationService.TOP_LEVEL_NAV_EUM){var currentLocation=URLParams.getCurrentUrlParams().location(),isMobileLocation=NavigationService.instance().isEumMobileLocation(currentLocation);_this.onChangeQuestApplication(isMobileLocation||currentLocation===NavigationDataConstants.EUM_MOBILE_ALL_APPS?_this.questApplications[QuestStateService.QUESTS_EUM_MOBILE]:_this.questApplications[QuestStateService.QUESTS_EUM_WEB])}}else _this.showQuestsToolbar=!1},this.$scope)},TopMenuBarController.prototype.initTimeRange=function(){this.timeRange=TimeRangeService.instance().currentTimeRange,this.timeRange.type===TimeRangeSpecifierType.BETWEEN_TIMES?(this.showCustomTimeRange=!0,this.dateFrom=this.timeRange.startTime,this.dateTo=this.timeRange.endTime):this.showCustomTimeRange=!1},TopMenuBarController.prototype.initQuests=function(){if(this.masterService.initData){switch(this.showEvalToolbar&&(this.showQuestsToolbar=!0),this.questApplications=QuestStateService.instance().getQuestApplications(),this.topLevelNav=NavigationService.instance().getTopLevelNavCurrent(),this.topLevelNav){case NavigationService.TOP_LEVEL_NAV_EUM:this.questApplication=this.questApplications[QuestStateService.QUESTS_EUM_WEB];break;default:this.questApplication=this.questApplications[QuestStateService.QUESTS_APP_APM]}this.getQuests()}},TopMenuBarController.prototype.getQuests=function(){var _this=this;this.questApplication.getState.call(QuestStateService.instance()).then(function(questState){_this.questState=questState})},TopMenuBarController.prototype.onChangeQuestApplication=function(questApplication){this.questApplication=questApplication,this.getQuests()},TopMenuBarController.prototype.hideToolbar=function(){this.showQuestsToolbar=!1,EventBusService.instance().dispatchEvent(MainTitleBarController.UEV_QUESTS_TOOLBAR_TOGGLE,this.showQuestsToolbar)},TopMenuBarController.prototype.processMainNavConfig=function(mainNavConfig){if(this.mainNavConfig=mainNavConfig,this.isAdminUi)return void(this.showSetupMenu=!1);if(this.showEvalToolbar=mainNavConfig.showEvalToolbar,this.showSetupMenu=mainNavConfig.showSetupMenu,this.showQuestsToolbar=this.userService.getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.SHOW_QUESTS_BAR),this.showEvalToolbar&&(this.showQuestsToolbar=!0),this.upgradeButtonLabel=this.getString(this.mainNavConfig.upgradeButtonMessageKey),this.injectorService.masterService().getProductMode(this.mainNavConfig.accountEdition)==MasterService.PRODUCT_PRO_TRIAL_MODE){if(mainNavConfig.showHoursLeftInTrial)if(mainNavConfig.hoursLeftInTrial>=0)if(mainNavConfig.hoursLeftInTrial>24){var numOfDays=Math.round(mainNavConfig.hoursLeftInTrial/24);this.evalBarMessage=numOfDays+" "+this.getString("ms_trialDaysLeft")}else this.evalBarMessage=this.getString("ms_trialOneDayLeft");else this.evalBarMessage=this.getString("ms_trialExpiredMessage")}else if(this.injectorService.masterService().getProductMode(this.mainNavConfig.accountEdition)==MasterService.PRODUCT_LITE_MODE){this.evalBarMessage="AppDynamics Lite";var thisUserUiService=this.userUiService,thisUserPreferenceUiService=this.userPreferenceUiService,thisDialog=this.$dialog,thisTopMenuBarScope=this.$scope;this.userUiService.getCurrentAccountUI().then(function(response){var accountUI=thisUserUiService.getCurrentAccountUI_response(response),resultHandler=(accountUI.account.expirationDate,new Date,function(response){"true"!==response&&require(["app/view/common/dialogs/ProductDowngradeDialog/ProductDowngradeDialogController"],function(){var opts={backdrop:!0,keyboard:!0,backdropClick:!0,controller:ProductDowngradeDialogController,templateUrl:"app/view/common/dialogs/ProductDowngradeDialog/ProductDowngradeDialog.html"},dlg=thisDialog.dialog(opts);dlg.open(),thisTopMenuBarScope.$apply("")})});thisUserPreferenceUiService.getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.DONT_SHOW_LITE_DOWNGRADE_NOTIFICATION).then(resultHandler)})}},TopMenuBarController.prototype.onClickSettings=function(){HomeViewService.instance().viewSettingsHome()},TopMenuBarController.prototype.openMyPreferences=function(){HomeViewService.instance().viewUserPreferences()},TopMenuBarController.prototype.onMyADAccount=function(){ExternalUrls.open(ExternalUrls.MY_APPDYNAMICS_ACCOUNT)},TopMenuBarController.prototype.onLogout=function(){this.masterService.logout()},TopMenuBarController.prototype.onClickLogo=function(){HomeViewService.instance().viewHome()},TopMenuBarController.prototype.onEvalBannerClick=function(){this.injectorService.masterService().getProductMode(this.mainNavConfig.accountEdition)==MasterService.PRODUCT_PRO_TRIAL_MODE?WebUtil.loadURL(ExternalUrls.FREEMIUM_AD_TARGET_EVAL_TOOLBAR_PRO_TRIAL):this.injectorService.masterService().getProductMode(this.mainNavConfig.accountEdition)==MasterService.PRODUCT_LITE_MODE&&WebUtil.loadURL(ExternalUrls.FREEMIUM_AD_TARGET_EVAL_TOOLBAR_LITE)},TopMenuBarController.prototype.onToggleNotificationCenter=function(){this.notificationCenterService.togglePanel()},TopMenuBarController.prototype.setupMinimized=function(){var _this=this;LeftMenuBarController.instance()&&this.setMimized(LeftMenuBarController.instance().$scope.collapsed),EventBusService.instance().registerEventListener(NavigationService.UEV_LEFT_NAV_MINIMIZED_TOGGLE,function(minimized){_this.setMimized(minimized)},this.$scope)},TopMenuBarController.prototype.setMimized=function(minimized){this.minimizedLeftNav=minimized,this.showFullLogo=!this.minimizedLeftNav},TopMenuBarController.prototype.isCurrentLocationHtml=function(){return this._isCurrentLocationHtml},TopMenuBarController.$inject=["$scope","$dialog","$location","flashService","resourceManager","notificationService","navigationUiService","$rootScope","masterService","notificationConfigService","navigationService","$http","userUiService","userPreferenceUiService","AppConfig","injectorService","homeViewService","userService","notificationCenterService","apiLoggerService"],TopMenuBarController}(ControllerBase);return TopMenuBarController}),define("app/view/mainNav/topMenuBar/TopMenuBarDirective",["require","exports","./TopMenuBarController"],function(require,exports,TopMenuBarController){var TopMenuBarDirective=function(){function TopMenuBarDirective(){return{restrict:"E",transclude:!1,replace:!0,templateUrl:"app/view/mainNav/topMenuBar/TopMenuBarView.html",controller:TopMenuBarController,scope:{},link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return TopMenuBarDirective}();return appdynamicsModule.directive(StringUtils.toCamelCase("ad-top-menu-bar"),TopMenuBarDirective),TopMenuBarDirective}),define("app/view/mainNav/titleBar/MainTitleBarDirective",["require","exports","app/view/mainNav/titleBar/MainTitleBarController"],function(require,exports,MainTitleBarController){var MainTitleBarDirective=function(){function MainTitleBarDirective(){return{restrict:"E",transclude:!1,replace:!0,templateUrl:"app/view/mainNav/titleBar/MainTitleBarView.html",controller:MainTitleBarController,scope:{},link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return MainTitleBarDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-main-title-bar"),MainTitleBarDirective)});var MainNavigationHamburgerDirective=function(){function MainNavigationHamburgerDirective(){return{restrict:"E",replace:!1,scope:{adShowLabel:"@"},templateUrl:"app/view/mainNav/mainNavigation/MainNavigationHamburgerView.html",controller:MainNavigationController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return MainNavigationHamburgerDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-main-navigation-hamburger"),MainNavigationHamburgerDirective),define("app/view/mainNav/mainNavigation/MainNavigationHamburgerDirective",function(){});var MainNavigationTabsDirective=function(){function MainNavigationTabsDirective(){return{restrict:"E",replace:!1,scope:{},templateUrl:"app/view/mainNav/mainNavigation/MainNavigationTabsView.html",controller:MainNavigationController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return MainNavigationTabsDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-main-navigation-tabs"),MainNavigationTabsDirective),define("app/view/mainNav/mainNavigation/MainNavigationTabsDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MainNavigationController=function(_super){function MainNavigationController($scope){var _this=this;_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.navTopLevelZoneSwitcherLabel="Applications",this.isZoneSwitcherMenuEnabled=!0,this.navigationState=NavigationService.instance().navigationState,this.showEum=!1,this.alertRespondHelpBubbleEnabled=!0,this.navigationService=NavigationService.instance(),this.resourceManager=InjectorService.instance().resourceManager(),this.$scope.controller=this,InjectorService.instance().$rootScope().$on(NavigationService.UEV_NAV_ACTION_FLASH,function(){_this.on_UEV_NAV_ACTION()}),InjectorService.instance().$rootScope().$on(NavigationService.UEV_NAV_ACTION_HTML,function(){_this.on_UEV_NAV_ACTION()}),MasterService.instance().initData?(this.mainNavConfig=MasterService.instance().initData.mainNavConfig,this.showEum=this.mainNavConfig.showEum&&AppConfig.instance().eumTopLevelNavZoneEnabled):InjectorService.instance().$rootScope().$on(MasterService.UEV_INIT_DATA_FETCHED,function(){_this.mainNavConfig=MasterService.instance().initData.mainNavConfig,_this.showEum=_this.mainNavConfig.showEum&&AppConfig.instance().eumTopLevelNavZoneEnabled}),this.isZoneSwitcherMenuEnabled=!AppConfig.instance().admin&&!MasterService.instance().isDashboardViewerApp(),this.on_UEV_NAV_ACTION(),this.init()}return __extends(MainNavigationController,_super),MainNavigationController.prototype.link=function(scope,iElement){this.element=iElement},MainNavigationController.prototype.init=function(){},MainNavigationController.prototype.on_UEV_NAV_ACTION=function(){this.topLevelNav=this.navigationService.getTopLevelNavCurrent(),this.navTopLevelZoneSwitcherLabel=this.topLevelNav==NavigationService.TOP_LEVEL_NAV_APPLICATIONS?this.resourceManager.getString("ui","ms_applications"):this.topLevelNav==NavigationService.TOP_LEVEL_NAV_EUM?this.resourceManager.getString("ui","ms_eumTopLevelNavZoneLabel"):this.topLevelNav==NavigationService.TOP_LEVEL_NAV_DASHBOARDS_REPORTS?this.resourceManager.getString("ui","ms_dashboardsAndRepordsTopLevelNavZone"):this.topLevelNav==NavigationService.TOP_LEVEL_NAV_ANALYTICS?this.resourceManager.getString("ui","ms_analyticsNavLabel"):this.topLevelNav==NavigationService.TOP_LEVEL_NAV_DB_MONITORING?this.resourceManager.getString("ui","ms_dbMonTopLevelNavLabel"):this.topLevelNav==NavigationService.TOP_LEVEL_NAV_SERVER_MONITORING?this.resourceManager.getString("ui","ms_serverMonTopLevelNavLabel"):this.topLevelNav==NavigationService.TOP_LEVEL_NAV_INFRASTRUCTURE?this.resourceManager.getString("ui","ms_navLabelAutomation_AppLevel"):this.topLevelNav==NavigationService.TOP_LEVEL_NAV_ALERT_RESPOND?this.resourceManager.getString("ui","ms_aletAndRespondTopLevelNavZoneLabel"):this.topLevelNav==NavigationService.TOP_LEVEL_NAV_SETTINGS?this.resourceManager.getString("ui","ms_settingsTopLevelNavLabel"):this.resourceManager.getString("ui","ms_home"),this.navTopLevelZone=this.topLevelNav,this.alertRespondHelpBubbleEnabled=this.topLevelNav==NavigationService.TOP_LEVEL_NAV_APPLICATIONS&&this.navigationService.getCurrentUrlParams().location()!=NavigationDataConstants.APPS_ALL_DASHBOARD},MainNavigationController.prototype.onCurrentZoneLabelClick=function(){this.topLevelNav==NavigationService.TOP_LEVEL_NAV_APPLICATIONS?this.onZoneSwitchApplications():this.topLevelNav==NavigationService.TOP_LEVEL_NAV_EUM?this.onZoneSwitchEum():this.topLevelNav==NavigationService.TOP_LEVEL_NAV_DASHBOARD?this.onZoneSwitchCustomDashboards():this.topLevelNav==NavigationService.TOP_LEVEL_NAV_REPORTS?this.onZoneSwitchReports():this.topLevelNav==NavigationService.TOP_LEVEL_NAV_ANALYTICS?this.onZoneSwitchAnalytics():this.topLevelNav==NavigationService.TOP_LEVEL_NAV_DB_MONITORING?this.onZoneSwitchDBMon():this.topLevelNav==NavigationService.TOP_LEVEL_NAV_SERVER_MONITORING?this.onZoneSwitchServerMonitoring():this.topLevelNav==NavigationService.TOP_LEVEL_NAV_INFRASTRUCTURE?this.onZoneSwitchCloudAutoScaling():this.topLevelNav==NavigationService.TOP_LEVEL_NAV_SETTINGS&&this.onZoneSwitchSettings()},MainNavigationController.prototype.onZoneSwitchApplications=function(){var params=this.navigationService.getCurrentUrlParams();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APPS_ALL_DASHBOARD),this.navigationService.navigateTo(params.toString())},MainNavigationController.prototype.onZoneSwitchEum=function(){EumViewService.instance().viewHome()},MainNavigationController.prototype.onZoneSwitchDashboardsReports=function(){var params=this.navigationService.getCurrentUrlParams();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DASHBOARDS_REPORTS_HOME),this.navigationService.navigateTo(params.toString())},MainNavigationController.prototype.onZoneSwitchCustomDashboards=function(){var params=this.navigationService.getCurrentUrlParams();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DASHBOARD_LIST),this.navigationService.navigateTo(params.toString())},MainNavigationController.prototype.onZoneSwitchReports=function(){var params=this.navigationService.getCurrentUrlParams();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.REPORTS_HOME),this.navigationService.navigateTo(params.toString())},MainNavigationController.prototype.onZoneSwitchDBMon=function(){var params=this.navigationService.getCurrentUrlParams();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_SERVER_LIST),this.navigationService.navigateTo(params.toString())},MainNavigationController.prototype.onZoneSwitchServerMonitoring=function(){var params=this.navigationService.getCurrentUrlParams();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.SERVER_MONITORING_MACHINE_LIST),this.navigationService.navigateTo(params.toString())},MainNavigationController.prototype.onZoneSwitchAnalytics=function(){var params=this.navigationService.getCurrentUrlParams();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.ANALYTICS_SEARCH_LIST),this.navigationService.navigateTo(params.toString())},MainNavigationController.prototype.onZoneSwitchAlertRespond=function(){var params=this.navigationService.getCurrentUrlParams();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.ALERT_RESPOND_HOME),this.navigationService.navigateTo(params.toString())},MainNavigationController.prototype.onZoneSwitchCloudAutoScaling=function(){var params=this.navigationService.getCurrentUrlParams();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.INFRASTRUCTURE_HOME),this.navigationService.navigateTo(params.toString())},MainNavigationController.prototype.onZoneSwitchHome=function(){var params=this.navigationService.getCurrentUrlParams();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.AD_HOME),this.navigationService.navigateTo(params.toString())},MainNavigationController.prototype.onZoneSwitchSettings=function(){HomeViewService.instance().viewSettingsHome()},MainNavigationController.prototype.onClickZoneSwitcherButton=function(){},MainNavigationController.$inject=["$scope"],MainNavigationController}(ControllerBase);appdynamicsModule.controller("mainNavigationController",MainNavigationController),define("app/view/mainNav/mainNavigation/MainNavigationController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/mainNav/topMenuOptions/TopMenuOptionsController",["require","exports","app/view/mainNav/titleBar/MainTitleBarController"],function(require,exports,MainTitleBarController){var TopMenuOptionsController=function(_super){function TopMenuOptionsController($scope){var _this=this;_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.navigationState=NavigationService.instance().navigationState,this.disableDefaultDeepLinkCopy=!1,this.masterService=MasterService.instance(),this.showSetupMenu=!1,this.$scope.controller=this,MainTitleBarController.instance().topMenuOptionsControllers.push(this),this.masterService=MasterService.instance(),this.masterService.onInitDataFetch().then(function(){_this.processMainNavConfig(_this.masterService.initData.mainNavConfig)})}return __extends(TopMenuOptionsController,_super),TopMenuOptionsController.prototype.link=function(scope,iElement){this.element=iElement},TopMenuOptionsController.prototype.init=function(){},TopMenuOptionsController.prototype.onToggleTopMenuBar=function(){NavigationService.instance().setTopMenuBarMinimized(!this.navigationState.isTopMenuBarMinimized)},TopMenuOptionsController.prototype.onClickSettings=function(){HomeViewService.instance().viewSettingsHome()},TopMenuOptionsController.prototype.openMyPreferences=function(){HomeViewService.instance().viewUserPreferences()},TopMenuOptionsController.prototype.onMyADAccount=function(){ExternalUrls.open(ExternalUrls.MY_APPDYNAMICS_ACCOUNT)},TopMenuOptionsController.prototype.onLogout=function(){this.masterService.logout()},TopMenuOptionsController.prototype.onViewAdmin=function(){HomeViewService.instance().viewAdministration()},TopMenuOptionsController.prototype.onViewAgents=function(){HomeViewService.instance().viewAgentList()},TopMenuOptionsController.prototype.onViewLicense=function(){HomeViewService.instance().viewLicense()},TopMenuOptionsController.prototype.onSetCurrentLocationAsDefaultLandingScreen=function(){this.masterService.setCurrentLocationAsDefaultLandingScreen()},TopMenuOptionsController.prototype.onCopyLinkClick=function(){this.disableDefaultDeepLinkCopy||WebUtil.copyToClipboard(InjectorService.instance().$location().absUrl()),InjectorService.instance().$rootScope().$broadcast(App.UEV_COPY_LINK_TO_CLIPBOARD)},TopMenuOptionsController.prototype.onCopyLinkFixedTimeRange=function(){if(!this.disableDefaultDeepLinkCopy){var timeRangeSpecifierFixedTimeRange=DateTimeUtil.convertToBetweenTimes(TimeRangeService.instance().currentTimeRange),timeRangeFixedString=TimeRangeService.instance().convertToPreferenceString(timeRangeSpecifierFixedTimeRange,"."),urlParamsWithFixedTimeRange=URLParams.getCurrentUrlParams();urlParamsWithFixedTimeRange.setParam(UrlConstants.TIME_RANGE,timeRangeFixedString);var newPath="/"+urlParamsWithFixedTimeRange.toStringNoForwardSlash(),currentPath=InjectorService.instance().$location().path(),currentAbsUrl=InjectorService.instance().$location().absUrl(),absUrlWithFixedTime=currentAbsUrl.replace(currentPath,newPath);WebUtil.copyToClipboard(absUrlWithFixedTime)}InjectorService.instance().$rootScope().$broadcast(App.UEV_COPY_LINK_TO_CLIPBOARD)},TopMenuOptionsController.prototype.processMainNavConfig=function(mainNavConfig){this.mainNavConfig=mainNavConfig,this.showSetupMenu=mainNavConfig.showAdministrationMenuItem&&!AppConfig.instance().admin},TopMenuOptionsController.$inject=["$scope"],TopMenuOptionsController}(ControllerBase);return appdynamicsModule.controller("TopMenuOptionsController",TopMenuOptionsController),TopMenuOptionsController}),define("app/view/mainNav/topMenuOptions/TopMenuOptionsDirective",["require","exports","app/view/mainNav/topMenuOptions/TopMenuOptionsController"],function(require,exports,TopMenuOptionsController){var TopMenuOptionsDirective=function(){function TopMenuOptionsDirective(){return{restrict:"E",replace:!1,scope:{myData:"="},templateUrl:"app/view/mainNav/topMenuOptions/TopMenuOptionsView.html",controller:TopMenuOptionsController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return TopMenuOptionsDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-top-menu-options"),TopMenuOptionsDirective)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},LocationBarDirective=function(){function LocationBarDirective(){return{restrict:"E",replace:!1,scope:{},templateUrl:"app/view/mainNav/locationBar/LocationBarView.html",controller:LocationBarController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return LocationBarDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-location-bar"),LocationBarDirective);var LocationBarController=function(_super){function LocationBarController($scope){_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.locationBarEntryConfigs=[],this.locationBarEntryConfigsReversed=[],this.showLocation=!0,this.showHorizontalPath=!0,this.isHome=!1,this.isCurrentLocationHtml=!1,$scope.controller=this,EventBusService.instance().registerEventListener(EventConstants.UEV_LOCATION_BAR_DATA_SET_BY_FLEX,this.on_UEV_LOCATION_BAR_DATA_SET_BY_FLEX.bind(this),$scope),EventBusService.instance().registerEventListener(EventConstants.UEV_LOCATION_BAR_CONFIG_SET_BY_HTML,this.on_UEV_LOCATION_BAR_CONFIG_SET_BY_HTML.bind(this),$scope),this.init()}return __extends(LocationBarController,_super),LocationBarController.prototype.link=function(scope,iElement){this.element=iElement},LocationBarController.prototype.init=function(){},LocationBarController.prototype.setLocationConfigData=function(config,isHtmlLocation){var _this=this;if(this.locationBarConfig=config,this.isCurrentLocationHtml=isHtmlLocation,config&&config.locationBarEntryConfigs){var locationBarEntryConfigs=[],applicationName="",homeIsPresentInConfig=config.locationBarEntryConfigs.length>=1&&"Home"==config.locationBarEntryConfigs[0].label;homeIsPresentInConfig||AppConfig.instance().admin||locationBarEntryConfigs.push(HomeViewService.instance().getHomeLocationBarEntryConfig()),config.isApplicationLocation&&(locationBarEntryConfigs.push(ApplicationViewService.instance().getAllApplicationsLocationBarEntryConfig()),applicationName=config.locationBarEntryConfigs[0].label),locationBarEntryConfigs=locationBarEntryConfigs.concat(config.locationBarEntryConfigs);var locationBarEntryConfigsReversed=locationBarEntryConfigs.slice(0);if(locationBarEntryConfigsReversed.reverse(),this.locationBarEntryConfigs=locationBarEntryConfigs,this.isHome=locationBarEntryConfigs&&1==locationBarEntryConfigs.length&&"Home"==locationBarEntryConfigs[0].label,this.locationBarEntryConfigs.length>0&&(this.locationBarEntryConfigs[this.locationBarEntryConfigs.length-1].selected=!0),this.locationBarEntryConfigsReversed=locationBarEntryConfigsReversed,this.helpLink=config.helpLink,this.videoLink=config.videoLink,config.screenTitle)this.locationBarString=config.screenTitle;else if(this.locationBarEntryConfigs.length>0)if(config.isApplicationLocation){var isAppDashboad=1==config.locationBarEntryConfigs.length;this.locationBarString=isAppDashboad?this.locationBarEntryConfigsReversed[0].label:this.locationBarEntryConfigsReversed[0].label}else this.locationBarString=this.locationBarEntryConfigsReversed[0].label;InjectorService.instance().$timeout()(function(){var browserTitle=_this.locationBarString+" - AppDynamics";if(document.title=browserTitle,RecentlyVisitedService.instance().isEligableForRecentItems(URLParams.getCurrentUrlParams())){var name=_this.locationBarString,description="",path=[];_.each(_this.locationBarEntryConfigs,function(config){path.push(config.label),"Home"!==config.label&&(""!==description&&(description+=" > "),description+=config.label)});var imageSrc="images/empty.svg",selectedTabLabel=NavigationTabUtil.getSelectedNavigationTabLabelFromDom();selectedTabLabel&&(name+=" - "+selectedTabLabel,description+=" - "+selectedTabLabel),RecentlyVisitedService.instance().add(name,imageSrc,path,description)}},100)}},LocationBarController.prototype.on_UEV_LOCATION_BAR_CONFIG_SET_BY_HTML=function(data){var config=data;this.setLocationConfigData(config,!0)},LocationBarController.prototype.on_UEV_LOCATION_BAR_DATA_SET_BY_FLEX=function(flexLocationBarConfig){this.isCurrentLocationHtml=!1;for(var locations=flexLocationBarConfig.locationBarString.split(","),configs=[],i=0;i<locations.length;i++)configs.push(this.createLocationBarEntryConfigFromFlexLocation(locations[i]));var locationBarConfig={};locationBarConfig.locationBarEntryConfigs=configs,locationBarConfig.isApplicationLocation=flexLocationBarConfig.isAppScreen,this.setLocationConfigData(locationBarConfig,!1),ViewUtil.safeDigest(this.$scope)},LocationBarController.prototype.onLocationBarEntryClick=function(locationBarEntryConfig){_.isFunction(locationBarEntryConfig.clickFn)&&locationBarEntryConfig.clickFn.apply(this)},LocationBarController.prototype.onMouseEnterLocation=function(){},LocationBarController.prototype.onMouseLeaveLocation=function(){},LocationBarController.prototype.onDropDownToggle=function(dropDownOpen){this.showLocation=!dropDownOpen,ViewUtil.safeDigest(this.$scope)},LocationBarController.prototype.createLocationBarEntryConfigFromFlexLocation=function(locationName){var config={};return config.label=locationName,config.clickFn=function(){FlashService.instance().onLocationBarEntryClicked(locationName)},config},LocationBarController.$inject=["$scope"],LocationBarController}(ControllerBase);appdynamicsModule.controller("locationBarController",LocationBarController),define("app/view/mainNav/locationBar/LocationBarDirective",function(){}),require(["app/view/mainNav/topMenuBar/TopMenuBarController","app/view/mainNav/topMenuBar/TopMenuBarDirective","app/view/mainNav/titleBar/MainTitleBarController","app/view/mainNav/titleBar/MainTitleBarDirective","app/view/mainNav/mainNavigation/MainNavigationHamburgerDirective","app/view/mainNav/mainNavigation/MainNavigationTabsDirective","app/view/mainNav/mainNavigation/MainNavigationController","app/view/mainNav/topMenuOptions/TopMenuOptionsDirective","app/view/mainNav/topMenuOptions/TopMenuOptionsController","app/view/mainNav/locationBar/LocationBarDirective"]),define("app/view/mainNav/MainNavModuleCode",function(){});
var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ReportsCreateController=function(_super){function ReportsCreateController($scope,$rootScope,$location,$q,$timeout,$dialog,schedulingService,dialog,timeRangeService,applicationViewService,navigationUiService,applicationUiService,customDashboardUiService,accountUiService,resourceManager,notificationService,injectorService,reportsUiService,masterService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.$q=$q,this.$timeout=$timeout,this.$dialog=$dialog,this.schedulingService=schedulingService,this.dialog=dialog,this.timeRangeService=timeRangeService,this.applicationViewService=applicationViewService,this.navigationUiService=navigationUiService,this.applicationUiService=applicationUiService,this.customDashboardUiService=customDashboardUiService,this.accountUiService=accountUiService,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.reportsUiService=reportsUiService,this.masterService=masterService,this.tabs=[],this.reportsDataTab=null,this.ReportModeTitleMap=ReportsCreateController.ReportModeTitleMap,this.ModalModes=ReportsCreateController.ModalModes,this.TabType=ReportsCreateController.TabType,this.reportRecipients=[],this.reportTypesEnum=ScheduledReportType,this.scheduledReportLocation=ScheduledReportLocation,this.reportTypes=this.initReportTypes(),this.selectedReportType=this.reportTypes[0],this.reportFreqEnum=ScheduleFrequencies,this.emailError=!1,this.titleError=!1,this.isEmailConfigured=!0,this.FilterTypes=ReportsCreateController.mapFilterTypesToSelectOptions(),this.auditFilters=[],this.onSendReport=_.wrap(this.sendReport,this.checkEmailConfigurationBefore),this.onScheduleReport=_.wrap(this.scheduleReport,this.checkEmailConfigurationBefore),this.onUpdateReport=_.wrap(this.updateReport,this.checkEmailConfigurationBefore),$scope.controller=this,this.reportsModalMode=dialog.options.mode,this.reportTemplate=dialog.options.report,this.customDashboardId=dialog.options.customDashboardId,this.init()}return __extends(ReportsCreateController,_super),ReportsCreateController.mapFilterTypesToSelectOptions=function(){return _.map(ScheduledReportAuditFilterName.constants(),function(filterType){return{name:filterType,value:filterType}})},ReportsCreateController.prototype.addRecipient=function(){this.newRecipient?(_.contains(this.reportRecipients,this.newRecipient)||this.reportRecipients.push(this.newRecipient),this.newRecipient=""):this.emailError=!0},ReportsCreateController.prototype.deleteRecipient=function(index){this.reportRecipients.splice(index,1)},ReportsCreateController.prototype.close=function(){this.closeDialog(null)},ReportsCreateController.prototype.isReportType=function(reportType){return reportType===this.selectedReportType.value},ReportsCreateController.prototype.validateReport=function(){var valid=!0;return(!this.reportTitle||this.reportTitle.length<1||!Util.isSafeString(this.reportTitle))&&(this.titleError=!0,valid=!1),this.reportRecipients.length<1&&(this.emailError=!0,valid=!1),valid},ReportsCreateController.prototype.reportTypeChange=function(selectedOption){var _this=this;if(selectedOption.value===ScheduledReportLocation.APPS_ALL_DASHBOARD||selectedOption.value===ScheduledReportLocation.AD_HOME){if(this.tabs.length>2){var switchTo=ReportsCreateController.TabType.SCHEDULE;this.tabs[ReportsCreateController.TabType.RECIPIENTS].selected&&(switchTo=1),this.reportsDataTab=this.tabs.splice(1,1)[0],this.tabs[1].clickFn=function(){_this.selectTab(1)},this.tabs[1].fnArg=function(){return!_this.hasReportDataTab()},ViewUtil.safeApply(this.$scope),this.selectTab(switchTo)}}else if(2===this.tabs.length){var switchTo=ReportsCreateController.TabType.SCHEDULE;this.tabs[1].selected&&(switchTo=ReportsCreateController.TabType.RECIPIENTS),this.tabs.splice(1,0,this.reportsDataTab),this.tabs[2].clickFn=function(){_this.selectTab(2)},this.tabs[2].fnArg=function(){return!0},ViewUtil.safeApply(this.$scope),this.selectTab(switchTo)}},ReportsCreateController.prototype.isTabSelected=function(tabType){var totalTabs=this.tabs.length-1;return tabType>totalTabs&&(tabType=totalTabs),this.tabs[tabType].selected&&this.tabs[tabType].fnArg()},ReportsCreateController.prototype.isSendOnce=function(){return Util.isUndefOrNull(this.schedule.startTime)},ReportsCreateController.prototype.prevTab=function(){for(var i=1;i<this.tabs.length;i++)if(this.tabs[i].selected)return this.tabs[i-1].selected=!0,void(this.tabs[i].selected=!1)},ReportsCreateController.prototype.nextTab=function(){for(var i=0;i<this.tabs.length-1;i++)if(this.tabs[i].selected)return this.tabs[i+1].selected=!0,void(this.tabs[i].selected=!1)},ReportsCreateController.prototype.selectTab=function(tabNumber){switch(this.tabs[ReportsCreateController.TabType.SCHEDULE]&&(this.tabs[ReportsCreateController.TabType.SCHEDULE].selected=!1),this.tabs[ReportsCreateController.TabType.REPORT_DATA]&&(this.tabs[ReportsCreateController.TabType.REPORT_DATA].selected=!1),this.tabs[ReportsCreateController.TabType.RECIPIENTS]&&(this.tabs[ReportsCreateController.TabType.RECIPIENTS].selected=!1),tabNumber){case ReportsCreateController.TabType.SCHEDULE:this.tabs[ReportsCreateController.TabType.SCHEDULE]&&(this.tabs[ReportsCreateController.TabType.SCHEDULE].selected=!0);break;case ReportsCreateController.TabType.REPORT_DATA:this.tabs[ReportsCreateController.TabType.REPORT_DATA]&&(this.tabs[ReportsCreateController.TabType.REPORT_DATA].selected=!0);break;case ReportsCreateController.TabType.RECIPIENTS:this.tabs[ReportsCreateController.TabType.RECIPIENTS]&&(this.tabs[ReportsCreateController.TabType.RECIPIENTS].selected=!0)}},ReportsCreateController.prototype.initTabs=function(){var _this=this;this.tabs=[{name:resourceManager.getString("ui","ms_reportsScheduleTab"),selected:!0,clickFn:function(){_this.selectTab(ReportsCreateController.TabType.SCHEDULE)},fnArg:function(){return!0}},{name:resourceManager.getString("ui","ms_reportsReportDataTab"),selected:!1,clickFn:function(){_this.selectTab(ReportsCreateController.TabType.REPORT_DATA)},fnArg:function(){return _this.hasReportDataTab()}},{name:resourceManager.getString("ui","ms_reportsRecipientsTab"),selected:!1,clickFn:function(){_this.selectTab(ReportsCreateController.TabType.RECIPIENTS)},fnArg:function(){return!0}}]},ReportsCreateController.prototype.addFilter=function(){this.auditFilters.push({type:this.newFilterType.value,value:this.newFilterValue})},ReportsCreateController.prototype.deleteFilter=function(index){this.auditFilters.splice(index,1)},ReportsCreateController.prototype.onFrequencyChange=function(frequency){switch(frequency){case this.reportFreqEnum.SEND_ONCE:case this.reportFreqEnum.HOURLY:this.timeRange=this.initDefaultTimeRange(DateTimeUtil.MINUTES_PER_HOUR);break;case this.reportFreqEnum.DAILY:case this.reportFreqEnum.WEEKDAYS:case this.reportFreqEnum.MON_WED_FRI:case this.reportFreqEnum.TUE_THUR:this.timeRange=this.initDefaultTimeRange(DateTimeUtil.MINUTES_PER_DAY);break;case this.reportFreqEnum.WEEKLY:this.timeRange=this.initDefaultTimeRange(DateTimeUtil.MINUTES_PER_WEEK);break;case this.reportFreqEnum.MONTHLY:this.timeRange=this.initDefaultTimeRange(DateTimeUtil.MINUTES_PER_MONTH)}},ReportsCreateController.prototype.checkEmailConfigurationBefore=function(func){var args=Array.prototype.slice.call(arguments,1,arguments.length);return this.isEmailConfigured?func.apply(this,args):void this.notificationService.displayError(this.getString("ms_emailConfigWarning"),"")},ReportsCreateController.prototype.sendReport=function(){var _this=this,valid=this.validateReport();if(valid){var report=this.createReport(),resultHandler=function(){_this.closeDialog(null),_this.notificationService.displayMessage("Report sent successfully.","")};this.reportsUiService.sendClient(report).then(resultHandler)}},ReportsCreateController.prototype.scheduleReport=function(){var _this=this,valid=this.validateReport();if(valid){var report=this.createReport(),resultHandler=function(){_this.closeDialog({mode:_this.ModalModes.CREATE}),_this.notificationService.displayMessage("Report scheduled successfully.","")};this.reportsUiService.createReport(report).then(resultHandler)}},ReportsCreateController.prototype.updateReport=function(){var _this=this,valid=this.validateReport();if(valid){var report=this.createReport();this.reportTemplate=this.clearReport(this.reportTemplate),_.extend(this.reportTemplate,report);var resultHandler=function(){_this.closeDialog({mode:_this.ModalModes.CREATE}),_this.notificationService.displayMessage("Report updated successfully.","")};this.reportsUiService.updateReport(this.reportTemplate).then(resultHandler)}},ReportsCreateController.prototype.createReport=function(){var report={};return report.name=this.reportTitle,report.scheduledReportSubTitle=this.scheduledReportSubTitle,report.type=this.selectedReportType.value,report.timeRange=this.timeRangeService.convertToPreferenceString(this.timeRange,"."),report.reportDataIds=[this.getDataId()],report.recipients=this.getRecipients(),report.auditFilters=this.getAuditFilters(),this.isAnyPageReport()&&(report.type=ScheduledReportType.ANY_PAGE,report.scheduledReportLocation=this.selectedReportType.value),report.selectors="",this.selectedReportType.value===ScheduledReportLocation.EUM_WEB_MAIN_DASHBOARD&&(report.scheduledReportObject=ScheduledReportObject.application,report.scheduledReportObjectId=this.selectedEumWebApplication.id+""),report=this.setSchedule(report)},ReportsCreateController.prototype.clearReport=function(report){return report.second=null,report.minute=null,report.hours=null,report.timeZoneId=null,report.dayOfWeek=null,report.dayOfMonth=null,report.month=null,report.year=null,report.startTime=null,report.endTime=null,report},ReportsCreateController.prototype.getDataId=function(){switch(this.selectedReportType.value){case ScheduledReportType.APP_HEALTH:return parseInt(this.selectedApplication.id);case ScheduledReportType.CUSTOM_DASH:return parseInt(this.selectedDashboard.id)}},ReportsCreateController.prototype.getAuditFilters=function(){return _.map(this.auditFilters,function(filter){return{name:filter.type,value:filter.value}})},ReportsCreateController.prototype.getRecipients=function(){return _.map(this.reportRecipients,function(recipient){return{name:recipient,value:recipient}})},ReportsCreateController.prototype.hasReportDataTab=function(){return 3===this.tabs.length},ReportsCreateController.prototype.setSchedule=function(report){return this.updateReportFromScheduleExpression(report,this.schedule)},ReportsCreateController.prototype.updateReportFromScheduleExpression=function(report,scheduleExpression){return scheduleExpression?(report||(report={}),scheduleExpression.second&&(report.second=scheduleExpression.second),scheduleExpression.minute&&(report.minute=scheduleExpression.minute),scheduleExpression.hours&&(report.hours=scheduleExpression.hours),scheduleExpression.timezone&&(report.timeZoneId=scheduleExpression.timezone),scheduleExpression.dayOfWeek&&(report.dayOfWeek=scheduleExpression.dayOfWeek),scheduleExpression.dayOfMonth&&(report.dayOfMonth=scheduleExpression.dayOfMonth),scheduleExpression.month&&(report.month=scheduleExpression.month),scheduleExpression.year&&(report.year=scheduleExpression.year),scheduleExpression.startTime&&(report.startTime=new Date(scheduleExpression.startTime)),scheduleExpression.endTime&&(report.endTime=new Date(scheduleExpression.endTime)),report):report},ReportsCreateController.prototype.updateScheduleExpressionFromReport=function(scheduleExpression,report){return report?(scheduleExpression||(scheduleExpression={}),report.second&&(scheduleExpression.second=report.second),report.minute&&(scheduleExpression.minute=report.minute),report.hours&&(scheduleExpression.hours=report.hours),report.timeZoneId&&(scheduleExpression.timezone=report.timeZoneId),report.dayOfWeek&&(scheduleExpression.dayOfWeek=report.dayOfWeek),report.dayOfMonth&&(scheduleExpression.dayOfMonth=report.dayOfMonth),report.month&&(scheduleExpression.month=report.month),report.year&&(scheduleExpression.year=report.year),report.startTime&&(scheduleExpression.startTime=report.startTime.getTime()),report.endTime&&(scheduleExpression.endTime=report.endTime.getTime()),scheduleExpression):scheduleExpression},ReportsCreateController.prototype.init=function(){var _this=this;this.initTabs();var urlParams=new URLParams(this.$location.path()),currentId=urlParams.application();this.appId=parseInt(currentId),this.timeRange=this.initDefaultTimeRange(DateTimeUtil.MINUTES_PER_HOUR),this.newFilterType=this.FilterTypes[0],this.fetchApplications(),this.fetchCustomDashboards(),this.fetchSubdomains(),this.schedule=this.updateScheduleExpressionFromReport(this.schedule,this.reportTemplate),this.$scope.$watch("controller.reportFrequency",function(reportFrequency){return _this.onFrequencyChange(reportFrequency)}),this.$scope.$on(EventConstants.UEV_EMAIL_CONFIG_UPDATE,function(event,isEmailConfigured){_this.isEmailConfigured=isEmailConfigured})},ReportsCreateController.prototype.initData=function(){this.reportTemplate&&this.overideDefaults(this.reportTemplate),this.customDashboardId&&this.setCustomDashboard(this.customDashboardId)},ReportsCreateController.prototype.overideDefaults=function(report){switch(this.reportTitle=report.name,this.scheduledReportSubTitle=report.scheduledReportSubTitle,this.selectedReportType=_.findWhere(this.reportTypes,{value:report.type}),report.type){case ScheduledReportType.APP_HEALTH:this.selectedApplication=_.findWhere(this.applications,{id:report.reportDataIds[0]}),this.timeRange=this.getTimeRange(report.timeRange);break;case ScheduledReportType.CUSTOM_DASH:this.selectedDashboard=_.findWhere(this.customDashboards,{id:report.reportDataIds[0]});break;case ScheduledReportType.CONTROLLER_AUDIT:this.timeRange=this.getTimeRange(report.timeRange)}this.reportRecipients=_.map(report.recipients,function(recipient){return recipient.value}),this.auditFilters=_.map(report.auditFilters,function(filter){return{type:filter.name,value:filter.value}})},ReportsCreateController.prototype.setCustomDashboard=function(dashboardId){this.selectedReportType=_.findWhere(this.reportTypes,{value:ScheduledReportType.CUSTOM_DASH}),this.selectedDashboard=_.findWhere(this.customDashboards,{id:parseInt(dashboardId)})},ReportsCreateController.prototype.initDefaultTimeRange=function(duration){void 0===duration&&(duration=-1);var timeRangeSpecifier={};return timeRangeSpecifier.durationInMinutes=-1==duration?DateTimeUtil.MINUTES_PER_HOUR:duration,timeRangeSpecifier.type=TimeRangeSpecifierType.BEFORE_NOW,timeRangeSpecifier},ReportsCreateController.prototype.getTimeRange=function(timeRangeString){var timeRangeElements=timeRangeString.split("."),timeRangeSpecifier={};return timeRangeSpecifier.type=timeRangeElements[1],timeRangeSpecifier.durationInMinutes=parseInt(timeRangeElements[4]),timeRangeSpecifier},ReportsCreateController.prototype.isAnyPageReport=function(){return this.selectedReportType.value===ScheduledReportLocation.AD_HOME||this.selectedReportType.value===ScheduledReportLocation.APPS_ALL_DASHBOARD||this.selectedReportType.value===ScheduledReportLocation.EUM_WEB_MAIN_DASHBOARD},ReportsCreateController.prototype.initReportTypes=function(){return[{name:"Application Health",value:ScheduledReportType.APP_HEALTH},{name:"Dashboard",value:ScheduledReportType.CUSTOM_DASH},{name:"Controller Audit",value:ScheduledReportType.CONTROLLER_AUDIT},{name:resourceManager.getString("ui","ms_reportsHomePage"),value:ScheduledReportLocation.AD_HOME},{name:resourceManager.getString("ui","ms_reportsAllAppsDashboard"),value:ScheduledReportLocation.APPS_ALL_DASHBOARD},{name:resourceManager.getString("ui","ms_reportsEumApps"),value:ScheduledReportLocation.EUM_WEB_MAIN_DASHBOARD}]},ReportsCreateController.prototype.fetchApplications=function(){var _this=this;this.applicationUiService.getApmApplications().then(function(data){var apps=_this.applicationUiService.getApmApplications_response(data);_this.applications=_this.createSelectOptionList(apps),_this.applications.length>0&&(_this.selectedApplication=_this.applications[0]),_this.initData()})},ReportsCreateController.prototype.fetchCustomDashboards=function(){var _this=this,includeTierNodeDashboards=!1;this.customDashboardUiService.getAllDashboardsByType(includeTierNodeDashboards).then(function(data){var dashboards=_this.customDashboardUiService.getAllDashboardsByType_response(data);dashboards=Util.sortByName(dashboards),_this.customDashboards=_this.createSelectOptionList(dashboards),_this.customDashboards.length>0&&(_this.selectedDashboard=_this.customDashboards[0]),_this.initData()})},ReportsCreateController.prototype.showEUMOptions=function(){return this.selectedReportType.value===ScheduledReportLocation.EUM_WEB_MAIN_DASHBOARD},ReportsCreateController.prototype.fetchSubdomains=function(){var _this=this;this.subdomains=this.createSelectOptionList([{id:ScheduledReportLocation.AD_HOME,name:resourceManager.getString("ui","ms_reportsHomePage")},{id:ScheduledReportLocation.APPS_ALL_DASHBOARD,name:resourceManager.getString("ui","ms_reportsAllAppsDashboard")},{id:ScheduledReportLocation.EUM_WEB_MAIN_DASHBOARD,name:resourceManager.getString("ui","ms_reportsEumApps")}]),this.selectedSubdomain=this.subdomains[0],EUMApplicationsUiService.instance().getEumWebApplications().then(function(response){var applications=EUMApplicationsUiService.instance().getEumWebApplications_response(response);_this.eumWebApplications=_this.createSelectOptionList(applications),_this.eumWebApplications.length>0&&(_this.selectedEumWebApplication=_this.eumWebApplications[0])}),this.initData()},ReportsCreateController.prototype.createSelectOptionList=function(data){return _.map(data,function(d){return{id:d.id,name:d.name,value:d.name}})},ReportsCreateController.prototype.closeDialog=function(eventData){eventData&&this.$rootScope.$broadcast(ReportsCreateController.ModalCloseEvent,eventData),this.dialog.close()},ReportsCreateController.$inject=["$scope","$rootScope","$location","$q","$timeout","$dialog","schedulingService","dialog","timeRangeService","applicationViewService","navigationUiService","applicationUiService","customDashboardUiService","accountUiService","resourceManager","notificationService","injectorService","reportsUiService","masterService"],ReportsCreateController.ModalModes={CREATE:"CREATE",UPDATE:"UPDATE"},ReportsCreateController.ReportModeTitleMap={CREATE:"Create",UPDATE:"Update"},ReportsCreateController.TabType={SCHEDULE:0,REPORT_DATA:1,RECIPIENTS:2},ReportsCreateController.ModalCloseEvent="UEV_CLOSE_CREATE_REPORT_MODAL",ReportsCreateController}(ControllerBase);appdynamicsModule.controller("ReportsCreateController",ReportsCreateController),define("app/view/reports/create/ReportsCreateController",function(){});var SchedulingWidgetDirective=function(){function SchedulingWidgetDirective(){return{restrict:"E",templateUrl:"app/view/reports/schedulingWidget/SchedulingWidgetView.html",replace:!1,scope:{adSchedule:"=",adReportFrequency:"="},controller:"SchedulingWidgetController"}}return SchedulingWidgetDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-scheduling-widget"),SchedulingWidgetDirective),define("app/view/reports/schedulingWidget/SchedulingWidgetDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/reports/schedulingWidget/SchedulingWidgetController",["require","exports","../../../../shared/utils/TimeZoneUtil"],function(require,exports,timeZoneUtil){var SchedulingWidgetController=function(_super){function SchedulingWidgetController($scope,$rootScope,$location,$timeout,resourceManager,notificationService,injectorService,masterService,schedulingService,userPreferenceUiService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.$timeout=$timeout,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.masterService=masterService,this.schedulingService=schedulingService,this.userPreferenceUiService=userPreferenceUiService,this.reportFrequenciesEnum=ScheduleFrequencies,this.reportFrequencies=this.initReportFreqs(),this.reportFrequency=this.reportFrequencies[6],this.sendAtHourlyOptions=this.initSendAtHourlyTimes(),this.sendAtHourlyTime=this.sendAtHourlyOptions[0],this.daysOfMonth=this.initDaysOfMonth(),this.dayOfMonth=this.daysOfMonth[0],this.dayOfWeek={},this.repeatsValue=1,this.EndOptions=SchedulingWidgetController.EndOptions,this.updateSchedule=function(){ADLoggerService.warn("SchedulingWidgetController.updateSchedule Debug: Enter adSchedule is\n "+Util.stringifyWithIndent(_this.$scope.adSchedule));var schedule={};if(_this.$scope.adReportFrequency=_this.reportFrequency.id,_this.reportFrequency.id===ScheduleFrequencies.SEND_ONCE)return void(_this.$scope.adSchedule={});switch(schedule=_this.setStartEndTimes(schedule),_this.reportFrequency.id!==ScheduleFrequencies.HOURLY&&(schedule=_this.setSendAtTime(schedule),schedule=_this.setSendAtTimeZone(schedule)),_this.reportFrequency.id){case ScheduleFrequencies.HOURLY:schedule.minute=_this.sendAtHourlyTime.value,schedule.hours=_.range(0,24,_this.repeatsValue).join(",");break;case ScheduleFrequencies.DAILY:break;case ScheduleFrequencies.WEEKDAYS:schedule.dayOfWeek="Mon-Fri";break;case ScheduleFrequencies.MON_WED_FRI:schedule.dayOfWeek="Mon, Wed, Fri";break;case ScheduleFrequencies.TUE_THUR:schedule.dayOfWeek="Tue, Thu";break;case ScheduleFrequencies.WEEKLY:schedule.dayOfWeek=_this.getDaysOfWeek();break;case ScheduleFrequencies.MONTHLY:var day=_this.startDate.getDate(),month=_this.startDate.getMonth();schedule.dayOfMonth=day>28?"Last":day.toString(),schedule.month=_.map(_.range(month,month+12,_this.repeatsValue),function(month){return month%12+1}).join(",")}_this.$scope.adSchedule=schedule},$scope.controller=this,this.init()}return __extends(SchedulingWidgetController,_super),SchedulingWidgetController.prototype.isReportFrequency=function(reportFrequency){return reportFrequency===this.reportFrequency.id},SchedulingWidgetController.prototype.getRepeatText=function(){switch(this.reportFrequency.id){case ScheduleFrequencies.HOURLY:return"hours";case ScheduleFrequencies.DAILY:return"days";case ScheduleFrequencies.WEEKLY:return"weeks";case ScheduleFrequencies.MONTHLY:return"months";case ScheduleFrequencies.YEARLY:return"years";default:return""}},SchedulingWidgetController.prototype.setSchedule=function(schedule){var freqId=this.schedulingService.getScheduleFrequency(schedule);switch(this.reportFrequency=_.findWhere(this.reportFrequencies,{id:freqId}),this.startDate=new Date(schedule.startTime),schedule.endTime&&(this.endDate=new Date(schedule.endTime),this.endsRadio=SchedulingWidgetController.EndOptions.DATE),this.reportFrequency.id!==ScheduleFrequencies.HOURLY&&(this.sendAtTime=_.findWhere(this.sendAtOptions,{id:this.getSendAtTime(schedule)}),this.sendAtTimeZone=timeZoneUtil.TimeZoneUtil.getTimeZoneById(schedule.timezone)),this.reportFrequency.id){case ScheduleFrequencies.HOURLY:this.sendAtHourlyTime=_.findWhere(this.sendAtHourlyOptions,{id:schedule.minute}),this.repeatsValue=24/schedule.hours.split(",").length;break;case ScheduleFrequencies.DAILY:case ScheduleFrequencies.WEEKDAYS:case ScheduleFrequencies.MON_WED_FRI:case ScheduleFrequencies.TUE_THUR:break;case ScheduleFrequencies.WEEKLY:this.setDaysOfWeek(schedule);break;case ScheduleFrequencies.MONTHLY:this.repeatsValue=12/schedule.month.split(",").length}},SchedulingWidgetController.prototype.updateStartDate=function(value){this.startDate=value,this.updateSchedule()},SchedulingWidgetController.prototype.setSendAtTime=function(schedule){this.sendAtTime||(this.initTimes(),this.initDayOfWeek(),this.initStartEndDates());var timeInfo=this.sendAtTime.value.split(":"),hours=parseInt(timeInfo[0]),minute=timeInfo[1].indexOf("30")>-1?30:0;return this.isTwentyFourHourTime||(hours%=12,hours+=timeInfo[1].indexOf("pm")>-1?12:0),schedule.hours=hours.toString(),schedule.minute=minute.toString(),schedule},SchedulingWidgetController.prototype.getSendAtTime=function(schedule){var time,hours=parseInt(schedule.hours),minutes=schedule&&schedule.minute&&schedule.minute.indexOf("30")>-1?"30":"00";if(this.isTwentyFourHourTime)time=hours+":"+minutes;else{var meridiem=Math.floor(parseInt(schedule.hours)/12)>0?"pm":"am";hours%=12,time=hours+":"+minutes+meridiem}return time},SchedulingWidgetController.prototype.setSendAtTimeZone=function(schedule){return this.sendAtTimeZone&&(schedule.timezone=this.sendAtTimeZone.timeZoneId),schedule},SchedulingWidgetController.prototype.getSendAtTimeZone=function(schedule){return schedule.timezone},SchedulingWidgetController.prototype.setStartEndTimes=function(schedule){var _this=this;return schedule.startTime=this.startDate.getTime(),this.endsRadio===SchedulingWidgetController.EndOptions.DATE&&this.$timeout(function(){schedule.endTime=_this.endDate.getTime()},1),schedule},SchedulingWidgetController.prototype.getDaysOfWeek=function(){var days=[];return _.each(this.dayOfWeek,function(value,day){value&&days.push(day)}),0==days.length&&days.push(SchedulingWidgetController.DEFAULT_DAY),days.join(",")},SchedulingWidgetController.prototype.setDaysOfWeek=function(schedule){var _this=this;this.dayOfWeek={};var days=schedule.dayOfWeek.split(",");_.each(days,function(value){_this.dayOfWeek[value]=!0})},SchedulingWidgetController.prototype.init=function(){ADLoggerService.warn("SchedulingWidgetController.init Debug: Enter adSchedule is\n "+Util.stringifyWithIndent(this.$scope.adSchedule)),this.initTimes(),this.initEventListeners(),this.initDayOfWeek(),this.initStartEndDates(),this.$scope.adSchedule&&this.setSchedule(this.$scope.adSchedule)},SchedulingWidgetController.prototype.initEventListeners=function(){this.$scope.$watch("controller.reportFrequency",this.updateSchedule),this.$scope.$watch("controller.sendAtTime",this.updateSchedule),this.$scope.$watch("controller.sendAtTimeZone",this.updateSchedule),this.$scope.$watch("controller.sendAtHourlyTime",this.updateSchedule),this.$scope.$watch("controller.repeatsValue",this.updateSchedule),this.$scope.$watch("controller.dayOfWeek",this.updateSchedule,!0),this.$scope.$watch("controller.endsRadio",this.updateSchedule)},SchedulingWidgetController.prototype.initTimes=function(){var preferredTimeFormat=UserService.instance().getUserPreferenceValue(UserPreferenceConstants.TIME_FORMAT);this.isTwentyFourHourTime=preferredTimeFormat===TimeRangeService.TIME_FORMAT_24_HOUR,this.sendAtOptions=this.initSendAtTimes(),this.sendAtTime=this.sendAtOptions[14],this.initSendAtTimeZone()},SchedulingWidgetController.prototype.initSendAtTimeZone=function(){this.sendAtTimeZone||(this.sendAtTimeZone=timeZoneUtil.TimeZoneUtil.getDefaultTimeZone())},SchedulingWidgetController.prototype.initDayOfWeek=function(){var day=(new Date).getDay();switch(day){case 0:this.dayOfWeek.Sun=!0;break;case 1:this.dayOfWeek.Mon=!0;break;case 2:this.dayOfWeek.Tue=!0;break;case 3:this.dayOfWeek.Wed=!0;break;case 4:this.dayOfWeek.Thu=!0;break;case 5:this.dayOfWeek.Fri=!0;break;case 6:this.dayOfWeek.Sat=!0}},SchedulingWidgetController.prototype.initStartEndDates=function(){this.startDate=new Date,this.endDate=new Date,this.endDate.setFullYear(this.endDate.getFullYear()+1),this.endsRadio="NEVER"},SchedulingWidgetController.prototype.initReportFreqs=function(){return[{id:ScheduleFrequencies.SEND_ONCE,name:"One Time Only",value:ScheduleFrequencies.SEND_ONCE},{id:ScheduleFrequencies.HOURLY,name:"Hourly",value:ScheduleFrequencies.HOURLY},{id:ScheduleFrequencies.DAILY,name:"Daily",value:ScheduleFrequencies.DAILY},{id:ScheduleFrequencies.WEEKDAYS,name:"Every Weekday (Monday to Friday)",value:ScheduleFrequencies.WEEKDAYS},{id:ScheduleFrequencies.MON_WED_FRI,name:"Every Monday, Wednesday, and Friday",value:ScheduleFrequencies.MON_WED_FRI},{id:ScheduleFrequencies.TUE_THUR,name:"Every Tuesday and Thursday",value:ScheduleFrequencies.TUE_THUR},{id:ScheduleFrequencies.WEEKLY,name:"Weekly",value:ScheduleFrequencies.WEEKLY},{id:ScheduleFrequencies.MONTHLY,name:"Monthly",value:ScheduleFrequencies.MONTHLY}]},SchedulingWidgetController.prototype.initSendAtTimes=function(){var _this=this,sendAtTimes=[];return this.isTwentyFourHourTime?_.each(_.range(0,24),function(hour){sendAtTimes.push(_this.createSelectEntryTime(hour,"00","")),sendAtTimes.push(_this.createSelectEntryTime(hour,"30",""))}):sendAtTimes=sendAtTimes.concat(this.createSelectEntryTimes("am"),this.createSelectEntryTimes("pm")),sendAtTimes},SchedulingWidgetController.prototype.initSendAtHourlyTimes=function(){return _.map(_.range(0,60,5),function(time){return{id:time.toString(),name:time.toString(),value:time.toString()}})},SchedulingWidgetController.prototype.createSelectEntryTimes=function(meridian){for(var sendAtTimes=[],i=0;11>=i;i++)sendAtTimes.push(this.createSelectEntryTime(i,"00",meridian)),sendAtTimes.push(this.createSelectEntryTime(i,"30",meridian));return sendAtTimes},SchedulingWidgetController.prototype.createSelectEntryTime=function(hour,minutes,meridian){var hourString=hour.toString();this.isTwentyFourHourTime&&(hourString=("0"+hour).slice(-2));var time=hourString+":"+minutes+meridian;if(0===hour){hourString="12";var timeAdjustment=hourString+":"+minutes+meridian;return{id:time,name:timeAdjustment,value:time}}return{id:time,name:time,value:time}},SchedulingWidgetController.prototype.initDaysOfMonth=function(){return _.map(_.range(1,32),function(day){return{id:day.toString(),name:day.toString(),value:day.toString()}})},SchedulingWidgetController.EndOptions={NEVER:"NEVER",DATE:"DATE"},SchedulingWidgetController.DEFAULT_DAY="Sun",SchedulingWidgetController.$inject=["$scope","$rootScope","$location","$timeout","resourceManager","notificationService","injectorService","masterService","schedulingService","userPreferenceUiService"],SchedulingWidgetController}(ControllerBase);appdynamicsModule.controller("SchedulingWidgetController",SchedulingWidgetController)});var SchedulingService=function(){function SchedulingService(){}return SchedulingService.prototype.displayScheduleFrequency=function(schedule){var displayFreq="",freq="string"==typeof schedule?schedule:this.getScheduleFrequency(schedule);switch(freq){case ScheduleFrequencies.HOURLY:displayFreq="Hourly";break;case ScheduleFrequencies.DAILY:displayFreq="Daily";break;case ScheduleFrequencies.MON_WED_FRI:displayFreq="Monday, Wednesday, and Friday'";break;case ScheduleFrequencies.TUE_THUR:displayFreq="Tuesday and Thursday";break;case ScheduleFrequencies.WEEKDAYS:displayFreq="Weekdays";break;case ScheduleFrequencies.WEEKLY:displayFreq="Weekly";break;case ScheduleFrequencies.MONTHLY:displayFreq="Monthly";break;case ScheduleFrequencies.YEARLY:displayFreq="Yearly"}return displayFreq},SchedulingService.prototype.getScheduleFrequency=function(schedule){var freq="";return freq="Mon-Fri"===schedule.dayOfWeek?ScheduleFrequencies.WEEKDAYS:"Mon, Wed, Fri"===schedule.dayOfWeek?ScheduleFrequencies.MON_WED_FRI:"Tue, Thu"===schedule.dayOfWeek?ScheduleFrequencies.TUE_THUR:schedule.dayOfWeek&&schedule.dayOfWeek.split(",").length>0?ScheduleFrequencies.WEEKLY:schedule.hours&&schedule.hours.split(",").length>1?ScheduleFrequencies.HOURLY:schedule.month&&schedule.month.split(",").length>1?ScheduleFrequencies.MONTHLY:schedule.month?ScheduleFrequencies.YEARLY:ScheduleFrequencies.DAILY},SchedulingService.prototype.clearSchedule=function(schedule){return schedule.second=null,schedule.minute=null,schedule.hours=null,schedule.dayOfWeek=null,schedule.dayOfMonth=null,schedule.month=null,schedule.year=null,schedule.timezone=null,schedule.startTime=null,schedule.endTime=null,schedule
},SchedulingService.$inject=[],SchedulingService}(),ScheduleFrequencies=function(){function ScheduleFrequencies(){}return ScheduleFrequencies.SEND_ONCE="SEND_ONCE",ScheduleFrequencies.HOURLY="HOURLY",ScheduleFrequencies.DAILY="DAILY",ScheduleFrequencies.WEEKDAYS="WEEKDAYS",ScheduleFrequencies.MON_WED_FRI="MON_WED_FRI",ScheduleFrequencies.TUE_THUR="TUE_THUR",ScheduleFrequencies.WEEKLY="WEEKLY",ScheduleFrequencies.MONTHLY="MONTHLY",ScheduleFrequencies.YEARLY="YEARLY",ScheduleFrequencies}();appdynamicsModule.service("schedulingService",SchedulingService),define("app/view/reports/schedulingWidget/SchedulingService",function(){});var PreferencesService=function(){function PreferencesService(){}return PreferencesService.savePreference=function(key,value,$http){var preferences={};preferences[key]=value,$http({method:"POST",url:PreferencesService.URL_USER_PREFERENCES,data:preferences}).success(function(){}).error(function(){})},PreferencesService.URL_USER_PREFERENCES="restui/user/preferences",PreferencesService.ALL_APPLICATIONS_DASHBOARD_VIEW_MODE="ALL_APPLICATIONS_DASHBOARD_VIEW_MODE",PreferencesService}();define("app/services/PreferencesService",function(){});var SvgIcon=function(){function SvgIcon(){return{restrict:"E",transclude:!0,templateUrl:"app/view/components/svgIcon/SvgIconView.html",scope:{adTip:"@",adBaseImage:"@",adHoverImage:"@",adSvgImageWidth:"@",adSvgImageHeight:"@"},controller:SvgIconController}}return SvgIcon}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-svg-icon"),SvgIcon),define("app/view/components/svgIcon/SvgIconDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SvgIconController=function(_super){function SvgIconController($scope){_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.$scope.controller=this,this.$scope.adHoverImage?(this.imageSource=this.$scope.adBaseImage+".svg",this.hoverImageSource=this.$scope.adHoverImage+".svg"):(this.imageSource=this.$scope.adBaseImage+"_white.svg",this.hoverImageSource=this.$scope.adBaseImage+"_hover.svg"),this.showHover=!1,this.$scope.adSvgImageWidth&&this.$scope.adSvgImageHeight&&(this.customSvgStyle={width:this.$scope.adSvgImageWidth.toString(),height:this.$scope.adSvgImageHeight.toString(),cursor:"pointer"})}return __extends(SvgIconController,_super),SvgIconController.prototype.init=function(){},SvgIconController.prototype.onMouseEnter=function(){this.showHover=!0},SvgIconController.prototype.onMouseLeave=function(){this.showHover=!1},SvgIconController.$inject=["$scope"],SvgIconController}(ControllerBase);appdynamicsModule.controller("SvgIconController",SvgIconController),define("app/view/components/svgIcon/SvgIconController",function(){});var ToolbarButton=function(){function ToolbarButton(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"app/view/components/toolbarButton/ToolbarButton.html",scope:{image:"@",adHoverImage:"@",label:"@",tip:"@",innerClick:"&singleClick",svDisabled:"=",adSelected:"=",adHideLabel:"@",adLabelPosition:"@",adSvgImageWidth:"@",adSvgImageHeight:"@",adWidgetMenu:"@"},link:function(scope){scope.adLabelPosition||(scope.adLabelPosition=ToolbarButton.TOOLBAR_LABEL_POSITON_BOTTOM),scope.isSvgIcon=scope.image&&StringUtils.endsWith(scope.image,".svg"),scope.adSvgImageWidth&&scope.adSvgImageHeight&&(scope.customSvgStyle={width:scope.adSvgImageWidth,height:scope.adSvgImageHeight}),scope.onMouseOver=function(event){Util.isDefAndNotNull(scope.adHoverImage)&&$(event.currentTarget).find("img").attr("src",scope.adHoverImage)},scope.onMouseLeave=function(event){Util.isDefAndNotNull(scope.adHoverImage)&&$(event.currentTarget).find("img").attr("src",scope.image)},scope.click=function(event){scope.svDisabled!==!0&&"function"==typeof scope.innerClick&&scope.innerClick({event:event})}}}}return ToolbarButton.TOOLBAR_LABEL_POSITON_BOTTOM="bottom",ToolbarButton.TOOLBAR_LABEL_POSITON_RIGHT="right",ToolbarButton}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-toolbar-button"),ToolbarButton),define("app/view/components/toolbarButton/ToolbarButton",function(){}),define("app/view/components/toolbar/ToolbarDirective",["require","exports"],function(){var ToolbarDirective=function(){function ToolbarDirective(){return{restrict:"E",transclude:!0,template:"<div class='ads-toolbar-new-container' ng-transclude></div>",link:function(scope,elem){elem.addClass("ads-toolbar-new-container")}}}return ToolbarDirective}();return adComponentsModule.directive(StringUtils.toCamelCase("ad-toolbar"),ToolbarDirective),ToolbarDirective});var ToolbarItemContainerDirective=function(){function ToolbarItemContainerDirective(){return{restrict:"E",transclude:!0,template:"<div class='ads-toolbar-item-container ads-display-table pull-left'><div ng-transclude class='ads-display-table-cell ads-vertical-align'></div></div>"}}return ToolbarItemContainerDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-toolbar-item-container"),ToolbarItemContainerDirective),define("app/view/components/toolbar/toolbarItemContainer/ToolbarItemContainer",function(){});var ToolbarButtonDirective=function(){function ToolbarButtonDirective(){return{restrict:"E",replace:!0,scope:{adImageUrl:"@",adToggledImageUrl:"@",adLabel:"@",adToggledLabel:"@",adToolTip:"@",adToggled:"=?",adDisabled:"=",adOnClick:"&",adIconOnlyMode:"@"},controller:"ToolbarButtonController",templateUrl:"app/view/components/toolbar/toolbarButton/ToolbarButtonView.html"}}return ToolbarButtonDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-toolbar-button-new"),ToolbarButtonDirective),define("app/view/components/toolbar/toolbarButton/ToolbarButtonDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ToolbarButtonController=function(_super){function ToolbarButtonController($scope){_super.call(this,$scope),this.$scope=$scope,this.isIconOnlyMode=!1,this.$scope.controller=this,this.isIconOnlyMode="true"===this.$scope.adIconOnlyMode}return __extends(ToolbarButtonController,_super),ToolbarButtonController.prototype.onClick=function(){this.$scope.adDisabled||(this.$scope.adOnClick(),this.$scope.adToggled=!this.$scope.adToggled)},ToolbarButtonController.$inject=["$scope"],ToolbarButtonController}(ControllerBase);adComponentsModule.controller("ToolbarButtonController",ToolbarButtonController),define("app/view/components/toolbar/toolbarButton/ToolbarButtonController",function(){});var ToolbarButtonToggleDirective=function(){function ToolbarButtonToggleDirective(){return{restrict:"E",transclude:!0,templateUrl:"app/view/components/toolbar/toolbarButtonToggle/ToolbarButtonToggleView.html",scope:{adSelected:"@"},controller:ToolbarButtonToggleController}}return ToolbarButtonToggleDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-toolbar-button-toggle"),ToolbarButtonToggleDirective),define("app/view/components/toolbar/toolbarButtonToggle/ToolbarButtonToggleDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ToolbarButtonToggleController=function(_super){function ToolbarButtonToggleController($scope){var _this=this;_super.call(this,$scope,ResourceManager.instance(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.onOptionChange=function(newValue,oldValue){newValue&&newValue!==oldValue&&(_this.selected=newValue)},$scope.controller=this,$scope.adSelected&&(this.selected=$scope.adSelected),$scope.$watch("adSelected",this.onOptionChange)}return __extends(ToolbarButtonToggleController,_super),ToolbarButtonToggleController.$inject=["$scope"],ToolbarButtonToggleController}(ControllerBase);define("app/view/components/toolbar/toolbarButtonToggle/ToolbarButtonToggleController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ToolbarButtonToggleOptionDirective=function(){function ToolbarButtonToggleOptionDirective(){return{restrict:"E",require:"^adToolbarButtonToggle",templateUrl:"app/view/components/toolbar/toolbarButtonToggle/option/ToolbarButtonToggleOptionView.html",scope:{adLabel:"@",adOnClick:"&"},controller:ToolbarButtonToggleOptionController,link:function(scope,elem,attr,ctrl){scope.toggleCtrl=ctrl,scope.toggleCtrl.selected||(scope.toggleCtrl.selected=scope.adLabel,scope.adOnClick())}}}return ToolbarButtonToggleOptionDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-toolbar-button-toggle-option"),ToolbarButtonToggleOptionDirective);var ToolbarButtonToggleOptionController=function(_super){function ToolbarButtonToggleOptionController($scope){_super.call(this,$scope,ResourceManager.instance(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,$scope.controller=this}return __extends(ToolbarButtonToggleOptionController,_super),ToolbarButtonToggleOptionController.prototype.onClick=function(){this.$scope.toggleCtrl.selected=this.$scope.adLabel,this.$scope.adOnClick()},ToolbarButtonToggleOptionController.$inject=["$scope"],ToolbarButtonToggleOptionController}(ControllerBase);define("app/view/components/toolbar/toolbarButtonToggle/option/ToolbarButtonToggleOptionDirective",function(){});var ToolbarToggleDirective=function(){function ToolbarToggleDirective(){return{restrict:"E",scope:{adToggleItems:"=",adLabel:"@"},controller:"ToolbarToggleController",templateUrl:"app/view/components/toolbar/toolbarToggle/ToolbarToggleView.html"}}return ToolbarToggleDirective.createToggleItem=function(imageUrl,hoverImageUrl,selectedImageUrl,onClickHandler,selected,tooltip){var toggleItem={};return toggleItem.imageUrl=imageUrl,toggleItem.hoverImageUrl=hoverImageUrl,toggleItem.selectedImageUrl=selectedImageUrl,toggleItem.selected=selected,toggleItem.tooltip=tooltip,toggleItem.onClickHandler=onClickHandler,ToolbarToggleController.updateCurrentImageUrl(toggleItem),toggleItem},ToolbarToggleDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-toolbar-toggle"),ToolbarToggleDirective),define("app/view/components/toolbar/toolbarToggle/ToolbarToggleDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ToolbarToggleController=function(_super){function ToolbarToggleController($scope){_super.call(this,$scope),this.$scope=$scope,this.$scope.controller=this}return __extends(ToolbarToggleController,_super),ToolbarToggleController.updateCurrentImageUrl=function(toggleItem){toggleItem.currentImageUrl=toggleItem.selected?toggleItem.selectedImageUrl:toggleItem.hover?toggleItem.hoverImageUrl:toggleItem.imageUrl},ToolbarToggleController.prototype.onMouseOverOrOut=function(toggleItem){toggleItem.hover=!toggleItem.hover,ToolbarToggleController.updateCurrentImageUrl(toggleItem)},ToolbarToggleController.prototype.onClickItem=function(toggleItem){for(var i=0;i<this.$scope.adToggleItems.length;i++)this.$scope.adToggleItems[i].selected&&(this.$scope.adToggleItems[i].selected=!1,ToolbarToggleController.updateCurrentImageUrl(this.$scope.adToggleItems[i]));toggleItem.selected=!0,ToolbarToggleController.updateCurrentImageUrl(toggleItem),toggleItem.onClickHandler&&toggleItem.onClickHandler()},ToolbarToggleController.$inject=["$scope"],ToolbarToggleController}(ControllerBase);adComponentsModule.controller("ToolbarToggleController",ToolbarToggleController),define("app/view/components/toolbar/toolbarToggle/ToolbarToggleController",function(){});var ToolbarSeparatorDirective=function(){function ToolbarSeparatorDirective(){return{restrict:"E",replace:!0,template:'<div class="ads-toolbar-item-container pull-left">\n                            <div class="ads-toolbar-separator"></div>\n                        </div>'}}return ToolbarSeparatorDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-toolbar-separator"),ToolbarSeparatorDirective),define("app/view/components/toolbar/toolbarSeparator/ToolbarSeparatorDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ToolbarSelectDirective=function(){function ToolbarSelectDirective(){return{restrict:"E",replace:!0,scope:{adOptions:"=",adLabel:"@",adSelected:"=",adDisabled:"=",adChange:"&",adSearchEnabled:"@",adMultiSelect:"=?",adSearchPlaceholder:"@"},templateUrl:"app/view/components/toolbar/toolbarSelect/ToolbarSelectView.html",controller:ToolbarSelectController}}return ToolbarSelectDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-toolbar-select"),ToolbarSelectDirective);var ToolbarSelectController=function(_super){function ToolbarSelectController($scope){_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.$scope.controller=this}return __extends(ToolbarSelectController,_super),ToolbarSelectController.prototype.adChange=function(selectedOption){_.isFunction(this.$scope.adChange)&&this.$scope.adChange({selectedOption:selectedOption})},ToolbarSelectController.$inject=["$scope"],ToolbarSelectController}(ControllerBase);appdynamicsModule.controller("ToolbarSelectController",ToolbarSelectController),define("app/view/components/toolbar/toolbarSelect/ToolbarSelectDirective",function(){});var ToolbarSearchDirective=function(){function ToolbarSearchDirective(){return{restrict:"E",replace:!0,scope:{adSearchText:"=",adLabel:"@",adSearchInputChange:"&",adShowFetchMoreLink:"=",adFetchMoreLinkText:"@",adFetchMoreLinkClickHandler:"&"},templateUrl:"app/view/components/toolbar/toolbarSearch/ToolbarSearchView.html",link:function(scope){scope.adFetchMoreLinkText=scope.adFetchMoreLinkText?scope.adFetchMoreLinkText:ResourceManager.instance().getString("ui","ms_fetchMore")}}}return ToolbarSearchDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-toolbar-search"),ToolbarSearchDirective),define("app/view/components/toolbar/toolbarSearch/ToolbarSearchDirective",function(){}),require(["app/view/components/toolbar/ToolbarDirective","app/view/components/toolbar/toolbarItemContainer/ToolbarItemContainer","app/view/components/toolbar/toolbarButton/ToolbarButtonDirective","app/view/components/toolbar/toolbarButton/ToolbarButtonController","app/view/components/toolbar/toolbarButtonToggle/ToolbarButtonToggleDirective","app/view/components/toolbar/toolbarButtonToggle/ToolbarButtonToggleController","app/view/components/toolbar/toolbarButtonToggle/option/ToolbarButtonToggleOptionDirective","app/view/components/toolbar/toolbarToggle/ToolbarToggleDirective","app/view/components/toolbar/toolbarToggle/ToolbarToggleController","app/view/components/toolbar/toolbarSeparator/ToolbarSeparatorDirective","app/view/components/toolbar/toolbarSelect/ToolbarSelectDirective","app/view/components/toolbar/toolbarSearch/ToolbarSearchDirective"]),define("app/view/components/toolbar/ToolbarModuleCode",function(){});var FlyoutListItem=function(){function FlyoutListItem(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"app/view/components/flyoutListItem/FlyoutListItem.html",scope:{adsImage:"@adsImage",adsLabel:"@adsLabel",adsTip:"@adsTip",adsInnerClick:"&adsSingleClick",adsDisabled:"=adsDisabled",adsHideLabel:"@adsHideLabel"},link:function(scope){scope.click=function(event){scope.adsDisabled!==!0&&"function"==typeof scope.adsInnerClick&&scope.adsInnerClick({event:event})}}}}return FlyoutListItem}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-flyout-list-item"),FlyoutListItem),define("app/view/components/flyoutListItem/FlyoutListItem",function(){});var ExitStatUtils=function(){function ExitStatUtils(){}return ExitStatUtils.getAggregateCPM=function(exitStats){for(var cpm=0,index=0;index<exitStats.length;++index){var eps=exitStats[index];eps&&eps.callsPerMinute&&!isNaN(eps.callsPerMinute.metricValue)&&eps.callsPerMinute.metricValue>-1&&(cpm+=eps.callsPerMinute.metricValue)}return cpm},ExitStatUtils.getAggregateART=function(exitStats){for(var totalART=0,validStats=0,index=0;index<exitStats.length;++index){var eps=exitStats[index];eps&&eps.averageResponseTime&&!isNaN(eps.averageResponseTime.metricValue)&&eps.averageResponseTime.metricValue>-1&&(totalART+=eps.averageResponseTime.metricValue,validStats++)}return validStats>0?totalART/validStats:0/0},ExitStatUtils}();define("app/utils/ExitStatUtils",function(){});var TransactionStatUtils=function(){function TransactionStatUtils(){}return TransactionStatUtils.getAggregateTimeConsumedPerTransactionSync=function(edgesStats){for(var timeConsumedPerTransaction=0,validEdgeCount=0,index=0;index<edgesStats.length;++index){var edgeStats=edgesStats[index];edgeStats&&(!edgeStats.async||edgeStats.async&&TransactionStatUtils.hasAsyncTransactionStatsSet(edgeStats))&&edgeStats.transactionStats&&!isNaN(edgeStats.transactionStats.timeConsumedPerTransaction)&&edgeStats.transactionStats.timeConsumedPerTransaction>-1&&(timeConsumedPerTransaction+=edgeStats.transactionStats.timeConsumedPerTransaction,validEdgeCount++)}return 0==validEdgeCount?0:timeConsumedPerTransaction/validEdgeCount},TransactionStatUtils.getAggregateTimeConsumedPerTransactionAsync=function(edgesStats){for(var timeConsumedPerTransaction=0,validEdgeCount=0,index=0;index<edgesStats.length;++index){var edgeStats=edgesStats[index];edgeStats&&(edgeStats.async&&!TransactionStatUtils.hasAsyncTransactionStatsSet(edgeStats)&&edgeStats.transactionStats&&!isNaN(edgeStats.transactionStats.timeConsumedPerTransaction)&&edgeStats.transactionStats.timeConsumedPerTransaction>-1?(timeConsumedPerTransaction+=edgeStats.transactionStats.timeConsumedPerTransaction,validEdgeCount++):edgeStats.asyncTransactionStats&&!isNaN(edgeStats.asyncTransactionStats.timeConsumedPerTransaction)&&edgeStats.asyncTransactionStats.timeConsumedPerTransaction>-1&&(timeConsumedPerTransaction+=edgeStats.asyncTransactionStats.timeConsumedPerTransaction,validEdgeCount++))}return 0==validEdgeCount?0:timeConsumedPerTransaction/validEdgeCount},TransactionStatUtils.getTransactionStats=function(performanceStats){var transactionStats;return TransactionStatUtils.hasSyncTransactionStatsSet(performanceStats)?transactionStats=performanceStats.transactionStats:TransactionStatUtils.hasAsyncTransactionStatsSet(performanceStats)?transactionStats=performanceStats.asyncTransactionStats:(transactionStats={},transactionStats.timeConsumedPerTransaction=-1,transactionStats.errorsPercentage=-1,transactionStats.callsPerTransaction=-1,transactionStats.numberOfCalls=-1,transactionStats.numberOfErrors=-1),transactionStats},TransactionStatUtils.getSyncTransactionStats=function(performanceStats){var transactionStats;return TransactionStatUtils.hasTransactionStatsSet(performanceStats.transactionStats)?transactionStats=performanceStats.transactionStats:(transactionStats={},transactionStats.timeConsumedPerTransaction=-1,transactionStats.errorsPercentage=-1,transactionStats.callsPerTransaction=-1,transactionStats.numberOfCalls=-1,transactionStats.numberOfErrors=-1),transactionStats},TransactionStatUtils.getAsyncTransactionStats=function(performanceStats){var transactionStats;return TransactionStatUtils.hasTransactionStatsSet(performanceStats.asyncTransactionStats)?transactionStats=performanceStats.asyncTransactionStats:(transactionStats={},transactionStats.timeConsumedPerTransaction=-1,transactionStats.errorsPercentage=-1,transactionStats.callsPerTransaction=-1,transactionStats.numberOfCalls=-1,transactionStats.numberOfErrors=-1),transactionStats},TransactionStatUtils.hasSyncTransactionStatsSet=function(performanceStats){return performanceStats&&performanceStats.transactionStats&&TransactionStatUtils.hasTransactionStatsSet(performanceStats.transactionStats)},TransactionStatUtils.hasAsyncTransactionStatsSet=function(performanceStats){return performanceStats&&performanceStats.asyncTransactionStats&&TransactionStatUtils.hasTransactionStatsSet(performanceStats.asyncTransactionStats)},TransactionStatUtils.hasRootPerformanceStatsSet=function(performanceStats){return performanceStats.averageResponseTime&&performanceStats.averageResponseTime.metricValue>0||performanceStats.callsPerMinute&&performanceStats.callsPerMinute.metricValue>0||performanceStats.errorsPerMinute&&performanceStats.errorsPerMinute.metricValue>0||performanceStats.numberOfErrors&&performanceStats.numberOfErrors.metricValue>0||performanceStats.numberOfCalls&&performanceStats.numberOfCalls.metricValue>0},TransactionStatUtils.hasTransactionStatsSet=function(transactionStats){return transactionStats?transactionStats.timeConsumedPerTransaction>0||transactionStats.errorsPercentage>0||transactionStats.callsPerTransaction>0||transactionStats.numberOfCalls>0||transactionStats.numberOfErrors>0:!1},TransactionStatUtils}();define("app/utils/TransactionStatUtils",function(){}),Highcharts.setOptions({global:{useUTC:!1},xAxis:{dateTimeLabelFormats:{second:"%l:%M %p",minute:"%l:%M %p",hour:"%l:%M %p",day:"%-m/%e/%y",week:"%-m/%e/%y",month:"%-m/%y",year:"%-m/%y"}},plotOptions:{series:{turboThreshold:0}},credits:{enabled:!1},title:{text:""}}),Highcharts.dateFormats={"-m":function(timestamp){return new Date(timestamp).getMonth()+1}};var ChartUtil=function(){function ChartUtil(){}return ChartUtil.setHighchartsGlobalSettings=function(dateFormat,timeFormat){var font=UiConfig.getFont("GLOBAL_FONT_FAMILY"),colors=ChartUtil.getChartColors();dateFormat||(dateFormat=TimeRangeService.MMDDYY),timeFormat||(timeFormat=TimeRangeService.TIME_FORMAT_12_HOUR),Highcharts.setOptions({colors:colors,chart:{style:{fontFamily:font}},xAxis:{dateTimeLabelFormats:ChartUtil.getDateTimeFormat(dateFormat,timeFormat)}})},ChartUtil.getChartColors=function(){for(var colorsArray=[],i=0;10>=i;i++){var colorName="DATA_CHART_COLOR"+i,color=UiConfig.getColor(colorName);color&&colorsArray.push(color)}return colorsArray},ChartUtil.getDateTimeFormat=function(dateFormat,timeFormat){var dateTimeFormat={};return ChartUtil.setDateFormat(dateFormat,dateTimeFormat),ChartUtil.setTimeFormat(timeFormat,dateTimeFormat),dateTimeFormat},ChartUtil.setDateFormat=function(dateFormat,dateTimeFormat){switch(dateFormat){case TimeRangeService.YYMMDD:dateTimeFormat.day="%y/%-m/%e",dateTimeFormat.week="%y/%-m/%e",dateTimeFormat.month="%y/%-m",dateTimeFormat.year="%y/%-m";break;case TimeRangeService.DDMMYY:dateTimeFormat.day="%e/%-m/%y",dateTimeFormat.week="%e/%-m/%y",dateTimeFormat.month="%-m/%y",dateTimeFormat.year="%-m/%y";break;case TimeRangeService.MMDDYY:default:dateTimeFormat.day="%-m/%e/%y",dateTimeFormat.week="%-m/%e/%y",dateTimeFormat.month="%-m/%y",dateTimeFormat.year="%-m/%y"}},ChartUtil.setTimeFormat=function(timeFormat,dateTimeFormat){switch(timeFormat){case TimeRangeService.TIME_FORMAT_24_HOUR:dateTimeFormat.second="%H:%M",dateTimeFormat.minute="%H:%M",dateTimeFormat.hour="%H:%M";break;case TimeRangeService.TIME_FORMAT_12_HOUR:default:dateTimeFormat.second="%l:%M %p",dateTimeFormat.minute="%l:%M %p",dateTimeFormat.hour="%l:%M %p"}},ChartUtil.setTimeFormatWithSeconds=function(timeFormat,dateTimeFormat){switch(timeFormat){case TimeRangeService.TIME_FORMAT_24_HOUR:dateTimeFormat.second="%H:%M:%S",dateTimeFormat.minute="%H:%M:%S",dateTimeFormat.hour="%H:%M:%S";break;case TimeRangeService.TIME_FORMAT_12_HOUR:default:dateTimeFormat.second="%l:%M:%S %p",dateTimeFormat.minute="%l:%M:%S %p",dateTimeFormat.hour="%l:%M:%S %p"}},ChartUtil.getDateTimeFormatWithSeconds=function(dateFormat,timeFormat){var dateTimeFormat={};return ChartUtil.setDateFormat(dateFormat,dateTimeFormat),ChartUtil.setTimeFormatWithSeconds(timeFormat,dateTimeFormat),dateTimeFormat},ChartUtil.simplePieChart=function(){return{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,margin:[0,0,0,0],spacingTop:0,spacingBottom:0,spacingLeft:0,spacingRight:0,animation:!1,backgroundColor:"rgba(255,255,255,0.1)"},credits:!1,title:{text:""},tooltip:{enabled:!1},plotOptions:{pie:{allowPointSelect:!1,dataLabels:{enabled:!1},animation:!1}},series:[{type:"pie",name:"",data:[]}]}},ChartUtil.getDefaultTwoDChartSelection=function(event){var xAxis=event.xAxis[0];TimeRangeService.instance().setCustomTimeRange(new Date(xAxis.min),new Date(xAxis.max)),event.preventDefault()},ChartUtil.getPercentPieChartConfig=function(title){void 0===title&&(title="");var chartConfig=this.cloneChartConfig(this.percentPieChartConfig);return chartConfig.title.text=title,chartConfig},ChartUtil.getStackedBarChartConfig=function(){var chartConfig=this.cloneChartConfig(this.stackedBarChartConfig);return chartConfig},ChartUtil.getTwoDTimeChartConfig=function(title,valueSuffix,data,pointStart,pointInterval,enableChartTitle){void 0===title&&(title=null),void 0===valueSuffix&&(valueSuffix=null),void 0===data&&(data=null),void 0===pointStart&&(pointStart=-1),void 0===pointInterval&&(pointInterval=-1),void 0===enableChartTitle&&(enableChartTitle=!0);var chartConfig=this.cloneChartConfig(this.twoDTimeChartConfig);return(title||""===title)&&(chartConfig.title.text=enableChartTitle?title:"",chartConfig.series[0].name=title),(valueSuffix||""===valueSuffix)&&(chartConfig.yAxis.labels.format="{value}"+valueSuffix,chartConfig.series[0].tooltip.valueSuffix=valueSuffix),null!=data&&(chartConfig.series[0].data=data),-1!=pointStart&&(chartConfig.plotOptions.series.pointStart=pointStart),-1!=pointInterval&&(chartConfig.plotOptions.series.pointInterval=pointInterval),chartConfig},ChartUtil.getTwoDTimeChartConfigBaseline=function(title,valueSuffix,data,baselineData,pointStart,pointInterval,enableChartTitle){void 0===title&&(title=null),void 0===valueSuffix&&(valueSuffix=null),void 0===data&&(data=null),void 0===baselineData&&(baselineData=null),void 0===pointStart&&(pointStart=-1),void 0===pointInterval&&(pointInterval=-1),void 0===enableChartTitle&&(enableChartTitle=!1);var chartConfig=ChartUtil.getTwoDTimeChartConfig(title,valueSuffix,data,pointStart,pointInterval);return chartConfig.series.push({name:"Baseline",color:"#4572A7",type:"spline",data:baselineData,dashStyle:"dash",tooltip:{valueSuffix:""},marker:{enabled:!1}}),(title||""===title)&&(chartConfig.title.text=enableChartTitle?title:"",chartConfig.series[1].name=title+" "+ResourceManager.instance().getString("ui","ms_baselineChartDataSeriesNameSuffix")),(valueSuffix||""===valueSuffix)&&(chartConfig.series[1].tooltip.valueSuffix=valueSuffix),null!=data&&(chartConfig.series[1].data=baselineData),chartConfig},ChartUtil.getTwoAxisTwoDTimeChartConfig=function(title,valueSuffix1,valueSuffix2,data,pointStart,pointInterval){void 0===title&&(title=null),void 0===valueSuffix1&&(valueSuffix1=null),void 0===valueSuffix2&&(valueSuffix2=null),void 0===data&&(data=null),void 0===pointStart&&(pointStart=-1),void 0===pointInterval&&(pointInterval=-1);var chartConfig=this.cloneChartConfig(this.twoAxisTwoDTimeChartConfig);return(title||""===title)&&(chartConfig.title.text=title,chartConfig.series[0].name=title),(valueSuffix1||""===valueSuffix1)&&(chartConfig.yAxis[0].labels.format="{value}"+valueSuffix1,chartConfig.series[0].tooltip.valueSuffix=valueSuffix1),(valueSuffix2||""===valueSuffix2)&&(chartConfig.yAxis[1].labels.format="{value}"+valueSuffix2,chartConfig.series[1].tooltip.valueSuffix=valueSuffix2),null!=data&&(chartConfig.series[0].data=data),-1!=pointStart&&(chartConfig.plotOptions.series.pointStart=pointStart),-1!=pointInterval&&(chartConfig.plotOptions.series.pointInterval=pointInterval),chartConfig},ChartUtil.getBarPie=function(seriesData,width,height,pointFormat,yMin,yMax){return{chart:{type:"bar",showAxis:!1,spacing:[0,0,10,0],margin:[0,0,0,0],height:height,width:width},title:{text:""},tooltip:{headerFormat:"",pointFormat:pointFormat},xAxis:{categories:[""],gridLineWidth:0,gridLineColor:"transparent",labels:{enabled:!1},title:{text:""},startOnTick:!1,endOnTick:!1,tickPositions:[]},yAxis:{categories:[""],min:yMin,max:yMax,gridLineWidth:0,gridLineColor:"transparent",title:{text:""},startOnTick:!1,endOnTick:!1,tickPositions:[0]},legend:{enabled:!0,align:"left",margin:0,padding:0,itemDistance:4,itemStyle:{fontWeight:"normal"}},credits:{enabled:!1},plotOptions:{series:{stacking:"normal",lineWidth:1,animation:!1,shadow:!1}},series:seriesData}},ChartUtil.getGridChartCommonConfig=function(){var chartConfig={animation:!1,credits:{enabled:!1},legend:{enabled:!1},title:{text:""},subtitle:{text:""},loading:!1,exporting:{enabled:!1},chart:{backgroundColor:"transparent",animation:!1,borderRadius:0,spacing:[0,0,0,0]},xAxis:{title:{text:""},labels:{formatter:function(){return""}},gridLineWidth:0},yAxis:{min:0,title:{text:""},labels:{formatter:function(){return""}},gridLineWidth:0}};return chartConfig},ChartUtil.getSparkLineChartConfig=function(){var defaultGridChartConfig=ChartUtil.getGridChartCommonConfig(),chartConfig={tooltip:{formatter:function(){return null==this.y?"<b>0</b>":"<b>"+this.y+"</b>"},style:{fontFamily:"Arial, sans-serif",fontWeight:"bold",fontSize:"9px",padding:"2px"}},plotOptions:{column:{animation:!1},series:{animation:!1}},series:[{type:"line",name:"",color:"#207AFD",lineWidth:1,marker:{states:{select:{enabled:!1}},enabled:!1,radius:1}}]};return chartConfig=_.extend(chartConfig,defaultGridChartConfig),chartConfig.chart=_.extend(chartConfig.chart,{type:"line"}),chartConfig},ChartUtil.createSparkChart=function(data){for(var chartHeight=24,chartWidth=100,areaData=[],yMin=0/0,yMax=0/0,totalPoints=0,itr=0;itr<data.length;itr++)data[itr].metricValue?(isNaN(yMin)&&(yMin=data[itr].metricValue.value,yMax=data[itr].metricValue.value),areaData.push({x:itr,y:data[itr].metricValue.value}),yMin=Math.min(yMin,data[itr].metricValue.value),yMax=Math.max(yMax,data[itr].metricValue.value)):areaData.push({x:itr,y:-1e3}),totalPoints++;var x=d3.scale.linear().domain([0,totalPoints-1]).range([0,chartWidth]),y=d3.scale.linear().domain([yMin,yMax]).range([0,chartHeight]),area=d3.svg.area().x(function(d){return x(d.x)}).y(function(d){return chartHeight-y(d.y)}).interpolate("basis");return area(areaData)},ChartUtil.getGridAreaChartConfig=function(xAxisRefLine,yAxisRefLine,yMax){void 0===xAxisRefLine&&(xAxisRefLine=null),void 0===yAxisRefLine&&(yAxisRefLine=null),void 0===yMax&&(yMax=100);var chartConfig=ChartUtil.getSparkLineChartConfig();return chartConfig.series[0].type="area",chartConfig.chart=_.extend(chartConfig.chart,{type:"area"}),chartConfig.xAxis=_.extend(chartConfig.xAxis,{tickLength:0}),chartConfig.yAxis=_.extend(chartConfig.yAxis,{tickLength:0,min:0,max:yMax}),xAxisRefLine&&(chartConfig.xAxis.plotLines=[{color:UiConfig.getColor("CHART_REF_LINE"),width:1,value:xAxisRefLine.value,label:{text:xAxisRefLine.label?xAxisRefLine.label.text:xAxisRefLine.value.toString(),style:{color:UiConfig.getColor("CHART_REF_LINE"),fontSize:"6px"},x:0}}]),yAxisRefLine&&(chartConfig.yAxis.plotLines=[{color:UiConfig.getColor("CHART_REF_LINE"),width:1,value:yAxisRefLine.value,label:{text:yAxisRefLine.label?yAxisRefLine.label.text:yAxisRefLine.value.toString(),style:{color:UiConfig.getColor("CHART_REF_LINE"),fontSize:"6px"},x:0}}]),chartConfig},ChartUtil.addTimeRangeListener=function(scope,chart){new TimeRangeSelectionChartListener(scope,chart)},ChartUtil.addTooltipListener=function(scope,chart,config){new TooltipListener(scope,chart,config)},ChartUtil.localTimeToUTC=function(){var dateOffset=(new Date).getTimezoneOffset();return(new Date).getTime()-dateOffset*DateTimeUtil.MILLISEC_PER_MIN},ChartUtil.cloneChartConfig=function(chartConfig,dataOnly){return void 0===dataOnly&&(dataOnly=!1),dataOnly?JSON.parse(JSON.stringify(chartConfig)):jQuery.extend(!0,{},chartConfig)},ChartUtil.colorToHex=function(color){if("#"===color.substr(0,1))return color;
for(var digits=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(color),red=parseInt(digits[2]),green=parseInt(digits[3]),blue=parseInt(digits[4]),rgb=(blue|green<<8|red<<16).toString(16);rgb.length<6;)rgb="0"+rgb;return digits[1]+"#"+rgb},ChartUtil.decimalToHex=function(color){for(var hexString=color.toString(16);hexString.length<6;)hexString="0"+hexString;return"#"+hexString},ChartUtil.tooltipFormatter=function(dataPoint){var s="";s+='<span style="font-weight: bold;">'+dataPoint.series.name+"</span><br/>",s+=Highcharts.dateFormat("%A, %b %e, %l:%M %p",dataPoint.x);var suffix=void 0===dataPoint.series.tooltipOptions.valueSuffix?"":dataPoint.series.tooltipOptions.valueSuffix,color=ChartUtil.colorToHex(dataPoint.series.color),colorHtmlTag='<br/><span style="fill:'+color+";color:"+color+'">';return s+=colorHtmlTag+"Observed: </span> "+(null==dataPoint.y?"No Data":""+dataPoint.y+" "+suffix),dataPoint.metricValue&&(s+=ChartUtil.getDataStringFromMetricValue(dataPoint,colorHtmlTag,dataPoint.isBaselineData)),s},ChartUtil.sharedTooltipFormatter=function(dataPoints){for(var s="",i=0;i<dataPoints.length;i++){var dataPoint=dataPoints[i].point;""==s&&(s+=Highcharts.dateFormat(ChartUtil.TOOLTIP_DATE_FORMAT,dataPoint.x));var suffix=void 0===dataPoint.series.tooltipOptions.valueSuffix?"":dataPoint.series.tooltipOptions.valueSuffix,color=ChartUtil.colorToHex(dataPoint.series.color),colorHtmlTag='<br/><span style="fill:'+color+";color:"+color+'">';s+=colorHtmlTag+dataPoint.series.name+": </span> "+(null==dataPoint.y?"No Data":dataPoint.y+suffix)}return s},ChartUtil.getDataStringFromMetricValue=function(dataPoint,colorHtmlTag,isBaselineData){void 0===isBaselineData&&(isBaselineData=!1);var s="",suffix=void 0===dataPoint.series.tooltipOptions.valueSuffix?"":dataPoint.series.tooltipOptions.valueSuffix,metricValue=dataPoint.metricValue;return metricValue.useRange&&!isBaselineData&&(s+=isNaN(metricValue.min)?"":""+colorHtmlTag+" Min: </span> "+ChartUtil.formatNumber(metricValue.min)+" "+suffix,s+=isNaN(metricValue.max)?"":""+colorHtmlTag+" Max: </span> "+ChartUtil.formatNumber(metricValue.max)+" "+suffix),s+=isNaN(metricValue.sum)?"":""+colorHtmlTag+" Sum: </span> "+ChartUtil.formatNumber(metricValue.sum)+" "+suffix,s+=isNaN(metricValue.count)?"":""+colorHtmlTag+" Count: </span> "+ChartUtil.formatNumber(metricValue.count),isBaselineData&&(s+=isNaN(metricValue.standardDeviation)?"":""+colorHtmlTag+" Standard Deviation: </span> "+ChartUtil.formatNumber(metricValue.standardDeviation)+" "+suffix,s+=isNaN(metricValue.occurances)?"":""+colorHtmlTag+" Occurances: </span> "+ChartUtil.formatNumber(metricValue.occurances)),s},ChartUtil.formatNumber=function(n){return n%1!=0?parseFloat(n.toFixed(3)).toLocaleString():n.toLocaleString()},ChartUtil.MILLISECONDS_PER_MINUTE=6e4,ChartUtil.TWO_D_TIME_CHART_CONFIG_HEIGHT=140,ChartUtil.CHART_FILL_OPACITY=100,ChartUtil.AREA_CHART_LINE_WIDTH=1,ChartUtil.LINE_CHART_LINE_WIDTH=2,ChartUtil.TOOLTIP_DATE_FORMAT="%A, %b %e, %l:%M %p",ChartUtil.PIE_CHART_SERIES0_INNER_SIZE="55%",ChartUtil.stackedBarChartConfig={chart:{type:"bar",borderRadius:0,spacing:[0,0,0,0],style:{fontFamily:"Arial, sans-serif"}},title:{text:""},subtitle:{text:""},credits:{enabled:!1},xAxis:{categories:["Health"],title:{text:""},labels:{enabled:!1,formatter:function(){return""}},gridLineWidth:0,minorGridLineWidth:0},yAxis:{min:0,title:{text:""},labels:{enabled:!1,formatter:function(){return""}},gridLineWidth:0,minorGridLineWidth:0},legend:{enabled:!1},plotOptions:{series:{stacking:"percent",borderWidth:0,borderRadius:0,borderColor:"transparent",animation:!1}},series:[{name:"Normal",data:[5],shadow:!1},{name:"Slow",data:[3],shadow:!1},{name:"Error",data:[2],shadow:!1}],tooltip:{enabled:!1}},ChartUtil.percentPieChartConfig={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},credits:!1,title:{text:""}},ChartUtil.twoDTimeChartConfig={chart:{type:"areaspline",height:ChartUtil.TWO_D_TIME_CHART_CONFIG_HEIGHT,zoomType:"x",events:{load:function(){var extremes=this.yAxis[0].getExtremes();0==extremes.dataMax&&(extremes.max=1,this.yAxis[0].setExtremes(0,1))}}},credits:{enabled:!1},title:{text:null},subtitle:{text:""},tooltip:{shared:!0,formatter:function(){return this.points&&this.points.length>0?ChartUtil.sharedTooltipFormatter(this.points):ChartUtil.tooltipFormatter(this.point)}},legend:{enabled:!1},plotOptions:{areaspline:{color:UiConfig.getColor("MAIN_DASH_PERF_CHART_SERIES_COLOR"),marker:{radius:0,enabled:!1},lineWidth:ChartUtil.AREA_CHART_LINE_WIDTH,lineColor:UiConfig.getColor("CARD_CHART_LINE_COLOR"),states:{hover:{lineWidth:1}},threshold:null},line:{dashStyle:"shortDash",marker:{enabled:!1,radius:0}}},opposite:!0,series:[{name:"$$TITLE$$",color:"#FFFFFF",type:"areaspline",data:[],tooltip:{valueSuffix:" $$VALUESUFFIX$$"}}],xAxis:{type:"datetime",showLastLabel:!0,minTickInterval:6e4},yAxis:{min:0,gridLineDashStyle:"solid",gridLineColor:UiConfig.getColor("CARD_CHART_GRID_LINE_COLOR"),lineColor:UiConfig.getColor("CARD_CHART_YAXIS_LINE_COLOR"),lineWidth:0,showLastLabel:!0,plotBands:[{color:UiConfig.getColor("MAIN_DASH_PERF_CHART_BACKGROUND_COLOR"),from:-99999999,to:99999999999}],labels:{style:{color:UiConfig.getColor("GLOBAL_FONT_COLOR")}},title:{text:"",style:{color:UiConfig.getColor("GLOBAL_FONT_COLOR")}}}},ChartUtil.twoAxisTwoDTimeChartConfig={chart:{borderRadius:0,spacing:[10,10,10,10],style:{fontFamily:"Arial, sans-serif"},zoomType:"x",marginLeft:100,marginRight:70,animation:!1,backgroundColor:"rgba(255,255,255,0.1)"},credits:{enabled:!1},title:{text:"$$TITLE$$",align:"left",x:0},subtitle:{text:""},tooltip:{useHTML:!1,shared:!0,style:{fontFamily:"Arial, sans-serif",padding:"8px",fontSize:"12px",align:"left"},formatter:function(){return this.points&&this.points[0].series.tooltipOptions.shared?ChartUtil.sharedTooltipFormatter(this.points):ChartUtil.tooltipFormatter(this.point)}},legend:{enabled:!1},plotOptions:{area:{fillColor:"#4572A7",fillOpacity:.5},series:{animation:!1}},loading:!1,series:[{name:"$$TITLE$$",color:"#4572A7",type:"column",yAxis:1,data:[],tooltip:{valueSuffix:" $$VALUESUFFIX$$"}},{name:"$$TITLE$$",color:"#4572A7",type:"areaspline",yAxis:2,data:[],tooltip:{valueSuffix:" $$VALUESUFFIX$$"}}],xAxis:{startOnTick:!1,endOnTick:!1,tickWidth:0,lineWidth:0,type:"datetime",labels:{y:20}},yAxis:[{min:0,lineWidth:0,gridLineColor:UiConfig.getColor("DASHBOARD_SEPARATOR_LINE_COLOR"),plotBands:[{color:UiConfig.getColor("WHITE"),from:-999999999,to:99999999999}],labels:{style:{color:UiConfig.getColor("GLOBAL_FONT_COLOR")}},title:{text:"",style:{color:UiConfig.getColor("GLOBAL_FONT_COLOR")}}},{min:0,lineWidth:0,gridLineColor:UiConfig.getColor("DASHBOARD_SEPARATOR_LINE_COLOR"),plotBands:[{color:UiConfig.getColor("WHITE"),from:0,to:99999999999}],labels:{style:{color:UiConfig.getColor("GLOBAL_FONT_COLOR")}},title:{text:"",style:{color:UiConfig.getColor("GLOBAL_FONT_COLOR")}},opposite:!0}]},ChartUtil}(),TimeRangeSelectionChartListener=function(){function TimeRangeSelectionChartListener(scope,chart){function chartSelectionListener(event){event.preventDefault();var mouseX=event.target.mouseDownX,mouseY=event.target.mouseDownY;scope.xAxisMin=event.xAxis[0].min,scope.xAxisMax=event.xAxis[0].max,scope.dateFrom=new Date(event.xAxis[0].min),scope.dateTo=new Date(event.xAxis[0].max),createSelectorMenu(mouseX,mouseY)}function createSelectorMenu(x,y){var chartContainer=$(chart.container),containerPosX=chartContainer.offset().left,containerPosY=chartContainer.offset().top,offsets=setMenuPosition([x,y]),offsetX=offsets[0]+containerPosX,offsetY=offsets[1]+containerPosY,options={cls:"ad-context-menu no-icon-menu",showSeparator:!1,items:[]};(Util.isUndefOrNull(scope.contextMenuOptions)||scope.contextMenuOptions.enableViewSnapshotsInTimeRange)&&options.items.push({text:ResourceManager.instance().getString("ui","ms_viewSnapshotsInTimeSelectionActionLabel"),handler:scope.onViewSnapshotsInSelectedTimeRange}),(Util.isUndefOrNull(scope.contextMenuOptions)||scope.contextMenuOptions.enableSettingGlobalTimeRange)&&options.items.push({text:ResourceManager.instance().getString("ui","ms_setGlobalTimeRangeActionLabel"),handler:scope.setGlobalTimeRange}),(Util.isUndefOrNull(scope.contextMenuOptions)||scope.contextMenuOptions.enableZoomIn)&&options.items.push({text:ResourceManager.instance().getString("ui","ms_zoom"),handler:scope.zoomIn});var contextMenu=Ext.create("Ext.menu.Menu",options);contextMenu.on("mouseleave",function(menu){menu.close()}),contextMenu.showAt([offsetX,offsetY])}function setMenuPosition(mouseXY){var offsetX,offsetY,minorOffset=5,chartContainer=$(chart.container),containerPosX=chartContainer.offset().left,containerPosY=chartContainer.offset().top,mouseX=mouseXY[0],mouseY=mouseXY[1],limitX=containerPosX+chartContainer.width(),limitY=containerPosY+chartContainer.height();return offsetX=mouseX>limitX?chartContainer.width():containerPosX>mouseX?2*minorOffset:mouseX-containerPosX,offsetY=mouseY>limitY?chartContainer.height():containerPosY>mouseY?2*minorOffset:mouseY-containerPosY,[offsetX-minorOffset,offsetY-minorOffset]}{var timeRangeService=AngularUtil.getADInjector().get("timeRangeService");AngularUtil.getADInjector().get("$compile")}chart&&Highcharts.addEvent(chart,"selection",chartSelectionListener),scope.zoomIn=function(){var chartId=chart.container.id,chartContainer=$(chart.container);if(chart.xAxis[0].setExtremes(scope.xAxisMin,scope.xAxisMax),0==$("#resetZoom-"+chartId).length){chart.renderer.button("Reset Zoom",chartContainer.width()-90,10,function(){chart.xAxis[0].setExtremes(null,null,!1),chart.redraw(),this.destroy()}).attr({id:"resetZoom-"+chartId}).add()}},scope.setGlobalTimeRange=function(){var durationInMinutes=Math.abs(Math.round((scope.dateTo.getTime()-scope.dateFrom.getTime())/DateTimeUtil.MILLISEC_PER_MIN));timeRangeService.changeTimeRange({type:TimeRangeSpecifierType.BETWEEN_TIMES,startTime:scope.dateFrom,endTime:scope.dateTo,durationInMinutes:durationInMinutes})},scope.onViewSnapshotsInSelectedTimeRange=function(){SnapshotViewService.instance().viewSnapshotsInSelectedTimeRange(scope.dateFrom,scope.dateTo)}}return TimeRangeSelectionChartListener}(),TooltipListener=function(){function TooltipListener(scope,chart,config){var _this=this;_.each(config.series,function(seriesOption){seriesOption=_.extend(seriesOption,TooltipListener.pointEventsConfig);var chartSeries=chart.get(seriesOption.id);chartSeries&&chartSeries.update(seriesOption,!1)}),chart.redraw(),scope.$on(TooltipListener.SHOW_TOOLTIP,function(evt,data){data&&_this.showTooltips(chart,data)}),scope.$on(TooltipListener.HIDE_TOOLTIP,function(evt,data){data&&_this.hideTooltips(chart,data)})}return TooltipListener.prototype.showTooltips=function(chart,data){if(chart.container&&data.container.id!=chart.container.id){var i,point;for(i=0;i<chart.series.length;i++){var dataSeries=chart.series[i].data;if(dataSeries.length>0&&(point=_.findWhere(dataSeries,{x:data.x}))){chart.tooltip.refresh([point]),chart.xAxis.length>0&&chart.xAxis[0].drawCrosshair(data.event,point);break}}}},TooltipListener.prototype.hideTooltips=function(chart,data){if(chart.container&&data.container.id!=chart.container.id){for(var i=0;i<chart.series.length;i++){var dataSeries=chart.series[i].data;if(dataSeries.length>0){var point=_.findWhere(dataSeries,{x:data.x});if(point){point.setState();break}}}chart.tooltip.hide(),chart.xAxis.length>0&&chart.xAxis[0].hideCrosshair()}},TooltipListener.SHOW_TOOLTIP="SHOW_TOOLTIP",TooltipListener.HIDE_TOOLTIP="HIDE_TOOLTIP",TooltipListener.pointEventsConfig={point:{events:{mouseOver:function(event){SharedInjectorService.instance().$rootScope().$broadcast(TooltipListener.SHOW_TOOLTIP,{event:event,container:this.series.chart.container,x:this.x})},mouseOut:function(){SharedInjectorService.instance().$rootScope().$broadcast(TooltipListener.HIDE_TOOLTIP,{container:this.series.chart.container,x:this.x})}}}},TooltipListener}();define("app/view/components/chart/ChartUtil",function(){});var ChartTimeSeriesData=function(){function ChartTimeSeriesData(){this.startTime=-1,this.intervalTime=-1}return ChartTimeSeriesData.getChartDataFromMetricData=function(metricData,includeTimeInData,getTooltipDetails,isBaseline){void 0===includeTimeInData&&(includeTimeInData=!1),void 0===getTooltipDetails&&(getTooltipDetails=!1),void 0===isBaseline&&(isBaseline=!1);var result=null;if(metricData&&metricData.dataTimeslices){result=new ChartTimeSeriesData,result.name=metricData.metricName,result.data=[];var timeslices=metricData.dataTimeslices;if(timeslices&&timeslices.length>0){for(var renderData=[],i=0;i<timeslices.length;i++)if(timeslices[i]){var metricValue=timeslices[i].metricValue,value=null;if(metricValue&&(value=metricValue.value),includeTimeInData){var dataPoint,time=timeslices[i].startTime.getTime();dataPoint=getTooltipDetails?{x:time,y:value,metricValue:metricValue,isBaselineData:isBaseline}:{x:time,y:value},null!=value&&this.isTimesliceSolo(timeslices,i)&&(dataPoint.marker={enabled:!0,radius:2}),renderData.push(dataPoint)}else renderData.push(value),0==i?result.startTime=timeslices[i].startTime:1==i&&(result.intervalTime=timeslices[i].startTime-result.startTime)}result.data=renderData}}return result},ChartTimeSeriesData.isTimesliceSolo=function(timeslices,currentIndex){var result=!1;if(null!=timeslices[currentIndex]){var leftNull=!1,rightNull=!1;(0==currentIndex||null==timeslices[currentIndex-1].metricValue)&&(leftNull=!0),(currentIndex+1==timeslices.length||null==timeslices[currentIndex+1].metricValue)&&(rightNull=!0),result=leftNull&&rightNull}return result},ChartTimeSeriesData.getFrequencyFromString=function(frequency){if(!frequency)return 1;switch(frequency){case"ONE_MIN":return 1;case"TEN_MIN":return 10;case"SIXTY_MIN":return 60;default:return 1}},ChartTimeSeriesData}();define("app/view/components/chart/ChartTimeSeriesData",function(){});var Chart=function(){function Chart(){return{restrict:"EA",replace:!1,scope:{config:"=",selectionListener:"@",contextMenuOptions:"=adContextMenuOptions",adTooltipListener:"=",chartId:"@"},template:"<div class='expanded' highchart config='config' set-chart-instance-function='setChartInstance(chart)'></div>",link:{pre:function(scope){scope.setChartInstance=function(chart){ADLoggerService.log("Chart.constructor.link.setChartInstance Debug: Enter with chart "+chart),scope.chartInstance=chart,chart&&scope.selectionListener&&ChartUtil.addTimeRangeListener(scope,chart),chart&&scope.adTooltipListener&&ChartUtil.addTooltipListener(scope,chart,scope.config)}},post:function(scope){function isValidTarget(target){return target===scope.chartId||"*"===target}scope.chartId&&scope.$on(SharedEventConstants.UEV_CHART_REFLOW,function(event,target){isValidTarget(target)&&Util.isDefAndNotNull(scope.chartInstance)&&scope.chartInstance.reflow()})}}}}return Chart.$inject=["timeRangeService"],Chart}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-chart"),Chart),define("app/view/components/chart/Chart",function(){});var MetricChartDataConfig=function(){function MetricChartDataConfig(){this.showMarkers=!1,this.observedVisible=!0,this.minimumVisible=!1,this.maximumVisible=!1,this.sumVisible=!1,this.countVisible=!1,this.baselineVisible=!1}return MetricChartDataConfig}(),MetricChartData=function(){function MetricChartData(){this.startTime=-1,this.intervalTime=-1}return MetricChartData.getSeriesFromMetricData=function(metricData,baselineData,chartDataConfig){var result=new MetricChartData;if(metricData&&metricData.dataTimeslices&&metricData.dataTimeslices.length>0){result.name=chartDataConfig.seriesTitle?chartDataConfig.seriesTitle:metricData.metricName,result.metricSeries={value:null,min:null,max:null,sum:null,count:null};for(var metricProperties=["value","min","max","sum","count","base"],timeslices=metricData.dataTimeslices,i=0;i<timeslices.length;i++)if(timeslices[i]){var metricValue=timeslices[i].metricValue;Util.isUndefOrNull(metricValue)&&(metricValue={value:null,max:null,min:null,sum:null,count:null});for(var j=0;j<metricProperties.length;j++){var currentMetricPlot=metricProperties[j];if(metricValue.hasOwnProperty(currentMetricPlot)){var value=metricValue[currentMetricPlot],time=timeslices[i].startTime.getTime(),dataPoint={x:time,y:Util.isDefAndNotNull(value)?value:null,marker:null};switch(null!=value&&this.isTimesliceSolo(timeslices,i)&&(dataPoint.marker={enabled:!0,radius:MetricChartData.METRIC_CHART_MARKER_SIZE}),result.metricSeries[currentMetricPlot]?result.metricSeries[currentMetricPlot].data.push(dataPoint):result.metricSeries[currentMetricPlot]={data:[dataPoint]},currentMetricPlot){case"value":result.metricSeries[currentMetricPlot].name=ResourceManager.instance().getString("ui","ms_obsMetricName",[result.name]),result.metricSeries[currentMetricPlot].visible=chartDataConfig.observedVisible,result.metricSeries[currentMetricPlot].marker={symbol:"circle"};break;case"min":result.metricSeries[currentMetricPlot].name=ResourceManager.instance().getString("ui","ms_minMetricName",[result.name]),result.metricSeries[currentMetricPlot].visible=chartDataConfig.minimumVisible,result.metricSeries[currentMetricPlot].marker={symbol:"triangle-down"};break;case"max":result.metricSeries[currentMetricPlot].name=ResourceManager.instance().getString("ui","ms_maxMetricName",[result.name]),result.metricSeries[currentMetricPlot].visible=chartDataConfig.maximumVisible,result.metricSeries[currentMetricPlot].marker={symbol:"triangle"};break;case"sum":result.metricSeries[currentMetricPlot].name=ResourceManager.instance().getString("ui","ms_sumMetricName",[result.name]),result.metricSeries[currentMetricPlot].visible=chartDataConfig.sumVisible,result.metricSeries[currentMetricPlot].marker={symbol:"diamond"};break;case"count":result.metricSeries[currentMetricPlot].name=ResourceManager.instance().getString("ui","ms_countMetricName",[result.name]),result.metricSeries[currentMetricPlot].visible=chartDataConfig.countVisible,result.metricSeries[currentMetricPlot].marker={symbol:"square"};break;default:result.metricSeries[currentMetricPlot].name=result.name}result.metricSeries[currentMetricPlot].lineWidth="value"===currentMetricPlot?MetricChartData.METRIC_CHART_LINE_WIDTH_PRIMARY:MetricChartData.METRIC_CHART_LINE_WIDTH_AUXILIARY,result.metricSeries[currentMetricPlot].marker.radius=MetricChartData.METRIC_CHART_MARKER_SIZE,result.metricSeries[currentMetricPlot].marker.enabled=chartDataConfig.showMarkers}}if(baselineData&&baselineData.dataTimeslices[i].metricValue){var time=timeslices[i].startTime.getTime(),baselineValue=baselineData.dataTimeslices[i].metricValue.value,baselinePoint={x:time,y:baselineValue,marker:null};null!=value&&this.isTimesliceSolo(timeslices,i)&&(baselinePoint.marker={enabled:!0,radius:MetricChartData.METRIC_CHART_MARKER_SIZE}),result.metricSeries.base?result.metricSeries.base.data.push(baselinePoint):result.metricSeries.base={data:[baselinePoint]}}}result.metricSeries.base||(result.metricSeries.base={data:null}),result.metricSeries.base.lineWidth=MetricChartData.METRIC_CHART_LINE_WIDTH_AUXILIARY,result.metricSeries.base.dashStyle="longdash",result.metricSeries.base.name=ResourceManager.instance().getString("ui","ms_baseMetricName",[result.name]),result.metricSeries.base.visible=chartDataConfig.baselineVisible,result.metricSeries.base.marker={symbol:"circle",lineWidth:MetricChartData.METRIC_CHART_LINE_WIDTH_AUXILIARY,lineColor:null,fillColor:"#FFF",radius:MetricChartData.METRIC_CHART_MARKER_SIZE,enabled:chartDataConfig.showMarkers}}return result},MetricChartData.prototype.setColor=function(color){for(var seriesObject in this.metricSeries)this.metricSeries.hasOwnProperty(seriesObject)&&Util.isDefAndNotNull(this.metricSeries[seriesObject])&&(this.metricSeries[seriesObject].color=color)},MetricChartData.prototype.setPlotPoints=function(enabled){for(var seriesObject in this.metricSeries)this.metricSeries.hasOwnProperty(seriesObject)&&(this.metricSeries[seriesObject].marker.enabled=enabled)},MetricChartData.isTimesliceSolo=function(timeslices,currentIndex){var result=!1;if(null!=timeslices[currentIndex]){var leftNull=!1,rightNull=!1;(0==currentIndex||null==timeslices[currentIndex-1].metricValue)&&(leftNull=!0),(currentIndex+1==timeslices.length||null==timeslices[currentIndex+1].metricValue)&&(rightNull=!0),result=leftNull&&rightNull}return result},MetricChartData.METRIC_CHART_LINE_WIDTH_PRIMARY=1,MetricChartData.METRIC_CHART_LINE_WIDTH_AUXILIARY=MetricChartData.METRIC_CHART_LINE_WIDTH_PRIMARY/2,MetricChartData.METRIC_CHART_MARKER_SIZE=3,MetricChartData}();define("app/view/components/chart/MetricChartData",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},TabRowController=function(_super){function TabRowController($scope){_super.call(this,$scope),this.$scope=$scope,this.showDropdownToggle=!1,$scope.controller=this}return __extends(TabRowController,_super),TabRowController.prototype.getTabRowContainerClass=function(){switch(parseInt(this.$scope.adTabLevel)){case 1:return"adsTabRowLevel2";case 0:default:return"adsTabRowLevel1"}},TabRowController.prototype.getTabRowTabClass=function(){switch(parseInt(this.$scope.adTabLevel)){case 1:return"adsTabLevel2";case 0:default:return"adsTabLevel1"}},TabRowController.$inject=["$scope"],TabRowController}(ControllerBase),TabRowDirective=function(){function TabRowDirective(){return{restrict:"E",scope:{navigationTabs:"=svNavigationTabs",adActionDropdownItems:"=",adActionDropdownTitle:"@",singleSelectedTab:"=",adTabLevel:"@"},templateUrl:"app/view/components/TabRow/TabRowTemplate.html",controller:TabRowController,link:function(scope,element,attrs,controller){function onTabCreation(){resizeTabRow(),AngularUtil.rootScope().$broadcast(EventConstants.UEV_LAYOUT_CHANGED)}function resizeTabRow(){var tabs=element.find("."+controller.getTabRowContainerClass()+">."+controller.getTabRowTabClass()).not(".dropdown-toggleAD"),overflowTabs=element.find("#dropdownTabs").children(),actionButton=element.find(".ads-main-title-bar-light-action-item"),actionButtonWidth=angular.isDefined(actionButton)&&actionButton.length>0?actionButton[0].clientWidth:0;tabs.css("display",""),overflowTabs.hide();var width=element.find("div."+controller.getTabRowContainerClass()).width(),widthSum=0,numOfVisibleTabs=0,overflow=!1;controller.showDropdownToggle=!1,tabs.each(function(index,element){return widthSum+=element.clientWidth,widthSum+actionButtonWidth+TabRowDirective.paddingRight>width?($(this).hide(),numOfVisibleTabs=index,overflow=!0,!1):!0}),overflow&&(tabs.each(function(index){index>numOfVisibleTabs&&$(this).hide()}),controller.showDropdownToggle=!0,overflowTabs.each(function(index){index>=numOfVisibleTabs&&$(this).css("display","")}))}var _this=this;scope.$watch("navigationTabs",function(){window.setTimeout(onTabCreation,1)}),scope.$on("layoutChanged",function(){resizeTabRow()}),scope.clickTab=function(tab){var singleSelectedTab=Util.isUndefOrNull(scope.singleSelectedTab)||scope.singleSelectedTab;tab.selected||"function"!=typeof tab.clickFn||tab.clickFn.call(_this,tab.fnArg),singleSelectedTab&&Util.isDefAndNotEmptyArray(scope.navigationTabs)&&scope.navigationTabs.forEach(function(navTab){navTab.selected=tab===navTab})},scope.clickAction=function(actionItem){"function"==typeof actionItem.clickFn&&actionItem.clickFn.call(this,actionItem.fnArg)}}}}return TabRowDirective.$inject=[],TabRowDirective.paddingRight=100,TabRowDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-tab-row"),TabRowDirective);var NavigationTabUtil=function(){function NavigationTabUtil(){}return NavigationTabUtil.getTabByName=function(tabs,name){for(var i=0;i<tabs.length;i++)if(tabs[i].name==name)return tabs[i];return null},NavigationTabUtil.selectTabByName=function(tabs,name){var tab=NavigationTabUtil.getTabByName(tabs,name);tab&&(tab.selected=!0)},NavigationTabUtil.create=function(label,clickFn){var tab={};return tab.name=label,tab.clickFn=clickFn,tab},NavigationTabUtil.getSelectedNavigationTabLabelFromDom=function(){var seletedTabLabel=null,selectedTab=$(".adsTabLevel1.selected");if(selectedTab){var text=selectedTab.text();text&&(seletedTabLabel=text.trim())}return seletedTabLabel},NavigationTabUtil}(),TabRowLevel;!function(TabRowLevel){TabRowLevel[TabRowLevel.ONE=0]="ONE",TabRowLevel[TabRowLevel.TWO=1]="TWO"}(TabRowLevel||(TabRowLevel={})),define("app/view/components/TabRow/TabRowDirective",function(){});var HelpBubblePopoverDirective=function(){function HelpBubblePopoverDirective(){return{restrict:"EA",replace:!1,scope:{adContent:"@",adTitle:"@",adTarget:"=",adPlacement:"=",adContentTemplate:"=",adTrigger:"=",adShow:"=",adNext:"=",adHelpBubbleId:"@",adAppendToBody:"@",adCloseOnTargetClick:"@",adShowOrder:"@",adPopupEnabled:"=",adLinkName:"@",adShowAfterNumberLogins:"@",adShowOverDialogs:"@"},controller:HelpBubblePopoverController,link:function(scope,element,attrs,controller){controller.setTemplate("app/view/components/popover/HelpBubblePopover.tpl.html"),controller.link(scope,element,attrs),controller.initLater()}}}return HelpBubblePopoverDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-help-bubble-popover"),HelpBubblePopoverDirective).config(function($popoverProvider){angular.extend($popoverProvider.defaults,{html:!0})}),define("app/view/components/popover/HelpBubblePopoverDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},HelpBubblePopoverController=function(_super){function HelpBubblePopoverController($scope,$popover,userPreferenceUiService,userUiService){var _this=this;_super.call(this,$scope,$popover),this.$scope=$scope,this.userPreferenceUiService=userPreferenceUiService,this.userUiService=userUiService,this.mode=HelpBubblePopoverController.MODE_HELP_BUBBLE,this.linkUrl=null,this.isLocationPermitHelpBubbles=!0,this._showOnEvalAsync=!1,$scope.controller=this,EventBusService.instance().registerEventListener(NavigationService.UEV_NAV_ACTION,function(){_this.onClose(),HelpBubblePopoverController.popupsToShowQueue=[],HelpBubblePopoverController.popupsToShowMap={},_this.isLocationPermitHelpBubbles||_this.shouldShow()},this.$scope),EventBusService.instance().registerEventListener(EventConstants.UEV_DISABLE_HELP_POPUPS,function(){_this.hide(),HelpBubblePopoverController.popupsToShowQueue=[],HelpBubblePopoverController.popupsToShowMap={}},this.$scope),EventBusService.instance().registerEventListener(EventConstants.UEV_RERUN_HELP_POPUPS,function(){_this.shouldShow()},this.$scope)}return __extends(HelpBubblePopoverController,_super),HelpBubblePopoverController.isHelpBubblesShowingOrWaitingToShow=function(){return HelpBubblePopoverController.popupShowing||HelpBubblePopoverController.popupsToShowQueue&&HelpBubblePopoverController.popupsToShowQueue.length>0?!0:!1},HelpBubblePopoverController.prototype.init=function(){var _this=this;_super.prototype.init.call(this),MasterService.instance().onInitDataFetch().then(function(){_this.isEnabled()&&_this.shouldShow()})},HelpBubblePopoverController.prototype.shouldShow=function(){var _this=this,isLoggedIn=MasterService.instance().initData&&MasterService.instance().isLoggedIn,allHelpBubblesDisabled=UserService.instance().getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.HELP_BUBBLE_ALL_ITEMS_DISABLED),thisHelpBubbleDisabled=this.getHelpId()&&UserService.instance().getGeneralUserPreferenceBooleanValue(this.getDisabledBubblePreferenceName()),locationsNotPermittingHelpBubbles=[NavigationDataConstants.AD_GETTING_STARTED,NavigationDataConstants.AGENT_INSTALL_WIZARD,NavigationDataConstants.AD_HOME_OVERVIEW,NavigationDataConstants.AD_PRODUCT_TOUR],forceDisablePopups=AppConfig.instance().disablePopups,htmlDialogsOpen=DialogService.instance().htmlDialogsOpen();this.isLocationPermitHelpBubbles=-1==locationsNotPermittingHelpBubbles.indexOf(URLParams.getCurrentUrlParams().location());var showAfterNumberLogins=Util.parseInt(this.$scope.adShowAfterNumberLogins,-1),numberLogins=Math.max(UserService.instance().getGeneralUserPreferenceNumberValue(UserService.NUMBER_OF_42_LOGINS),0),maxBubblesPerSessionLimitReached=HelpBubblePopoverController.numberHelpBubblesShownInCurrentSession>=HelpBubblePopoverController.maxHelpBubblesPerSession;forceDisablePopups||!isLoggedIn||allHelpBubblesDisabled||thisHelpBubbleDisabled||HelpBubblePopoverController.disableHelpBubbles||htmlDialogsOpen&&"true"!=this.$scope.adShowOverDialogs||ProductTourService.instance().isTourInProgress||!this.isLocationPermitHelpBubbles||maxBubblesPerSessionLimitReached||!(numberLogins>showAfterNumberLogins)?this.hide():(HelpBubblePopoverController.numberHelpBubblesShownInCurrentSession++,InjectorService.instance().$timeout()(function(){_this.addToShowQueue()},1e3))},HelpBubblePopoverController.prototype.addToShowQueue=function(){var _this=this;HelpBubblePopoverController.popupsToShowMap[this.getHelpId()]||(HelpBubblePopoverController.popupsToShowQueue.push(this),HelpBubblePopoverController.popupsToShowMap[this.getHelpId()]=this,this._showOnEvalAsync||(this._showOnEvalAsync=!0,this.$scope.$evalAsync(function(){_this._showOnEvalAsync=!1,_this.showNextPopupFromQueue()})))},HelpBubblePopoverController.prototype.show=function(){this.$scope.adLinkName&&(this.linkUrl=ExternalUrls[this.$scope.adLinkName],this.$scope.adLinkText||(this.$scope.adLinkText="More Information")),this.mode==HelpBubblePopoverController.MODE_HELP_BUBBLE?_super.prototype.show.call(this):this.showScreenInfoBox()},HelpBubblePopoverController.prototype.showScreenInfoBox=function(){this.isShowing=!0},HelpBubblePopoverController.prototype.hide=function(){this.mode==HelpBubblePopoverController.MODE_HELP_BUBBLE?_super.prototype.hide.call(this):this.isShowing=!1,HelpBubblePopoverController.popupShowing&&HelpBubblePopoverController.popupShowing.getHelpId()==this.getHelpId()&&(HelpBubblePopoverController.popupShowing=null),HelpBubblePopoverController.popupsToShowQueue&&HelpBubblePopoverController.popupsToShowQueue.length>0&&this.showNextPopupFromQueue()},HelpBubblePopoverController.prototype.onClose=function(){this.hide()},HelpBubblePopoverController.prototype.onCloseAndDismiss=function(){this.hide(),this.setDontShowAgainUserPreference()},HelpBubblePopoverController.prototype.onHelpLink=function(){},HelpBubblePopoverController.prototype.buildPopover=function(){var popover=_super.prototype.buildPopover.call(this);return popover.$scope.onClose=this.onClose.bind(this),popover.$scope.onCloseAndDismiss=this.onCloseAndDismiss.bind(this),HelpBubblePopoverController.DONT_SHOW_AGAIN_ON_CLOSE?popover.$scope.bottomLinkText="Ok, got it":this.getHelpId()&&(popover.$scope.bottomLinkText="Don't show again"),popover},HelpBubblePopoverController.prototype.setDontShowAgainUserPreference=function(){UserService.instance().setGeneralUserPreferenceBooleanValue(this.getDisabledBubblePreferenceName(),!0)},HelpBubblePopoverController.prototype.getHelpId=function(){return this.$scope.adHelpBubbleId},HelpBubblePopoverController.prototype.getDisabledBubblePreferenceName=function(){return GeneralUserPreferenceConstants.HELP_BUBBLE_ITEM_DISABLED+"."+this.getHelpId()},HelpBubblePopoverController.prototype.showNextPopupFromQueue=function(){if(HelpBubblePopoverController.popupsToShowQueue&&!HelpBubblePopoverController.popupShowing){for(var nextBubbleToShow=null,i=0;i<HelpBubblePopoverController.popupsToShowQueue.length;i++)nextBubbleToShow||(nextBubbleToShow=HelpBubblePopoverController.popupsToShowQueue[i]),HelpBubblePopoverController.popupsToShowQueue[i].getShowOrder()<=nextBubbleToShow.getShowOrder()&&(nextBubbleToShow=HelpBubblePopoverController.popupsToShowQueue[i]);nextBubbleToShow&&(nextBubbleToShow.show(),HelpBubblePopoverController.popupShowing=nextBubbleToShow,HelpBubblePopoverController.popupsToShowQueue=_.without(HelpBubblePopoverController.popupsToShowQueue,nextBubbleToShow),delete HelpBubblePopoverController.popupsToShowMap[nextBubbleToShow.getHelpId()])
}},HelpBubblePopoverController.prototype.getShowOrder=function(){return Util.parseInt(this.$scope.adShowOrder,1e3)},HelpBubblePopoverController.DONT_SHOW_AGAIN_ON_CLOSE=!0,HelpBubblePopoverController.MODE_HELP_BUBBLE="MODE_HELP_BUBBLE",HelpBubblePopoverController.MODE_SCREEN_INFO_BOX="MODE_SCREEN_INFO_BOX",HelpBubblePopoverController.disableHelpBubbles=!1,HelpBubblePopoverController.maxHelpBubblesPerSession=3,HelpBubblePopoverController.numberHelpBubblesShownInCurrentSession=0,HelpBubblePopoverController.$inject=["$scope","$popover","userPreferenceUiService","userUiService"],HelpBubblePopoverController.popupsToShowQueue=[],HelpBubblePopoverController.popupsToShowMap={},HelpBubblePopoverController.popupShowing=null,HelpBubblePopoverController}(PopoverController);appdynamicsModule.controller("HelpBubblePopoverController",HelpBubblePopoverController),define("app/view/components/popover/HelpBubblePopoverController",function(){});var InfoBladeDirective=function(){function InfoBladeDirective(){return{restrict:"E",replace:!1,scope:{adContent:"@",adTitle:"@",adTarget:"=",adPlacement:"=",adContentTemplate:"=",adTrigger:"=",adShow:"=",adNext:"=",adHelpBubbleId:"@",adAppendToBody:"@",adCloseOnTargetClick:"@",adShowOrder:"@",adPopupEnabled:"=",adLinkName:"@",adLinkText:"@"},templateUrl:"app/view/components/popover/ScreenInfoBoxView.html",controller:HelpBubblePopoverController,link:function(scope,element,attrs,controller){controller.mode=HelpBubblePopoverController.MODE_SCREEN_INFO_BOX,controller.link(scope,element,attrs),controller.initLater()}}}return InfoBladeDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-screen-info-box"),InfoBladeDirective),define("app/view/components/popover/ScreenInfoBoxDirective",function(){});var ProductTourPopoverDirective=function(){function ProductTourPopoverDirective(){return{restrict:"EA",replace:!1,transclude:!0,scope:{adHelpId:"@",adContent:"@",adTitle:"@",adHelpLink:"@",adVideoLink:"@",adLocation:"@",adTarget:"=",adPlacement:"=",adContentTemplate:"=",adTrigger:"=",adAppendToBody:"@",adCloseOnTargetClick:"@",adPopupEnabled:"=",adIsLast:"="},controller:"ProductTourPopoverController",link:function(scope,element,attrs,controller){controller.setTemplate("app/view/components/popover/ProductTourPopover.tpl.html"),controller.link(scope,element,attrs),controller.init()}}}return ProductTourPopoverDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-product-tour-popover"),ProductTourPopoverDirective).config(function($popoverProvider){angular.extend($popoverProvider.defaults,{html:!0})}),define("app/view/components/popover/ProductTourPopoverDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ProductTourPopoverController=function(_super){function ProductTourPopoverController($scope,$popover,productTourService){_super.call(this,$scope,$popover),this.$scope=$scope,this.$popover=$popover,this.productTourService=productTourService,this.docLinks={APM_TOUR_APP_FLOW_MAP:ExternalUrls.PRODUCT_TOUR_JAVA_APP_FLOW_MAP_DOC,APM_TOUR_APP_DASHBOARD:ExternalUrls.PRODUCT_TOUR_JAVA_APP_DASHBOARD_DOC,APM_TOUR_BUSINESS_TRANSACTION_LIST:ExternalUrls.PRODUCT_TOUR_JAVA_BUSINESS_TRANSACTION_LIST_DOC,APM_TOUR_NODE_DASHBOARD:ExternalUrls.PRODUCT_TOUR_JAVA_NODE_DASHBOARD_DOC,APM_TOUR_SLOW_TRANSACTIONS:ExternalUrls.PRODUCT_TOUR_JAVA_SLOW_TRANSACTIONS_DOC,APM_TOUR_ERROR_TRANSACTIONS:ExternalUrls.PRODUCT_TOUR_JAVA_ERROR_TRANSACTIONS_DOC,APM_TOUR_DEFAULT_HEALTH_RULES_LIST:ExternalUrls.PRODUCT_TOUR_JAVA_DEFAULT_HEALTH_RULES_LIST_DOC,APM_TOUR_HEALTH_RULE_VIOLATIONS_LIST:ExternalUrls.PRODUCT_TOUR_JAVA_HEALTH_RULE_VIOLATIONS_LIST_DOC,PRODUCT_TOUR_JAVA_CREATE_POLICY:ExternalUrls.PRODUCT_TOUR_JAVA_CREATE_POLICY_DOC,PRODUCT_TOUR_EUM_APP_DASHBOARD:ExternalUrls.PRODUCT_TOUR_EUM_APP_DASHBOARD_DOC,PRODUCT_TOUR_EUM_ALL_WEB_APPS:ExternalUrls.PRODUCT_TOUR_EUM_ALL_WEB_APPS_DOC,PRODUCT_TOUR_EUM_GEO_DASHBOARD:ExternalUrls.PRODUCT_TOUR_EUM_GEO_DASHBOARD_DOC,PRODUCT_TOUR_EUM_PAGES_AJAX_REQUESTS:ExternalUrls.PRODUCT_TOUR_EUM_PAGES_AJAX_REQUESTS_DOC,PRODUCT_TOUR_EUM_SESSIONS:ExternalUrls.PRODUCT_TOUR_EUM_SESSIONS_DOC,PRODUCT_TOUR_EUM_ANALYZE:ExternalUrls.PRODUCT_TOUR_EUM_ANALYZE_DOC,PRODUCT_TOUR_EUM_BROWSER_SNAPSHOTS:ExternalUrls.PRODUCT_TOUR_EUM_BROWSER_SNAPSHOTS_DOC,PRODUCT_TOUR_MOBILE_OVERALL_HEALTH:ExternalUrls.PRODUCT_TOUR_MOBILE_OVERALL_HEALTH_DOC,PRODUCT_TOUR_MOBILE_OVERVIEW_DASHBOARD:ExternalUrls.PRODUCT_TOUR_MOBILE_OVERVIEW_DASHBOARD_DOC,PRODUCT_TOUR_MOBILE_GEO_DASHBOARD:ExternalUrls.PRODUCT_TOUR_MOBILE_GEO_DASHBOARD_DOC,PRODUCT_TOUR_MOBILE_SESSIONS:ExternalUrls.PRODUCT_TOUR_MOBILE_SESSIONS_DOC,PRODUCT_TOUR_MOBILE_NETWORK_REQUESTS:ExternalUrls.PRODUCT_TOUR_MOBILE_NETWORK_REQUESTS_DOC,PRODUCT_TOUR_MOBILE_ANALYZE_CRASHES:ExternalUrls.PRODUCT_TOUR_MOBILE_ANALYZE_CRASHES_DOC,PRODUCT_TOUR_MOBILE_VIEW_CRASHES:ExternalUrls.PRODUCT_TOUR_MOBILE_VIEW_CRASHES_DOC},this.videoLinks={APM_TOUR_APP_FLOW_MAP:ExternalUrls.PRODUCT_TOUR_JAVA_APP_FLOW_MAP_VIDEO,APM_TOUR_APP_DASHBOARD:ExternalUrls.PRODUCT_TOUR_JAVA_APP_DASHBOARD_VIDEO,APM_TOUR_BUSINESS_TRANSACTION_LIST:ExternalUrls.PRODUCT_TOUR_JAVA_BUSINESS_TRANSACTION_LIST_VIDEO,APM_TOUR_NODE_DASHBOARD:ExternalUrls.PRODUCT_TOUR_JAVA_NODE_DASHBOARD_VIDEO,APM_TOUR_SLOW_TRANSACTIONS:ExternalUrls.PRODUCT_TOUR_JAVA_SLOW_TRANSACTIONS_VIDEO,APM_TOUR_ERROR_TRANSACTIONS:ExternalUrls.PRODUCT_TOUR_JAVA_ERROR_TRANSACTIONS_VIDEO,APM_TOUR_DEFAULT_HEALTH_RULES_LIST:ExternalUrls.PRODUCT_TOUR_JAVA_DEFAULT_HEALTH_RULES_LIST_VIDEO,APM_TOUR_HEALTH_RULE_VIOLATIONS_LIST:ExternalUrls.PRODUCT_TOUR_JAVA_HEALTH_RULE_VIOLATIONS_LIST_VIDEO,APM_TOUR_CREATE_POLICY:ExternalUrls.PRODUCT_TOUR_JAVA_CREATE_POLICY_VIDEO,PRODUCT_TOUR_EUM_APP_DASHBOARD:ExternalUrls.PRODUCT_TOUR_EUM_APP_DASHBOARD_VIDEO,PRODUCT_TOUR_EUM_ALL_WEB_APPS:ExternalUrls.PRODUCT_TOUR_EUM_ALL_WEB_APPS_VIDEO,PRODUCT_TOUR_EUM_GEO_DASHBOARD:ExternalUrls.PRODUCT_TOUR_EUM_GEO_DASHBOARD_VIDEO,PRODUCT_TOUR_EUM_PAGES_AJAX_REQUESTS:ExternalUrls.PRODUCT_TOUR_EUM_PAGES_AJAX_REQUESTS_VIDEO,PRODUCT_TOUR_EUM_SESSIONS:ExternalUrls.PRODUCT_TOUR_EUM_SESSIONS_VIDEO,PRODUCT_TOUR_EUM_ANALYZE:ExternalUrls.PRODUCT_TOUR_EUM_ANALYZE_VIDEO,PRODUCT_TOUR_EUM_BROWSER_SNAPSHOTS:ExternalUrls.PRODUCT_TOUR_EUM_BROWSER_SNAPSHOTS_VIDEO,PRODUCT_TOUR_MOBILE_OVERALL_HEALTH:ExternalUrls.PRODUCT_TOUR_MOBILE_OVERALL_HEALTH_VIDEO,PRODUCT_TOUR_MOBILE_OVERVIEW_DASHBOARD:ExternalUrls.PRODUCT_TOUR_MOBILE_OVERVIEW_DASHBOARD_VIDEO,PRODUCT_TOUR_MOBILE_GEO_DASHBOARD:ExternalUrls.PRODUCT_TOUR_MOBILE_GEO_DASHBOARD_VIDEO,PRODUCT_TOUR_MOBILE_SESSIONS:ExternalUrls.PRODUCT_TOUR_MOBILE_SESSIONS_VIDEO,PRODUCT_TOUR_MOBILE_NETWORK_REQUESTS:ExternalUrls.PRODUCT_TOUR_MOBILE_NETWORK_REQUESTS_VIDEO,PRODUCT_TOUR_MOBILE_ANALYZE_CRASHES:ExternalUrls.PRODUCT_TOUR_MOBILE_ANALYZE_CRASHES_VIDEO,PRODUCT_TOUR_MOBILE_VIEW_CRASHES:ExternalUrls.PRODUCT_TOUR_MOBILE_VIEW_CRASHES_VIDEO}}return __extends(ProductTourPopoverController,_super),ProductTourPopoverController.prototype.link=function(scope,iElement,iAttrs){_super.prototype.link.call(this,scope,iElement,iAttrs),this.productTourService.registerTourStepPopover(this)},ProductTourPopoverController.prototype.init=function(){_super.prototype.init.call(this),this.hide()},ProductTourPopoverController.prototype.getProductTourStepId=function(){return this.attrs?this.attrs.id:null},ProductTourPopoverController.prototype.onNext=function(){this.productTourService.onNext()},ProductTourPopoverController.prototype.onBack=function(){this.productTourService.onBack()},ProductTourPopoverController.prototype.onClose=function(){this.hide(),this.productTourService.pauseTour()},ProductTourPopoverController.prototype.onPopupEnabledChange=function(){},ProductTourPopoverController.prototype.buildPopover=function(){var popover=_super.prototype.buildPopover.call(this),popoverId=popover.$options.id;return popover.$scope.backButtonVisible=this.isBackButtonVisible(popoverId),popover.$scope.onNext=this.onNext.bind(this),popover.$scope.onBack=this.onBack.bind(this),popover.$scope.onClose=this.onClose.bind(this),popover.$scope.video=this.videoLinks[this.$scope.adHelpId],popover.$scope.docs=this.docLinks[this.$scope.adHelpId],popover.$scope.location=this.$scope.adLocation,popover.$scope.nextButtonValue=this.getNextButtonValue(popoverId),popover.$scope.getString=this.getString.bind(this),popover.$scope.tourPosition=ProductTourService.instance().currentProductTourBubbleStep.position,popover.$scope.tourLength=ProductTourService.instance().currentTour.length,popover.$scope.onViewProductTour=this.onViewProductTour.bind(this),popover},ProductTourPopoverController.prototype.getNextButtonValue=function(id){var lastStepId=ProductTourService.instance().currentTour.lastStep.helpId;return lastStepId==id?ProductTourPopoverController.FINISH:ProductTourPopoverController.NEXT},ProductTourPopoverController.prototype.isBackButtonVisible=function(id){var firstStepId=ProductTourService.instance().currentTour.firstStep.helpId;return firstStepId!=id},ProductTourPopoverController.prototype.onViewProductTour=function(){this.productTourService.pauseTour(),HomeViewService.instance().viewProductTour()},ProductTourPopoverController.FINISH="Finish",ProductTourPopoverController.NEXT="Next",ProductTourPopoverController.$inject=["$scope","$popover","productTourService","resourceManager"],ProductTourPopoverController}(PopoverController);appdynamicsModule.controller("ProductTourPopoverController",ProductTourPopoverController),define("app/view/components/popover/ProductTourPopoverController",function(){});var ProductTourProgressBarDirective=function(){function ProductTourProgressBarDirective(){return{restrict:"E",scope:{},templateUrl:"app/view/home/productTour/productTourProgressBar/ProductTourProgressBarView.html",replace:!1,controller:"ProductTourProgressBarController",link:function(scope,iElement,attrs,controller){controller.link(scope,iElement,attrs)}}}return ProductTourProgressBarDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-product-tour-progress-bar"),ProductTourProgressBarDirective),define("app/view/home/productTour/productTourProgressBar/ProductTourProgressBarDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ProductTourProgressBarController=function(_super){function ProductTourProgressBarController($scope,resourceManager,injectorService,notificationService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.injectorService=injectorService,this.notificationService=notificationService,this.productTourCompletion="0%",this.popupEnabled=!1,$scope.controller=this,MasterService.instance().initData?this.init():EventBusService.instance().registerEventListener(MasterService.UEV_INIT_DATA_FETCHED,function(){_this.init()},this.$scope),this.setupEventListeners()}return __extends(ProductTourProgressBarController,_super),ProductTourProgressBarController.prototype.link=function(scope,iElement){this.element=iElement},ProductTourProgressBarController.prototype.init=function(){this.productTourStarted=UserService.instance().getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.PRODUCT_TOUR_STARTED),this.isProductTourCompleted=UserService.instance().getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.PRODUCT_TOUR_COMPLETE+"."+ProductTourService.instance().currentTourName),this.isProductTourPaused=!0,this.updateProgressBar()},ProductTourProgressBarController.prototype.updateProgressBar=function(){ProductTourService.instance().currentTour&&(this.productTourCompletion=ProductTourService.instance().calculatePercentComplete().toString()+"%",this.productTourStarted=UserService.instance().getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.PRODUCT_TOUR_STARTED),this.setShowProgressBar())},ProductTourProgressBarController.prototype.onClickProgressBar=function(){HomeViewService.instance().viewProductTour()},ProductTourProgressBarController.prototype.setShowProgressBar=function(){var currentProductMode=MasterService.instance().getProductModeFromCurrentAccount();switch(currentProductMode){case MasterService.PRODUCT_LITE_MODE:this.showProgressBar=!this.isProductTourCompleted&&!this.isProductTourPaused;break;case MasterService.PRODUCT_PRO_TRIAL_MODE:this.showProgressBar=this.productTourStarted&&!this.isProductTourCompleted;break;default:this.showProgressBar=!1}},ProductTourProgressBarController.prototype.setupEventListeners=function(){var _this=this;EventBusService.instance().registerEventListener(ProductTourService.UEV_PRODUCT_TOUR_POPOVER_ON_VISITED,function(){_this.isProductTourPaused=!1,_this.updateProgressBar()},this.$scope),EventBusService.instance().registerEventListener(ProductTourService.UEV_PRODUCT_TOUR_COMPLETED,function(){_this.isProductTourCompleted=!0,_this.setShowProgressBar()},this.$scope),EventBusService.instance().registerEventListener(ProductTourService.UEV_PRODUCT_TOUR_STARTED,function(){_this.productTourStarted=!0,_this.setShowProgressBar()},this.$scope),EventBusService.instance().registerEventListener(ProductTourService.UEV_PRODUCT_TOUR_PAUSED,function(){_this.isProductTourPaused=!0,_this.popupEnabled=!0,_this.setShowProgressBar()},this.$scope),EventBusService.instance().registerEventListener(App.UEV_DELETE_APP,function(){ApplicationsCache.instance().getAllApplications(!0).then(function(){var hasApps=ApplicationsCache.instance().apmApplications().length>0;hasApps&&(_this.showProgressBar=!1)})},this.$scope)},ProductTourProgressBarController.$inject=["$scope","resourceManager","injectorService","notificationService"],ProductTourProgressBarController}(ControllerBase);define("app/view/home/productTour/productTourProgressBar/ProductTourProgressBarController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EventViewService=function(_super){function EventViewService($location,navigationService,notificationService,resourceManager,flashService,timeRangeService){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.flashService=flashService,this.timeRangeService=timeRangeService}return __extends(EventViewService,_super),EventViewService.instance=function(){return AngularUtil.getADInjector().get(EventViewService.SERVICE_NAME)},EventViewService.prototype.viewEventDashboard=function(applicationId,entityType,entityId,event){void 0===entityType&&(entityType=""),void 0===entityId&&(entityId=-1),void 0===event&&(event=null);var params=this.createUrlParamsWithCurrentTimeRange();if(params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),entityType.length>0&&Util.isValidId(entityId))switch(entityType){case EntityType.APPLICATION:params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_EVENTSTREAM_LIST);break;case EntityType.BUSINESS_TRANSACTION:params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_BT_EVENTSTREAM_LIST),params.setNumberParam(UrlConstants.BUSINESS_TRANSACTION_ID,entityId);break;case EntityType.APPLICATION_COMPONENT:params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_COMPONENT_EVENTSTREAM_LIST),params.setNumberParam(UrlConstants.COMPONENT_ID,entityId);break;case EntityType.APPLICATION_COMPONENT_NODE:params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_NODE_EVENTSTREAM_LIST),params.setNumberParam(UrlConstants.NODE_ID,entityId)}if(event&&event.name){var eventType=event.name.substring("UEV_VIEW_EVENTS_".length);eventType.length>0&&params.setParam(UrlConstants.EVENT_TYPE,eventType)}this.navigationService.navigateTo(params.toString())},EventViewService.prototype.viewEventDetails=function(eventStreamUiItem,appId,isDBMonitoringApp){void 0===isDBMonitoringApp&&(isDBMonitoringApp=!1),eventStreamUiItem.type==EventStreamUiItemType.EVENT?this.openEventDetailsModal(eventStreamUiItem,isDBMonitoringApp):eventStreamUiItem.type==EventStreamUiItemType.REQUEST_SEGMENT_DATA&&SnapshotViewService.instance().viewRequestSegmentData({requestGUID:eventStreamUiItem.requestGUID,serverStartTime:eventStreamUiItem.time,applicationId:appId,firstInChain:!1,id:eventStreamUiItem.id})},EventViewService.prototype.openEventDetailsModal=function(eventStreamUiItem,dbMonitoringMode){var _this=this;void 0===dbMonitoringMode&&(dbMonitoringMode=!1);var loader=ViewUtil.createLoaderDialog(),eventSummaryId=eventStreamUiItem.id,timeRange=TimeRangeService.instance().convertForUrl(EventUtil.getTimeRangeAroundEvent(eventStreamUiItem.time)),deferred=SharedInjectorService.instance().$q().defer();return deferred.promise.finally(function(){loader.dismiss()}),EventsUiService.instance().getEventSummaryById(eventSummaryId,timeRange).then(function(eventSummary){if(eventSummary)if(EventUtil.isEventAction_DiagSessionWorkbench(eventSummary.eventType)){var eventQueryScope={};eventQueryScope.timeRange=EventUtil.getTimeRangeAroundEvent(eventStreamUiItem.time),eventQueryScope.eventTypesString=[EventType.DIAGNOSTIC_SESSION],eventQueryScope.guid=eventStreamUiItem.diagnosticSessionGUID,EventsUiService.instance().getDiagnosticSessionEvents(eventQueryScope,eventStreamUiItem.applicationId).then(function(diagnosticSessions){Util.isDefAndNotEmptyArray(diagnosticSessions)?DialogService.instance().openDialogAsync({templateUrl:"app/view/apm/diagnosticSession/diagnosticSessionDetail/DiagnosticSessionDetailDialog.html",controllerPath:"app/view/apm/diagnosticSession/diagnosticSessionDetail/DiagnosticSessionDetailDialogController",controllerName:"DiagnosticSessionDetailDialogController",data:{applicationId:eventStreamUiItem.applicationId,diagSessionTreeEntry:diagnosticSessions[0]}}).then(function(modal){deferred.resolve(modal)}):deferred.reject()}).catch(function(){deferred.reject()})}else if(EventUtil.isPolicyViolationEventType(eventSummary.eventType)){deferred.reject();var timeString=_this.timeRangeService.convertToPreferenceString(EventUtil.getTimeRangeAroundEvent(eventSummary.eventTime.getMilliseconds())),appId=_this.getCurrentUrlParams().applicationId();_this.flashService.viewEventStreamItemDetailsFromHTML(appId,eventStreamUiItem.id,timeString,dbMonitoringMode)}else DialogService.instance().openDialogAsync({templateUrl:"app/view/common/Events/eventDetails/EventDetailViewer.html",controllerPath:"app/view/common/Events/eventDetails/EventDetailViewerController",controllerName:"EventDetailViewerController",data:{eventStreamUiItem:eventStreamUiItem,dbMonitoringMode:dbMonitoringMode}}).then(function(modal){deferred.resolve(modal)});else deferred.reject(),NotificationService.instance().displayError(_this.getString("ms_unableToFindEventErrorMessage",[eventSummaryId]),_this.getString("ms_unableToFindEventError"))}).catch(function(){deferred.reject()}),deferred.promise},EventViewService.prototype.simulateEvent=function(eventStreamUiItem){eventStreamUiItem.type===EventStreamUiItemType.EVENT&&this.openSimulateEventModal(eventStreamUiItem)},EventViewService.prototype.openSimulateEventModal=function(eventStreamUiItem){var loader=ViewUtil.createLoaderDialog(),eventSummaryId=eventStreamUiItem.id,timeRange=TimeRangeService.instance().convertForUrl(EventUtil.getTimeRangeAroundEvent(eventStreamUiItem.time));EventsUiService.instance().simulateEvent(eventSummaryId,timeRange).then(function(response){DialogService.instance().showDialog("EventSimulationController","app/view/common/Events/eventSimulation/EventSimulationController","app/view/common/Events/eventSimulation/EventSimulationView.html",{eventSimulationData:response,eventStreamUiItem:eventStreamUiItem}),loader.dismiss()})},EventViewService.prototype.viewActionDetails=function(eventSimulationDataBase){DialogService.instance().showDialog("ActionDetailController","app/view/common/Events/eventSimulation/ActionDetailController","app/view/common/Events/eventSimulation/ActionDetailView.html",{eventSimulationDataBase:eventSimulationDataBase})},EventViewService.prototype.viewIncidentDetailModal=function(eventSummaryId){var params=this.getCurrentUrlParams();params.setNumberParam(UrlConstants.EVENT_SUMMARY_ID,eventSummaryId),params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_INCIDENT_DETAIL_MODAL),this.navigationService.navigateTo(params.toString())},EventViewService.SERVICE_NAME="eventViewService",EventViewService.UEV_DELETE_EVENTS="UEV_DELETE_EVENTS",EventViewService.UEV_ARCHIVE_EVENTS="UEV_ARCHIVE_EVENTS",EventViewService.$inject=["$location","navigationService","notificationService","resourceManager","flashService","timeRangeService"],EventViewService}(ViewServiceBase);appdynamicsModule.service("eventViewService",EventViewService),define("app/view/common/Events/EventViewService",function(){});var EventCountsDirective=function(){function EventCountsDirective(){return{restrict:"E",replace:!1,templateUrl:"app/view/common/Events/eventCounts/EventCountsView.html",scope:{eventCounts:"="},controller:"EventCountsController"}}return EventCountsDirective.$inject=[],EventCountsDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-event-counts"),EventCountsDirective),define("app/view/common/Events/eventCounts/EventCountsDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EventCountsController=function(_super){function EventCountsController($scope,$rootScope,$location,resourceManager,notificationService,injectorService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.$scope.controller=this,this.$scope.$watch("eventCounts",function(){_this.init()}),this.$scope.EventConstants=EventConstants}return __extends(EventCountsController,_super),EventCountsController.getTotal=function(performanceStateSummary){return performanceStateSummary?performanceStateSummary.critical+performanceStateSummary.warning+performanceStateSummary.normal+performanceStateSummary.undefined+performanceStateSummary.unknown:0},EventCountsController.prototype.init=function(){this.eventCounts=this.$scope.eventCounts,this.eventFound=!1,this.eventCounts&&(this.allHealthRuleViolationsData=this.createEventCountsRowData(this.eventCounts.policyViolationEventCounts.totalPolicyViolations),this.overallAppPerformanceData=this.createEventCountsRowData(this.eventCounts.policyViolationEventCounts.overallApplicationPolicyViolations),this.btHealthData=this.createEventCountsRowData(this.eventCounts.policyViolationEventCounts.businessTransactionPolicyViolations),this.nodeHealthData=this.createEventCountsRowData(this.eventCounts.policyViolationEventCounts.nodePolicyViolations),this.errorRateData=this.createEventCountsRowData(this.eventCounts.policyViolationEventCounts.errorPolicyViolations),this.intoPointsData=this.createEventCountsRowData(this.eventCounts.policyViolationEventCounts.informationPointPolicyViolations),this.databasesAndRemoteServicesData=this.createEventCountsRowData(this.eventCounts.policyViolationEventCounts.backendPolicyViolations),this.customData=this.createEventCountsRowData(this.eventCounts.customEvents),this.codeProblemsData=this.createEventCountsRowData(this.eventCounts.codeProblems),this.applicationChangesData=this.createEventCountsRowData(this.eventCounts.applicationChanges),this.serverCrashesData=this.createEventCountsRowData(this.eventCounts.infrastructureEvents),this.appDynamicsConfigWarningsData=this.createEventCountsRowData(this.eventCounts.appDynamicsConfigurationWarninigs),this.eventFound=this.allHealthRuleViolationsData.visible||this.overallAppPerformanceData.visible||this.btHealthData.visible||this.nodeHealthData.visible||this.errorRateData.visible||this.intoPointsData.visible||this.databasesAndRemoteServicesData.visible||this.customData.visible||this.codeProblemsData.visible||this.applicationChangesData.visible||this.serverCrashesData.visible||this.appDynamicsConfigWarningsData.visible)},EventCountsController.prototype.createEventCountsRowData=function(performanceStateSummary){var eventCountRowData={},eventCountTotal=EventCountsController.getTotal(performanceStateSummary);return eventCountRowData.total=ViewUtil.formatNumber(eventCountTotal),eventCountRowData.visible=eventCountTotal>0,performanceStateSummary.critical>0?eventCountRowData.iconSource=ImageUtil.event_severity_critical:performanceStateSummary.warning>0?eventCountRowData.iconSource=ImageUtil.event_severity_warn:performanceStateSummary.normal>0&&(eventCountRowData.iconSource=ImageUtil.event_severity_info),eventCountRowData},EventCountsController.$inject=["$scope","$rootScope","$location","resourceManager","notificationService","injectorService"],EventCountsController}(ControllerBase);appdynamicsModule.controller("EventCountsController",EventCountsController),define("app/view/common/Events/eventCounts/EventCountsController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/Events/DeleteEventsController",["require","exports"],function(require,exports){var DeleteEventsController=function(_super){function DeleteEventsController($scope,$rootScope,$location,resourceManager,notificationService,injectorService,eventsUiService,timeRangeService,$modalInstance,dialogData){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.eventsUiService=eventsUiService,this.timeRangeService=timeRangeService,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.closeCallback=null,$scope.controller=this,this.selectedEventListItems=dialogData.selectedEventListItems?dialogData.selectedEventListItems:[],this.closeCallback=dialogData.closeCallback?dialogData.closeCallback:function(){},this.titleText=this.getString(this.selectedEventListItems.length>1?"ms_deleteEvents":"ms_deleteEvent"),this.infoText=this.getString(this.selectedEventListItems.length>1?"ms_deleteEventsConfirmationMessage":"ms_deleteEventConfirmationMessage")}return __extends(DeleteEventsController,_super),DeleteEventsController.prototype.onDeleteEvents=function(){for(var _this=this,deleteEventIds=[],deleteRsdIds=[],i=0;i<this.selectedEventListItems.length;i++){var item=this.selectedEventListItems[i];item.type==EventStreamUiItemType.EVENT?deleteEventIds.push(item.id):item.type==EventStreamUiItemType.REQUEST_SEGMENT_DATA&&deleteRsdIds.push(item.id)}var resultHandler=function(){_this.closeDialog();var notificationText=1==_this.selectedEventListItems.length?resourceManager.getString("ui","ms_deletedEventSuccessMessage"):resourceManager.getString("ui","ms_deletedEventsSuccessMessage",[_this.selectedEventListItems.length]);_this.notificationService.displayMessage(notificationText,"")},errorHandler=function(errorResponse){ADLoggerService.log("ERROR Deleting events: "+errorResponse)},selectedItemIds={eventIds:deleteEventIds,rsdIds:deleteRsdIds};this.eventsUiService.deleteEvents(selectedItemIds,this.timeRangeService.getCurrentTimeRangeString()).then(resultHandler,errorHandler)},DeleteEventsController.prototype.closeDialog=function(){this.$modalInstance.close(),this.closeCallback()},DeleteEventsController.prototype.dismissDialog=function(){this.$modalInstance.dismiss()},DeleteEventsController.$inject=["$scope","$rootScope","$location","resourceManager","notificationService","injectorService","eventsUiService","timeRangeService","$modalInstance","dialogData"],DeleteEventsController}(ControllerBase);exports.DeleteEventsController=DeleteEventsController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/Events/ArchiveEventsController",["require","exports"],function(require,exports){var ArchiveEventsController=function(_super){function ArchiveEventsController($scope,$rootScope,$location,resourceManager,notificationService,injectorService,eventsUiService,timeRangeService,$modalInstance,dialogData){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.$location=$location,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.eventsUiService=eventsUiService,this.timeRangeService=timeRangeService,this.$modalInstance=$modalInstance,this.dialogData=dialogData,this.closeCallback=null,$scope.controller=this;var eventsRetentionPeriod=this.injectorService.masterService().accountConfiguration["events.retention.period"];isNaN(eventsRetentionPeriod)&&(eventsRetentionPeriod=336),eventsRetentionPeriod/=24,this.selectedEventListItems=dialogData.selectedEventListItems?dialogData.selectedEventListItems:[],this.closeCallback=dialogData.closeCallback?dialogData.closeCallback:function(){},this.titleText=resourceManager.getString("ui","ms_archivedEventConfirm"),this.infoText=resourceManager.getString("ui","ms_archivedEventConfirmMessageHTML",[eventsRetentionPeriod])}return __extends(ArchiveEventsController,_super),ArchiveEventsController.prototype.onArchiveEvents=function(){for(var _this=this,archiveEventIds=[],archiveRsdIds=[],archiveRsdGuids=[],i=0;i<this.selectedEventListItems.length;i++){var item=this.selectedEventListItems[i];item.type==EventStreamUiItemType.EVENT?archiveEventIds.push(item.id):item.type==EventStreamUiItemType.REQUEST_SEGMENT_DATA&&(archiveRsdIds.push(item.id),archiveRsdGuids.push(item.requestGUID))}var resultHandler=function(){_this.closeDialog();var notificationText=1==_this.selectedEventListItems.length?resourceManager.getString("ui","ms_archivedEventSuccessMessage"):resourceManager.getString("ui","ms_archivedEventsSuccessMessage",[_this.selectedEventListItems.length]);_this.notificationService.displayMessage(notificationText,"")},errorHandler=function(errorResponse){ADLoggerService.log("ERROR Archiving events: "+errorResponse)},selectedItemIds={eventIds:archiveEventIds,rsdIds:archiveRsdIds,rsdGuids:archiveRsdGuids};this.eventsUiService.archiveEvents(selectedItemIds,this.timeRangeService.getCurrentTimeRangeString()).then(resultHandler,errorHandler)},ArchiveEventsController.prototype.closeDialog=function(){this.$modalInstance.close(),this.closeCallback()},ArchiveEventsController.prototype.dismissDialog=function(){this.$modalInstance.dismiss()},ArchiveEventsController.$inject=["$scope","$rootScope","$location","resourceManager","notificationService","injectorService","eventsUiService","timeRangeService","$modalInstance","dialogData"],ArchiveEventsController}(ControllerBase);exports.ArchiveEventsController=ArchiveEventsController});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/Events/eventDetails/EventDetailViewerController",["require","exports","../DeleteEventsController","../ArchiveEventsController"],function(require,exports,DeleteEventsController,ArchiveEventsController){var EventDetailViewerController=function(_super){function EventDetailViewerController($scope,$rootScope,$modalInstance,resourceManager,notificationService,injectorService,timeRangeService,eventsUiService,dialogData){_super.call(this,$scope,$modalInstance),this.$scope=$scope,this.$rootScope=$rootScope,this.$modalInstance=$modalInstance,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.timeRangeService=timeRangeService,this.eventsUiService=eventsUiService,this.dialogData=dialogData,this.eventViewerId=Util.generateId(),this.viewEventSummary=!0,this.viewActionsExecuted=!1,this.viewUserComments=!1,this.viewDetails=!1,this.hasDetails=!1,this.actionsExecutedExist=!1,this.visibleUserComments=[],this.eventAffectedEntityLinkModeEnabled=!0,this.dbMonitoringMode=!1,$scope.controller=this,this.init(),$scope.$on("CORRELATED_EVENTS_FETCHED",function(event,fetchedEvents,correlatedEventGridId){correlatedEventGridId==$scope.controller.eventViewerId&&$scope.controller.updateNumberOfActionsExecutedInTab(fetchedEvents)
}),$scope.$on("UEV_VIEW_ACTIONS_EXECUTED",function(){$scope.controller.onViewActionsExecuted()})}return __extends(EventDetailViewerController,_super),EventDetailViewerController.prototype.init=function(){var _this=this,getEventDetailsResultHandler=function(response){_this.eventDetails=_this.eventsUiService.getEventDetailsById_response(response),_this.hasDetails=_this.eventDetails.eventDetails&&_this.eventDetails.eventDetails.length>0,_this.visibleUserComments=EventUtil.filterOutArchiveComments(_this.eventDetails.userComments)},getEventSummaryResultHandler=function(response){_this.eventSummary=_this.eventsUiService.getEventSummaryById_response(response),EventUtil.isPolicyViolationEventType(_this.eventSummary.eventType)?(_this.$modalInstance.dismiss(),ViewUtil.doAfterDigest(function(){EventViewService.instance().viewIncidentDetailModal(_this.eventSummaryID)})):(_this.eventViewerTitle=EventUtil.getEventTypeDisplayString(_this.eventSummary.eventType),_this.setUrlLocation(_this.getEventDetailModalUrlLocation()))},timeString="";this.dialogData&&this.dialogData.eventStreamUiItem?(this.eventSummaryID=this.dialogData.eventStreamUiItem.id,this.dbMonitoringMode=this.dialogData.dbMonitoringMode,timeString=this.timeRangeService.convertToPreferenceString(EventUtil.getTimeRangeAroundEvent(this.dialogData.eventStreamUiItem.time))):(this.eventSummaryID=this.getCurrentUrlParams().getNumberParam(UrlConstants.EVENT_SUMMARY_ID),this.dbMonitoringMode="true"==this.getCurrentUrlParams().getParam(UrlConstants.EVENT_MODAL_DB_MODE),timeString=this.getCurrentUrlParams().getParam(UrlConstants.TIME_RANGE)),this.eventsUiService.getEventSummaryById(this.eventSummaryID,timeString).then(getEventSummaryResultHandler),this.eventsUiService.getEventDetailsById(this.eventSummaryID,timeString).then(getEventDetailsResultHandler)},EventDetailViewerController.prototype.closeDialog=function(){this.$modalInstance.dismiss()},EventDetailViewerController.prototype.onViewEventSummary=function(){this.resetViewFlags(),this.viewEventSummary=!0},EventDetailViewerController.prototype.onViewDetails=function(){this.resetViewFlags(),this.viewDetails=!0},EventDetailViewerController.prototype.onViewActionsExecuted=function(){this.resetViewFlags(),this.viewActionsExecuted=!0,this.$rootScope.$broadcast("REFRESH_CORRELATED_EVENTS_GRID")},EventDetailViewerController.prototype.onViewUserComments=function(){this.resetViewFlags(),this.viewUserComments=!0},EventDetailViewerController.prototype.handleStartWarRoom=function(){var _this=this,eventTypeDisplayString=EventUtil.getEventTypeDisplayString(this.eventSummary.eventType),cdUIState={height:0,width:0,canvasType:CustomDashBoardCanvasType.CANVAS_TYPE_GRID,backgroundColor:DashboardHelper.DASHBOARD_BG_COLOR,refreshInterval:2*DateTimeUtil.MILLISEC_PER_SEC,minutesBeforeAnchorTime:0};cdUIState.isWarRoom=!0;var dashboard={name:"Event-"+eventTypeDisplayString+"-"+this.eventSummary.id,dashboardUIState:cdUIState},warRoomSession={};warRoomSession.customDashboard=dashboard,warRoomSession.applicationId=this.getApplicationIdFromUrl(),warRoomSession.warRoomKey=Util.generateId(),WarRoomUiService.instance().createWarRoom(warRoomSession).then(function(data){var warRoom=WarRoomUiService.instance().createWarRoom_response(data);WarRoomViewService.instance().viewWarRoom(_this.getApplicationIdFromUrl(),warRoom.warRoomKey,!0)})},EventDetailViewerController.prototype.handleCopyDeepLink=function(){var deepLinkUrl=this.getDeepLinkToEventDetailsModal();window.clipboardData?window.clipboardData.setData("text",deepLinkUrl):WebUtil.copyToClipboard(deepLinkUrl)},EventDetailViewerController.prototype.getEventDetailModalUrlLocation=function(){var params=new URLParams,timeString=this.timeRangeService.convertToPreferenceString(EventUtil.getTimeRangeAroundEvent(this.eventSummary.eventTime.getTime())),dbMonitoringMode=this.dbMonitoringMode?"true":"false";return params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_EVENT_VIEWER_MODAL),params.setNumberParam(UrlConstants.APPLICATION_ID,this.getApplicationIdFromUrl()),params.setNumberParam(UrlConstants.EVENT_SUMMARY_ID,this.eventSummary.id),params.setParam(UrlConstants.TIME_RANGE,timeString),params.setParam(UrlConstants.EVENT_MODAL_DB_MODE,dbMonitoringMode),params},EventDetailViewerController.prototype.getDeepLinkToEventDetailsModal=function(){var params=this.getEventDetailModalUrlLocation();return WebUtil.getCurrentURLIncludingController()+"/#"+params.toString()},EventDetailViewerController.prototype.handleCopyEventDetailsToClipboard=function(){if(this.eventDetails&&this.eventDetails.eventDetails){var exportableString=EventUtil.getExportableStringFromEventDetailProperties(this.eventDetails.eventDetails);window.clipboardData?window.clipboardData.setData("text",exportableString):WebUtil.copyToClipboard(exportableString)}},EventDetailViewerController.prototype.handleDeleteEvent=function(){var _this=this,item={id:this.eventSummary.id,type:EventStreamUiItemType.EVENT};this.openedFromDeepLink||(item.itemId=this.dialogData.eventStreamUiItem.itemId),DialogService.instance().showDialog(DeleteEventsController.DeleteEventsController,"app/view/common/Events/DeleteEventsController","app/view/common/Events/DeleteEvents.html",{selectedEventListItems:[item],closeCallback:function(){_this.closeDialog(),EventBusService.instance().dispatchEvent(EventViewService.UEV_DELETE_EVENTS,[item])}})},EventDetailViewerController.prototype.handleArchiveEvent=function(){if(this.eventSummary.archived)return void NotificationService.instance().displayMessage(this.getString("ms_alreadyArchived",["This event is"]),"");var item={id:this.eventSummary.id,type:EventStreamUiItemType.EVENT};this.openedFromDeepLink||(item.itemId=this.dialogData.eventStreamUiItem.itemId),DialogService.instance().showDialog(ArchiveEventsController.ArchiveEventsController,"app/view/common/Events/ArchiveEventsController","app/view/common/Events/ArchiveEvents.html",{selectedEventListItems:[item],closeCallback:function(){EventBusService.instance().dispatchEvent(EventViewService.UEV_ARCHIVE_EVENTS,[item])}})},EventDetailViewerController.prototype.handleSimulateEvent=function(){var item={id:this.eventSummary.id,type:EventStreamUiItemType.EVENT};EventViewService.instance().simulateEvent(item)},EventDetailViewerController.prototype.resetViewFlags=function(){this.viewEventSummary=!1,this.viewDetails=!1,this.viewActionsExecuted=!1,this.viewUserComments=!1},EventDetailViewerController.prototype.updateNumberOfActionsExecutedInTab=function(fetchedCorrelatedEvents){this.fetchedCorrelatedEvents=fetchedCorrelatedEvents,this.actionsExecutedExist=this.fetchedCorrelatedEvents&&this.fetchedCorrelatedEvents.length>0},EventDetailViewerController.$inject=["$scope","$rootScope","$modalInstance","resourceManager","notificationService","injectorService","timeRangeService","eventsUiService","dialogData"],EventDetailViewerController}(DialogControllerBase);exports.EventDetailViewerController=EventDetailViewerController});var EventCommentsViewDirective=function(){function EventCommentsViewDirective(){return{restrict:"E",transclude:!1,templateUrl:"app/view/common/Events/eventDetails/EventCommentsView.html",scope:{eventId:"=adsEventId",eventComments:"=adsEventComments"},controller:"EventCommentsViewController"}}return EventCommentsViewDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-event-comments-view"),EventCommentsViewDirective),define("app/view/common/Events/eventDetails/EventCommentsViewDirective",function(){});var EventCommentsViewController=function(){function EventCommentsViewController($scope,$rootScope,resourceManager,eventsUiService){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.resourceManager=resourceManager,this.eventsUiService=eventsUiService,$scope.controller=this,$scope.$watch("eventId",function(){_this.eventSummaryID=$scope.eventId}),$scope.$watch("eventComments",function(){_this.eventComments=$scope.eventComments})}return EventCommentsViewController.prototype.publishUserComment=function(){this.addUserComment(this.commentInEditArea?this.commentInEditArea.comment:null)},EventCommentsViewController.prototype.addUserComment=function(userCommentText){var _this=this;this.$rootScope.$broadcast("validateForm");var formValid=this.userCommentForm.$valid;formValid&&this.eventsUiService.addUserCommentForEvent(this.eventSummaryID,userCommentText).then(function(result){var createdComment=_this.eventsUiService.addUserCommentForEvent_response(result);createdComment&&(_this.eventComments.push(createdComment),_this.commentInEditArea.comment="")})},EventCommentsViewController.$inject=["$scope","$rootScope","resourceManager","eventsUiService"],EventCommentsViewController}();appdynamicsModule.controller("EventCommentsViewController",EventCommentsViewController),define("app/view/common/Events/eventDetails/EventCommentsViewController",function(){});var EventDetailSummaryViewDirective=function(){function EventDetailSummaryViewDirective(){return{restrict:"E",transclude:!1,templateUrl:"app/view/common/Events/eventDetails/EventDetailSummaryView.html",scope:{eventSummary:"=adsEventSummary",eventDetails:"=adsEventDetails",dbMonitoringMode:"=adsDbMonitoringMode"},controller:"EventDetailSummaryViewController"}}return EventDetailSummaryViewDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-event-detail-summary-view"),EventDetailSummaryViewDirective),define("app/view/common/Events/eventDetails/EventDetailSummaryViewDirective",function(){}),define("app/view/common/Events/CorrelatedEventsProcessor",["require","exports"],function(require,exports){var ActionExecutionGroupType=function(){function ActionExecutionGroupType(){}return ActionExecutionGroupType.EMAIL="EMAIL",ActionExecutionGroupType.SMS="SMS",ActionExecutionGroupType.HTTP_REQUEST="HTTP_REQUEST",ActionExecutionGroupType.CUSTOM_EMAIL="CUSTOM_EMAIL",ActionExecutionGroupType.DIAGNOSTIC_SESSION="DIAGNOSTIC_SESSION",ActionExecutionGroupType.THREAD="THREAD",ActionExecutionGroupType.SCRIPT="SCRIPT",ActionExecutionGroupType.CUSTOM="CUSTOM",ActionExecutionGroupType.SCALE="SCALE",ActionExecutionGroupType}();exports.ActionExecutionGroupType=ActionExecutionGroupType;var CorrelatedEventsProcessor=function(){function CorrelatedEventsProcessor(){this.mostRelevantEvents=[],this.actionExecutionGuids=[],this.actionExecutionMap={},this.actionExecutionGroups=[],this.actionExecutionMapByActionGroupType={},this.eventCountsByActionGroupType={},this.mostRelevantEventCountsByActionGroupType={}}return CorrelatedEventsProcessor.prototype.processAllCorrelatedEvents=function(items){this.allEvents=items,this.setupRelevantEvents(this.allEvents)},CorrelatedEventsProcessor.prototype.setupRelevantEvents=function(items){for(var i=0;i<items.length;i++)this.processEvent(items[i]);for(var i=0;i<this.actionExecutionGuids.length;i++){var eventsForThisGuid=this.actionExecutionMap[this.actionExecutionGuids[i]];if(eventsForThisGuid){var mostRelevantEvent=this.getMostRelevantEventFromEventList(eventsForThisGuid);mostRelevantEvent&&this.mostRelevantEvents.push(mostRelevantEvent)}}for(var i=0;i<this.mostRelevantEvents.length;i++){var actionExecutionGroup=this.getActionExecutionGroupFromEventType(this.mostRelevantEvents[i].eventType);this.actionExecutionMapByActionGroupType[actionExecutionGroup].push(this.mostRelevantEvents[i])}for(var i=0;i<this.actionExecutionGroups.length;i++){var actionExecutionGroup=this.actionExecutionGroups[i];this.mostRelevantEventCountsByActionGroupType[actionExecutionGroup]=this.actionExecutionMapByActionGroupType[actionExecutionGroup]?this.actionExecutionMapByActionGroupType[actionExecutionGroup].length:0}},CorrelatedEventsProcessor.prototype.getActionExecutionGroupFromEventType=function(eventType){var actionExecutionGroup="";switch(eventType){case EventType.EMAIL_SENT:actionExecutionGroup=ActionExecutionGroupType.EMAIL;break;case EventType.SMS_SENT:actionExecutionGroup=ActionExecutionGroupType.SMS;break;case EventType.HTTP_REQUEST_ACTION_STARTED:case EventType.HTTP_REQUEST_ACTION_END:case EventType.HTTP_REQUEST_ACTION_FAILED:actionExecutionGroup=ActionExecutionGroupType.HTTP_REQUEST;break;case EventType.CUSTOM_EMAIL_ACTION_STARTED:case EventType.CUSTOM_EMAIL_ACTION_END:case EventType.CUSTOM_EMAIL_ACTION_FAILED:actionExecutionGroup=ActionExecutionGroupType.CUSTOM_EMAIL;break;case EventType.DIAGNOSTIC_SESSION:actionExecutionGroup=ActionExecutionGroupType.DIAGNOSTIC_SESSION;break;case EventType.THREAD_DUMP_ACTION_STARTED:case EventType.THREAD_DUMP_ACTION_FAILED:case EventType.THREAD_DUMP_ACTION_END:actionExecutionGroup=ActionExecutionGroupType.THREAD;break;case EventType.RUN_LOCAL_SCRIPT_ACTION_STARTED:case EventType.RUN_LOCAL_SCRIPT_ACTION_FAILED:case EventType.RUN_LOCAL_SCRIPT_ACTION_END:actionExecutionGroup=ActionExecutionGroupType.SCRIPT;break;case EventType.CUSTOM_ACTION_STARTED:case EventType.CUSTOM_ACTION_FAILED:case EventType.CUSTOM_ACTION_END:actionExecutionGroup=ActionExecutionGroupType.CUSTOM;break;case EventType.WORKFLOW_ACTION_STARTED:case EventType.WORKFLOW_ACTION_FAILED:case EventType.WORKFLOW_ACTION_END:actionExecutionGroup=ActionExecutionGroupType.SCALE}return actionExecutionGroup},CorrelatedEventsProcessor.prototype.processEvent=function(event){var actionGuid=event.actionExecutionGuid;if(actionGuid){var eventsForGuid=this.actionExecutionMap[actionGuid];eventsForGuid?eventsForGuid.push(event):(this.actionExecutionGuids.push(actionGuid),this.actionExecutionMap[actionGuid]=[event])}var group=this.getActionExecutionGroupFromEventType(event.eventType);group.length>0&&(this.actionExecutionMapByActionGroupType[group]?this.eventCountsByActionGroupType[group]=this.eventCountsByActionGroupType[group]+1:(this.actionExecutionGroups.push(group),this.eventCountsByActionGroupType[group]=1,this.actionExecutionMapByActionGroupType[group]=[]))},CorrelatedEventsProcessor.prototype.getRelevantEventScore=function(event){return event?event.eventType==EventType.CUSTOM_ACTION_STARTED?1:event.eventType==EventType.CUSTOM_ACTION_FAILED?2:event.eventType==EventType.CUSTOM_ACTION_END?3:event.eventType==EventType.RUN_LOCAL_SCRIPT_ACTION_STARTED?4:event.eventType==EventType.RUN_LOCAL_SCRIPT_ACTION_FAILED?5:event.eventType==EventType.RUN_LOCAL_SCRIPT_ACTION_END?6:event.eventType==EventType.RUNBOOK_DIAGNOSTIC_SESSION_STARTED?7:event.eventType==EventType.RUNBOOK_DIAGNOSTIC_SESSION_FAILED?8:event.eventType==EventType.RUNBOOK_DIAGNOSTIC_SESSION_END?9:event.eventType==EventType.DIAGNOSTIC_SESSION?10:event.eventType==EventType.THREAD_DUMP_ACTION_STARTED?11:event.eventType==EventType.THREAD_DUMP_ACTION_FAILED?12:event.eventType==EventType.THREAD_DUMP_ACTION_END?13:event.eventType==EventType.WORKFLOW_ACTION_STARTED?14:event.eventType==EventType.WORKFLOW_ACTION_FAILED?15:event.eventType==EventType.WORKFLOW_ACTION_END?16:event.eventType==EventType.EMAIL_SENT?17:event.eventType==EventType.SMS_SENT?18:event.eventType==EventType.HTTP_REQUEST_ACTION_STARTED?19:event.eventType==EventType.HTTP_REQUEST_ACTION_FAILED?20:event.eventType==EventType.HTTP_REQUEST_ACTION_END?21:event.eventType==EventType.CUSTOM_EMAIL_ACTION_STARTED?22:event.eventType==EventType.CUSTOM_EMAIL_ACTION_FAILED?23:event.eventType==EventType.CUSTOM_EMAIL_ACTION_END?24:-1:-1},CorrelatedEventsProcessor.prototype.getMostRelevantEventFromEventList=function(events){for(var mostRelaventEvent,maxScore=-100,i=0;i<events.length;i++){var score=this.getRelevantEventScore(events[i]);score>maxScore&&(maxScore=score,mostRelaventEvent=events[i])}return mostRelaventEvent},CorrelatedEventsProcessor}();exports.CorrelatedEventsProcessor=CorrelatedEventsProcessor});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/Events/eventDetails/EventDetailSummaryViewController",["require","exports","../CorrelatedEventsProcessor"],function(require,exports,CorrelatedEvents){var EventDetailSummaryViewController=function(_super){function EventDetailSummaryViewController($scope,$rootScope,resourceManager,notificationService,sharedInjectorService,eventsUiService,warRoomUiService,timeRangeService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.$rootScope=$rootScope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.eventsUiService=eventsUiService,this.warRoomUiService=warRoomUiService,this.timeRangeService=timeRangeService,this.dbMonitoringMode=!1,this.isSIMMode=!1,this.eventAffectedEntityLinkModeEnabled=!0,this.showLogs=!1,this.isCompletedThreadDump=!1,this.isCompletedLocalScript=!1,this.fileCorrelationKeys=[],this.isSyntheticEvent=!1,this.bt=[],this.components=[],this.nodes=[],this.ms_noActionsExecuted=this.getString("ms_noActionsExecutedLabel"),this.correlatedEventCounts={},this.actionExecutionGroups=[],this.correlatedEventsFetched=[],$scope.controller=this;var appId=URLParams.getCurrentUrlParams().applicationId();ApplicationsCache.instance().getAllApplications().then(function(){var appType=ApplicationsCache.instance().getApplicationTypeById(appId);_this.isSIMMode=3==appType,_this.dbMonitoringMode=_this.isSIMMode?!1:_this.dbMonitoringMode}),$scope.$watch("eventSummary",function(){_.isUndefined($scope.eventSummary)||(_this.eventSummary=$scope.eventSummary,_this.setupEventDetailSummaryTable(),_this.setupActionsExecutedSummary(),_.isUndefined(_this.eventSummary.affectedEntities)||_this.setupAffectedEntities())}),$scope.$watch("eventDetails",function(){_.isUndefined($scope.eventDetails)||(_this.eventDetails=$scope.eventDetails,_this.scriptOutputHeader=_this.getScriptOutputHeaderFromEventDetails())}),$scope.$watch("dbMonitoringMode",function(){_this.dbMonitoringMode=$scope.dbMonitoringMode})}return __extends(EventDetailSummaryViewController,_super),EventDetailSummaryViewController.prototype.setupEventDetailSummaryTable=function(){this.severityIconSource=ImageUtil.getSeverityIconForEventSeverity(this.eventSummary.severity),this.severityDisplayString=EventUtil.getEventSeverityDisplayString(this.eventSummary.severity),this.eventTypeDisplayString=EventUtil.getEventTypeDisplayString(this.eventSummary.eventType),this.eventTimeDisplayString=DateTimeUtil.getDateTimeString(this.eventSummary.eventTime),this.isCompletedThreadDump=EventUtil.isEventAction_DownloadThreadDump(this.eventSummary.eventType),this.isCompletedLocalScript=EventUtil.isEventAction_DownloadLocalScript(this.eventSummary.eventType),this.isSyntheticEvent=this.eventSummary&&this.eventSummary.eventType&&StringUtils.startsWith(this.eventSummary.eventType,EventUtil.SYNTH_EVENT_TYPE_PREFIX),this.setupLogDownloadLinks()},EventDetailSummaryViewController.prototype.retrieveEventProperty=function(propertyName){var propertyValue="";if(this.eventDetails&&this.eventDetails.eventProperties)for(var i=0;i<this.eventDetails.eventProperties.length;i++)if(this.eventDetails.eventProperties[i].name==propertyName){propertyValue=this.eventDetails.eventProperties[i].stringValue;break}return propertyValue},EventDetailSummaryViewController.prototype.retrieveApplicationId=function(){var applicationId=-1;if(this.eventSummary&&this.eventSummary.affectedEntities)for(var i=0;i<this.eventSummary.affectedEntities.length;i++)if(this.eventSummary.affectedEntities[i].entityType==EntityType.APPLICATION){applicationId=this.eventSummary.affectedEntities[i].entityId;break}return applicationId},EventDetailSummaryViewController.prototype.openSynthSessionDetails=function(){var measurementId=this.retrieveEventProperty(EventDetailSummaryViewController.EVENT_SYNTH_MEASUREMENT_ID),applicationId=this.retrieveApplicationId();EumViewService.instance().viewRelatedSyntheticSessionDetails(measurementId,applicationId)},EventDetailSummaryViewController.prototype.openRelatedSynthSessions=function(){var scheduleId=this.retrieveEventProperty(EventDetailSummaryViewController.EVENT_SYNTH_SCHEDULE_ID),applicationId=this.retrieveApplicationId(),timeRangeSpecifier=EventUtil.getTimeRangeAroundTimestamp(this.eventSummary.eventTime.getTime(),60),filters={},jobFilter={name:AnalyticsField.scheduleId,type:ParameterTypes.TEXT,value:scheduleId};filters[jobFilter.name]=jobFilter,EumViewService.instance().viewSyntheticAnalyzeForTimerange(applicationId,timeRangeSpecifier,filters)},EventDetailSummaryViewController.prototype.setupLogDownloadLinks=function(){if(this.eventSummary.correlationKeys){for(var i=0;i<this.eventSummary.correlationKeys.length;i++){var cKey=this.eventSummary.correlationKeys[i];cKey.correlationType==EventCorrelationType.FILE_DOWNLOAD_URL&&this.fileCorrelationKeys.push(cKey)}this.showLogs=this.fileCorrelationKeys.length>0,this.showLogs&&(this.logsLabel=this.eventSummary.eventType==EventType.APPLICATION_CRASH?this.resourceManager.getString("ui","ms_eventDetailsCrashLogsLabelText"):this.resourceManager.getString("ui","ms_eventDetailsLogsLabelText"))}},EventDetailSummaryViewController.prototype.handleFileLinkClick=function(event,url){url&&url.length>0&&WebUtil.loadFileDownloadURL(url)},EventDetailSummaryViewController.prototype.handleDownloadOperationResults=function(){if(this.isCompletedThreadDump||this.isCompletedLocalScript){var operationId=EventUtil.getOperationIdFromEventSummary(this.eventSummary);if(Util.isValidId(operationId))this.downloadEventOperationResult(this.eventSummary,operationId);else if(this.eventDetails&&this.eventDetails.eventDetails){for(var i=0;i<this.eventDetails.eventDetails.length;i++)this.eventDetails.eventDetails[i].name==EventDetailSummaryViewController.OPERATION_ID&&(operationId=parseInt(this.eventDetails.eventDetails[i].value));Util.isValidId(operationId)?this.downloadEventOperationResult(this.eventSummary,operationId):NotificationService.instance().displayError(this.getString("ms_noEventOperationIdError"),"")}else NotificationService.instance().displayError(this.getString("ms_noEventOperationIdError"),"")}},EventDetailSummaryViewController.prototype.downloadEventOperationResult=function(summary,operationId){if(summary){if(!Util.isValidId(operationId))return void NotificationService.instance().displayError(this.getString("ms_noEventOperationIdError"),"");var url=EventDetailSummaryViewController.OPERATION_FILE_DOWNLOAD_PATH+"&"+EventDetailSummaryViewController.OPERATION_ID+"="+operationId;WebUtil.loadFileDownloadURL(url)}},EventDetailSummaryViewController.prototype.getScriptOutputHeaderFromEventDetails=function(){for(var i=0;i<this.eventDetails.eventDetails.length;i++)if("script-output-header"==this.eventDetails.eventDetails[i].name)return this.eventDetails.eventDetails[i].value;return""},EventDetailSummaryViewController.prototype.setupAffectedEntities=function(){var _this=this,bt=[],components=[],nodes=[];this.entityMap=EntityService.instance().fetchEntities(this.eventSummary.affectedEntities,function(){for(var i=0;i<_this.eventSummary.affectedEntities.length;i++){var eDef=_this.eventSummary.affectedEntities[i],entity=_this.entityMap.getEntity(eDef);switch(eDef.entityType){case EntityType.BUSINESS_TRANSACTION:0==bt.length&&bt.push({entity:entity,entityType:EntityType.BUSINESS_TRANSACTION});break;case EntityType.APPLICATION_COMPONENT:components.push({entity:entity,entityType:EntityType.APPLICATION_COMPONENT});break;case EntityType.APPLICATION_COMPONENT_NODE:nodes.push({entity:entity,entityType:EntityType.APPLICATION_COMPONENT_NODE})}}_this.bt=bt,_this.components=components,_this.nodes=nodes}),this.nodes.length>EventDetailSummaryViewController.MAX_AFFECTED_NODES_TO_DISPLAY&&(this.showXofYnodesLabel="(Showing "+EventDetailSummaryViewController.MAX_AFFECTED_NODES_TO_DISPLAY+" of "+this.nodes.length+" nodes)")},EventDetailSummaryViewController.prototype.setupActionsExecutedSummary=function(){var _this=this;if(this.eventSummary){var resultHandler=function(response){var correlatedEvents=_this.eventsUiService.getCorrelatedEventsForEvent_response(response),processor=new CorrelatedEvents.CorrelatedEventsProcessor;processor.processAllCorrelatedEvents(correlatedEvents),_this.correlatedEventsFetched=processor.mostRelevantEvents,_this.correlatedEventCounts=processor.mostRelevantEventCountsByActionGroupType,_this.actionExecutionGroups=Object.keys(_this.correlatedEventCounts)},timeString=this.timeRangeService.convertToPreferenceString(EventUtil.getTimeRangeAroundEvent(this.eventSummary.eventTime.getTime()));this.eventsUiService.getCorrelatedEventsForEvent(this.eventSummary.id,timeString).then(resultHandler)}},EventDetailSummaryViewController.prototype.onViewActionsExecuted=function(){this.$rootScope.$broadcast("UEV_VIEW_ACTIONS_EXECUTED")},EventDetailSummaryViewController.prototype.getActionExecutionGroupIcon=function(actionExecutionGroup){var imageSource="";switch(actionExecutionGroup){case CorrelatedEvents.ActionExecutionGroupType.EMAIL:imageSource=ImageUtil.action_email;break;case CorrelatedEvents.ActionExecutionGroupType.SMS:imageSource=ImageUtil.action_sms;break;case CorrelatedEvents.ActionExecutionGroupType.HTTP_REQUEST:imageSource=ImageUtil.action_http;break;case CorrelatedEvents.ActionExecutionGroupType.CUSTOM_EMAIL:imageSource=ImageUtil.action_custom_email;break;case CorrelatedEvents.ActionExecutionGroupType.DIAGNOSTIC_SESSION:imageSource=ImageUtil.action_diagnostic_session;break;case CorrelatedEvents.ActionExecutionGroupType.THREAD:imageSource=ImageUtil.action_thread;break;case CorrelatedEvents.ActionExecutionGroupType.SCRIPT:imageSource=ImageUtil.action_script;break;case CorrelatedEvents.ActionExecutionGroupType.CUSTOM:imageSource=ImageUtil.action_custom;break;case CorrelatedEvents.ActionExecutionGroupType.SCALE:imageSource=ImageUtil.action_scale}return imageSource},EventDetailSummaryViewController.prototype.getActionExecutionGroupLabel=function(actionExecutionGroup){var groupLabel="";switch(actionExecutionGroup){case CorrelatedEvents.ActionExecutionGroupType.EMAIL:groupLabel=this.correlatedEventCounts[actionExecutionGroup]+" "+this.getString(1==this.correlatedEventCounts[actionExecutionGroup]?"ms_eventActionEmailSent":"ms_eventActionEmailsSent");break;case CorrelatedEvents.ActionExecutionGroupType.SMS:groupLabel=this.correlatedEventCounts[actionExecutionGroup]+" "+this.getString(1==this.correlatedEventCounts[actionExecutionGroup]?"ms_eventActionSMSmessageSent":"ms_eventActionSMSmessagesSent ");break;case CorrelatedEvents.ActionExecutionGroupType.HTTP_REQUEST:groupLabel=this.correlatedEventCounts[actionExecutionGroup]+" "+this.getString(1==this.correlatedEventCounts[actionExecutionGroup]?"ms_eventActionHttpRequest":"ms_eventActionHttpRequests");break;case CorrelatedEvents.ActionExecutionGroupType.CUSTOM_EMAIL:groupLabel=this.correlatedEventCounts[actionExecutionGroup]+" "+this.getString(1==this.correlatedEventCounts[actionExecutionGroup]?"ms_eventActionCustomEmail":"ms_eventActionCustomEmails");break;case CorrelatedEvents.ActionExecutionGroupType.DIAGNOSTIC_SESSION:groupLabel=this.correlatedEventCounts[actionExecutionGroup]+" "+this.getString(1==this.correlatedEventCounts[actionExecutionGroup]?"ms_eventActionDiagnosticSession":"ms_eventActionDiagnosticSessions");break;case CorrelatedEvents.ActionExecutionGroupType.THREAD:groupLabel=this.correlatedEventCounts[actionExecutionGroup]+" "+this.getString(1==this.correlatedEventCounts[actionExecutionGroup]?"ms_eventActionThreadDump":"ms_eventActionThreadDumps");break;case CorrelatedEvents.ActionExecutionGroupType.SCRIPT:groupLabel=this.correlatedEventCounts[actionExecutionGroup]+" "+this.getString(1==this.correlatedEventCounts[actionExecutionGroup]?"ms_eventActionScript":"ms_eventActionScripts");break;case CorrelatedEvents.ActionExecutionGroupType.CUSTOM:groupLabel=this.correlatedEventCounts[actionExecutionGroup]+" "+this.getString(1==this.correlatedEventCounts[actionExecutionGroup]?"ms_eventActionCustomAction":"ms_eventActionCustomActions");break;case CorrelatedEvents.ActionExecutionGroupType.SCALE:groupLabel=this.correlatedEventCounts[actionExecutionGroup]+" "+this.getString(1==this.correlatedEventCounts[actionExecutionGroup]?"ms_eventActionScaleWorkflow":"ms_eventActionScaleWorkflows")}return groupLabel},EventDetailSummaryViewController.MAX_AFFECTED_NODES_TO_DISPLAY=100,EventDetailSummaryViewController.EVENT_SYNTH_SCHEDULE_ID="event.scheduleId",EventDetailSummaryViewController.EVENT_SYNTH_MEASUREMENT_ID="event.measurementId",EventDetailSummaryViewController.OPERATION_ID="operation-id",EventDetailSummaryViewController.OPERATION_FILE_DOWNLOAD_PATH="/controller/FileUploadServlet?action=APP_AGENT_OPERATION",EventDetailSummaryViewController.$inject=["$scope","$rootScope","resourceManager","notificationService","sharedInjectorService","eventsUiService","warRoomUiService","timeRangeService"],EventDetailSummaryViewController}(ControllerBase);exports.EventDetailSummaryViewController=EventDetailSummaryViewController,appdynamicsModule.controller("EventDetailSummaryViewController",EventDetailSummaryViewController)});var CorrelatedEventsDataGridDirective=function(){function CorrelatedEventsDataGridDirective(){return{restrict:"E",transclude:!1,templateUrl:"app/view/common/Events/eventDetails/CorrelatedEventsDataGridView.html",scope:{triggerEventSummary:"=adsTriggerEventSummary",dbMonitoringMode:"=adsDbMonitoringMode",gridId:"=adsGridId",correlatedEvents:"=adCorrelatedEvents"},controller:"CorrelatedEventsDataGridController"}}return CorrelatedEventsDataGridDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-correlated-events-grid"),CorrelatedEventsDataGridDirective),define("app/view/common/Events/eventDetails/CorrelatedEventsDataGridDirective",function(){}),define("app/utils/QueuedBatcher",["require","exports"],function(){var QueuedBatcher=function(){function QueuedBatcher(batchCall,batchSize,timeoutMs,hashFn){void 0===batchSize&&(batchSize=QueuedBatcher.DEFAULT_BATCH_SIZE),void 0===timeoutMs&&(timeoutMs=QueuedBatcher.DEFAULT_TIMEOUT_MS),this.batchCall=batchCall,this.batchSize=batchSize,this.timeoutMs=timeoutMs,this.hashFn=hashFn,this.injector=SharedInjectorService.instance(),this.pendingInput=[],this.deferredOutput=[],this.promiseIndexMap={},this.waitingForInput=!1,this.timeoutPromise=null}return QueuedBatcher.prototype.addRequest=function(item,unique){void 0===unique&&(unique=!0);var itemKey=this.getKey(item);if(unique&&itemKey&&Util.isDefAndNotNull(this.promiseIndexMap[itemKey]))return this.resetTimer(),this.deferredOutput[this.promiseIndexMap[itemKey]].promise;var deferred=this.injector.$q().defer();return this.pendingInput.push(item),this.promiseIndexMap[itemKey]=this.deferredOutput.push(deferred)-1,this.resetTimer(),deferred.promise},QueuedBatcher.prototype.getKey=function(item){return"string"==typeof item||"number"==typeof item?item.toString():this.hashFn?this.hashFn(item):null},QueuedBatcher.prototype.resetTimer=function(){this.waitingForInput?(this.injector.$timeout().cancel(this.timeoutPromise),this.pendingInput.length<this.batchSize?this.timeoutPromise=this.injector.$timeout()(this.executeBatch.bind(this),this.timeoutMs):this.executeBatch()):(this.waitingForInput=!0,this.timeoutPromise=this.injector.$timeout()(this.executeBatch.bind(this),this.timeoutMs))},QueuedBatcher.prototype.executeBatch=function(){var _this=this,pendingInputToUse=this.pendingInput,deferredOutputToUse=this.deferredOutput;this.pendingInput=[],this.deferredOutput=[],this.promiseIndexMap={},this.waitingForInput=!1,this.batchCall(pendingInputToUse).then(function(results){_this.resolveAll(deferredOutputToUse,results)},function(){_this.rejectAll(deferredOutputToUse)})},QueuedBatcher.prototype.resolveAll=function(deferredArray,results){if(results.length!==deferredArray.length)return void this.rejectAll(deferredArray,QueuedBatcher.ERROR_RESULT_MISMATCH);for(var index=0;index<deferredArray.length;index++)deferredArray[index].resolve(results[index])},QueuedBatcher.prototype.rejectAll=function(deferredArray,error){for(var index=0;index<deferredArray.length;index++)deferredArray[index].reject(error)},QueuedBatcher.DEFAULT_BATCH_SIZE=30,QueuedBatcher.DEFAULT_TIMEOUT_MS=50,QueuedBatcher.ERROR_RESULT_MISMATCH="ERROR_RESULT_MISMATCH",QueuedBatcher
}();return QueuedBatcher});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/Events/ActionButtonsRenderer",["require","exports","./CorrelatedEventsProcessor"],function(require,exports,CorrelatedEvents){var ActionButtonsRenderer=function(_super){function ActionButtonsRenderer(triggerEvent,triggerRSD){_super.call(this),this.triggerEvent=triggerEvent,this.triggerRSD=triggerRSD}return __extends(ActionButtonsRenderer,_super),ActionButtonsRenderer.prototype.renderActionButtons=function(correlatedEvents){this.processAllCorrelatedEvents(correlatedEvents);for(var s="",actionGroupTypes=Object.keys(this.actionExecutionMapByActionGroupType),i=0;i<actionGroupTypes.length;i++){var group=actionGroupTypes[i];s+=this.generateActionButton(this.actionExecutionMapByActionGroupType[group][0])}return s},ActionButtonsRenderer.prototype.generateActionButton=function(item){if(!item)return"";var handler,eventType=item.eventType,actionExecutionGroup=this.getActionExecutionGroupFromEventType(eventType),button="<img class='ads-event-grid-cell-action-button",halfVisible=!1,imageSource=ImageUtil.generalObject,tooltip="Actions Executed";switch(this.triggerEvent?handler="controller.viewActionsExecuted('"+item.eventType+"', "+this.triggerEvent.id+", "+this.triggerEvent.time+", false)":this.triggerRSD&&(handler="controller.viewActionsExecuted('"+item.eventType+"', "+this.triggerRSD.id+", "+this.triggerRSD.time+", true)"),actionExecutionGroup){case CorrelatedEvents.ActionExecutionGroupType.EMAIL:imageSource=ImageUtil.action_email,tooltip=resourceManager.getString("ui","ms_eventActionEmailTooltipText",[this.eventCountsByActionGroupType[CorrelatedEvents.ActionExecutionGroupType.EMAIL]]);break;case CorrelatedEvents.ActionExecutionGroupType.SMS:imageSource=ImageUtil.action_sms,tooltip=resourceManager.getString("ui","ms_eventActionSMSTooltipText",[this.eventCountsByActionGroupType[CorrelatedEvents.ActionExecutionGroupType.SMS]]);break;case CorrelatedEvents.ActionExecutionGroupType.HTTP_REQUEST:imageSource=ImageUtil.action_http,eventType==EventType.HTTP_REQUEST_ACTION_END?tooltip=resourceManager.getString("ui","ms_eventActionHttpRequestSuccessTooltipText"):eventType==EventType.HTTP_REQUEST_ACTION_STARTED?(tooltip=resourceManager.getString("ui","ms_eventActionHttpRequestInProgressTooltipText"),halfVisible=!0):eventType==EventType.HTTP_REQUEST_ACTION_FAILED&&(tooltip=resourceManager.getString("ui","ms_eventActionHttpRequestFailureTooltipText"),halfVisible=!0);break;case CorrelatedEvents.ActionExecutionGroupType.CUSTOM_EMAIL:imageSource=ImageUtil.action_custom_email,eventType==EventType.CUSTOM_EMAIL_ACTION_END?tooltip=resourceManager.getString("ui","ms_eventActionCustomEmailSuccessTooltipText"):eventType==EventType.CUSTOM_EMAIL_ACTION_STARTED?(tooltip=resourceManager.getString("ui","ms_eventActionCustomEmailInProgressTooltipText"),halfVisible=!0):eventType==EventType.CUSTOM_EMAIL_ACTION_FAILED&&(tooltip=resourceManager.getString("ui","ms_eventActionCustomEmailFailureTooltipText"),halfVisible=!0);break;case CorrelatedEvents.ActionExecutionGroupType.DIAGNOSTIC_SESSION:imageSource=ImageUtil.action_diagnostic_session,tooltip=resourceManager.getString("ui","ms_eventActionDiagnosticSessionsTooltipText",[this.eventCountsByActionGroupType[CorrelatedEvents.ActionExecutionGroupType.DIAGNOSTIC_SESSION]]);break;case CorrelatedEvents.ActionExecutionGroupType.THREAD:imageSource=ImageUtil.action_thread,eventType==EventType.THREAD_DUMP_ACTION_END?tooltip=resourceManager.getString("ui","ms_eventActionThreadDumpsAvailableTooltipText"):eventType==EventType.THREAD_DUMP_ACTION_STARTED?(tooltip=resourceManager.getString("ui","ms_eventActionThreadDumpsInProgressTooltipText"),halfVisible=!0):eventType==EventType.THREAD_DUMP_ACTION_FAILED&&(tooltip=resourceManager.getString("ui","ms_eventActionThreadDumpsFailedTooltipText"),halfVisible=!0);break;case CorrelatedEvents.ActionExecutionGroupType.SCRIPT:imageSource=ImageUtil.action_script,tooltip=resourceManager.getString("ui","ms_eventActionScriptTooltipText",[this.eventCountsByActionGroupType[CorrelatedEvents.ActionExecutionGroupType.SCRIPT]]);break;case CorrelatedEvents.ActionExecutionGroupType.CUSTOM:imageSource=ImageUtil.action_custom,tooltip=resourceManager.getString("ui","ms_eventActionCustomTooltipText",[this.eventCountsByActionGroupType[CorrelatedEvents.ActionExecutionGroupType.CUSTOM]]);break;case CorrelatedEvents.ActionExecutionGroupType.SCALE:imageSource=ImageUtil.action_scale,tooltip=resourceManager.getString("ui","ms_eventActionScaleTooltipText",[this.eventCountsByActionGroupType[CorrelatedEvents.ActionExecutionGroupType.SCALE]])}return halfVisible&&(button+=" halfVisible"),button+="' src='"+imageSource,button+="' title='"+tooltip,button+="' ng-click=\""+handler+'">'},ActionButtonsRenderer}(CorrelatedEvents.CorrelatedEventsProcessor);exports.ActionButtonsRenderer=ActionButtonsRenderer});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/Events/EventGridBase",["require","exports","app/utils/QueuedBatcher","./ActionButtonsRenderer","./DeleteEventsController","./ArchiveEventsController"],function(require,exports,QueuedBatcher,actionButtonsRenderer,DeleteEventsController,ArchiveEventsController){var EventGridBase=function(_super){function EventGridBase($scope,resourceManager,notificationService,sharedInjectorService,timeRangeService,eventsUiService,$compile){var _this=this;_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.timeRangeService=timeRangeService,this.eventsUiService=eventsUiService,this.$compile=$compile,this.entityMap={},this.eventAffectedEntitiesMap={},this.eventTriggerPoliciesMap={},this.eventAffectedEntityLinkModeEnabled=!0,this.selectedEventListItems=[],this.selectedEventListItemsToArchive=[],this.contextMenuOptions={disableDefaultContextMenu:!0,items:[]},this.contextMenuItemViewDetails={text:this.getString("ms_viewEventDetails"),handler:function(){EventViewService.instance().viewEventDetails(_this.selectedEventListItems[0],_this.appId,_this.APP_TYPE!=ApplicationType.APM)},disabled:!(this.selectedEventListItems&&1==this.selectedEventListItems.length)},this.contextMenuItemDelete={text:this.getString("ms_deleteEvents"),handler:function(){_this.onDeleteEvents()},disabled:!(this.selectedEventListItems.length>0)},this.contextMenuItemArchive={text:this.getString("ms_archiveEvents"),handler:function(){_this.onArchiveEvents()},disabled:!(this.selectedEventListItems.length>0)},this.contextMenuItemStartWarRoom={text:this.getString("ms_warRoomStartLabel"),handler:function(){_this.onStartWarRoom()},disabled:!this.selectedEventListItemsToArchive||0==this.selectedEventListItemsToArchive.length},this.contextMenuItemSimulateEvent={text:this.getString("ms_simulateEvent"),handler:function(){_this.onSimulateEvent(_this.selectedEventListItems[0])},disabled:!(this.selectedEventListItems&&1==this.selectedEventListItems.length)},this.$scope.controller=this,this.initBatchers(),this.initColumns(),this.setAppType(URLParams.getCurrentUrlParams().location())}return __extends(EventGridBase,_super),EventGridBase.prototype.initColumns=function(){this.columnIcon=new GridColumn({type:"string",header:"",renderer:function(val,meta,record){return EventUtil.getEventStreamUiItemIconSource(record.raw)},exportable:!1}),this.columnName=new GridColumn({dataIndex:EventGridBase.DATA_INDEX_NAME,type:"string",header:this.getString("ms_type"),renderer:this.itemRenderer.bind(this),sortFn:this.nameSorter.bind(this),useRendererForExport:!0}),this.columnSummary=new GridColumn({dataIndex:EventGridBase.DATA_INDEX_SUMMARY,type:"string",header:this.getString("ms_summary"),renderer:this.itemRenderer.bind(this),sortFn:this.summarySorter.bind(this),useRendererForExport:!0}),this.columnTime=new GridColumn({dataIndex:EventGridBase.DATA_INDEX_TIME,type:"int",header:this.getString("ms_time"),renderer:this.itemRenderer.bind(this),useRendererForExport:!0}),this.columnBT=new GridColumn({dataIndex:EventGridBase.DATA_INDEX_BT,type:"int",header:this.getString("ms_businessTransaction"),renderer:this.linkedItemRenderer.bind(this),sortFn:this.btSorter.bind(this),useRendererForExport:!0}),this.columnTier=new GridColumn({dataIndex:EventGridBase.DATA_INDEX_TIER,type:"int",header:this.getString("ms_tier"),renderer:this.linkedItemRenderer.bind(this),sortFn:this.tierSorter.bind(this),useRendererForExport:!0}),this.columnNode=new GridColumn({dataIndex:EventGridBase.DATA_INDEX_NODE,type:"int",header:this.getString("ms_node"),renderer:this.linkedItemRenderer.bind(this),sortFn:this.nodeSorter.bind(this),useRendererForExport:!0}),this.columnSubgroup=new GridColumn({dataIndex:EventGridBase.DATA_INDEX_TIER,type:"int",header:this.getString("ms_subgroups"),renderer:this.linkedItemRenderer.bind(this),sortFn:this.tierSorter.bind(this)}),this.columnMachine=new GridColumn({dataIndex:EventGridBase.DATA_INDEX_NODE,type:"int",header:this.getString("ms_server"),renderer:this.linkedItemRenderer.bind(this),sortFn:this.nodeSorter.bind(this)}),this.columnDbNode=new GridColumn({dataIndex:EventGridBase.DATA_INDEX_NODE,type:"int",header:this.getString("ms_DB"),renderer:this.linkedItemRenderer.bind(this),sortFn:this.nodeSorter.bind(this)}),this.columnAffectedEntities=new GridColumn({type:"string",header:this.getString("ms_affectedEntityColumnHeaderEventList"),renderer:this.affectedEntitiesRenderer.bind(this)}),this.columnActions=new GridColumn({type:"string",header:this.getString("ms_actions"),renderer:this.actionsRenderer.bind(this),exportable:!1}),this.columnTriggerPolicy=new GridColumn({type:"string",header:this.getString("ms_actionEventTriggerColumnHeader"),renderer:this.triggerPolicyRenderer.bind(this)}),this.columnArchive=new GridColumn({dataIndex:"archived",type:"string",header:'<img style="width:16px;" src="'+ImageUtil.snapshotArchived+'"/>',tooltip:this.getString("ms_archive"),align:"center",renderer:function(val,meta,record){var item=record.raw;return item.archived?'<img style="width:16px;" src="'+ImageUtil.snapshotArchived+'"/>':""},exportHeader:this.getString("ms_archived"),exportRenderer:function(val,meta,record){var item=record.raw;return item.archived?"Y":"N"}})},EventGridBase.prototype.nameSorter=function(model1,model2){var value1=EventUtil.getEventNameDisplayString(model1.raw),value2=EventUtil.getEventNameDisplayString(model2.raw);return value1>value2?1:value2>value1?-1:0},EventGridBase.prototype.summarySorter=function(model1,model2){var item1=model1.raw,item2=model2.raw,value1=item1.type==EventStreamUiItemType.EVENT?item1.summary:item1.url,value2=item2.type==EventStreamUiItemType.EVENT?item2.summary:item2.url;return!value1&&value2?-1:value1||value2?value1&&!value2?1:value1>value2?1:value2>value1?-1:0:0},EventGridBase.prototype.btSorter=function(model1,model2){var value1=this.getEntityLinkText(model1.raw,EventGridBase.DATA_INDEX_BT),value2=this.getEntityLinkText(model2.raw,EventGridBase.DATA_INDEX_BT);return value1>value2?1:value2>value1?-1:0},EventGridBase.prototype.tierSorter=function(model1,model2){var value1=this.getEntityLinkText(model1.raw,EventGridBase.DATA_INDEX_TIER),value2=this.getEntityLinkText(model2.raw,EventGridBase.DATA_INDEX_TIER);return value1>value2?1:value2>value1?-1:0},EventGridBase.prototype.nodeSorter=function(model1,model2){var value1=this.getEntityLinkText(model1.raw,EventGridBase.DATA_INDEX_NODE),value2=this.getEntityLinkText(model2.raw,EventGridBase.DATA_INDEX_NODE);return value1>value2?1:value2>value1?-1:0},EventGridBase.prototype.itemRenderer=function(val,meta,record){var s="",item=record.raw;switch(meta.column.dataIndex){case EventGridBase.DATA_INDEX_NAME:s=EventUtil.getEventNameDisplayString(item);break;case EventGridBase.DATA_INDEX_TIME:s=DateTimeUtil.getDateTimeString(item.time);break;case EventGridBase.DATA_INDEX_SUMMARY:item.type==EventStreamUiItemType.EVENT?s=item.summary:item.type==EventStreamUiItemType.REQUEST_SEGMENT_DATA&&(s=item.url)}return s},EventGridBase.prototype.linkedItemRenderer=function(val,meta,record){var entityLinkText=StringUtils.escape(this.getEntityLinkText(record.raw,meta.column.dataIndex));if(entityLinkText==MetricUtil.NO_DATA_DISPLAY_STRING)return"<span>"+entityLinkText+"</span>";if(this.APP_TYPE==ApplicationType.DATABASE||this.APP_TYPE==ApplicationType.INFRA)return entityLinkText&&(meta.tdAttr='title="'+entityLinkText+'"'),"<span>"+(entityLinkText?entityLinkText:"-")+"</span>";var cssClass="";switch(meta.column.dataIndex){case EventGridBase.DATA_INDEX_BT:cssClass="blueText "+EventGridBase.BT_LINK_CLASS;break;case EventGridBase.DATA_INDEX_TIER:cssClass="blueText "+EventGridBase.COMPONENT_LINK_CLASS;break;case EventGridBase.DATA_INDEX_NODE:cssClass="blueText "+EventGridBase.NODE_LINK_CLASS}return"<span style='cursor: pointer;' class='"+cssClass+"'>"+entityLinkText+"</span>"},EventGridBase.prototype.actionsRenderer=function(val,meta,record){var _this=this,item=record.raw,resultHandler=function(correlatedEvents){_this.renderActionButtons(correlatedEvents,item)},errorHandler=function(){$("#event_actions_"+item.itemId).html(MetricUtil.NO_DATA_DISPLAY_STRING)};return this.correlatedEventBatcher.addRequest(item.itemId).then(resultHandler,errorHandler),"<div id='event_actions_"+item.itemId+"'>"+this.getString("ms_loading")+"</div>"},EventGridBase.prototype.renderActionButtons=function(correlatedEvents,triggerEvent){if(correlatedEvents&&correlatedEvents.length>0){var renderer=null;triggerEvent.type==EventStreamUiItemType.EVENT?renderer=new actionButtonsRenderer.ActionButtonsRenderer(triggerEvent,null):triggerEvent.type==EventStreamUiItemType.REQUEST_SEGMENT_DATA&&(renderer=new actionButtonsRenderer.ActionButtonsRenderer(null,triggerEvent));var buttonsHtmlString=renderer.renderActionButtons(correlatedEvents),buttons=$(buttonsHtmlString);this.$compile(buttons)(this.$scope),$("#event_actions_"+triggerEvent.itemId).html(buttons)}else $("#event_actions_"+triggerEvent.itemId).html("-")},EventGridBase.prototype.viewActionsExecuted=function(eventType,triggerEventId,triggerEventStartTime,isRSD){var timeRange={};timeRange=isRSD?SnapshotViewService.getTimeRangeAroundSnapshot(triggerEventStartTime):EventUtil.getTimeRangeAroundEvent(triggerEventStartTime);var timeString=this.timeRangeService.convertToPreferenceString(timeRange);FlashService.instance().viewActionsExecutedForEventFromHTML(this.appId,triggerEventId,eventType,timeString,isRSD)},EventGridBase.prototype.affectedEntitiesRenderer=function(val,meta,record){var _this=this,item=record.raw,timeString=this.timeRangeService.convertToPreferenceString(EventUtil.getTimeRangeAroundEvent(item.time)),columnId="event_affected_entities_"+item.itemId,rtn="<div id='"+columnId+"'>Loading...</div>",resultHandler=function(response){var eSummary=_this.eventsUiService.getEventSummaryById_response(response);eSummary?_this.renderAffectedEntities(eSummary.affectedEntities,columnId):$("#"+columnId).html("-")},errorHandler=function(){$("#"+columnId).html("-")};return this.eventsUiService.getEventSummaryById(item.id,timeString).then(resultHandler,errorHandler),rtn},EventGridBase.prototype.renderAffectedEntities=function(affectedEntities,columnId){var _this=this,htmlString="",affectedEntites=[],entityMap=EntityService.instance().fetchEntities(affectedEntities,function(){for(var i=0;i<affectedEntities.length;i++){var eDef=affectedEntities[i],entity=entityMap.getEntity(eDef);(eDef.entityType==EntityType.BUSINESS_TRANSACTION||eDef.entityType==EntityType.APPLICATION_COMPONENT||eDef.entityType==EntityType.APPLICATION_COMPONENT_NODE)&&affectedEntites.push({entity:entity,entityType:eDef.entityType})}if(_this.eventAffectedEntitiesMap[columnId]=affectedEntites,affectedEntites.length>0){htmlString="<ad-entity-links ads-entity-list=\"controller.eventAffectedEntitiesMap['"+columnId+"']\" ads-entity-link-mode-enabled=\"(controller.APP_TYPE == 'APM') && controller.eventAffectedEntityLinkModeEnabled\"></ad-entity-links>";var entityLinks=$(htmlString);_this.$compile(entityLinks)(_this.$scope),$("#"+columnId).html(entityLinks)}else $("#"+columnId).html("-")});return htmlString},EventGridBase.prototype.triggerPolicyRenderer=function(val,meta,record){var item=record.raw,columnId="event_trigger_policy_"+item.itemId;return Util.isValidId(item.triggerEventReactorId)?(this.renderTriggerPolicy(item.triggerEventReactorId,columnId),"<div id='"+columnId+"'>Loading...</div>"):"<div id='"+columnId+"'>-</div>"},EventGridBase.prototype.renderTriggerPolicy=function(triggerEventReactorId,columnId){var _this=this,htmlString="",resultHandler=function(response){var eventReactors=_this.eventsUiService.getEventReactorById_response(response);if(eventReactors[0]){_this.eventTriggerPoliciesMap[columnId]=[{entity:eventReactors[0],entityType:EntityType.EVENT_REACTOR}],htmlString="<ad-entity-links ads-entity-list=\"controller.eventTriggerPoliciesMap['"+columnId+"']\" ads-entity-link-mode-enabled=\"(controller.APP_TYPE == 'APM') && controller.eventAffectedEntityLinkModeEnabled\"></ad-entity-links>";var reactorLink=$(htmlString);_this.$compile(reactorLink)(_this.$scope),$("#"+columnId).html(reactorLink)}else $("#"+columnId).html(MetricUtil.NO_DATA_DISPLAY_STRING)};return this.eventsUiService.getEventReactorById([triggerEventReactorId]).then(resultHandler),htmlString},EventGridBase.prototype.getEntityLinkText=function(item,dataIndex){if(!this.entityMap)return MetricUtil.NO_DATA_DISPLAY_STRING;var entityType=null,id=-1;switch(dataIndex){case EventGridBase.DATA_INDEX_BT:entityType=EntityType.BUSINESS_TRANSACTION,id=item.businessTransactionId;break;case EventGridBase.DATA_INDEX_TIER:entityType=EntityType.APPLICATION_COMPONENT,id=item.applicationComponentId;break;case EventGridBase.DATA_INDEX_NODE:entityType=EntityType.APPLICATION_COMPONENT_NODE,id=item.applicationComponentNodeId;break;default:return MetricUtil.NO_DATA_DISPLAY_STRING}if(-1===id)return MetricUtil.NO_DATA_DISPLAY_STRING;var query="Type:"+entityType+", id:"+id;return this.entityMap[query]?this.entityMap[query].name:MetricUtil.NO_DATA_DISPLAY_STRING},EventGridBase.prototype.onEventListGridDoubleClick=function(event){EventViewService.instance().viewEventDetails(event.raw,this.appId,this.APP_TYPE!=ApplicationType.APM)},EventGridBase.prototype.onCellClickedInternal=function(event){var target=$(event.target);if(!Util.isUndefOrNull(target)){var eventStreamUiItem=event.raw;target.hasClass(EventGridBase.BT_LINK_CLASS)?Util.isValidId(eventStreamUiItem.businessTransactionId)&&BusinessTransactionViewService.instance().viewBusinessTransaction(this.appId,eventStreamUiItem.businessTransactionId):target.hasClass(EventGridBase.COMPONENT_LINK_CLASS)?Util.isValidId(eventStreamUiItem.applicationComponentId)&&ComponentViewService.instance().viewComponent(this.appId,eventStreamUiItem.applicationComponentId):target.hasClass(EventGridBase.NODE_LINK_CLASS)&&this.APP_TYPE==ApplicationType.APM&&Util.isValidId(eventStreamUiItem.applicationComponentNodeId)&&NodeViewService.instance().viewNode(this.appId,eventStreamUiItem.applicationComponentNodeId)}},EventGridBase.prototype.onGridItemSelectionChange=function(event){this.selectedEventListItems=[];for(var i=0;i<event.selected.items.length;i++){var selectedItem=event.selected.items[i].raw;this.selectedEventListItems.push(selectedItem)}this.selectedEventListItemsToArchive=this.getItemsToArchiveFromList(this.selectedEventListItems),this.enableContextMenuItems()},EventGridBase.prototype.getItemsToArchiveFromList=function(items){if(!items)return[];for(var selectedEventListItemsToArchive=[],i=0;i<items.length;i++){var selectedItem=items[i];selectedItem.archived||selectedEventListItemsToArchive.push(selectedItem)}return selectedEventListItemsToArchive},EventGridBase.prototype.enableContextMenuItems=function(itemName){void 0===itemName&&(itemName="");var firstSelectedItem=null,multipleSelections=!1;if(this.selectedEventListItems&&this.selectedEventListItems.length>0&&(firstSelectedItem=this.selectedEventListItems[0],this.selectedEventListItems.length>1&&(multipleSelections=!0)),itemName.length>0)return this.isContextItemDisabled(itemName,firstSelectedItem,multipleSelections);for(var i=0;i<this.contextMenuOptions.items.length;i++)this.contextMenuOptions.items[i].disabled=this.isContextItemDisabled(this.contextMenuOptions.items[i].text,firstSelectedItem,multipleSelections);return!0},EventGridBase.prototype.isContextItemDisabled=function(itemName,firstSelectedItem,multipleSelections){switch(itemName){case this.getString("ms_registerApplicationChange"):return!1;case this.getString("ms_exportGridData"):return!1;case this.getString("ms_viewEventDetails"):return!firstSelectedItem||multipleSelections;case this.getString("ms_deleteEvents"):return!firstSelectedItem;case this.getString("ms_archiveEvents"):return!this.selectedEventListItemsToArchive.length;case this.getString("ms_warRoomStartLabel"):return!firstSelectedItem;case this.getString("ms_simulateEvent"):return!firstSelectedItem||firstSelectedItem.type===EventStreamUiItemType.REQUEST_SEGMENT_DATA||multipleSelections;default:return!(this.selectedEventListItems&&this.selectedEventListItems.length>0)}},EventGridBase.prototype.onDeleteEvents=function(){DialogService.instance().showDialog(DeleteEventsController.DeleteEventsController,"app/view/common/Events/DeleteEventsController","app/view/common/Events/DeleteEvents.html",{selectedEventListItems:this.selectedEventListItems,closeCallback:angular.bind(this,this.handleDeleteEventsInList,this.selectedEventListItems)})},EventGridBase.prototype.onArchiveEvents=function(){DialogService.instance().showDialog(ArchiveEventsController.ArchiveEventsController,"app/view/common/Events/ArchiveEventsController","app/view/common/Events/ArchiveEvents.html",{selectedEventListItems:this.selectedEventListItems,closeCallback:angular.bind(this,this.archiveEventsCallBackFn)})},EventGridBase.prototype.handleDeleteEventsInList=function(eventItems){var _this=this;_.forEach(eventItems,function(eventItem){eventItem.itemId&&Util.removeWhere(_this.gridOptions.dataProvider,{itemId:eventItem.itemId})}),this.gridOptions.dataProvider=this.gridOptions.dataProvider.slice()},EventGridBase.prototype.onStartWarRoom=function(){WarRoomViewService.instance().viewCreateWarRoomSessionDialog()},EventGridBase.prototype.onViewEventDetails=function(){1==this.selectedEventListItems.length&&EventViewService.instance().viewEventDetails(this.selectedEventListItems[0],this.appId,this.APP_TYPE!=ApplicationType.APM)},EventGridBase.prototype.onSimulateEvent=function(){1==this.selectedEventListItems.length&&EventViewService.instance().simulateEvent(this.selectedEventListItems[0])},EventGridBase.prototype.archiveEventsCallBackFn=function(){this.selectedEventListItemsToArchive=[],this.fetchData()},EventGridBase.prototype.fetchData=function(){},EventGridBase.prototype.setAppType=function(urlLocation){switch(urlLocation){case NavigationDataConstants.SERVER_MONITORING_EVENTS:this.APP_TYPE=ApplicationType.INFRA;break;case NavigationDataConstants.DB_MONITORING_EVENTS:this.APP_TYPE=ApplicationType.DATABASE;break;default:this.APP_TYPE=ApplicationType.APM}},EventGridBase.prototype.initBatchers=function(){this.correlatedEventBatcher=new QueuedBatcher(function(input){return EventsUiService.instance().getCorrelatedEventsForEventStreamUiItems(input,TimeRangeService.instance().getCurrentTimeRangeStringForUrl())})},EventGridBase.$inject=["$scope","resourceManager","notificationService","sharedInjectorService","timeRangeService","eventsUiService","$compile"],EventGridBase.DATA_INDEX_SUMMARY="summary",EventGridBase.DATA_INDEX_TIME="time",EventGridBase.DATA_INDEX_BT="businessTransactionId",EventGridBase.DATA_INDEX_TIER="applicationComponentId",EventGridBase.DATA_INDEX_NODE="applicationComponentNodeId",EventGridBase.DATA_INDEX_NAME="name",EventGridBase.BT_LINK_CLASS="ads-bt-link-listener",EventGridBase.COMPONENT_LINK_CLASS="ads-component-link-listener",EventGridBase.NODE_LINK_CLASS="ads-node-link-listener",EventGridBase}(ControllerBase);exports.EventGridBase=EventGridBase});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/Events/eventDetails/CorrelatedEventsDataGridController",["require","exports","../EventGridBase","../CorrelatedEventsProcessor"],function(require,exports,EventGridBase,CorrelatedEventsProcessor){var CorrelatedEventsDataGridController=function(_super){function CorrelatedEventsDataGridController($scope,$rootScope,resourceManager,notificationService,sharedInjectorService,timeRangeService,eventsUiService,$compile){var _this=this;_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService,timeRangeService,eventsUiService,$compile),this.$scope=$scope,this.$rootScope=$rootScope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.timeRangeService=timeRangeService,this.eventsUiService=eventsUiService,this.$compile=$compile,this.dbMonitoringMode=!1,this.showOnlyMostRelevantEvents=!0,this.processData=function(correlatedEvents){if(_this.showOnlyMostRelevantEvents){var processor=new CorrelatedEventsProcessor.CorrelatedEventsProcessor;processor.processAllCorrelatedEvents(correlatedEvents),_this.gridOptions.dataProvider=processor.mostRelevantEvents}else _this.gridOptions.dataProvider=correlatedEvents;_this.$rootScope.$broadcast(CorrelatedEventsDataGridController.CORRELATED_EVENTS_FETCHED,_this.gridOptions.dataProvider,_this.$scope.gridId)},this.filterString="",this.initialSortField=CorrelatedEventsDataGridController.DATA_INDEX_TIME,this.initialSortDirection=GridComp.DESC,this.shownActionCount=0,this.totalActionCount=0,$scope.controller=this,this.init(),$scope.$watch("triggerEventSummary",function(){_this.triggerEventSummary=$scope.triggerEventSummary,_this.fetchData()}),$scope.$watch("dbMonitoringMode",function(newValue){Util.isDefAndNotNull(newValue)&&(_this.dbMonitoringMode=newValue)}),$scope.$on("REFRESH_CORRELATED_EVENTS_GRID",function(){$scope.controller.fetchData()}),EventBusService.instance().registerEventListener(EventViewService.UEV_DELETE_EVENTS,function(eventItems){_this.handleDeleteEventsInList(eventItems)},$scope)}return __extends(CorrelatedEventsDataGridController,_super),CorrelatedEventsDataGridController.prototype.fetchData=function(){if(this.triggerEventSummary){var timeString=this.timeRangeService.convertToPreferenceString(EventUtil.getTimeRangeAroundEvent(this.triggerEventSummary.eventTime.getTime()));this.eventsUiService.getCorrelatedEventsForEvent(this.triggerEventSummary.id,timeString).then(this.processData)}else Util.isDefAndNotNull(this.$scope.correlatedEvents)&&this.processData(this.$scope.correlatedEvents)},CorrelatedEventsDataGridController.prototype.toggleShowAllEvents=function(){this.showOnlyMostRelevantEvents=!this.showOnlyMostRelevantEvents,this.fetchData()},CorrelatedEventsDataGridController.prototype.init=function(){this.setupGridOptions()},CorrelatedEventsDataGridController.prototype.setupGridOptions=function(){var gridOptions=new GridOptions;gridOptions.columnProvider=this.createColumns(),gridOptions.dataProvider=[],gridOptions.useBufferedRenderer=!0,gridOptions.multiLine=!0,gridOptions.filterString=this.filterString,gridOptions.filterFunction=this.gridFilterFunction.bind(this),gridOptions.onCellClick=this.onCellClickedInternal.bind(this),gridOptions.sortFields=[{property:this.initialSortField,direction:this.initialSortDirection}],gridOptions.filterSummaryFunction=this.filterSummaryFunction.bind(this),this.gridOptions=gridOptions,this.contextMenuOptions.items.push(this.contextMenuItemViewDetails,this.contextMenuItemArchive)},CorrelatedEventsDataGridController.prototype.createColumns=function(){var columns=[this.columnName,this.columnSummary,this.columnTime,this.columnAffectedEntities,this.columnTriggerPolicy,this.columnArchive];return this.columnName.width="20%",this.columnSummary.width="20%",this.columnTime.width="15%",this.columnAffectedEntities.width="25%",this.columnTriggerPolicy.width="15%",this.columnArchive.width="5%",columns},CorrelatedEventsDataGridController.prototype.gridFilterFunction=function(item){if(!item||!item.raw)return!0;if(!this.gridOptions||!this.gridOptions.filterString)return!0;var filterString=this.gridOptions.filterString.toString(),eventItem=item.raw;return StringUtils.containsString(eventItem.summary,filterString,!0)||StringUtils.containsString(EventUtil.getEventNameDisplayString(item),filterString,!0)},CorrelatedEventsDataGridController.prototype.filterSummaryFunction=function(shownCount,totalCount){this.shownActionCount=shownCount,this.totalActionCount=totalCount},CorrelatedEventsDataGridController.CORRELATED_EVENTS_FETCHED="CORRELATED_EVENTS_FETCHED",CorrelatedEventsDataGridController.$inject=["$scope","$rootScope","resourceManager","notificationService","sharedInjectorService","timeRangeService","eventsUiService","$compile"],CorrelatedEventsDataGridController}(EventGridBase.EventGridBase);appdynamicsModule.controller("CorrelatedEventsDataGridController",CorrelatedEventsDataGridController)});var EventUtil=function(){function EventUtil(){}return EventUtil.getEventTypeDisplayString=function(eventType){var displayString=resourceManager.getString("ui","ms_eventType_"+eventType);return displayString?displayString:eventType},EventUtil.getEventSeverityDisplayString=function(severity){return severity===EventUtil.EVENT_SEVERITY_TYPE_INFO?resourceManager.getString("ui","ms_info"):severity===EventUtil.EVENT_SEVERITY_TYPE_WARNING?resourceManager.getString("ui","ms_warning"):severity===EventUtil.EVENT_SEVERITY_TYPE_CRITICAL?resourceManager.getString("ui","ms_critical"):severity===EventUtil.EVENT_SEVERITY_TYPE_ERROR?resourceManager.getString("ui","ms_error"):severity},EventUtil.getEventNameDisplayString=function(item){var name="";return item.type==EventStreamUiItemType.EVENT?name=resourceManager.getString("ui","ms_eventType_"+item.eventType):item.type==EventStreamUiItemType.REQUEST_SEGMENT_DATA&&(name=resourceManager.getString("ui","ms_requestUserExperience_"+item.experience)),name},EventUtil.getEventStreamUiItemIconSource=function(item){return item.type==EventStreamUiItemType.EVENT?"<img class='adsSvgIconSmall' src='"+ImageUtil.getSeverityIconForEventSeverity(item.severity)+"'/>":item.type==EventStreamUiItemType.REQUEST_SEGMENT_DATA?"<img class='adsSvgIconSmall' src='"+ImageUtil.getRequestExperienceIconURL(item.experience)+"'/>":""},EventUtil.getTimeRangeAroundEvent=function(eventStartTime){return EventUtil.getTimeRangeAroundTimestamp(eventStartTime,15)},EventUtil.getTimeRangeAroundTimestamp=function(eventStartTime,plusMinusMinutes){var trs={},startMillisc=eventStartTime-DateTimeUtil.MILLISEC_PER_MIN*plusMinusMinutes,endMillisc=eventStartTime+DateTimeUtil.MILLISEC_PER_MIN*plusMinusMinutes;return trs.type=TimeRangeSpecifierType.BETWEEN_TIMES,trs.startTime=new Date(startMillisc),trs.endTime=new Date(endMillisc),trs.durationInMinutes=DateTimeUtil.calculateDurationInMinutes(startMillisc,endMillisc),trs},EventUtil.isPolicyViolationEventType=function(eventType){return eventType&&StringUtils.startsWith(eventType,EventUtil.POLICY_EVENT_TYPE_PREFIX)},EventUtil.isEventAction_DiagSessionWorkbench=function(eventType){return eventType==EventType.DIAGNOSTIC_SESSION},EventUtil.isEventAction_DownloadThreadDump=function(eventType){return eventType==EventType.THREAD_DUMP_ACTION_END},EventUtil.isEventAction_DownloadLocalScript=function(eventType){return eventType==EventType.RUN_LOCAL_SCRIPT_ACTION_END},EventUtil.getDefaultEventsFilter=function(){var filter={applicationIds:[],policyViolationStartedWarning:!0,policyViolationStartedCritical:!0,codeDeadlock:!0,resourcePoolLimit:!0,applicationDeployment:!0,appServerRestart:!0,appConfigChange:!0,applicationCrash:!0,clrCrash:!0,license:!0,controllerDiskSpaceLow:!0,agentVersionNewerThanController:!0,agentConfigurationError:!0,syntheticAvailabilityHealthy:!0,syntheticAvailabilityWarning:!0,syntheticAvailabilityConfirmedWarning:!0,syntheticAvailabilityOngoingWarning:!0,syntheticAvailabilityError:!0,syntheticAvailabilityConfirmedError:!0,syntheticAvailabilityOngoingError:!0,syntheticPerformanceHealthy:!0,syntheticPerformanceWarning:!0,syntheticPerformanceConfirmedWarning:!0,syntheticPerformanceOngoingWarning:!0,syntheticPerformanceCritical:!0,syntheticPerformanceConfirmedCritical:!0,syntheticPerformanceOngoingCritical:!0,customEventFilters:[]};
return filter},EventUtil.getDBMonEventFilter=function(){var filter={policyViolationStartedWarning:!0,policyViolationStartedCritical:!0,policyViolationWarningToCritical:!0,policyViolationCriticalToWarning:!0,policyViolationContinuesCritical:!0,policyViolationContinuesWarning:!0,policyViolationEndedCritical:!0,policyViolationEndedWarning:!0,policyViolationCanceledCritical:!0,policyViolationCanceledWarning:!0,slowRequest:!0,verySlowRequest:!0,stalledRequest:!0,allError:!0,codeDeadlock:!0,resourcePoolLimit:!0,applicationDeployment:!0,appServerRestart:!0,appConfigChange:!0,applicationCrash:!0,clrCrash:!0,license:!0,controllerDiskSpaceLow:!0,agentVersionNewerThanController:!0,agentConfigurationError:!0,agentEnabledDisabled:!0,bytecodeTransformerLog:!0,diagnosticSession:!0,internalUIEvent:!1,agentEvent:!0,appDynamicsInternalDiagnostics:!1,eumInternalError:!1,memoryLeakDiagnostics:!0,systemLog:!0,activityTrace:!0,objectContentSummary:!0,appDynamicsData:!0,azureAutoScaling:!0,agentDiagnostics:!0,memory:!0,custom:!1,applicationDiscovered:!1,tierDiscovered:!1,nodeDiscovered:!1,machineDiscovered:!1,btDiscovered:!1,serviceEndpointDiscovered:!1,backendDiscovered:!1,dbmsParameterChanged:!0};return filter},EventUtil.getSimEventFilter=function(){var filter=EventUtil.getDefaultEventsFilter();return filter.custom=!0,filter},EventUtil.getExportableStringFromEventDetailProperties=function(properties){return _.map(properties,function(property){return property.name+" "+property.value}).join(", ")},EventUtil.getOperationIdFromEventSummary=function(eventSummary){if(!(eventSummary&&eventSummary.correlationKeys&&eventSummary.correlationKeys.length>0))return-1;for(var i=0;i<eventSummary.correlationKeys.length;i++){var eck=eventSummary.correlationKeys[i];if(eck&&eck.correlationType==EventCorrelationType.OPERATION_ID)return parseInt(eck.correlationValue)}return-1},EventUtil.filterOutArchiveComments=function(userComments){return Util.isDefAndNotNull(userComments)?_.filter(userComments,function(userComment){return userComment.comment!=EventUtil.ARCHIVED_COMMENT}):[]},EventUtil.ARCHIVED_COMMENT="ARCHIVED",EventUtil.POLICY_EVENT_TYPE_PREFIX="POLICY",EventUtil.SYNTH_EVENT_TYPE_PREFIX="EUM_CLOUD_SYNTHETIC_",EventUtil.UEV_VIEW_EVENTS_EVENT_PREFIX="UEV_VIEW_EVENTS_",EventUtil.EVENT_SEVERITY_TYPE_INFO="INFO",EventUtil.EVENT_SEVERITY_TYPE_WARNING="WARNING",EventUtil.EVENT_SEVERITY_TYPE_CRITICAL="CRITICAL",EventUtil.EVENT_SEVERITY_TYPE_ERROR="ERROR",EventUtil.EVENT_TYPE_TO_STRING_MAP={policyViolationStartedWarning:"ms_eventType_POLICY_OPEN_WARNING",policyViolationStartedCritical:"ms_eventType_POLICY_OPEN_CRITICAL",policyViolationWarningToCritical:"ms_eventType_POLICY_UPGRADED",policyViolationCriticalToWarning:"ms_eventType_POLICY_DOWNGRADED",policyViolationContinuesCritical:"ms_eventType_POLICY_CONTINUES_CRITICAL",policyViolationContinuesWarning:"ms_eventType_POLICY_CONTINUES_WARNING",policyViolationEndedCritical:"ms_eventType_POLICY_CLOSE_CRITICAL",policyViolationEndedWarning:"ms_eventType_POLICY_CLOSE_WARNING",policyViolationCanceledCritical:"ms_eventType_POLICY_CANCELED_CRITICAL",policyViolationCanceledWarning:"ms_eventType_POLICY_CANCELED_WARNING",slowRequest:"ms_userExperienceSlow",verySlowRequest:"ms_userExperienceVerySlow",stalledRequest:"ms_userExperienceStall",codeDeadlock:"ms_eventType_DEADLOCK",resourcePoolLimit:"ms_eventType_RESOURCE_POOL_LIMIT",applicationDeployment:"ms_eventType_APPLICATION_DEPLOYMENT",appServerRestart:"ms_eventType_APP_SERVER_RESTART",appConfigChange:"ms_eventType_APPLICATION_CONFIG_CHANGE",applicationCrash:"ms_eventType_APPLICATION_CRASH",clrCrash:"ms_eventType_CLR_CRASH",license:"ms_eventType_LICENSE",controllerDiskSpaceLow:"ms_eventType_DISK_SPACE",agentVersionNewerThanController:"ms_eventType_CONTROLLER_AGENT_VERSION_INCOMPATIBILITY",agentConfigurationError:"ms_eventType_AGENT_CONFIGURATION_ERROR",diagnosticSession:"ms_eventType_DIAGNOSTIC_SESSION",agentEnabledDisabled:"ms_eventType_AGENT_STATUS",bytecodeTransformerLog:"ms_eventType_INFO_INSTRUMENTATION_VISIBILITY",agentEvent:"ms_eventType_AGENT_EVENT",appDynamicsInternalDiagnostics:"ms_eventType_APPDYNAMICS_INTERNAL_DIAGNOSTICS",internalUIEvent:"ms_eventType_INTERNAL_UI_EVENT",eumInternalError:"ms_eventType_EUM_INTERNAL_ERROR",applicationDiscovered:"ms_eventType_APPLICATION_DISCOVERED",tierDiscovered:"ms_eventType_TIER_DISCOVERED",nodeDiscovered:"ms_eventType_NODE_DISCOVERED",machineDiscovered:"ms_eventType_MACHINE_DISCOVERED",btDiscovered:"ms_eventType_BT_DISCOVERED",serviceEndpointDiscovered:"ms_eventType_SERVICE_ENDPOINT_DISCOVERED",backendDiscovered:"ms_eventType_BACKEND_DISCOVERED",syntheticBrowserEvent:"ms_eventType_EUM_CLOUD_SYNTHETIC_BROWSER_EVENT",syntheticAvailabilityHealthy:"ms_eventType_EUM_CLOUD_SYNTHETIC_HEALTHY_EVENT",syntheticAvailabilityWarning:"ms_eventType_EUM_CLOUD_SYNTHETIC_WARNING_EVENT",syntheticAvailabilityConfirmedWarning:"ms_eventType_EUM_CLOUD_SYNTHETIC_CONFIRMED_WARNING_EVENT",syntheticAvailabilityOngoingWarning:"ms_eventType_EUM_CLOUD_SYNTHETIC_ONGOING_WARNING_EVENT",syntheticAvailabilityError:"ms_eventType_EUM_CLOUD_SYNTHETIC_ERROR_EVENT",syntheticAvailabilityConfirmedError:"ms_eventType_EUM_CLOUD_SYNTHETIC_CONFIRMED_ERROR_EVENT",syntheticAvailabilityOngoingError:"ms_eventType_EUM_CLOUD_SYNTHETIC_ONGOING_ERROR_EVENT",syntheticPerformanceHealthy:"ms_eventType_EUM_CLOUD_SYNTHETIC_PERF_HEALTHY_EVENT",syntheticPerformanceWarning:"ms_eventType_EUM_CLOUD_SYNTHETIC_PERF_WARNING_EVENT",syntheticPerformanceConfirmedWarning:"ms_eventType_EUM_CLOUD_SYNTHETIC_PERF_CONFIRMED_WARNING_EVENT",syntheticPerformanceOngoingWarning:"ms_eventType_EUM_CLOUD_SYNTHETIC_PERF_ONGOING_WARNING_EVENT",syntheticPerformanceCritical:"ms_eventType_EUM_CLOUD_SYNTHETIC_PERF_CRITICAL_EVENT",syntheticPerformanceConfirmedCritical:"ms_eventType_EUM_CLOUD_SYNTHETIC_PERF_CONFIRMED_CRITICAL_EVENT",syntheticPerformanceOngoingCritical:"ms_eventType_EUM_CLOUD_SYNTHETIC_PERF_ONGOING_CRITICAL_EVENT",dbmsParameterChanged:"ms_eventType_DB_SERVER_PARAMTER_CHANGE"},EventUtil}();define("app/view/common/Events/EventUtil",function(){}),define("app/view/common/Events/EntityLinksBoxDirective",["require","exports"],function(require,exports){var EntityLinksBoxDirective=function(){function EntityLinksBoxDirective(){return{restrict:"E",transclude:!1,templateUrl:"app/view/common/Events/EntityLinksBox.html",scope:{entityList:"=adsEntityList",entityLinkModeEnabled:"=adsEntityLinkModeEnabled"},controller:"EntityLinksBoxController"}}return EntityLinksBoxDirective}();exports.EntityLinksBoxDirective=EntityLinksBoxDirective,appdynamicsModule.directive(StringUtils.toCamelCase("ad-entity-links"),EntityLinksBoxDirective)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/Events/EntityLinksBoxController",["require","exports"],function(require,exports){var EntityLinksBoxController=function(_super){function EntityLinksBoxController($scope,resourceManager,notificationService,sharedInjectorService){_super.call(this,$scope,resourceManager,notificationService,sharedInjectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.sharedInjectorService=sharedInjectorService,this.maximumNumberOfItemsShown=100,$scope.controller=this,this.$scope.entityList=this.$scope.entityList||[],this.appId=this.getApplicationIdFromUrl()}return __extends(EntityLinksBoxController,_super),EntityLinksBoxController.prototype.isEntityLinkModeEnabled=function(){return this.$scope.entityLinkModeEnabled&&Util.isValidId(this.appId)},EntityLinksBoxController.prototype.isEntityTypeEventReactor=function(entity){return entity.entityType==EntityType.EVENT_REACTOR},EntityLinksBoxController.prototype.getOverflowCountMessage=function(){return this.getString("ms_showingFilteredNumOfTotal",[this.maximumNumberOfItemsShown,this.$scope.entityList.length+" "+this.getString("ms_items")])},EntityLinksBoxController.prototype.getEntityIcon=function(entity){switch(entity.entityType){case EntityType.BUSINESS_TRANSACTION:return ImageUtil.getIconForBusinessTransactionType2(entity.entity);case EntityType.APPLICATION_COMPONENT:return ImageUtil.getComponentMiniIcon(entity.entity);case EntityType.APPLICATION_COMPONENT_NODE:var node=entity.entity;return node&&node.nodeType&&node.nodeType.name===EntityLinksBoxController.DB_COLLECTOR?ImageUtil.dbNodeGray:ImageUtil.getNodeMiniIcon(node);case EntityType.EVENT_REACTOR:return ImageUtil.iconNavRules}},EntityLinksBoxController.prototype.viewEntityDashboard=function(entityData){if(this.isEntityLinkModeEnabled(entityData))switch(entityData.entityType){case EntityType.BUSINESS_TRANSACTION:BusinessTransactionViewService.instance().viewBusinessTransaction(this.appId,entityData.entity.id);break;case EntityType.APPLICATION_COMPONENT:ComponentViewService.instance().viewComponent(this.appId,entityData.entity.id);break;case EntityType.APPLICATION_COMPONENT_NODE:NodeViewService.instance().viewNode(this.appId,entityData.entity.id);break;case EntityType.EVENT_REACTOR:FlashService.instance().viewEventReactorDetailsFromHTML(this.appId,entityData.entity.id)}},EntityLinksBoxController.DB_COLLECTOR="DB Collector",EntityLinksBoxController.$inject=["$scope","resourceManager","notificationService","sharedInjectorService"],EntityLinksBoxController}(ControllerBase);exports.EntityLinksBoxController=EntityLinksBoxController,appdynamicsModule.controller("EntityLinksBoxController",EntityLinksBoxController)}),require(["app/view/common/Events/EventViewService","app/view/common/Events/eventCounts/EventCountsDirective","app/view/common/Events/eventCounts/EventCountsController","app/view/common/Events/eventDetails/EventDetailViewerController","app/view/common/Events/eventDetails/EventCommentsViewDirective","app/view/common/Events/eventDetails/EventCommentsViewController","app/view/common/Events/eventDetails/EventDetailSummaryViewDirective","app/view/common/Events/eventDetails/EventDetailSummaryViewController","app/view/common/Events/eventDetails/CorrelatedEventsDataGridDirective","app/view/common/Events/eventDetails/CorrelatedEventsDataGridController","app/view/common/Events/EventUtil","app/view/common/Events/EventGridBase","app/view/common/Events/EntityLinksBoxDirective","app/view/common/Events/EntityLinksBoxController"]),define("app/view/common/Events/EventsModuleCode",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MetricBrowserViewService=function(_super){function MetricBrowserViewService($location,navigationService,notificationService,resourceManager,injectorService){var _this=this;if(_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.injectorService=injectorService,MasterService.instance().initData)this.setHtmlMetricBrowserControllerFlag(MasterService.instance().initData.enableHtmlMetricBrowser);else var removeListenerFunction=InjectorService.instance().$rootScope().$on(MasterService.UEV_INIT_DATA_FETCHED,function(){removeListenerFunction&&removeListenerFunction(),_this.setHtmlMetricBrowserControllerFlag(MasterService.instance().initData.enableHtmlMetricBrowser)})}return __extends(MetricBrowserViewService,_super),MetricBrowserViewService.instance=function(){return AngularUtil.getADInjector().get(MetricBrowserViewService.NAME)},MetricBrowserViewService.prototype.isHtmlMetricBrowserEnabled=function(){return!UserService.instance().getGeneralUserPreferenceBooleanValue(UserPreferenceConstants.VIEW_OLD_METRIC_BROWSER)&&this.htmlMetricBrowserControllerFlag},MetricBrowserViewService.prototype.setHtmlMetricBrowserControllerFlag=function(flag){this.htmlMetricBrowserControllerFlag=flag},MetricBrowserViewService.prototype.getHtmlMetricBrowserControllerFlag=function(){return this.htmlMetricBrowserControllerFlag},MetricBrowserViewService.prototype.openMetricBrowserDialogForMetric=function(appId,metricID){var metric={};metric.entityType=EntityType.APPLICATION,metric.entityId=appId,metric.metricId=metricID,this.openMetricBrowserDialog(appId,metric)},MetricBrowserViewService.prototype.openMetricBrowserDialogForMetrics=function(appId,metricIDs){var metricsToView=[];metricIDs.forEach(function(metricId){var metric={};metric.entityType=EntityType.APPLICATION,metric.entityId=appId,metric.metricId=metricId,metricsToView.push(metric)}),this.openMetricBrowserDialog(appId,metricsToView)},MetricBrowserViewService.prototype.openMetricBrowser=function(appId,metricIDs,metricEntity){if(EntityUtils.isValidEntityDefinition(metricEntity)){var metricIds=Util.getArray(metricIDs),metricsToView=[];metricIds.forEach(function(metricId){var metric={};metric.entityType=metricEntity.entityType,metric.entityId=metricEntity.entityId,metric.metricId=metricId,metricsToView.push(metric)}),this.openMetricBrowserDialog(appId,metricsToView)}},MetricBrowserViewService.prototype.openMetricBrowserDialogForBT=function(appId,componentId,metricID){var metric={};metric.entityType=EntityType.APPLICATION_COMPONENT,metric.entityId=componentId,metric.metricId=metricID,this.openMetricBrowserDialog(appId,metric)},MetricBrowserViewService.prototype.openMetricBrowserDialog=function(appId,metricDataQueryScopes,timeRangeString){var _this=this,params=URLParams.createEmptyUrlParams();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.METRIC_BROWSER),params.setParam(UrlConstants.VIEW_TREE,"true"),params.setParam(UrlConstants.AXIS,"linear"),params.setParam(UrlConstants.SHOW_POINTS,"false"),params.setNumberParam(UrlConstants.APPLICATION_ID,appId),timeRangeString?params.setParam(UrlConstants.TIME_RANGE,timeRangeString):params.setParam(UrlConstants.TIME_RANGE,TimeRangeService.instance().getCurrentTimeRangeStringForUrl());var metrics=Util.getArray(metricDataQueryScopes),metricIdentifiers=[];metrics.forEach(function(metric){_this.isValidMetricDataQueryScope(metric)&&metricIdentifiers.push(""+metric.entityType.toString()+"."+metric.entityId+"."+metric.metricId)}),params.setParam(UrlConstants.METRICS,metricIdentifiers.join()),this.gotoMetricBrowserLocation(params)},MetricBrowserViewService.prototype.gotoMetricBrowserLocation=function(url){this.isHtmlMetricBrowserEnabled()?DialogService.instance().openDialogAsync({controllerPath:"app/view/common/metricBrowser/MetricBrowserController",templateUrl:"app/view/common/metricBrowser/MetricBrowserView.html",data:url,minimizable:!0}):this.injectorService.flashService().gotoFlexModal(url.toString())},MetricBrowserViewService.prototype.buildCsvDataFromChartData=function(chartData){var csvData="";if(Util.isUndefOrNull(chartData))return csvData;if(csvData+=chartData.name+"\n",csvData+=ResourceManager.instance().getString("ui","ms_metricDataCsvDataNames")+"\n",Util.isDefAndNotNull(chartData.metricSeries))for(var series=chartData.metricSeries,j=0;j<series.value.data.length;j++)csvData+=new Date(series.value.data[j].x).toString()+",",csvData+=(Util.isDefAndNotNull(series.value.data[j].y)?series.value.data[j].y.toString():"--")+",",csvData+=(Util.isDefAndNotNull(series.min.data[j].y)?series.min.data[j].y.toString():"--")+",",csvData+=(Util.isDefAndNotNull(series.max.data[j].y)?series.max.data[j].y.toString():"--")+",",csvData+=(Util.isDefAndNotNull(series.sum.data[j].y)?series.sum.data[j].y.toString():"--")+",",csvData+=(Util.isDefAndNotNull(series.count.data[j].y)?series.count.data[j].y.toString():"--")+"\n";return csvData},MetricBrowserViewService.prototype.isValidMetricDataQueryScope=function(metricDataQueryScope){return Util.isDefAndNotNull(metricDataQueryScope)&&Util.isValidId(metricDataQueryScope.metricId)&&Util.isValidId(metricDataQueryScope.entityId)&&!StringUtils.isNullOrEmptyString(metricDataQueryScope.entityType)},MetricBrowserViewService.NAME="metricBrowserViewService",MetricBrowserViewService.$inject=["$location","navigationService","notificationService","resourceManager","injectorService"],MetricBrowserViewService}(ViewServiceBase);adComponentsModule.service(MetricBrowserViewService.NAME,MetricBrowserViewService),define("app/view/common/metricBrowser/MetricBrowserViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/metricBrowser/MetricBrowserController",["require","exports"],function(){var MetricBrowserController=function(_super){function MetricBrowserController($scope,dialogData,metricBrowserUiService,$modalInstance){var _this=this;_super.call(this,$scope,$modalInstance),this.$scope=$scope,this.dialogData=dialogData,this.metricBrowserUiService=metricBrowserUiService,this.$modalInstance=$modalInstance,this.treeData=[],this.metricLegendOptions=[],this.plotToggleItems=[],this.plotMode=MetricBrowserController.PLOT_MODE_LINEAR,this.showMetricTree=StringUtils.isNullOrEmptyString(URLParams.getCurrentUrlParams().viewTree())?!0:Util.parseBoolean(URLParams.getCurrentUrlParams().viewTree()),this.showPoints=!1,this.chartSelectionMenuOptions={enableViewSnapshotsInTimeRange:!0,enableSettingGlobalTimeRange:!0,enableZoomIn:!0},this.defaultSeriesVisibilityMap={},this.observedByDefault=UserPreferenceConstants.METRIC_BROWSER_GRAPH_MODAL_ADD_OBSERVED_BY_DEFAULT,this.minimumByDefault=UserPreferenceConstants.METRIC_BROWSER_GRAPH_MODAL_ADD_MINIMUM_BY_DEFAULT,this.maximumByDefault=UserPreferenceConstants.METRIC_BROWSER_GRAPH_MODAL_ADD_MAXIMUM_BY_DEFAULT,this.baselineByDefault=UserPreferenceConstants.METRIC_BROWSER_GRAPH_MODAL_ADD_BASELINE_BY_DEFAULT,this.currentMetricData=[],this.currentQueries=[],this.currentBaselineData=[],this.legendIconRow=-1,this.colorIndex=0,this.chartColors=ChartUtil.getChartColors(),this.circleIcon=ImageUtil.graphCircle,this.triangleUpIcon=ImageUtil.graphTriangleUp,this.triangleDownIcon=ImageUtil.graphTriangleDown,this.squareIcon=ImageUtil.graphSquare,this.diamondIcon=ImageUtil.graphDiamond,this.metricDisplayNameMap={},this.metricsAddedToChart=[],this.metricPathToTreeItemMap={},this.$scope.controller=this,this.openedFromDeepLink?this.init():Util.isDefAndNotNull(this.dialogData)&&this.dialogData instanceof URLParams&&this.setUrlLocation(this.dialogData).then(function(){_this.init()})}return __extends(MetricBrowserController,_super),MetricBrowserController.prototype.init=function(){var _this=this;this.setupDefaultSeriesVisibilityMap(),this.setupContextMenuOptions(),ApplicationUiService.instance().getApplicationById(this.getApplicationIdFromUrl()).then(function(response){return _this.application=response,_this.setBaselineFromUrl()}).then(function(){_this.buildTree(),_this.setTimeRangeFromUrl(),_this.setupChartOptions(),_this.setupPlotToggles(),_this.setupWatchers(),_this.reLayoutChart()})},MetricBrowserController.prototype.buildTree=function(){var _this=this;if(this.isTreeLoading=!0,this.showInProgressIndicator=!0,this.getCurrentUrlParams().metrics()){var treeItemsRequest={metricDataQueries:[]},metrics=StringUtils.convertCommaSeparatedStringToArray(this.getCurrentUrlParams().metrics());metrics.forEach(function(metric){var metricQueryScope=_this.getMetricQueryScopeFromIdentifier(metric);Util.isDefAndNotNull(metricQueryScope)&&treeItemsRequest.metricDataQueries.push(metricQueryScope)}),this.metricBrowserUiService.getMetricTreeRootsSpecifiedMetricsExpanded(treeItemsRequest).then(function(roots){for(var i=0;i<roots.length;i++)_this.preprocessData(roots[i]);_this.treeData=_this.sortMetricTreeItems(roots.slice(0)),ViewUtil.doAfterDigest(function(){_this.expandedItems=treeItemsRequest.metricDataQueries}),_this.isTreeLoading=!1,_this.setupDragAndDropOnTreeNodes(),_this.setupMetricBrowserViewFromUrl()})}else this.metricBrowserUiService.getMetricTreeRoots([],this.application.id).then(function(roots){for(var i=0;i<roots.length;i++)_this.preprocessData(roots[i]);_this.treeData=_this.sortMetricTreeItems(roots.slice(0)),_this.isTreeLoading=!1,_this.setupDragAndDropOnTreeNodes(),_this.setupMetricBrowserViewFromUrl()})},MetricBrowserController.prototype.setDefaultSeriesVisibility=function(visibleByDefault,series){UserService.instance().setGeneralUserPreferenceBooleanValue(series,visibleByDefault)},MetricBrowserController.prototype.onDoubleClickTreeItem=function(event){event.raw&&event.raw.leaf&&this.addMetricTreeItemToChart(event.raw)},MetricBrowserController.prototype.onAddSelectedMetricToChart=function(){Util.isDefAndNotNull(this.selectedTreeRow)&&this.addMetricTreeItemToChart(this.selectedTreeRow.raw)},MetricBrowserController.prototype.disableAddMetricToChart=function(){if(Util.isUndefOrNull(this.selectedTreeRow))return!0;var treeItem=this.selectedTreeRow.raw;return treeItem.hasChildren||this.isMetricAddedToChart(this.getMetricIdentifierString(treeItem.metricId,treeItem.type,treeItem.entityId))},MetricBrowserController.prototype.fetchChildren=function(node,path){var _this=this;return this.metricBrowserUiService.getMetricTreeRoots(path,this.application.id).then(function(roots){node.children||(node.children=[]),node.children.length=0;for(var i=0;i<roots.length;i++)_this.preprocessData(roots[i],Util.isDefAndNotEmptyArray(path)?path.join(MetricBrowserController.METRIC_FULL_PATH_DELIMITER):null),node.children.push(roots[i]);node.children=_this.sortMetricTreeItems(node.children),_this.setupDragAndDropOnTreeNodes()})},MetricBrowserController.prototype.fetchData=function(){var _this=this;this.showInProgressIndicator=!0;var metricRequest={};if(metricRequest.metricDataQueries=this.metricLegendOptions.map(function(legendRow){return legendRow.metricQueryScope}),metricRequest.timeRangeSpecifier=this.timeRange,metricRequest.metricBaseline=this.baselineConfig.selectedBaseline?this.baselineConfig.selectedBaseline.id:null,metricRequest.maxSize=this.gridWidth,!Util.isDefAndNotNull(metricRequest.timeRangeSpecifier)||!Util.isDefAndNotEmptyArray(metricRequest.metricDataQueries))return this.chartConfig.series=[],void(this.isTreeLoading||(this.showInProgressIndicator=!1));var fetchedMetricData,fetchedBaselineData;this.metricBrowserUiService.getMetricData(metricRequest).then(function(metricData){fetchedMetricData=metricData,_this.currentMetricData=fetchedMetricData,_this.currentQueries=metricRequest.metricDataQueries,metricRequest.metricBaseline?_this.metricBrowserUiService.getMetricBaselineData(metricRequest).then(function(baselineData){fetchedBaselineData=baselineData,_this.currentBaselineData=fetchedBaselineData,_this.plotFetchedData(fetchedMetricData,metricRequest.metricDataQueries,fetchedBaselineData)}):(_this.currentBaselineData=[],_this.plotFetchedData(fetchedMetricData,metricRequest.metricDataQueries))})},MetricBrowserController.prototype.onRefresh=function(){this.fetchData()},MetricBrowserController.prototype.updateTimeRangeInUrl=function(){URLUtil.setParamInUrl(UrlConstants.TIME_RANGE,TimeRangeService.instance().convertForUrl(this.timeRange))},MetricBrowserController.prototype.clearGraph=function(){this.metricLegendOptions=[],this.chartConfig.series=[],this.metricsAddedToChart=[],URLUtil.setParamInUrl(UrlConstants.METRICS,null)},MetricBrowserController.prototype.getMetricTreeStyles=function(){return _.extend(this.getMainViewVerticalStyles(),{width:this.showMetricTree?MetricBrowserController.METRIC_TREE_WIDTH+"px":0})},MetricBrowserController.prototype.getNameColumnWidth=function(){return $(".ads-legend-header .ads-name-column").width()},MetricBrowserController.prototype.getMainViewStyles=function(){var modalWidth=$(".adsMetricDialog .modal-body").width(),mainViewWidth=this.showMetricTree?modalWidth-MetricBrowserController.METRIC_TREE_WIDTH:modalWidth;return this.gridWidth=mainViewWidth,_.extend(this.getMainViewVerticalStyles(),{left:this.showMetricTree?MetricBrowserController.METRIC_TREE_WIDTH+"px":0,width:mainViewWidth})},MetricBrowserController.prototype.getMetricLegendHeight=function(){return $(".ads-metric-browser-legend").height()-$(".ads-legend-header").height()},MetricBrowserController.prototype.getMainViewVerticalStyles=function(){var headerAreaHeight=$(".adsMetricDialog .modal-header").outerHeight()+$(".adsMetricDialog .ads-toolbar-new-container").outerHeight();return{top:headerAreaHeight,height:$(".adsMetricDialog .modal-body").outerHeight()-headerAreaHeight}},MetricBrowserController.prototype.toggleMetricTree=function(){this.showMetricTree=!this.showMetricTree,this.reLayoutChart(),URLUtil.setParamInUrl(UrlConstants.VIEW_TREE,String(this.showMetricTree))},MetricBrowserController.prototype.togglePlotPoints=function(selected){this.metricLegendOptions.forEach(function(legendRow){Util.isDefAndNotNull(legendRow.chartData)&&legendRow.chartData.setPlotPoints(selected)}),URLUtil.setParamInUrl(UrlConstants.SHOW_POINTS,String(selected))},MetricBrowserController.prototype.showCustomTimeRange=function(){return this.timeRange&&this.timeRange.type===TimeRangeSpecifierType.BETWEEN_TIMES},MetricBrowserController.prototype.onCopyMetricBrowserLinkToClipboard=function(){WebUtil.copyToClipboard(WebUtil.getDeepLinkFromFragment(this.getCurrentUrlParams()))},MetricBrowserController.prototype.exportCSV=function(series){var _this=this,metricRequest={};metricRequest.metricDataQueries=[];for(var i=0;i<series.length;i++)metricRequest.metricDataQueries.push(series[i].metricQueryScope);metricRequest.timeRangeSpecifier=this.timeRange,this.metricBrowserUiService.getMetricCsvData(metricRequest).then(function(response){for(var csvString="",filename=_this.application.name,i=0;i<series.length;i++){csvString+=series[i].name+"\n",csvString+=_this.getString("ms_metricDataCsvDataNames")+"\n";for(var j=0;j<response[i].length;j++)csvString+=response[i][j]+"\n";csvString+="\n"}1===series.length&&(filename+=MetricBrowserController.METRIC_FULL_PATH_DELIMITER+series[0].name),DialogService.instance().openDialogAsync({controllerPath:"app/view/common/dialogs/ExportDialog/ViewExportedTextController",templateUrl:"app/view/common/dialogs/ExportDialog/ViewExportedText.html",data:{value:csvString,title:_this.getString("ms_exportMetricData"),fileName:filename}})})},MetricBrowserController.prototype.copyFullPath=function(){var treeItem=this.selectedTreeRow.raw;WebUtil.copyToClipboard(this.getMetricFullPath(treeItem.metricId,treeItem.type,treeItem.entityId))},MetricBrowserController.prototype.getMetricIdentifierString=function(metricId,entityType,entityId){return Util.isValidId(metricId)&&Util.isValidId(entityId)&&!StringUtils.isNullOrEmptyString(entityType)?entityType+"."+entityId+"."+metricId:""},MetricBrowserController.prototype.preprocessData=function(data,parentPath){var _this=this;if(data&&(data.metricPath=parentPath?parentPath+MetricBrowserController.METRIC_FULL_PATH_DELIMITER+data.name:data.name,this.metricDisplayNameMap[this.getMetricIdentifierString(data.metricId,data.type,data.entityId)]=data.metricPath,this.metricPathToTreeItemMap[data.metricPath]=data,data.qtip=data.metricPath,data.hasChildren&&(data.fetchChildren=function(node,paths){return _this.fetchChildren(node,paths)}),data.children&&0!=data.children.length))for(var j=0;j<data.children.length;j++)this.preprocessData(data.children[j],data.metricPath)},MetricBrowserController.prototype.getNextColor=function(){return this.chartColors[++this.colorIndex%this.chartColors.length]},MetricBrowserController.prototype.setChartLinear=function(){this.chartConfig.yAxis.type=AxisTypes.LINEAR,this.chartConfig.yAxis.min=0,Util.isDefAndNotEmptyArray(this.currentMetricData)&&(Util.isDefAndNotEmptyArray(this.currentBaselineData)?this.plotFetchedData(this.currentMetricData,this.currentQueries,this.currentBaselineData):this.plotFetchedData(this.currentMetricData,this.currentQueries))},MetricBrowserController.prototype.setChartLog=function(){this.chartConfig.yAxis.type=AxisTypes.LOGARITHMIC,this.chartConfig.yAxis.min=1},MetricBrowserController.prototype.plotFetchedData=function(fetchedMetricData,queries,fetchedBaselineData){this.chartConfig.series=[];for(var i=0;i<fetchedMetricData.length;i++){var legendRow=this.metricLegendOptions[i];if(Util.isDefAndNotNull(legendRow.chartData)){var chartDataConfig=new MetricChartDataConfig;chartDataConfig.seriesTitle=this.getMetricFullPath(fetchedMetricData[i].metricId,queries[i].entityType,queries[i].entityId),chartDataConfig.showMarkers=this.showPoints,Util.isDefAndNotNull(legendRow.chartData.metricSeries)&&(chartDataConfig.observedVisible=legendRow.chartData.metricSeries.value.visible,chartDataConfig.minimumVisible=legendRow.chartData.metricSeries.min.visible,chartDataConfig.maximumVisible=legendRow.chartData.metricSeries.max.visible,chartDataConfig.sumVisible=legendRow.chartData.metricSeries.sum.visible,chartDataConfig.countVisible=legendRow.chartData.metricSeries.count.visible),chartDataConfig.baselineVisible=Util.isDefAndNotNull(legendRow.chartData.metricSeries)&&!!legendRow.chartData.metricSeries.base&&legendRow.chartData.metricSeries.base.visible;var chartData=MetricChartData.getSeriesFromMetricData(fetchedMetricData[i],fetchedBaselineData?fetchedBaselineData[i]:null,chartDataConfig);Util.isDefAndNotNull(chartData.metricSeries)&&(chartData.setColor(ChartUtil.decimalToHex(parseInt(legendRow.color))),legendRow.chartData=chartData,this.chartConfig.series.push(chartData.metricSeries.value),this.chartConfig.series.push(chartData.metricSeries.min),this.chartConfig.series.push(chartData.metricSeries.max),this.chartConfig.series.push(chartData.metricSeries.sum),this.chartConfig.series.push(chartData.metricSeries.count),this.chartConfig.series.push(chartData.metricSeries.base))}}this.showInProgressIndicator=!1},MetricBrowserController.prototype.onAxisUpdated=function(){this.chartObject.yAxis[0].update(this.chartConfig.yAxis),URLUtil.setParamInUrl(UrlConstants.AXIS,this.plotMode)},MetricBrowserController.prototype.addMetricTreeItemToChart=function(treeItem){var _this=this;if(!Util.isUndefOrNull(treeItem)&&!this.isMetricAddedToChart(this.getMetricIdentifierString(treeItem.metricId,treeItem.type,treeItem.entityId))){var metricRequest={},queryScope={};queryScope.metricId=treeItem.metricId,queryScope.entityId=treeItem.entityId,queryScope.entityType=treeItem.type,metricRequest.metricDataQueries=[queryScope],metricRequest.timeRangeSpecifier=this.timeRange,metricRequest.metricBaseline=this.baselineConfig.selectedBaseline?this.baselineConfig.selectedBaseline.id:null,metricRequest.maxSize=this.gridWidth,this.metricBrowserUiService.getMetricData(metricRequest).then(function(metricData){return _this.currentMetricData.push(metricData[0]),_this.currentQueries.push(queryScope),metricRequest.metricBaseline?_this.metricBrowserUiService.getMetricBaselineData(metricRequest).then(function(baselineData){_this.currentBaselineData.push(baselineData[0]),_this.addMetric(metricData[0],treeItem.type,treeItem.entityId,baselineData[0])}):void _this.addMetric(metricData[0],treeItem.type,treeItem.entityId)})}},MetricBrowserController.prototype.isMetricAddedToChart=function(metricIdentifier){return Util.isOneOf(metricIdentifier,this.metricsAddedToChart)},MetricBrowserController.prototype.addMetric=function(metricData,entityType,entityId,baselineData){var metricIdentifier=this.getMetricIdentifierString(metricData.metricId,entityType,entityId);if(!(Util.isUndefOrNull(metricData)||StringUtils.isNullOrEmptyString(metricIdentifier)||this.isMetricAddedToChart(metricIdentifier))){var chartDataConfig=new MetricChartDataConfig;chartDataConfig.seriesTitle=this.getMetricFullPath(metricData.metricId,entityType,entityId),chartDataConfig.showMarkers=this.showPoints,chartDataConfig.observedVisible=this.defaultSeriesVisibilityMap[this.observedByDefault],chartDataConfig.minimumVisible=this.defaultSeriesVisibilityMap[this.minimumByDefault],chartDataConfig.maximumVisible=this.defaultSeriesVisibilityMap[this.maximumByDefault],chartDataConfig.baselineVisible=this.defaultSeriesVisibilityMap[this.baselineByDefault];
var chartData=MetricChartData.getSeriesFromMetricData(metricData,baselineData,chartDataConfig),nextColor=this.getNextColor();if(this.metricLegendOptions.push({name:this.getMetricFullPath(metricData.metricId,entityType,entityId),color:ChartUtil.colorToHex(nextColor),chartData:chartData,metricQueryScope:{metricId:metricData.metricId,entityId:entityId,entityType:entityType}}),Util.isDefAndNotNull(chartData.metricSeries)&&(chartData.setColor(nextColor),this.chartConfig.series.push(chartData.metricSeries.value),this.chartConfig.series.push(chartData.metricSeries.min),this.chartConfig.series.push(chartData.metricSeries.max),this.chartConfig.series.push(chartData.metricSeries.sum),this.chartConfig.series.push(chartData.metricSeries.count),chartData.metricSeries.base&&this.chartConfig.series.push(chartData.metricSeries.base)),entityType&&Util.isValidId(entityId)){var url=URLParams.getCurrentUrlParams(),metricList=url.metrics()?url.metrics().split(","):[];metricIdentifier&&!Util.isOneOf(metricIdentifier,metricList)&&(metricList.push(metricIdentifier),URLUtil.setParamInUrl(UrlConstants.METRICS,metricList.join(",")))}this.metricsAddedToChart.push(metricIdentifier)}},MetricBrowserController.prototype.removeMetric=function(series,index){this.chartConfig.series=this.chartConfig.series.filter(function(el){return-1===el.name.indexOf(series.name)}),this.metricLegendOptions.splice(index,1),Util.remove(this.metricsAddedToChart,this.getMetricIdentifierString(series.metricQueryScope.metricId,series.metricQueryScope.entityType,series.metricQueryScope.entityId)),Util.removeAt(this.currentMetricData,index),Util.removeAt(this.currentQueries,index),Util.removeAt(this.currentBaselineData,index);var url=URLParams.getCurrentUrlParams(),metricList=url.metrics().split(",");metricList.splice(index,1),Util.isDefAndNotEmptyArray(metricList)?URLUtil.setParamInUrl(UrlConstants.METRICS,metricList.join(",")):URLUtil.setParamInUrl(UrlConstants.METRICS,null)},MetricBrowserController.prototype.handleColorChange=function(legendRow){Util.isDefAndNotNull(legendRow.chartData)&&legendRow.chartData.setColor(ChartUtil.decimalToHex(parseInt(legendRow.color)))},MetricBrowserController.prototype.setupChartOptions=function(){var url=URLParams.getCurrentUrlParams();!url.axis()||url.axis()!==MetricBrowserController.PLOT_MODE_LINEAR&&url.axis()!==MetricBrowserController.PLOT_MODE_LOG||(this.plotMode=url.axis()),url.showPoints()&&(this.showPoints=Util.parseBoolean(url.showPoints()));var self=this;this.chartConfig={credits:!1,chart:{events:{load:function(){self.chartObject=this,self.reLayoutChart()}},backgroundColor:"transparent",animate:!1,borderRadius:0,type:"spline",zoomType:"x"},legend:{enabled:!1},title:{text:null},loading:!1,series:[],plotOptions:{spline:{marker:{enabled:self.showPoints}}},tooltip:{formatter:function(){return self.chartTooltipFormatter(this.point)},style:{whiteSpace:"normal",width:"400px"}},xAxis:{type:"datetime",showLastLabel:!0,minTickInterval:6e4},yAxis:{min:0,minRange:.1,minorTickInterval:.1,gridLineDashStyle:"solid",gridLineColor:UiConfig.getColor("CARD_CHART_GRID_LINE_COLOR"),lineColor:UiConfig.getColor("CARD_CHART_YAXIS_LINE_COLOR"),lineWidth:0,showLastLabel:!0,plotBands:[{color:UiConfig.getColor("MAIN_DASH_PERF_CHART_BACKGROUND_COLOR"),from:-99999999,to:99999999999}],labels:{style:{color:UiConfig.getColor("GLOBAL_FONT_COLOR")}},title:{text:"",style:{color:UiConfig.getColor("GLOBAL_FONT_COLOR")}}}},this.plotMode===MetricBrowserController.PLOT_MODE_LOG?this.setChartLog():this.setChartLinear()},MetricBrowserController.prototype.chartTooltipFormatter=function(dataPoint){var tooltip="",seriesNameParams=dataPoint.series.name.split(":"),metricTypeDisplay=seriesNameParams[0].trim(),metricNameDisplay=seriesNameParams[1].trim(),metricValueDisplay=ViewUtil.formatNumber(dataPoint.y);return tooltip+=DateTimeUtil.getDateTimeString(dataPoint.x)+'<br/><span style="font-weight:bold">'+metricNameDisplay+'</span><br/><span style="color:'+dataPoint.series.color+'">'+metricTypeDisplay+"</span>: <span>"+metricValueDisplay+"</span>",dataPoint.series.chart.series.forEach(function(series){if(series.visible&&series.name!==dataPoint.series.name&&series.hasOwnProperty("yData")){var dataPointNameParams=dataPoint.series.name.split(":"),seriesNameParams=series.name.split(":"),seriesMetricValue=series.yData[dataPoint.index];seriesMetricValue===dataPoint.y?(seriesNameParams[1].trim()!==metricNameDisplay&&(metricNameDisplay=seriesNameParams[1].trim(),tooltip+='<br/><span style="font-weight:bold">'+metricNameDisplay+"</span>"),tooltip+='<br/><span style="color:'+series.color+'">'+seriesNameParams[0].trim()+"</span>: <span>"+metricValueDisplay+"</span>"):"Baseline"!==seriesNameParams[0].trim()&&"Observed"===dataPointNameParams[0].trim()&&dataPointNameParams[1].trim()===seriesNameParams[1].trim()&&(tooltip+='<br/><span style="color:'+series.color+'">'+seriesNameParams[0].trim()+"</span>: <span>"+ViewUtil.formatNumber(seriesMetricValue)+"</span>")}}),tooltip},MetricBrowserController.prototype.setBaselineFromUrl=function(){var _this=this,url=URLParams.getCurrentUrlParams();return!url.baseline()&&UserService.instance().getGeneralUserPreferenceBooleanValue(UserService.AUTO_SELECT_COMPARE_VS_DEFAULT_BASELINE)?BaselineUiService.instance().getDefaultBaseline(this.application.id).then(function(result){_this.baselineConfig={applicationId:Util.parseInt(URLParams.getCurrentUrlParams().applicationId()),showTitle:!1,showAllBaselines:!0,defaultBaseline:result,selectedBaseline:result,navLocation:null}}):InjectorService.instance().$q().when(this.baselineConfig={applicationId:Util.parseInt(URLParams.getCurrentUrlParams().applicationId()),showTitle:!1,showAllBaselines:!0,defaultBaseline:url.baseline()?{id:Util.parseInt(url.baseline())}:null,selectedBaseline:url.baseline()?{id:Util.parseInt(url.baseline())}:null,navLocation:null})},MetricBrowserController.prototype.setTimeRangeFromUrl=function(){var url=URLParams.getCurrentUrlParams();this.timeRange=url.timeRange()?TimeRangeService.instance().createTimeRange(url.timeRange(),"."):TimeRangeService.instance().currentTimeRange},MetricBrowserController.prototype.setupMetricBrowserViewFromUrl=function(){var _this=this,url=URLParams.getCurrentUrlParams();if(url.metrics()){var metrics=StringUtils.convertCommaSeparatedStringToArray(url.metrics()),metricRequest={};if(metricRequest.timeRangeSpecifier=this.timeRange,metricRequest.metricDataQueries=[],metricRequest.metricBaseline=parseInt(url.baseline())||0,metricRequest.maxSize=this.gridWidth,metrics.forEach(function(metric){var queryScope=_this.getMetricQueryScopeFromIdentifier(metric);Util.isDefAndNotNull(queryScope)&&metricRequest.metricDataQueries.push(queryScope)}),!Util.isDefAndNotEmptyArray(metricRequest.metricDataQueries))return void(this.showInProgressIndicator=!1);this.metricBrowserUiService.getMetricData(metricRequest).then(function(metricData){if(metricRequest.metricBaseline)_this.metricBrowserUiService.getMetricBaselineData(metricRequest).then(function(baselineData){for(var i=0;i<metricData.length;i++)_this.addMetric(metricData[i],metricRequest.metricDataQueries[i].entityType,metricRequest.metricDataQueries[i].entityId,baselineData[i]);_this.showInProgressIndicator=!1});else{for(var i=0;i<metricData.length;i++)_this.addMetric(metricData[i],metricRequest.metricDataQueries[i].entityType,metricRequest.metricDataQueries[i].entityId);_this.showInProgressIndicator=!1}})}else this.showInProgressIndicator=!1},MetricBrowserController.prototype.getMetricQueryScopeFromIdentifier=function(metricIdentifier){if(StringUtils.isNullOrEmptyString(metricIdentifier))return null;var metricTokens=metricIdentifier.split(".");if(3===metricTokens.length){var metricQuery={};return metricQuery.metricId=Number(metricTokens[2]),metricQuery.entityId=Number(metricTokens[1]),metricQuery.entityType=metricTokens[0],metricQuery}return null},MetricBrowserController.prototype.setupPlotToggles=function(){var _this=this;this.plotToggleItems=[],this.plotToggleItems.push(ToolbarToggleDirective.createToggleItem("images/metricBrowser/logarithmic_gray.svg","images/metricBrowser/logarithmic_blue.svg","images/metricBrowser/logarithmic_white.svg",function(){_this.setChartLog(),_this.plotMode=MetricBrowserController.PLOT_MODE_LOG,_this.onAxisUpdated()},this.plotMode===MetricBrowserController.PLOT_MODE_LOG,this.getString("ms_logTooltip"))),this.plotToggleItems.push(ToolbarToggleDirective.createToggleItem("images/metricBrowser/linear_gray.svg","images/metricBrowser/linear_blue.svg","images/metricBrowser/linear_white.svg",function(){_this.setChartLinear(),_this.plotMode=MetricBrowserController.PLOT_MODE_LINEAR,_this.onAxisUpdated()},this.plotMode===MetricBrowserController.PLOT_MODE_LINEAR,this.getString("ms_linearTooltip")))},MetricBrowserController.prototype.setupDefaultSeriesVisibilityMap=function(){Util.isUndefOrNull(UserService.instance().getGeneralUserPreferenceValue(this.observedByDefault))?(this.setDefaultSeriesVisibility(!0,this.observedByDefault),this.defaultSeriesVisibilityMap[this.observedByDefault]=!0):this.defaultSeriesVisibilityMap[this.observedByDefault]=UserService.instance().getGeneralUserPreferenceBooleanValue(this.observedByDefault),this.defaultSeriesVisibilityMap[this.minimumByDefault]=UserService.instance().getGeneralUserPreferenceBooleanValue(this.minimumByDefault),this.defaultSeriesVisibilityMap[this.maximumByDefault]=UserService.instance().getGeneralUserPreferenceBooleanValue(this.maximumByDefault),this.defaultSeriesVisibilityMap[this.baselineByDefault]=UserService.instance().getGeneralUserPreferenceBooleanValue(this.baselineByDefault)},MetricBrowserController.prototype.setupContextMenuOptions=function(){this.contextMenuOptions={disableDefaultContextMenu:!0,items:[{text:this.getString("ms_copyFullPath"),handler:this.copyFullPath.bind(this),hidden:!1},{text:this.getString("ms_copyRestUrl"),handler:this.copyRestUrl.bind(this),hidden:!1}]}},MetricBrowserController.prototype.setupDragAndDropOnTreeNodes=function(){var _this=this;ViewUtil.doAfterDigest(function(){var draggableZone=$("#ads-metric-browser-left-panel .x-grid-cell:not(:has(.x-tree-expander))"),droppableZone=$("#ads-metric-chart"),droppableZoneClass="ads-dragdrop-glow",removeDroppableZoneClass=function(){InjectorService.instance().$timeout()(function(){droppableZone.removeClass(droppableZoneClass)},300)};draggableZone.attr("draggable","true").on(MouseEvents.DRAG_START,function(event){if(event=event.originalEvent||event,event&&event.target){var pathElement=$(event.target).find(".ads-metric-tree-node-path")[0];_this.metricDragged=pathElement&&pathElement.innerText?pathElement.innerText.trim():pathElement&&pathElement.textContent?pathElement.textContent.trim():""}event.dataTransfer.setData("text/plain",""),event.stopPropagation()}),droppableZone.on(MouseEvents.DRAG_ENTER,function(event){droppableZone.addClass(droppableZoneClass),event.stopPropagation()}).on(MouseEvents.DRAG_OVER,function(event){event.preventDefault()}).on(MouseEvents.DRAG_LEAVE,function(event){removeDroppableZoneClass(),event.stopPropagation()}).on(MouseEvents.DROP,function(event){_this.addMetricTreeItemToChart(_this.metricPathToTreeItemMap[_this.metricDragged]),_this.metricDragged="",removeDroppableZoneClass(),event.stopPropagation()})})},MetricBrowserController.prototype.getMetricFullPath=function(metricId,entityType,entityId){var metricIdentifier=this.getMetricIdentifierString(metricId,entityType,entityId);return!_.isEmpty(this.metricDisplayNameMap)&&this.metricDisplayNameMap[metricIdentifier]?this.metricDisplayNameMap[metricIdentifier]:MetricUtil.NO_DATA_DISPLAY_STRING},MetricBrowserController.prototype.copyRestUrl=function(){var row=this.selectedTreeRow,treeItem=row.raw,urlBase=WebUtil.getCurrentURLIncludingController()+"/rest/applications/"+this.application.name;urlBase+=row.isLeaf()?"/metric-data?":"/metrics?",urlBase=encodeURI(urlBase);var nvps=[];nvps.push({name:"metric-path",value:this.getMetricFullPath(treeItem.metricId,treeItem.type,treeItem.entityId)}),this.timeRange.type===TimeRangeSpecifierType.BETWEEN_TIMES&&this.timeRange.startTime&&this.timeRange.endTime?(nvps.push({name:"time-range-type",value:TimeRangeSpecifierType.BETWEEN_TIMES}),nvps.push({name:"start-time",value:this.timeRange.startTime.getTime().toString()}),nvps.push({name:"end-time",value:this.timeRange.endTime.getTime().toString()})):(nvps.push({name:"time-range-type",value:TimeRangeSpecifierType.BEFORE_NOW}),nvps.push({name:"duration-in-mins",value:this.timeRange.durationInMinutes.toString()}));for(var urlParams=[],i=0;i<nvps.length;i++)urlParams.push(nvps[i].name+"="+encodeURIComponent(nvps[i].value));var url=urlBase+urlParams.join("&");url=url.replace(/\(/g,"%28").replace(/\)/g,"%29"),WebUtil.copyToClipboard(url)},MetricBrowserController.prototype.reLayoutChart=function(){var _this=this;ViewUtil.doAfterDigest(function(){ViewUtil.doAfterDigest(function(){_this.chartObject&&_this.chartObject.reflow()})})},MetricBrowserController.prototype.sortMetricTreeItems=function(items){var _this=this,containerNodes=[],leafNodes=[];return items.forEach(function(item){item.hasChildren?(item.children=_this.sortMetricTreeItems(item.children),containerNodes.push(item)):leafNodes.push(item)}),Util.sortByName(containerNodes).concat(Util.sortByName(leafNodes))},MetricBrowserController.prototype.setupWatchers=function(){var _this=this;this.$scope.$watch("controller.timeRange",function(){_this.timeRange&&(_this.updateTimeRangeInUrl(),_this.fetchData())}),this.$scope.$on(TimeRangeService.TIMERANGE_AUTOREFRESH_EVENT,function(){_this.fetchData()}),this.$scope.$on(EventConstants.UEV_LAYOUT_CHANGED,function(){_this.reLayoutChart()}),this.$scope.$on(BaselineSelectorChangeEvent.UEV_BASELINE_SELECTOR_CHANGE,function(event,args){args.selectedBaseline?(_this.baselineConfig.selectedBaseline=args.selectedBaseline,URLUtil.setParamInUrl(UrlConstants.BASELINE,_this.baselineConfig.selectedBaseline.id)):URLUtil.setParamInUrl(UrlConstants.BASELINE,null),_this.fetchData(),event.stopPropagation()})},MetricBrowserController.PLOT_MODE_LINEAR="linear",MetricBrowserController.PLOT_MODE_LOG="logarithmic",MetricBrowserController.METRIC_FULL_PATH_DELIMITER="|",MetricBrowserController.METRIC_TREE_WIDTH=312,MetricBrowserController.$inject=["$scope","dialogData","metricBrowserUiService","$modalInstance"],MetricBrowserController}(DialogControllerBase);return MetricBrowserController}),require(["app/view/common/metricBrowser/MetricBrowserViewService","app/view/common/metricBrowser/MetricBrowserController"]),define("app/view/common/metricBrowser/MetricBrowserModuleCode",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},FloatingDialogService=function(_super){function FloatingDialogService($location,$http,navigationService,notificationService,resourceManager,$templateCache,$compile,$controller){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.$http=$http,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.$templateCache=$templateCache,this.$compile=$compile,this.$controller=$controller,this.$http=$http,this.$templateCache=$templateCache,this.$compile=$compile}return __extends(FloatingDialogService,_super),FloatingDialogService.prototype.spawnDialog=function(scope,options,controller,controllerParams){var myself=this,dialog=null,theWindow=$(window),dialogOptions={title:options.title,height:options.height||.8*theWindow.height(),width:options.width||.8*theWindow.width(),layout:"fit",html:"",border:!1,modal:!1,maximizable:!0,minimizable:!1,draggable:!0,resizable:!0};if(1==options.modal&&(dialogOptions.modal=!0,dialogOptions.maximizable=!1,dialogOptions.draggable=!1,dialogOptions.resizable=!1),dialog=Ext.create("Ext.window.Window",dialogOptions),dialog.show(),void 0!=controller){var dialogControl={setTitle:function(title){dialog.setTitle(title)}};scope=scope.$new(),controllerParams=void 0!=controllerParams?$.extend(controllerParams,{$scope:scope,dialogControl:dialogControl}):{$scope:scope,dialogControl:dialogControl},this.$controller(controller,controllerParams)}this.$http.get(options.partial,{cache:this.$templateCache}).success(function(response){dialog.update(response,!1,function(){myself.$compile(angular.element(dialog.getEl().dom).contents())(scope)})}).error(function(){}),1==options.modal&&dialog.mon(Ext.getBody(),"click",function(){dialog.close()},dialog,{delegate:".x-mask"});var dialogDestructor=function(){void 0!=dialog&&null!=dialog&&dialog.destroy()};return dialogDestructor},FloatingDialogService.$inject=["$location","$http","navigationService","notificationService","resourceManager","$templateCache","$compile","$controller"],FloatingDialogService}(ViewServiceBase);appdynamicsModule.service("floatingDialogService",FloatingDialogService),define("app/view/services/FloatingDialogService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EntityViewService=function(_super){function EntityViewService($location,navigationService,notificationService,resourceManager,injectorService){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.injectorService=injectorService}return __extends(EntityViewService,_super),EntityViewService.prototype.viewEntity=function(appID,entityType,entityID){switch(entityType){case EntityType.RULE:ADLoggerService.warn("todo: need to open RULE modal");break;case EntityType.EVENT:ADLoggerService.warn("todo: need to open EVENT modal");break;case EntityType.POLICY:var flashService=this.injectorService.flashService();flashService.viewPolicyTemplateDetails(appID,entityID);break;case EntityType.APPLICATION:var applicationViewService=this.injectorService.applicationViewService();applicationViewService.viewApplicationDashboard(entityID);break;case EntityType.APPLICATION_COMPONENT:ComponentViewService.instance().viewComponent(appID,entityID);break;case EntityType.APPLICATION_COMPONENT_NODE:NodeViewService.instance().viewNode(appID,entityID);break;case EntityType.BUSINESS_TRANSACTION:var businessTransactionViewService=this.injectorService.businessTransactionViewService();businessTransactionViewService.viewBusinessTransaction(appID,entityID);break;default:ADLoggerService.warn("EntityViewService: The entity type"+entityType+" is not yet supported.")}},EntityViewService.$inject=["$location","navigationService","notificationService","resourceManager","injectorService"],EntityViewService}(ViewServiceBase);adComponentsModule.service("entityViewService",EntityViewService),define("app/view/services/EntityViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AgentSettingsViewService=function(_super){function AgentSettingsViewService($location,navigationService,notificationService,resourceManager){_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager}return __extends(AgentSettingsViewService,_super),AgentSettingsViewService.instance=function(){return AngularUtil.getADInjector().get(AgentSettingsViewService.SERVICE_NAME)},AgentSettingsViewService.prototype.viewAppServerAgents=function(){this.viewLocation(NavigationDataConstants.SETTINGS_AGENTS)},AgentSettingsViewService.prototype.viewMachineAgents=function(){this.viewLocation(NavigationDataConstants.SETTINGS_MACHINE_AGENTS)},AgentSettingsViewService.SERVICE_NAME="agentSettingsViewService",AgentSettingsViewService.$inject=["$location","navigationService","notificationService","resourceManager"],AgentSettingsViewService}(ViewServiceBase);adComponentsModule.service(AgentSettingsViewService.SERVICE_NAME,AgentSettingsViewService),define("app/view/settings/AgentSettingsViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AccountUiService=function(_super){function AccountUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AccountUiService,_super),AccountUiService.instance=function(){return AngularUtil.getADInjector().get("accountUiService")},AccountUiService.prototype.getLogoutURL=function(){var path="restui/account/logoutURL",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountUiService","getLogoutURL",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountUiService.prototype.getLogoutURL_response=function(response){return response},AccountUiService.prototype.testNotificationConfig=function(arg0,recipient){var path="restui/account/notificationConfig/test/"+recipient,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountUiService","testNotificationConfig",path,[arg0,recipient]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountUiService.prototype.testNotificationConfig_response=function(response){return response},AccountUiService.prototype.getNotificationConfig=function(){var path="restui/account/notificationConfig",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountUiService","getNotificationConfig",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountUiService.prototype.getNotificationConfig_response=function(response){return response},AccountUiService.prototype.setNotificationConfig=function(arg0){var path="restui/account/notificationConfig",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountUiService","setNotificationConfig",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountUiService.prototype.describe=function(){var path="restui/account/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AccountUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AccountUiService.prototype.describe_response=function(response){return response},AccountUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AccountUiService}(ControllerUiServiceBase);adComponentsModule.service("accountUiService",AccountUiService),define("lib/controller/services/admin/AccountUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ApplicationUiService=function(_super){function ApplicationUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(ApplicationUiService,_super),ApplicationUiService.instance=function(){return AngularUtil.getADInjector().get("applicationUiService")},ApplicationUiService.prototype.getInstrumentationLevel=function(applicationId){var path="restui/applicationManagerUiBean/instrumentationLevel/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getInstrumentationLevel",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.getInstrumentationLevel_response=function(response){return response},ApplicationUiService.prototype.setInstrumentationLevel=function(applicationId,instrumentationLevel){var path="restui/applicationManagerUiBean/instrumentationLevel/"+applicationId+"/"+instrumentationLevel,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","setInstrumentationLevel",path,[applicationId,instrumentationLevel]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.deleteApplicationByName=function(applicationName){var path="restui/applicationManagerUiBean/delete/"+applicationName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","deleteApplicationByName",path,[applicationName]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.getApmApplications=function(){var path="restui/applicationManagerUiBean/applications",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getApmApplications",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.getApmApplications_response=function(response){return response},ApplicationUiService.prototype.getApplicationsAllTypes=function(){var path="restui/applicationManagerUiBean/getApplicationsAllTypes",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getApplicationsAllTypes",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["analyticsApplication.runningSince","analyticsApplication.createdOn","analyticsApplication.modifiedOn","dbMonApplication.runningSince","dbMonApplication.createdOn","dbMonApplication.modifiedOn","simApplication.runningSince","simApplication.createdOn","simApplication.modifiedOn"]),response})},ApplicationUiService.prototype.getApplicationsAllTypes_response=function(response){return response},ApplicationUiService.prototype.getBackends=function(applicationId){var path="restui/applicationManagerUiBean/backends/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getBackends",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.getBackends_response=function(response){return response},ApplicationUiService.prototype.getServerHomeData=function(applicationId){var path="restui/applicationManagerUiBean/serverSummary/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getServerHomeData",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.getServerHomeData_response=function(response){return response},ApplicationUiService.prototype.buildAppTreeJavaTiersOnly=function(applicationId){var path="restui/applicationManagerUiBean/appTreeJava/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","buildAppTreeJavaTiersOnly",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.buildAppTreeJavaTiersOnly_response=function(response){return response},ApplicationUiService.prototype.getApplicationComponentInfo=function(applicationId){var path="restui/applicationManagerUiBean/applicationComponentInfo/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getApplicationComponentInfo",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.getApplicationComponentInfo_response=function(response){return response},ApplicationUiService.prototype.getApplicationById=function(applicationId){var path="restui/applicationManagerUiBean/applicationById?applicationId="+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getApplicationById",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["runningSince","createdOn","modifiedOn"]),response})},ApplicationUiService.prototype.getApplicationById_response=function(response){return response},ApplicationUiService.prototype.getApplicationByName=function(applicationName){var path="restui/applicationManagerUiBean/applicationByName?applicationName="+applicationName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getApplicationByName",path,[applicationName]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));
var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["runningSince","createdOn","modifiedOn"]),response})},ApplicationUiService.prototype.getApplicationByName_response=function(response){return response},ApplicationUiService.prototype.getApplicationConfiguration=function(applicationId){var path="restui/applicationManagerUiBean/applicationConfiguration/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getApplicationConfiguration",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.getApplicationConfiguration_response=function(response){return response},ApplicationUiService.prototype.getAllApplicationComponents=function(applicationId){var path="restui/applicationManagerUiBean/applicationComponents/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getAllApplicationComponents",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.getAllApplicationComponents_response=function(response){return response},ApplicationUiService.prototype.getBusinessTransactionAndNodeHealthSummary=function(applicationId,timeRange){var path="restui/applicationManagerUiBean/applicationHealthSummary/"+applicationId+"?time-range="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getBusinessTransactionAndNodeHealthSummary",path,[applicationId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.getBusinessTransactionAndNodeHealthSummary_response=function(response){return response},ApplicationUiService.prototype.getBackend=function(backendId){var path="restui/applicationManagerUiBean/backend/"+backendId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getBackend",path,[backendId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.getBackend_response=function(response){return response},ApplicationUiService.prototype.test=function(){var path="restui/applicationManagerUiBean/test",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","test",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.test_response=function(response){return response},ApplicationUiService.prototype.getBackendInfo=function(applicationId){var path="restui/applicationManagerUiBean/backendInfo/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getBackendInfo",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.getBackendInfo_response=function(response){return response},ApplicationUiService.prototype.getApplicationComponentNodesThatDoNotSupportDevMode=function(applicationId){var path="restui/applicationManagerUiBean/applicationComponentNodesThatDoNotSupportDevMode/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","getApplicationComponentNodesThatDoNotSupportDevMode",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["appAgent.installTime","appAgent.lastStartTime","appAgent.agentVersionsHistory.changeDetectionTime","appAgent.agentRuntimeHistory.changeDetectionTime","appAgent.vmStartupOptionsHistory.changeDetectionTime","appAgent.vmSystemPropertiesHistory.changeDetectionTime","appAgent.environmentVariablesHistory.changeDetectionTime","appAgent.agentPropertiesHistory.changeDetectionTime"]),response})},ApplicationUiService.prototype.getApplicationComponentNodesThatDoNotSupportDevMode_response=function(response){return response},ApplicationUiService.prototype.setApplicationLevelAgentProperty=function(application,agentType,name,value,type){var path="restui/applicationManagerUiBean/setAgentProperty?application="+application+"&agent-type="+agentType+"&name="+name+"&value="+value+"&type="+type,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","setApplicationLevelAgentProperty",path,[application,agentType,name,value,type]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.describe=function(){var path="restui/applicationManagerUiBean/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationUiService.prototype.describe_response=function(response){return response},ApplicationUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],ApplicationUiService}(ControllerUiServiceBase);adComponentsModule.service("applicationUiService",ApplicationUiService),define("lib/controller/services/common/ApplicationUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ApplicationAdoptionUiService=function(_super){function ApplicationAdoptionUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(ApplicationAdoptionUiService,_super),ApplicationAdoptionUiService.instance=function(){return AngularUtil.getADInjector().get("applicationAdoptionUiService")},ApplicationAdoptionUiService.prototype.getApplicationAdoptionIndexForApplication=function(applicationName){var path="restui/adoption/application/"+applicationName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationAdoptionUiService","getApplicationAdoptionIndexForApplication",path,[applicationName]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationAdoptionUiService.prototype.getApplicationAdoptionIndexForApplication_response=function(response){return response},ApplicationAdoptionUiService.prototype.getApplicationAdoptionIndexForUnnamedApplication=function(arg0){var path="restui/adoption/unknownApplication",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationAdoptionUiService","getApplicationAdoptionIndexForUnnamedApplication",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationAdoptionUiService.prototype.getApplicationAdoptionIndexForUnnamedApplication_response=function(response){return response},ApplicationAdoptionUiService.prototype.getApplicationAdoptionIndexForEUMApplication=function(arg0,applicationId){var path="restui/adoption/getEUMApplications/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationAdoptionUiService","getApplicationAdoptionIndexForEUMApplication",path,[arg0,applicationId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationAdoptionUiService.prototype.getApplicationAdoptionIndexForEUMApplication_response=function(response){return response},ApplicationAdoptionUiService.prototype.renameMobileApplication=function(applicationId,appNewName){var path="restui/adoption/renameMobileApplication/"+applicationId+"?appNewName="+appNewName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationAdoptionUiService","renameMobileApplication",path,[applicationId,appNewName]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationAdoptionUiService.prototype.getJavaTourApplication=function(){var path="restui/adoption/getJavaTourApplication",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationAdoptionUiService","getJavaTourApplication",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["runningSince","createdOn","modifiedOn"]),response})},ApplicationAdoptionUiService.prototype.getJavaTourApplication_response=function(response){return response},ApplicationAdoptionUiService.prototype.describe=function(){var path="restui/adoption/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ApplicationAdoptionUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ApplicationAdoptionUiService.prototype.describe_response=function(response){return response},ApplicationAdoptionUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],ApplicationAdoptionUiService}(ControllerUiServiceBase);adComponentsModule.service("applicationAdoptionUiService",ApplicationAdoptionUiService),define("lib/controller/services/freemium/ApplicationAdoptionUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MetricBrowserUiService=function(_super){function MetricBrowserUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(MetricBrowserUiService,_super),MetricBrowserUiService.instance=function(){return AngularUtil.getADInjector().get("metricBrowserUiService")},MetricBrowserUiService.prototype.getFakeMetricData=function(arg0){var path="restui/metricBrowser/getFakeMetricData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricBrowserUiService","getFakeMetricData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dataTimeslices.startTime"]),response})},MetricBrowserUiService.prototype.getFakeMetricData_response=function(response){return response},MetricBrowserUiService.prototype.getMetricBaselineData=function(arg0){var path="restui/metricBrowser/getMetricBaselineData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricBrowserUiService","getMetricBaselineData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dataTimeslices.startTime"]),response})},MetricBrowserUiService.prototype.getMetricBaselineData_response=function(response){return response},MetricBrowserUiService.prototype.getMetricCsvData=function(arg0){var path="restui/metricBrowser/getMetricCsvData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricBrowserUiService","getMetricCsvData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MetricBrowserUiService.prototype.getMetricCsvData_response=function(response){return response},MetricBrowserUiService.prototype.getMetricTreeRoots=function(arg0,application){var path="restui/metricBrowser/"+application,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricBrowserUiService","getMetricTreeRoots",path,[arg0,application]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MetricBrowserUiService.prototype.getMetricTreeRoots_response=function(response){return response},MetricBrowserUiService.prototype.getMetricTreeRootsSpecifiedMetricsExpanded=function(arg0){var path="restui/metricBrowser/getTreeRootsForMetricsExpanded",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricBrowserUiService","getMetricTreeRootsSpecifiedMetricsExpanded",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MetricBrowserUiService.prototype.getMetricTreeRootsSpecifiedMetricsExpanded_response=function(response){return response},MetricBrowserUiService.prototype.getExpandedMetricTreeForNode=function(nodeId,agentType){var path="restui/metricBrowser/getExpandedMetricTreeForNode/"+nodeId+"/"+agentType,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricBrowserUiService","getExpandedMetricTreeForNode",path,[nodeId,agentType]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MetricBrowserUiService.prototype.getExpandedMetricTreeForNode_response=function(response){return response},MetricBrowserUiService.prototype.getMetricData=function(arg0){var path="restui/metricBrowser/getMetricData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricBrowserUiService","getMetricData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dataTimeslices.startTime"]),response})},MetricBrowserUiService.prototype.getMetricData_response=function(response){return response},MetricBrowserUiService.prototype.describe=function(){var path="restui/metricBrowser/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricBrowserUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MetricBrowserUiService.prototype.describe_response=function(response){return response},MetricBrowserUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],MetricBrowserUiService}(ControllerUiServiceBase);adComponentsModule.service("metricBrowserUiService",MetricBrowserUiService),define("lib/controller/services/common/metrics/MetricBrowserUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},IncidentsUiService=function(_super){function IncidentsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(IncidentsUiService,_super),IncidentsUiService.instance=function(){return AngularUtil.getADInjector().get("incidentsUiService")},IncidentsUiService.prototype.getIncidents=function(arg0,applicationId){var path="restui/incidents/application/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("IncidentsUiService","getIncidents",path,[arg0,applicationId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["incidents.evaluationStates.endTime","incidents.evaluationStates.startTime"]),response})},IncidentsUiService.prototype.getIncidents_response=function(response){return response},IncidentsUiService.prototype.describe=function(){var path="restui/incidents/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("IncidentsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},IncidentsUiService.prototype.describe_response=function(response){return response},IncidentsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],IncidentsUiService}(ControllerUiServiceBase);adComponentsModule.service("incidentsUiService",IncidentsUiService),define("lib/controller/services/common/IncidentsUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},BaselineUiService=function(_super){function BaselineUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(BaselineUiService,_super),BaselineUiService.instance=function(){return AngularUtil.getADInjector().get("baselineUiService")},BaselineUiService.prototype.getAllBaselines=function(applicationId){var path="restui/baselines/getAllBaselines/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BaselineUiService","getAllBaselines",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["fixedStartTime","fixedEndTime"]),response})},BaselineUiService.prototype.getAllBaselines_response=function(response){return response},BaselineUiService.prototype.getDefaultBaseline=function(applicationId){var path="restui/baselines/getDefaultBaseline/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BaselineUiService","getDefaultBaseline",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["fixedStartTime","fixedEndTime"]),response})},BaselineUiService.prototype.getDefaultBaseline_response=function(response){return response},BaselineUiService.prototype.describe=function(){var path="restui/baselines/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("BaselineUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},BaselineUiService.prototype.describe_response=function(response){return response},BaselineUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],BaselineUiService}(ControllerUiServiceBase);adComponentsModule.service("baselineUiService",BaselineUiService),define("lib/controller/services/common/BaselineUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EventsUiService=function(_super){function EventsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(EventsUiService,_super),EventsUiService.instance=function(){return AngularUtil.getADInjector().get("eventsUiService")},EventsUiService.prototype.getDefaultEventFilterViewData=function(){var path="restui/events/getDefaultEventFilterView",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getDefaultEventFilterViewData",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["application.runningSince","application.createdOn","application.modifiedOn"]),response})},EventsUiService.prototype.getDefaultEventFilterViewData_response=function(response){return response},EventsUiService.prototype.getEventsForSharedWarRoom=function(arg0,widgetGuid,token){var path="restui/events/getEventsForSharedWarRoom/query/"+widgetGuid+"/"+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getEventsForSharedWarRoom",path,[arg0,widgetGuid,token]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["queryCursor.timeRange.timeRange.endTime","queryCursor.timeRange.timeRange.startTime","queryCursor.timeRange.endTime","queryCursor.timeRange.startTime"]),response})},EventsUiService.prototype.getEventsForSharedWarRoom_response=function(response){return response},EventsUiService.prototype.getEventsForSharedDashboard=function(arg0,widgetGuid,token){var path="restui/events/sharedDashboard/query/"+widgetGuid+"/"+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getEventsForSharedDashboard",path,[arg0,widgetGuid,token]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["queryCursor.timeRange.timeRange.endTime","queryCursor.timeRange.timeRange.startTime","queryCursor.timeRange.endTime","queryCursor.timeRange.startTime"]),response})},EventsUiService.prototype.getEventsForSharedDashboard_response=function(response){return response},EventsUiService.prototype.simulateEvent=function(eventId,timeRangeString){var path="restui/events/eventSimulate/"+eventId+"?timeRangeString="+timeRangeString,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","simulateEvent",path,[eventId,timeRangeString]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["baseData.eventReactor.eventFilter.timeRange.timeRange.endTime","baseData.eventReactor.eventFilter.timeRange.timeRange.startTime","baseData.eventReactor.eventFilter.timeRange.endTime","baseData.eventReactor.eventFilter.timeRange.startTime"]),response})},EventsUiService.prototype.simulateEvent_response=function(response){return response},EventsUiService.prototype.getEventDetailsById=function(eventId,timeRangeString){var path="restui/events/eventDetails/"+eventId+"?timeRangeString="+timeRangeString,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getEventDetailsById",path,[eventId,timeRangeString]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["userComments.createdOn"]),response})},EventsUiService.prototype.getEventDetailsById_response=function(response){return response},EventsUiService.prototype.getEventFiltersMetaData=function(appId){var path="restui/events/eventFiltersMetaData/"+appId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getEventFiltersMetaData",path,[appId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["errors.createdOn","nodes.appAgent.installTime","nodes.appAgent.lastStartTime","nodes.appAgent.agentVersionsHistory.changeDetectionTime","nodes.appAgent.agentRuntimeHistory.changeDetectionTime","nodes.appAgent.vmStartupOptionsHistory.changeDetectionTime","nodes.appAgent.vmSystemPropertiesHistory.changeDetectionTime","nodes.appAgent.environmentVariablesHistory.changeDetectionTime","nodes.appAgent.agentPropertiesHistory.changeDetectionTime","businessTransactions.createdOn"]),response})},EventsUiService.prototype.getEventFiltersMetaData_response=function(response){return response},EventsUiService.prototype.getCorrelatedEventsForEventStreamUiItems=function(arg0,timeRangeString){var path="restui/events/correlatedEvents?timeRangeString="+timeRangeString,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getCorrelatedEventsForEventStreamUiItems",path,[arg0,timeRangeString]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EventsUiService.prototype.getCorrelatedEventsForEventStreamUiItems_response=function(response){return response},EventsUiService.prototype.getCorrelatedEventsForEvent=function(eventId,timeRangeString){var path="restui/events/correlatedEvents/event/"+eventId+"?timeRangeString="+timeRangeString,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getCorrelatedEventsForEvent",path,[eventId,timeRangeString]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EventsUiService.prototype.getCorrelatedEventsForEvent_response=function(response){return response},EventsUiService.prototype.getCorrelatedEventsForRSD=function(rsdId,timeRangeString){var path="restui/events/correlatedEvents/rsd/"+rsdId+"?timeRangeString="+timeRangeString,apiCall=null;
this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getCorrelatedEventsForRSD",path,[rsdId,timeRangeString]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EventsUiService.prototype.getCorrelatedEventsForRSD_response=function(response){return response},EventsUiService.prototype.getDiagnosticSessionEvents=function(arg0,appId){var path="restui/events/diagnosticSessionEvents/"+appId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getDiagnosticSessionEvents",path,[arg0,appId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EventsUiService.prototype.getDiagnosticSessionEvents_response=function(response){return response},EventsUiService.prototype.getEventReactorById=function(arg0){var path="restui/events/getEventReactorById",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getEventReactorById",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eventFilter.timeRange.timeRange.endTime","eventFilter.timeRange.timeRange.startTime","eventFilter.timeRange.endTime","eventFilter.timeRange.startTime"]),response})},EventsUiService.prototype.getEventReactorById_response=function(response){return response},EventsUiService.prototype.archiveEvents=function(arg0,timeRangeString){var path="restui/events/archive?timeRangeString="+timeRangeString,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","archiveEvents",path,[arg0,timeRangeString]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EventsUiService.prototype.addUserCommentForEvent=function(arg0,commentText){var path="restui/events/addEventComment?comment-text="+commentText,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","addUserCommentForEvent",path,[arg0,commentText]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:null!=arg0?arg0.toString():null,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn"]),response})},EventsUiService.prototype.addUserCommentForEvent_response=function(response){return response},EventsUiService.prototype.getAllEvents=function(){var path="restui/events/all",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getAllEvents",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EventsUiService.prototype.getAllEvents_response=function(response){return response},EventsUiService.prototype.getEvents=function(arg0){var path="restui/events/query",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getEvents",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["queryCursor.timeRange.timeRange.endTime","queryCursor.timeRange.timeRange.startTime","queryCursor.timeRange.endTime","queryCursor.timeRange.startTime"]),response})},EventsUiService.prototype.getEvents_response=function(response){return response},EventsUiService.prototype.getEventCounts=function(applicationId,entityType,entityId,timeRangeString){var path="restui/events/eventCounts?applicationId="+applicationId+"&entityType="+entityType+"&entityId="+entityId+"&timeRangeString="+timeRangeString,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getEventCounts",path,[applicationId,entityType,entityId,timeRangeString]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EventsUiService.prototype.getEventCounts_response=function(response){return response},EventsUiService.prototype.getEventSummaryById=function(eventId,timeRangeString){var path="restui/events/eventSummary/"+eventId+"?timeRangeString="+timeRangeString,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","getEventSummaryById",path,[eventId,timeRangeString]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eventTime"]),response})},EventsUiService.prototype.getEventSummaryById_response=function(response){return response},EventsUiService.prototype.generateTestEvents=function(applicationId){var path="restui/events/generateTestEvents/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","generateTestEvents",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EventsUiService.prototype.generateTestEvents_response=function(response){return response},EventsUiService.prototype.createEvent=function(arg0){var path="restui/events/createEvent",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","createEvent",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EventsUiService.prototype.createEvent_response=function(response){return response},EventsUiService.prototype.deleteEvents=function(arg0,timeRangeString){var path="restui/events/delete?timeRangeString="+timeRangeString,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","deleteEvents",path,[arg0,timeRangeString]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EventsUiService.prototype.describe=function(){var path="restui/events/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("EventsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},EventsUiService.prototype.describe_response=function(response){return response},EventsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],EventsUiService}(ControllerUiServiceBase);adComponentsModule.service("eventsUiService",EventsUiService),define("lib/controller/services/common/events/EventsUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ReportsUiService=function(_super){function ReportsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(ReportsUiService,_super),ReportsUiService.instance=function(){return AngularUtil.getADInjector().get("reportsUiService")},ReportsUiService.prototype.getReport=function(reportId){var path="restui/report/get/"+reportId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ReportsUiService","getReport",path,[reportId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["lastTriggeredTime","lastRetryTime","endTime","startTime","createdOn","modifiedOn"]),response})},ReportsUiService.prototype.getReport_response=function(response){return response},ReportsUiService.prototype.createReport=function(arg0){var path="restui/report/create",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ReportsUiService","createReport",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ReportsUiService.prototype.updateReport=function(arg0){var path="restui/report/update",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ReportsUiService","updateReport",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["lastTriggeredTime","lastRetryTime","endTime","startTime","createdOn","modifiedOn"]),response})},ReportsUiService.prototype.updateReport_response=function(response){return response},ReportsUiService.prototype.deleteReport=function(reportId){var path="restui/report/delete/"+reportId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ReportsUiService","deleteReport",path,[reportId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ReportsUiService.prototype.sendOnce=function(arg0){var path="restui/report/sendOnce",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ReportsUiService","sendOnce",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ReportsUiService.prototype.sendClient=function(arg0){var path="restui/report/sendViaClient",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ReportsUiService","sendClient",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ReportsUiService.prototype.listReports=function(){var path="restui/report/list",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ReportsUiService","listReports",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["lastTriggeredTime","lastRetryTime","endTime","startTime","createdOn","modifiedOn"]),response})},ReportsUiService.prototype.listReports_response=function(response){return response},ReportsUiService.prototype.describe=function(){var path="restui/report/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("ReportsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},ReportsUiService.prototype.describe_response=function(response){return response},ReportsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],ReportsUiService}(ControllerUiServiceBase);adComponentsModule.service("reportsUiService",ReportsUiService),define("lib/controller/services/reports/ReportsUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},TransientEventManagerUiService=function(_super){function TransientEventManagerUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(TransientEventManagerUiService,_super),TransientEventManagerUiService.instance=function(){return AngularUtil.getADInjector().get("transientEventManagerUiService")},TransientEventManagerUiService.prototype.getData=function(arg0,operation,opId){var path="restui/transientEvent/getData?operation="+operation+"&opId="+opId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TransientEventManagerUiService","getData",path,[arg0,operation,opId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TransientEventManagerUiService.prototype.getData_response=function(response){return response},TransientEventManagerUiService.prototype.getSession=function(nodeId,sessionType){var path="restui/transientEvent/getSession?nodeId="+nodeId+"&sessionType="+sessionType,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TransientEventManagerUiService","getSession",path,[nodeId,sessionType]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TransientEventManagerUiService.prototype.getSession_response=function(response){return response},TransientEventManagerUiService.prototype.startDBMonOperation=function(arg0){var path="restui/transientEvent/startDBMonOperation",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TransientEventManagerUiService","startDBMonOperation",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TransientEventManagerUiService.prototype.startDBMonOperation_response=function(response){return response},TransientEventManagerUiService.prototype.closeSession=function(sessionId,nodeId){var path="restui/transientEvent/closeSession?sessionId="+sessionId+"&nodeId="+nodeId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TransientEventManagerUiService","closeSession",path,[sessionId,nodeId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TransientEventManagerUiService.prototype.describe=function(){var path="restui/transientEvent/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("TransientEventManagerUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},TransientEventManagerUiService.prototype.describe_response=function(response){return response},TransientEventManagerUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],TransientEventManagerUiService}(ControllerUiServiceBase);adComponentsModule.service("transientEventManagerUiService",TransientEventManagerUiService),define("lib/controller/services/common/events/TransientEventManagerUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},MetricUiService=function(_super){function MetricUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(MetricUiService,_super),MetricUiService.instance=function(){return AngularUtil.getADInjector().get("metricUiService")},MetricUiService.prototype.getMetricTree=function(id,path){var path="restui/metric/application/"+id+"/metricbrowser?path="+path,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricUiService","getMetricTree",path,[id,path]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MetricUiService.prototype.getMetricTree_response=function(response){return response},MetricUiService.prototype.getTopDeviatingMetrics=function(arg0){var path="restui/metric/deviatingMetrics",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricUiService","getTopDeviatingMetrics",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MetricUiService.prototype.getTopDeviatingMetrics_response=function(response){return response},MetricUiService.prototype.getNodeProblemMetricData=function(arg0,applicationId,timeRange){var path="restui/metric/nodeProblemsMetricData?applicationId="+applicationId+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricUiService","getNodeProblemMetricData",path,[arg0,applicationId,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dataTimeslices.startTime"]),response})},MetricUiService.prototype.getNodeProblemMetricData_response=function(response){return response},MetricUiService.prototype.getNodeProblemBaselineData=function(arg0,applicationId,baselineId,timeRange){var path="restui/metric/nodeProblemsBaselineData?applicationId="+applicationId+"&baselineId="+baselineId+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricUiService","getNodeProblemBaselineData",path,[arg0,applicationId,baselineId,timeRange]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dataTimeslices.startTime"]),response})},MetricUiService.prototype.getNodeProblemBaselineData_response=function(response){return response},MetricUiService.prototype.getJMXMetricTree=function(id,path){var path="restui/metric/application/"+id+"/jmxmetricbrowser?path="+path,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricUiService","getJMXMetricTree",path,[id,path]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MetricUiService.prototype.getJMXMetricTree_response=function(response){return response},MetricUiService.prototype.getDBMetrics=function(dbServerType,path){var path="restui/metric/dbMetricTree?dbServerType="+dbServerType+"&path="+path,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricUiService","getDBMetrics",path,[dbServerType,path]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MetricUiService.prototype.getDBMetrics_response=function(response){return response},MetricUiService.prototype.describe=function(){var path="restui/metric/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("MetricUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},MetricUiService.prototype.describe_response=function(response){return response},MetricUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],MetricUiService}(ControllerUiServiceBase);adComponentsModule.service("metricUiService",MetricUiService),define("lib/controller/services/common/metrics/MetricUiService",function(){});var AgentConfig=function(){function AgentConfig(){this.application={name:""},this.applicationId=0,this.applicationName="",this.applicationType=AgentConfig.APPLICATION_TYPE_NEW,this.controllerLocation=location.hostname,this.isSSL="https:"==location.protocol?!0:!1,this.defaultPort=this.getDefaultPortNumber(),this.controllerPort=this.defaultPort,this.tier={name:""},this.tierType=AgentConfig.TIER_TYPE_NEW,this.nodeName="",this.bitness=AgentConfig.SIXTY_FOUR_BIT,this.phpAgentType=AgentConfig.PHP_PLATFORM_TYPE_RHEL,this.nodeAgentType=AgentConfig.NODE_PLATFORM_TYPE_LINUX,this.javaAgentType=AgentConfig.JAVA_PLATFORM_TYPE_SUN}return AgentConfig.prototype.getDefaultPortNumber=function(){var defaultPort,portExists=!(!location.port||0==location.port.length);return defaultPort=portExists?location.port:this.isSSL?AgentConfig.HTTPS_WELL_KNOWN_PORT:AgentConfig.HTTP_WELL_KNOWN_PORT,this.defaultPort=defaultPort,defaultPort},AgentConfig.prototype.setIsSSL=function(){if(!this.checkIfUserChangedPort()){var portExists=!(!location.port||0==location.port.length);this.controllerPort=this.isSSL&&!portExists?AgentConfig.HTTPS_WELL_KNOWN_PORT:this.getDefaultPortNumber()}},AgentConfig.prototype.checkIfUserChangedPort=function(){return this.controllerPort!=this.defaultPort&&this.controllerPort!=AgentConfig.HTTPS_WELL_KNOWN_PORT},AgentConfig.HTTP_WELL_KNOWN_PORT="80",AgentConfig.HTTPS_WELL_KNOWN_PORT="443",AgentConfig.APPLICATION_TYPE_EXISTING="APPLICATION_TYPE_EXISTING",AgentConfig.APPLICATION_TYPE_NEW="APPLICATION_TYPE_NEW",AgentConfig.TIER_TYPE_AUTOMATIC="TIER_TYPE_AUTOMATIC",AgentConfig.TIER_TYPE_EXISTING="TIER_TYPE_EXISTING",AgentConfig.TIER_TYPE_NEW="TIER_TYPE_NEW",AgentConfig.DEPLOYMENT_METHOD_MODULE_DIRECTIVE="DEPLOYMENT_METHOD_MODULE_DIRECTIVE",AgentConfig.DEPLOYMENT_METHOD_WSGI_FILE_DIRECTIVE="DEPLOYMENT_METHOD_WSGI_FILE_DIRECTIVE",AgentConfig.DEPLOYMENT_METHOD_APACHE_WITH_MOD_WSGI="DEPLOYMENT_METHOD_APACHE_WITH_MOD_WSGI",AgentConfig.DEPLOYMENT_METHOD_APACHE_WITH_PROCESS_LAUNCHER="DEPLOYMENT_METHOD_APACHE_WITH_PROCESS_LAUNCHER",AgentConfig.JAVA_PLATFORM_TYPE_IBM="JAVA_PLATFORM_TYPE_IBM",AgentConfig.JAVA_PLATFORM_TYPE_SUN="JAVA_PLATFORM_TYPE_SUN",AgentConfig.PHP_PLATFORM_TYPE_RHEL="PHP_PLATFORM_TYPE_RHEL",AgentConfig.PHP_PLATFORM_TYPE_OSX="PHP_PLATFORM_TYPE_OSX",AgentConfig.PHP_PLATFORM_TYPE_OTHER="PHP_PLATFORM_TYPE_OTHER",AgentConfig.NODE_PLATFORM_TYPE_LINUX="NODE_PLATFORM_TYPE_LINUX",AgentConfig.NODE_PLATFORM_TYPE_MAC="NODE_PLATFORM_TYPE_MAC",AgentConfig.THIRTY_TWO_BIT="THIRTY_TWO_BIT",AgentConfig.SIXTY_FOUR_BIT="SIXTY_FOUR_BIT",AgentConfig}();appdynamicsModule.factory("agentConfigFactory",function(){return AgentConfig}),define("app/view/home/agentInstallWizard/AgentConfig",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/home/agentInstallWizard/stages/connect/ConnectAgentController",["require","exports"],function(){var ConnectAgentController=function(_super){function ConnectAgentController($scope){var _this=this;_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.numDots=[],$scope.controller=this,$scope.adSourceText=angular.isDefined($scope.adSourceText)?$scope.adSourceText:this.getString("ms_yourApplication"),$scope.adDestText=angular.isDefined($scope.adDestText)?$scope.adDestText:this.getString("ms_appdynamics"),$scope.$watch("adConnectingLines",function(newValue,oldValue){newValue&&newValue!==oldValue&&(_this.connectingLines=newValue)}),$scope.$watch("adConnectionComplete",function(newValue,oldValue){newValue&&newValue!==oldValue&&(_this.connectionComplete=newValue)}),this.init()}return __extends(ConnectAgentController,_super),ConnectAgentController.prototype.init=function(){this.agentNotConnectedImage=this.$scope.adAgentNotConnectedImage,this.agentConnectedImage=this.$scope.adAgentConnectedImage,this.connectionComplete=this.$scope.adConnectionComplete,this.numDots=this.setNumberOfDots(),this.connectingLines=this.$scope.adConnectingLines},ConnectAgentController.prototype.setNumberOfDots=function(){var numberOfDots=Math.floor(ConnectAgentController.dotContainerLength/(ConnectAgentController.dotWidth+ConnectAgentController.dotSpace));return new Array(numberOfDots)},ConnectAgentController.dotContainerLength=460,ConnectAgentController.dotWidth=6,ConnectAgentController.dotSpace=5,ConnectAgentController.$inject=["$scope"],ConnectAgentController}(ControllerBase);return ConnectAgentController}),define("app/view/home/agentInstallWizard/stages/connect/ConnectAgentDirective",["require","exports","./ConnectAgentController"],function(require,exports,ConnectAgentController){var ConnectAgentDirective=function(){function ConnectAgentDirective(){return{restrict:"E",templateUrl:"app/view/home/agentInstallWizard/stages/connect/ConnectAnimation.html",replace:!1,scope:{adConnectionComplete:"=",adAgentNotConnectedImage:"=",adAgentConnectedImage:"=",adConnectingLines:"=",adSourceText:"=?",adDestText:"=?"},controller:ConnectAgentController}}return ConnectAgentDirective}();return adComponentsModule.directive(StringUtils.toCamelCase("ad-connect-agent"),ConnectAgentDirective),ConnectAgentDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/home/agentInstallWizard/AgentInstallWizardController",["require","exports","./stages/connect/ConnectAgentDirective"],function(require,exports,ConnectAgentDirective){var AgentInstallWizardController=function(_super){function AgentInstallWizardController($scope,$http,$timeout,$location,agentConfigFactory){_super.call(this,$scope,ResourceManager.instance(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.$http=$http,this.$timeout=$timeout,this.$location=$location,this.agentConfigFactory=agentConfigFactory,this.debugMode=!1,this.debugDownloadUrl="",this.agentConfig=null,this.agentTypes=null,this.agentType=null,this.agentTypeIndex=AgentInstallWizardController.UNSELECTED_AGENT_TYPE_INDEX,this.presetAgentTypeValue=null,this.downloadOptions=[null],this.stages=[AgentInstallWizardController.STARTING_PAGE,null],this.currentStage=null,this.currentStageIndex=0,this.existingApplications=[],this.existingApplicationIds=[],this.existingApplication=null,this.deploymentMethod=null,this.visible=!1,this.loadingStatus=null,this.backButtonVisible=!1,this.nextButtonVisible=!0,this.backButtonDisabled=!1,this.nextButtonDisabled=!1,this.viewAppDashButtonVisible=!1,this.setApplicationExistingTimer=null,this.browserLocation=window.location.hostname,this.showConnectionHeader=!0,this.webDownloadIsDisabled=!0,this.agentTypes=this.getAgentTypes(),this.agentConfig=new AgentConfig,this.initializeScope(),this.stages=[AgentInstallWizardController.STARTING_PAGE,null],this.currentStage=this.stages[this.currentStageIndex],this.downloadOptions=[null],this.debugMode=AppConfig.instance().debugMode;var urlParams=new URLParams(this.$location.path());this.presetAgentTypeValue=urlParams.agentType(),this.$scope.helpLink=ExternalUrls.HELP_URL_GETTING_STARTED,this.$scope.downloadDemoLink=ExternalUrls.HELP_URL_GETTING_STARTED,this.setupLocationBar(),this.fetchApplications(function(){this.applicationType=this.existingApplications.length>0?this.$scope.APPLICATION_TYPE_EXISTING:this.$scope.APPLICATION_TYPE_NEW
}.bind(this)),this.fetchAccount(),this.setupEventListeners()}return __extends(AgentInstallWizardController,_super),AgentInstallWizardController.prototype.setupEventListeners=function(){var _this=this;this.$scope.$on("$destroy",function(){_this.onDestroy()}),this.$scope.$on(ApplicationSelectorController.UEV_APPLICATION_SELECTED,function(event,args){if(args){var newApplication=args;_this.existingApplication={name:newApplication.name,value:newApplication.id},_this.existingApplication&&(_this.agentConfig.applicationName=_this.existingApplication.name,_this.agentConfig.applicationId=_this.existingApplication.value,_this.agentConfig.applicationType=_this.$scope.APPLICATION_TYPE_EXISTING,_this.enableEUM())}})},AgentInstallWizardController.prototype.stageShouldDisplay=function(option){var included=!1;return this.downloadOptions.forEach(function(el){el==option&&(included=!0)}),included},AgentInstallWizardController.prototype.getAgentTypes=function(){return[{messageKey:"ms_web_eum",value:"AGENT_TYPE_WEB",icon:"web",videoUrl:ExternalUrls.VIDEO_AGENT_INSTALL_WEB,downloadOptions:[AgentInstallWizardController.PAGE_SELECT_APPLICATION],stages:[AgentInstallWizardController.PAGE_AGENT_TYPE_MENU,AgentInstallWizardController.PAGE_DOWNLOAD_STAGE,AgentInstallWizardController.PAGE_INSTALL_STAGE]}]},AgentInstallWizardController.prototype.updateNavigationButtonVisibility=function(){this.nextButtonVisible=this.currentStageIndex<this.stages.length-1,this.backButtonVisible=this.currentStage!=AgentInstallWizardController.STARTING_PAGE},AgentInstallWizardController.prototype.updateViewAppDashButtonVisibility=function(){this.viewAppDashButtonVisible=this.currentStageIndex==this.stages.length-1&&this.currentStage==AgentInstallWizardController.PAGE_INSTALL_STAGE},AgentInstallWizardController.prototype.hasExistingApplications=function(){return this.existingApplications.length>0},AgentInstallWizardController.prototype.setupLocationBar=function(){this.$scope.locationEntries=this.createLocationBarEntryConfigs();var config=this.createLocationBarConfigData(this.$scope.locationEntries,!1,null,null,null,!0);config.isMainZoneRoot=!0,this.setLocationBarConfig(config)},AgentInstallWizardController.prototype.createLocationBarEntryConfigs=function(){var configs=[];return configs.push({label:ResourceManager.instance().getString("ui","ms_agentInstallSetupWizard")}),configs},AgentInstallWizardController.prototype.onClickWebEUMDocs=function(){ExternalUrls.open(ExternalUrls.HELP_URL_AGENT_INSTALL_WEB_EUM)},AgentInstallWizardController.prototype.onWhatIsAnApplication=function(){WebUtil.loadURL(ExternalUrls.HELP_URL_LOGICAL_MODEL_BUSINESS_APPLICATION)},AgentInstallWizardController.prototype.onViewInstallVideo=function(){var videoUrl=this.agentType.videoUrl;videoUrl&&(this.sendWizardUsageStatistics(AgentInstallWizardController.WATCH_VIDEO,!0),WebUtil.loadURL(videoUrl))},AgentInstallWizardController.prototype.onCancel=function(){this.currentStage=AgentInstallWizardController.PAGE_AGENT_TYPE_MENU,this.onViewGettingStarted()},AgentInstallWizardController.prototype.onViewAllApplicationsDashboard=function(){ApplicationViewService.instance().viewAllApplicationsDashboard()},AgentInstallWizardController.prototype.onClickApplicationDashboard=function(){this.existingApplication?ApplicationViewService.instance().viewApplicationDashboard(this.existingApplication.value):this.agentConfig.applicationId&&this.agentConfig.applicationId>0?ApplicationViewService.instance().viewApplicationDashboard(this.agentConfig.applicationId):this.onViewAllApplicationsDashboard()},AgentInstallWizardController.prototype.onClickEumApplicationDashboard=function(){this.existingApplication?EumViewService.instance().viewEumWebMainDashboard(this.existingApplication.value):this.agentConfig.applicationId&&this.agentConfig.applicationId>0?EumViewService.instance().viewEumWebMainDashboard(this.agentConfig.applicationId):EumViewService.instance().viewWebAllApps()},AgentInstallWizardController.prototype.onDownloadAgentManually=function(){ExternalUrls.open(ExternalUrls.HELP_URL_AGENT_INSTALL)},AgentInstallWizardController.prototype.onViewGettingStarted=function(){HomeViewService.instance().viewGettingStarted()},AgentInstallWizardController.prototype.onClickAllAppDashboardLink=function(){ApplicationViewService.instance().viewAllApplicationsDashboard()},AgentInstallWizardController.prototype.onSelectAgentType=function(){var agentTypeIndex=parseInt(this.agentTypeIndex,10);this.agentType=this.agentTypes[agentTypeIndex],this.sendWizardUsageStatistics(AgentInstallWizardController.SELECTED,!0)},AgentInstallWizardController.prototype.onBack=function(){this.updateNextButton(!1),this.viewAppDashButtonVisible=!1,this.currentStageIndex--,this.currentStage=this.stages[this.currentStageIndex],this.currentStage==AgentInstallWizardController.PAGE_AGENT_TYPE_MENU&&this.onCancel(),this.updateNavigationButtonVisibility(),this.sendWizardUsageStatistics(null,!0)},AgentInstallWizardController.prototype.onNext=function(){var path=InjectorService.instance().$location().path(),url=new URLParams(path);if(url.location()!=NavigationDataConstants.GETTING_STARTED_EUM){switch(this.$scope.errorMessage=null,this.currentStage){case AgentInstallWizardController.PAGE_AGENT_TYPE_MENU:if(this.agentTypeIndex===AgentInstallWizardController.UNSELECTED_AGENT_TYPE_INDEX)return void(this.$scope.errorMessage=this.getString("ms_chooseTheAgentTypeAboveError"));var agentTypeIndex=parseInt(this.agentTypeIndex,10);return this.agentType=this.agentTypes[agentTypeIndex],this.downloadOptions=this.agentType.downloadOptions,this.stages=this.agentType.stages,void this.checkEUMAvailability();case AgentInstallWizardController.PAGE_SELECT_APP_MONITOR:break;case AgentInstallWizardController.PAGE_DOWNLOAD_STAGE:if(!this.validateInputs())return;this.agentConfig.nodeName="process"}this.goToNextStage()}},AgentInstallWizardController.prototype.validateInputs=function(){return this.validateApplication()},AgentInstallWizardController.prototype.validateApplication=function(){if(this.agentConfig.applicationType==this.$scope.APPLICATION_TYPE_EXISTING){if(!(this.existingApplication&&this.existingApplication.value>0)){var errorMessage="Please choose an application.";return this.$scope.errorMessageApplication=errorMessage,$("#inputExistingApplicationCombo input").focus(),!1}this.webDownloadIsDisabled=!1,this.agentConfig.application.name=this.agentConfig.applicationName}if(this.agentConfig.applicationType==this.$scope.APPLICATION_TYPE_NEW){var errorMessage=null,applicationName=this.agentConfig.application.name;if(applicationName?this.isAppNameTaken(applicationName)?errorMessage="There is already an application named '"+applicationName+"'":this.agentConfig.applicationName=applicationName:errorMessage="Please enter an application name.",errorMessage)return this.$scope.errorMessageApplication=errorMessage,$("#inputTextNewApplication").focus(),!1;this.createApplication(applicationName)}return this.$scope.errorMessageApplication="",!0},AgentInstallWizardController.prototype.onStartDownload=function(){var now_utc=(new Date).getTime(),parameters={};switch(this.agentType.value){case AgentInstallWizardController.AGENT_TYPE_WEB:return void this.downloadFileAtPathname(AgentInstallWizardController.WEB_EUM_PACKAGE_PATH+this.agentConfig.applicationId,AgentInstallWizardController.WEB_EUM)}parameters["account-access-key"]=this.$scope.accountAccessKey,parameters["controller-host"]=this.agentConfig.controllerLocation,parameters["controller-port"]=this.agentConfig.controllerPort,parameters["controller-ssl-enabled"]=this.agentConfig.isSSL?"true":"false",parameters.account=this.$scope.accountName,parameters.timestamp=now_utc,parameters["agent-version"]=ResourceManager.instance().getString("version","version"),parameters.bit=this.agentConfig.bitness==AgentConfig.SIXTY_FOUR_BIT?64:32;var signature=AgentInstallWizardController.PRIVATE_KEY+now_utc.toString()+parameters.type+this.$scope.accountName;parameters.signature=CryptoJS.MD5(signature).toString();var queryUrl=ExternalUrls.PRODUCTION_URL;if(this.debugMode&&this.debugDownloadUrl.length>0&&(queryUrl=this.debugDownloadUrl),this.notificationService.displayResourceMessage("ms_preparingAgentForDownload"),BrowserUtils.isBrowserInternetExplorer9orLess()&&"undefined"!=typeof XDomainRequest){ADLoggerService.log("AgentInstallWizardController.onStartDownload: IE9 case; XDomainRequest to url "+queryUrl);var parameterQueryString=decodeURIComponent($.param(parameters));queryUrl=queryUrl+"?"+parameterQueryString;var xdr=new XDomainRequest;try{xdr.open("get",queryUrl),xdr.onprogress=function(){ADLoggerService.log("Querying for getting link for download package...")},xdr.ontimeout=function(){ADLoggerService.log("Query for getting link for download package timed-out.")},xdr.onload=function(){this.downloadFileAtURL(xdr.responseText,parameters.type)}.bind(this),xdr.onerror=function(){this.displayDownloadServerError(xdr.responseText,parameters.type)}.bind(this),xdr.timeout=AgentInstallWizardController.PACKAGE_QUERY_TIMEOUT,setTimeout(function(){xdr.send()},0)}catch(e){ADLoggerService.error("Agent download attempt on IE9 failed. Try running this app with https."),this.displayDownloadServerError(e,parameters.type)}}else $.ajax({type:"GET",contentType:"text/plain",dataType:"text",url:queryUrl,data:parameters,crossDomain:!0,success:function(responseData){this.downloadFileAtURL(responseData,parameters.type)}.bind(this),error:function(responseData,textStatus){this.displayDownloadServerError(textStatus,parameters.type)}.bind(this)})},AgentInstallWizardController.prototype.setApplicationTypeToExisting=function(newApplication){this.agentConfig.applicationType=this.$scope.APPLICATION_TYPE_EXISTING,null==newApplication?this.agentConfig.applicationType==this.$scope.APPLICATION_TYPE_EXISTING&&(this.setApplicationExistingTimer=this.$timeout(this.setApplicationTypeToExisting.bind(this),1e3)):(this.existingApplication=newApplication,this.agentConfig.applicationName=this.existingApplication.name,this.agentConfig.applicationId=this.existingApplication.value,this.enableEUM())},AgentInstallWizardController.prototype.setApplicationTypeToNew=function(){this.onDestroy(),this.agentConfig.applicationType=this.$scope.APPLICATION_TYPE_NEW},AgentInstallWizardController.prototype.initializeScope=function(){this.$scope.controller=this,this.$scope.agentConfig=this.agentConfig,this.$scope.APPLICATION_TYPE_EXISTING=AgentConfig.APPLICATION_TYPE_EXISTING,this.$scope.APPLICATION_TYPE_NEW=AgentConfig.APPLICATION_TYPE_NEW,this.$scope.setApplicationTypeToExisting=this.setApplicationTypeToExisting.bind(this)},AgentInstallWizardController.prototype.showError=function(message){this.$scope.errorMessage=message},AgentInstallWizardController.prototype.fetchApplications=function(successCallback,errorCallback){var controller=this;if(!this.$scope.timeRange){var timeRangeSpecifier={};timeRangeSpecifier.type=TimeRangeSpecifierType.BEFORE_NOW,timeRangeSpecifier.durationInMinutes=15,this.$scope.timeRange=timeRangeSpecifier}this.$http({method:"POST",url:"restui/allApplications/allApplicationsDashboard",data:this.$scope.timeRange}).success(function(response){this.existingApplicationIds=[];var applications=[];if(response&&response.length>0)for(var index=0;index<response.length;index++){var applicationDashboardInfo=response[index];applications.push({value:applicationDashboardInfo.id,name:applicationDashboardInfo.name})}controller.existingApplications=applications,applications.forEach(function(app){controller.existingApplicationIds.push(app.value)}),successCallback&&successCallback()}.bind(this)).error(function(error){ADLoggerService.log("Error getting all applications dashboard items for agent wizard: "+error),errorCallback&&errorCallback()}.bind(this))},AgentInstallWizardController.prototype.createApplication=function(applicationName){var _this=this;this.loadingStatus=ResourceManager.instance().getString("ui","ms_creating_application_please_wait");var application={};application.name=applicationName,application.description="";var successHandler=function(){EventBusService.instance().dispatchEvent(EventConstants.UEV_APPLICATION_CREATED,null),_this.loadingStatus=null,_this.webDownloadIsDisabled=!1,_this.fetchNewApplicationInfo(applicationName)},errorHandler=function(){_this.loadingStatus=null,_this.showError("There was an error creating the application '"+applicationName+"'")},appType=ApplicationType.APM;this.agentType.value==AgentInstallWizardController.AGENT_TYPE_WEB&&(appType=ApplicationType.WEB);var promise=AllApplicationsUiService.instance().createApplication(application,appType);promise.then(successHandler,errorHandler)},AgentInstallWizardController.prototype.isAppNameTaken=function(appName){for(var appNameIsTaken=!1,i=0;i<this.existingApplications.length;i++)if(this.existingApplications[i].name==appName){appNameIsTaken=!0;break}return appNameIsTaken},AgentInstallWizardController.prototype.displayWizard=function(){if(this.presetAgentTypeValue){for(var agentTypeIndex=-1,i=0;i<this.agentTypes.length;i++)if(this.agentTypes[i].value==this.presetAgentTypeValue){agentTypeIndex=i;break}agentTypeIndex>=0&&(this.agentTypeIndex=agentTypeIndex.toString(),this.onNext())}this.visible=!0},AgentInstallWizardController.prototype.fetchAccount=function(){var _this=this;UserUiService.instance().getCurrentAccountUI().then(function(accountUI){_this.$scope.account=accountUI.account,_this.$scope.accountName=accountUI.account.name,_this.$scope.accountAccessKey=accountUI.account.accessKey,_this.displayWizard()})},AgentInstallWizardController.prototype.shouldSendStatistics=function(){return sendUsageStatistics&&InjectorService.instance().userService().isMarketoUsageTrackingEnabled()},AgentInstallWizardController.prototype.sendWizardUsageStatistics=function(stageName,includeAgentType){if(this.shouldSendStatistics()){var pageId=this.buildPageId(stageName,includeAgentType);InjectorService.instance().userService().sendUsageTrackingData(pageId,"Agent Install Wizard")}},AgentInstallWizardController.prototype.buildPageId=function(stageName,includeAgentType){!stageName&&this.currentStage&&(stageName=this.currentStage.replace("PAGE_",""));var pageId="/AGENT_DOWNLOAD_WIZARD";return includeAgentType&&this.agentType&&(pageId+="_"+this.agentType.value.replace("AGENT_TYPE_","")),stageName&&(pageId+="_"+stageName),pageId},AgentInstallWizardController.prototype.updateNextButton=function(){this.nextButtonDisabled=!1},AgentInstallWizardController.prototype.goToNextStage=function(){this.currentStageIndex++,this.currentStage=this.stages[this.currentStageIndex],this.updateViewAppDashButtonVisibility(),this.updateNavigationButtonVisibility(),this.sendWizardUsageStatistics(null,!0)},AgentInstallWizardController.prototype.showErrorForNoValidEUMLicense=function(){this.downloadOptions=[AgentInstallWizardController.PAGE_AGENT_TYPE_MENU,AgentInstallWizardController.PAGE_NO_EUM_LICENSE],this.stages=[AgentInstallWizardController.PAGE_AGENT_TYPE_MENU,AgentInstallWizardController.PAGE_DOWNLOAD_STAGE],this.goToNextStage()},AgentInstallWizardController.prototype.fetchNewApplicationInfo=function(newApplicationName){for(var _this=this,oldApplicationNamesById=(this.existingApplications,{}),i=0;i<this.existingApplications.length;i++){var application=this.existingApplications[i];oldApplicationNamesById[application.value]=application.name}var successHandler=function(){for(var newApplication=null,i=0;i<_this.existingApplications.length;i++){var application=_this.existingApplications[i];if(!oldApplicationNamesById[application.value]){newApplication=application;break}}newApplication||_this.showError("There was an error creating the application '"+newApplicationName+"'"),_this.agentConfig.applicationId=newApplication.value,_this.enableEUM()};this.fetchApplications(successHandler)},AgentInstallWizardController.prototype.getEUMAppKey=function(){var _this=this;this.loadingStatus=this.getString("ms_getting_eum_app_key"),setTimeout(function(){var successHandler=function(eumAppKeyInfo){return _this.loadingStatus=null,eumAppKeyInfo.appKey?void 0:void _this.getEUMAppKey()},errorHandler=function(){_this.loadingStatus=null,_this.showError("Could not get EUM key for application '"+_this.agentConfig.applicationName+"'")}.bind(_this),promise=EumConfigurationUiService.instance().getAppKey(_this.agentConfig.applicationId);promise.then(successHandler,errorHandler)},DateTimeUtil.MILLISEC_PER_SEC)},AgentInstallWizardController.prototype.enableEUM=function(){var _this=this;this.loadingStatus=this.getString("ms_enabling_eum");var successHandler=function(){_this.loadingStatus=null,_this.getEUMAppKey()}.bind(this),errorHandler=function(){_this.loadingStatus=null,_this.showError("Could not enable EUM on application '"+_this.agentConfig.applicationName+"'")}.bind(this),promise=EumConfigurationUiService.instance().enableEUM(this.agentConfig.applicationId);promise.then(successHandler,errorHandler)},AgentInstallWizardController.prototype.checkEUMLicense=function(){var _this=this;this.loadingStatus=this.getString("ms_checking_eum_license");var successHandler=function(eumLicenseKeyInfo){_this.loadingStatus=null,eumLicenseKeyInfo.validLicenseKey?_this.goToNextStage():_this.showErrorForNoValidEUMLicense()}.bind(this),errorHandler=function(){_this.loadingStatus=null,_this.showErrorForNoValidEUMLicense()}.bind(this),promise=EumConfigurationUiService.instance().checkForValidLicenseKey();promise.then(successHandler,errorHandler)},AgentInstallWizardController.prototype.checkEUMAvailability=function(){var bypassHostnameCheck=!0;return bypassHostnameCheck||this.agentConfig.controllerLocation.match(AgentInstallWizardController.SAAS_CONTROLLER_HOSTNAME_PATTERN)?void this.checkEUMLicense():(this.downloadOptions=[AgentInstallWizardController.PAGE_AGENT_TYPE_MENU,AgentInstallWizardController.PAGE_NO_EUM_ON_PREM],void this.goToNextStage())},AgentInstallWizardController.prototype.displayDownloadStarted=function(){this.notificationService.displayResourceMessage("ms_startingFileDownload"),this.sendWizardUsageStatistics(AgentInstallWizardController.DOWNLOAD_SUCCESS,!0)},AgentInstallWizardController.prototype.downloadFileAtURL=function(url){window.location.href=url,this.displayDownloadStarted()},AgentInstallWizardController.prototype.downloadFileAtPathname=function(path){window.location.pathname=path,this.displayDownloadStarted()},AgentInstallWizardController.prototype.displayDownloadServerError=function(message){ADLoggerService.error("Error getting URL for download package: "+message),BrowserUtils.isBrowserInternetExplorer9orLess()?this.notificationService.displayError(this.getString("ms_errorWhileRetrievingTheAgentIE9"),""):this.notificationService.displayError(this.getString("ms_errorWhileRetrievingTheAgent"),""),this.sendWizardUsageStatistics(AgentInstallWizardController.DOWNLOAD_FAILURE,!0)},AgentInstallWizardController.prototype.onDestroy=function(){this.setApplicationExistingTimer&&this.$timeout.cancel(this.setApplicationExistingTimer)},AgentInstallWizardController.AGENT_TYPE_WEB="AGENT_TYPE_WEB",AgentInstallWizardController.PAGE_AGENT_TYPE_MENU="PAGE_AGENT_TYPE_MENU",AgentInstallWizardController.PAGE_SELECT_APP_MONITOR="PAGE_SELECT_APP_MONITOR",AgentInstallWizardController.PAGE_NO_EUM_ON_PREM="PAGE_NO_EUM_ON_PREM",AgentInstallWizardController.PAGE_NO_EUM_LICENSE="PAGE_NO_EUM_LICENSE",AgentInstallWizardController.PAGE_SELECT_APPLICATION="PAGE_SELECT_APPLICATION",AgentInstallWizardController.PAGE_WEB_EUM_INSTRUCTIONS="PAGE_WEB_EUM_INSTRUCTIONS",AgentInstallWizardController.PAGE_DOWNLOAD_STAGE="PAGE_DOWNLOAD_STAGE",AgentInstallWizardController.PAGE_INSTALL_STAGE="PAGE_INSTALL_STAGE",AgentInstallWizardController.SAAS_CONTROLLER_HOSTNAME_PATTERN=/\.saas\.appdynamics\.com$/i,AgentInstallWizardController.UNSELECTED_AGENT_TYPE_INDEX="-1",AgentInstallWizardController.STARTING_PAGE=AgentInstallWizardController.PAGE_AGENT_TYPE_MENU,AgentInstallWizardController.WEB_EUM="web-eum",AgentInstallWizardController.WEB_EUM_PACKAGE_PATH="/controller/restui/eumConfigurationUiService/getAdrum/",AgentInstallWizardController.PRIVATE_KEY="G3L65ZDJHIW9",AgentInstallWizardController.SELECTED="SELECTED",AgentInstallWizardController.DOWNLOAD_SUCCESS="DOWNLOAD_SUCCESS",AgentInstallWizardController.DOWNLOAD_FAILURE="DOWNLOAD_FAILURE",AgentInstallWizardController.WATCH_VIDEO="WATCH_VIDEO",AgentInstallWizardController.USC_PAGE_PREFIX="pid",AgentInstallWizardController.USC_ACCOUNT="account",AgentInstallWizardController.PACKAGE_QUERY_TIMEOUT=10*DateTimeUtil.MILLISEC_PER_SEC,AgentInstallWizardController.$inject=["$scope","$http","$timeout","$location","agentConfigFactory"],AgentInstallWizardController}(ControllerBase);exports.AgentInstallWizardController=AgentInstallWizardController}),require(["app/view/home/agentInstallWizard/AgentConfig","app/view/home/agentInstallWizard/AgentInstallWizardController"]),define("app/view/home/agentInstallWizard/AgentInstallWizardCode",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},HomeUiService=function(_super){function HomeUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(HomeUiService,_super),HomeUiService.instance=function(){return AngularUtil.getADInjector().get("homeUiService")},HomeUiService.prototype.getDatabasesData=function(){var path="restui/home/databases",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HomeUiService","getDatabasesData",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HomeUiService.prototype.getDatabasesData_response=function(response){return response},HomeUiService.prototype.getHomeViewData=function(){var path="restui/home/homeViewData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HomeUiService","getHomeViewData",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HomeUiService.prototype.getHomeViewData_response=function(response){return response},HomeUiService.prototype.getAllAppPerformanceViewData=function(timeRange,filter){var path="restui/home/getAllAppPerformanceViewData?time-range="+timeRange+"&filter="+filter,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HomeUiService","getAllAppPerformanceViewData",path,[timeRange,filter]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HomeUiService.prototype.getAllAppPerformanceViewData_response=function(response){return response},HomeUiService.prototype.getAgentInstallWizardData=function(applicationId){var path="restui/home/gentInstallWizardData/"+applicationId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HomeUiService","getAgentInstallWizardData",path,[applicationId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HomeUiService.prototype.getAgentInstallWizardData_response=function(response){return response},HomeUiService.prototype.getEUMData=function(){var path="restui/home/eum",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HomeUiService","getEUMData",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["eumWebApplications.runningSince","eumWebApplications.createdOn","eumWebApplications.modifiedOn"]),response})},HomeUiService.prototype.getEUMData_response=function(response){return response},HomeUiService.prototype.getApplications=function(){var path="restui/home/applications",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HomeUiService","getApplications",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HomeUiService.prototype.getApplications_response=function(response){return response},HomeUiService.prototype.getCustomDashboards=function(){var path="restui/home/customDashboards",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HomeUiService","getCustomDashboards",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HomeUiService.prototype.getCustomDashboards_response=function(response){return response},HomeUiService.prototype.describe=function(){var path="restui/home/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("HomeUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},HomeUiService.prototype.describe_response=function(response){return response},HomeUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],HomeUiService}(ControllerUiServiceBase);adComponentsModule.service("homeUiService",HomeUiService),define("lib/controller/services/common/HomeUiService",function(){});var Point2D=function(){function Point2D(x,y){this.x=x,this.y=y}return Point2D.prototype.toString=function(){return"("+this.x+", "+this.y+")"},Point2D}();define("app/utils/Point2D",function(){});var Transform2D=function(){function Transform2D(matrix){this.translate=new Point2D(matrix.e,matrix.f),this.scale=matrix.a}return Transform2D.prototype.toString=function(){return"translate("+this.translate.x+","+this.translate.y+") scale("+this.scale+")"},Transform2D}();define("app/utils/Transform2D",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsMainViewControllerBase=function(_super){function AnalyticsMainViewControllerBase($scope){_super.call(this,$scope,InjectorService.instance().$rootScope(),InjectorService.instance().$location(),InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.analyticsViewService=AnalyticsViewService.instance()}return __extends(AnalyticsMainViewControllerBase,_super),AnalyticsMainViewControllerBase.$inject=["$scope"],AnalyticsMainViewControllerBase}(MainViewControllerBase);appdynamicsModule.controller("AnalyticsMainViewControllerBase",AnalyticsMainViewControllerBase),define("app/view/analytics/AnalyticsMainViewControllerBase",function(){});var AnalyticsField=function(){function AnalyticsField(fieldDefinition,displayName,options){void 0===displayName&&(displayName=null),void 0===options&&(options=null),this.fieldDefinition=fieldDefinition,this.displayName=displayName,this.options=options,this.allowInGrid=!0,this.showCheckbox=!0,this.isFieldChecked=!1,this.functionArgs=[],this.numericRange={},this.percentileValues={},this.limit=100,options||(options={}),AnalyticsFields.displayNameMap||AnalyticsFields.setupDisplayNameMap(),displayName||(this.displayName=AnalyticsFields.displayNameMap[this.fieldDefinition.fieldName]?AnalyticsFields.displayNameMap[this.fieldDefinition.fieldName]:this.fieldDefinition.fieldName),this.fullPath=AnalyticsFields.getFullPathForFieldDefinition(this.fieldDefinition);var baseIconSource=FieldDefinitionRendererController.getIconSourceBase(fieldDefinition);this.fieldIconSource="images/dataTypes/"+baseIconSource+"_gray.svg",this.fieldIconSourceInGrid="images/dataTypes/"+baseIconSource+"_blue.svg",this.fieldColumnWidth=AnalyticsField.DEFAULT_COLUMN_WIDTH,!AnalyticsField.isSegmentField(this.fullPath)&&MetaDataService.instance().getParentFieldForFieldDefinition(fieldDefinition)&&(this.allowInGrid=!1)}return AnalyticsField.isSegmentFieldFullPath=function(fieldFullPath){return 0==fieldFullPath.indexOf(AnalyticsField.segments+AnalyticsField.FIELD_SEPARATOR)},AnalyticsField.getFieldName=function(analyticsField){return Util.getProperty("fieldDefinition.fieldName",analyticsField)},AnalyticsField.getRsdExecutionTimeFilterField=function(){return new AnalyticsField({fieldName:AnalyticsField.rsdExecutionTime,fieldType:FieldType.LONG})},AnalyticsField.getRsdEndToEndLatencyFilterField=function(){return new AnalyticsField({fieldName:AnalyticsField.rsdEndToEndLatencyTime,fieldType:FieldType.LONG})},AnalyticsField.getRsdGuidFilterField=function(){return new AnalyticsField({fieldName:AnalyticsField.rsdGuids,fieldType:FieldType.STRING})},AnalyticsField.getRsdHttpUrlFilterField=function(){return new AnalyticsField({fieldName:AnalyticsField.rsdHttpRequestUrl,fieldType:FieldType.STRING})},AnalyticsField.getRsdHttpSessionIdFilterField=function(){return new AnalyticsField({fieldName:AnalyticsField.rsdHttpRequestSessionId,fieldType:FieldType.STRING})},AnalyticsField.getRsdHttpUserPrincipalFilterField=function(){return new AnalyticsField({fieldName:AnalyticsField.rsdHttpRequestPrincipal,fieldType:FieldType.STRING})},AnalyticsField.getDiagnosticSessionGuidFilterField=function(){return new AnalyticsField({fieldName:AnalyticsField.diagSessionGuid,fieldType:FieldType.STRING})},AnalyticsField.prototype.getFullPath=function(isFieldWithSpaces){return void 0===isFieldWithSpaces&&(isFieldWithSpaces=!0),isFieldWithSpaces?StringUtils.encloseInBackticks(this.fullPath):this.fullPath},AnalyticsField.isSegmentField=function(fullPath){return AnalyticsField.isSegmentFieldFullPath(fullPath)},AnalyticsField.isOperation=function(field){return field.selectedOperation&&!!field.selectedOperation.value},AnalyticsField.FIELD_SEPARATOR=".",AnalyticsField.DEFAULT_COLUMN_WIDTH=10,AnalyticsField.eventTimestamp="eventTimestamp",AnalyticsField.application="application",AnalyticsField.applicationId="applicationId",AnalyticsField.transactionName="transactionName",AnalyticsField.transactionId="transactionId",AnalyticsField.transactionTime="transactionTime",AnalyticsField.requestExperience="requestExperience",AnalyticsField.requestGUID="requestGUID",AnalyticsField.node="node",AnalyticsField.nodeId="nodeId",AnalyticsField.tier="tier",AnalyticsField.tierId="tierId",AnalyticsField.errors="errors",AnalyticsField.segments="segments",AnalyticsField.transactionErrorType="errorType",AnalyticsField.errorDetail="errorDetail",AnalyticsField.errorCode="errorCode",AnalyticsField.requestExperienceFullPath=AnalyticsField.segments+AnalyticsField.FIELD_SEPARATOR+AnalyticsField.requestExperience,AnalyticsField.nodeIdFullPath=AnalyticsField.segments+AnalyticsField.FIELD_SEPARATOR+AnalyticsField.nodeId,AnalyticsField.tierIdFullPath=AnalyticsField.segments+AnalyticsField.FIELD_SEPARATOR+AnalyticsField.tierId,AnalyticsField.transactionTimeFullPath=AnalyticsField.segments+AnalyticsField.FIELD_SEPARATOR+AnalyticsField.transactionTime,AnalyticsField.sourceType="sourceType",AnalyticsField.source="source",AnalyticsField.host="host",AnalyticsField.message="message",AnalyticsField.sessionId="sessionId",AnalyticsField.pageName="pagename",AnalyticsField.device="device",AnalyticsField.browser="browser",AnalyticsField.geoCountry="geocountry",AnalyticsField.deviceOs="deviceos",AnalyticsField.geoRegion="georegion",AnalyticsField.geoCity="geocity",AnalyticsField.pageType="pagetype",AnalyticsField.endUserResponseTime="enduserresponsetime",AnalyticsField.firstByteTime="firstbytetime",AnalyticsField.domReadyTime="domreadytime",AnalyticsField.pageExperience="pageexperience",AnalyticsField.appkey="appkey",AnalyticsField.pageError="pageerror",AnalyticsField.scriptError="scripterror",AnalyticsField.ajaxError="ajaxerror",AnalyticsField.pageUrl="pageurl",AnalyticsField.pageParentUrl="pageparenturl",AnalyticsField.domBuildingTime="dombuildingtime",AnalyticsField.applicationServerTime="applicationservertime",AnalyticsField.frontEndTime="frontendtime",AnalyticsField.pageRenderTime="pagerendertime",AnalyticsField.responseAvailableTime="responseavailabletime",AnalyticsField.serverConnectionTime="serverconnectiontime",AnalyticsField.estimatedTime="estimatedtime",AnalyticsField.pageReferrer="pageReferrer",AnalyticsField.appKey="appkey",AnalyticsField.carrier="carrier",AnalyticsField.connectionType="connectiontype",AnalyticsField.deviceName="devicename",AnalyticsField.deviceModel="devicemodel",AnalyticsField.errorType="errortype",AnalyticsField.httpStatusCode="httpstatuscode",AnalyticsField.mobileAppName="mobileappname",AnalyticsField.mobileAppVersion="mobileappversion",AnalyticsField.networkError="networkerror",AnalyticsField.networkRequestExperience="networkrequestexperience",AnalyticsField.networkRequestName="networkrequestname",AnalyticsField.networkRequestTime="networkrequesttime",AnalyticsField.networkRequestType="networkrequesttype",AnalyticsField.osVersion="osversion",AnalyticsField.platform="platform",AnalyticsField.timestamp="timestamp",AnalyticsField.averageNumResourcesPerPage="averageNumResourcesPerPage",AnalyticsField.averagePageLoadTimeMs="averagePageLoadTimeMs",AnalyticsField.averagePageSizeBytes="averagePageSizeBytes",AnalyticsField.browserVersion="browserversion",AnalyticsField.downloadKbps="downloadKbps",AnalyticsField.durationMS="Session Duration (ms)",AnalyticsField.scriptExitCode="scriptExitCode",AnalyticsField.failureType="failureType",AnalyticsField.numberOfPages="Pages per Session",AnalyticsField.packetLossPercent="packetLossPercent",AnalyticsField.roundTripTimeMillis="roundTripTimeMillis",AnalyticsField.scheduleId="scheduleId",AnalyticsField.totalNumResourceErrors="totalNumResourceErrors",AnalyticsField.totalNumResources="totalNumResources",AnalyticsField.totalPageSizeBytes="totalPageSizeBytes",AnalyticsField.uploadKbps="uploadKbps",AnalyticsField.url="url",AnalyticsField.success="success",AnalyticsField.status="status",AnalyticsField.sessionType="sessionType",AnalyticsField.sessionVisualTime="Session Visual Time (ms)",AnalyticsField.sessionError="sessionError",AnalyticsField.sessionErrorCode="sessionErrorCode",AnalyticsField.pageErrorCode="pageErrorCode",AnalyticsField.scheduleName="scheduleName",AnalyticsField.startTimeMs="startTimeMS",AnalyticsField.landingPageName="landingpagename",AnalyticsField.endTimeMs="endTimeMS",AnalyticsField.duration="durationMS",AnalyticsField.agentid="agentid",AnalyticsField.crash="crash",AnalyticsField.crashid="crashid",AnalyticsField.agentversion="agentversion",AnalyticsField.cguid="cguid",AnalyticsField.crashGroupId="crashGroupId",AnalyticsField.crashFile="crash.crashfile",AnalyticsField.deviceManufacturer="devicemanufacturer",AnalyticsField.closed="closed",AnalyticsField.ipAddress="ip",AnalyticsField.referrer="referrer",AnalyticsField.useragentstring="useragentstring",AnalyticsField.pageviews="pageviews",AnalyticsField.networkrequestcount="networkrequestcount",AnalyticsField.userdatacount="userdatacount",AnalyticsField.experience="experience",AnalyticsField.browserRecords="browserRecords",AnalyticsField.uiCount="uicount",AnalyticsField.uievent="uievent",AnalyticsField.rootview="rootview",AnalyticsField.activity="activity",AnalyticsField.appcrashtimestamp="appcrashtimestamp",AnalyticsField.crashfile="crashfile",AnalyticsField.crashfunction="crashfunction",AnalyticsField.crashexception="crashexception",AnalyticsField.crashlinenumber="crashlinenumber",AnalyticsField.crashFileLineNumber="crashFileLineNumber",AnalyticsField.symbolicateddeobfuscated="symbolicateddeobfuscated",AnalyticsField.clientTime="clienttime",AnalyticsField.crashcount="crashcount",AnalyticsField.groupid="groupid",AnalyticsField.exceptionName="exceptionName",AnalyticsField.breadcrumbText="bctext",AnalyticsField.breadcrumbcount="breadcrumbcount",AnalyticsField.infopointName="infopname",AnalyticsField.isInfopointDynamic="isdynamic",AnalyticsField.infopointDuration="duration",AnalyticsField.infopointcount="infopointcount",AnalyticsField.timerName="timername",AnalyticsField.clientEndTime="clientendtime",AnalyticsField.timerCount="timercount",AnalyticsField.metricName="metricname",AnalyticsField.metricValue="metricvalue",AnalyticsField.custommetriccount="custommetriccount",AnalyticsField.rsdExecutionTime="rsdExecutionTime",AnalyticsField.rsdEndToEndLatencyTime="rsdEndToEndLatencyTime",AnalyticsField.rsdGuids="rsdGuids",AnalyticsField.rsdHttpRequestUrl="rsdHttpRequestUrl",AnalyticsField.rsdHttpRequestSessionId="rsdHttpRequestSessionId",AnalyticsField.rsdHttpRequestPrincipal="rsdHttpRequestPrincipal",AnalyticsField.diagSessionGuid="diagSessionGuid",AnalyticsField.BT_DATA_FIELD="btdata",AnalyticsField.METRIC_DATA_FIELD="metrics",AnalyticsField.USER_DATA_FIELD="userdata",AnalyticsField
}();define("app/view/analytics/metaData/AnalyticsField",function(){});var AnalyticsFields=function(){function AnalyticsFields(allFieldDefinitions){void 0===allFieldDefinitions&&(allFieldDefinitions=[]),this.allFieldDefinitions=[],this.fieldGroups=[],this.allFields=[],this.apmFields=[],this.appFields=[],this.httpFields=[],this.dataCollectorFields=[],this.segmentFields=[],this.nonSegmentFields=[],this.extractedFields=[],this.otherLogFields=[],this.fieldNameAndCategoryToDefinitionMap={},this._fieldFullPathToFieldMap={},this._fieldNameToFieldMap={},this._fieldFullPathToIndexMap={},this.setup(allFieldDefinitions)}return AnalyticsFields.isFieldDefinitionFieldTypeDate=function(fieldDef){return fieldDef?fieldDef.fieldName==AnalyticsField.timestamp||fieldDef.fieldName==AnalyticsField.eventTimestamp||fieldDef.fieldName==AnalyticsField.startTimeMs||fieldDef.fieldName==AnalyticsField.endTimeMs||fieldDef.fieldName==AnalyticsField.clientTime||fieldDef.fieldName==AnalyticsField.appcrashtimestamp:!1},AnalyticsFields.isFieldDefinitionFieldTypeNumeric=function(fieldDef){return fieldDef?fieldDef.fieldType===FieldType.LONG||fieldDef.fieldType===FieldType.DOUBLE||fieldDef.fieldType===FieldType.INTEGER||fieldDef.fieldType===FieldType.FLOAT:!1},AnalyticsFields.isFieldDefinitionFieldTypeDouble=function(fieldDef){return fieldDef?fieldDef.fieldType===FieldType.DOUBLE:!1},AnalyticsFields.isFieldDefinitionFieldTypeString=function(fieldDef){return fieldDef?fieldDef.fieldType==FieldType.STRING:!1},AnalyticsFields.isFieldDefinitionFieldTypeBoolean=function(fieldDef){return fieldDef?fieldDef.fieldType===FieldType.BOOLEAN:!1},AnalyticsFields.getFullPathForFieldDefinition=function(fieldDef){var fullPath=AnalyticsFields.getParentPathForFieldDefinition(fieldDef);return fullPath?fullPath+"."+fieldDef.fieldName:fieldDef.fieldName},AnalyticsFields.getParentPathForFieldDefinition=function(fieldDef){var parentPath="";return _.each(fieldDef.parents,function(node){parentPath=0==parentPath.length?node.fieldName:parentPath+"."+node.fieldName}),parentPath},AnalyticsFields.getValueOfFieldFromHit=function(fullPathOfField,_source){currentObject=_source;var fieldValue,arrOfFieldPathToRoot=[];fullPathOfField&&(arrOfFieldPathToRoot=fullPathOfField.split("."));var currentObject;return _source&&(_.each(arrOfFieldPathToRoot,function(node){"segments"==node?currentObject.segments&&(currentObject=_.findWhere(currentObject.segments,{entryPoint:!0})):currentObject=currentObject?currentObject[node]:currentObject}),fieldValue=currentObject),fieldValue?fieldValue:"NA"},AnalyticsFields.getNumericValueBasedOnFieldType=function(fieldType,value){var returnValue=0;return fieldType===FieldType.DOUBLE||fieldType===FieldType.FLOAT?returnValue=parseFloat(value):(fieldType===FieldType.INTEGER||fieldType===FieldType.LONG)&&(returnValue=parseInt(value)),returnValue},AnalyticsFields.setupDisplayNameMap=function(){var getString=function(key){return ResourceManager.instance().getString("ui",key)};this.displayNameMap={},this.displayNameMap[AnalyticsField.rsdExecutionTime]=getString("ms_exeTimeMs"),this.displayNameMap[AnalyticsField.rsdEndToEndLatencyTime]=getString("ms_endToEndLatencyTime_ms"),this.displayNameMap[AnalyticsField.rsdGuids]=getString("ms_requestGUIDs"),this.displayNameMap[AnalyticsField.rsdHttpRequestUrl]=getString("ms_URL"),this.displayNameMap[AnalyticsField.rsdHttpRequestSessionId]=getString("ms_rsdFilterFieldSessionId"),this.displayNameMap[AnalyticsField.rsdHttpRequestPrincipal]=getString("ms_rsdFilterFieldUserPrincipal"),this.displayNameMap[AnalyticsField.diagSessionGuid]=getString("ms_diagSessionGUID"),this.displayNameMap[AnalyticsField.application]=getString("ms_application"),this.displayNameMap[AnalyticsField.requestExperience]=getString("ms_userExperience"),this.displayNameMap[AnalyticsField.requestExperienceFullPath]=getString("ms_userExperience"),this.displayNameMap[AnalyticsField.transactionName]=getString("ms_BusinessTransaction"),this.displayNameMap[AnalyticsField.transactionTime]=getString("ms_ResponseTime"),this.displayNameMap[AnalyticsField.transactionTimeFullPath]=getString("ms_ResponseTime"),this.displayNameMap[AnalyticsField.tier]=getString("ms_Tier"),this.displayNameMap[AnalyticsField.node]=getString("ms_Node"),this.displayNameMap[AnalyticsField.errors]=getString("ms_Error"),this.displayNameMap[AnalyticsField.transactionErrorType]=getString("ms_ErrorType"),this.displayNameMap[AnalyticsField.errorCode]=getString("ms_ErrorCode"),this.displayNameMap[AnalyticsField.errorDetail]=getString("ms_ErrorDetail"),this.displayNameMap[AnalyticsField.eventTimestamp]=getString("ms_Timestamp"),this.displayNameMap[AnalyticsField.browser]=getString("ms_browser"),this.displayNameMap[AnalyticsField.pageName]=getString("ms_pageName"),this.displayNameMap[AnalyticsField.device]=getString("ms_device"),this.displayNameMap[AnalyticsField.geoCountry]=getString("ms_geoCountry"),this.displayNameMap[AnalyticsField.deviceOs]=getString("ms_deviceOS"),this.displayNameMap[AnalyticsField.geoRegion]=getString("ms_geoRegion"),this.displayNameMap[AnalyticsField.pageType]=getString("ms_pageType"),this.displayNameMap[AnalyticsField.endUserResponseTime]=getString("ms_RUM_PAGE_LOAD_TIME"),this.displayNameMap[AnalyticsField.firstByteTime]=getString("ms_RUM_FIRST_BYTE_TIME"),this.displayNameMap[AnalyticsField.domReadyTime]=getString("ms_RUM_PAGE_READY_TIME"),this.displayNameMap[AnalyticsField.pageError]=getString("ms_pageError"),this.displayNameMap[AnalyticsField.pageUrl]=getString("ms_URL"),this.displayNameMap[AnalyticsField.networkRequestTime]=getString("ms_networkRequestTime"),this.displayNameMap[AnalyticsField.pageParentUrl]=getString("ms_parentPageUrl"),this.displayNameMap[AnalyticsField.applicationServerTime]=getString("ms_RUM_APPLICATION_SERVER_TIME"),this.displayNameMap[AnalyticsField.domBuildingTime]=getString("ms_RUM_DOCUMENT_PROCESSING_TIME"),this.displayNameMap[AnalyticsField.frontEndTime]=getString("ms_RUM_FRONT_END_TIME"),this.displayNameMap[AnalyticsField.pageRenderTime]=getString("ms_RUM_PAGE_RENDER_TIME"),this.displayNameMap[AnalyticsField.responseAvailableTime]=getString("ms_RUM_RESPONSE_AVAILABLE_TIME"),this.displayNameMap[AnalyticsField.serverConnectionTime]=getString("ms_RUM_SERVER_CONNECTION_TIME"),this.displayNameMap[AnalyticsField.estimatedTime]=getString("ms_estimatedBTTime"),this.displayNameMap[AnalyticsField.pageExperience]=getString("ms_pageExperience"),this.displayNameMap[AnalyticsField.errorType]=getString("ms_errorType"),this.displayNameMap[AnalyticsField.ajaxError]=getString("ms_ajaxError"),this.displayNameMap[AnalyticsField.scriptError]=getString("ms_scriptError"),this.displayNameMap[AnalyticsField.averageNumResourcesPerPage]=getString("ms_SYNTHETIC_AvgNumResourcesPerPage"),this.displayNameMap[AnalyticsField.averagePageLoadTimeMs]=getString("ms_SYNTHETIC_AvgPageLoadTimeMs"),this.displayNameMap[AnalyticsField.averagePageSizeBytes]=getString("ms_SYNTHETIC_AvgPageSizeBytes"),this.displayNameMap[AnalyticsField.browserVersion]=getString("ms_SYNTHETIC_BrowserVersion"),this.displayNameMap[AnalyticsField.geoCity]=getString("ms_SYNTHETIC_GeoCity"),this.displayNameMap[AnalyticsField.downloadKbps]=getString("ms_SYNTHETIC_AvgDownloadRate"),this.displayNameMap[AnalyticsField.numberOfPages]=getString("ms_SYNTHETIC_NumberOfPages"),this.displayNameMap[AnalyticsField.packetLossPercent]=getString("ms_SYNTHETIC_PacketLossPercent"),this.displayNameMap[AnalyticsField.roundTripTimeMillis]=getString("ms_SYNTHETIC_RoundTripTimeMillis"),this.displayNameMap[AnalyticsField.totalNumResourceErrors]=getString("ms_SYNTHETIC_TotalNumResourceErrors"),this.displayNameMap[AnalyticsField.totalNumResources]=getString("ms_SYNTHETIC_TotalNumResources"),this.displayNameMap[AnalyticsField.totalPageSizeBytes]=getString("ms_SYNTHETIC_TotalPageSizeBytes"),this.displayNameMap[AnalyticsField.uploadKbps]=getString("ms_SYNTHETIC_AvgUploadRate"),this.displayNameMap[AnalyticsField.durationMS]=getString("ms_SYNTHETIC_TotalDuration"),this.displayNameMap[AnalyticsField.url]=getString("ms_SYNTHETIC_URL"),this.displayNameMap[AnalyticsField.success]=getString("ms_SYNTHETIC_Success"),this.displayNameMap[AnalyticsField.status]=getString("ms_SYNTHETIC_Status"),this.displayNameMap[AnalyticsField.sessionError]=getString("ms_SYNTHETIC_SessionError"),this.displayNameMap[AnalyticsField.sessionErrorCode]=getString("ms_SYNTHETIC_SessionErrorCode"),this.displayNameMap[AnalyticsField.pageErrorCode]=getString("ms_SYNTHETIC_PageErrorCode"),this.displayNameMap[AnalyticsField.scheduleId]=getString("ms_SYNTHETIC_JobName"),this.displayNameMap[AnalyticsField.scriptExitCode]=getString("ms_SYNTHETIC_scriptExitCode"),this.displayNameMap[AnalyticsField.failureType]=getString("ms_errorType"),this.displayNameMap[AnalyticsField.sessionType]=getString("ms_SYNTHETIC_SessionType"),this.displayNameMap[AnalyticsField.sessionVisualTime]=getString("sessionVisualTime"),this.displayNameMap[AnalyticsField.platform]="Platform",this.displayNameMap[AnalyticsField.deviceName]="Device Name",this.displayNameMap[AnalyticsField.deviceModel]="Device Model",this.displayNameMap[AnalyticsField.connectionType]="Connection Type",this.displayNameMap[AnalyticsField.carrier]="Carrier",this.displayNameMap[AnalyticsField.duration]="Duration",this.displayNameMap[AnalyticsField.mobileAppName]="Mobile App Name",this.displayNameMap[AnalyticsField.mobileAppVersion]="Mobile App Version",this.displayNameMap[AnalyticsField.osVersion]="OS Version",this.displayNameMap[AnalyticsField.deviceManufacturer]="Device Manufacturer",this.displayNameMap[AnalyticsField.source]=getString("ms_logs_source"),this.displayNameMap[AnalyticsField.sourceType]=getString("ms_logs_sourceType"),this.displayNameMap[AnalyticsField.host]=getString("ms_logs_host"),this.displayNameMap[AnalyticsField.message]=getString("ms_logs_message")},AnalyticsFields.create=function(fieldDefs){var items=[];return angular.forEach(fieldDefs,function(fieldDef){items.push(new AnalyticsField(fieldDef))}),items},AnalyticsFields.getByName=function(fieldName,analyticsFields){var field=null;return field=_.find(analyticsFields,function(analyticsField){return analyticsField.fieldDefinition.fieldName==fieldName})},AnalyticsFields.getByFullPath=function(fullPath,analyticsFields){var field=null;return field=_.find(analyticsFields,function(analyticsField){return analyticsField.fullPath==fullPath})},AnalyticsFields.getFieldsStartingWithPath=function(startsWithPath,analyticsFields){for(var fields=[],i=0;i<analyticsFields.length;i++)0==analyticsFields[i].fullPath.indexOf(startsWithPath)&&fields.push(analyticsFields[i]);return fields},AnalyticsFields.prototype.addField=function(fieldDefinition,displayName){this.allFieldDefinitions.push(fieldDefinition),this.fieldNameAndCategoryToDefinitionMap[this.getKeyForFieldNameAndCategory(fieldDefinition.fieldName,fieldDefinition.category)]=fieldDefinition;var analyticsField=new AnalyticsField(fieldDefinition,displayName);return this.processField(analyticsField),analyticsField},AnalyticsFields.prototype.getFieldByFullPath=function(fullPath){var field=this._fieldFullPathToFieldMap[fullPath];return field?field:null},AnalyticsFields.prototype.getFullPathFieldMap=function(){return this._fieldFullPathToFieldMap},AnalyticsFields.prototype.getFieldByName=function(fieldName){var field=this._fieldNameToFieldMap[fieldName];return field?field:null},AnalyticsFields.prototype.getIndexForField=function(field){return this._fieldFullPathToIndexMap[field.fullPath]},AnalyticsFields.prototype.getFieldsForSearch=function(fields){for(var fieldsForSearch=[],i=0;i<fields.length;i++)this.isFieldEligableForSearchCriteria(fields[i])&&fieldsForSearch.push(fields[i]);return fieldsForSearch},AnalyticsFields.prototype.isFieldEligableForSearchCriteria=function(field){return field&&field.fieldDefinition&&field.fieldDefinition.fieldName!=AnalyticsField.eventTimestamp},AnalyticsFields.prototype.isFieldEligibleForFunnelCriteria=function(field){return field&&field.fieldDefinition&&field.fieldDefinition.fieldType!==FieldType.DATE&&!AnalyticsFields.isFieldDefinitionFieldTypeNumeric(field.fieldDefinition)},AnalyticsFields.prototype.getFieldDefForNameAndCategory=function(fieldName,fieldCategory){return this.fieldNameAndCategoryToDefinitionMap[this.getKeyForFieldNameAndCategory(fieldName,fieldCategory)]},AnalyticsFields.isFieldUsableForSuperSelect=function(fieldDefinition){return fieldDefinition&&(fieldDefinition.fieldName===AnalyticsField.carrier||fieldDefinition.fieldName===AnalyticsField.connectionType||fieldDefinition.fieldName===AnalyticsField.mobileAppName||fieldDefinition.fieldName===AnalyticsField.mobileAppVersion||fieldDefinition.fieldName===AnalyticsField.deviceModel||fieldDefinition.fieldName===AnalyticsField.deviceManufacturer||fieldDefinition.fieldName===AnalyticsField.pageExperience||fieldDefinition.fieldName===AnalyticsField.networkRequestExperience||fieldDefinition.fieldName===AnalyticsField.networkRequestName||fieldDefinition.fieldName===AnalyticsField.infopointName||fieldDefinition.fieldName===AnalyticsField.timerName||fieldDefinition.fieldName===AnalyticsField.metricName||fieldDefinition.fieldName===AnalyticsField.osVersion||fieldDefinition.fieldName===AnalyticsField.activity||fieldDefinition.fieldName===AnalyticsField.browser||fieldDefinition.fieldName===AnalyticsField.useragentstring||fieldDefinition.fieldName===AnalyticsField.experience||fieldDefinition.fieldName===AnalyticsField.landingPageName||fieldDefinition.fieldName===AnalyticsField.errorType||fieldDefinition.fieldName===AnalyticsField.pageError||fieldDefinition.fieldName===AnalyticsField.pageName||fieldDefinition.fieldName===AnalyticsField.appkey||fieldDefinition.fieldName===AnalyticsField.failureType||fieldDefinition.fieldName===AnalyticsField.status&&fieldDefinition.category===FieldCategory.SYNTH_SESSION_RECORD||fieldDefinition.fieldName===AnalyticsField.sourceType)},AnalyticsFields.prototype.getKeyForFieldNameAndCategory=function(fieldName,fieldCategory){return fieldName+"|"+fieldCategory},AnalyticsFields.prototype.setup=function(allFieldDefinitions){if(allFieldDefinitions)for(var i=0;i<allFieldDefinitions.length;i++)this.addField(allFieldDefinitions[i])},AnalyticsFields.prototype.processField=function(analyticsField){this.allFields.push(analyticsField),this._fieldFullPathToFieldMap[analyticsField.fullPath]=analyticsField,this._fieldNameToFieldMap[analyticsField.fieldDefinition.fieldName]=analyticsField,this._fieldFullPathToIndexMap[analyticsField.fullPath]=this.allFields.length-1,AnalyticsField.isSegmentField(analyticsField.fullPath)?this.segmentFields.push(analyticsField):this.nonSegmentFields.push(analyticsField)},AnalyticsFields.FIRST_CLASS_USER_ACTIVITY_FIELDS={browser:"true",device:"true",deviceos:"true",geocountry:"true",georegion:"true",pagename:"true",pagetype:"true","metrics.enduserresponsetime":"true","metrics.firstbytetime":"true","metrics.domreadytime":"true"},AnalyticsFields}();define("app/view/analytics/metaData/AnalyticsFields",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsViewService=function(_super){function AnalyticsViewService($location,navigationService,notificationService,resourceManager){var _this=this;_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.lastViewedSearchAndAnalyzeLocation=null,this.masterService=MasterService.instance(),this._analyticsAppId=0,EventBusService.instance().registerEventListener(NavigationService.UEV_NAV_ACTION,function(){var location=URLParams.getCurrentUrlParams().location();-1!=AnalyticsViewService.ANALYTICS_DASHBOARD_LOCATIONS.indexOf(location)&&(_this.lastViewedSearchAndAnalyzeLocation=location,UserService.instance().setGeneralUserPreferenceValue(AnalyticsViewService.ANALYTICS_LAST_VIEWED_SEARCH_ANALYZE_LOCATION,_this.lastViewedSearchAndAnalyzeLocation))},null)}return __extends(AnalyticsViewService,_super),AnalyticsViewService.instance=function(){return AngularUtil.getADInjector().get("analyticsViewService")},AnalyticsViewService.prototype.viewAnalyticsHome=function(){this.viewLocation(NavigationDataConstants.ANALYTICS_HOME)},AnalyticsViewService.prototype.viewSearchAndAnalyze=function(){var _this=this;this.masterService.onInitDataFetch().then(function(){_this.lastViewedSearchAndAnalyzeLocation||(_this.lastViewedSearchAndAnalyzeLocation=UserService.instance().getGeneralUserPreferenceValue(AnalyticsViewService.ANALYTICS_LAST_VIEWED_SEARCH_ANALYZE_LOCATION)),_this.lastViewedSearchAndAnalyzeLocation?_this.lastViewedSearchAndAnalyzeLocation==NavigationDataConstants.ANALYTICS_TRANSACTIONS&&_this.masterService.initData.mainNavConfig.showTransactionAnalytics?_this.viewTransactionAnalytics(!1):_this.lastViewedSearchAndAnalyzeLocation==NavigationDataConstants.ANALYTICS_LOGS&&_this.masterService.initData.mainNavConfig.showLogAnalytics?_this.viewLogAnalytics(!1):_this.lastViewedSearchAndAnalyzeLocation==NavigationDataConstants.ANALYTICS_USER_WEB_ACTIVITY&&_this.masterService.initData.mainNavConfig.showBrowserAnalytics?_this.viewUserWebActivityAnalytics(!1):_this.lastViewedSearchAndAnalyzeLocation==NavigationDataConstants.ANALYTICS_USER_MOBILE_ACTIVITY&&_this.masterService.initData.mainNavConfig.showMobileAnalytics&&_this.viewUserWebActivityAnalytics(!1):_this.masterService.initData.mainNavConfig.showTransactionAnalytics?_this.viewTransactionAnalytics(!1):_this.masterService.initData.mainNavConfig.showLogAnalytics?_this.viewLogAnalytics(!1):_this.masterService.initData.mainNavConfig.showBrowserAnalytics?_this.viewUserWebActivityAnalytics(!1):_this.masterService.initData.mainNavConfig.showMobileAnalytics&&_this.viewUserMobileActivityAnalytics(!1)})},AnalyticsViewService.prototype.viewDefaultSearch=function(){var _this=this;this.masterService.onInitDataFetch().then(function(){_this.masterService.initData.mainNavConfig.showTransactionAnalytics?_this.viewTransactionAnalytics():_this.masterService.initData.mainNavConfig.showLogAnalytics?_this.viewLogAnalytics():_this.masterService.initData.mainNavConfig.showBrowserAnalytics?_this.viewUserWebActivityAnalytics():_this.masterService.initData.mainNavConfig.showMobileAnalytics&&_this.viewUserMobileActivityAnalytics()})},AnalyticsViewService.prototype.viewSearchById=function(analyticsSavedSearchId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.ANALYTICS_ADQL_SEARCH),params.setNumberParam(AnalyticsViewService.URL_PARAM_SEARCH_ID,analyticsSavedSearchId),this.navigationService.navigateTo(params.toString())},AnalyticsViewService.prototype.viewADQLSearch=function(adqlQuery,timeRangeString,searchMode,viewMode,widgetBuilderMode,widgetType){GlobalCacheService.instance()[AnalyticsCache.ADQL_QUERY]=adqlQuery,GlobalCacheService.instance()[AnalyticsCache.SEARCH_MODE]=searchMode,GlobalCacheService.instance()[AnalyticsCache.VIEW_MODE]=viewMode,GlobalCacheService.instance()[AnalyticsCache.WIDGET_BUILDER_MODE]=widgetBuilderMode,GlobalCacheService.instance()[AnalyticsCache.WIDGET_TYPE]=widgetType;var params=this.createUrlParamsWithCurrentTimeRange();StringUtils.isNullOrEmptyString(timeRangeString)||params.setParam(UrlConstants.TIME_RANGE,timeRangeString),params.setParam(UrlConstants.LOCATION,NavigationDataConstants.ANALYTICS_ADQL_SEARCH),this.navigationService.navigateTo(params.toString())},AnalyticsViewService.prototype.viewSearchList=function(){this.viewLocation(NavigationDataConstants.ANALYTICS_SEARCH_LIST)},AnalyticsViewService.prototype.viewMetricConfig=function(){this.viewLocation(NavigationDataConstants.ANALYTICS_METRICS_CONFIG)},AnalyticsViewService.prototype.viewTransactionAnalytics=function(launchInAdqlMode){if(void 0===launchInAdqlMode&&(launchInAdqlMode=!0),launchInAdqlMode){var query="SELECT * FROM "+AnalyticsDataSource.TRANSACTIONS;this.viewADQLSearch(query)}else this.viewLocation(NavigationDataConstants.ANALYTICS_TRANSACTIONS)},AnalyticsViewService.prototype.viewLogAnalytics=function(launchInAdqlMode){if(void 0===launchInAdqlMode&&(launchInAdqlMode=!0),launchInAdqlMode){var query="SELECT * FROM "+AnalyticsDataSource.LOGS;this.viewADQLSearch(query)}else this.viewLocation(NavigationDataConstants.ANALYTICS_LOGS)},AnalyticsViewService.prototype.viewUserWebActivityAnalytics=function(launchInAdqlMode){if(void 0===launchInAdqlMode&&(launchInAdqlMode=!0),launchInAdqlMode){var query="SELECT * FROM "+AnalyticsDataSource.BROWSER_RECORDS;this.viewADQLSearch(query)}else this.viewLocation(NavigationDataConstants.ANALYTICS_USER_WEB_ACTIVITY)},AnalyticsViewService.prototype.viewUserMobileActivityAnalytics=function(launchInAdqlMode){if(void 0===launchInAdqlMode&&(launchInAdqlMode=!0),launchInAdqlMode){var query="SELECT * FROM "+AnalyticsDataSource.MOBILE_SNAPSHOTS;this.viewADQLSearch(query)}else this.viewLocation(NavigationDataConstants.ANALYTICS_USER_MOBILE_ACTIVITY)},AnalyticsViewService.prototype.viewAnalyticsConfig=function(){this.viewLocation(NavigationDataConstants.ANALYTICS_CONFIG)},AnalyticsViewService.prototype.viewMetricCorrelation=function(){this.viewLocation(NavigationDataConstants.ANALYTICS_METRIC_CORRELATION)},AnalyticsViewService.prototype.viewAnalyticsMetricBrowser=function(){var _this=this;this.fetchAnalyticsAppId().then(function(){Util.isValidId(_this._analyticsAppId)?_this.viewApplicationLocation(NavigationDataConstants.METRIC_BROWSER,_this._analyticsAppId):ADLoggerService.error("Analytics App ID is missing. Cannot load Metric Browser")})},AnalyticsViewService.prototype.viewAlertRespondHome=function(){var _this=this;this.fetchAnalyticsAppId().then(function(){AlertRespondViewService.instance().viewAlertRespondHome(_this._analyticsAppId)})},AnalyticsViewService.prototype.viewTransactionsForSessionId=function(sessionId,timeRangeString){var query="SELECT * FROM "+AnalyticsDataSource.TRANSACTIONS+" WHERE "+AnalyticsField.sessionId+" = '"+sessionId+"'";this.viewADQLSearch(query,timeRangeString)},AnalyticsViewService.prototype.viewEventsForRequestGuid=function(requestGuid,dataSource,timeRangeString){var query="SELECT * FROM "+dataSource+" WHERE "+AnalyticsField.requestGUID+" = '"+requestGuid+"'";this.viewADQLSearch(query,timeRangeString)},AnalyticsViewService.prototype.viewLogAnalytcsForNode=function(ipAddresses,timeRangeString){for(var ipAddressArray=ipAddresses.split(","),ipIndex=0;ipIndex<ipAddressArray.length;ipIndex++){var appendStar=!0,ipSplitValues=ipAddressArray[ipIndex].split(".");if(4===ipSplitValues.length){for(var allNumbersFound=!0,splitIndex=0;splitIndex<ipSplitValues.length;splitIndex++)StringUtils.isNumber(ipSplitValues[splitIndex])||(allNumbersFound=!1);allNumbersFound&&(appendStar=!1)}}for(var whereConditionString="",i=0;i<ipAddressArray.length;i++){var ipAddress=ipAddressArray[i];if(!StringUtils.isNullOrEmptyString(ipAddress)){var condition=AnalyticsField.host+" = '"+ipAddress+"'";whereConditionString+=condition,i!==ipAddressArray.length-1&&(whereConditionString+=" OR ")}}var query="SELECT * FROM "+AnalyticsDataSource.LOGS+" WHERE "+whereConditionString;this.viewADQLSearch(query,timeRangeString)},AnalyticsViewService.prototype.getAnalyticsHomeLocationBarEntryConfig=function(){var _this=this,config={};return config.clickFn=function(){_this.viewAnalyticsHome()},config.label=this.getString("ms_analyticsNavLabel"),config},AnalyticsViewService.prototype.getAnalyticsSearchesLocationBarEntryConfig=function(){var _this=this,config={};return config.clickFn=function(){_this.viewSearchList()},config.label=this.getString("ms_analyticsSearchesListLeftNavItem"),config},AnalyticsViewService.prototype.viewAnalyticsConfiguration=function(tab){var params=this.createUrlParamsWithCurrentTimeRange();tab==AnalyticsViewService.TAB_ANALYTICS_METRICS?params.setParam(UrlConstants.LOCATION,NavigationDataConstants.ANALYTICS_METRICS_CONFIG):tab==AnalyticsViewService.TAB_ANALYTICS_EXTRACTED_FIELDS?params.setParam(UrlConstants.LOCATION,NavigationDataConstants.ANALYTICS_EXTRACTED_FIELDS_CONFIG):params.setParam(UrlConstants.LOCATION,NavigationDataConstants.ANALYTICS_CONFIG),this.navigationService.navigateTo(params.toString())},AnalyticsViewService.prototype.getAnalyticsConfigurationNavigationTabs=function(){{var _this=this,onClickTab=function(tab){_this.viewAnalyticsConfiguration(tab)},analyticsTabName=this.getString("ms_analyticsBTConfiguration"),scheduledQueriesTabName=this.getString("ms_analyticsMetricsConfiguration");this.getString("ms_analyticsExtractedFieldsConfiguration")}return[{name:analyticsTabName,clickFn:onClickTab,fnArg:AnalyticsViewService.TAB_TRANSACTION_ANALYTICS},{name:scheduledQueriesTabName,clickFn:onClickTab,fnArg:AnalyticsViewService.TAB_ANALYTICS_METRICS}]},AnalyticsViewService.prototype.openAnalyticsMetricDialog=function(analyticsScheduledQueryWrapper){DialogService.instance().showDialog("AnalyticsMetricDialogController","app/view/analytics/metrics/metricDetailDialog/AnalyticsMetricDialogController","app/view/analytics/metrics/metricDetailDialog/AnalyticsMetricDialogView.html",analyticsScheduledQueryWrapper)},AnalyticsViewService.prototype.viewAnalayticsTransactionDetailsDialog=function(analyticsTransaction){if(analyticsTransaction){var dialogData={};dialogData.analyticsTransaction=analyticsTransaction,DialogService.instance().showDialog("","app/view/analytics/eventDetailViewer/dialog/AnalyticsEventDetailDialogController","app/view/analytics/eventDetailViewer/dialog/AnalyticsEventDetailDialogView.html",dialogData)}},AnalyticsViewService.prototype.viewMobileNetworkRequestDetails=function(analyticsTransaction){try{var clientGuid=analyticsTransaction.fieldFullPathToValueMap.cguid.value,appKey=analyticsTransaction.fieldFullPathToValueMap.appkey.value}catch(e){return ADLoggerService.log("Network request cguid or appkey is not available"),void this.notificationService.displayError("Error occurred","Could not open network request details")}var params={clientGuid:clientGuid,appKey:appKey},modalSettings={};modalSettings.controllerPath="app/view/eum/mobile/networkRequests/details/EUMMobileNetworkRequestDetailsController",modalSettings.controllerName="EUMMobileNetworkRequestDetailsController",modalSettings.templateUrl="app/view/eum/mobile/networkRequests/details/EUMMobileNetworkRequestDetails.html",modalSettings.minimizable=!0,modalSettings.data=params,DialogService.instance().openDialogAsync(modalSettings)},AnalyticsViewService.prototype.viewBrowserRecordDetails=function(applicationId,clientGuid){var params={clientGuid:clientGuid,applicationId:applicationId},modalSettings={};modalSettings.controllerPath="app/view/eum/web/analyze/WebAnalyzeDetailsController",modalSettings.controllerName="WebAnalyzeDetailsController",modalSettings.templateUrl="app/view/eum/web/analyze/WebAnalyzeDetails.html",modalSettings.minimizable=!0,modalSettings.data=params,DialogService.instance().openDialogAsync(modalSettings)},AnalyticsViewService.prototype.viewAnalayticsMobileCrashReportsDetailsDialog=function(appId,mobileAppId,platform,crashId){var dialogData={};dialogData.applicationId=appId,dialogData.mobileAppId=mobileAppId,dialogData.platform=platform,dialogData.crashId=crashId,dialogData.openedFromSessionDetails=!1,DialogService.instance().showDialog("CrashDetailsController","app/view/eum/mobile/crashes/details/CrashDetailsController","app/view/eum/mobile/crashes/details/CrashDetails.html",dialogData)},AnalyticsViewService.prototype.debugAnalyticsMode=function(){return-1!=InjectorService.instance().$location().absUrl().indexOf("debugAnalytics=true")},AnalyticsViewService.prototype.fetchAnalyticsAppId=function(){var _this=this;return ApplicationsCache.instance().getAllApplications(!1).then(function(){ApplicationsCache.instance().allApplications&&ApplicationsCache.instance().allApplications.analyticsApplication&&(_this._analyticsAppId=ApplicationsCache.instance().allApplications.analyticsApplication.id)})},AnalyticsViewService.TAB_TRANSACTION_ANALYTICS=0,AnalyticsViewService.TAB_ANALYTICS_METRICS=1,AnalyticsViewService.TAB_ANALYTICS_EXTRACTED_FIELDS=2,AnalyticsViewService.ANALYTICS_DASHBOARD_LOCATIONS=[NavigationDataConstants.ANALYTICS_TRANSACTIONS,NavigationDataConstants.ANALYTICS_LOGS,NavigationDataConstants.ANALYTICS_USER_WEB_ACTIVITY,NavigationDataConstants.ANALYTICS_USER_MOBILE_ACTIVITY],AnalyticsViewService.ANALYTICS_LAST_VIEWED_SEARCH_ANALYZE_LOCATION="ANALYTICS_LAST_VIEWED_SEARCH_ANALYZE_LOCATION",AnalyticsViewService.URL_PARAM_SEARCH_ID="searchId",AnalyticsViewService.$inject=["$location","navigationService","notificationService","resourceManager"],AnalyticsViewService}(ViewServiceBase);adComponentsModule.service("analyticsViewService",AnalyticsViewService),define("app/view/analytics/services/AnalyticsViewService",function(){});var AnalyticsScopeSelectorDirective=function(){function AnalyticsScopeSelectorDirective(){return{restrict:"E",replace:!1,scope:{adScopeVariable:"="},templateUrl:"app/view/analytics/scopeSelector/AnalyticsScopeSelectorView.html",controller:AnalyticsScopeSelectorController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return AnalyticsScopeSelectorDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-analytics-scope-selector"),AnalyticsScopeSelectorDirective),define("app/view/analytics/scopeSelector/AnalyticsScopeSelectorDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsScopeSelectorController=function(_super){function AnalyticsScopeSelectorController($scope){var _this=this;_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.analyticsViewService=AnalyticsViewService.instance(),this.isUserAnalyticsWebEnabled=!1,this.isUserAnalyticsMobileEnabled=!1,this.$scope.controller=this,EventBusService.instance().registerEventListener(NavigationService.UEV_NAV_ACTION,function(){_this.setupButton()},this.$scope),MasterService.instance().onInitDataFetch().then(function(){_this.mainNavConfig=MasterService.instance().initData.mainNavConfig,_this.isUserAnalyticsWebEnabled=_this.mainNavConfig.showEum&&FeatureService.instance().isWebEUMProEnabled(),_this.isUserAnalyticsMobileEnabled=_this.mainNavConfig.showEum&&FeatureService.instance().isMobileEUMProEnabled()})}return __extends(AnalyticsScopeSelectorController,_super),AnalyticsScopeSelectorController.prototype.link=function(scope,iElement){this.element=iElement,this.setupButton()},AnalyticsScopeSelectorController.prototype.setupButton=function(){var location=URLParams.getCurrentUrlParams().location();location==NavigationDataConstants.ANALYTICS_TRANSACTIONS?this.buttonLabel=this.getString("ms_transactions"):location==NavigationDataConstants.ANALYTICS_LOGS?this.buttonLabel=this.getString("ms_logs"):location==NavigationDataConstants.ANALYTICS_USER_WEB_ACTIVITY?this.buttonLabel=StringUtils.appendBeta(this.getString("ms_browserRequests")):location==NavigationDataConstants.ANALYTICS_USER_MOBILE_ACTIVITY&&(this.buttonLabel=StringUtils.appendBeta(this.getString("ms_mobileRequests")))},AnalyticsScopeSelectorController.prototype.onClickTransactions=function(){this.analyticsViewService.viewTransactionAnalytics(!1)},AnalyticsScopeSelectorController.prototype.onClickLogs=function(){this.analyticsViewService.viewLogAnalytics(!1)},AnalyticsScopeSelectorController.prototype.onClickWeb=function(){this.analyticsViewService.viewUserWebActivityAnalytics(!1)},AnalyticsScopeSelectorController.prototype.onClickMobile=function(){this.analyticsViewService.viewUserMobileActivityAnalytics(!1)},AnalyticsScopeSelectorController.$inject=["$scope"],AnalyticsScopeSelectorController}(ControllerBase);appdynamicsModule.controller("AnalyticsScopeSelectorController",AnalyticsScopeSelectorController),define("app/view/analytics/scopeSelector/AnalyticsScopeSelectorController",function(){});
var AnalyticsD3WidgetHelper=function(){function AnalyticsD3WidgetHelper(){}return AnalyticsD3WidgetHelper.createLabel=function(elem,data,containsValidResult){var textToDisplay,elemSelection=d3.select(elem[0]);if(elemSelection.selectAll("div").remove(),containsValidResult){textToDisplay=ViewUtil.formatNumber(StringUtils.parseStringAsNumber(data),2);{elemSelection.append("div").attr("class","number-label").style("font-size",function(){return WebUtil.getResponsiveFontSize(elem.width(),elem.height())+"px"}).text(textToDisplay)}}else{textToDisplay=data;{elemSelection.append("div").style("position","relative").style("top","50%").text(textToDisplay)}}},AnalyticsD3WidgetHelper.createTable=function(elem,data,widgetDefinition,breakupData){var headers,elemSelection=d3.select(elem[0]);elemSelection.selectAll("div").remove();var xAxisColumnHeader,yAxisColumnHeader,tableSelection=elemSelection.append("div").append("table").attr("class","table ads-table"),tableBodySelection=tableSelection.append("tbody").style("text-align","left"),operation=AnalyticsUtils.getDisplayLabelForOperation(widgetDefinition.operation);if(xAxisColumnHeader=widgetDefinition.xAxisFields.length>0?widgetDefinition.xAxisFields[0].displayName:"",yAxisColumnHeader=widgetDefinition.yAxisFields.length>0?operation+" - "+widgetDefinition.yAxisFields[0].displayName:operation,Util.isDefAndNotNull(breakupData)){AnalyticsWidgetHelper.isSingleFieldOnXAndYCase(widgetDefinition)?(headers=data.map(function(s){return s.label}),headers.unshift("")):headers=[xAxisColumnHeader,yAxisColumnHeader],AnalyticsD3WidgetHelper.addTableHeader(tableSelection,headers),tableBodySelection.selectAll("tr").data(breakupData.series).enter().append("tr").each(function(d){var trSel=d3.select(this);trSel.append("td").text(d.name),d.data.forEach(function(s){trSel.append("td").text(s)})});var totalRow=tableBodySelection.append("tr");totalRow.append("td").style("border-top-color","black").text(ResourceManager.instance().getString("ui","ms_total"));for(var i=1;i<headers.length;i++){var totalVal=0;breakupData.series.forEach(function(d){totalVal+=d.data[i-1]}),totalRow.append("td").style("border-top-color","black").text(totalVal)}}else{headers=[xAxisColumnHeader,yAxisColumnHeader],AnalyticsD3WidgetHelper.addTableHeader(tableSelection,headers);var tableRowSelection=tableBodySelection.selectAll("tr").data(data).enter().append("tr");tableRowSelection.append("td").text(function(d){return d.label}),tableRowSelection.append("td").text(function(d){return d.data[0][1]});var totalRow=tableBodySelection.append("tr");totalRow.append("td").style("border-top-color","black").text(ResourceManager.instance().getString("ui","ms_total"));var totalVal=0;data.forEach(function(d){totalVal+=d.data[0][1]}),totalRow.append("td").style("border-top-color","black").text(totalVal)}},AnalyticsD3WidgetHelper.addTableHeader=function(tableSel,headers){tableSel.append("thead").append("tr").selectAll("th").data(headers).enter().append("th").text(function(d){return d})},AnalyticsD3WidgetHelper.createCirclePack=function(elem,data){var tree=AnalyticsD3WidgetHelper.convertToTree(data),container=elem.closest(".ads-analytics-widget-container"),width=container.width()-30,height=container.height()-30,diameter=Math.min(width,height),format=d3.format(",d"),pack=d3.layout.pack().size([diameter-4,diameter-4]).value(function(d){return d.size}),elementSelector=d3.select(elem[0]);elementSelector.selectAll("svg").remove();var svg=elementSelector.append("svg").attr("width",diameter).attr("height",diameter).append("g").attr("transform","translate(2,2)"),node=svg.datum(tree).selectAll(".ads-circle").data(pack.nodes).enter().append("g").attr("class",function(d){return d.children?"ads-circle":"ads-leaf ads-circle"}).attr("transform",function(d){return isNaN(d.x)||isNaN(d.y)?"":"translate("+d.x+","+d.y+")"});node.append("title").text(function(d){return d.name+(d.children?"":": "+format(d.size))}),node.append("circle").attr("r",function(d){return isNaN(d.r)?0:d.r}),node.filter(function(d){return!d.children}).append("text").attr("dy",".3em").style("text-anchor","middle").style("font-size","11px").text(function(d){return AnalyticsD3WidgetHelper.getFormattedTextForCirclePack(d)}),d3.select(self.frameElement).style("height",diameter+"px")},AnalyticsD3WidgetHelper.getFormattedTextForCirclePack=function(d){var format=d3.format(",d"),result="",sizeValue="",label=d.name.toString();return 0===d.size||d.children?result=AnalyticsD3WidgetHelper.truncateCircleMapLabel(d.r/3,label):(result=AnalyticsD3WidgetHelper.truncateCircleMapLabel(d.r/4-3,label),sizeValue=format(d.size).toString(),sizeValue.length>d.r/3&&(sizeValue=StringUtils.truncateString(sizeValue,d.r/3,!0)),result=result+": "+sizeValue),result},AnalyticsD3WidgetHelper.truncateCircleMapLabel=function(maxLength,label){var result="",lastSegment=label,lastSegmentIndex=label.lastIndexOf("/");return lastSegmentIndex>=0&&(lastSegment=lastSegment.substring(lastSegmentIndex)),result=label.length<maxLength?label:lastSegment.length>maxLength?StringUtils.truncateString(lastSegment,maxLength,!0):StringUtils.truncateString(label,maxLength-lastSegment.length,!0)+lastSegment},AnalyticsD3WidgetHelper.createTreemap=function(elem,data){var tree=AnalyticsD3WidgetHelper.convertToTree(data),container=elem.closest(".ads-analytics-widget-container"),format=d3.format(",d"),width=container.width()-30,height=container.height()-30,color=d3.scale.ordinal().range(AdColorPalette.DEFAULT_PALETTE_20),div=d3.select(elem[0]);div.selectAll("div").remove(),div.append("div").style("position","relative");{var treemap=d3.layout.treemap().size([width,height]).sticky(!0).value(function(d){return d.size});div.datum(tree).selectAll(".ads-treemap-box").data(treemap.nodes).enter().append("div").attr("class","ads-treemap-box").attr("title",function(d){return d.name+(d.children?"":": "+format(d.size))}).call(function(){this.style("left",function(d){return d.x+"px"}).style("top",function(d){return d.y+"px"}).style("width",function(d){return Math.max(0,d.dx-1)+"px"}).style("height",function(d){return Math.max(0,d.dy-1)+"px"})}).style("background-color",function(d){return"root"===d.name?"#fff":d.breakup?null:color(d.name)}).append("div").attr("class","ads-ellipsis").style("font-size",function(){return"11px"}).style("color","white").text(function(d){return d.name+(d.children?"":": ")}).append("div").attr("class","ads-ellipsis").style("font-size",function(d){return Math.max(20,.18*Math.sqrt(d.area))+"px"}).style("color","white").text(function(d){return d.children?"":format(d.size)})}},AnalyticsD3WidgetHelper.convertToTree=function(data){return{name:"root",children:_.map(data,AnalyticsD3WidgetHelper.processData)}},AnalyticsD3WidgetHelper.processData=function(node){return _.isEmpty(node)?null:_.isArray(node.data)&&1===node.data.length?{name:node.label,size:node.data[0][1]}:{name:node.label,children:_.map(node.data,function(d){return{name:d[0],size:d[1]}})}},AnalyticsD3WidgetHelper}();define("app/view/analytics/AnalyticsD3WidgetHelper",function(){});var AnalyticsWidgetHelper=function(){function AnalyticsWidgetHelper(){}return AnalyticsWidgetHelper.getFieldFromPanel=function(panel){var fullPathFieldName;if(panel.yAxisFields&&panel.yAxisFields.length>0){var analyticsField=panel.yAxisFields[0];fullPathFieldName=analyticsField.fullPath}return fullPathFieldName?fullPathFieldName:panel.field},AnalyticsWidgetHelper.isSearchPanelHistorgamChart=function(panel){return 1==panel.isSearchPanelHistorgam},AnalyticsWidgetHelper.isNoFieldsOnYCase=function(panel){return!panel.yAxisFields||0==panel.yAxisFields.length},AnalyticsWidgetHelper.isBreakupEnabled=function(panel){return"true"==panel.breakup},AnalyticsWidgetHelper.getIndexType=function(panel){return panel.indexType},AnalyticsWidgetHelper.isSingleFieldOnXCase=function(panel){return panel.xAxisFields&&1==panel.xAxisFields.length&&(_.isUndefined(panel.yAxisFields)||0==panel.yAxisFields.length)},AnalyticsWidgetHelper.isSingleFieldOnYCase=function(panel){return panel.yAxisFields&&1==panel.yAxisFields.length&&(_.isUndefined(panel.xAxisFields)||0==panel.xAxisFields.length)},AnalyticsWidgetHelper.isSingleFieldOnXAndYCase=function(panel){return panel.yAxisFields&&1==panel.yAxisFields.length&&panel.xAxisFields&&1==panel.xAxisFields.length},AnalyticsWidgetHelper.isRangeAggregationOnNumericField=function(metaDataService,panel){return(AnalyticsWidgetHelper.isSingleFieldOnXCase(panel)||AnalyticsWidgetHelper.isSingleFieldOnXAndYCase(panel)&&panel.operation!==ChartBuilderController.COUNT_DISTINCT)&&metaDataService.isFieldDefinitionTypeNumeric(panel.xAxisFields[0].fieldDefinition)?!0:!1},AnalyticsWidgetHelper.isMultipleFieldOnYCase=function(panel){return panel.yAxisFields&&2==panel.yAxisFields.length&&(Util.isUndefOrNull(panel.xAxisFields)||0==panel.xAxisFields.length)},AnalyticsWidgetHelper.getAnalyticsFieldFromPanel=function(panel,index){if(void 0===index&&(index=0),panel.yAxisFields&&index<panel.yAxisFields.length){var analyticsField=panel.yAxisFields[index];return analyticsField}return null},AnalyticsWidgetHelper.getFieldFromPanelForMF=function(panel,index){void 0===index&&(index=0);var fullPathFieldName;if(panel.yAxisFields&&index<panel.yAxisFields.length){var analyticsField=panel.yAxisFields[index];fullPathFieldName=analyticsField.fullPath}return fullPathFieldName?fullPathFieldName:panel.field},AnalyticsWidgetHelper}();define("app/view/analytics/widgets/AnalyticsWidgetHelper",function(){});var AnalyticsSearchFacade=function(){function AnalyticsSearchFacade(context){this.context=context,this.filteredFieldsArray=[],this.filterSet=context.filter,this.selectedTimeRange=context.timeRange;var timeRangeConvertedToBetweenTimes=DateTimeUtil.convertToBetweenTimes(this.selectedTimeRange);this.startTime=timeRangeConvertedToBetweenTimes.startTime,this.entTime=timeRangeConvertedToBetweenTimes.endTime,this.metaDataService=MetaDataService.instance(),this.analyticsSearchUiService=AnalyticsSearchUiService.instance(),this.buildFilteredFieldArray(context.filter)}return AnalyticsSearchFacade.prototype.buildQuery=function(size,isScheduledQuery,applyTimeRangeFilter){void 0===isScheduledQuery&&(isScheduledQuery=!1),void 0===applyTimeRangeFilter&&(applyTimeRangeFilter=!0);var boolQuery=ejs.BoolQuery(),anyQueriesApplied=!1;anyQueriesApplied=this.allAllBoolQueriesForFilterSet(boolQuery,this.filterSet,AnalyticsSearchFacade.BOOL_MUST)||anyQueriesApplied,this.context.implicitFilterSet&&(anyQueriesApplied=this.allAllBoolQueriesForFilterSet(boolQuery,this.context.implicitFilterSet,AnalyticsSearchFacade.BOOL_MUST)||anyQueriesApplied),anyQueriesApplied||boolQuery.must(ejs.MatchAllQuery());var boolFilter=ejs.BoolFilter(),anyFiltersApplied=!1;applyTimeRangeFilter&&(AnalyticsSearchFacade.sessionRecordFieldCategories.indexOf(this.context.indexType)>-1?this.addTimeRangeFiltersForSessionRecords(boolFilter,isScheduledQuery):boolFilter.must(this.getFilterForTimeRange(isScheduledQuery))),anyFiltersApplied=this.addAllBoolFiltersForFilterSet(boolFilter,this.filterSet)||anyFiltersApplied,this.context.implicitFilterSet&&(anyFiltersApplied=this.addAllBoolFiltersForFilterSet(boolFilter,this.context.implicitFilterSet)||anyFiltersApplied),anyFiltersApplied||boolFilter.must(ejs.MatchAllFilter());var queryFilter=this.getFilteredQuery(boolQuery,boolFilter);return this.ejsRequest=this.getBaseRequest(),this.ejsRequest.query(queryFilter),this.applySize(size),this.ejsRequest},AnalyticsSearchFacade.prototype.getAllFilteredFields=function(){return this.filteredFieldsArray},AnalyticsSearchFacade.prototype.applySize=function(size){return this.ejsRequest.size(_.isUndefined(size)?0:size),this.ejsRequest},AnalyticsSearchFacade.prototype.applySort=function(sortFieldFullPath,sortOrder){var sort;if(!_.isUndefined(sortFieldFullPath)){var ejsSort=ejs.Sort(),nestedParent=this.metaDataService.getNestedParentPath(sortFieldFullPath);nestedParent&&ejsSort.nestedPath(nestedParent),sort=_.isUndefined(sortOrder)||sortOrder!=AnalyticsSearchFacade.SORT_ASC?[ejsSort.field(sortFieldFullPath).order(AnalyticsSearchFacade.SORT_DESC)]:[ejsSort.field(sortFieldFullPath).order(sortOrder)],this.ejsRequest.sort(sort)}return this.ejsRequest},AnalyticsSearchFacade.prototype.getBaseRequest=function(){return ejs.Request()},AnalyticsSearchFacade.prototype.getFilteredQuery=function(boolQuery,boolFilter){return ejs.FilteredQuery(boolQuery,boolFilter)},AnalyticsSearchFacade.prototype.allAllBoolQueriesForFilterSet=function(bool,fSet,boolType){var _this=this,anyQueryApplied=!1;return _.each(fSet.filters,function(iFilter){for(var queries=_this.getQueriesForField(iFilter),i=0;i<queries.length;i++){var query=queries[i];if(query)switch(anyQueryApplied=!0,boolType){case"either":bool.should(query);break;default:bool.must(query)}}}),anyQueryApplied},AnalyticsSearchFacade.prototype.addAllBoolFiltersForFilterSet=function(bool,fSet){var _this=this,anyFilterApplied=!1;return _.each(fSet.filters,function(iFilter){var filters,addToShould;iFilter.type===FilterType.PAGE&&3!==_this.context.analyticsMode&&iFilter.isFilteringByPageName()?(addToShould=!0,filters=_this.getFiltersForPageNameFiltering(iFilter)):(addToShould=!1,filters=_this.getFiltersForField(iFilter));for(var i=0;i<filters.length;i++){var filter=filters[i];filter&&(anyFilterApplied=!0,addToShould?bool.should(filter):bool.must(filter))}}),anyFilterApplied},AnalyticsSearchFacade.prototype.getFilterForTimeRange=function(isScheduledQuery){return void 0===isScheduledQuery&&(isScheduledQuery=!1),this.getFilterForAffVo(this.getAffVoForTimeRange(isScheduledQuery))},AnalyticsSearchFacade.prototype.addTimeRangeFiltersForSessionRecords=function(boolFilter,isScheduledQuery){void 0===isScheduledQuery&&(isScheduledQuery=!1);if(isScheduledQuery)var startTimeRangeFilter=ejs.RangeFilter(AnalyticsField.endTimeMs).gte(AnalyticsSearchFacade.START_TIME),endTimeRangeFilter=ejs.RangeFilter(AnalyticsField.startTimeMs).lte(AnalyticsSearchFacade.END_TIME);else{if(this.startTime)var startTimeRangeFilter=ejs.RangeFilter(AnalyticsField.endTimeMs).gte(this.startTime.valueOf());if(this.entTime)var endTimeRangeFilter=ejs.RangeFilter(AnalyticsField.startTimeMs).lte(this.entTime.valueOf())}startTimeRangeFilter&&boolFilter.must(startTimeRangeFilter),endTimeRangeFilter&&boolFilter.must(endTimeRangeFilter)},AnalyticsSearchFacade.prototype.getQueriesForField=function(iFilter){var affVoArr=iFilter.getAffVoFromIFilter(this.context),queries=[];if(affVoArr)for(var i=0;i<affVoArr.length;i++){var affVo=affVoArr[i];this.isValidAffVo(affVo)&&queries.push(this.getQueryForAffVo(affVo))}return queries},AnalyticsSearchFacade.prototype.getFiltersForField=function(iFilter){for(var affVoArr=iFilter.getAffVoFromIFilter(this.context),filters=[],i=0;i<affVoArr.length;i++){var affVo=affVoArr[i];affVo&&this.isValidAffVo(affVo)&&filters.push(this.getFilterForAffVo(affVo))}return filters},AnalyticsSearchFacade.prototype.getFiltersForPageNameFiltering=function(iFilter){var _this=this,pageFilterAffVoArr=iFilter.getAffVoFromIFilter(this.context),parentPath=MetaDataService.instance().getNestedParentPath(pageFilterAffVoArr[0].fieldName);return _.map(pageFilterAffVoArr[0].andFilterPairs,function(andFilterPair){var pageNameFilter=_this.getFilterForAffVo(andFilterPair.pageNameAffVo),pageTypeFilter=_this.getFilterForAffVo(andFilterPair.pageTypeAffVo),andFilter=ejs.AndFilter([pageNameFilter,pageTypeFilter]);return parentPath?ejs.NestedFilter(parentPath).filter(andFilter):andFilter})},AnalyticsSearchFacade.prototype.getQueryForAffVo=function(affVo){if(affVo)switch(affVo.esFilterType){case AnalyticsSearchFacade.ES_MATCH_QUERY.toString():var searchText=affVo.fieldValues[0];searchText=searchText.charAt(0)+searchText.substring(1,searchText.length-1).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+searchText.charAt(searchText.length-1),searchText=encodeURIComponent(searchText).replace(/%2F/g,"/");var matchQuery=ejs.MatchQuery(affVo.fieldName,searchText),parentPath=this.metaDataService.getNestedParentPath(affVo.fieldName);return _.isUndefined(parentPath)?matchQuery:ejs.NestedQuery(parentPath).query(matchQuery);case AnalyticsSearchFacade.ES_MATCH_ALL_QUERY.toString():var searchText=encodeURIComponent(affVo.fieldValues[0]).replace(/%2F/g,"/"),matchQueryForAllFields=ejs.MatchQuery(AnalyticsSearchFacade._ALL,searchText);return matchQueryForAllFields.type(AnalyticsSearchFacade.PHRASE),matchQueryForAllFields;case AnalyticsSearchFacade.ES_QUERY_STRING_QUERY.toString():var fieldValues=[],analyticsField=AnalyticsFields.getByFullPath(affVo.fieldName,this.metaDataService.currentFields.allFields),fieldDef=analyticsField.fieldDefinition,isRegexQuery=!1;if(affVo.fieldValues)for(var i=0;i<affVo.fieldValues.length;i++)if("string"==typeof affVo.fieldValues[i]){var query=affVo.fieldValues[i];StringUtils.startsWith(query,FilterSet.REGEX_TOKEN)&&(isRegexQuery=!0),query=this.convertQueryString(query,fieldDef),query=encodeURIComponent(query).replace(/%2F/g,"/"),fieldValues.push(query)}var parentPath,queryStringQuery=ejs.QueryStringQuery(fieldValues.join(" "));return affVo.fieldName&&(queryStringQuery.defaultField(affVo.fieldName),parentPath=this.metaDataService.getNestedParentPath(affVo.fieldName),queryStringQuery.lowercaseExpandedTerms(isRegexQuery?!0:!1)),queryStringQuery.defaultOperator("AND"),queryStringQuery.allowLeadingWildcard(!1),this.isAnalyzeWildcard(affVo.fieldValues[0],fieldDef)&&queryStringQuery.analyzeWildcard(!0),_.isUndefined(parentPath)?queryStringQuery:ejs.NestedQuery(parentPath).query(queryStringQuery);default:return null}},AnalyticsSearchFacade.prototype.convertQueryString=function(query){var isRegexQuery=!1,searchTerm="";if(StringUtils.startsWith(query,FilterSet.REGEX_TOKEN))searchTerm=StringUtils.getEverythingAfterToken(query,FilterSet.REGEX_TOKEN).trim(),searchTerm=searchTerm.replace(/\//g,"\\/"),searchTerm="/"+searchTerm+"/",isRegexQuery=!0;else{for(var startingChar,endingChar,words=this.getArrayOfQueryStringValues(query),beginningOfPhrase=!0,i=0;i<words.length;i++)words[i].length>0&&("NOT"===words[i]?(searchTerm+=words[i]+" ",beginningOfPhrase=!0):"OR"===words[i]||"AND"===words[i]?(startingChar=searchTerm.charAt(searchTerm.length-1),searchTerm+=" "+words[i]+" ",beginningOfPhrase=!0):(startingChar=words[i].charAt(0),beginningOfPhrase||(searchTerm+="\\\\ "),searchTerm+=words[i],beginningOfPhrase=!1));endingChar=searchTerm.charAt(searchTerm.length-1),searchTerm=searchTerm.replace(/\//g,"\\/")}var arrayOfSpecialCharacters=[".","?","+","*","|","(",")",'"',"{","}","[","]",":","/"];return searchTerm=this.escapeSpecialCharacters(searchTerm,arrayOfSpecialCharacters,isRegexQuery)},AnalyticsSearchFacade.prototype.getArrayOfQueryStringValues=function(query){for(var arrayOfQueryTerms=[],indicesOfDoubleQuotes=[],idxOfDoubleQuotes=query.indexOf('"');-1!=idxOfDoubleQuotes;)indicesOfDoubleQuotes.push(idxOfDoubleQuotes),idxOfDoubleQuotes=query.indexOf('"',idxOfDoubleQuotes+1);if(indicesOfDoubleQuotes.length%2===0){for(var i=0;i<indicesOfDoubleQuotes.length;){var indexOfLeadingQuote=indicesOfDoubleQuotes[i],indexOfTrailingQuote=indicesOfDoubleQuotes[i+1];arrayOfQueryTerms.push(query.substring(indexOfLeadingQuote,indexOfTrailingQuote+1)),i+2<indicesOfDoubleQuotes.length&&arrayOfQueryTerms.push(query.substring(indexOfTrailingQuote+2,indicesOfDoubleQuotes[i+2])),i+=2}var queryWithoutThePhrases=query;_.each(arrayOfQueryTerms,function(phrase){queryWithoutThePhrases=queryWithoutThePhrases.replace(phrase,"")}),arrayOfQueryTerms=arrayOfQueryTerms.concat(queryWithoutThePhrases.split(" "))}else arrayOfQueryTerms=query.split(" ");return arrayOfQueryTerms},AnalyticsSearchFacade.prototype.isAnalyzeWildcard=function(queryString,fieldDef){return fieldDef.aggregationsAllowed||StringUtils.startsWith(queryString,FilterSet.REGEX_TOKEN)||!this.isCharacterNotEscaped(queryString,"*")&&!this.isCharacterNotEscaped(queryString,"?")?!1:!0},AnalyticsSearchFacade.prototype.isCharacterNotEscaped=function(queryString,token){for(var resultArray=StringUtils.getAllIndexesOfTokenInString(queryString,token),index=0;index<resultArray.length;index++){var indexOfWildcard=resultArray[index];if(indexOfWildcard>0&&"\\"!==queryString.charAt(indexOfWildcard-1))return!0}return!1},AnalyticsSearchFacade.prototype.escapeSpecialCharacters=function(queryString,arrayOfSpecialCharacters,isRegexQuery){for(var ispecialChar=0;ispecialChar<arrayOfSpecialCharacters.length;ispecialChar++){var token=arrayOfSpecialCharacters[ispecialChar];if('"'===token){var replaceValue="\\"+token;queryString=queryString.split(token).join(replaceValue)}else if(isRegexQuery||!isRegexQuery&&("*"===token||"?"===token)){var escapedToken="\\"+token,replaceValue="\\\\"+token;queryString=queryString.split(escapedToken).join(replaceValue)}else{var replaceValue="\\\\"+token;queryString=queryString.split(token).join(replaceValue)}}return queryString=queryString.replace(/\\\\\\\\/g,"\\\\"),queryString=queryString.replace(/\\\\\\/g,"\\\\")},AnalyticsSearchFacade.prototype.getFilterForAffVo=function(affVo){if(affVo)switch(affVo.esFilterType){case AnalyticsSearchFacade.ES_FILTER_TIME.toString():var timeField=AnalyticsField.eventTimestamp;if(this.startTime)var timeRangeFilter=ejs.RangeFilter(timeField).from(this.startTime.valueOf());return this.entTime&&timeRangeFilter.to(this.entTime.valueOf()),timeRangeFilter;case AnalyticsSearchFacade.ES_FILTER_TIME_WITH_TOKENS.toString():var timeField=AnalyticsField.eventTimestamp,timeRangeFilter=ejs.RangeFilter(timeField).from(AnalyticsSearchFacade.START_TIME);return timeRangeFilter.to(AnalyticsSearchFacade.END_TIME),timeRangeFilter;case"range":var rangeFilter=ejs.RangeFilter(affVo.fieldName);Util.isDefAndNotNull(affVo.rangeStart)&&rangeFilter.from(affVo.rangeStart),Util.isDefAndNotNull(affVo.rangeEnd)&&rangeFilter.to(affVo.rangeEnd);var parentPath=this.metaDataService.getNestedParentPath(affVo.fieldName);return _.isUndefined(parentPath)?rangeFilter:ejs.NestedFilter(parentPath).filter(rangeFilter);case"nonequality":var equalityFilter=ejs.TermFilter(affVo.fieldName,Number(affVo.equalityValue)),nonequalityFilter=ejs.NotFilter(equalityFilter),parentPath=this.metaDataService.getNestedParentPath(affVo.fieldName);return _.isUndefined(parentPath)?nonequalityFilter:ejs.NestedFilter(parentPath).filter(nonequalityFilter);case"equality":var equalityFilter=ejs.TermFilter(affVo.fieldName,Number(affVo.equalityValue)),parentPath=this.metaDataService.getNestedParentPath(affVo.fieldName);return _.isUndefined(parentPath)?equalityFilter:ejs.NestedFilter(parentPath).filter(equalityFilter);case"terms":var termsFilter=ejs.TermsFilter(affVo.fieldName,affVo.fieldValues),parentPath=this.metaDataService.getNestedParentPath(affVo.fieldName);return _.isUndefined(parentPath)?termsFilter:ejs.NestedFilter(parentPath).filter(termsFilter);case"nestedFilter":var termsFilter=ejs.TermsFilter(affVo.fieldName,affVo.fieldValues),parentPath=this.metaDataService.getNestedParentPath(affVo.fieldName);return _.isUndefined(parentPath)&&ADLoggerService.warn("AnalyticsSearchFacade - Missing parentPath for nested filter."),ejs.NestedFilter(parentPath).filter(termsFilter);default:return null}},AnalyticsSearchFacade.prototype.buildFilteredFieldArray=function(filterSet){var _this=this;_.each(filterSet.filters,function(iFilter){if(iFilter.type===FilterType.TEXT){var inputEjsTextFilter=iFilter;_this.filteredFieldsArray.push(inputEjsTextFilter.selectedAnalyticsField.fieldDefinition)}else if(iFilter.type===FilterType.NUMERIC){var EjsNumericFilter=iFilter;_this.filteredFieldsArray.push(EjsNumericFilter.analyticsField.fieldDefinition)}})},AnalyticsSearchFacade.prototype.getAffVoForTimeRange=function(isScheduledQuery){void 0===isScheduledQuery&&(isScheduledQuery=!1);var affVo={};return affVo.fieldName=AnalyticsField.eventTimestamp,affVo.esFilterType=isScheduledQuery?AnalyticsSearchFacade.ES_FILTER_TIME_WITH_TOKENS:AnalyticsSearchFacade.ES_FILTER_TIME,affVo},AnalyticsSearchFacade.prototype.isValidAffVo=function(affVo){var isValid=!1;return affVo.fieldValues&&affVo.fieldValues.length>0&&(isValid=!0),(Util.isDefAndNotNull(affVo.rangeStart)||Util.isDefAndNotNull(affVo.rangeEnd))&&(isValid=!0),Util.isDefAndNotNull(affVo.equalityValue)&&(isValid=!0),isValid},AnalyticsSearchFacade.prototype.addPercentileAggregation=function(field,percentileArray){var perAgg=ejs.PercentilesAggregation(AnalyticsSearchFacade.PERCENTILES_AGGREGATION);perAgg.field(field),perAgg.percents(percentileArray);var nestedAgg,pathVal=MetaDataService.instance().getNestedParentPath(field);return _.isUndefined(pathVal)?this.ejsRequest.aggregation(perAgg):(nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME),nestedAgg.path(pathVal),nestedAgg.agg(perAgg),this.ejsRequest.aggregation(nestedAgg)),this.ejsRequest},AnalyticsSearchFacade.prototype.addHistogramAggregationForCardinality=function(interval,fieldName){var dateAgg=ejs.DateHistogramAggregation(AnalyticsSearchFacade.DATE_HISTOGRAM_AGGREGATION);dateAgg=dateAgg.field(AnalyticsField.eventTimestamp),dateAgg=dateAgg.interval(interval),dateAgg=dateAgg.minDocCount(0),dateAgg=dateAgg.extendedBounds(this.startTime,this.entTime);var cardinalityAgg=this.buildCardinalityAggregation(fieldName);return dateAgg.agg(cardinalityAgg),this.ejsRequest=this.ejsRequest.aggregation(dateAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addHistogramAggregation=function(interval,fetchStats,fieldName,breakdownField){var histogramAgg=this.buildHistogramAggregation(interval,fetchStats,fieldName,breakdownField);return this.ejsRequest.aggregation(histogramAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addCardinalityAggregation=function(field){var cardinalityAgg=this.buildCardinalityAggregation(field);return this.ejsRequest.aggregation(cardinalityAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.buildCardinalityAggregation=function(fieldName){var cardinalityAgg=this.getCardinalityAggregation(fieldName),pathVal=this.metaDataService.getNestedParentPath(fieldName);if(!_.isUndefined(pathVal)){var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME);return nestedAgg.path(pathVal),nestedAgg.agg(cardinalityAgg),nestedAgg}return cardinalityAgg},AnalyticsSearchFacade.prototype.getCardinalityAggregation=function(fieldName){var cardinalityAgg=ejs.CardinalityAggregation(AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME);return cardinalityAgg.field(fieldName),cardinalityAgg},AnalyticsSearchFacade.prototype.addStatsAggregation=function(field){var statsAgg=this.buildStatsAggregation(field);return this.ejsRequest.aggregation(statsAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.buildStatsAggregation=function(fieldName){var statsAgg=this.getStatsAggregation(fieldName),pathVal=this.metaDataService.getNestedParentPath(fieldName);if(!_.isUndefined(pathVal)){var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME);return nestedAgg.path(pathVal),nestedAgg.agg(statsAgg),nestedAgg}return statsAgg},AnalyticsSearchFacade.prototype.addStatsAggregationForMetricWidget=function(field,statsAggregationName){var statsAgg=ejs.StatsAggregation(statsAggregationName);return statsAgg.field(field),this.ejsRequest.aggregation(statsAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addExistsAggregation=function(fieldName,breakdownField){var existsAgg=this.buildExistsAggregation(fieldName);return breakdownField&&(existsAgg=this.buildExistsAggregationWithTermsBreakdown(fieldName,breakdownField)),this.ejsRequest.aggregation(existsAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.buildExistsAggregation=function(fieldName){var filterAggWithExistsFilter=this.buildFilterAggregationWithExistsFilter(fieldName),pathVal=this.metaDataService.getNestedParentPath(fieldName);if(!_.isUndefined(pathVal)){var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME);return nestedAgg.path(pathVal),nestedAgg.agg(filterAggWithExistsFilter),nestedAgg}return filterAggWithExistsFilter},AnalyticsSearchFacade.prototype.buildExistsAggregationWithTermsBreakdown=function(fieldName,breakdownField){var filterAgg=ejs.FilterAggregation(AnalyticsSearchFacade.FILTER_AGGREGATION_NAME),existsFilter=this.buildExistsFilter(fieldName),breakdownAgg=this.buildTermsAggregation(AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME,breakdownField.fullPath);filterAgg.filter(existsFilter),filterAgg.agg(breakdownAgg);var pathVal=this.metaDataService.getNestedParentPath(fieldName);if(!_.isUndefined(pathVal)){var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME);return nestedAgg.path(pathVal),nestedAgg.agg(filterAgg),nestedAgg}return filterAgg},AnalyticsSearchFacade.prototype.addPercentilesDistribution=function(field,percents,interval,minValue,maxValue){var histAgg=ejs.HistogramAggregation(AnalyticsSearchFacade.HISTOGRAM_AGGREGATION);histAgg.field(field.fullPath),histAgg.interval(interval);var rangeFilter=ejs.RangeFilter(field.fullPath);minValue&&!isNaN(minValue)&&rangeFilter.from(minValue),maxValue&&!isNaN(maxValue)&&rangeFilter.to(maxValue);var filteredHistAgg=ejs.FilterAggregation(AnalyticsSearchFacade.FILTERED_HISTOGRAM_AGGREGATION);filteredHistAgg.filter(rangeFilter),filteredHistAgg.aggregation(histAgg);var extremeValuesAgg=ejs.StatsAggregation(AnalyticsSearchFacade.STATS_AGGREGATION_NAME);extremeValuesAgg.field(field.fullPath);var extremeValuesRangeFilter=ejs.RangeFilter(field.fullPath);maxValue&&!isNaN(maxValue)&&extremeValuesRangeFilter.from(maxValue);var filteredExtremeValuesAgg=ejs.FilterAggregation(AnalyticsSearchFacade.FILTERED_STATS_AGG);filteredExtremeValuesAgg.filter(extremeValuesRangeFilter),filteredExtremeValuesAgg.aggregation(extremeValuesAgg);var percAgg=ejs.PercentilesAggregation(AnalyticsSearchFacade.PERCENTILES_AGGREGATION);percAgg.compression(10),percAgg.field(field.fullPath),percAgg.percents(percents);var statsAgg=ejs.StatsAggregation(AnalyticsSearchFacade.STATS_AGGREGATION_NAME);statsAgg.field(field.fullPath);var pathVal=this.metaDataService.getNestedParentPath(field.fullPath);if(_.isUndefined(pathVal))this.ejsRequest.aggregation(filteredHistAgg),this.ejsRequest.aggregation(percAgg),this.ejsRequest.aggregation(statsAgg),this.ejsRequest.aggregation(filteredExtremeValuesAgg);else{var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME);nestedAgg.path(pathVal),nestedAgg.aggregation(filteredHistAgg),nestedAgg.aggregation(percAgg),nestedAgg.aggregation(statsAgg),nestedAgg.aggregation(filteredExtremeValuesAgg),this.ejsRequest.aggregation(nestedAgg)}return this.ejsRequest},AnalyticsSearchFacade.prototype.addDateHistogramWithStats=function(interval,field){var histogramAgg=this.buildHistogramAggregation(interval,Util.isDefAndNotNull(field),field.displayName);return this.ejsRequest.aggregation(histogramAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addNestedTermsAggregation=function(fields){var _this=this,termsAgg=this.buildTermsAggregation(AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,fields[0].fullPath);return termsAgg.agg(),_.forEach(fields,function(element,index){if(index){var nestedAgg=_this.buildTermsAggregation(AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,element.fullPath);termsAgg.agg(nestedAgg)}}),this.ejsRequest.aggregation(termsAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addTermsAggregation=function(xAxisField,yAxisField,isCardinality,breakDownField,maxSize,aggName){void 0===isCardinality&&(isCardinality=!1),Util.isDefAndNotNull(aggName)||(aggName=AnalyticsSearchFacade.TERMS_AGGREGATION_NAME);var termsAgg=this.buildTermsAggregation(aggName,xAxisField.fullPath);maxSize>0&&termsAgg.size(maxSize);var pathVal=this.metaDataService.getParentFieldForFieldDefinition(xAxisField.fieldDefinition);if(_.isUndefined(pathVal)){if(yAxisField)if(breakDownField){var breakdownTermsAgg=this.getTermsAggregationForBreakdownFlow(breakDownField,isCardinality);termsAgg.agg(breakdownTermsAgg)}else if(this.metaDataService.isFieldDefinitionTypeNumeric(yAxisField.fieldDefinition)){var statsAgg=this.buildStatsAggregation(yAxisField.fullPath);termsAgg.agg(statsAgg)}else if(this.metaDataService.isFieldDefinitionTypeString(yAxisField.fieldDefinition))if(isCardinality){var cardinalityAgg=this.buildCardinalityAggregation(yAxisField.fullPath);
termsAgg.agg(cardinalityAgg)}else{var filterAgg=this.buildFilterAggregationWithNesting(yAxisField.fullPath);termsAgg.agg(filterAgg)}this.ejsRequest.aggregation(termsAgg)}else{if(yAxisField)if(breakDownField&&this.metaDataService.isFieldDefinitionTypeString(breakDownField.fieldDefinition)){var reverseNestedAgg=this.getReverseNestedTermsAggregationForBreakdownFlow(breakDownField,isCardinality);termsAgg.agg(reverseNestedAgg)}else if(this.metaDataService.isFieldDefinitionTypeNumeric(yAxisField.fieldDefinition)){var reverseNestedStatsAgg=this.getReverseNestedStatsAggregation(yAxisField);termsAgg.agg(reverseNestedStatsAgg)}else if(this.metaDataService.isFieldDefinitionTypeString(yAxisField.fieldDefinition))if(isCardinality){var reverseNestedCardinalityAgg=this.getReverseNestedCardinalityAggregation(yAxisField);termsAgg.agg(reverseNestedCardinalityAgg)}else{var reverseNestedStatsAgg=this.getReverseNestedFilterAggregation(yAxisField);termsAgg.agg(reverseNestedStatsAgg)}var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME);nestedAgg.path(pathVal),nestedAgg.agg(termsAgg),this.ejsRequest.aggregation(nestedAgg)}return this.ejsRequest},AnalyticsSearchFacade.prototype.addRangeAggregation=function(xAxisField,yAxisField,rangeArray,isCardinality,breakdownField){void 0===isCardinality&&(isCardinality=!1);var rangeAgg=this.buildRangeAggregation(xAxisField.fullPath,rangeArray),pathVal=this.metaDataService.getNestedParentPath(xAxisField.fullPath);if(_.isUndefined(pathVal)){if(yAxisField)if(breakdownField){var breakdownTermsAgg=this.getTermsAggregationForBreakdownFlow(breakdownField,isCardinality);rangeAgg.agg(breakdownTermsAgg)}else if(this.metaDataService.isFieldDefinitionTypeNumeric(yAxisField.fieldDefinition)){var statsAgg=this.buildStatsAggregation(yAxisField.fullPath);rangeAgg.agg(statsAgg)}else if(this.metaDataService.isFieldDefinitionTypeString(yAxisField.fieldDefinition))if(isCardinality){var cardinalityAgg=this.buildCardinalityAggregation(yAxisField.fullPath);rangeAgg.agg(cardinalityAgg)}else{var filterAgg=this.buildFilterAggregationWithNesting(yAxisField.fullPath);rangeAgg.agg(filterAgg)}this.ejsRequest.aggregation(rangeAgg)}else{if(yAxisField)if(breakdownField){var reverseNestedAgg=this.getReverseNestedTermsAggregationForBreakdownFlow(breakdownField,isCardinality);rangeAgg.agg(reverseNestedAgg)}else if(this.metaDataService.isFieldDefinitionTypeNumeric(yAxisField.fieldDefinition)){var reverseNestedAgg=this.getReverseNestedStatsAggregation(yAxisField);rangeAgg.agg(reverseNestedAgg)}else if(this.metaDataService.isFieldDefinitionTypeString(yAxisField.fieldDefinition))if(isCardinality){var reverseNestedCardinalityAgg=this.getReverseNestedCardinalityAggregation(yAxisField);rangeAgg.agg(reverseNestedCardinalityAgg)}else{var reverseNestedAgg=this.getReverseNestedFilterAggregation(yAxisField);rangeAgg.agg(reverseNestedAgg)}var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME);nestedAgg.path(pathVal),nestedAgg.agg(rangeAgg),this.ejsRequest.aggregation(nestedAgg)}return this.ejsRequest},AnalyticsSearchFacade.prototype.buildMinMaxAggregationQuery=function(field){var minMaxRequest=this.getBaseRequest(),maxAgg=ejs.MaxAggregation(AnalyticsSearchFacade.MAX_AGGREGATION_NAME);maxAgg.field(field);var minAgg=ejs.MinAggregation(AnalyticsSearchFacade.MIN_AGGREGATION_NAME);minAgg.field(field);var nestedAgg,pathVal=this.metaDataService.getNestedParentPath(field);return _.isUndefined(pathVal)?minMaxRequest.aggregation(maxAgg).aggregation(minAgg):(nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME),nestedAgg.path(pathVal),nestedAgg.agg(maxAgg).agg(minAgg),minMaxRequest.aggregation(nestedAgg)),minMaxRequest},AnalyticsSearchFacade.prototype.addAvailabilityGeoMap=function(baseField,maxSize,aggName){Util.isDefAndNotNull(aggName)||(aggName=AnalyticsSearchFacade.TERMS_AGGREGATION_NAME);var termsAgg=this.buildTermsAggregation(aggName,baseField);maxSize>0&&termsAgg.size(maxSize);var availabilityField=new AnalyticsField(MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.success,FieldCategory.SYNTH_SESSION_RECORD));return this.addInnerAvailabilityAggregation(termsAgg,availabilityField.fullPath),this.ejsRequest.aggregation(termsAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addDurationGeoMap=function(baseField,durationField,maxSize,aggName){Util.isDefAndNotNull(aggName)||(aggName=AnalyticsSearchFacade.TERMS_AGGREGATION_NAME);var termsAgg=this.buildTermsAggregation(aggName,baseField);maxSize>0&&termsAgg.size(maxSize);var statAgg=this.buildStatsAggregation(durationField);return termsAgg.agg(statAgg),this.ejsRequest.aggregation(termsAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addSyntheticAvailabilityTableAggregation=function(termsField){var availabilityField=new AnalyticsField(MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.success,FieldCategory.SYNTH_SESSION_RECORD)),termsAgg=this.buildTermsAggregation(AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,termsField);return this.addInnerAvailabilityAggregation(termsAgg,availabilityField.fullPath),this.ejsRequest.aggregation(termsAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addSyntheticJobTableAggregation=function(){var scheduleIdField=new AnalyticsField(MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.scheduleId,FieldCategory.SYNTH_MEASUREMENT_SPEC)),availabilityField=new AnalyticsField(MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.success,FieldCategory.SYNTH_SESSION_RECORD)),durationField=new AnalyticsField(MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.durationMS,FieldCategory.SYNTH_SESSION_RECORD)),jobIdAgg=this.buildTermsAggregation(AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,scheduleIdField.fullPath);this.addInnerAvailabilityAggregation(jobIdAgg,availabilityField.fullPath);var durationAgg=this.buildStatsAggregation(durationField.fullPath);return jobIdAgg.agg(durationAgg),this.ejsRequest.aggregation(jobIdAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addEUMWebPageAggregation=function(pageTypes,useReverseNestedAgg){void 0===pageTypes&&(pageTypes=null),void 0===useReverseNestedAgg&&(useReverseNestedAgg=!1);var pageNameField=new AnalyticsField(MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.pageName,FieldCategory.BROWSER_RECORD)),pageTypeField=new AnalyticsField(MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.pageType,FieldCategory.BROWSER_RECORD)),pageTypeAgg=this.buildTermsAggregation(AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,pageTypeField.fullPath),pageNameAgg=this.buildTermsAggregation(AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,pageNameField.fullPath);pageTypeAgg.agg(pageNameAgg);var topLevelAgg=pageTypeAgg;if(Util.isDefAndNotEmptyArray(pageTypes)){var pageTypeFilterAgg=this.buildFilterAggregation();pageTypeFilterAgg.filter(ejs.TermsFilter(pageTypeField.fullPath,pageTypes)),pageTypeFilterAgg.agg(topLevelAgg),topLevelAgg=pageTypeFilterAgg}var parentPath=AnalyticsFields.getParentPathForFieldDefinition(pageNameField.fieldDefinition);if(parentPath){var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME);if(nestedAgg.path(parentPath),nestedAgg.agg(topLevelAgg),topLevelAgg=nestedAgg,useReverseNestedAgg){var reverseNestedAgg=this.buildReverseNestedAggregation();pageNameAgg.agg(reverseNestedAgg)}}return this.ejsRequest.agg(topLevelAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.buildReverseNestedAggregation=function(){var reverseNestedAgg=ejs.AggregationMixin(AnalyticsSearchFacade.REV_NESTED_AGGREGATION_NAME),reverseNestedAggJson=reverseNestedAgg.toJSON();return reverseNestedAggJson[AnalyticsSearchFacade.REV_NESTED_AGGREGATION_NAME].reverse_nested={},reverseNestedAgg.path=function(path){return Util.isUndefOrNull(path)?reverseNestedAggJson[name].reverse_nested.path:(reverseNestedAggJson[AnalyticsSearchFacade.REV_NESTED_AGGREGATION_NAME].reverse_nested.path=path,this)},reverseNestedAgg},AnalyticsSearchFacade.prototype.addWebSessionBrowserNameAndVerAggregation=function(){var browserVerAgg=this.buildTermsAggregation(AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,AnalyticsField.browserVersion),browserNameAgg=this.buildTermsAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,AnalyticsField.browser);return browserVerAgg.agg(browserNameAgg),this.ejsRequest.agg(browserVerAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addEUMMobileCrashedSessionsAggregation=function(xAxisField){var crashFileFilter=this.buildExistsFilter(AnalyticsField.crashFile),crashNestedFilter=ejs.NestedFilter(AnalyticsField.crash).filter(crashFileFilter),fieldTypeFilterAgg=this.buildFilterAggregation();crashNestedFilter.filter(crashFileFilter),fieldTypeFilterAgg.filter(crashNestedFilter);var impactedUsersAgg=this.buildCardinalityAggregation(AnalyticsField.agentid);impactedUsersAgg.precisionThreshold(1e3);var fieldTypeTermsAgg=this.buildTermsAggregation(AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,xAxisField.fullPath);return fieldTypeTermsAgg.agg(fieldTypeFilterAgg),fieldTypeTermsAgg.agg(impactedUsersAgg),fieldTypeTermsAgg.order(AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME,AnalyticsSearchFacade.SORT_DESC),this.ejsRequest.agg(fieldTypeTermsAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addEUMMobileActiveSessionsAggregation=function(xAxisField){var impactedUsersAgg=this.buildCardinalityAggregation(AnalyticsField.agentid);impactedUsersAgg.precisionThreshold(1e3);var fieldTypeTermsAgg=this.buildTermsAggregation(AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,xAxisField.fullPath);return fieldTypeTermsAgg.agg(impactedUsersAgg),fieldTypeTermsAgg.order(AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME,AnalyticsSearchFacade.SORT_DESC),this.ejsRequest.agg(fieldTypeTermsAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addAvailabilityHistogramAggregation=function(interval){var availabilityField=new AnalyticsField(MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.success,FieldCategory.SYNTH_SESSION_RECORD)),histogramAgg=this.buildHistogramAggregation(interval,!1,availabilityField.fullPath);return this.addInnerAvailabilityAggregation(histogramAgg,availabilityField.fullPath),this.ejsRequest.aggregation(histogramAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.addFilterAggregationsWithinTimeRange=function(startTime,endTime,noOfIntervals){void 0===noOfIntervals&&(noOfIntervals=10);for(var startTimeMs,endTimeMs,intervalTimeMs=(endTime-startTime)/noOfIntervals,i=0;noOfIntervals>=i;i++)startTimeMs=0==i?startTime+i*intervalTimeMs:startTime+i*intervalTimeMs+1,endTimeMs=startTime+(i+1)*intervalTimeMs,this.ejsRequest.aggregation(this.buildFilterAggregationForTimeRange(AnalyticsSearchFacade.FILTER_AGGREGATION_NAME+"_"+i,startTimeMs,endTimeMs));return this.ejsRequest},AnalyticsSearchFacade.prototype.buildFilterAggregation=function(){var filterAgg=ejs.FilterAggregation(AnalyticsSearchFacade.FILTER_AGGREGATION_NAME);return filterAgg},AnalyticsSearchFacade.prototype.addInnerAvailabilityAggregation=function(baseAgg,availabilityField){var internalErrorStatus="INTERNAL_ERROR",termsFilter=ejs.TermsFilter(AnalyticsField.status,[internalErrorStatus]),notFilter=ejs.NotFilter(termsFilter),filterAgg=ejs.FilterAggregation(AnalyticsSearchFacade.FILTER_AGGREGATION_NAME);filterAgg.filter(notFilter),baseAgg.agg(filterAgg);var termsAgg=this.buildTermsAggregation(AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,availabilityField);filterAgg.agg(termsAgg);var countAgg=this.buildValueCountAggregation(AnalyticsSearchFacade.COUNT_AGGREGATION_NAME,"_type");filterAgg.agg(countAgg)},AnalyticsSearchFacade.getSelectOptionsForFieldAndCategory=function(field,fieldCategory,context,maxNumOptions){var searchFacade=new AnalyticsSearchFacade(context);searchFacade.buildQuery();var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(field,fieldCategory),request=searchFacade.addTermsAggregation(new AnalyticsField(fieldDef),null,!1,null,maxNumOptions);if(!_.isUndefined(request)){var response=AnalyticsSearchUiService.instance().postQuery(JSON.stringify(request),context.indexType);return response.then(function(resultsDto){var results=new AnalyticsSearchResults(resultsDto),options=_.map(results.getBuckets(),function(entry){return{name:entry.key,value:entry.key}});return options})}return null},AnalyticsSearchFacade.getSelectOptionsForPageName=function(fieldCategory,context,pageTypeValue,maxNumOptions){var searchFacade=new AnalyticsSearchFacade(context);searchFacade.buildQuery();var pageTypeFieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.pageType,fieldCategory),pageTypePath=AnalyticsFields.getFullPathForFieldDefinition(pageTypeFieldDef),pageNameFieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.pageName,fieldCategory),pageNamePath=AnalyticsFields.getFullPathForFieldDefinition(pageNameFieldDef),pageNameAgg=searchFacade.buildTermsAggregation(AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,pageNamePath);maxNumOptions>0&&pageNameAgg.size(maxNumOptions);var filterAgg=searchFacade.buildFilterAggregationWithTermsFilter(pageTypePath,[pageTypeValue]);filterAgg.agg(pageNameAgg);var request,parentPath=AnalyticsFields.getParentPathForFieldDefinition(pageNameFieldDef);if(parentPath){var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME);nestedAgg.path(parentPath),nestedAgg.agg(filterAgg),request=searchFacade.ejsRequest.aggregation(nestedAgg)}else request=searchFacade.ejsRequest.aggregation(filterAgg);if(!_.isUndefined(request)){var response=AnalyticsSearchUiService.instance().postQuery(JSON.stringify(request),context.indexType);return response.then(function(resultsDto){var buckets,results=new AnalyticsSearchResults(resultsDto);buckets=parentPath?Util.get(results.results,["aggregations",AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,AnalyticsSearchFacade.FILTER_AGGREGATION_NAME,AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,"buckets"]):Util.get(results.results,["aggregations",AnalyticsSearchFacade.FILTER_AGGREGATION_NAME,AnalyticsSearchFacade.TERMS_AGGREGATION_NAME,"buckets"]);var options=_.map(buckets,function(entry){return{name:entry.key,value:entry.key}});return options})}return null},AnalyticsSearchFacade.prototype.buildTermsAggregation=function(name,fieldName){var termsAgg=ejs.TermsAggregation(name);return termsAgg.field(fieldName),termsAgg},AnalyticsSearchFacade.prototype.getStatsAggregation=function(field){var statsAgg=ejs.StatsAggregation(AnalyticsSearchFacade.STATS_AGGREGATION_NAME);return statsAgg.field(field),statsAgg},AnalyticsSearchFacade.prototype.buildValueCountAggregation=function(name,fieldName){var countAgg=ejs.ValueCountAggregation(name);return countAgg.field(fieldName),countAgg},AnalyticsSearchFacade.prototype.buildHistogramAggregation=function(interval,fetchStats,fieldName,breakdownField){void 0===fetchStats&&(fetchStats=!1),void 0===fieldName&&(fieldName="_type"),void 0===breakdownField&&(breakdownField=void 0);var dateAgg=ejs.DateHistogramAggregation(AnalyticsSearchFacade.DATE_HISTOGRAM_AGGREGATION);dateAgg=dateAgg.field(AnalyticsField.eventTimestamp),dateAgg=dateAgg.interval(interval),dateAgg=dateAgg.minDocCount(0),dateAgg=dateAgg.extendedBounds(this.startTime,this.entTime);var breakdownTermsAgg;if(breakdownField)breakdownTermsAgg=this.getTermsAggregationForBreakdownFlow(breakdownField,!1),dateAgg.agg(breakdownTermsAgg);else{var statsAgg;fetchStats&&(statsAgg=this.getStatsAggregation(fieldName));var filterAgg=this.buildFilterAggregationWithExistsFilter(fieldName);statsAgg&&filterAgg.agg(statsAgg);var nestedPath=this.metaDataService.getNestedParentPath(fieldName),isNested=!_.isUndefined(nestedPath);if(isNested){var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME);nestedAgg.path(nestedPath),nestedAgg.agg(filterAgg),dateAgg.agg(nestedAgg)}else dateAgg.agg(filterAgg)}return dateAgg},AnalyticsSearchFacade.prototype.buildFilterAggregationWithNesting=function(fieldName){var filterAgg=this.buildFilterAggregationWithExistsFilter(fieldName),nestedPath=this.metaDataService.getNestedParentPath(fieldName),isNested=!_.isUndefined(nestedPath);if(isNested){var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME);return nestedAgg.path(nestedPath),nestedAgg.agg(filterAgg),nestedAgg}return filterAgg},AnalyticsSearchFacade.prototype.buildFilterAggregationWithExistsFilter=function(fieldName){var filterAgg=ejs.FilterAggregation(AnalyticsSearchFacade.FILTER_AGGREGATION_NAME),existsFilter=this.buildExistsFilter(fieldName);return filterAgg.filter(existsFilter),filterAgg},AnalyticsSearchFacade.prototype.buildFilterAggregationWithTermsFilter=function(fieldName,fieldValues){var filterAgg=ejs.FilterAggregation(AnalyticsSearchFacade.FILTER_AGGREGATION_NAME),termsFilter=ejs.TermsFilter(fieldName,fieldValues);return filterAgg.filter(termsFilter),filterAgg},AnalyticsSearchFacade.prototype.buildFilterAggregationForTimeRange=function(filterAggName,startTime,endTime){var filterAgg=ejs.FilterAggregation(filterAggName),boolFilter=ejs.BoolFilter(),startTimeRangeFilter=ejs.RangeFilter(AnalyticsField.endTimeMs).gte(startTime),endTimeRangeFilter=ejs.RangeFilter(AnalyticsField.startTimeMs).lte(endTime);return startTimeRangeFilter&&boolFilter.must(startTimeRangeFilter),endTimeRangeFilter&&boolFilter.must(endTimeRangeFilter),filterAgg.filter(boolFilter),filterAgg},AnalyticsSearchFacade.prototype.buildExistsFilter=function(fieldName){var existsFilter=ejs.ExistsFilter(AnalyticsSearchFacade.FILTER_EXISTS_NAME);return existsFilter.field(fieldName),existsFilter},AnalyticsSearchFacade.prototype.buildSumAggregation=function(fieldName){var sumAgg=ejs.SumAggregation(AnalyticsSearchFacade.SUM_AGGREGATION_NAME);return sumAgg.field(fieldName),sumAgg},AnalyticsSearchFacade.prototype.buildAvgAggregation=function(fieldName){var avgAgg=ejs.AvgAggregation(AnalyticsSearchFacade.AVG_AGGREGATION_NAME);return avgAgg.field(fieldName),avgAgg},AnalyticsSearchFacade.prototype.buildMinAggregation=function(fieldName){var minAgg=ejs.MinAggregation(AnalyticsSearchFacade.MIN_AGGREGATION_NAME);return minAgg.field(fieldName),minAgg},AnalyticsSearchFacade.prototype.buildMaxAggregation=function(fieldName){var maxAgg=ejs.MaxAggregation(AnalyticsSearchFacade.MAX_AGGREGATION_NAME);return maxAgg.field(fieldName),maxAgg},AnalyticsSearchFacade.prototype.buildRangeAggregation=function(fieldName,rangeArray){var rangeAgg=ejs.RangeAggregation(AnalyticsSearchFacade.RANGE_AGGREGATION_NAME);return rangeAgg.field(fieldName),_.each(rangeArray,function(rangeBucketDefObj){rangeAgg.range(rangeBucketDefObj.from,rangeBucketDefObj.to,rangeBucketDefObj.key)}),rangeAgg},AnalyticsSearchFacade.prototype.getReverseNestedFilterAggregation=function(yAxisField){var reverseNestedAgg=ejs.TermsAggregation(AnalyticsSearchFacade.REV_NESTED_AGGREGATION_NAME),yAxisFieldNestedParentVal=this.metaDataService.getParentFieldForFieldDefinition(yAxisField.fieldDefinition),revNestedObj={};if(_.isUndefined(yAxisFieldNestedParentVal)||(revNestedObj={path:yAxisFieldNestedParentVal}),this.metaDataService.isFieldDefinitionTypeString(yAxisField.fieldDefinition)){var filterAggWithExistsFilter=this.buildFilterAggregationWithExistsFilter(yAxisField.fullPath);reverseNestedAgg.toJSON=function(){return{unnesting:{reverse_nested:revNestedObj,aggs:filterAggWithExistsFilter}}}}return reverseNestedAgg},AnalyticsSearchFacade.prototype.getReverseNestedStatsAggregation=function(yAxisField){var reverseNestedAgg=ejs.TermsAggregation(AnalyticsSearchFacade.REV_NESTED_AGGREGATION_NAME),yAxisFieldNestedParentVal=this.metaDataService.getParentFieldForFieldDefinition(yAxisField.fieldDefinition),revNestedObj={};if(_.isUndefined(yAxisFieldNestedParentVal)||(revNestedObj={path:yAxisFieldNestedParentVal}),this.metaDataService.isFieldDefinitionTypeNumeric(yAxisField.fieldDefinition)){var statsAgg=this.getStatsAggregation(yAxisField.fullPath);reverseNestedAgg.toJSON=function(){return{unnesting:{reverse_nested:revNestedObj,aggs:statsAgg}}}}return reverseNestedAgg},AnalyticsSearchFacade.prototype.getReverseNestedCardinalityAggregation=function(yAxisField){var reverseNestedAgg=ejs.TermsAggregation(AnalyticsSearchFacade.REV_NESTED_AGGREGATION_NAME),yAxisFieldNestedParentVal=this.metaDataService.getParentFieldForFieldDefinition(yAxisField.fieldDefinition),revNestedObj={};if(_.isUndefined(yAxisFieldNestedParentVal)||(revNestedObj={path:yAxisFieldNestedParentVal}),this.metaDataService.isFieldDefinitionTypeString(yAxisField.fieldDefinition)){var cardinalityAgg=this.getCardinalityAggregation(yAxisField.fullPath);reverseNestedAgg.toJSON=function(){return{unnesting:{reverse_nested:revNestedObj,aggs:cardinalityAgg}}}}return reverseNestedAgg},AnalyticsSearchFacade.prototype.getTermsAggregationForBreakdownFlow=function(breakDownField,isCardinality){var breakdownTermsAgg=this.buildTermsAggregation(AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME,breakDownField.fullPath),breakupPathNestedParentVal=this.metaDataService.getParentFieldForFieldDefinition(breakDownField.fieldDefinition);if(this.metaDataService.isFieldDefinitionTypeNumeric(breakDownField.fieldDefinition)){var statsAgg=this.getStatsAggregation(breakDownField.fullPath);breakdownTermsAgg.agg(statsAgg)}else if(isCardinality){{this.getCardinalityAggregation(breakDownField.fullPath)}breakdownTermsAgg.agg(statsAgg)}var nestedTermsAgg;return _.isUndefined(breakupPathNestedParentVal)?breakdownTermsAgg:(nestedTermsAgg=ejs.NestedAggregation(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME),nestedTermsAgg.path(breakupPathNestedParentVal),nestedTermsAgg.agg(breakdownTermsAgg),nestedTermsAgg)},AnalyticsSearchFacade.prototype.getReverseNestedTermsAggregationForBreakdownFlow=function(breakDownField,isCardinality){var reverseNestedAgg=ejs.TermsAggregation(AnalyticsSearchFacade.REV_NESTED_AGGREGATION_NAME),breakupPathNestedParentVal=this.metaDataService.getParentFieldForFieldDefinition(breakDownField.fieldDefinition),revNestedObj={};return _.isUndefined(breakupPathNestedParentVal)||(revNestedObj={path:breakupPathNestedParentVal}),reverseNestedAgg.toJSON=this.metaDataService.isFieldDefinitionTypeNumeric(breakDownField.fieldDefinition)?function(){return{unnesting:{reverse_nested:revNestedObj,aggs:{breakdownTermsAgg:{terms:{field:breakDownField.fullPath},aggs:{statsAgg:{stats:{field:breakDownField.fullPath}}}}}}}}:isCardinality?function(){return{unnesting:{reverse_nested:revNestedObj,aggs:{breakdownTermsAgg:{terms:{field:breakDownField.fullPath},aggs:{cardinalityAgg:{cardinality:{field:breakDownField.fullPath}}}}}}}}:function(){return{unnesting:{reverse_nested:revNestedObj,aggs:{breakdownTermsAgg:{terms:{field:breakDownField.fullPath}}}}}},reverseNestedAgg},AnalyticsSearchFacade.prototype.buildFilterAggregationWithExistsFilterForMF=function(fieldName,filterAggName){var filterAgg=ejs.FilterAggregation(filterAggName),existsFilter=this.buildExistsFilter(fieldName);return filterAgg.filter(existsFilter),filterAgg},AnalyticsSearchFacade.prototype.buildExistsAggregationForMF=function(fieldName,index){var filterAggWithExistsFilter,pathVal=this.metaDataService.getNestedParentPath(fieldName);if(Util.isUndefOrNull(pathVal))return filterAggWithExistsFilter=this.buildFilterAggregationWithExistsFilterForMF(fieldName,AnalyticsSearchFacade.getAggregationName(AnalyticsSearchFacade.FILTER_AGGREGATION_NAME,index));filterAggWithExistsFilter=this.buildFilterAggregationWithExistsFilterForMF(fieldName,AnalyticsSearchFacade.FILTER_AGGREGATION_NAME);var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.getAggregationName(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,index));return nestedAgg.path(pathVal),nestedAgg.agg(filterAggWithExistsFilter),nestedAgg},AnalyticsSearchFacade.prototype.addExistsAggregationForMF=function(fieldName,breakdownField,index){var existsAgg=this.buildExistsAggregationForMF(fieldName,index);return breakdownField&&(existsAgg=this.buildExistsAggregationWithTermsBreakdown(fieldName,breakdownField)),this.ejsRequest.aggregation(existsAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.getStatsAggregationForMF=function(field,filterAggName){var statsAgg=ejs.StatsAggregation(filterAggName);return statsAgg.field(field),statsAgg},AnalyticsSearchFacade.prototype.buildStatsAggregationForMF=function(fieldName,index){var statsAgg,pathVal=this.metaDataService.getNestedParentPath(fieldName);if(Util.isUndefOrNull(pathVal))return statsAgg=this.getStatsAggregationForMF(fieldName,AnalyticsSearchFacade.getAggregationName(AnalyticsSearchFacade.STATS_AGGREGATION_NAME,index));statsAgg=this.getStatsAggregationForMF(fieldName,AnalyticsSearchFacade.STATS_AGGREGATION_NAME);var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.getAggregationName(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,index));return nestedAgg.path(pathVal),nestedAgg.agg(statsAgg),nestedAgg},AnalyticsSearchFacade.prototype.addStatsAggregationForMF=function(field,index){var statsAgg=this.buildStatsAggregationForMF(field,index);return this.ejsRequest.aggregation(statsAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.getCardinalityAggregationForMF=function(fieldName,filterAggName){var cardinalityAgg=ejs.CardinalityAggregation(filterAggName);return cardinalityAgg.field(fieldName),cardinalityAgg},AnalyticsSearchFacade.prototype.addCardinalityAggregationForMF=function(field,index){var cardinalityAgg=this.buildCardinalityAggregationForMF(field,index);return this.ejsRequest.aggregation(cardinalityAgg),this.ejsRequest},AnalyticsSearchFacade.prototype.buildCardinalityAggregationForMF=function(fieldName,index){var cardinalityAgg,pathVal=this.metaDataService.getNestedParentPath(fieldName);if(Util.isUndefOrNull(pathVal))return cardinalityAgg=this.getCardinalityAggregationForMF(fieldName,AnalyticsSearchFacade.getAggregationName(AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME,index));cardinalityAgg=this.getCardinalityAggregationForMF(fieldName,AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME);var nestedAgg=ejs.NestedAggregation(AnalyticsSearchFacade.getAggregationName(AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,index));return nestedAgg.path(pathVal),nestedAgg.agg(cardinalityAgg),nestedAgg},AnalyticsSearchFacade.getAggregationName=function(aggregationType,index){return aggregationType&&index>=0?aggregationType.concat("-").concat(index.toString()):void 0},AnalyticsSearchFacade.parseAggregationType=function(aggregationName){var aggregationNameInfo={};if(aggregationName&&StringUtils.containsString(aggregationName,"-",!1)){var indexOfDash=aggregationName.indexOf("-");aggregationNameInfo.aggType=aggregationName.substring(0,indexOfDash),aggregationNameInfo.index=Number(aggregationName.substring(indexOfDash+1))}else aggregationNameInfo.aggType=aggregationName;return aggregationNameInfo},AnalyticsSearchFacade.BOOL_MUST="must",AnalyticsSearchFacade.BOOL_SHOULD="should",AnalyticsSearchFacade.ES_FILTER_TIME="time",AnalyticsSearchFacade.ES_FILTER_TIME_WITH_TOKENS="tokenTime",AnalyticsSearchFacade.ES_FILTER_TERMS="terms",AnalyticsSearchFacade.ES_FILTER_RANGE="range",AnalyticsSearchFacade.ES_FILTER_NESTED="nestedFilter",AnalyticsSearchFacade.ES_FILTER_EQUALITY="equality",AnalyticsSearchFacade.ES_FILTER_NON_EQUALITY="nonequality",AnalyticsSearchFacade.ES_QUERY_STRING_QUERY="queryStringQuery",AnalyticsSearchFacade.ES_MATCH_QUERY="ES_MATCH_QUERY",AnalyticsSearchFacade.ES_MATCH_ALL_QUERY="ES_MATCH_ALL_QUERY",AnalyticsSearchFacade.NESTED_AGGREGATION_NAME="nestedAgg",AnalyticsSearchFacade.FILTER_AGGREGATION_NAME="filterAgg",AnalyticsSearchFacade.RANGE_AGGREGATION_NAME="rangeAgg",AnalyticsSearchFacade.COUNT_AGGREGATION_NAME="countAgg",AnalyticsSearchFacade.TERMS_AGGREGATION_NAME="termsAgg",AnalyticsSearchFacade.PERCENTILES_AGGREGATION="percentilesAgg",AnalyticsSearchFacade.HISTOGRAM_AGGREGATION="histAgg",AnalyticsSearchFacade.FILTERED_HISTOGRAM_AGGREGATION="filtHistAgg",AnalyticsSearchFacade.FILTERED_STATS_AGG="filtStatsAgg",AnalyticsSearchFacade.DATE_HISTOGRAM_AGGREGATION="dateHistAgg",AnalyticsSearchFacade.MAX_AGGREGATION_NAME="maxAgg",AnalyticsSearchFacade.MIN_AGGREGATION_NAME="minAgg",AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME="cardinalityAgg",AnalyticsSearchFacade.STATS_AGGREGATION_NAME="statsAgg",AnalyticsSearchFacade.FILTER_EXISTS_NAME="existsFilter",AnalyticsSearchFacade.REV_NESTED_AGGREGATION_NAME="reverseNestedAgg",AnalyticsSearchFacade.UNNESTING="unnesting",AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME="breakdownTermsAgg",AnalyticsSearchFacade.SUM_AGGREGATION_NAME="sumAgg",AnalyticsSearchFacade.AVG_AGGREGATION_NAME="avgAgg",AnalyticsSearchFacade.SORT_ASC="asc",AnalyticsSearchFacade.SORT_DESC="desc",AnalyticsSearchFacade._ALL="_all",AnalyticsSearchFacade.PHRASE="phrase",AnalyticsSearchFacade.URL="Url",AnalyticsSearchFacade.PRINCIPAL="Principal",AnalyticsSearchFacade.SESSION_ID="Session Id",AnalyticsSearchFacade.START_TIME="±START_TIME±",AnalyticsSearchFacade.END_TIME="±END_TIME±",AnalyticsSearchFacade.sessionRecordFieldCategories=[FieldCategory.WEB_SESSION_RECORD,FieldCategory.MOBILE_SESSION_RECORD,FieldCategory.SYNTH_SESSION_RECORD],AnalyticsSearchFacade}();define("app/view/analytics/searchFacade/AnalyticsSearchFacade",function(){});var AnalyticsSearchResults=function(){function AnalyticsSearchResults(analyticsUI,interval){this.analyticsUI=analyticsUI,this.interval=interval,this.results=JSON.parse(analyticsUI.rawResponse),this.totalHits=this.results.hits.total}return AnalyticsSearchResults.prototype.getResultBuckets=function(panel,data){var aggregations=this.results.aggregations;this.getBucketsRecursive(aggregations,!1,data,panel)},AnalyticsSearchResults.prototype.getBucketsByAggName=function(aggName){if(Util.isDefAndNotNull(aggName)){var aggs=this.results.aggregations;return _.isUndefined(aggs[aggName])?void 0:aggs[aggName].buckets}},AnalyticsSearchResults.prototype.getBuckets=function(operationType){if(operationType&&operationType==ChartBuilderController.COUNT_DISTINCT)return this.getDataForCardinality();var aggs=this.results.aggregations;if(_.isUndefined(aggs[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME])){if(_.isUndefined(aggs[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME])&&_.isUndefined(aggs[AnalyticsSearchFacade.STATS_AGGREGATION_NAME]))return _.isUndefined(aggs[AnalyticsSearchFacade.RANGE_AGGREGATION_NAME])?aggs[AnalyticsSearchFacade.TERMS_AGGREGATION_NAME].buckets:aggs[AnalyticsSearchFacade.RANGE_AGGREGATION_NAME].buckets;var breakdownTermsAggObj=Util.get(aggs,[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME,AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME]);return breakdownTermsAggObj?breakdownTermsAggObj.buckets:aggs}var nestedAggregationObject=aggs[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME];if(_.isUndefined(nestedAggregationObject[AnalyticsSearchFacade.RANGE_AGGREGATION_NAME])){if(_.isUndefined(nestedAggregationObject[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME])&&_.isUndefined(nestedAggregationObject[AnalyticsSearchFacade.STATS_AGGREGATION_NAME]))return nestedAggregationObject[AnalyticsSearchFacade.TERMS_AGGREGATION_NAME].buckets;var breakdownTermsAggObj=Util.get(nestedAggregationObject,[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME,AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME]);return breakdownTermsAggObj?breakdownTermsAggObj.buckets:aggs}return nestedAggregationObject[AnalyticsSearchFacade.RANGE_AGGREGATION_NAME].buckets},AnalyticsSearchResults.prototype.getDataForCardinality=function(){var key="Unique Values",returnObject={};returnObject.key=key;var cardinalityObj=Util.get(this.results.aggregations,[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME])||Util.get(this.results.aggregations,[AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME]);if(returnObject.doc_count=cardinalityObj?cardinalityObj.value:void 0,cardinalityObj){var returnArray=[];
return returnArray.push(returnObject),returnArray}var retObj=Util.get(this.results.aggregations,[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,AnalyticsSearchFacade.TERMS_AGGREGATION_NAME])||Util.get(this.results.aggregations,[AnalyticsSearchFacade.TERMS_AGGREGATION_NAME]);return retObj.buckets},AnalyticsSearchResults.prototype.getDataForPercentiles=function(){var percentileAggObj=Util.get(this.results.aggregations,[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,AnalyticsSearchFacade.PERCENTILES_AGGREGATION]);return percentileAggObj?percentileAggObj.values:void 0},AnalyticsSearchResults.prototype.getStatsFromAggregation=function(bucket){return bucket[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME].statsAgg},AnalyticsSearchResults.prototype.getBucketsForHistogramAggregation=function(){return _.isUndefined(this.results.aggregations.nestedAgg)?this.results.aggregations[AnalyticsSearchFacade.HISTOGRAM_AGGREGATION].buckets:this.results.aggregations.nestedAgg[AnalyticsSearchFacade.HISTOGRAM_AGGREGATION].buckets},AnalyticsSearchResults.prototype.getBucketsForFilteredHistogramAggregation=function(){return _.isUndefined(this.results.aggregations.nestedAgg)?this.results.aggregations[AnalyticsSearchFacade.FILTERED_HISTOGRAM_AGGREGATION][AnalyticsSearchFacade.HISTOGRAM_AGGREGATION].buckets:this.results.aggregations.nestedAgg[AnalyticsSearchFacade.FILTERED_HISTOGRAM_AGGREGATION][AnalyticsSearchFacade.HISTOGRAM_AGGREGATION].buckets},AnalyticsSearchResults.prototype.getFilteredStatsAggregation=function(){return _.isUndefined(this.results.aggregations.nestedAgg)?this.results.aggregations[AnalyticsSearchFacade.FILTERED_STATS_AGG][AnalyticsSearchFacade.STATS_AGGREGATION_NAME]:this.results.aggregations.nestedAgg[AnalyticsSearchFacade.FILTERED_STATS_AGG][AnalyticsSearchFacade.STATS_AGGREGATION_NAME]},AnalyticsSearchResults.prototype.getBucketsForDateHistogramAggregation=function(){return this.results.aggregations[AnalyticsSearchFacade.DATE_HISTOGRAM_AGGREGATION].buckets},AnalyticsSearchResults.prototype.getValuesForPercentileAggregation=function(){return _.isUndefined(this.results.aggregations.nestedAgg)?this.results.aggregations[AnalyticsSearchFacade.PERCENTILES_AGGREGATION].values:this.results.aggregations.nestedAgg[AnalyticsSearchFacade.PERCENTILES_AGGREGATION].values},AnalyticsSearchResults.prototype.getStatsAggregation=function(){return _.isUndefined(this.results.aggregations.nestedAgg)?this.results.aggregations[AnalyticsSearchFacade.STATS_AGGREGATION_NAME]:this.results.aggregations.nestedAgg[AnalyticsSearchFacade.STATS_AGGREGATION_NAME]},AnalyticsSearchResults.prototype.getDataForHistogram=function(query){return _.isUndefined(this.results.aggregations.nestedAgg)?this.results.aggregations[query?query.id:AnalyticsSearchFacade.DATE_HISTOGRAM_AGGREGATION]:this.results.aggregations.nestedAgg[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME]},AnalyticsSearchResults.prototype.getTermsValueFromBucket=function(bucket,operationType){var value,propName=this.getPropertyNameForOperationType(operationType);if(operationType&&operationType!=ChartBuilderController.COUNT_DISTINCT)if(operationType&&operationType==ChartBuilderController.COUNT){var filterAgg,nestedAgg=bucket[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME];if(nestedAgg)filterAgg=nestedAgg[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME],value=filterAgg?filterAgg[AnalyticsSearchResults.DOC_COUNT]:nestedAgg[AnalyticsSearchResults.DOC_COUNT];else if(bucket[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME])filterAgg=bucket[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME],value=filterAgg[AnalyticsSearchResults.DOC_COUNT];else if(bucket[AnalyticsSearchFacade.UNNESTING]){var unnestedBucket=bucket[AnalyticsSearchFacade.UNNESTING],filterAggBucket=unnestedBucket[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME];filterAggBucket&&(value=filterAggBucket[AnalyticsSearchResults.DOC_COUNT])}else value=bucket[AnalyticsSearchResults.DOC_COUNT]}else if(bucket[AnalyticsSearchFacade.UNNESTING]){var unnestedBucket=bucket[AnalyticsSearchFacade.UNNESTING],unnestedStatsBucket=unnestedBucket[AnalyticsSearchFacade.STATS_AGGREGATION_NAME];unnestedStatsBucket?value=unnestedStatsBucket[propName]:ADLoggerService.error("Unable to fetch value in AnalyticsSearchResults")}else{var statsBucket=Util.get(bucket,[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,AnalyticsSearchFacade.STATS_AGGREGATION_NAME])||Util.get(bucket,[AnalyticsSearchFacade.STATS_AGGREGATION_NAME]);statsBucket?value=statsBucket[propName]:Util.isDefAndNotNull(bucket[propName])?value=bucket[propName]:(value=bucket[AnalyticsSearchResults.DOC_COUNT],Util.isUndefOrNull(value)&&(value="0"))}else{var cardinalityAggObj=Util.get(bucket,[AnalyticsSearchFacade.UNNESTING,AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME])||Util.get(bucket,[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME])||Util.get(bucket,[AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME]);value=cardinalityAggObj?cardinalityAggObj.value:bucket[propName]}return value},AnalyticsSearchResults.prototype.getBTIdFromBucket=function(bucket,category){var nestedAgg=bucket[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME];if(nestedAgg){if(nestedAgg[AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME]){var breakdownTermsAgg=nestedAgg[AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME];if(breakdownTermsAgg.buckets.length>0&&breakdownTermsAgg.buckets[0].key==category)return breakdownTermsAgg.buckets[0].btId}}else if(bucket[AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME]&&(breakdownTermsAgg=bucket[AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME],breakdownTermsAgg.buckets.length>0&&breakdownTermsAgg.buckets[0].key==category))return breakdownTermsAgg.buckets[0].btId;return-1},AnalyticsSearchResults.prototype.getBucketValue=function(breakdownTermsAgg,key){var value,bucket=_.find(breakdownTermsAgg.buckets,function(bucket){return bucket.key===key});return value=bucket?bucket[AnalyticsSearchResults.DOC_COUNT]:0},AnalyticsSearchResults.prototype.getHistogramValueFromBucket=function(bucket,operationType,key){var value,filterAgg,statsAgg,cardinalityAgg,breakdownTermsAgg,nestedAgg=bucket[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME],propName=this.getPropertyNameForOperationType(operationType);return nestedAgg?(filterAgg=nestedAgg[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME],filterAgg?(statsAgg=filterAgg[AnalyticsSearchFacade.STATS_AGGREGATION_NAME],value=statsAgg?statsAgg[propName]:filterAgg[AnalyticsSearchResults.DOC_COUNT]):nestedAgg[AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME]?(cardinalityAgg=nestedAgg[AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME],value=cardinalityAgg[AnalyticsSearchResults.VALUE]):nestedAgg[AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME]?(breakdownTermsAgg=nestedAgg[AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME],value=this.getBucketValue(breakdownTermsAgg,key)):value=nestedAgg[AnalyticsSearchResults.DOC_COUNT]):(filterAgg=bucket[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME],filterAgg?(statsAgg=filterAgg[AnalyticsSearchFacade.STATS_AGGREGATION_NAME],value=statsAgg?statsAgg[propName]:filterAgg[AnalyticsSearchResults.DOC_COUNT]):bucket[AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME]?(cardinalityAgg=bucket[AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME],value=cardinalityAgg[AnalyticsSearchResults.VALUE]):bucket[AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME]?(breakdownTermsAgg=bucket[AnalyticsSearchFacade.BREAKDOWN_TERMS_AGGREGATION_NAME],value=this.getBucketValue(breakdownTermsAgg,key)):value=bucket[AnalyticsSearchResults.DOC_COUNT]),value},AnalyticsSearchResults.prototype.getRangeAggregationBucketsFromResponse=function(fullPathField){var maxAggValue,minAggValue;MetaDataService.instance().getNestedParentPath(fullPathField)?(maxAggValue=this.results.aggregations.nestedAgg[AnalyticsSearchFacade.MAX_AGGREGATION_NAME].value,minAggValue=this.results.aggregations.nestedAgg[AnalyticsSearchFacade.MIN_AGGREGATION_NAME].value):(maxAggValue=this.results.aggregations.maxAgg.value,minAggValue=this.results.aggregations.minAgg.value);var rangeArray=this.bucketGenerator(minAggValue,maxAggValue,AnalyticsSearchResults.NUM_OF_BUCKETS);return rangeArray},AnalyticsSearchResults.prototype.getNumericValueForLabel=function(operationType,widgetDefinition){var labelValue,propName=this.getPropertyNameForOperationType(operationType);if(widgetDefinition&&widgetDefinition.xAxisFields&&widgetDefinition.xAxisFields.length>0)return null;switch(operationType){case ChartBuilderController.COUNT:var filterAggObject=Util.get(this.results.aggregations,[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,AnalyticsSearchFacade.FILTER_AGGREGATION_NAME])||Util.get(this.results.aggregations,[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME]);labelValue=Util.isDefAndNotNull(filterAggObject)?filterAggObject[AnalyticsSearchResults.DOC_COUNT]:"0";break;case ChartBuilderController.COUNT_DISTINCT:var cardinalityAggObject=Util.get(this.results.aggregations,[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME])||Util.get(this.results.aggregations,[AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME]);labelValue=Util.isDefAndNotNull(cardinalityAggObject)?cardinalityAggObject.value:"0";break;case ChartBuilderController.SUM:case ChartBuilderController.AVG:case ChartBuilderController.MAX:case ChartBuilderController.MIN:var statsAggObject=Util.get(this.results.aggregations,[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME,AnalyticsSearchFacade.STATS_AGGREGATION_NAME])||Util.get(this.results.aggregations,[AnalyticsSearchFacade.STATS_AGGREGATION_NAME]);if(Util.isDefAndNotNull(statsAggObject)){var numVal=statsAggObject[propName];numVal&&(labelValue=numVal.toFixed(2).toString())}}return Util.isUndefOrNull(labelValue)&&(labelValue="0"),labelValue},AnalyticsSearchResults.prototype.getAvailabilityFromInnerAggregation=function(bucket){var filterAgg;filterAgg=bucket[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME]?bucket[AnalyticsSearchFacade.NESTED_AGGREGATION_NAME][AnalyticsSearchFacade.FILTER_AGGREGATION_NAME]:bucket[AnalyticsSearchFacade.FILTER_AGGREGATION_NAME];var availabilityAgg=filterAgg[AnalyticsSearchFacade.TERMS_AGGREGATION_NAME],countAgg=filterAgg[AnalyticsSearchFacade.COUNT_AGGREGATION_NAME];if(availabilityAgg&&countAgg){var buckets=availabilityAgg.buckets,successes=0;_.each(buckets,function(bucket){"T"===bucket.key&&(successes=bucket.doc_count)});var totalHits=countAgg.value,availabilityPercent=100*successes/totalHits;return availabilityPercent=Math.round(1e3*availabilityPercent)/1e3,availabilityPercent>-1||(availabilityPercent=null),availabilityPercent}return null},AnalyticsSearchResults.prototype.bucketGenerator=function(minVal,maxVal,numberOfBuckets){_.isUndefined(numberOfBuckets)&&(numberOfBuckets=AnalyticsSearchResults.NUM_OF_BUCKETS);var bucketArr=[];if(minVal===maxVal){var bucketStartIndex=minVal,bucketEndIndex=maxVal+1,keyString=AnalyticsUtils.getLabelFromThresholdValues(bucketStartIndex,bucketEndIndex);return bucketArr.push({from:minVal,to:bucketEndIndex,key:keyString}),bucketArr}var sizeOfEachRangeBucket=Math.floor((maxVal-minVal)/numberOfBuckets),bucketStartIndex=minVal,bucketEndIndex=bucketStartIndex+sizeOfEachRangeBucket,keyString=AnalyticsUtils.getLabelFromThresholdValues(bucketStartIndex,bucketEndIndex),bucketDefObj=new RangeAggregationBucketDefinition(bucketStartIndex,bucketEndIndex,keyString);return bucketArr.push(bucketDefObj),_.times(numberOfBuckets-2,function(){bucketStartIndex+=sizeOfEachRangeBucket,bucketEndIndex=bucketStartIndex+sizeOfEachRangeBucket,keyString=AnalyticsUtils.getLabelFromThresholdValues(bucketStartIndex,bucketEndIndex),bucketDefObj=new RangeAggregationBucketDefinition(bucketStartIndex,bucketEndIndex,keyString),bucketArr.push(bucketDefObj)}),bucketStartIndex+=sizeOfEachRangeBucket,bucketEndIndex=maxVal,keyString=AnalyticsUtils.getLabelFromThresholdValues(bucketStartIndex,bucketEndIndex),bucketDefObj=new RangeAggregationBucketDefinition(bucketStartIndex,bucketEndIndex,keyString),bucketArr.push(bucketDefObj),bucketArr},AnalyticsSearchResults.prototype.getPropertyNameForOperationType=function(operationType){switch(operationType){case ChartBuilderController.COUNT:return"count";case ChartBuilderController.COUNT_DISTINCT:return AnalyticsSearchResults.DOC_COUNT;case ChartBuilderController.SUM:return"sum";case ChartBuilderController.AVG:return"avg";case ChartBuilderController.MAX:return"max";case ChartBuilderController.MIN:return"min";default:return AnalyticsSearchResults.DOC_COUNT}},AnalyticsSearchResults.prototype.createElasticSearchResponseInstance=function(label,value){var resultInstance={};return resultInstance.label=label,resultInstance.data=[[1,value]],resultInstance},AnalyticsSearchResults.prototype.nestedAggregationHandler=function(analyticsField,currentObj,data,panel,fieldIndex){var value,valueFoundFlag=this.getBucketsRecursive(currentObj,!0,data,panel,fieldIndex);valueFoundFlag||(value=currentObj[AnalyticsSearchResults.DOC_COUNT],Util.isDefAndNotNull(value)&&data.push(this.createElasticSearchResponseInstance(analyticsField.displayName,value)))},AnalyticsSearchResults.prototype.filterAggregationHandler=function(analyticsField,currentObj,data){var value;return value=currentObj[AnalyticsSearchResults.DOC_COUNT],Util.isDefAndNotNull(value)?(data.push(this.createElasticSearchResponseInstance(analyticsField.displayName,value)),!0):!1},AnalyticsSearchResults.prototype.statsAggregationHandler=function(analyticsField,currentObj,data){var value;return analyticsField.selectedOperation&&(value=currentObj[analyticsField.selectedOperation.value.toLowerCase()],Util.isDefAndNotNull(value))?(data.push(this.createElasticSearchResponseInstance(analyticsField.displayName,value)),!0):!1},AnalyticsSearchResults.prototype.cardinalityAggregationHandler=function(analyticsField,currentObj,data){var value;return value=currentObj.value,Util.isDefAndNotNull(value)?(data.push({label:analyticsField.displayName,data:[[1,value]]}),!0):!1},AnalyticsSearchResults.prototype.getBucketsRecursive=function(aggregations,isNested,data,panel,fieldIndex){var currentObj,valueFoundFlag;for(var aggregationName in aggregations)if(aggregations.hasOwnProperty(aggregationName)){if(currentObj=aggregations[aggregationName],!isNested){var aggregationNameInfo=AnalyticsSearchFacade.parseAggregationType(aggregationName);aggregationName=aggregationNameInfo.aggType,fieldIndex=aggregationNameInfo.index}var analyticsField=AnalyticsWidgetHelper.getAnalyticsFieldFromPanel(panel,fieldIndex);switch(aggregationName){case AnalyticsSearchFacade.NESTED_AGGREGATION_NAME:this.nestedAggregationHandler(analyticsField,currentObj,data,panel,fieldIndex);break;case AnalyticsSearchFacade.FILTER_AGGREGATION_NAME:if(valueFoundFlag=this.filterAggregationHandler(analyticsField,currentObj,data),isNested)return valueFoundFlag;break;case AnalyticsSearchFacade.STATS_AGGREGATION_NAME:if(valueFoundFlag=this.statsAggregationHandler(analyticsField,currentObj,data),isNested)return valueFoundFlag;break;case AnalyticsSearchFacade.RANGE_AGGREGATION_NAME:break;case AnalyticsSearchFacade.TERMS_AGGREGATION_NAME:break;case AnalyticsSearchFacade.CARDINALITY_AGGREGATION_NAME:if(valueFoundFlag=this.cardinalityAggregationHandler(analyticsField,currentObj,data),isNested)return valueFoundFlag;break;case AnalyticsSearchFacade.UNNESTING:this.nestedAggregationHandler(analyticsField,currentObj,data,panel,fieldIndex)}}return!1},AnalyticsSearchResults.DOC_COUNT="doc_count",AnalyticsSearchResults.VALUE="value",AnalyticsSearchResults.NUM_OF_BUCKETS=5,AnalyticsSearchResults}();define("app/view/analytics/AnalyticsSearchResults",function(){});var AnalyticsTransaction=function(){function AnalyticsTransaction(hitJson,analyticsFields,isTransactionAnalytics,adqlMappedData){this.hitJson=hitJson,this.analyticsFields=analyticsFields,this.adqlMappedData=adqlMappedData,this.values=[],this.fieldFullPathToValueMap={},this.isLogEvent=!1,this.isTransactionEvent=!1,Util.isUndefOrNull(isTransactionAnalytics)||(this.isLogEvent=!isTransactionAnalytics,this.isTransactionEvent=isTransactionAnalytics),this.setup()}return AnalyticsTransaction.getAllValues=function(analyticsTransaction,includeSegments){void 0===includeSegments&&(includeSegments=!1);var values=[];if(analyticsTransaction.isLogEvent)values=analyticsTransaction.values;else if(values=analyticsTransaction.values,includeSegments&&analyticsTransaction.segments)for(var i=0;i<analyticsTransaction.segments.length;i++)values=values.concat(analyticsTransaction.segments[i].values);return values},AnalyticsTransaction.prototype.getValue=function(field){return this.getValueFromFieldFullPath(field.fullPath)},AnalyticsTransaction.prototype.getValueFromFieldFullPath=function(fullPath){var value=null;if(AnalyticsField.isSegmentFieldFullPath(fullPath)){if(this.entryPointSegment&&(value=this.entryPointSegment.getValueFromFullFullPath(fullPath)),!value&&this.segments)for(var i=0;i<this.segments.length&&!(value=this.segments[i].getValueFromFullFullPath(fullPath));i++);}else value=this.fieldFullPathToValueMap[fullPath];return value},AnalyticsTransaction.prototype.getStringValueFromFieldFullPath=function(fullPath){var analyticsFieldValue=this.getValueFromFieldFullPath(fullPath);return analyticsFieldValue?analyticsFieldValue.valueDisplayString:""},AnalyticsTransaction.prototype.getNumberValueFromFieldFullPath=function(fullPath){var analyticsFieldValue=this.getValueFromFieldFullPath(fullPath);if(analyticsFieldValue){if(analyticsFieldValue.numberValue)return analyticsFieldValue.numberValue;try{return parseInt(analyticsFieldValue.value)}catch(error){ADLoggerService.error("error parsing number for analytics field: "+fullPath)}}return-1},AnalyticsTransaction.prototype.getDateValueFromFieldFullPath=function(fullPath){var analyticsFieldValue=this.getValueFromFieldFullPath(fullPath);return analyticsFieldValue?analyticsFieldValue.dateValue:null},AnalyticsTransaction.prototype.getFieldValueByFieldName=function(fieldName){var retFieldValue=null;return _.forEach(this.values,function(analyticsFieldValue){return analyticsFieldValue.analyticsField.fieldDefinition.fieldName===fieldName?void(retFieldValue=analyticsFieldValue):void 0}),retFieldValue},AnalyticsTransaction.prototype.setup=function(){if(this.hitJson){this._source=this.hitJson._source,this.btName=this._source.transactionName;for(var i=0;i<this.analyticsFields.nonSegmentFields.length;i++)this.processNonSegmentField(this._source,this.analyticsFields.nonSegmentFields[i]);this.segments=[];var segment=null;if(this._source&&this._source.segments&&this._source.segments.length>0)for(var i=0;i<this._source.segments.length;i++)segment=new TransactionSegment(this._source.segments[i],this,this.analyticsFields),this.segments.push(segment),segment.entryPoint&&(this.entryPointSegment=segment)}else if(Util.isDefAndNotNull(this.adqlMappedData)){this.btName=this.adqlMappedData.transactionName,this.applicationName=this.adqlMappedData.application;for(var i=0;i<this.analyticsFields.nonSegmentFields.length;i++)this.processNonSegmentField(this.adqlMappedData,this.analyticsFields.nonSegmentFields[i]);if(this.segments=[],this.adqlMappedData.segments&&this.adqlMappedData.segments.length>0)for(var i=0;i<this.adqlMappedData.segments.length;i++){var segment=new TransactionSegment(this.adqlMappedData.segments[i],this,this.analyticsFields);this.segments.push(segment),segment.entryPoint&&(this.entryPointSegment=segment)}}},AnalyticsTransaction.prototype.processNonSegmentField=function(jsonObject,field){var newValue=AnalyticsFieldValue.parseFromJson(jsonObject,field,!1);newValue&&(this.values.push(newValue),this.fieldFullPathToValueMap[field.fullPath]=newValue)},AnalyticsTransaction}(),TransactionSegment=function(){function TransactionSegment(segmentJson,analyticsTransaction,analyticsFields){this.segmentJson=segmentJson,this.analyticsTransaction=analyticsTransaction,this.analyticsFields=analyticsFields,this.values=[],this.fieldFullPathToValueMap={},this.tempSegmentFieldMap={},this.setup()}return TransactionSegment.prototype.getValue=function(field){return this.getValueFromFullFullPath(field.fullPath)},TransactionSegment.prototype.getValueFromFullFullPath=function(fullPath){var value=this.fieldFullPathToValueMap[fullPath];return value},TransactionSegment.prototype.setup=function(){this.values=[],this.entryPoint=this.segmentJson.entryPoint;for(var segmentFields=this.getSegmentFields(),i=0;i<segmentFields.length;i++)this.processSegmentField(this.segmentJson,segmentFields[i]);this.tempSegmentFieldMap=_.omit(this.tempSegmentFieldMap,"headers","cookies","parameters")},TransactionSegment.prototype.processSegmentField=function(jsonObject,segmentField){var newValue=AnalyticsFieldValue.parseFromJson(jsonObject,segmentField,!0);newValue&&(this.values.push(newValue),this.fieldFullPathToValueMap[segmentField.fullPath]=newValue,this.tempSegmentFieldMap[segmentField.displayName]=newValue?newValue.value:"NA")},TransactionSegment.prototype.getSegmentFields=function(){return this.analyticsFields.segmentFields},TransactionSegment}(),AnalyticsFieldValue=function(){function AnalyticsFieldValue(value,analyticsField){this.value=value,this.analyticsField=analyticsField,this.valueDisplayString="",this.resourceManager=InjectorService.instance().resourceManager(),this.init()}return AnalyticsFieldValue.parseFromJson=function(jsonObject,field,isSegment){var value=null,objectPropertyNames=field.fullPath.split(AnalyticsField.FIELD_SEPARATOR);if(isSegment&&objectPropertyNames.shift(),objectPropertyNames&&objectPropertyNames.length>0){for(var propertyName,tempObject=jsonObject,i=0;i<objectPropertyNames.length;i++)if(propertyName=objectPropertyNames[i],tempObject)if(_.isArray(tempObject)){for(var displayValue="",index=0;index<tempObject.length;index++)Util.isDefAndNotNull(tempObject[index])&&(displayValue+=tempObject[index][propertyName],index!==tempObject.length-1&&(displayValue+=", "));tempObject=displayValue}else tempObject=tempObject[propertyName];Util.isDefAndNotNull(tempObject)&&(value=new AnalyticsFieldValue(tempObject,field))}return value},AnalyticsFieldValue.prototype.init=function(){if(this.analyticsField&&this.analyticsField.fieldDefinition)if(this.analyticsField.fieldDefinition.fieldType==FieldType.DOUBLE||this.analyticsField.fieldDefinition.fieldType==FieldType.INTEGER||this.analyticsField.fieldDefinition.fieldType==FieldType.LONG||this.analyticsField.fieldDefinition.fieldType==FieldType.FLOAT)this.numberValue=this.value,this.valueDisplayString=ViewUtil.formatLargeNumber(Util.parseInt(this.value),1,1e6,!1);else if(this.analyticsField.fieldDefinition.fieldType==FieldType.DATE)this.dateValue=DateTimeUtil.getSafariSupportedDate(this.value),this.valueDisplayString=DateTimeUtil.getDateTimeString(this.value);else if(this.analyticsField.fieldDefinition.fieldType==FieldType.BOOLEAN)this.valueDisplayString=this.analyticsField.fieldDefinition.fieldName===AnalyticsField.success?this.value&&this.value!=AnalyticsUtils.BOOLEAN_FALSE_STRING?resourceManager.getString("ui","ms_success"):resourceManager.getString("ui","ms_failed"):this.analyticsField.fieldDefinition.fieldName===AnalyticsField.closed?this.value&&this.value!=AnalyticsUtils.BOOLEAN_FALSE_STRING?resourceManager.getString("ui","ms_ended"):resourceManager.getString("ui","ms_inProgress"):this.value&&this.value!=AnalyticsUtils.BOOLEAN_FALSE_STRING?resourceManager.getString("ui","ms_true"):resourceManager.getString("ui","ms_false");else if(this.analyticsField.fieldDefinition.fieldType==FieldType.STRING)if(this.analyticsField.fieldDefinition.fieldName==AnalyticsField.scheduleId){this.valueDisplayString=JSON.stringify(this.value);var job=AnalyticsSyntheticJobCache.instance().getJobById(this.value);this.valueDisplayString=job?job.description:ResourceManager.instance().getString("ui","ms_notFound"),this.stringValue=this.valueDisplayString}else this.analyticsField.fieldDefinition.fieldName===AnalyticsField.status&&this.analyticsField.fieldDefinition.category==FieldCategory.SYNTH_SESSION_RECORD?(this.valueDisplayString=AnalyticsFieldValue.SyntheticStatusFieldCodeMap[this.value],this.stringValue=this.value):(this.stringValue=this.value,this.valueDisplayString=this.stringValue);else this.valueDisplayString=JSON.stringify(this.analyticsField.fieldDefinition.fieldType==FieldType.OBJECT?this.value:this.value);else this.valueDisplayString=" - "},AnalyticsFieldValue.SyntheticStatusFieldCodeMap={INTERNAL_ERROR:"Internal Error",BROKEN:"Broken",OK:"Success",FAILED:"Failure"},AnalyticsFieldValue}();define("app/view/analytics/AnalyticsTransaction",function(){});var AnalyticsSignificantField=function(){function AnalyticsSignificantField(significantTermGroup){this.analyticsSignificantFieldValues=[],this.details=!0,this.analyticsField=new AnalyticsField(significantTermGroup.fieldDefinition),this.initAnalyticsSignificantFieldValues(significantTermGroup),this.initMaxScore(significantTermGroup)}return AnalyticsSignificantField.prototype.initMaxScore=function(significantTermGroup){var valueWithMaxScore=_.max(significantTermGroup.terms,function(sTerm){return sTerm.score});this.significantTermGroupHighScore=valueWithMaxScore.score},AnalyticsSignificantField.prototype.initAnalyticsSignificantFieldValues=function(significantTermGroup){var analyticsSignificantFieldValue,_this=this;_.each(significantTermGroup.terms,function(significantTerm){analyticsSignificantFieldValue=new AnalyticsSignificantFieldValue(significantTerm),_this.analyticsSignificantFieldValues.push(analyticsSignificantFieldValue)})},AnalyticsSignificantField}(),AnalyticsSignificantFieldValue=function(){function AnalyticsSignificantFieldValue(significantTerm){this.termString=significantTerm.termString,this.score=significantTerm.score,this.docCount=significantTerm.docCount,this.backgroundCount=significantTerm.backgroundCount,this.foregroundCount=significantTerm.foregroundCount,this.backgroundPercent=significantTerm.backgroundPercent,this.foregroundPercent=significantTerm.foregroundPercent,this.trimmedTermString=StringUtils.truncateString(this.termString,35,!0),this.trimmedScore=ViewUtil.formatLargeNumber(this.score);var valueToFormat=(this.foregroundPercent-this.backgroundPercent)/this.backgroundPercent;this.foregroundCountFormatted=ViewUtil.formatNumber(this.foregroundCount,0),this.foregroundPercentFormatted=ViewUtil.formatNumber(100*this.foregroundPercent,1)+"%",0>valueToFormat?(this.percentageChangeIconSource=ImageUtil.redDown,this.percentageChange=ViewUtil.formatNumber(100*Math.abs(valueToFormat),1)+"% "+ResourceManager.instance().getString("ui","ms_lowerThanNormal")):(this.percentageChangeIconSource=ImageUtil.greenUp,this.percentageChange=ViewUtil.formatNumber(100*valueToFormat,1)+"% "+ResourceManager.instance().getString("ui","ms_higherThanNormal")),this.infoString=ResourceManager.instance().getString("ui","ms_relevantFieldInfoHelp",[this.termString,ViewUtil.formatNumber(this.foregroundCount,0),this.foregroundPercentFormatted,ViewUtil.formatNumber(this.backgroundCount,0),ViewUtil.formatNumber(100*this.backgroundPercent,1)+"%"])}return AnalyticsSignificantFieldValue}();define("app/view/analytics/AnalyticsSignificantField",function(){});var MetaDataService=function(){function MetaDataService(analyticsMetaDataUiService){this.analyticsMetaDataUiService=analyticsMetaDataUiService,this.transactionAnalyticsFields=null,this.logAnalyticsFields=null,this.userActivityAnalyticsFields=null,this.logMetaDataObject=[],this.btMetaDataObject=[],this.newSearchFieldsArray=[]}return MetaDataService.instance=function(){return AngularUtil.getADInjector().get("metaDataService")},MetaDataService.prototype.fetchFields=function(indexType,successCallback){var _this=this;this.analyticsMetaDataUiService.getStoreMetaDataForAllDocTypes(indexType).then(function(response){var analyticsUI=_this.analyticsMetaDataUiService.getStoreMetaData_response(response),fieldsFetched=_this.buildMetaDataObjectFromAnalyticsUi(analyticsUI,indexType);successCallback&&successCallback(fieldsFetched)})},MetaDataService.prototype.getTypeOfField=function(fieldName){var fieldDef=this.getFieldDefinitionForFullPathField(fieldName);return fieldDef?fieldDef.fieldType:void 0},MetaDataService.prototype.getFieldNamesFromMetaDataObject=function(indexType){return indexType===AnalyticsIndexType.LOG?_.keys(this.logMetaDataObject):indexType===AnalyticsIndexType.BIZ_TXN?_.pluck(this.btMetaDataObject,"name"):void 0},MetaDataService.prototype.getClassForFieldType=function(field){return MetaDataService.FieldTypeImageMappingObject[field]||"adsTextIcon"},MetaDataService.prototype.getNestedParentPath=function(fieldToInsert){var matchingFieldDefinition=this.getFieldDefinitionForFullPathField(fieldToInsert),nestedParentFieldName=this.getParentFieldForFieldDefinition(matchingFieldDefinition);return nestedParentFieldName},MetaDataService.prototype.getFieldDefinitionForFullPathField=function(fullPathField){var matchingFieldDefinition;return this.currentFields&&(matchingFieldDefinition=_.find(this.currentFields.allFieldDefinitions,function(fieldDef){return AnalyticsFields.getFullPathForFieldDefinition(fieldDef)==fullPathField})),matchingFieldDefinition},MetaDataService.prototype.getParentFieldForFieldDefinition=function(fieldDef){if(fieldDef&&fieldDef.parents&&fieldDef.parents.length>0){for(var nestedParentPath,foundNestedParent=!1,i=fieldDef.parents.length-1;i>-1;i--)foundNestedParent?nestedParentPath=fieldDef.parents[i].fieldName+"."+nestedParentPath:(fieldDef.parents[i].nested||fieldDef.parents[i].isNested)&&(nestedParentPath=fieldDef.parents[i].fieldName,foundNestedParent=!0);if(foundNestedParent)return nestedParentPath}return void 0},MetaDataService.prototype.isFieldTypeNumeric=function(fieldName,indexType){var typeOfField=this.getTypeOfField(fieldName,indexType);return typeOfField?MetaDataService.NUMERIC_TYPES.indexOf(typeOfField)>-1:!1},MetaDataService.prototype.isFieldTypeText=function(fieldName,indexType){var typeOfField=this.getTypeOfField(fieldName,indexType);return typeOfField?MetaDataService.TEXT_TYPES.indexOf(typeOfField)>-1:!1},MetaDataService.prototype.isFieldDefinitionTypeNumeric=function(fieldDef){var typeOfField=fieldDef.fieldType;return typeOfField?MetaDataService.NUMERIC_TYPES.indexOf(typeOfField)>-1:!1},MetaDataService.prototype.isFieldDefinitionTypeDate=function(fieldDef){var typeOfField=fieldDef.fieldType;return typeOfField?MetaDataService.DATE_TYPES.indexOf(typeOfField)>-1:!1},MetaDataService.prototype.isFieldDefinitionTypeString=function(fieldDef){return!this.isFieldDefinitionTypeDate(fieldDef)&&!this.isFieldDefinitionTypeNumeric(fieldDef)},MetaDataService.prototype.buildArrayOfParents=function(fieldToInsert){for(var arrOfParents=[],splitArr=fieldToInsert.split("."),prefix="",i=0;i<splitArr.length;i++)prefix+=splitArr[i],arrOfParents.push(prefix),prefix+=".";return arrOfParents},MetaDataService.prototype.buildMetaDataObjectFromAnalyticsUi=function(analyticsUi,indexType){var logMetaDataDefinitionObject,_this=this,arrayOfNonLeafTypes=["object","array","nested"],rawResponse=JSON.parse(analyticsUi.rawResponse),properties=rawResponse.properties;if(indexType===AnalyticsIndexType.LOG){this.logMetaDataObject=[];var names=_.keys(properties);return _.each(names,function(element){logMetaDataDefinitionObject=new MetaDataDefinition(element,properties[element].type),_this.logMetaDataObject.push(logMetaDataDefinitionObject)}),this.logMetaDataObject}if(indexType===AnalyticsIndexType.BIZ_TXN){var prefixArr=[];this.newSearchFieldsArray=[];var btMetaDataDefinitionObject,name,type,iterOp=function(val,key){(_.has(val,"type")||_.has(val,"properties"))&&(_.isUndefined(val.type)||-1!==arrayOfNonLeafTypes.indexOf(val.type)?_.isUndefined(val.type)||"object"===val.type||"nested"===val.type?_.has(val,"properties")&&(prefixArr.push(key),btMetaDataDefinitionObject=new MetaDataDefinition(prefixArr.join("."),val.type),_this.newSearchFieldsArray.push(btMetaDataDefinitionObject),_.each(val.properties,iterOp),prefixArr.pop()):"array"===val.type&&_.has(val,"items")&&(prefixArr.push(key),btMetaDataDefinitionObject=new MetaDataDefinition(prefixArr.join("."),val.type),_this.newSearchFieldsArray.push(btMetaDataDefinitionObject),_.each(val.items.properties,iterOp),prefixArr.pop()):(name=prefixArr.length>0?prefixArr.join(".")+"."+key:key,type=val.type,btMetaDataDefinitionObject=new MetaDataDefinition(name,type),_this.newSearchFieldsArray.push(btMetaDataDefinitionObject)))
};_.each(properties,iterOp,prefixArr);var arrayOfPropertiesThatAreNonLeafTypes=_.reject(this.newSearchFieldsArray,function(metaDataDefObj){return _.isUndefined(metaDataDefObj.type)||-1!==arrayOfNonLeafTypes.indexOf(metaDataDefObj.type)});return this.btMetaDataObject=arrayOfPropertiesThatAreNonLeafTypes,this.btMetaDataObject}},MetaDataService.NUMERIC_TYPES=[FieldType.LONG,FieldType.DOUBLE,FieldType.INTEGER,FieldType.FLOAT],MetaDataService.TEXT_TYPES=[FieldType.STRING],MetaDataService.DATE_TYPES=[FieldType.DATE],MetaDataService.$inject=["analyticsMetaDataUiService"],MetaDataService.FieldTypeImageMappingObject={date:"adsDateIcon",string:"adsTextIcon","long":"adsNumericIcon","double":"adsNumericIcon","boolean":"adsBooleanIcon",currency:"adsCurrencyIcon"},MetaDataService}();appdynamicsModule.service("metaDataService",MetaDataService),define("app/view/analytics/metaData/MetaDataService",function(){});var AnalyticsDashboardService=function(){function AnalyticsDashboardService($rootScope,$http,$q,timeRangeService,resourceManager,notificationService){this.$rootScope=$rootScope,this.$http=$http,this.$q=$q,this.timeRangeService=timeRangeService,this.resourceManager=resourceManager,this.notificationService=notificationService,this.defaults={title:"",style:"dark",editable:!0,failover:!1,panel_hints:!0,rows:[],nav:[{type:"timepicker"}],services:{},index:{interval:"none",pattern:"_all",warm_fields:!0},refresh:!1},this.defaults.index["default"]="biz_txn_2",this.current=_.clone(this.defaults),this.indices=[this.defaults.index["default"]]}return AnalyticsDashboardService.prototype.loadTA=function(dashType,callback){_.isUndefined(dashType)||(this.current={},this.indices=[],AnalyticsIndexType.BIZ_TXN===dashType?this.file_load("TransactionAnalytics.json").then(callback):this.file_load("TransactionAnalytics-log.json").then(callback))},AnalyticsDashboardService.prototype.file_load=function(file){var _this=this,deferred=this.$q.defer();return this.$http({url:"app/view/analytics/dashboard/"+file.replace(/\.(?!json)/,"/"),method:"GET"}).then(function(result){return result?(_this.dash_load(_this.dash_defaults(result.data)),void deferred.resolve()):!1},function(){ADLoggerService.error("Error loading the TransactionAnalytics JSON."),deferred.reject()}),deferred.promise},AnalyticsDashboardService.prototype.dash_load=function(dashboard){dashboard=this.dash_defaults(dashboard),"none"===dashboard.index.interval&&(this.indices=[dashboard.index["default"]]),this.current=_.clone(dashboard)},AnalyticsDashboardService.prototype.dash_defaults=function(dashboard){return _.defaults(dashboard,this.defaults),_.defaults(dashboard.index,this.defaults.index),_.defaults(dashboard.loader,this.defaults.loader),angular.copy(dashboard)},AnalyticsDashboardService.prototype.refresh=function(){this.indices=[this.current.index.default],this.$rootScope.$broadcast(AnalyticsUtils.UEV_ANALYTICS_REFRESH)},AnalyticsDashboardService.$inject=["$rootScope","$http","$q","timeRangeService","resourceManager","notificationService"],AnalyticsDashboardService}();appdynamicsModule.service("analyticsDashboardService",AnalyticsDashboardService),define("app/view/analytics/services/AnalyticsDashboardService",function(){});var AnalyticsFilterService=function(){function AnalyticsFilterService($rootScope,$timeout,analyticsDashboardService){this.$rootScope=$rootScope,this.$timeout=$timeout,this.analyticsDashboardService=analyticsDashboardService,analyticsDashboardService.current.services.filter=analyticsDashboardService.current.services.filter||{},this._d={list:{},ids:[]},this.init()}return AnalyticsFilterService.prototype.list=function(){return this.getFilter().list||{}},AnalyticsFilterService.prototype.isDefaultFilter=function(){var analyticsFilter=this.getFilter();return Util.isUndefOrNull(analyticsFilter)?!0:1===_.keys(this.list()).length&&"eventTimestamp"===this.list()[0].field?!0:!1},AnalyticsFilterService.prototype.getFilter=function(){return Util.get(this.analyticsDashboardService,["current","services","filter"])||{}},AnalyticsFilterService.prototype.setFilter=function(filter){var _this=this;this.removeAll(),filter.ids.forEach(function(id){_this.set(filter.list[id],void 0,!0)})},AnalyticsFilterService.prototype.removeAll=function(){var _this=this;this.ids().forEach(function(id){_this.remove(id,!0)})},AnalyticsFilterService.prototype.set=function(filter,id,noRefresh){var _r,_this=this;if(_.defaults(filter,{mandate:"must",active:!0}),_.isUndefined(id))if(_.isUndefined(filter.type))_r=!1;else{var _id=this.nextId(),_filter={alias:"",id:_id,mandate:"must"};_.defaults(filter,_filter),this.analyticsDashboardService.current.services.filter.list[_id]=filter,this.analyticsDashboardService.current.services.filter.ids.push(_id),_r=_id}else _.isUndefined(this.analyticsDashboardService.current.services.filter.list[id])?_r=!1:(_.extend(this.analyticsDashboardService.current.services.filter.list[id],filter),_r=id);return ViewUtil.safeApply(this.$rootScope),noRefresh!==!0&&this.$timeout(function(){_this.analyticsDashboardService.refresh()}),this.analyticsDashboardService.current.services.filter.ids=this.analyticsDashboardService.current.services.filter.ids=_.intersection(_.map(this.analyticsDashboardService.current.services.filter.list,function(v,k){return parseInt(k,10)}),this.analyticsDashboardService.current.services.filter.ids),this.$rootScope.$broadcast("filter"),_r},AnalyticsFilterService.prototype.remove=function(id,noRefresh){var _r,_this=this;return _.isUndefined(this.analyticsDashboardService.current.services.filter.list[id])?_r=!1:(delete this.analyticsDashboardService.current.services.filter.list[id],this.analyticsDashboardService.current.services.filter.ids=this.analyticsDashboardService.current.services.filter.ids=_.without(this.analyticsDashboardService.current.services.filter.ids,id),_r=!0),ViewUtil.safeApply(this.$rootScope),noRefresh!==!0&&this.$timeout(function(){_this.analyticsDashboardService.refresh()},0),this.$rootScope.$broadcast("filter"),_r},AnalyticsFilterService.prototype.removeByType=function(type,noRefresh){var _this=this,ids=this.idsByType(type);return _.each(ids,function(id){_this.remove(id,!0)}),noRefresh!==!0&&this.$timeout(function(){_this.analyticsDashboardService.refresh()},0),ids},AnalyticsFilterService.prototype.getBoolFilter=function(ids,scatterConfig){var _this=this;void 0===scatterConfig&&(scatterConfig=null);var bool=ejs.BoolFilter(),added_a_filter=!1;return _.each(ids,function(id){if(_this.analyticsDashboardService.current.services.filter.list[id].active){added_a_filter=!0;var ejsObj=_this.getEjsObj(id);switch("time"==_this.analyticsDashboardService.current.services.filter.list[id].type&&scatterConfig&&(ejsObj.from(new Date((new Date).getTime()-scatterConfig.scatterTimeInMinutes*TimeRangeService.MILLISECONDS_PER_MINUTE).getTime()),ejsObj.to((new Date).getTime())),_this.analyticsDashboardService.current.services.filter.list[id].mandate){case"mustNot":bool.mustNot(ejsObj);break;case"either":bool.should(ejsObj);break;default:bool.must(ejsObj)}}}),added_a_filter||bool.must(ejs.MatchAllFilter()),bool},AnalyticsFilterService.prototype.getEjsObj=function(id){return this.toEjsObj(this.analyticsDashboardService.current.services.filter.list[id])},AnalyticsFilterService.prototype.toEjsObj=function(filter){if(!filter.active)return!1;switch(filter.type){case"time":var _f=ejs.RangeFilter(filter.field).from(AnalyticsUtil.parseDate(filter.from).valueOf());return _.isUndefined(filter.to)||(_f=_f.to(AnalyticsUtil.parseDate(filter.to).valueOf())),_f;case"range":return ejs.RangeFilter(filter.field).from(filter.from).to(filter.to);case"querystring":return ejs.QueryFilter(ejs.QueryStringQuery(filter.query)).cache(!0);case"field":return ejs.QueryFilter(ejs.QueryStringQuery(filter.field+":("+filter.query+")")).cache(!0);case"terms":return ejs.TermsFilter(filter.field,filter.value);case"exists":return ejs.ExistsFilter(filter.field);case"missing":return ejs.MissingFilter(filter.field);case"nestedFilter":var termsFilter=ejs.TermsFilter(filter.field,filter.value);return ejs.NestedFilter(filter.path).filter(termsFilter);default:return!1}},AnalyticsFilterService.prototype.getByType=function(type,inactive){return _.pick(this.analyticsDashboardService.current.services.filter.list,this.idsByType(type,inactive))},AnalyticsFilterService.prototype.idsByType=function(type,inactive){var _require=inactive?{type:type}:{type:type,active:!0};return _.pluck(_.where(this.analyticsDashboardService.current.services.filter.list,_require),"id")},AnalyticsFilterService.prototype.timeField=function(){return _.pluck(this.getByType("time"),"field")},AnalyticsFilterService.prototype.timeRange=function(parse){var _t=_.last(_.where(this.analyticsDashboardService.current.services.filter.list,{type:"time",active:!0}));if(_.isUndefined(_t))return!1;if(parse===!1)return{from:_t.from,to:_t.to};var _from=_t.from,_to=_t.to||new Date;return{from:AnalyticsUtil.parseDate(_from),to:AnalyticsUtil.parseDate(_to)}},AnalyticsFilterService.prototype.nextId=function(){var idCount=this.analyticsDashboardService.current.services.filter.ids.length;if(idCount>0){var ids=_.sortBy(_.clone(this.analyticsDashboardService.current.services.filter.ids),function(num){return num});return AnalyticsUtil.smallestMissing(ids)}return 0},AnalyticsFilterService.prototype.ids=function(){return this.getFilter().ids},AnalyticsFilterService.prototype.init=function(){var _this=this;_.defaults(this.analyticsDashboardService.current.services.filter,this._d),_.each(this.analyticsDashboardService.current.services.filter.list,function(f){_this.set(f,f.id,!0)})},AnalyticsFilterService.$inject=["$rootScope","$timeout","analyticsDashboardService"],AnalyticsFilterService}();appdynamicsModule.service("analyticsFilterService",AnalyticsFilterService),define("app/view/analytics/services/AnalyticsFilterService",function(){});var AnalyticsQueryService=function(){function AnalyticsQueryService($q,analyticsDashboardService,$rootScope){var _this=this;this.$q=$q,this.analyticsDashboardService=analyticsDashboardService,this.$rootScope=$rootScope,analyticsDashboardService.current.services.query=analyticsDashboardService.current.services.query||{},_.defaults(analyticsDashboardService.current.services.query,{list:{},ids:[]}),this.colors=AdColorPalette.DEFAULT_PALETTE_20,this.resolvedQueries=[],this._query={alias:"",pin:!1,type:"lucene",enable:!0},this._dTypes={lucene:{query:"*"},regex:{query:".*"},topN:{query:"*",field:"_type",size:5,union:"AND"}},this.queryTypes={lucene:{require:">=0.17.0",icon:"icon-circle",resolve:function(query){var p=_this.$q.defer();return p.resolve(_.extend(query,{parent:query.id})),p.promise}},regex:{require:">=0.90.12",icon:"icon-circle",resolve:function(query){var p=_this.$q.defer();return p.resolve(_.extend(query,{parent:query.id})),p.promise}}},this.types=[],this.init()}return AnalyticsQueryService.prototype.list=function(){return this.getQuery().list||{}},AnalyticsQueryService.prototype.ids=function(){return this.getQuery().ids},AnalyticsQueryService.prototype.init=function(){var _this=this;this.analyticsDashboardService.current.services.query.ids=_.intersection(_.map(this.analyticsDashboardService.current.services.query.list,function(v,k){return parseInt(k,10)}),this.ids()),_.each(this.list(),function(query){query=_this.defaults(query)}),0===this.ids().length&&this.set({}),this.$rootScope.$on(AnalyticsUtils.UEV_ANALYTICS_DASHBOARD_REFRESH,function(){_this.resolve().then(function(){_this.$rootScope.$broadcast(AnalyticsUtils.UEV_ANALYTICS_REFRESH)})})},AnalyticsQueryService.prototype.set=function(query,id){return _.isUndefined(id)?(query.id=_.isUndefined(query.id)?this.nextId():query.id,query.color=query.color||this.colorAt(query.id),query=this.defaults(query),this.analyticsDashboardService.current.services.query.list[query.id]=query,this.analyticsDashboardService.current.services.query.ids.push(query.id),query.id):_.isUndefined(this.analyticsDashboardService.current.services.query.list[id])?!1:(_.extend(this.analyticsDashboardService.current.services.query.list[id],query),id)},AnalyticsQueryService.prototype.defaults=function(query){return _.defaults(query,this._query),_.defaults(query,this._dTypes[query.type]),query.color=query.color||this.colorAt(query.id),query},AnalyticsQueryService.prototype.remove=function(id){return _.isUndefined(this.analyticsDashboardService.current.services.query.list[id])?!1:(delete this.analyticsDashboardService.current.services.query.list[id],this.analyticsDashboardService.current.services.query.ids=_.without(this.analyticsDashboardService.current.services.query.ids,id),!0)},AnalyticsQueryService.prototype.getQuery=function(){return Util.get(this.analyticsDashboardService,["current","services","query"])||{}},AnalyticsQueryService.prototype.setQuery=function(query){var _this=this;this.removeAll(),query.ids.forEach(function(id){_this.set(query.list[id])})},AnalyticsQueryService.prototype.removeAll=function(){var _this=this;this.ids().forEach(function(id){_this.remove(id)})},AnalyticsQueryService.prototype.isDefaultQuery=function(){var analyticsQuery=this.getQuery();return Util.isUndefOrNull(analyticsQuery)?!0:!this.isOnlyQueryTerm()||""!==analyticsQuery.list[0].query&&"*"!==analyticsQuery.list[0].query?!1:!0},AnalyticsQueryService.prototype.toEjsObj=function(q){switch(q.type){case"lucene":return ejs.QueryStringQuery(q.query||"*");case"regex":return ejs.RegexpQuery("_all",q.query);default:return!1}},AnalyticsQueryService.prototype.getQueryObjs=function(ids){var _this=this;return _.isUndefined(ids)?this.resolvedQueries:_.flatten(_.map(ids,function(id){return _.where(_this.resolvedQueries,{parent:id})}))},AnalyticsQueryService.prototype.idsByMode=function(config){switch(config.mode){case"all":return _.pluck(_.where(this.analyticsDashboardService.current.services.query.list,{enable:!0}),"id");case"pinned":return _.pluck(_.where(this.analyticsDashboardService.current.services.query.list,{pin:!0,enable:!0}),"id");case"unpinned":return _.pluck(_.where(this.analyticsDashboardService.current.services.query.list,{pin:!1,enable:!0}),"id");case"selected":return _.intersection(_.pluck(_.where(this.analyticsDashboardService.current.services.query.list,{enable:!0}),"id"),config.ids);default:return _.pluck(_.where(this.analyticsDashboardService.current.services.query.list,{enable:!0}),"id")}},AnalyticsQueryService.prototype.resolve=function(){var _this=this;return this.$q.all(_.map(this.analyticsDashboardService.current.services.query.ids,function(q){return _this.queryTypes[_this.analyticsDashboardService.current.services.query.list[q].type].resolve(_.clone(_this.analyticsDashboardService.current.services.query.list[q])).then(function(data){return data})})).then(function(data){return _this.resolvedQueries=_.flatten(data),_.each(_this.resolvedQueries,function(q,i){q.id=i}),_this.resolvedQueries})},AnalyticsQueryService.prototype.nextId=function(){var idCount=this.analyticsDashboardService.current.services.query.ids.length;if(idCount>0){var ids=_.sortBy(_.clone(this.analyticsDashboardService.current.services.query.ids),function(num){return num});return AnalyticsUtil.smallestMissing(ids)}return 0},AnalyticsQueryService.prototype.colorAt=function(id){return this.colors[id%this.colors.length]},AnalyticsQueryService.prototype.isDefaultQueryKeyword=function(id){return""===this.list()[id].query||"*"===this.list()[id].query},AnalyticsQueryService.prototype.isOnlyQueryTerm=function(){return 1===_.values(this.list()).length},AnalyticsQueryService.$inject=["$q","analyticsDashboardService","$rootScope"],AnalyticsQueryService.NESTED_AGGREGATION_NAME="nestedAgg",AnalyticsQueryService.RANGE_AGGREGATION_NAME="rangeAgg",AnalyticsQueryService.TERMS_AGGREGATION_NAME="termsAgg",AnalyticsQueryService.MAX_AGGREGATION_NAME="maxAgg",AnalyticsQueryService.MIN_AGGREGATION_NAME="minAgg",AnalyticsQueryService.DATE_HISTOGRAM_AGGREGATION="dateHistAgg",AnalyticsQueryService.PERCENTILES_AGGREGATION="percentilesAgg",AnalyticsQueryService}();appdynamicsModule.service("analyticsQueryService",AnalyticsQueryService),define("app/view/analytics/services/AnalyticsQueryService",function(){});var AnalyticsPersistenceService=function(){function AnalyticsPersistenceService($q,$rootScope){this.$q=$q,this.$rootScope=$rootScope,this.persistedQueryDoc=null,this.persistedQueryDoc=this.getDoc()}return AnalyticsPersistenceService.prototype.getDefaultDoc=function(){return{queries:[]}},AnalyticsPersistenceService.prototype.getDoc=function(){var queryDocString=localStorage.getItem("ads-analytics-queries");return _.isString(queryDocString)&&!_.isEmpty(queryDocString)?JSON.parse(queryDocString):this.getDefaultDoc()},AnalyticsPersistenceService.prototype.saveDoc=function(){var queryDocString=JSON.stringify(this.persistedQueryDoc);localStorage.setItem("ads-analytics-queries",queryDocString)},AnalyticsPersistenceService.prototype.getQueries=function(){return this.persistedQueryDoc.queries},AnalyticsPersistenceService.prototype.getQuery=function(id){return _.findWhere(this.getQueries(),{id:id})},AnalyticsPersistenceService.prototype.removeQuery=function(id){Util.removeWhere(this.getQueries(),{id:id}),this.saveDoc()},AnalyticsPersistenceService.prototype.saveQuery=function(name,query,filter){var id=0;query=angular.copy(query),filter=angular.copy(filter),_.isEmpty(this.getQueries())||(id=_.max(_.map(this.getQueries(),function(persistedQuery){return persistedQuery.id})),id++),this.getQueries().push({id:id,name:name,filter:filter,query:query}),this.saveDoc()},AnalyticsPersistenceService.$inject=["$q","$rootScope"],AnalyticsPersistenceService}();appdynamicsModule.service("analyticsPersistenceService",AnalyticsPersistenceService),define("app/view/analytics/services/AnalyticsPersistenceService",function(){});var AnalyticsSyntheticJobCache=function(){function AnalyticsSyntheticJobCache(){}return AnalyticsSyntheticJobCache.instance=function(){return AngularUtil.getADInjector().get("analyticsSyntheticJobCache")},AnalyticsSyntheticJobCache.prototype.fetchJobs=function(applicationId){var _this=this;if(void 0===applicationId&&(applicationId=-1),applicationId>0&&(this.currentApplicationId=applicationId),this.currentApplicationId<0){var urlParams=new URLParams(SharedInjectorService.instance().$location().path());this.currentApplicationId=urlParams.applicationId()}return SyntheticScheduleUiService.instance().getSchedules(this.currentApplicationId).then(function(response){var jobs=SyntheticScheduleUiService.instance().getSchedules_response(response);return _this.currentJobs=jobs.schedules,_this.mapOfJobsById={},_.each(_this.currentJobs,function(job){_this.mapOfJobsById[job.id]=job}),_this.currentJobs})},AnalyticsSyntheticJobCache.prototype.getJobById=function(id){return this.mapOfJobsById&&this.mapOfJobsById[id]?this.mapOfJobsById[id]:null},AnalyticsSyntheticJobCache.$inject=[],AnalyticsSyntheticJobCache}();appdynamicsModule.service("analyticsSyntheticJobCache",AnalyticsSyntheticJobCache),define("app/view/analytics/services/AnalyticsSyntheticJobCache",function(){});var AnalyticsDashboardManager=function(){function AnalyticsDashboardManager(dashboardTypeTagsFilter){this.dashboardTypeTagsFilter=dashboardTypeTagsFilter,this.analyticsDashboardDefinitions=[],this.selectedDashboardDefinition=null,this.analyticsDashboardUiService=AnalyticsDashboardUiService.instance()}return AnalyticsDashboardManager.getDashboardTagsFromAnalyticsMode=function(analyticsMode){var tags=[];return tags.push(0==analyticsMode?AnalyticsDashboardManager.TRANSACTION_ANALYITCS_DASHBOARD_TAG:2==analyticsMode?AnalyticsDashboardManager.USER_ACTIVITY_ANALYITCS_DASHBOARD_TAG:3==analyticsMode?AnalyticsDashboardManager.SYNTHETIC_JOB_ANALYITCS_DASHBOARD_TAG:4==analyticsMode?AnalyticsDashboardManager.WEB_SESSION_ANALYITCS_DASHBOARD_TAG:5==analyticsMode?AnalyticsDashboardManager.MOBILE_SESSION_ANALYITCS_DASHBOARD_TAG:6==analyticsMode?AnalyticsDashboardManager.EUM_MOBILE_NETWORK_REQUEST_DASHBOARD_TAG:7==analyticsMode?AnalyticsDashboardManager.EUM_WEB_ANALYZE_DASHBOARD_TAG:8==analyticsMode?AnalyticsDashboardManager.ANALYTICS_MOBILE_NETWORK_REQUEST_DASHBOARD_TAG:AnalyticsDashboardManager.LOG_ANALYITCS_DASHBOARD_TAG),tags},AnalyticsDashboardManager.getJSONConfigForWidget=function(analyticsWidgetDefinition,context){var id=analyticsWidgetDefinition.id||Util.generateId(),widgetJson={};return 0===analyticsWidgetDefinition.type.toString().indexOf("PREDEF_")?widgetJson=analyticsWidgetDefinition:analyticsWidgetDefinition.type===AnalyticsWidgetTypes.BAR||analyticsWidgetDefinition.type===AnalyticsWidgetTypes.TABLE||analyticsWidgetDefinition.type===AnalyticsWidgetTypes.TREEMAP||analyticsWidgetDefinition.type===AnalyticsWidgetTypes.CIRCLEPACK?(widgetJson={id:id,sizeX:analyticsWidgetDefinition.sizeX?analyticsWidgetDefinition.sizeX:6,sizeY:analyticsWidgetDefinition.sizeY?analyticsWidgetDefinition.sizeY:3,type:analyticsWidgetDefinition.type,field:analyticsWidgetDefinition.field,operation:analyticsWidgetDefinition.operation,breakup:analyticsWidgetDefinition.breakup,chart:"bar",counter_pos:"below",title:analyticsWidgetDefinition.title,showSettingsCog:_.isUndefined(analyticsWidgetDefinition.showSettingsCog)?!0:analyticsWidgetDefinition.showSettingsCog,isClosable:_.isUndefined(analyticsWidgetDefinition.isClosable)?!0:analyticsWidgetDefinition.isClosable,indexType:analyticsWidgetDefinition.indexType,yAxisFields:analyticsWidgetDefinition.yAxisFields,xAxisFields:analyticsWidgetDefinition.xAxisFields},analyticsWidgetDefinition.type===AnalyticsWidgetTypes.TREEMAP?widgetJson.chart="treemap":analyticsWidgetDefinition.type===AnalyticsWidgetTypes.CIRCLEPACK?widgetJson.chart="circlepack":analyticsWidgetDefinition.type===AnalyticsWidgetTypes.TABLE&&(widgetJson.chart="table")):analyticsWidgetDefinition.type===AnalyticsWidgetTypes.PIE?widgetJson={id:id,sizeX:6,sizeY:3,type:analyticsWidgetDefinition.type,field:analyticsWidgetDefinition.field,operation:analyticsWidgetDefinition.operation,breakup:analyticsWidgetDefinition.breakup,chart:"pie",counter_pos:"below",title:analyticsWidgetDefinition.title,showSettingsCog:_.isUndefined(analyticsWidgetDefinition.showSettingsCog)?!0:analyticsWidgetDefinition.showSettingsCog,isClosable:_.isUndefined(analyticsWidgetDefinition.isClosable)?!0:analyticsWidgetDefinition.isClosable,indexType:analyticsWidgetDefinition.indexType,yAxisFields:analyticsWidgetDefinition.yAxisFields,xAxisFields:analyticsWidgetDefinition.xAxisFields}:analyticsWidgetDefinition.type===AnalyticsWidgetTypes.HISTOGRAM?widgetJson={id:id,sizeX:analyticsWidgetDefinition.sizeX?analyticsWidgetDefinition.sizeX:6,sizeY:analyticsWidgetDefinition.sizeY?analyticsWidgetDefinition.sizeY:3,type:analyticsWidgetDefinition.type,field:analyticsWidgetDefinition.field,breakup:analyticsWidgetDefinition.breakup,mode:"count",time_field:"eventTimestamp",value_field:null,resolution:analyticsWidgetDefinition.resolution,fill:0,linewidth:3,timezone:"browser",spyable:!0,bars:!0,stack:_.isUndefined(analyticsWidgetDefinition.stack)?!1:analyticsWidgetDefinition.stack,chart:analyticsWidgetDefinition.chart,points:!1,lines:!1,legend:!0,"x-axis":!0,"y-axis":!0,percentage:!1,interactive:!0,options:!0,tooltip:{value_type:"individual",query_as_alias:!0},title:analyticsWidgetDefinition.title,hideTitleBar:analyticsWidgetDefinition.hideTitleBar,hideLegend:analyticsWidgetDefinition.hideLegend,scale:1,y_format:"none",grid:{max:null,min:0},annotate:{enable:!1,query:"*",size:20,field:analyticsWidgetDefinition.field,sort:["_score","desc"]},operation:analyticsWidgetDefinition.operation,zerofill:!0,derivative:!1,showSettingsCog:analyticsWidgetDefinition.showSettingsCog?analyticsWidgetDefinition.showSettingsCog:!0,isClosable:_.isUndefined(analyticsWidgetDefinition.isClosable)?!0:analyticsWidgetDefinition.isClosable,indexType:analyticsWidgetDefinition.indexType,yAxisFields:analyticsWidgetDefinition.yAxisFields,xAxisFields:analyticsWidgetDefinition.xAxisFields,isSearchPanelHistorgam:analyticsWidgetDefinition.isSearchPanelHistorgam}:analyticsWidgetDefinition.type===AnalyticsWidgetTypes.GRID?widgetJson={id:"trandet",sizeX:analyticsWidgetDefinition.sizeX?analyticsWidgetDefinition.sizeX:6,sizeY:analyticsWidgetDefinition.sizeY?analyticsWidgetDefinition.sizeY:3,type:analyticsWidgetDefinition.type,title:analyticsWidgetDefinition.title,hideTitleBar:analyticsWidgetDefinition.hideTitleBar,sort:["_score","desc"],group:"default",fields:[],highlight:[],sortable:!0,header:!0,paging:!0,showFieldSelector:!0,trimFactor:300,normTimes:!0,spyable:!0,localTime:!1,timeField:"@timestamp",yAxisFields:analyticsWidgetDefinition.yAxisFields,xAxisFields:analyticsWidgetDefinition.xAxisFields}:analyticsWidgetDefinition.type===WidgetTypes.METRIC_LABEL?widgetJson={id:id,analytics:!0,sizeX:6,sizeY:2,type:WidgetTypes.METRIC_LABEL,chart:"metric_label",field:analyticsWidgetDefinition.field,operation:analyticsWidgetDefinition.operation,title:analyticsWidgetDefinition.title,useAutomaticFontSize:!0,showSettingsCog:!1,isClosable:_.isUndefined(analyticsWidgetDefinition.isClosable)?!0:analyticsWidgetDefinition.isClosable,indexType:analyticsWidgetDefinition.indexType,yAxisFields:analyticsWidgetDefinition.yAxisFields,xAxisFields:analyticsWidgetDefinition.xAxisFields}:analyticsWidgetDefinition.type===AnalyticsWidgetTypes.REAL_TIME_TRANSACTIONS?widgetJson={id:Util.generateId(),sizeX:12,sizeY:4,type:analyticsWidgetDefinition.type,time_field:"eventTimestamp",title:analyticsWidgetDefinition.title,showSettingsCog:analyticsWidgetDefinition.showSettingsCog?analyticsWidgetDefinition.showSettingsCog:!0,isClosable:analyticsWidgetDefinition.isClosable?analyticsWidgetDefinition.isClosable:!0,indexType:analyticsWidgetDefinition.indexType,yAxisFields:analyticsWidgetDefinition.yAxisFields,xAxisFields:analyticsWidgetDefinition.xAxisFields}:analyticsWidgetDefinition.type===AnalyticsWidgetTypes.PERCENTILE&&(widgetJson={id:Util.generateId(),type:analyticsWidgetDefinition.type,sizeX:6,sizeY:analyticsWidgetDefinition.sizeY?analyticsWidgetDefinition.sizeY:4,title:analyticsWidgetDefinition.title,showSettingsCog:_.isUndefined(analyticsWidgetDefinition.showSettingsCog)?!0:analyticsWidgetDefinition.showSettingsCog,isClosable:_.isUndefined(analyticsWidgetDefinition.isClosable)?!0:analyticsWidgetDefinition.isClosable,yAxisFields:analyticsWidgetDefinition.yAxisFields,xAxisFields:analyticsWidgetDefinition.xAxisFields}),widgetJson.dashboardContext=context,widgetJson},AnalyticsDashboardManager.prototype.addDashboard=function(name,tags,widgets,context,createInServer){var _this=this,analyticsDashboardDefinition={name:name,dashboardData:{tags:tags,widgets:this.getWidgetDefinitions(widgets,context),context:context}};return analyticsDashboardDefinition.dashboardData.tags=tags,createInServer?this.analyticsDashboardUiService.createAnalyticsDashboard(this.marshallAnalyticsDashboard(analyticsDashboardDefinition)).then(function(response){var dashboard=_this.analyticsDashboardUiService.createAnalyticsDashboard_response(response),newlySavedADD=_this.unmarshallAnalyticsDashboard(dashboard);return _this.analyticsDashboardDefinitions.push(newlySavedADD),newlySavedADD}):(this.analyticsDashboardDefinitions.push(analyticsDashboardDefinition),Util.getInstantPromise(analyticsDashboardDefinition))},AnalyticsDashboardManager.prototype.getWidgetDefinitions=function(widgets,context){return _.map(widgets,function(widget){return AnalyticsDashboardManager.getJSONConfigForWidget(widget,context)})},AnalyticsDashboardManager.prototype.fetchDashboard=function(context,id){var _this=this;return this.analyticsDashboardUiService.getAnalyticsDashboardById(id).then(function(response){_this.processDashboardDefFetched(response,context)})},AnalyticsDashboardManager.prototype.fetchDashboards=function(context){var _this=this,promise=this.analyticsDashboardUiService.getAllAnalyticsDashboards();return promise.then(function(dashboards){_this.analyticsDashboardDefinitions.length>0?_this.analyticsDashboardDefinitions=_this.analyticsDashboardDefinitions.splice(0,1):Util.emptyArray(_this.analyticsDashboardDefinitions);for(var i=0;i<dashboards.length;i++)_this.processDashboardDefFetched(dashboards[i],context)}),promise},AnalyticsDashboardManager.prototype.processDashboardDefFetched=function(dashboard,context){var dashDefinition=this.unmarshallAnalyticsDashboard(dashboard);if(this.includeDashboard(dashDefinition)){var duplicateFound=!1;if(_.forEach(this.analyticsDashboardDefinitions,function(dashDef,index,definitions){dashDef.id===dashDefinition.id&&(definitions[index]=dashDefinition,duplicateFound=!0)}),duplicateFound)return;context&&(dashDefinition.dashboardData.context.timeRange=context.timeRange,_.forEach(dashDefinition.dashboardData.widgets,function(widget){widget.dashboardContext=context})),this.handleUpgradesToDashboardStructure(dashDefinition),this.analyticsDashboardDefinitions.push(dashDefinition),this.excludeMultiFieldsWidget(dashDefinition)}},AnalyticsDashboardManager.prototype.marshallAnalyticsDashboard=function(dashboard){return this.defaultDashboardNameFixUpstream(dashboard),{id:dashboard.id,version:dashboard.version,name:dashboard.name,dashboardJsonData:JSON.stringify(dashboard.dashboardData)}},AnalyticsDashboardManager.prototype.unmarshallAnalyticsDashboard=function(dashboard){var dashboardData=JSON.parse(dashboard.dashboardJsonData);dashboardData.context.filter=FilterSet.unmarshallFilterSetFromJSON(dashboardData.context.filter);var dashboardDef={};return dashboardDef.id=dashboard.id,dashboardDef.version=dashboard.version,dashboardDef.name=dashboard.name,dashboardDef.dashboardData=dashboardData,dashboardDef.createdBy=dashboard.createdBy,dashboardDef.createdOn=dashboard.createdOn,dashboardDef.modifiedBy=dashboard.modifiedBy,dashboardDef.modifiedOn=dashboard.modifiedOn,dashboardDef.createdOnString=DateTimeUtil.getDateTimeString(dashboard.createdOn),dashboardDef.modifiedOnString=DateTimeUtil.getDateTimeString(dashboard.createdOn),dashboardDef.searchType=AnalyticsSavedSearchType.BASIC,this.defaultDashboardNameFixDownstream(dashboardDef),dashboardDef},AnalyticsDashboardManager.prototype.saveDashboard=function(dashboard,callback,displaySuccessMessage){var _this=this;if(void 0===displaySuccessMessage&&(displaySuccessMessage=!1),!dashboard.isScratchPad){var serializableDashboard=angular.copy(dashboard);_.forEach(serializableDashboard.dashboardData.widgets,function(widget){delete widget.dashboardContext}),this.analyticsDashboardUiService.updateAnalyticsDashboard(this.marshallAnalyticsDashboard(serializableDashboard)).then(function(response){var dashboard=_this.analyticsDashboardUiService.updateAnalyticsDashboard_response(response),currentDashboardDefinition=_this.getDashboardById(dashboard.id);currentDashboardDefinition.version=dashboard.version+1,_.isFunction(callback)&&callback(),displaySuccessMessage&&NotificationService.instance().displayUpdatedSuccessfullyMessage()})}},AnalyticsDashboardManager.prototype.cloneDashboard=function(dashboardId,callback){var _this=this;this.analyticsDashboardUiService.cloneDashboard(dashboardId).then(function(response){var dashboard=_this.analyticsDashboardUiService.cloneDashboard_response(response),newlyCreatedDash=_this.unmarshallAnalyticsDashboard(dashboard);_this.analyticsDashboardDefinitions.push(newlyCreatedDash),_.isFunction(callback)&&callback(newlyCreatedDash)})},AnalyticsDashboardManager.prototype.getDashboardsByTag=function(tag){return _.filter(this.analyticsDashboardDefinitions,function(dashboard){return"*"===tag||_.contains(dashboard.dashboardData.tags||[],tag)})},AnalyticsDashboardManager.prototype.getDashboardById=function(dashboardId){return _.findWhere(this.analyticsDashboardDefinitions,{id:dashboardId})},AnalyticsDashboardManager.prototype.getDashboardByName=function(name){return _.findWhere(this.analyticsDashboardDefinitions,{name:name})},AnalyticsDashboardManager.prototype.deleteDashboardById=function(dashboardId){Util.removeWhere(this.analyticsDashboardDefinitions,{id:dashboardId}),this.analyticsDashboardUiService.deleteDashboard(dashboardId)},AnalyticsDashboardManager.prototype.setSelectedAnalyticsDashboardDefinition=function(analyticsDashboardDefinition){this.selectedDashboardDefinition=analyticsDashboardDefinition
},AnalyticsDashboardManager.prototype.getSelectedAnalyticsDashboardDefName=function(){return this.selectedDashboardDefinition?this.selectedDashboardDefinition.name:null},AnalyticsDashboardManager.prototype.handleUpgradesToDashboardStructure=function(dashDefinition){var dashboardData=dashDefinition.dashboardData;if(Util.isDefAndNotNull(dashboardData)){var context=dashboardData.context;Util.isDefAndNotNull(context)&&Util.isUndefOrNull(context.indexType)&&(context.isLogAnalytics?context.indexType=AnalyticsIndexType.LOG:context.isTransactionAnalytics?context.indexType=AnalyticsIndexType.BIZ_TXN:context.isUserActivityAnalytics&&(context.indexType=AnalyticsIndexType.BROWSER_RECORD))}},AnalyticsDashboardManager.prototype.includeDashboard=function(analyticsDashboardDefinition){if(!this.dashboardTypeTagsFilter||0==this.dashboardTypeTagsFilter.length)return!0;if(analyticsDashboardDefinition&&analyticsDashboardDefinition.dashboardData&&analyticsDashboardDefinition.dashboardData.tags)for(var i=0;i<this.dashboardTypeTagsFilter.length;i++)if(-1!=analyticsDashboardDefinition.dashboardData.tags.indexOf(this.dashboardTypeTagsFilter[i]))return!0;return!1},AnalyticsDashboardManager.prototype.excludeMultiFieldsWidget=function(dashDefinition){AppConfig.instance().debugMode||(dashDefinition.dashboardData.widgets=_.reject(dashDefinition.dashboardData.widgets,function(widget){return AnalyticsWidgetHelper.isMultipleFieldOnYCase(widget)}))},AnalyticsDashboardManager.prototype.defaultDashboardNameFixUpstream=function(dashDef){dashDef&&dashDef.dashboardData&&dashDef.dashboardData.context&&dashDef.name&&dashDef.name==ResourceManager.instance().getString("ui","ms_defaultSearchAndAnalyzeDashboardName")&&(dashDef.name=ResourceManager.instance().getString("ui","ms_defaultSearchAndAnalyzeDashboardName")+dashDef.dashboardData.context.indexType)},AnalyticsDashboardManager.prototype.defaultDashboardNameFixDownstream=function(dashDef){dashDef&&dashDef.dashboardData&&dashDef.dashboardData.context&&dashDef.name&&dashDef.name==ResourceManager.instance().getString("ui","ms_defaultSearchAndAnalyzeDashboardName")+dashDef.dashboardData.context.indexType&&(dashDef.name=ResourceManager.instance().getString("ui","ms_defaultSearchAndAnalyzeDashboardName"))},AnalyticsDashboardManager.TRANSACTION_ANALYITCS_DASHBOARD_TAG="transactionAnalytics",AnalyticsDashboardManager.LOG_ANALYITCS_DASHBOARD_TAG="logAnalytics",AnalyticsDashboardManager.USER_ACTIVITY_ANALYITCS_DASHBOARD_TAG="userActivityAnalytics",AnalyticsDashboardManager.SYNTHETIC_JOB_ANALYITCS_DASHBOARD_TAG="syntheticJobAnalytics",AnalyticsDashboardManager.WEB_SESSION_ANALYITCS_DASHBOARD_TAG="webSessionAnalytics",AnalyticsDashboardManager.MOBILE_SESSION_ANALYITCS_DASHBOARD_TAG="mobileSessionAnalytics",AnalyticsDashboardManager.EUM_MOBILE_NETWORK_REQUEST_DASHBOARD_TAG="eumMobileNetworkRequestAnalytics",AnalyticsDashboardManager.EUM_WEB_ANALYZE_DASHBOARD_TAG="eumWebAnalytics",AnalyticsDashboardManager.ANALYTICS_MOBILE_NETWORK_REQUEST_DASHBOARD_TAG="mobileNetworkRequestAnalytics",AnalyticsDashboardManager.SCRATCH_PAD_DASHBOARD_NAME="New Search",AnalyticsDashboardManager}(),AnalyticsSavedSearchType=function(){function AnalyticsSavedSearchType(){}return AnalyticsSavedSearchType.BASIC="Basic",AnalyticsSavedSearchType.ADVANCED="Advanced",AnalyticsSavedSearchType}();define("app/view/analytics/dashboard/AnalyticsDashboardManager",function(){});var Interval=function(){function Interval(interval_string){this.string=interval_string;var info=AnalyticsUtil.describe_interval(interval_string);this.type=info.type,this.ms=Math.ceil(1e3*info.sec*info.count),"y"===this.type||"M"===this.type?(this.get=this.get_complex,this.date=new Date(0)):this.get=this.get_simple}return Interval.prototype.toString=function(){return this.string},Interval.prototype.after=function(current_ms){return this.get(current_ms,1)},Interval.prototype.before=function(current_ms){return this.get(current_ms,-1)},Interval.prototype.get_complex=function(current,delta){switch(this.date.setTime(current),this.type){case"M":this.date.setUTCMonth(this.date.getUTCMonth()+delta);break;case"y":this.date.setUTCFullYear(this.date.getUTCFullYear()+delta)}return this.date.getTime()},Interval.prototype.get_simple=function(current,delta){return current+delta*this.ms},Interval}();define("app/view/analytics/services/Interval",function(){});var TimeSeriesZeroFilled=function(){function TimeSeriesZeroFilled(opts){this.addValue=function(time,value){this._counters[time]=(this._counters[time]||0)+1,time=time instanceof Date?this.getDatesTime(time):this.base10Int(time),isNaN(time)||(this._data[time]=_.isUndefined(value)?0:value),this._cached_times=null},this.getOrderedTimes=function(include){var times=_.map(_.keys(this._data),this.base10Int);return _.isArray(include)&&(times=times.concat(include)),_.uniq(times.sort(function(a,b){return a-b}),!0)},this.getFlotPairs=function(required_times){var strategy,pairs,times=this.getOrderedTimes(required_times);return strategy="all"===this.opts.fill_style?this._getAllFlotPairs:"null"===this.opts.fill_style?this._getNullFlotPairs:"no"===this.opts.fill_style?this._getNoZeroFlotPairs:this._getMinFlotPairs,pairs=_.reduce(times,strategy,[],this)},this._getMinFlotPairs=function(result,time,i,times){var next,expected_next,prev,expected_prev;return i>0&&(prev=times[i-1],expected_prev=this.interval.before(time),expected_prev>prev&&result.push([expected_prev,0])),result.push([time,this._data[time]||0]),times.length>i&&(next=times[i+1],expected_next=this.interval.after(time),next>expected_next&&result.push([expected_next,0])),result},this._getAllFlotPairs=function(result,time,i,times){var next,expected_next;for(result.push([times[i],this._data[times[i]]||0]),next=times[i+1],expected_next=this.interval.after(time);times.length>i&&next>expected_next;expected_next=this.interval.after(expected_next))result.push([expected_next,0]);return result},this._getNullFlotPairs=function(result,time,i,times){var next,expected_next,prev,expected_prev;return i>0&&(prev=times[i-1],expected_prev=this.interval.before(time),expected_prev>prev&&result.push([expected_prev,null])),result.push([time,this._data[time]||null]),times.length>i&&(next=times[i+1],expected_next=this.interval.after(time),next>expected_next&&result.push([expected_next,null])),result},this._getNoZeroFlotPairs=function(result,time){return this._data[time]&&result.push([time,this._data[time]]),result},opts=_.defaults(opts,{interval:"10m",start_date:null,end_date:null,fill_style:"minimal"}),this.interval=new Interval(opts.interval),this._data={},this._counters={},this.start_time=opts.start_date&&this.getDatesTime(opts.start_date),this.end_time=opts.end_date&&this.getDatesTime(opts.end_date),this.opts=opts}return TimeSeriesZeroFilled.prototype.base10Int=function(val){return parseInt(val,10)},TimeSeriesZeroFilled.prototype.getDatesTime=function(date){return 1e3*Math.floor(date.getTime()/1e3)},TimeSeriesZeroFilled}();define("app/view/analytics/services/TimeSeriesZeroFilled",function(){}),define("app/view/analytics/metaData/fieldDefinition/FieldDefinitionRendererDirective",["require","exports"],function(){var FieldDefinitionRendererDirective=function(){function FieldDefinitionRendererDirective(){return{restrict:"E",replace:!1,scope:{adAnalyticsField:"="},templateUrl:"app/view/analytics/metaData/fieldDefinition/FieldDefinitionRendererView.html",controller:FieldDefinitionRendererController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return FieldDefinitionRendererDirective}();return appdynamicsModule.directive(StringUtils.toCamelCase("ad-field-definition-renderer"),FieldDefinitionRendererDirective),FieldDefinitionRendererDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},FieldDefinitionRendererController=function(_super){function FieldDefinitionRendererController($scope,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.iconSource="",this.iconSourceInGrid="",this.$scope.controller=this,this.init()}return __extends(FieldDefinitionRendererController,_super),FieldDefinitionRendererController.getIconSource=function(fieldDefinition){var iconSource="images/dataTypes/object.svg";if(fieldDefinition)switch(fieldDefinition.fieldType){case FieldType.DATE:return"images/dataTypes/time.svg";case FieldType.DOUBLE:case FieldType.INTEGER:case FieldType.LONG:case FieldType.FLOAT:return"images/dataTypes/number.svg";case FieldType.STRING:return"images/dataTypes/text.svg";case FieldType.OBJECT:return"images/dataTypes/object.svg";case FieldType.BOOLEAN:return"images/dataTypes/object.svg";case void 0:return"object"}return iconSource},FieldDefinitionRendererController.getIconSourceBase=function(fieldDefinition){var iconSource="object";if(fieldDefinition)switch(fieldDefinition.fieldType){case FieldType.DATE:return"time";case FieldType.DOUBLE:case FieldType.INTEGER:case FieldType.LONG:case FieldType.FLOAT:return"number";case FieldType.STRING:return"text";case FieldType.OBJECT:return"object";case FieldType.BOOLEAN:return"object";case void 0:return"object"}return iconSource},FieldDefinitionRendererController.prototype.link=function(scope,iElement){this.element=iElement},FieldDefinitionRendererController.prototype.init=function(){if(this.analyticsField=this.$scope.adAnalyticsField,this.analyticsField){this.fieldDefinition=this.analyticsField.fieldDefinition;var baseIconSource=FieldDefinitionRendererController.getIconSourceBase(this.fieldDefinition);this.iconSource="images/dataTypes/"+baseIconSource+"_gray.svg",this.iconSourceInGrid="images/dataTypes/"+baseIconSource+"_blue.svg"}},FieldDefinitionRendererController.$inject=["$scope","resourceManager","notificationService","injectorService"],FieldDefinitionRendererController}(ControllerBase);appdynamicsModule.controller("FieldDefinitionRendererController",FieldDefinitionRendererController),define("app/view/analytics/metaData/fieldDefinition/FieldDefinitionRendererController",function(){});var AnalyticsEventDetailDirective=function(){function AnalyticsEventDetailDirective(){return{restrict:"E",replace:!1,scope:{adAnalyticsTransaction:"=",adTruncateMessage:"=",adShowTooltip:"=",adRequestSegmentData:"="},templateUrl:"app/view/analytics/eventDetailViewer/AnalyticsEventDetailView.html",controller:AnalyticsEventDetailController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return AnalyticsEventDetailDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-analytics-event-detail"),AnalyticsEventDetailDirective),define("app/view/analytics/eventDetailViewer/AnalyticsEventDetailDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsEventDetailController=function(_super){function AnalyticsEventDetailController($scope){_super.call(this,$scope,InjectorService.instance().resourceManager(),NotificationService.instance(),InjectorService.instance()),this.$scope=$scope,this.SEARCH_STRING="searchString",this.FIELD_DISPLAY_NAME="fieldDisplayName",this.rawTransactionJson=null,this.eventSectionDetails=[],this.showRawJsonToggle=!1,this.analyticsViewService=AnalyticsViewService.instance(),this.timeRangeService=TimeRangeService.instance(),this.analyticsMetaDataUiService=AnalyticsMetaDataUiService.instance(),this.searchButtonText="",this.canSearchEvents={},this.$scope.controller=this}return __extends(AnalyticsEventDetailController,_super),AnalyticsEventDetailController.prototype.link=function(scope,iElement){this.element=iElement,this.init()},AnalyticsEventDetailController.prototype.init=function(){this.showRawJsonToggle=AppConfig.instance().debugMode,this.analyticsTransaction=this.$scope.adAnalyticsTransaction,this.truncateMessage=this.$scope.adTruncateMessage,this.showToolTip=this.$scope.adShowTooltip,this.requestSegmentData=this.$scope.adRequestSegmentData,!this.rawTransactionJson&&this.analyticsTransaction&&(Util.isDefAndNotNull(this.analyticsTransaction.hitJson)?this.rawTransactionJson=JSON.stringify(this.analyticsTransaction.hitJson,null,2):Util.isDefAndNotNull(this.analyticsTransaction.adqlMappedData)&&(this.rawTransactionJson=JSON.stringify(this.analyticsTransaction.adqlMappedData,null,2))),this.analyticsTransaction.isLogEvent?this.searchButtonText=this.getString("ms_analyticsSearchTransactions"):this.analyticsTransaction.isTransactionEvent&&(this.searchButtonText=this.getString("ms_analyticsSearchLogs")),this.populateSections()},AnalyticsEventDetailController.prototype.searchEvents=function(requestGuid){if(!StringUtils.isNullOrEmptyString(requestGuid)){var dataSource="",timeRange="";if(this.analyticsTransaction.isLogEvent)dataSource=AnalyticsDataSource.TRANSACTIONS;else{if(!this.analyticsTransaction.isTransactionEvent)return;dataSource=AnalyticsDataSource.LOGS}if(this.requestSegmentData){var timeRangeSpecifier=SnapshotViewService.getTimeRangeAroundSnapshot(this.requestSegmentData.serverStartTime);timeRange=this.timeRangeService.convertToPreferenceString(timeRangeSpecifier,".")}this.analyticsViewService.viewEventsForRequestGuid(requestGuid,dataSource,timeRange)}},AnalyticsEventDetailController.prototype.populateSections=function(){if(this.analyticsTransaction&&0===this.eventSectionDetails.length){this.analyticsTransactionSegments=this.analyticsTransaction.segments;var commonDetails={name:this.getString("ms_analyticsEventDialogTitle"),values:this.analyticsTransaction.values};this.eventSectionDetails.push(commonDetails);for(var i=0;i<this.analyticsTransaction.segments.length;i++){var segment=this.analyticsTransaction.segments[i],segmentDetails={name:segment.segmentJson.tier,values:segment.values};this.eventSectionDetails.push(segmentDetails)}for(var i=0;i<this.eventSectionDetails.length;i++){var section=this.eventSectionDetails[i];if(Util.isDefAndNotEmptyArray(section.values))for(var j=0;j<section.values.length;j++){var item=section.values[j];this.processIfRequestGuidField(item),item[this.SEARCH_STRING]=item.analyticsField.displayName+item.valueDisplayString,item[this.FIELD_DISPLAY_NAME]=item.analyticsField.displayName}}}},AnalyticsEventDetailController.prototype.processIfRequestGuidField=function(analyticsFieldValue){var _this=this,requestGuid="",fieldName="";if(Util.isDefAndNotNull(analyticsFieldValue)){var analyticsField=analyticsFieldValue.analyticsField;Util.isDefAndNotNull(analyticsField)&&Util.isDefAndNotNull(analyticsField.fieldDefinition)&&(fieldName=analyticsField.fieldDefinition.fieldName,fieldName===AnalyticsField.requestGUID&&(requestGuid=analyticsFieldValue.value))}if(StringUtils.isNullOrEmptyString(requestGuid))return void(this.canSearchEvents[fieldName]=!1);if(this.analyticsTransaction.isLogEvent)return void(this.canSearchEvents[fieldName]=!0);if(!this.analyticsTransaction.isTransactionEvent)return void(this.canSearchEvents[fieldName]=!1);var timeRangeSpecifier=this.timeRangeService.currentTimeRange;this.requestSegmentData&&(timeRangeSpecifier=SnapshotViewService.getTimeRangeAroundSnapshot(this.requestSegmentData.serverStartTime)),this.analyticsMetaDataUiService.anyEventsExistForRequestGUID(AnalyticsIndexType.LOG,requestGuid,timeRangeSpecifier.startTime.getTime().toString(),timeRangeSpecifier.endTime.getTime().toString()).then(function(anyEventsExistForRequestGUID){_this.canSearchEvents[fieldName]=anyEventsExistForRequestGUID})},AnalyticsEventDetailController.$inject=["$scope"],AnalyticsEventDetailController}(ControllerBase);appdynamicsModule.controller("AnalyticsEventDetailController",AnalyticsEventDetailController),define("app/view/analytics/eventDetailViewer/AnalyticsEventDetailController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsHistogramDirectiveController=function(_super){function AnalyticsHistogramDirectiveController($scope,resourceManager,notificationService,injectorService,timeRangeService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.timeRangeService=timeRangeService,this.yAxisCategories=[],this.histogramTimeSeriesDataSort=function(series1,series2){return series2.sum>series1.sum?1:series2.sum<series1.sum?-1:0},this.setupEventListeners()}return __extends(AnalyticsHistogramDirectiveController,_super),AnalyticsHistogramDirectiveController.prototype.link=function(element){this.element=element},AnalyticsHistogramDirectiveController.prototype.setupEventListeners=function(){var _this=this;this.$scope.$on(AnalyticsUtils.UEV_ANALYTICS_REFRESH,function(){_this.$scope.adGetData()}),this.$scope.$on(AnalyticsEvents.RENDER,function(event,searchResults){searchResults&&(_this.searchResults=searchResults),_this.searchResults&&(_this.histogramTimeSeriesData=_this.buildData()),_this.renderPanel()}),angular.element(window).bind("resize",function(){_this.histogramTimeSeriesData&&_this.resize()})},AnalyticsHistogramDirectiveController.prototype.getChartWidth=function(){return this.element.closest(".ads-analytics-widget-container").outerWidth()-5},AnalyticsHistogramDirectiveController.prototype.getChartHeight=function(){var height=this.element.closest(".ads-analytics-widget-container").outerHeight();return height-this.getHeightOffset()},AnalyticsHistogramDirectiveController.prototype.resize=function(){var chart=this.element.highcharts(),width=this.getChartWidth(),height=this.getChartHeight();chart.setSize(width,height),chart.redraw()},AnalyticsHistogramDirectiveController.prototype.renderPanel=function(){if(!_.isEmpty(this.histogramTimeSeriesData)){var required_times=[];this.histogramTimeSeriesData.length>1&&(required_times=Array.prototype.concat.apply([],_.map(this.histogramTimeSeriesData,function(query){return query.time_series.getOrderedTimes(angular.noop())})),required_times=_.uniq(required_times.sort(function(a,b){return a-b}),!0));for(var i=0;i<this.histogramTimeSeriesData.length;i++){var _d=this.histogramTimeSeriesData[i].time_series.getFlotPairs(required_times);this.histogramTimeSeriesData[i].data=_d}this.isBreakupEnabled()&&this.pluckTopNBreakdownCategories(),this.renderStackedChart(),this.$scope.$broadcast(AnalyticsHistogramDirectiveController.ANALYTICS_HISTOGRAM_LAYOUT_CHANGE)}},AnalyticsHistogramDirectiveController.prototype.isBreakupEnabled=function(){return"true"==this.$scope.adPanel.breakup},AnalyticsHistogramDirectiveController.prototype.getYAxisCategories=function(){var yAxisCategories=[],buckets=Util.get(this.searchResults.results,["aggregations","dateHistAgg","buckets"]);return _.isEmpty(buckets)||_.each(buckets,function(individualBucket){var nestedBuckets=Util.get(individualBucket,["nestedAgg","breakdownTermsAgg","buckets"])||Util.get(individualBucket,["breakdownTermsAgg","buckets"]);_.isEmpty(nestedBuckets)||(yAxisCategories=yAxisCategories.concat(_.pluck(nestedBuckets,"key")))}),_.uniq(yAxisCategories)},AnalyticsHistogramDirectiveController.prototype.getHeightOffset=function(){return Util.isDefAndNotNull(this.$scope.adPanel.hideTitleBar)&&this.$scope.adPanel.hideTitleBar?5:45},AnalyticsHistogramDirectiveController.prototype.renderStackedChart=function(){var dateTimeFormat,_this=this;dateTimeFormat=this.timeRangeService.getCurrentTimeRangeDuration()<AnalyticsHistogramDirectiveController.TIME_DURATION_TO_SHOW_SECONDS?ChartUtil.getDateTimeFormatWithSeconds(TimeRangeService.MMDDYY,TimeRangeService.TIME_FORMAT_12_HOUR):ChartUtil.getDateTimeFormat(TimeRangeService.MMDDYY,TimeRangeService.TIME_FORMAT_12_HOUR);var analyticsHistogramDirectiveController=this;this.chartConfig={colors:AdColorPalette.DEFAULT_PALETTE_20,credits:{enabled:!1},chart:{type:_.isUndefined(this.$scope.adPanel.chart)?"column":this.$scope.adPanel.chart,width:this.getChartWidth(),height:this.getChartHeight(),zoomType:"x",events:{selection:function(event){var fromDate=new Date(event.xAxis[0].min),toDate=new Date(event.xAxis[0].max);_this.timeRangeService.setCustomTimeRange(fromDate,toDate)}}},tooltip:{borderRadius:4,borderWidth:3,hideDelay:100,followPointer:!0,formatter:function(){var timestamp;return timestamp=Highcharts.dateFormat("%a %d %b %I:%M:%S %p",this.x),'<span style="color:'+this.point.series.color+'">'+this.series.name+"</span><br/>"+ViewUtil.formatNumber(this.y,1)+" @ "+timestamp}},title:{text:""},xAxis:{title:{},type:"datetime",dateTimeLabelFormats:dateTimeFormat,min:this.getMinXTime(),max:this.getMaxXTime()},yAxis:{title:{text:this.getYAxisDisplayLabel()}},legend:{enabled:!this.$scope.adPanel.hideLegend,backgroundColor:"#FFFFFF",reversed:!0},plotOptions:{series:{animation:!1,stacking:"normal",cursor:"pointer",events:{click:function(){if(analyticsHistogramDirectiveController.isStacked()){if(analyticsHistogramDirectiveController.$scope.adPanel.isExpanded){var errorMessage=ResourceManager.instance().getString("ui","ms_filterErrMessageInFullScreen");return void NotificationService.instance().displayError(errorMessage,"")}var addFilterParam={};addFilterParam.name=this.name,addFilterParam.field=analyticsHistogramDirectiveController.getYAxisAnalyticsField(),analyticsHistogramDirectiveController.$scope.adOnClick({param:addFilterParam})}}}},column:{minPointLength:3}},series:this.histogramTimeSeriesData.map(function(series){return{name:series.info||"All Events",data:series.data}})},this.element.highcharts(this.chartConfig)},AnalyticsHistogramDirectiveController.prototype.isStacked=function(){return"true"===this.$scope.adPanel.breakup},AnalyticsHistogramDirectiveController.prototype.getYAxisAnalyticsField=function(){return this.$scope.adPanel.yAxisFields&&this.$scope.adPanel.yAxisFields[0]?this.$scope.adPanel.yAxisFields[0]:null},AnalyticsHistogramDirectiveController.prototype.buildData=function(){var _this=this,timeRangeConvertedToBetweenTimes=DateTimeUtil.convertToBetweenTimes(this.$scope.adPanel.dashboardContext.timeRange);this.yAxisAnalyticsField=this.getYAxisAnalyticsField();var data=[];if(this.isBreakupEnabled())this.yAxisCategories=this.getYAxisCategories(),this.yAxisCategories.length>0?_.each(this.yAxisCategories,function(yAxisCategory,index){_this.buildHistogramTimeSeries(index,data,timeRangeConvertedToBetweenTimes,_this.searchResults.interval,yAxisCategory)}):this.buildHistogramTimeSeries(0,data,timeRangeConvertedToBetweenTimes,this.searchResults.interval);else{var i=0;this.buildHistogramTimeSeries(i,data,timeRangeConvertedToBetweenTimes,this.searchResults.interval)}return data},AnalyticsHistogramDirectiveController.prototype.getYAxisDisplayLabel=function(){var operation=AnalyticsUtils.getDisplayLabelForOperation(this.$scope.adPanel.operation);if(this.$scope.adPanel.yAxisFields&&this.$scope.adPanel.yAxisFields[0]){var displayString;return operation&&(displayString=operation+" - "),displayString+=this.$scope.adPanel.yAxisFields[0].displayName}return""},AnalyticsHistogramDirectiveController.prototype.getMinXTime=function(){var minTimeInDataArray,startTime=this.histogramTimeSeriesData[0].time_series.start_time;return this.histogramTimeSeriesData[0]&&this.histogramTimeSeriesData[0].data&&this.histogramTimeSeriesData[0].data[0]&&this.histogramTimeSeriesData[0].data[0][0]&&(minTimeInDataArray=this.histogramTimeSeriesData[0].data[0][0]),minTimeInDataArray&&startTime>minTimeInDataArray?minTimeInDataArray:startTime},AnalyticsHistogramDirectiveController.prototype.getMaxXTime=function(){var endTime=this.histogramTimeSeriesData[0].time_series.end_time,maxTimeInDataArray=null;return this.histogramTimeSeriesData[0]&&this.histogramTimeSeriesData[0].data&&this.histogramTimeSeriesData[0].data.length>0&&(maxTimeInDataArray=this.histogramTimeSeriesData[0].data[this.histogramTimeSeriesData[0].data.length-1][0]),maxTimeInDataArray&&maxTimeInDataArray>endTime?maxTimeInDataArray:endTime},AnalyticsHistogramDirectiveController.prototype.buildHistogramTimeSeries=function(index,data,timeRangeConvertedToBetweenTimes,interval,yAxisCategory){var time_series,hits,counters,_this=this,query_results=this.searchResults.getDataForHistogram();if(_.isUndefined(data[index])){var tsOpts={interval:interval,start_date:timeRangeConvertedToBetweenTimes&&timeRangeConvertedToBetweenTimes.startTime,end_date:timeRangeConvertedToBetweenTimes&&timeRangeConvertedToBetweenTimes.endTime,fill_style:this.$scope.adPanel.derivative?"null":"no"};time_series=new TimeSeriesZeroFilled(tsOpts),hits=0,counters={}}else time_series=data[index].time_series,hits=data[index].hits,counters=data[index].counters;var btId=-1;_.each(query_results.buckets,function(entry){var value;hits+=entry.doc_count,counters[entry.key]=(counters[entry.key]||0)+entry.doc_count,value=_this.searchResults.getHistogramValueFromBucket(entry,_this.$scope.adPanel.operation,yAxisCategory),time_series.addValue(entry.key,value),_this.yAxisCategories&&_this.yAxisCategories.length>0&&_this.yAxisAnalyticsField.fullPath===AnalyticsField.transactionName&&-1===btId&&(btId=_this.searchResults.getBTIdFromBucket(entry,yAxisCategory))}),data[index]={info:yAxisCategory?yAxisCategory:"All Events",time_series:time_series,hits:hits,counters:counters}},AnalyticsHistogramDirectiveController.prototype.pluckTopNBreakdownCategories=function(){_.forEach(this.histogramTimeSeriesData,function(series){var sum=0;_.forEach(series.data,function(data){sum+=data[1]}),series.sum=sum}),this.histogramTimeSeriesData.sort(this.histogramTimeSeriesDataSort),this.histogramTimeSeriesData.splice(AnalyticsHistogramDirectiveController.TOP_RESULT_COUNT)},AnalyticsHistogramDirectiveController.ANALYTICS_HISTOGRAM_LAYOUT_CHANGE="analyticsHistogramLayoutChange",AnalyticsHistogramDirectiveController.TIME_DURATION_TO_SHOW_SECONDS=15,AnalyticsHistogramDirectiveController.TOP_RESULT_COUNT=10,AnalyticsHistogramDirectiveController.$inject=["$scope","resourceManager","notificationService","injectorService","timeRangeService"],AnalyticsHistogramDirectiveController}(ControllerBase);define("app/view/analytics/widgets/histogram/AnalyticsHistogramDirectiveController",function(){});var AnalyticsHistogramDirective=function(){function AnalyticsHistogramDirective(){return{restrict:"A",template:"<div></div>",scope:{adPanel:"=",adGetData:"&",adOnClick:"&"},controller:AnalyticsHistogramDirectiveController,link:function(scope,elem,attrs,controller){controller.link(elem)}}}return AnalyticsHistogramDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-analytics-histogram"),AnalyticsHistogramDirective),define("app/view/analytics/widgets/histogram/AnalyticsHistogramDirective",function(){});var AnalyticsTermsDirective=function(){function AnalyticsTermsDirective(){return{restrict:"A",scope:{adPanel:"=",adResults:"=",adOnClick:"&",adShowBarLabels:"="},link:function(scope,elem){function processResults(){var data=[],operationType=scope.adPanel.operation,buckets=scope.searchResults.getBuckets(operationType);return _.each(buckets,function(bucket,index){var slice,value=scope.searchResults.getTermsValueFromBucket(bucket,operationType),numberVal=parseFloat(value);isNaN(numberVal)||parseInt(value)===numberVal||(numberVal=parseFloat(numberVal.toFixed(2)));var labelVal=_.isEmpty(scope.adPanel.xAxisFields)?scope.adPanel.yAxisFields[0].displayName:scope.adPanel.xAxisFields[0].displayName;labelVal=bucket.key?bucket.key:labelVal,slice={label:labelVal,data:[[index,isNaN(numberVal)?value:numberVal]]},data.push(slice)}),data}function processResultsForMultipleFields(){var data=[];return scope.searchResults.getResultBuckets(scope.adPanel,data),data}function render_panel(){var chartData;if(chartData=_.clone(AppConfig.instance().debugMode&&AnalyticsWidgetHelper.isMultipleFieldOnYCase(scope.adPanel)?processResultsForMultipleFields():processResults()),elem.css({height:"250px"}),chartData=scope.adPanel.missing?chartData:_.without(chartData,_.findWhere(chartData,{meta:"missing"})),chartData=scope.adPanel.other?chartData:_.without(chartData,_.findWhere(chartData,{meta:"other"})),"bar"===scope.adPanel.chart)renderBarChart(elem,chartData);else if("pie"===scope.adPanel.chart)renderPieChart(elem,chartData);else if("table"===scope.adPanel.chart)AnalyticsD3WidgetHelper.createTable(elem,chartData,scope.adPanel,getDrillDownData());else if("treemap"===scope.adPanel.chart)AnalyticsD3WidgetHelper.createTreemap(elem,chartData);else if("circlepack"===scope.adPanel.chart)AnalyticsD3WidgetHelper.createCirclePack(elem,chartData);else if("metric_label"===scope.adPanel.chart){var containsValidResult,displayData=scope.searchResults.getNumericValueForLabel(scope.adPanel.operation,scope.adPanel);if(Util.isDefAndNotNull(displayData))containsValidResult=!0,AnalyticsD3WidgetHelper.createLabel(elem,displayData,containsValidResult);else{var errorMsg=ResourceManager.instance().getString("ui","ms_numericFilterErrorMsg");containsValidResult=!1,AnalyticsD3WidgetHelper.createLabel(elem,errorMsg,containsValidResult)}}}function renderPieChart(elem,data){var highChartsConfig={colors:AdColorPalette.DEFAULT_PALETTE_20,legend:{labelFormatter:function(){return Math.round(this.percentage)+"% "+this.name},layout:"vertical",align:"right"},chart:{type:"pie",width:elem.closest(".ads-analytics-widget-container").width()-30,height:elem.closest(".ads-analytics-widget-container").height()-42},title:{text:null},credits:{enabled:!1},series:[{type:"pie",size:"80%",innerSize:"60%",data:data.map(function(d){return[d.label,d.data[0][1]]})}],tooltip:{formatter:function(){return Math.round(this.percentage)+"% "+this.point.name}},plotOptions:{pie:{cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0},series:{point:{events:{click:function(){var analyticsField=getAnalyticsField(),filterText=this.name;analyticsField&&analyticsField.displayName!==this.name&&addNewFilter(filterText,analyticsField)}}}}}};isStacked()&&_.extend(highChartsConfig,getHighchartsBreakupConfigForPie()),elem.highcharts(highChartsConfig)}function getBreakupData(xAxisCategories,yAxisCategory,buckets){return xAxisCategories.map(function(categoryX){var yItems=_.findWhere(buckets,{key:categoryX}),yItem=_.findWhere(Util.get(yItems,["unnesting","breakdownTermsAgg","buckets"])||Util.get(yItems,["breakdownTermsAgg","buckets"]),{key:yAxisCategory});return yItem||(yItem=_.findWhere(Util.get(yItems,["nestedAgg","breakdownTermsAgg","buckets"])||Util.get(yItems,["breakdownTermsAgg","buckets"]),{key:yAxisCategory})),_.isObject(yItem)?yItem.doc_count:0})}function getBreakupDataForEmptyXAxis(xAxisCategories,yAxisCategory,buckets){return xAxisCategories.map(function(){var yItem=_.findWhere(buckets,{key:yAxisCategory});return _.isObject(yItem)?yItem.doc_count:0})}function isXAxisEmptyCase(){return _.isEmpty(scope.adPanel.xAxisFields)}function getHighchartsBreakupConfigForPie(){var innerPie=[],outerDonut=[],buckets=Util.get(scope.searchResults.results.aggregations,["nestedAgg","termsAgg","buckets"])||Util.get(scope.searchResults.results.aggregations,["termsAgg","buckets"]);if(buckets||(buckets=Util.get(scope.searchResults.results.aggregations,["nestedAgg","rangeAgg","buckets"])||Util.get(scope.searchResults.results.aggregations,["rangeAgg","buckets"])),buckets)_.forEach(buckets,function(bucket,index){innerPie.push({name:bucket.key,y:bucket.doc_count,color:Highcharts.getOptions().colors[index]});var breakdownTermsAgg=Util.get(bucket,["unnesting","breakdownTermsAgg"])||Util.get(bucket,["breakdownTermsAgg"]);breakdownTermsAgg||(breakdownTermsAgg=Util.get(bucket,["nestedAgg","breakdownTermsAgg"])||Util.get(bucket,["breakdownTermsAgg"])),breakdownTermsAgg||(breakdownTermsAgg=Util.get(bucket,["filterAgg","breakdownTermsAgg"])),breakdownTermsAgg.buckets&&(addCategoriesForPie(breakdownTermsAgg,outerDonut,index),addOtherCategoryForPie(breakdownTermsAgg,outerDonut,index))
});else if(!buckets&&isXAxisEmptyCase()){buckets=scope.searchResults.results.aggregations;var filterAggObj=Util.get(buckets,["nestedAgg","filterAgg"])||Util.get(buckets,["filterAgg"]);if(filterAggObj){innerPie.push({name:scope.adPanel.yAxisFields[0]?scope.adPanel.yAxisFields[0].displayName:"All Events",y:filterAggObj?filterAggObj.doc_count:void 0,color:Highcharts.getOptions().colors[0]});var breakdownTermsAgg=Util.get(buckets,["nestedAgg","filterAgg","breakdownTermsAgg"])||Util.get(buckets,["filterAgg","breakdownTermsAgg"]);breakdownTermsAgg.buckets&&(addCategoriesForPie(breakdownTermsAgg,outerDonut,0),addOtherCategoryForPie(breakdownTermsAgg,outerDonut,0))}}var series=[{size:"60%",data:innerPie,point:{events:{click:function(){onClickPieChartDrilldown(this.name,!1)}}}},{size:"80%",innerSize:"60%",data:outerDonut,point:{events:{click:function(){onClickPieChartDrilldown(this.name,!0)}}}}];return{series:series}}function addCategoriesForPie(breakdownTermsAgg,outerDonut,index){var breakdownBuckets=breakdownTermsAgg.buckets,totalBreakDownBuckets=breakdownBuckets.length;_.forEach(breakdownBuckets,function(breakup,innerIndex){var name=breakup.key,value=breakup.doc_count;pushToOuterDonut(outerDonut,name,value,innerIndex,index,totalBreakDownBuckets)})}function pushToOuterDonut(outerDonut,name,value,innerIndex,index,totalBreakDownBuckets){var brightness=.2-innerIndex/totalBreakDownBuckets/5,highchartsColorOrGradient=Highcharts.Color(Highcharts.getOptions().colors[index]);outerDonut.push({name:name,y:value,color:highchartsColorOrGradient.brighten(brightness).get()})}function addOtherCategoryForPie(breakdownTermsAgg,outerDonut,index){var breakdownBuckets=breakdownTermsAgg.buckets,totalBreakDownBuckets=breakdownBuckets.length;if(breakdownTermsAgg&&breakdownTermsAgg.sum_other_doc_count>0){var name=AnalyticsUtils.OTHER_TYPE,value=breakdownTermsAgg.sum_other_doc_count;pushToOuterDonut(outerDonut,name,value,totalBreakDownBuckets-1,index,totalBreakDownBuckets)}}function getHighchartsBreakupConfig(){var xAxisCategories,yAxisCategories,temp={},series=[],buckets=Util.get(scope.searchResults.results.aggregations,["nestedAgg","termsAgg","buckets"])||Util.get(scope.searchResults.results.aggregations,["termsAgg","buckets"]);if(buckets||(buckets=Util.get(scope.searchResults.results.aggregations,["nestedAgg","rangeAgg","buckets"])||Util.get(scope.searchResults.results.aggregations,["rangeAgg","buckets"])),buckets)xAxisCategories=_.pluck(buckets,"key"),_.forEach(buckets,function(bucket){var breakdownBuckets=Util.get(bucket,["unnesting","breakdownTermsAgg","buckets"])||Util.get(bucket,["breakdownTermsAgg","buckets"]);breakdownBuckets||(breakdownBuckets=Util.get(bucket,["nestedAgg","breakdownTermsAgg","buckets"])||Util.get(bucket,["breakdownTermsAgg","buckets"])),breakdownBuckets||(breakdownBuckets=Util.get(bucket,["filterAgg","breakdownTermsAgg","buckets"])),_.forEach(breakdownBuckets,function(breakup){temp[breakup.key]=!0})}),yAxisCategories=_.keys(temp),yAxisCategories.forEach(function(yAxisCategory){series.push({name:yAxisCategory,data:getBreakupData(xAxisCategories,yAxisCategory,buckets)})}),addOtherCategoriesForXandYCase(xAxisCategories,buckets,series);else if(!buckets&&isXAxisEmptyCase()){xAxisCategories=["All Events"],buckets=scope.searchResults.results.aggregations;var breakdownBuckets=Util.get(buckets,["nestedAgg","filterAgg","breakdownTermsAgg","buckets"])||Util.get(buckets,["filterAgg","breakdownTermsAgg","buckets"]);_.forEach(breakdownBuckets,function(breakup){temp[breakup.key]=!0}),yAxisCategories=_.keys(temp),yAxisCategories.forEach(function(yAxisCategory){series.push({name:yAxisCategory,data:getBreakupDataForEmptyXAxis(xAxisCategories,yAxisCategory,breakdownBuckets)})}),addOtherCategoriesForYCase(xAxisCategories,buckets,series)}return{xAxis:{categories:xAxisCategories},yAxis:{min:0,title:{text:getYAxisDisplayLabel()},stackLabels:{enabled:scope.adShowBarLabels?!0:!1,formatter:function(){return ViewUtil.formatLargeNumberConservatively(this.total,1,1e3,!0)}}},series:series}}function addOtherCategoriesForXandYCase(xAxisCategories,buckets,series){if(!Util.isUndefOrNull(xAxisCategories)){for(var xAxisCategoriesLength=xAxisCategories.length,otherFlag=!1,otherDataArray=new Array(xAxisCategoriesLength),i=0;xAxisCategoriesLength>i;i++){var categoryX=xAxisCategories[i],yItems=_.findWhere(buckets,{key:categoryX}),yItem=Util.get(yItems,["unnesting","breakdownTermsAgg"]);yItem&&yItem.sum_other_doc_count>0&&(otherDataArray[i]=yItem.sum_other_doc_count,otherFlag=!0)}otherFlag&&series.push({name:AnalyticsUtils.OTHER_TYPE,data:otherDataArray})}}function addOtherCategoriesForYCase(xAxisCategories,buckets,series){if(!Util.isUndefOrNull(xAxisCategories)){var breakdownTermsAgg=Util.get(buckets,["nestedAgg","filterAgg","breakdownTermsAgg"])||Util.get(buckets,["filterAgg","breakdownTermsAgg"]),otherDataCountArray=[0];breakdownTermsAgg&&breakdownTermsAgg.sum_other_doc_count>0&&(otherDataCountArray[0]=breakdownTermsAgg.sum_other_doc_count,series.push({name:AnalyticsUtils.OTHER_TYPE,data:otherDataCountArray}))}}function onClickPieChartDrilldown(filterText,isOuterPie){var analyticsField=getAnalyticsFieldForPieChartDrilldown(isOuterPie);analyticsField&&analyticsField.displayName!==filterText&&addNewFilter(filterText,analyticsField)}function getDrillDownData(){return isStacked()?getHighchartsBreakupConfig():null}function isStacked(){return"true"==scope.adPanel.breakup}function getYAxisDisplayLabel(){var operation=AnalyticsUtils.getDisplayLabelForOperation(scope.adPanel.operation);if(scope.adPanel.yAxisFields&&scope.adPanel.yAxisFields[0]){var displayString;return operation&&(displayString=operation+" - "),displayString+=scope.adPanel.yAxisFields[0].displayName}return""}function getAnalyticsField(){return isStacked()?scope.adPanel.yAxisFields[0]?scope.adPanel.yAxisFields[0]:null:scope.adPanel.xAxisFields[0]?scope.adPanel.xAxisFields[0]:null}function getAnalyticsFieldForPieChartDrilldown(isOuterPie){return isStacked()&&1==isOuterPie?scope.adPanel.yAxisFields[0]?scope.adPanel.yAxisFields[0]:null:scope.adPanel.xAxisFields[0]?scope.adPanel.xAxisFields[0]:null}function addNewFilter(filterText,analyticsFields){if(scope.adPanel.isExpanded){var errorMessage=ResourceManager.instance().getString("ui","ms_filterErrMessageInFullScreen");return void NotificationService.instance().displayError(errorMessage,"")}if(filterText===AnalyticsUtils.OTHER_TYPE){var otherAddToFilterMessage=ResourceManager.instance().getString("ui","ms_otherAddToFilterMessage");NotificationService.instance().displayMessage(otherAddToFilterMessage,"")}var addFilterParam={};addFilterParam.name=filterText,addFilterParam.field=analyticsFields,scope.adOnClick({param:addFilterParam})}function renderBarChart(elem,data){var highchartsConfig={legend:{enabled:isStacked()?!1:!0,useHTML:!0,labelFormatter:function(){var displayLabel=StringUtils.truncateString(this.name,30);return"<span title='"+this.name+"'>"+displayLabel+"</span>"}},chart:{type:"column",width:elem.closest(".ads-analytics-widget-container").width()-30,height:elem.closest(".ads-analytics-widget-container").height()-42},colors:AdColorPalette.DEFAULT_PALETTE_20,title:{text:null},credits:{enabled:!1},yAxis:{title:{text:getYAxisDisplayLabel()},stackLabels:{enabled:scope.adShowBarLabels?!0:!1}},series:data.map(function(d){return{name:d.label,data:[d.data[0][1]]}}),tooltip:{formatter:function(){return'<span style="color:'+this.point.series.color+'">'+this.series.name+"</span>: "+ViewUtil.formatNumber(this.y,1)}},plotOptions:{series:{cursor:"pointer",dataLabels:{enabled:isStacked()?!1:scope.adShowBarLabels?!0:!1,inside:!1,formatter:function(){return ViewUtil.formatLargeNumberConservatively(this.y,1,1e3,!0)}},point:{events:{click:function(){var filterText=this.series.name,analyticsField=getAnalyticsField();addNewFilter(filterText,analyticsField)}}}}}};isStacked()&&(_.extend(highchartsConfig,getHighchartsBreakupConfig()),highchartsConfig.plotOptions.column={stacking:"normal"}),elem.highcharts(highchartsConfig)}scope.$on(AnalyticsEvents.RENDER,function(event,searchResults){searchResults?(scope.searchResults=searchResults,render_panel()):scope.searchResults&&render_panel()}),angular.element(window).bind("resize",function(){render_panel()})}}}return AnalyticsTermsDirective}();adComponentsModule.directive(StringUtils.toCamelCase("ad-analytics-terms"),AnalyticsTermsDirective),define("app/view/analytics/widgets/terms/AnalyticsTermsDirective",function(){});var RangeAggregationBucketDefinition=function(){function RangeAggregationBucketDefinition(from,to,key){this.from=from,this.to=to,this.key=key}return RangeAggregationBucketDefinition}();define("app/view/analytics/widgets/RangeAggregationBucketDefinition",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/analytics/widgets/common/container/AnalyticsWidgetContainerLegacy",["require","exports"],function(){var AnalyticsWidgetContainerLegacyDirective=function(){function AnalyticsWidgetContainerLegacyDirective(){return{restrict:"E",templateUrl:"app/view/analytics/widgets/common/container/AnalyticsWidgetContainerLegacy.html",scope:{adWidgetProperties:"=",adDashboardContext:"="},controller:AnalyticsWidgetContainerLegacyController,link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return AnalyticsWidgetContainerLegacyDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-analytics-widget-container-legacy"),AnalyticsWidgetContainerLegacyDirective);var AnalyticsWidgetContainerLegacyController=function(_super){function AnalyticsWidgetContainerLegacyController($scope,resourceManager,notificationService,injectorService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.showTitleBar=!0,this.widgetContentDivClass="ads-analytics-widget-content-below-title",this.isReady=!1,$scope.controller=this,this.$scope.$watch("adWidgetProperties",function(newValue,oldValue){newValue!=oldValue&&_this.init()}),this.$scope.$on("gridster-item-transition-end",function(){_this.$scope.$broadcast(AnalyticsEvents.RENDER)}),SharedInjectorService.instance().$timeout()(function(){_this.$scope.$broadcast(AnalyticsEvents.RENDER)},100)}return __extends(AnalyticsWidgetContainerLegacyController,_super),AnalyticsWidgetContainerLegacyController.prototype.link=function(scope,iElement){this.element=iElement,this.$scope.adWidgetProperties&&this.init()},AnalyticsWidgetContainerLegacyController.prototype.init=function(){this.showTitleBar=this.$scope.adWidgetProperties.hideTitleBar?!1:!this.isPredefinedWidget(),this.widgetContentDivClass=this.showTitleBar?"ads-analytics-widget-content-below-title":"ads-analytics-widget-content-no-title",this.isReady=!0},AnalyticsWidgetContainerLegacyController.prototype.isPredefinedWidget=function(){return this.$scope.adWidgetProperties.isPredefined},AnalyticsWidgetContainerLegacyController.prototype.getPredefinedDirectiveTemplate=function(adWidgetProperties){return"<"+adWidgetProperties.directive+' ad-widget-properties="adWidgetProperties" ad-dashboard-context="adDashboardContext"></'+adWidgetProperties.directive+">"},AnalyticsWidgetContainerLegacyController}(ControllerBase);return AnalyticsWidgetContainerLegacyDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/analytics/widgets/predefined/common/dropdown/AnalyticsWidgetDropdown",["require","exports"],function(){var AnalyticsWidgetDropdownDirective=function(){function AnalyticsWidgetDropdownDirective(){return{restrict:"E",templateUrl:"app/view/analytics/widgets/predefined/common/dropdown/AnalyticsWidgetDropdown.html",scope:{adTitle:"=",adItems:"="},controller:AnalyticsWidgetDropdownController}}return AnalyticsWidgetDropdownDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-analytics-widget-dropdown"),AnalyticsWidgetDropdownDirective);var AnalyticsWidgetDropdownController=function(_super){function AnalyticsWidgetDropdownController($scope,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,$scope.controller=this}return __extends(AnalyticsWidgetDropdownController,_super),AnalyticsWidgetDropdownController}(ControllerBase);return AnalyticsWidgetDropdownDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/analytics/widgets/predefined/common/toolbar/AnalyticsWidgetToolbarLegacy",["require","exports"],function(){var AnalyticsWidgetToolbarLegacyDirective=function(){function AnalyticsWidgetToolbarLegacyDirective(){return{restrict:"C",templateUrl:"app/view/analytics/widgets/predefined/common/toolbar/AnalyticsWidgetToolbarLegacy.html",scope:{adTitle:"=",adActions:"=",adTitleReadOnly:"="},controller:AnalyticsWidgetToolbarLegacyController}}return AnalyticsWidgetToolbarLegacyDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-analytics-widget-toolbar-legacy"),AnalyticsWidgetToolbarLegacyDirective);var AnalyticsWidgetToolbarLegacyController=function(_super){function AnalyticsWidgetToolbarLegacyController($scope,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.editTitle=!1,$scope.controller=this}return __extends(AnalyticsWidgetToolbarLegacyController,_super),AnalyticsWidgetToolbarLegacyController.prototype.onEdit=function(){this.$scope.adTitleReadOnly||(this.editTitle=!0)},AnalyticsWidgetToolbarLegacyController.prototype.onEditComplete=function(){this.editTitle=!1,this.$scope.$emit(AnalyticsEvents.EDIT_WIDGET_TITLE)},AnalyticsWidgetToolbarLegacyController.prototype.isEditTitle=function(){return this.editTitle},AnalyticsWidgetToolbarLegacyController.prototype.isTitleReadOnly=function(){return this.$scope.adTitleReadOnly},AnalyticsWidgetToolbarLegacyController}(ControllerBase);return AnalyticsWidgetToolbarLegacyDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/analytics/widgets/predefined/common/overview/AnalyticsWidgetOverview",["require","exports"],function(){var AnalyticsWidgetOverviewDirective=function(){function AnalyticsWidgetOverviewDirective(){return{restrict:"E",templateUrl:"app/view/analytics/widgets/predefined/common/overview/AnalyticsWidgetOverview.html",scope:{adOverviews:"="},controller:AnalyticsWidgetOverviewController}}return AnalyticsWidgetOverviewDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-analytics-widget-overview"),AnalyticsWidgetOverviewDirective);var AnalyticsWidgetOverviewController=function(_super){function AnalyticsWidgetOverviewController($scope,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,$scope.controller=this}return __extends(AnalyticsWidgetOverviewController,_super),AnalyticsWidgetOverviewController}(ControllerBase);return AnalyticsWidgetOverviewDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/analytics/widgets/predefined/common/buttons/AnalyticsWidgetButtonBar",["require","exports"],function(){var AnalyticsWidgetButtonBarDirective=function(){function AnalyticsWidgetButtonBarDirective(){return{restrict:"E",templateUrl:"app/view/analytics/widgets/predefined/common/buttons/AnalyticsWidgetButtonBar.html",scope:{adButtons:"="},controller:AnalyticsWidgetButtonBarController}}return AnalyticsWidgetButtonBarDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-analytics-widget-button-bar"),AnalyticsWidgetButtonBarDirective);var AnalyticsWidgetButtonBarController=function(_super){function AnalyticsWidgetButtonBarController($scope,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,$scope.controller=this}return __extends(AnalyticsWidgetButtonBarController,_super),AnalyticsWidgetButtonBarController}(ControllerBase);return AnalyticsWidgetButtonBarDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/analytics/widgets/selector/AnalyticsWidgetSelector",["require","exports"],function(){var AnalyticsWidgetSelectorDirective=function(){function AnalyticsWidgetSelectorDirective(){return{restrict:"E",templateUrl:"app/view/analytics/widgets/selector/AnalyticsWidgetSelector.html",scope:{adTitle:"=",adItems:"="},controller:AnalyticsWidgetSelectorController}}return AnalyticsWidgetSelectorDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-analytics-widget-selector"),AnalyticsWidgetSelectorDirective);var AnalyticsWidgetSelectorController=function(_super){function AnalyticsWidgetSelectorController($scope,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,$scope.controller=this}return __extends(AnalyticsWidgetSelectorController,_super),AnalyticsWidgetSelectorController}(ControllerBase);return AnalyticsWidgetSelectorDirective});var AnalyticsQueryInputDirective=function(){function AnalyticsQueryInputDirective(analyticsQueryService,analyticsDashboardService){return{restrict:"E",replace:!0,templateUrl:"app/view/analytics/searchPanel/AnalyticsQueryInputView.html",link:function(scope){scope.processQuery=function(){var item,getIndexOfExistingQueryTerm=function(){var indexStrOfTheOnlyExistingQueryTerm=_.keys(analyticsQueryService.list())[0];return parseInt(indexStrOfTheOnlyExistingQueryTerm,10)};analyticsQueryService.isOnlyQueryTerm()&&analyticsQueryService.isDefaultQueryKeyword(getIndexOfExistingQueryTerm())?(item=_.chain(analyticsQueryService.list()).values().findWhere({id:getIndexOfExistingQueryTerm()}).value(),item.query=scope.queryKeyword):analyticsQueryService.set({query:scope.queryKeyword}),analyticsDashboardService.refresh(),scope.queryKeyword=void 0}}}}return AnalyticsQueryInputDirective.$inject=["analyticsQueryService","analyticsDashboardService"],AnalyticsQueryInputDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-analytics-query-input"),AnalyticsQueryInputDirective),define("app/view/analytics/searchPanel/AnalyticsQueryInputDirective",function(){});var AnalyticsFacetBarDirective=function(){function AnalyticsFacetBarDirective($rootScope,analyticsFilterService,analyticsQueryService,analyticsDashboardService){return{restrict:"E",replace:!0,templateUrl:"app/view/analytics/searchPanel/AnalyticsFacetBarView.html",link:function(scope){var _d={};_.defaults(scope.panel,_d),scope.analyticsQuery=analyticsQueryService,scope.dashboard=analyticsDashboardService,scope.$on("filter",function(){}),scope.init=function(){scope.analyticsFilter=analyticsFilterService},scope.toggle=function(id){analyticsDashboardService.current.services.filter.list[id].active=!analyticsDashboardService.current.services.filter.list[id].active,analyticsDashboardService.refresh()},scope.add=function(query){query=query||"*",analyticsFilterService.set({editing:!0,type:"querystring",query:query,mandate:"must"},void 0,!0)},scope.onEnterKeyPressed=function(){$(document).trigger("click"),analyticsDashboardService.refresh()},scope.refresh=function(){$rootScope.$broadcast(AnalyticsUtils.UEV_ANALYTICS_REFRESH)},scope.render=function(){$rootScope.$broadcast(AnalyticsEvents.RENDER)},scope.show_key=function(key){return!_.contains(["type","id","alias","mandate","active","editing"],key)},scope.getFilterClass=function(filter){if(filter.active!==!0)return"muted";switch(filter.mandate){case"must":return"text-success";case"mustNot":return"text-error";case"either":return"text-warning";default:return"text-info"}},scope.isEditable=function(filter){var uneditable=["time"];return _.contains(uneditable,filter.type)?!1:!0},scope.isDefaultQueryKeyword=function(id){return analyticsQueryService.isDefaultQueryKeyword(id)},scope.isNoQueryTermLeft=function(){return 0==analyticsQueryService.isOnlyQueryTerm()},scope.filterClickHandler=function($event,id){scope.removeFilter(id),_.defer(function(){$(document).trigger("click")}),$event.preventDefault()},scope.queryClickHandler=function($event,id){scope.removeQuery(id),_.defer(function(){$(document).trigger("click")}),$event.preventDefault(),scope.dashboard.refresh()},scope.removeFilter=function(id){analyticsFilterService.remove(id,!1)},scope.removeQuery=function(id){analyticsQueryService.remove(id),scope.isNoQueryTermLeft()&&analyticsQueryService.set({query:"*"})},scope.mousedownHandler=function($event){$event.stopPropagation()},scope.isMustIncludeFilter=function(id){return"must"==analyticsDashboardService.current.services.filter.list[id].mandate},scope.isMustNotIncludeFilter=function(id){return"mustNot"==analyticsDashboardService.current.services.filter.list[id].mandate},$rootScope.$on("UEV_ADD_FILTER_TO_FACET_BAR",function($event,containerObj){var fireFlyoutOnFacet=function(){angular.element("#facet-"+containerObj.filterId).trigger("mousedown")};setTimeout(fireFlyoutOnFacet,0)})}}}return AnalyticsFacetBarDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-analytics-facet-bar"),AnalyticsFacetBarDirective),define("app/view/analytics/searchPanel/AnalyticsFacetBarDirective",function(){});var AnalyticsSearchField=function(){function AnalyticsSearchField(fieldName,displayName,selected,fieldType,displayWidth){void 0===fieldName&&(fieldName=""),void 0===displayName&&(displayName=""),void 0===selected&&(selected=!1),void 0===fieldType&&(fieldType=AnalyticsSearchField.SEARCH_FIELD_TYPE_STRING),void 0===displayWidth&&(displayWidth=-1),this.fieldType=AnalyticsSearchField.SEARCH_FIELD_TYPE_STRING,this.displayWidth=-1,this.selected=!1,ADLoggerService.warn("AnalyticsUtils.AnalyticsSearchField.constructor Debug: Enter for field name "+fieldName),this.fieldName=fieldName,this.displayName=displayName,this.displayWidth=displayWidth,this.selected=selected,this.fieldType=fieldType}return AnalyticsSearchField.SEARCH_FIELD_TYPE_NUMBER="number",AnalyticsSearchField.SEARCH_FIELD_TYPE_STRING="string",AnalyticsSearchField.SEARCH_FIELD_TYPE_OBJECT="object",AnalyticsSearchField}(),AnalyticsEvents=function(){function AnalyticsEvents(){}return AnalyticsEvents.ANALYZE_FIELD="analyze-field",AnalyticsEvents.CLOSE_WIDGET="close-widget",AnalyticsEvents.BREAKDOWN_ACTION="breakdown-action",AnalyticsEvents.EDIT_WIDGET_TITLE="edit-widget-title",AnalyticsEvents.REFRESH="ANALYTICS_REFRESH",AnalyticsEvents.RENDER="ANALYTICS_RENDER",AnalyticsEvents.TIME_RANGE_CHANGE="ANALYTICS_TIME_RANGE_CHANGE",AnalyticsEvents.SEARCH_MODE_CHANGE="ANALYTICS_SEARCH_MODE_CHANGE",AnalyticsEvents.VIEW_MODE_CHANGE="ANALYTICS_VIEW_MODE_CHANGE",AnalyticsEvents.TABLE_MODE_CHANGE="ANALYTICS_TABLE_MODE_CHANGE",AnalyticsEvents.WIDGET_BUILDER_MODE_CHANGE="ANALYTICS_WIDGET_BUILDER_MODE_CHANGE",AnalyticsEvents.ANALYTICS_FIELDS_CHANGE="ANALYTICS_ANALYTICS_FIELDS_CHANGE",AnalyticsEvents.SIGNIFICANT_FIELDS_CHANGE="ANALYTICS_SIGNIFICANT_FIELDS_CHANGE",AnalyticsEvents.CUSTOM_EVENT_NAMES_CHANGE="ANALYTICS_CUSTOM_EVENT_NAMES_CHANGE",AnalyticsEvents.DATA_SOURCE_CHANGE="ANALYTICS_DATA_SOURCE_CHANGE",AnalyticsEvents.ADQL_QUERY_CHANGE="ANALYTICS_ADQL_QUERY_CHANGE",AnalyticsEvents.ANALYTICS_QUERY_CHANGE="ANALYTICS_ANALYTICS_QUERY_CHANGE",AnalyticsEvents.WIDGET_REFRESH="ANALYTICS_WIDGET_REFRESH",AnalyticsEvents.WIDGET_RENDER="ANALYTICS_WIDGET_RENDER",AnalyticsEvents.WIDGET_PROPERTIES_CHANGE="ANALYTICS_WIDGET_PROPERTIES_CHANGE",AnalyticsEvents.WIDGET_TIME_RANGE_CHANGE="ANALYTICS_WIDGET_TIME_RANGE_CHANGE",AnalyticsEvents.WIDGET_FIELDS_CHANGE="ANALYTICS_WIDGET_FIELDS_CHANGE",AnalyticsEvents.WIDGET_FILTERS_CHANGE="ANALYTICS_WIDGET_FILTERS_CHANGE",AnalyticsEvents.WIDGET_ADQL_QUERY_CHANGE="ANALYTICS_WIDGET_ADQL_QUERY_CHANGE",AnalyticsEvents.WIDGET_ANALYTICS_QUERY_CHANGE="ANALYTICS_WIDGET_ANALYTICS_QUERY_CHANGE",AnalyticsEvents}(),AnalyticsOperationMode=function(){function AnalyticsOperationMode(){}return AnalyticsOperationMode.CREATE="CREATE",AnalyticsOperationMode.EDIT="EDIT",AnalyticsOperationMode}(),AnalyticsWidgetTypes=function(){function AnalyticsWidgetTypes(){}return AnalyticsWidgetTypes.BLANK="BLANK",AnalyticsWidgetTypes.NUMERIC="NUMERIC",AnalyticsWidgetTypes.PIE="PIE",AnalyticsWidgetTypes.CIRCLEPACK="CIRCLEPACK",AnalyticsWidgetTypes.TABLE="TABLE",AnalyticsWidgetTypes.TREEMAP="TREEMAP",AnalyticsWidgetTypes.COLUMN="COLUMN",AnalyticsWidgetTypes.GEO="GEO",AnalyticsWidgetTypes.LIST="LIST",AnalyticsWidgetTypes.SCATTER_PLOT="SCATTER_PLOT",AnalyticsWidgetTypes.POINTS="POINTS",AnalyticsWidgetTypes.LINE="LINE",AnalyticsWidgetTypes.AREA="AREA",AnalyticsWidgetTypes.TIME="TIME",AnalyticsWidgetTypes.HISTOGRAM="HISTOGRAM",AnalyticsWidgetTypes.PERCENTILE="PERCENTILE",AnalyticsWidgetTypes.STREAM="STREAM",AnalyticsWidgetTypes.FUNNEL="FUNNEL",AnalyticsWidgetTypes.PREDEF_HISTOGRAM="PREDEF_HISTOGRAM",AnalyticsWidgetTypes.PREDEF_TIME="PREDEF_TIME",AnalyticsWidgetTypes.PREDEF_STREAM="PREDEF_STREAM",AnalyticsWidgetTypes.PREDEF_GEO="PREDEF_GEO",AnalyticsWidgetTypes.PREDEF_LIST="PREDEF_LIST",AnalyticsWidgetTypes.PREDEF_PIE="PREDEF_PIE",AnalyticsWidgetTypes.PREDEF_BAR="PREDEF_BAR",AnalyticsWidgetTypes.PREDEF_METRIC="PREDEF_METRIC",AnalyticsWidgetTypes.BAR="BAR",AnalyticsWidgetTypes.REAL_TIME_TRANSACTIONS="REAL_TIME_TRANSACTIONS",AnalyticsWidgetTypes.GRID="GRID",AnalyticsWidgetTypes.METRIC_LABEL="METRIC_LABEL",AnalyticsWidgetTypes}(),AnalyticsHistogramTypes=function(){function AnalyticsHistogramTypes(){}return AnalyticsHistogramTypes.CHART_TYPE_COLUMN="column",AnalyticsHistogramTypes.CHART_TYPE_LINE="line",AnalyticsHistogramTypes.CHART_TYPE_SCATTER="scatter",AnalyticsHistogramTypes.CHART_TYPE_AREA="area",AnalyticsHistogramTypes}(),AnalyticsMode;!function(AnalyticsMode){AnalyticsMode[AnalyticsMode.TRANSACTION=0]="TRANSACTION",AnalyticsMode[AnalyticsMode.LOGS=1]="LOGS",AnalyticsMode[AnalyticsMode.USER_ACTIVITY=2]="USER_ACTIVITY",AnalyticsMode[AnalyticsMode.SYNTHETIC=3]="SYNTHETIC",AnalyticsMode[AnalyticsMode.WEB_SESSIONS=4]="WEB_SESSIONS",AnalyticsMode[AnalyticsMode.MOBILE_SESSIONS=5]="MOBILE_SESSIONS",AnalyticsMode[AnalyticsMode.EUM_MOBILE_NETWORK_REQUEST=6]="EUM_MOBILE_NETWORK_REQUEST",AnalyticsMode[AnalyticsMode.EUM_WEB_ANALYZE=7]="EUM_WEB_ANALYZE",AnalyticsMode[AnalyticsMode.ANALYTICS_MOBILE_NETWORK_REQUEST=8]="ANALYTICS_MOBILE_NETWORK_REQUEST"}(AnalyticsMode||(AnalyticsMode={}));var AnalyticsCache=function(){function AnalyticsCache(){}return AnalyticsCache.SEARCH_CONTEXT="Analytics.analyticsSearchContext",AnalyticsCache.ADQL_QUERY="Analytics.adqlQuery",AnalyticsCache.SEARCH_MODE="Analytics.searchMode",AnalyticsCache.VIEW_MODE="Analytics.viewMode",AnalyticsCache.WIDGET_BUILDER_MODE="Analytics.widgetBuilderMode",AnalyticsCache.WIDGET_TYPE="Analytics.widgetType",AnalyticsCache}(),AnalyticsTableMode=function(){function AnalyticsTableMode(){}return AnalyticsTableMode.COLUMN="COLUMN",AnalyticsTableMode.PILL="PILL",AnalyticsTableMode}(),AnalyticsDataSource=function(){function AnalyticsDataSource(){}return AnalyticsDataSource.TRANSACTION="transaction",AnalyticsDataSource.TRANSACTIONS="transactions",AnalyticsDataSource.LOG="log",AnalyticsDataSource.LOGS="logs",AnalyticsDataSource.BROWSERRECORD="browserrecord",AnalyticsDataSource.BROWSERRECORDS="browserrecords",AnalyticsDataSource.BROWSER_RECORD="browser_record",AnalyticsDataSource.BROWSER_RECORDS="browser_records",AnalyticsDataSource.MOBILESNAPSHOT="mobilesnapshot",AnalyticsDataSource.MOBILESNAPSHOTS="mobilesnapshots",AnalyticsDataSource.MOBILE_SNAPSHOT="mobile_snapshot",AnalyticsDataSource.MOBILE_SNAPSHOTS="mobile_snapshots",AnalyticsDataSource.MOBILECRASHREPORT="mobilecrashreport",AnalyticsDataSource.MOBILECRASHREPORTS="mobilecrashreports",AnalyticsDataSource.MOBILE_CRASH_REPORT="mobile_crash_report",AnalyticsDataSource.MOBILE_CRASH_REPORTS="mobile_crash_reports",AnalyticsDataSource.CUSTOMEVENTS="customevents",AnalyticsDataSource}(),AnalyticsWidgetCategoryType=function(){function AnalyticsWidgetCategoryType(){}return AnalyticsWidgetCategoryType.AXIS="AXIS",AnalyticsWidgetCategoryType.FUNNEL="FUNNEL",AnalyticsWidgetCategoryType.COHORT="COHORT",AnalyticsWidgetCategoryType.PERCENTILE="PERCENTILE",AnalyticsWidgetCategoryType.STREAM="STREAM",AnalyticsWidgetCategoryType}(),AnalyticsUtils=function(){function AnalyticsUtils(){}return AnalyticsUtils.newline2br=function(text){var br="<br/>";return(text+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+br+"$2")},AnalyticsUtils.getDashboardContext=function(timeRange,filter,analyticsMode,indexType){var context={};return context.timeRange=timeRange,context.filter=filter,context.analyticsMode=analyticsMode,context.indexType=indexType,context.implicitFilterSet=null,context},AnalyticsUtils.getDisplayLabelForOperation=function(operation){switch(operation){case ChartBuilderController.COUNT:return"Count";case ChartBuilderController.COUNT_DISTINCT:return"Distinct Count";case ChartBuilderController.COUNT_BREAKDOWN:return"Drilldown";case ChartBuilderController.SUM:return"Sum";case ChartBuilderController.AVG:return"Average";case ChartBuilderController.MIN:return"Minimum";case ChartBuilderController.MAX:return"Maximum";default:return""}},AnalyticsUtils.getLabelFromThresholdValues=function(rangeStart,rangeEnd){var rangeStartStr,rangeEndStr;return!_.isUndefined(rangeStart)&&_.isNumber(rangeStart)?rangeStartStr=rangeStart.toFixed(2).toString():_.isUndefined(rangeStart)||(rangeStartStr=rangeStart.toString()),!_.isUndefined(rangeEnd)&&_.isNumber(rangeEnd)?rangeEndStr=rangeEnd.toFixed(2).toString():_.isUndefined(rangeEnd)||(rangeEndStr=rangeEnd.toString()),rangeStartStr+" to "+rangeEndStr},AnalyticsUtils.getThresholdValuesFromLabel=function(rangeLabel){var lowThreshold,highThreshold,arrayToReturn=[],rangeValues=[];return rangeLabel&&(StringUtils.containsString(rangeLabel,"-",!0)?rangeValues=rangeLabel.split("-"):StringUtils.containsString(rangeLabel,"to",!0)&&(rangeValues=rangeLabel.split("to")),rangeValues.length>0&&(lowThreshold=rangeValues[0].trim()),rangeValues.length>1&&(highThreshold=rangeValues[1].trim())),arrayToReturn.push(lowThreshold),arrayToReturn.push(highThreshold),arrayToReturn},AnalyticsUtils.getNumericOperator=function(numericOperator){switch(numericOperator){case AnalyticsUtils.EQUALS:return{name:AnalyticsUtils.EQUALS,value:AnalyticsUtils.EQUALS};case AnalyticsUtils.NOT_EQUALS:return{name:AnalyticsUtils.NOT_EQUALS,value:AnalyticsUtils.NOT_EQUALS};case AnalyticsUtils.GREATER_THAN_OR_EQUAL:return{name:AnalyticsUtils.GREATER_THAN_OR_EQUAL,value:AnalyticsUtils.GREATER_THAN_OR_EQUAL};case AnalyticsUtils.LESS_THAN_OR_EQUAL:return{name:AnalyticsUtils.LESS_THAN_OR_EQUAL,value:AnalyticsUtils.LESS_THAN_OR_EQUAL};case AnalyticsUtils.RANGE:return{name:AnalyticsUtils.RANGE,value:AnalyticsUtils.RANGE};
default:ADLoggerService.error("No such operator in executionTimeSelector.")}},AnalyticsUtils.isWrappedInQuotes=function(stringToCheck){return stringToCheck&&(stringToCheck=stringToCheck.trim(),'"'==stringToCheck.charAt(0)&&'"'==stringToCheck.charAt(stringToCheck.length-1))?!0:!1},AnalyticsUtils.wrapStringInQuotes=function(stringToWrap){return stringToWrap?'"'+stringToWrap+'"':stringToWrap},AnalyticsUtils.unwrapStringInQuotes=function(stringInQuotes){return AnalyticsUtils.isWrappedInQuotes(stringInQuotes)?stringInQuotes.substring(1,stringInQuotes.length-1):stringInQuotes},AnalyticsUtils.isFieldDefinitionAnalyzed=function(fieldDef){return!fieldDef.aggregationsAllowed},AnalyticsUtils.getChartIcon=function(type,chart){switch(type){case AnalyticsWidgetTypes.PIE:return"images/widgets/pieChartWidget2_gray.svg";case AnalyticsWidgetTypes.BAR:return"images/widgets/columnChartWidget_gray.svg";case AnalyticsWidgetTypes.TABLE:case AnalyticsWidgetTypes.LIST:return"images/widgets/tableWidget_gray.svg";case AnalyticsWidgetTypes.METRIC_LABEL:case AnalyticsWidgetTypes.NUMERIC:return"images/widgets/numberWidget_gray.svg";case AnalyticsWidgetTypes.TREEMAP:return"images/widgets/treeMap_gray.svg";case AnalyticsWidgetTypes.CIRCLEPACK:return"images/widgets/circlePack_gray.svg";case AnalyticsWidgetTypes.POINTS:case AnalyticsWidgetTypes.SCATTER_PLOT:return"images/widgets/scatterPoints_gray.svg";case AnalyticsWidgetTypes.HISTOGRAM:case AnalyticsWidgetTypes.TIME:switch(chart){case AnalyticsHistogramTypes.CHART_TYPE_COLUMN:return"images/widgets/histogramWidget_gray.svg";case AnalyticsHistogramTypes.CHART_TYPE_LINE:return"images/widgets/lineChartWidget_gray.svg";case AnalyticsHistogramTypes.CHART_TYPE_AREA:return"images/widgets/areaChartWidget_gray.svg";case AnalyticsHistogramTypes.CHART_TYPE_SCATTER:return"images/widgets/scatterPoints_gray.svg";default:return"images/widgets/columnChartWidget_gray.svg"}break;default:return"images/widgets/columnChartWidget_gray.svg"}},AnalyticsUtils.WIDGET_FULLSCREEN_EVENT="WIDGET_FULLSCREEN_EVENT",AnalyticsUtils.EXIT_FULLSCREEN_EVENT="EXIT_FULLSCREEN_EVENT",AnalyticsUtils.ADD_IMPORTED_ANALYTICS_DASHBOARD="ADD_IMPORTED_ANALYTICS_DASHBOARD",AnalyticsUtils.UEV_ANALYTICS_DASHBOARD_REFRESH="UEV_ANALYTICS_DASHBOARD_REFRESH",AnalyticsUtils.UEV_ANALYTICS_REFRESH="UEV_ANALYTICS_REFRESH",AnalyticsUtils.UEV_METRIC_LABEL_FETCH="UEV_METRIC_LABEL_FETCH",AnalyticsUtils.UEV_ANALYTICS_METRIC_UPDATED="UEV_ANALYTICS_METRIC_UPDATED",AnalyticsUtils.REFRESH_DASHBOARD_LIST="refresh-dashboard-list",AnalyticsUtils.FULLY_QUALIFIED_NAME_PREFIX="Custom Metrics|Analytics|Metrics|",AnalyticsUtils.EDIT_SELECTED_WIDGET="EDIT_SELECTED_WIDGET",AnalyticsUtils.EQUALS="=",AnalyticsUtils.NOT_EQUALS="!=",AnalyticsUtils.GREATER_THAN=">",AnalyticsUtils.GREATER_THAN_OR_EQUAL=">=",AnalyticsUtils.LESS_THAN="<",AnalyticsUtils.LESS_THAN_OR_EQUAL="<=",AnalyticsUtils.RANGE="Range",AnalyticsUtils.BOOLEAN_TRUE_STRING="T",AnalyticsUtils.BOOLEAN_FALSE_STRING="F",AnalyticsUtils.OTHER_TYPE="Other",AnalyticsUtils.MAPPED_RESULT="_adqlMappedResult",AnalyticsUtils.UEV_ANALYTICS_WIDGET_SEARCH_RESULTS_RECEIVED="UEV_ANALYTICS_WIDGET_SEARCH_RESULTS_RECEIVED",AnalyticsUtils.UEV_ADD_ANALYTICS_FILTER_SELECTOR="UEV_ADD_ANALYTICS_FILTER_SELECTOR",AnalyticsUtils.UEV_REMOVE_ANALYTICS_FILTER_SELECTOR="UEV_REMOVE_ANALYTICS_FILTER_SELECTOR",AnalyticsUtils.UEV_REPLACE_ANALYTICS_FILTER_SELECTOR="UEV_REPLACE_ANALYTICS_FILTER_SELECTOR",AnalyticsUtils.UEV_ANALYTICS_FIELD_SHOW_IN_GRID_TOGGLE="UEV_ANALYTICS_FIELD_SHOW_IN_GRID_TOGGLE",AnalyticsUtils.UEV_ANALYTICS_EDIT_EXTRACTED_FIELD_CONFIGURATION="UEV_ANALYTICS_EDIT_EXTRACTED_FIELD_CONFIGURATION",AnalyticsUtils.UEV_IS_WIDGET_VALID="UEV_IS_WIDGET_VALID",AnalyticsUtils.obj2htmlul=function(root,depth){if(void 0===depth&&(depth=0),"object"==typeof root&&root){var html="<ul>";for(var item in root)root.hasOwnProperty(item)&&(html+="<li>"+item+": ",html+="object"==typeof root[item]&&root[item]&&10>depth?AnalyticsUtils.obj2htmlul(root[item],depth+1):root[item],html+="</li>")}return html+"</ul>"},AnalyticsUtils}();define("app/view/analytics/AnalyticsUtils",function(){});var MetaDataDefinition=function(){function MetaDataDefinition(name,type){this.name=name,this.type=type}return MetaDataDefinition}();define("app/view/analytics/metaData/MetaDataDefinition",function(){});var QueryBuilderDirective=function(){function QueryBuilderDirective(){return{restrict:"E",replace:!0,scope:{adIndexType:"@"},templateUrl:"app/view/analytics/queryBuilder/QueryBuilder.html",controller:"QueryBuilderController",link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return QueryBuilderDirective.$inject=[],QueryBuilderDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-query-builder"),QueryBuilderDirective),define("app/view/analytics/queryBuilder/QueryBuilderDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},QueryBuilderController=function(_super){function QueryBuilderController($rootScope,$scope,resourceManager,notificationService,injectorService,metaDataService,analyticsFilterService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$rootScope=$rootScope,this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.metaDataService=metaDataService,this.analyticsFilterService=analyticsFilterService,this.newSearchFieldsArray=[],this.fields=[],this.filterString=null,$scope.$watch("adIndexType",function(){_this.fetchFields()}),$scope.controller=this}return __extends(QueryBuilderController,_super),QueryBuilderController.prototype.link=function(){},QueryBuilderController.prototype.fetchFields=function(){var _this=this,indexType=this.$scope.adIndexType;indexType&&indexType.length>0&&indexType!=this.lastIndexQueried&&(this.lastIndexQueried=indexType,this.metaDataService.fetchFields(indexType,function(fieldsFetched){_this.fields=fieldsFetched}))},QueryBuilderController.prototype.getClassForFieldType=function(field){return this.metaDataService.getClassForFieldType(field.type)},QueryBuilderController.prototype.onClickFilter=function(event){event.stopPropagation&&event.stopPropagation()},QueryBuilderController.prototype.onClick=function($event){var fieldToInsert=$event.currentTarget.textContent.trim(),defaultValue="",pathVal=this.metaDataService.getNestedParentPath(fieldToInsert),filterType=pathVal?"nestedFilter":"terms",noRefresh=!0,filterId=this.analyticsFilterService.set({path:pathVal,type:filterType,field:fieldToInsert,value:defaultValue,mandate:"must"},void 0,noRefresh);this.$rootScope.$broadcast("UEV_ADD_FILTER_TO_FACET_BAR",{filterId:filterId})},QueryBuilderController.$inject=["$rootScope","$scope","resourceManager","notificationService","injectorService","metaDataService","analyticsFilterService"],QueryBuilderController}(ControllerBase);appdynamicsModule.controller("QueryBuilderController",QueryBuilderController),define("app/view/analytics/queryBuilder/QueryBuilderController",function(){});var ChartBuilderDirective=function(){function ChartBuilderDirective(){return{restrict:"E",replace:!0,scope:{adDashboardContext:"=",adWidgetDefinition:"=",adIndexType:"@"},templateUrl:"app/view/analytics/chartBuilder/ChartBuilder.html",controller:"ChartBuilderController",link:function(scope,element,attrs,controller){controller.link(scope,element,attrs)}}}return ChartBuilderDirective.$inject=[],ChartBuilderDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-chart-builder"),ChartBuilderDirective),define("app/view/analytics/chartBuilder/ChartBuilderDirective",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ChartBuilderController=function(_super){function ChartBuilderController($rootScope,$scope,$filter,resourceManager,notificationService,injectorService,metaDataService){var _this=this;_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$rootScope=$rootScope,this.$scope=$scope,this.$filter=$filter,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.metaDataService=metaDataService,this.CHART_TYPE_COLUMN="column",this.CHART_TYPE_LINE="line",this.CHART_TYPE_SCATTER="scatter",this.CHART_TYPE_AREA="area",this.selectedChartType=void 0,this.filterString="",this.numericOperations=[{name:"Sum",value:ChartBuilderController.SUM},{name:"Average",value:ChartBuilderController.AVG},{name:"Minimum",value:ChartBuilderController.MIN},{name:"Maximum",value:ChartBuilderController.MAX}],this.nonNumericOperations=[{name:"Count",value:ChartBuilderController.COUNT},{name:"Count Drilldown",value:ChartBuilderController.COUNT_BREAKDOWN},{name:"Count Distinct",value:ChartBuilderController.COUNT_DISTINCT}],this.resolutions=[{name:"Auto",value:"AUTO"},{name:"1 Minute",value:"1m"},{name:"15 Minutes",value:"15m"},{name:"1 Hour",value:"1h"},{name:"1 Day",value:"1d"},{name:"1 Week",value:"1w"},{name:"1 Month",value:"1M"},{name:"1 Year",value:"1y"}],this.selectedResolution=this.resolutions[0],this.isMaximized=!1,this.isWidgetBeingAdded=!0,this.selectedWidgetId="",this.onDropAction=function(){if(AppConfig.instance().debugMode){var isFieldCountLegal=_this.ensureValidityOfFieldsOnAxis();return isFieldCountLegal?(_this.yAxisItems.length>1?_this.setDefaultOperationsForAnalyticsField():_this.setDefaultOperation(),void _this.triggerViz()):void _this.notificationService.displayError(ChartBuilderController.MULTIFIELD_VALIDATION_ERROR_SUMMARY,ChartBuilderController.FIELD_VALIDATION_ERROR_TITLE)}var isFieldCountLegal=_this.ensureValidityOfFieldsOnAxisCombination();isFieldCountLegal?(_this.setDefaultOperation(),_this.triggerViz()):_this.notificationService.displayError(ChartBuilderController.FIELD_VALIDATION_ERROR_SUMMARY,ChartBuilderController.FIELD_VALIDATION_ERROR_TITLE)},this.xAxisItems=[],this.yAxisItems=[],this.previewWidgetConfigs=[],this.stack=!1,this.fieldFullPathToOperationMap={},this.widgetTitle="",$scope.$watch("controller.metaDataService.currentFields",function(){_this.processFields(_this.metaDataService.currentFields)}),$scope.controller=this,_.isUndefined(this.$scope.adWidgetDefinition)||this.populateWidgetForEditing(),this.$rootScope.$on(NavigationService.UEV_BEFORE_NAVIGATE_TO_FRAGMENT,function(){angular.element("#chartBuilderRoot").empty()})}return __extends(ChartBuilderController,_super),ChartBuilderController.prototype.link=function(){},ChartBuilderController.prototype.processFields=function(analyticsFields){this.analyticsFields=this.getFieldsEligibleForChartBuilderGroups(analyticsFields)},ChartBuilderController.prototype.getFieldsEligibleForChartBuilderGroups=function(originalAnalyticsFields){for(var analyticsFields=angular.copy(originalAnalyticsFields),i=0;i<analyticsFields.fieldGroups.length;i++){for(var fieldGroup=analyticsFields.fieldGroups[i],newFields=[],j=0;j<fieldGroup.fields.length;j++)this.isFieldEligibleForChartBuilder(fieldGroup.fields[j])&&newFields.push(fieldGroup.fields[j]);fieldGroup.fields=newFields}return analyticsFields},ChartBuilderController.prototype.getFieldsEligibleForChartBuilder=function(fields){for(var eligibleFields=[],i=0;i<fields.length;i++)this.isFieldEligibleForChartBuilder(fields[i])&&eligibleFields.push(fields[i]);return eligibleFields},ChartBuilderController.prototype.isFieldEligibleForChartBuilder=function(field){var isEligible=!0;return field&&field.fieldDefinition&&field.fieldDefinition.fieldType!=FieldType.OBJECT&&field.fieldDefinition.fieldType!=FieldType.DATE&&field.fieldDefinition.aggregationsAllowed||(isEligible=!1),isEligible},ChartBuilderController.prototype.setResolution=function(value){this.selectedResolution=_.findWhere(this.resolutions,{value:value}),this.hasPreviewWidget()&&(this.getPreviewWidget().resolution=this.selectedResolution.value,this.triggerViz())},ChartBuilderController.prototype.isTimeSeriesGraph=function(widgetType){if(_.isUndefined(widgetType)){var widget=this.getPreviewWidget();widget&&(widgetType=widget.type)}return widgetType===AnalyticsWidgetTypes.HISTOGRAM},ChartBuilderController.prototype.getUnderToolbarHeight=function(){var totalContainerHeight=$(".ad-chart-builder-container").outerHeight(!0),aboveContentHeight=$(".ads-chart-builder-top-toolbar").outerHeight(!0);return totalContainerHeight-aboveContentHeight},ChartBuilderController.prototype.getUnderToolbarHeightStyle=function(){return{height:this.getUnderToolbarHeight()+"px","overflow-x":"hidden","overflow-y":"auto"}},ChartBuilderController.prototype.getFieldsContainerHeight=function(){var totalContainerHeight=$(".ads-chart-builder-field-list-container").outerHeight(!0),aboveContentHeight=$(".ads-fields-title-and-search-container").outerHeight(!0);return totalContainerHeight-aboveContentHeight},ChartBuilderController.prototype.getFieldsContainerStyle=function(){return{height:this.getFieldsContainerHeight()+"px"}},ChartBuilderController.prototype.getChartContainerHeight=function(){var totalContainerHeight=$(".ads-chart-builder-xy-builder-container").outerHeight(!0),aboveContentHeight=$(".ads-chart-builder-xy-rows-section").outerHeight(!0);return totalContainerHeight-aboveContentHeight-12},ChartBuilderController.prototype.getChartContainerStyle=function(){return{height:this.getChartContainerHeight()+"px"}},ChartBuilderController.prototype.getClassForFieldType=function(field){return this.metaDataService.getClassForFieldType(field.type)},ChartBuilderController.prototype.isXAxisEmpty=function(){return _.isEmpty(this.xAxisItems)},ChartBuilderController.prototype.isYAxisEmpty=function(){return _.isEmpty(this.yAxisItems)},ChartBuilderController.prototype.isBreakdownAllowed=function(){return this.hasPreviewWidget()&&Util.isOneOf(this.getPreviewWidget().type,[AnalyticsWidgetTypes.BAR,AnalyticsWidgetTypes.TREEMAP,AnalyticsWidgetTypes.CIRCLEPACK,AnalyticsWidgetTypes.TABLE,AnalyticsWidgetTypes.HISTOGRAM,AnalyticsWidgetTypes.PIE])&&(this.isXAxisEmpty()||1==this.xAxisItems.length)&&!this.isYAxisEmpty()&&1==this.yAxisItems.length&&this.metaDataService.isFieldDefinitionTypeString(this.yAxisItems[0].fieldDefinition)?!0:!1},ChartBuilderController.prototype.populateWidgetForEditing=function(){this.isWidgetBeingAdded=!1;var selectedOperation=this.getWidgetOperation(this.$scope.adWidgetDefinition);if(this.selectedWidgetId=this.$scope.adWidgetDefinition.id,this.selectedWidgetType=this.$scope.adWidgetDefinition.type,this.selectedChartType=this.$scope.adWidgetDefinition.chart,this.xAxisItems=_.clone(this.$scope.adWidgetDefinition.xAxisFields||[]),this.yAxisItems=_.clone(this.$scope.adWidgetDefinition.yAxisFields||[]),this.widgetTitle=this.$scope.adWidgetDefinition.title,this.updateSelectedResolution(this.$scope.adWidgetDefinition),this.previewWidgetConfigs.push(this.$scope.adWidgetDefinition),this.yAxisItems.length>0&&this.setOperationForField(this.$scope.adWidgetDefinition.yAxisFields[0],selectedOperation,!0),AppConfig.instance().debugMode&&AnalyticsWidgetHelper.isMultipleFieldOnYCase(this.$scope.adWidgetDefinition))for(var i=0;i<this.yAxisItems.length;i++)this.setOperationForAnalyticsField(this.yAxisItems[i],this.yAxisItems[i].selectedOperation)},ChartBuilderController.prototype.getWidgetOperation=function(widgetConfig){var selectedOperation=null;return selectedOperation="true"===widgetConfig.breakup?_.findWhere(this.nonNumericOperations,{value:ChartBuilderController.COUNT_BREAKDOWN}):_.findWhere(this.nonNumericOperations,{value:widgetConfig.operation}),_.isUndefined(selectedOperation)&&(selectedOperation=_.findWhere(this.numericOperations,{value:widgetConfig.operation})),selectedOperation},ChartBuilderController.prototype.updateSelectedResolution=function(widgetConfig){var resolution=_.findWhere(this.resolutions,{value:widgetConfig.resolution});resolution&&(this.selectedResolution=resolution)},ChartBuilderController.prototype.onTitleChange=function(newTitle){this.widgetTitle=newTitle},ChartBuilderController.prototype.hasPreviewWidget=function(){return!_.isEmpty(this.previewWidgetConfigs)},ChartBuilderController.prototype.getPreviewWidget=function(){return this.previewWidgetConfigs[0]},ChartBuilderController.prototype.isChartEmpty=function(){return this.isXAxisEmpty()&&this.isYAxisEmpty()},ChartBuilderController.prototype.setPreviewWidget=function(analyticsWidgetDefinition){this.previewWidgetConfigs=[AnalyticsDashboardManager.getJSONConfigForWidget(analyticsWidgetDefinition,this.$scope.adDashboardContext)]},ChartBuilderController.prototype.clearPreviewWidget=function(){this.previewWidgetConfigs=[]},ChartBuilderController.prototype.setViz=function(type,chart){var fullFieldName;this.selectedWidgetType=type,this.selectedChartType=chart,AppConfig.instance().debugMode?this.ensureValidityOfFieldsOnAxis(this.selectedWidgetType):this.ensureValidityOfFieldsOnAxisCombination(this.selectedWidgetType);var analyticsField=this.yAxisItems?this.yAxisItems[0]:void 0;analyticsField&&(fullFieldName=analyticsField.fullPath);var selectedOperation;this.fieldFullPathToOperationMap[fullFieldName]?selectedOperation=this.fieldFullPathToOperationMap[fullFieldName].value:(ADLoggerService.error("No Operation selected! Defaulting to Count."),selectedOperation=ChartBuilderController.COUNT),type!==AnalyticsWidgetTypes.METRIC_LABEL||this.isNumericOperation(selectedOperation)||selectedOperation!=ChartBuilderController.COUNT_BREAKDOWN||this.setOperationForAnalyticsField(analyticsField,this.nonNumericOperations[0]);var analyticsWidgetDefinition={};analyticsWidgetDefinition.type=type,analyticsWidgetDefinition.title=this.widgetTitle,analyticsWidgetDefinition.field=fullFieldName,analyticsWidgetDefinition.operation=selectedOperation,analyticsWidgetDefinition.chart=chart,analyticsWidgetDefinition.showSettingsCog=!1,analyticsWidgetDefinition.isClosable=!1,analyticsWidgetDefinition.stack=this.stack,analyticsWidgetDefinition.indexType=this.$scope.adIndexType,analyticsWidgetDefinition.yAxisFields=this.yAxisItems,analyticsWidgetDefinition.xAxisFields=this.xAxisItems,analyticsWidgetDefinition.resolution=this.selectedResolution.value,analyticsWidgetDefinition.isClosable=!1,analyticsWidgetDefinition.breakup=this.isBreakdownSelected(fullFieldName)?"true":"false",this.setPreviewWidget(analyticsWidgetDefinition)},ChartBuilderController.prototype.isBreakdownSelected=function(fullFieldName){var selectedSSO=this.fieldFullPathToOperationMap[fullFieldName];return selectedSSO?selectedSSO.value==ChartBuilderController.COUNT_BREAKDOWN:!1},ChartBuilderController.prototype.removeItem=function(list,index){Util.removeAt(list,index);this.clearPreviewWidget(),this.setViz(this.selectedWidgetType?this.selectedWidgetType:AnalyticsWidgetTypes.BAR,this.selectedChartType)},ChartBuilderController.prototype.getOperationsForFieldType=function(field){return this.metaDataService.isFieldDefinitionTypeNumeric(field.fieldDefinition)?this.numericOperations:this.isBreakdownAllowed()?this.nonNumericOperations:_.reject(this.nonNumericOperations,function(sso){return sso.value==ChartBuilderController.COUNT_BREAKDOWN})},ChartBuilderController.prototype.getOperationForField=function(field){var fullFieldName=field.fullPath,selectedSSO=this.fieldFullPathToOperationMap[fullFieldName];return selectedSSO?selectedSSO.value:void 0},ChartBuilderController.prototype.setOperationForField=function(field,operation,fetchData){var fullFieldName=field.fullPath;operation&&(this.fieldFullPathToOperationMap[fullFieldName]=operation.value==ChartBuilderController.COUNT_BREAKDOWN?_.findWhere(this.nonNumericOperations,{value:ChartBuilderController.COUNT_BREAKDOWN}):operation),fetchData&&(this.isNumericOperation(operation)&&this.previewWidgetConfigs&&this.previewWidgetConfigs.length>0?(this.previewWidgetConfigs[0].operation=operation.value,this.previewWidgetConfigs[0].type==AnalyticsWidgetTypes.METRIC_LABEL?this.$rootScope.$broadcast(AnalyticsEvents.RENDER):this.$scope.$broadcast(AnalyticsEvents.RENDER)):this.triggerViz())},ChartBuilderController.prototype.setOperationForFieldAndTrigger=function(analyticsField,operation){this.setOperationForAnalyticsField(analyticsField,operation),this.triggerReRender(analyticsField)},ChartBuilderController.prototype.setOperationForAnalyticsField=function(analyticsField,operation){var fullFieldName=analyticsField.fullPath;operation&&(this.fieldFullPathToOperationMap[fullFieldName]=operation.value==ChartBuilderController.COUNT_BREAKDOWN?_.findWhere(this.nonNumericOperations,{value:ChartBuilderController.COUNT_BREAKDOWN}):operation),analyticsField.selectedOperation=operation},ChartBuilderController.prototype.triggerReRender=function(analyticsField){this.isNumericOperation(analyticsField.selectedOperation)?this.$scope.$broadcast(AnalyticsEvents.RENDER):this.triggerViz()},ChartBuilderController.prototype.getFieldInfo=function(field,includeOp,breakWords){if(void 0===includeOp&&(includeOp=!0),void 0===breakWords&&(breakWords=!1),includeOp){var fullFieldName=field.fullPath,selectedSSO=this.fieldFullPathToOperationMap[fullFieldName];if(_.isUndefined(selectedSSO)&&(this.fieldFullPathToOperationMap[fullFieldName]=this.metaDataService.isFieldDefinitionTypeNumeric(field.fieldDefinition)?this.numericOperations[0]:this.nonNumericOperations[0]),breakWords){var fieldOp=AnalyticsUtils.getDisplayLabelForOperation(selectedSSO.value);return fieldOp+" - "+field.displayName}var fieldOp=selectedSSO.name;return fieldOp+" ("+field.displayName+")"}return field.displayName},ChartBuilderController.prototype.onSaveAndBackToDash=function(){var previewWidgetConfig=angular.copy(this.previewWidgetConfigs[0]);this.isWidgetBeingAdded?(previewWidgetConfig.id=Util.generateId(),this.$rootScope.$broadcast(ChartBuilderController.ADD_WIDGET,previewWidgetConfig)):(previewWidgetConfig.id=this.selectedWidgetId,this.$rootScope.$broadcast(ChartBuilderController.MODIFY_WIDGET,previewWidgetConfig)),this.close()},ChartBuilderController.prototype.onBackToDash=function(){this.close()},ChartBuilderController.prototype.close=function(){this.$rootScope.$broadcast(ChartBuilderController.CLOSE_CHART_BUILDER),this.isMaximized&&this.onUnMaximize()},ChartBuilderController.prototype.onMaximze=function(){this.$scope.$emit(ChartBuilderController.UEV_CHART_BUILDER_MAXIMIZE),this.isMaximized=!0},ChartBuilderController.prototype.onUnMaximize=function(){this.$scope.$emit(ChartBuilderController.UEV_CHART_BUILDER_UN_MAXIMIZE),this.isMaximized=!1},ChartBuilderController.prototype.isNumericOperation=function(operation){var elmt=_.findWhere(this.numericOperations,{value:operation.value});return _.isUndefined(elmt)?!1:!0},ChartBuilderController.prototype.triggerViz=function(){this.setViz(this.selectedWidgetType?this.selectedWidgetType:AnalyticsWidgetTypes.BAR,this.selectedChartType?this.selectedChartType:void 0)},ChartBuilderController.prototype.setDefaultOperation=function(){this.isYAxisEmpty()||(this.metaDataService.isFieldDefinitionTypeNumeric(this.yAxisItems[0].fieldDefinition)&&this.setOperationForField(this.yAxisItems[0],this.numericOperations[0],!1),this.metaDataService.isFieldDefinitionTypeString(this.yAxisItems[0].fieldDefinition)&&this.setOperationForField(this.yAxisItems[0],this.nonNumericOperations[0],!1))},ChartBuilderController.prototype.setDefaultOperationsForAnalyticsField=function(){if(!this.isYAxisEmpty())for(var i=0;i<this.yAxisItems.length;i++)this.metaDataService.isFieldDefinitionTypeNumeric(this.yAxisItems[i].fieldDefinition)?this.setOperationForAnalyticsField(this.yAxisItems[i],this.numericOperations[0]):this.metaDataService.isFieldDefinitionTypeString(this.yAxisItems[i].fieldDefinition)&&this.setOperationForAnalyticsField(this.yAxisItems[i],this.nonNumericOperations[0])},ChartBuilderController.prototype.ensureValidityOfFieldsOnAxisCombination=function(widgetType){var isValid=!0;return this.yAxisItems.length>1?(this.yAxisItems.splice(1),isValid=!1):this.xAxisItems.length>1?(this.xAxisItems.splice(1),isValid=!1):this.isTimeSeriesGraph(widgetType)&&this.xAxisItems.length>0&&(this.xAxisItems.splice(0),isValid=!1),isValid},ChartBuilderController.prototype.ensureValidityOfFieldsOnAxis=function(widgetType){var isValid=!0;return this.isTimeSeriesGraph(widgetType)&&(this.xAxisItems.length>0&&0==this.yAxisItems.length?this.selectedWidgetType=AnalyticsWidgetTypes.BAR:this.xAxisItems.length>0&&this.yAxisItems.length>0&&(this.xAxisItems.splice(0),isValid=!1)),isValid},ChartBuilderController.CLOSE_CHART_BUILDER="close-chart-builder",ChartBuilderController.ADD_WIDGET="add-widget",ChartBuilderController.MODIFY_WIDGET="modify-widget",ChartBuilderController.COUNT="COUNT",ChartBuilderController.COUNT_DISTINCT="COUNT_DISTINCT",ChartBuilderController.SUM="SUM",ChartBuilderController.AVG="AVG",ChartBuilderController.MIN="MIN",ChartBuilderController.MAX="MAX",ChartBuilderController.COUNT_BREAKDOWN="COUNT_BREAKDOWN",ChartBuilderController.UEV_CHART_BUILDER_MAXIMIZE="UEV_CHART_BUILDER_MAXIMIZE",ChartBuilderController.UEV_CHART_BUILDER_UN_MAXIMIZE="UEV_CHART_BUILDER_UN_MAXIMIZE",ChartBuilderController.FIELD_VALIDATION_ERROR_SUMMARY="Only one field per axis is allowed.",ChartBuilderController.MULTIFIELD_VALIDATION_ERROR_SUMMARY="Max two fields on Y axis with no field on X axis or One field on Y axis with one field on X axis is allowed.",ChartBuilderController.FIELD_VALIDATION_ERROR_TITLE="Invalid combination",ChartBuilderController.$inject=["$rootScope","$scope","$filter","resourceManager","notificationService","injectorService","metaDataService"],ChartBuilderController}(ControllerBase);appdynamicsModule.controller("ChartBuilderController",ChartBuilderController),define("app/view/analytics/chartBuilder/ChartBuilderController",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/analytics/adql/common/uiGrid/uiGrid",["require","exports"],function(){var UIGridDirective=function(){function UIGridDirective(){return{restrict:"E",templateUrl:"app/view/analytics/adql/common/uiGrid/uiGrid.html",controller:UIGridController,scope:{gridOptions:"=adGridOptions",highlightTerms:"=?adHighlightTerms",onClick:"&?adOnClick",onDoubleClick:"&?adOnDoubleClick"},link:function(scope,element,attr){attr.adOnClick||(scope.onClick=null),attr.adOnDoubleClick||(scope.onDoubleClick=null)}}}return UIGridDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-ui-grid"),UIGridDirective);var UIGridController=function(_super){function UIGridController($scope){var _this=this;_super.call(this,$scope),this.$scope=$scope,this.$timeout=SharedInjectorService.instance().$timeout(),this.uiGridTemplateService=UIGridTemplateService.instance(),this.isRefresh=!1,this.getRequestExperienceIconURL=ImageUtil.getRequestExperienceIconURL,this.formatNumber=ViewUtil.formatNumber,this.getDateTimeString=DateTimeUtil.getDateTimeString,this.getEUMPageIcon=ImageUtil.getEUMPageIcon,this.getEUMBrowserIcon=ImageUtil.getBrowserIconSvg,this.onGridColumnsChange=function(newColumnDefs,oldColumnDefs){newColumnDefs&&oldColumnDefs&&newColumnDefs.length!==oldColumnDefs.length&&_this.onRefresh()},$scope.controller=this,this.onRefresh(),$scope.$watch("gridOptions.columnDefs",this.onGridColumnsChange)}return __extends(UIGridController,_super),UIGridController.prototype.onRefresh=function(){var _this=this;this.isRefresh=!0,this.$timeout(function(){_this.isRefresh=!1},0)},UIGridController.prototype.onClickGridRow=function(){this.$scope.onClick&&this.$scope.onClick()},UIGridController.prototype.onDoubleClickGridRow=function(){this.$scope.onDoubleClick&&this.$scope.onDoubleClick()},UIGridController.$inject=["$scope"],UIGridController}(ControllerBase);return adComponentsModule.controller("UIGridController",UIGridController),UIGridDirective});var AnalyticsGridRenderers=function(){function AnalyticsGridRenderers(){}return AnalyticsGridRenderers.GRID_LARGE_NUMBER_RENDERER=function(v){if(StringUtils.isNumber(v)){var vNum=+v;return-1==vNum?"":ViewUtil.formatNumber(vNum,0,-1)}return""},AnalyticsGridRenderers.DATE_RENDERER=function(v){var dateAsNumber=v;return dateAsNumber?DateTimeUtil.getDateTimeString(dateAsNumber):""},AnalyticsGridRenderers.METRIC_TIME_RENDERER=function(v,meta,record,rowIdx,colIdx,store,view){return"-1"==v?"":AnalyticsGridRenderers.GRID_LARGE_NUMBER_RENDERER(v,meta,record,rowIdx,colIdx,store,view)},AnalyticsGridRenderers.EXPERIENCE_RENDERER=function(userExperience,meta){return meta&&(meta.tdAttr="data-qtip='"+userExperience+"'"),"<img src='"+ImageUtil.getRequestExperienceIconURL(userExperience)+"'/>"},AnalyticsGridRenderers.ADVANCED_RENDERER=function(v){return"<pre style='overflow: hidden; margin-top: -10px;'>   <code>"+v+"</code></pre>"},AnalyticsGridRenderers}();define("app/view/analytics/adql/common/AnalyticsGridRenderers",function(){});var UIGridTemplateService=function(){function UIGridTemplateService(){this.$http=SharedInjectorService.instance().$http(),this.$templateCache=SharedInjectorService.instance().$templateCache(),this.initializeTemplates()}return UIGridTemplateService.instance=function(){return AngularUtil.getADInjector().get("uiGridTemplatesService")},UIGridTemplateService.prototype.initializeTemplates=function(){var _this=this;_.forEach(UIGridTemplateService.TEMPLATES,function(template){_this.$http.get(template,{cache:_this.$templateCache})})},UIGridTemplateService.getCellTemplateFromType=function(fieldType){var type=fieldType?fieldType.toString().toUpperCase():null;switch(type){case FieldType.DATE:return UIGridTemplateService.DATE_CELL;case FieldType.INTEGER:return UIGridTemplateService.NUMBER_CELL;case FieldType.FLOAT:case FieldType.DOUBLE:case FieldType.LONG:return UIGridTemplateService.FLOAT_CELL;case FieldType.BOOLEAN:case FieldType.STRING:case FieldType.OBJECT:default:return UIGridTemplateService.TEXT_CELL}},UIGridTemplateService.getHeaderCellClassForField=function(field){if(!field)return"";var fieldDef=field.fieldDefinition;if(fieldDef){var fieldName=_.last(fieldDef.fieldName.split("."));if(fieldName==AnalyticsField.requestExperience)return"centerAlign";var type=fieldDef.fieldType?fieldDef.fieldType.toString().toUpperCase():null;switch(type){case FieldType.DOUBLE:case FieldType.FLOAT:case FieldType.INTEGER:case FieldType.LONG:return"rightAlign";case FieldType.DATE:case FieldType.BOOLEAN:case FieldType.STRING:case FieldType.OBJECT:default:return"leftAlign"}}return""},UIGridTemplateService.TEMPLATES_PATH="app/view/analytics/adql/common/uiGrid/templates/",UIGridTemplateService.PAGINATION_TEMPLATE=UIGridTemplateService.TEMPLATES_PATH+"uiGridPaginationTemplate.html",UIGridTemplateService.ROW_TEMPLATE=UIGridTemplateService.TEMPLATES_PATH+"uiGridRowTemplate.html",UIGridTemplateService.EXPANDABLE_ROW_TEMPLATE=UIGridTemplateService.TEMPLATES_PATH+"uiGridExpandableRowTemplate.html",UIGridTemplateService.DATE_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridDateCell.html",UIGridTemplateService.TEXT_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridTextCell.html",UIGridTemplateService.LARGE_TEXT_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridLargeTextCell.html",UIGridTemplateService.NUMBER_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridNumberCell.html",UIGridTemplateService.FLOAT_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridFloatCell.html",UIGridTemplateService.USER_EXPERIENCE_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridUserExperienceCell.html",UIGridTemplateService.EUM_PAGE_TYPE_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridEumPageTypeCell.html",UIGridTemplateService.EUM_BROWSER_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridEumBrowserCell.html",UIGridTemplateService.PILL_DATA_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridPillDataCell.html",UIGridTemplateService.HIGHLIGHT_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridHighlightCell.html",UIGridTemplateService.QUERY_CHECKBOX_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridQueryCheckboxCell.html",UIGridTemplateService.PUBLISH_CHECKBOX_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridPublishCheckboxCell.html",UIGridTemplateService.VISIBLE_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridVisibleCell.html",UIGridTemplateService.VISIBLE_HEADER_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridVisibleHeaderCell.html",UIGridTemplateService.SUFFIX_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridSuffixCell.html",UIGridTemplateService.SUBSTRING_AFTER_LAST_DOT_CELL=UIGridTemplateService.TEMPLATES_PATH+"uiGridSubstringAfterLastDotCell.html",UIGridTemplateService.TEMPLATES=[UIGridTemplateService.PAGINATION_TEMPLATE,UIGridTemplateService.ROW_TEMPLATE,UIGridTemplateService.EXPANDABLE_ROW_TEMPLATE,UIGridTemplateService.DATE_CELL,UIGridTemplateService.TEXT_CELL,UIGridTemplateService.LARGE_TEXT_CELL,UIGridTemplateService.NUMBER_CELL,UIGridTemplateService.FLOAT_CELL,UIGridTemplateService.USER_EXPERIENCE_CELL,UIGridTemplateService.EUM_PAGE_TYPE_CELL,UIGridTemplateService.EUM_BROWSER_CELL,UIGridTemplateService.PILL_DATA_CELL,UIGridTemplateService.HIGHLIGHT_CELL,UIGridTemplateService.QUERY_CHECKBOX_CELL,UIGridTemplateService.PUBLISH_CHECKBOX_CELL,UIGridTemplateService.HIGHLIGHT_CELL,UIGridTemplateService.VISIBLE_CELL,UIGridTemplateService.VISIBLE_HEADER_CELL,UIGridTemplateService.SUFFIX_CELL,UIGridTemplateService.SUBSTRING_AFTER_LAST_DOT_CELL],UIGridTemplateService
}();appdynamicsModule.service("uiGridTemplatesService",UIGridTemplateService),define("app/view/analytics/adql/common/uiGrid/uiGridTemplateService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsDashboardUiService=function(_super){function AnalyticsDashboardUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsDashboardUiService,_super),AnalyticsDashboardUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsDashboardUiService")},AnalyticsDashboardUiService.prototype.getAllAnalyticsDashboards=function(){var path="restui/analyticsDashboards/getAllAnalyticsDashboards",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDashboardUiService","getAllAnalyticsDashboards",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn","modifiedOn"]),response})},AnalyticsDashboardUiService.prototype.getAllAnalyticsDashboards_response=function(response){return response},AnalyticsDashboardUiService.prototype.updateAnalyticsDashboard=function(arg0){var path="restui/analyticsDashboards/updateAnalyticsDashboard",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDashboardUiService","updateAnalyticsDashboard",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn","modifiedOn"]),response})},AnalyticsDashboardUiService.prototype.updateAnalyticsDashboard_response=function(response){return response},AnalyticsDashboardUiService.prototype.deleteDashboard=function(dashboardId){var path="restui/analyticsDashboards/deleteAnalyticsDashboard/"+dashboardId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDashboardUiService","deleteDashboard",path,[dashboardId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsDashboardUiService.prototype.cloneDashboard=function(dashboardId){var path="restui/analyticsDashboards/cloneAnalyticsDashboard/"+dashboardId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDashboardUiService","cloneDashboard",path,[dashboardId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn","modifiedOn"]),response})},AnalyticsDashboardUiService.prototype.cloneDashboard_response=function(response){return response},AnalyticsDashboardUiService.prototype.getAnalyticsDashboardById=function(dashboardId){var path="restui/analyticsDashboards/getAnalyticsDashboardById/"+dashboardId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDashboardUiService","getAnalyticsDashboardById",path,[dashboardId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn","modifiedOn"]),response})},AnalyticsDashboardUiService.prototype.getAnalyticsDashboardById_response=function(response){return response},AnalyticsDashboardUiService.prototype.getAllAnalyticsDashboardNames=function(){var path="restui/analyticsDashboards/getAllAnalyticsDashboardNames",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDashboardUiService","getAllAnalyticsDashboardNames",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsDashboardUiService.prototype.getAllAnalyticsDashboardNames_response=function(response){return response},AnalyticsDashboardUiService.prototype.createAnalyticsDashboard=function(arg0){var path="restui/analyticsDashboards/createAnalyticsDashboard",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDashboardUiService","createAnalyticsDashboard",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["createdOn","modifiedOn"]),response})},AnalyticsDashboardUiService.prototype.createAnalyticsDashboard_response=function(response){return response},AnalyticsDashboardUiService.prototype.describe=function(){var path="restui/analyticsDashboards/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDashboardUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsDashboardUiService.prototype.describe_response=function(response){return response},AnalyticsDashboardUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsDashboardUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsDashboardUiService",AnalyticsDashboardUiService),define("lib/controller/services/analytics/AnalyticsDashboardUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsSavedSearchUiService=function(_super){function AnalyticsSavedSearchUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsSavedSearchUiService,_super),AnalyticsSavedSearchUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsSavedSearchUiService")},AnalyticsSavedSearchUiService.prototype.getAllSavedSearches=function(){var path="restui/analyticsSavedSearches/getAllAnalyticsSavedSearches",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSavedSearchUiService","getAllSavedSearches",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["timeRangeSpecifier.timeRange.endTime","timeRangeSpecifier.timeRange.startTime","timeRangeSpecifier.endTime","timeRangeSpecifier.startTime","createdOn","modifiedOn"]),response})},AnalyticsSavedSearchUiService.prototype.getAllSavedSearches_response=function(response){return response},AnalyticsSavedSearchUiService.prototype.createAnalyticsSavedSearch=function(arg0){var path="restui/analyticsSavedSearches/createAnalyticsSavedSearch",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSavedSearchUiService","createAnalyticsSavedSearch",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["timeRangeSpecifier.timeRange.endTime","timeRangeSpecifier.timeRange.startTime","timeRangeSpecifier.endTime","timeRangeSpecifier.startTime","createdOn","modifiedOn"]),response})},AnalyticsSavedSearchUiService.prototype.createAnalyticsSavedSearch_response=function(response){return response},AnalyticsSavedSearchUiService.prototype.createAnalyticsSavedSearches=function(arg0){var path="restui/analyticsSavedSearches/createAnalyticsSavedSearches",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSavedSearchUiService","createAnalyticsSavedSearches",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["timeRangeSpecifier.timeRange.endTime","timeRangeSpecifier.timeRange.startTime","timeRangeSpecifier.endTime","timeRangeSpecifier.startTime","createdOn","modifiedOn"]),response})},AnalyticsSavedSearchUiService.prototype.createAnalyticsSavedSearches_response=function(response){return response},AnalyticsSavedSearchUiService.prototype.updateAnalyticsSavedSearch=function(arg0){var path="restui/analyticsSavedSearches/updateAnalyticsSavedSearch",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSavedSearchUiService","updateAnalyticsSavedSearch",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["timeRangeSpecifier.timeRange.endTime","timeRangeSpecifier.timeRange.startTime","timeRangeSpecifier.endTime","timeRangeSpecifier.startTime","createdOn","modifiedOn"]),response})},AnalyticsSavedSearchUiService.prototype.updateAnalyticsSavedSearch_response=function(response){return response},AnalyticsSavedSearchUiService.prototype.deleteSavedSearch=function(savedSearchId){var path="restui/analyticsSavedSearches/deleteAnalyticsSavedSearch/"+savedSearchId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSavedSearchUiService","deleteSavedSearch",path,[savedSearchId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSavedSearchUiService.prototype.deleteSavedSearches=function(arg0){var path="restui/analyticsSavedSearches/deleteAnalyticsSavedSearches",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSavedSearchUiService","deleteSavedSearches",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSavedSearchUiService.prototype.cloneSavedSearch=function(savedSearchId){var path="restui/analyticsSavedSearches/cloneAnalyticsSavedSearch/"+savedSearchId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSavedSearchUiService","cloneSavedSearch",path,[savedSearchId]),apiCall.httpMethod="POST");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["timeRangeSpecifier.timeRange.endTime","timeRangeSpecifier.timeRange.startTime","timeRangeSpecifier.endTime","timeRangeSpecifier.startTime","createdOn","modifiedOn"]),response})},AnalyticsSavedSearchUiService.prototype.cloneSavedSearch_response=function(response){return response},AnalyticsSavedSearchUiService.prototype.getAnalyticsSavedSearchById=function(savedSearchId){var path="restui/analyticsSavedSearches/getAnalyticsSavedSearchById/"+savedSearchId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSavedSearchUiService","getAnalyticsSavedSearchById",path,[savedSearchId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["timeRangeSpecifier.timeRange.endTime","timeRangeSpecifier.timeRange.startTime","timeRangeSpecifier.endTime","timeRangeSpecifier.startTime","createdOn","modifiedOn"]),response})},AnalyticsSavedSearchUiService.prototype.getAnalyticsSavedSearchById_response=function(response){return response},AnalyticsSavedSearchUiService.prototype.getAllAnalyticsSavedSearchNames=function(){var path="restui/analyticsSavedSearches/getAllAnalyticsSavedSearchNames",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSavedSearchUiService","getAllAnalyticsSavedSearchNames",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSavedSearchUiService.prototype.getAllAnalyticsSavedSearchNames_response=function(response){return response},AnalyticsSavedSearchUiService.prototype.describe=function(){var path="restui/analyticsSavedSearches/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSavedSearchUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSavedSearchUiService.prototype.describe_response=function(response){return response},AnalyticsSavedSearchUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsSavedSearchUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsSavedSearchUiService",AnalyticsSavedSearchUiService),define("lib/controller/services/analytics/AnalyticsSavedSearchUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsSearchUiService=function(_super){function AnalyticsSearchUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsSearchUiService,_super),AnalyticsSearchUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsSearchUiService")},AnalyticsSearchUiService.prototype.getQuery=function(indexType,query){void 0===indexType&&(indexType="log"),void 0===query&&(query="*");var path="restui/analytics/search/"+indexType+"?query="+query,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSearchUiService","getQuery",path,[indexType,query]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSearchUiService.prototype.getQuery_response=function(response){return response},AnalyticsSearchUiService.prototype.getQueryNoException=function(indexType,query){void 0===indexType&&(indexType="log"),void 0===query&&(query="*");var path="restui/analytics/searchNoException/"+indexType+"?query="+query,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSearchUiService","getQueryNoException",path,[indexType,query]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSearchUiService.prototype.getQueryNoException_response=function(response){return response},AnalyticsSearchUiService.prototype.postQuery=function(arg0,indexType){void 0===indexType&&(indexType="log");var path="restui/analytics/searchJson/"+indexType,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSearchUiService","postQuery",path,[arg0,indexType]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSearchUiService.prototype.postQuery_response=function(response){return response},AnalyticsSearchUiService.prototype.getSignificantTermGroups=function(indexType,query,enableBackgroundFilter){void 0===query&&(query="*"),void 0===enableBackgroundFilter&&(enableBackgroundFilter="true");var path="restui/analytics/getSignificantTermGroups?indexType="+indexType+"&query="+query+"&enableBackgroundFilter="+enableBackgroundFilter,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSearchUiService","getSignificantTermGroups",path,[indexType,query,enableBackgroundFilter]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSearchUiService.prototype.getSignificantTermGroups_response=function(response){return response},AnalyticsSearchUiService.prototype.describe=function(){var path="restui/analytics/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSearchUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSearchUiService.prototype.describe_response=function(response){return response},AnalyticsSearchUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsSearchUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsSearchUiService",AnalyticsSearchUiService),define("lib/controller/services/analytics/AnalyticsSearchUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsQueryUiService=function(_super){function AnalyticsQueryUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsQueryUiService,_super),AnalyticsQueryUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsQueryUiService")},AnalyticsQueryUiService.prototype.queryEvents=function(arg0,start,end,limit,others,emptyOnError,token,warRoomToken){void 0===start&&(start=""),void 0===end&&(end=""),void 0===limit&&(limit=""),void 0===others&&(others="false"),void 0===emptyOnError&&(emptyOnError="false"),void 0===token&&(token=""),void 0===warRoomToken&&(warRoomToken="");var path="restui/analytics/query?start="+start+"&end="+end+"&limit="+limit+"&others="+others+"&emptyOnError="+emptyOnError+"&token="+token+"&warRoomToken="+warRoomToken,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsQueryUiService","queryEvents",path,[arg0,start,end,limit,others,emptyOnError,token,warRoomToken]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsQueryUiService.prototype.queryEvents_response=function(response){return response},AnalyticsQueryUiService.prototype.describe=function(){var path="restui/analytics/query/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsQueryUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsQueryUiService.prototype.describe_response=function(response){return response},AnalyticsQueryUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsQueryUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsQueryUiService",AnalyticsQueryUiService),define("lib/controller/services/analytics/AnalyticsQueryUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsMetricUiService=function(_super){function AnalyticsMetricUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsMetricUiService,_super),AnalyticsMetricUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsMetricUiService")},AnalyticsMetricUiService.prototype.createAnalyticsMetric=function(arg0){var path="restui/analyticsMetric/create",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetricUiService","createAnalyticsMetric",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetricUiService.prototype.updateAnalyticsMetric=function(arg0){var path="restui/analyticsMetric/update",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetricUiService","updateAnalyticsMetric",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetricUiService.prototype.updateAnalyticsMetric_response=function(response){return response},AnalyticsMetricUiService.prototype.getAllAnalyticsMetrics=function(){var path="restui/analyticsMetric/getAnalyticsScheduledQueryReports",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetricUiService","getAllAnalyticsMetrics",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetricUiService.prototype.getAllAnalyticsMetrics_response=function(response){return response},AnalyticsMetricUiService.prototype.deleteAnalyticsMetric=function(arg0){var path="restui/analyticsMetric/delete",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetricUiService","deleteAnalyticsMetric",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetricUiService.prototype.getAnalyticsAppId=function(){var path="restui/analyticsMetric/getAnalyticsAppId",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetricUiService","getAnalyticsAppId",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetricUiService.prototype.getAnalyticsAppId_response=function(response){return response},AnalyticsMetricUiService.prototype.getAnalyticsTierId=function(){var path="restui/analyticsMetric/getAnalyticsTierId",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetricUiService","getAnalyticsTierId",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetricUiService.prototype.getAnalyticsTierId_response=function(response){return response},AnalyticsMetricUiService.prototype.describe=function(){var path="restui/analyticsMetric/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetricUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetricUiService.prototype.describe_response=function(response){return response},AnalyticsMetricUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsMetricUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsMetricUiService",AnalyticsMetricUiService),define("lib/controller/services/analytics/AnalyticsMetricUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsMetaDataUiService=function(_super){function AnalyticsMetaDataUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsMetaDataUiService,_super),AnalyticsMetaDataUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsMetaDataUiService")},AnalyticsMetaDataUiService.prototype.getStoreMetaData=function(indexType,docType){var path="restui/analytics/v1/store/metadata/indices/"+indexType+"/doctypes/"+docType+"/fields",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","getStoreMetaData",path,[indexType,docType]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetaDataUiService.prototype.getStoreMetaData_response=function(response){return response},AnalyticsMetaDataUiService.prototype.getStoreMetaDataForAllDocTypes=function(indexType){var path="restui/analytics/v1/store/metadata/indices/"+indexType+"/doctypes/fields",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","getStoreMetaDataForAllDocTypes",path,[indexType]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetaDataUiService.prototype.getStoreMetaDataForAllDocTypes_response=function(response){return response},AnalyticsMetaDataUiService.prototype.getBTFieldDefinitions=function(eventType,token){void 0===token&&(token="");var path="restui/analytics/v1/store/metadata/getBTFieldDefinitions?eventType="+eventType+"&token="+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","getBTFieldDefinitions",path,[eventType,token]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetaDataUiService.prototype.getBTFieldDefinitions_response=function(response){return response},AnalyticsMetaDataUiService.prototype.getLogFieldDefinitions=function(token){void 0===token&&(token="");var path="restui/analytics/v1/store/metadata/getLogFieldDefinitions?token="+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","getLogFieldDefinitions",path,[token]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise
},AnalyticsMetaDataUiService.prototype.getLogFieldDefinitions_response=function(response){return response},AnalyticsMetaDataUiService.prototype.isRequestGUIDFieldExtractedInLogs=function(){var path="restui/analytics/v1/store/metadata/isRequestGUIDFieldExtractedInLogs",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","isRequestGUIDFieldExtractedInLogs",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetaDataUiService.prototype.isRequestGUIDFieldExtractedInLogs_response=function(response){return response},AnalyticsMetaDataUiService.prototype.anyEventsExistForRequestGUID=function(indexType,requestGuid,start,end){void 0===start&&(start=""),void 0===end&&(end="");var path="restui/analytics/v1/store/metadata/anyEventsExistForRequestGUID?indexType="+indexType+"&requestGuid="+requestGuid+"&start="+start+"&end="+end,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","anyEventsExistForRequestGUID",path,[indexType,requestGuid,start,end]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetaDataUiService.prototype.anyEventsExistForRequestGUID_response=function(response){return response},AnalyticsMetaDataUiService.prototype.getBrowserFieldDefinitions=function(eventType,token){void 0===token&&(token="");var path="restui/analytics/v1/store/metadata/getBrowserRecordFieldDefinitions?eventType="+eventType+"&token="+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","getBrowserFieldDefinitions",path,[eventType,token]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetaDataUiService.prototype.getBrowserFieldDefinitions_response=function(response){return response},AnalyticsMetaDataUiService.prototype.getWebSessionFieldDefinitions=function(eventType,token){void 0===token&&(token="");var path="restui/analytics/v1/store/metadata/getWebSessionRecordFieldDefinitions?eventType="+eventType+"&token="+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","getWebSessionFieldDefinitions",path,[eventType,token]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetaDataUiService.prototype.getWebSessionFieldDefinitions_response=function(response){return response},AnalyticsMetaDataUiService.prototype.getSyntheticJobFieldDefinitions=function(eventType,token){void 0===token&&(token="");var path="restui/analytics/v1/store/metadata/getSyntheticJobFieldDefinitions?eventType="+eventType+"&token="+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","getSyntheticJobFieldDefinitions",path,[eventType,token]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetaDataUiService.prototype.getSyntheticJobFieldDefinitions_response=function(response){return response},AnalyticsMetaDataUiService.prototype.getMobileSessionRecordFieldDefinitions=function(eventType,token){void 0===token&&(token="");var path="restui/analytics/v1/store/metadata/getMobileSessionRecordFieldDefinitions?eventType="+eventType+"&token="+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","getMobileSessionRecordFieldDefinitions",path,[eventType,token]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetaDataUiService.prototype.getMobileSessionRecordFieldDefinitions_response=function(response){return response},AnalyticsMetaDataUiService.prototype.getMobileNetworkRequestFieldDefinitions=function(eventType,token){void 0===token&&(token="");var path="restui/analytics/v1/store/metadata/getMobileNetworkRequestFieldDefinitions?eventType="+eventType+"&token="+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","getMobileNetworkRequestFieldDefinitions",path,[eventType,token]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetaDataUiService.prototype.getMobileNetworkRequestFieldDefinitions_response=function(response){return response},AnalyticsMetaDataUiService.prototype.getMobileCrashReportFieldDefinitions=function(eventType,token){void 0===token&&(token="");var path="restui/analytics/v1/store/metadata/getMobileCrashReportFieldDefinitions?eventType="+eventType+"&token="+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","getMobileCrashReportFieldDefinitions",path,[eventType,token]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetaDataUiService.prototype.getMobileCrashReportFieldDefinitions_response=function(response){return response},AnalyticsMetaDataUiService.prototype.describe=function(){var path="restui/analytics/v1/store/metadata/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetaDataUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetaDataUiService.prototype.describe_response=function(response){return response},AnalyticsMetaDataUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsMetaDataUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsMetaDataUiService",AnalyticsMetaDataUiService),define("lib/controller/services/analytics/AnalyticsMetaDataUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsHiddenFieldsUiService=function(_super){function AnalyticsHiddenFieldsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsHiddenFieldsUiService,_super),AnalyticsHiddenFieldsUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsHiddenFieldsUiService")},AnalyticsHiddenFieldsUiService.prototype.hideField=function(eventType,fieldName){var path="restui/analytics/hidden-fields/hide?event-type="+eventType+"&field-name="+fieldName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsHiddenFieldsUiService","hideField",path,[eventType,fieldName]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsHiddenFieldsUiService.prototype.unhideField=function(eventType,fieldName){var path="restui/analytics/hidden-fields/unhide?event-type="+eventType+"&field-name="+fieldName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsHiddenFieldsUiService","unhideField",path,[eventType,fieldName]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsHiddenFieldsUiService.prototype.describe=function(){var path="restui/analytics/hidden-fields/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsHiddenFieldsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsHiddenFieldsUiService.prototype.describe_response=function(response){return response},AnalyticsHiddenFieldsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsHiddenFieldsUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsHiddenFieldsUiService",AnalyticsHiddenFieldsUiService),define("lib/controller/services/analytics/AnalyticsHiddenFieldsUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsSchemaUiService=function(_super){function AnalyticsSchemaUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsSchemaUiService,_super),AnalyticsSchemaUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsSchemaUiService")},AnalyticsSchemaUiService.prototype.createEventSchema=function(arg0,schemaName){void 0===schemaName&&(schemaName="");var path="restui/analytics/schema/create/"+schemaName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSchemaUiService","createEventSchema",path,[arg0,schemaName]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSchemaUiService.prototype.getEventSchema=function(schemaName){void 0===schemaName&&(schemaName="");var path="restui/analytics/schema/get/"+schemaName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSchemaUiService","getEventSchema",path,[schemaName]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSchemaUiService.prototype.getEventSchema_response=function(response){return response},AnalyticsSchemaUiService.prototype.getAllEventSchemaNames=function(){var path="restui/analytics/schema",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSchemaUiService","getAllEventSchemaNames",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSchemaUiService.prototype.getAllEventSchemaNames_response=function(response){return response},AnalyticsSchemaUiService.prototype.updateEventSchema=function(arg0,schemaName){void 0===schemaName&&(schemaName="");var path="restui/analytics/schema/update/"+schemaName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSchemaUiService","updateEventSchema",path,[arg0,schemaName]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSchemaUiService.prototype.updateEventSchema_response=function(response){return response},AnalyticsSchemaUiService.prototype.deleteEventSchema=function(schemaName){void 0===schemaName&&(schemaName="");var path="restui/analytics/schema/delete/"+schemaName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSchemaUiService","deleteEventSchema",path,[schemaName]),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSchemaUiService.prototype.describe=function(){var path="restui/analytics/schema/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsSchemaUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsSchemaUiService.prototype.describe_response=function(response){return response},AnalyticsSchemaUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsSchemaUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsSchemaUiService",AnalyticsSchemaUiService),define("lib/controller/services/analytics/AnalyticsSchemaUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsApiKeyGenUiService=function(_super){function AnalyticsApiKeyGenUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsApiKeyGenUiService,_super),AnalyticsApiKeyGenUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsApiKeyGenUiService")},AnalyticsApiKeyGenUiService.prototype.delete=function(arg0){var path="restui/analyticsApiKeyGen/delete",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsApiKeyGenUiService","delete",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsApiKeyGenUiService.prototype.create=function(arg0){var path="restui/analyticsApiKeyGen/create",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsApiKeyGenUiService","create",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsApiKeyGenUiService.prototype.create_response=function(response){return response},AnalyticsApiKeyGenUiService.prototype.updateEnabledFlag=function(arg0){var path="restui/analyticsApiKeyGen/updateEnabledFlag",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsApiKeyGenUiService","updateEnabledFlag",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsApiKeyGenUiService.prototype.updateEnabledFlag_response=function(response){return response},AnalyticsApiKeyGenUiService.prototype.getApiKeyInfosForAccount=function(){var path="restui/analyticsApiKeyGen/listApiKeys",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsApiKeyGenUiService","getApiKeyInfosForAccount",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsApiKeyGenUiService.prototype.getApiKeyInfosForAccount_response=function(response){return response},AnalyticsApiKeyGenUiService.prototype.updateDescription=function(arg0){var path="restui/analyticsApiKeyGen/updateDescription",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsApiKeyGenUiService","updateDescription",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsApiKeyGenUiService.prototype.updateDescription_response=function(response){return response},AnalyticsApiKeyGenUiService.prototype.describe=function(){var path="restui/analyticsApiKeyGen/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsApiKeyGenUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsApiKeyGenUiService.prototype.describe_response=function(response){return response},AnalyticsApiKeyGenUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsApiKeyGenUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsApiKeyGenUiService",AnalyticsApiKeyGenUiService),define("lib/controller/services/analytics/AnalyticsApiKeyGenUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsExtractedFieldsUiService=function(_super){function AnalyticsExtractedFieldsUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsExtractedFieldsUiService,_super),AnalyticsExtractedFieldsUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsExtractedFieldsUiService")},AnalyticsExtractedFieldsUiService.prototype.updateExistingExtractedLogField=function(arg0){var path="restui/analytics/extracted-fields/log",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsExtractedFieldsUiService","updateExistingExtractedLogField",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="PUT");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"PUT"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsExtractedFieldsUiService.prototype.deleteExtractedLogField=function(extractedFieldName){var path="restui/analytics/extracted-fields/log/"+extractedFieldName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsExtractedFieldsUiService","deleteExtractedLogField",path,[extractedFieldName]),apiCall.httpMethod="DELETE");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"DELETE"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsExtractedFieldsUiService.prototype.validateExtractedLogField=function(arg0){var path="restui/analytics/extracted-fields/log/validate",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsExtractedFieldsUiService","validateExtractedLogField",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsExtractedFieldsUiService.prototype.highlightExtractedLogFields=function(arg0){var path="restui/analytics/extracted-fields/log/highlight",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsExtractedFieldsUiService","highlightExtractedLogFields",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsExtractedFieldsUiService.prototype.highlightExtractedLogFields_response=function(response){return response},AnalyticsExtractedFieldsUiService.prototype.inferRegex=function(arg0){var path="restui/analytics/extracted-fields/log/regex",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsExtractedFieldsUiService","inferRegex",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsExtractedFieldsUiService.prototype.inferRegex_response=function(response){return response},AnalyticsExtractedFieldsUiService.prototype.getExtractedLogField=function(extractedFieldName){var path="restui/analytics/extracted-fields/log/"+extractedFieldName,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsExtractedFieldsUiService","getExtractedLogField",path,[extractedFieldName]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsExtractedFieldsUiService.prototype.getExtractedLogField_response=function(response){return response},AnalyticsExtractedFieldsUiService.prototype.createNewExtractedLogField=function(arg0){var path="restui/analytics/extracted-fields/log",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsExtractedFieldsUiService","createNewExtractedLogField",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsExtractedFieldsUiService.prototype.createNewExtractedLogField_response=function(response){return response},AnalyticsExtractedFieldsUiService.prototype.getExtractedLogFields=function(arg0){var path="restui/analytics/extracted-fields/log/getAllExtractedFields",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsExtractedFieldsUiService","getExtractedLogFields",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsExtractedFieldsUiService.prototype.getExtractedLogFields_response=function(response){return response},AnalyticsExtractedFieldsUiService.prototype.describe=function(){var path="restui/analytics/extracted-fields/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsExtractedFieldsUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsExtractedFieldsUiService.prototype.describe_response=function(response){return response},AnalyticsExtractedFieldsUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsExtractedFieldsUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsExtractedFieldsUiService",AnalyticsExtractedFieldsUiService),define("lib/controller/services/analytics/AnalyticsExtractedFieldsUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsMetricCorrelationUiService=function(_super){function AnalyticsMetricCorrelationUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsMetricCorrelationUiService,_super),AnalyticsMetricCorrelationUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsMetricCorrelationUiService")},AnalyticsMetricCorrelationUiService.prototype.getMetricData=function(metricId,entityType,entityId,timeRangeString){var path="restui/analytics/metricCorrelation/metric?metricId="+metricId+"&entityType="+entityType+"&entityId="+entityId+"&timeRangeString="+timeRangeString,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetricCorrelationUiService","getMetricData",path,[metricId,entityType,entityId,timeRangeString]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["dataTimeslices.startTime"]),response})},AnalyticsMetricCorrelationUiService.prototype.getMetricData_response=function(response){return response},AnalyticsMetricCorrelationUiService.prototype.correlateMetrics=function(appId,timeRangeString,selectedMetricId){var path="restui/analytics/metricCorrelation/metrics?appId="+appId+"&timeRangeString="+timeRangeString+"&selectedMetricId="+selectedMetricId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetricCorrelationUiService","correlateMetrics",path,[appId,timeRangeString,selectedMetricId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetricCorrelationUiService.prototype.correlateMetrics_response=function(response){return response},AnalyticsMetricCorrelationUiService.prototype.getCorrelatedMetrics=function(guid){var path="restui/analytics/metricCorrelation/metrics/"+guid,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetricCorrelationUiService","getCorrelatedMetrics",path,[guid]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetricCorrelationUiService.prototype.getCorrelatedMetrics_response=function(response){return response},AnalyticsMetricCorrelationUiService.prototype.isMetricCorrelationEnabled=function(){var path="restui/analytics/metricCorrelation/enabled",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetricCorrelationUiService","isMetricCorrelationEnabled",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetricCorrelationUiService.prototype.isMetricCorrelationEnabled_response=function(response){return response},AnalyticsMetricCorrelationUiService.prototype.describe=function(){var path="restui/analytics/metricCorrelation/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsMetricCorrelationUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsMetricCorrelationUiService.prototype.describe_response=function(response){return response},AnalyticsMetricCorrelationUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsMetricCorrelationUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsMetricCorrelationUiService",AnalyticsMetricCorrelationUiService),define("lib/controller/services/analytics/AnalyticsMetricCorrelationUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},AnalyticsDataAccessHelperUiService=function(_super){function AnalyticsDataAccessHelperUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(AnalyticsDataAccessHelperUiService,_super),AnalyticsDataAccessHelperUiService.instance=function(){return AngularUtil.getADInjector().get("analyticsDataAccessHelperUiService")
},AnalyticsDataAccessHelperUiService.prototype.getAllowedApplications=function(fetchAllApplications,token){void 0===fetchAllApplications&&(fetchAllApplications=!1),void 0===token&&(token="");var path="restui/analyticsDataAccessHelper/getAllowedApplications?fetchAllApplications="+fetchAllApplications+"&token="+token,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDataAccessHelperUiService","getAllowedApplications",path,[fetchAllApplications,token]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsDataAccessHelperUiService.prototype.getAllowedApplications_response=function(response){return response},AnalyticsDataAccessHelperUiService.prototype.getAllowedSourceTypes=function(){var path="restui/analyticsDataAccessHelper/getAllowedSourceTypes",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDataAccessHelperUiService","getAllowedSourceTypes",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsDataAccessHelperUiService.prototype.getAllowedSourceTypes_response=function(response){return response},AnalyticsDataAccessHelperUiService.prototype.getAllowedAppKeysByEventType=function(eventType){var path="restui/analyticsDataAccessHelper/getAllowedAppKeysByEventType?eventType="+eventType,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDataAccessHelperUiService","getAllowedAppKeysByEventType",path,[eventType]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsDataAccessHelperUiService.prototype.getAllowedAppKeysByEventType_response=function(response){return response},AnalyticsDataAccessHelperUiService.prototype.getAllFieldValues=function(fieldFullPath,eventType){var path="restui/analyticsDataAccessHelper/getAllFieldValues?fieldFullPath="+fieldFullPath+"&eventType="+eventType,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDataAccessHelperUiService","getAllFieldValues",path,[fieldFullPath,eventType]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsDataAccessHelperUiService.prototype.getAllFieldValues_response=function(response){return response},AnalyticsDataAccessHelperUiService.prototype.describe=function(){var path="restui/analyticsDataAccessHelper/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("AnalyticsDataAccessHelperUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},AnalyticsDataAccessHelperUiService.prototype.describe_response=function(response){return response},AnalyticsDataAccessHelperUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],AnalyticsDataAccessHelperUiService}(ControllerUiServiceBase);adComponentsModule.service("analyticsDataAccessHelperUiService",AnalyticsDataAccessHelperUiService),define("lib/controller/services/analytics/AnalyticsDataAccessHelperUiService",function(){}),require(["app/view/analytics/AnalyticsMainViewControllerBase","app/view/analytics/metaData/AnalyticsField","app/view/analytics/metaData/AnalyticsFields"],function(){require(["app/view/analytics/services/AnalyticsViewService","app/view/analytics/scopeSelector/AnalyticsScopeSelectorDirective","app/view/analytics/scopeSelector/AnalyticsScopeSelectorController","app/view/analytics/AnalyticsD3WidgetHelper","app/view/analytics/widgets/AnalyticsWidgetHelper","app/view/analytics/searchFacade/AnalyticsSearchFacade","app/view/analytics/AnalyticsSearchResults","app/view/analytics/AnalyticsTransaction","app/view/analytics/AnalyticsSignificantField","app/view/analytics/metaData/MetaDataService","app/view/analytics/services/AnalyticsDashboardService","app/view/analytics/services/AnalyticsFilterService","app/view/analytics/services/AnalyticsQueryService","app/view/analytics/services/AnalyticsPersistenceService","app/view/analytics/services/AnalyticsSyntheticJobCache","app/view/analytics/dashboard/AnalyticsDashboardManager","app/view/analytics/services/Interval","app/view/analytics/services/TimeSeriesZeroFilled","app/view/analytics/metaData/fieldDefinition/FieldDefinitionRendererDirective","app/view/analytics/metaData/fieldDefinition/FieldDefinitionRendererController","app/view/analytics/eventDetailViewer/AnalyticsEventDetailDirective","app/view/analytics/eventDetailViewer/AnalyticsEventDetailController","app/view/analytics/widgets/histogram/AnalyticsHistogramDirectiveController","app/view/analytics/widgets/histogram/AnalyticsHistogramDirective","app/view/analytics/widgets/terms/AnalyticsTermsDirective","app/view/analytics/widgets/RangeAggregationBucketDefinition","app/view/analytics/widgets/common/container/AnalyticsWidgetContainerLegacy","app/view/analytics/widgets/predefined/common/dropdown/AnalyticsWidgetDropdown","app/view/analytics/widgets/predefined/common/toolbar/AnalyticsWidgetToolbarLegacy","app/view/analytics/widgets/predefined/common/overview/AnalyticsWidgetOverview","app/view/analytics/widgets/predefined/common/buttons/AnalyticsWidgetButtonBar","app/view/analytics/widgets/selector/AnalyticsWidgetSelector","app/view/analytics/searchPanel/AnalyticsQueryInputDirective","app/view/analytics/searchPanel/AnalyticsFacetBarDirective","app/view/analytics/AnalyticsUtils","app/view/analytics/metaData/MetaDataDefinition","app/view/analytics/queryBuilder/QueryBuilderDirective","app/view/analytics/queryBuilder/QueryBuilderController","app/view/analytics/chartBuilder/ChartBuilderDirective","app/view/analytics/chartBuilder/ChartBuilderController","app/view/analytics/adql/common/uiGrid/uiGrid","app/view/analytics/adql/common/AnalyticsGridRenderers","app/view/analytics/adql/common/uiGrid/uiGridTemplateService","lib/controller/services/analytics/AnalyticsDashboardUiService","lib/controller/services/analytics/AnalyticsSavedSearchUiService","lib/controller/services/analytics/AnalyticsSearchUiService","lib/controller/services/analytics/AnalyticsQueryUiService","lib/controller/services/analytics/AnalyticsMetricUiService","lib/controller/services/analytics/AnalyticsMetaDataUiService","lib/controller/services/analytics/AnalyticsHiddenFieldsUiService","lib/controller/services/analytics/AnalyticsSchemaUiService","lib/controller/services/analytics/AnalyticsApiKeyGenUiService","lib/controller/services/analytics/AnalyticsExtractedFieldsUiService","lib/controller/services/analytics/AnalyticsMetricCorrelationUiService","lib/controller/services/analytics/AnalyticsMetricUiService","lib/controller/services/analytics/AnalyticsDataAccessHelperUiService"])}),define("app/view/analytics/AnalyticsModuleCode",function(){}),define("app/view/common/notificationcenter/NotificationCenterPollingService",["require","exports"],function(){var NotificationCenterPollingService=function(){function NotificationCenterPollingService($timeout,$q,timeRangeService,systemNotificationUiService){this.$timeout=$timeout,this.$q=$q,this.timeRangeService=timeRangeService,this.systemNotificationUiService=systemNotificationUiService,this.LAST_24_HRS=DateTimeUtil.MINUTES_PER_DAY,this.LAST_15_MINS=15,this.POLL_INTERVAL=5*DateTimeUtil.MILLISEC_PER_MIN}return NotificationCenterPollingService.prototype.initPolling=function(appId,successHandler,errHandler){var _this=this;this.appId=appId,this.duration=this.LAST_24_HRS,this.timeoutId=this.$timeout(function(){_this.pollFn()},0),this.successHandler=successHandler,this.errHandler=errHandler},NotificationCenterPollingService.prototype.pollFn=function(){var _this=this;if(MasterService.ENABLE_NOTIFICATIONS_POLLING){var timeRangeSpecifier=this.timeRangeService.getTimeRangeSpecifier(this.duration,-1,-1),promise=this.systemNotificationUiService.getSystemNotificationListViewData(this.timeRangeService.convertToPreferenceString(timeRangeSpecifier,"."));promise.then(function(response){var data=_this.systemNotificationUiService.getSystemNotificationListViewData_response(response);_this.successHandler(data)},function(err){return _this.stopPolling(),_this.errHandler(err),_this.$q.reject(err)}).then(function(){_this.duration=_this.LAST_15_MINS,_this.timeoutId=_this.$timeout(function(){_this.pollFn()},_this.POLL_INTERVAL)})}},NotificationCenterPollingService.prototype.stopPolling=function(){this.timeoutId&&this.$timeout.cancel(this.timeoutId)},NotificationCenterPollingService.$inject=["$timeout","$q","timeRangeService","systemNotificationUiService"],NotificationCenterPollingService}();return appdynamicsModule.service("notificationCenterPollingService",NotificationCenterPollingService),NotificationCenterPollingService});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/notificationcenter/card/NotificationCenterCardListController",["require","exports"],function(require,exports){var NotificationCenterCardListController=function(_super){function NotificationCenterCardListController($scope,resourceManager,notificationService,injectorService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,$scope.controller=this}return __extends(NotificationCenterCardListController,_super),NotificationCenterCardListController.$inject=["$scope","resourceManager","notificationService","injectorService"],NotificationCenterCardListController}(ControllerBase);exports.NotificationCenterCardListController=NotificationCenterCardListController,appdynamicsModule.controller("NotificationCenterCardListController",NotificationCenterCardListController)}),define("app/view/common/notificationcenter/card/NotificationCenterCardListDirective",["require","exports","./NotificationCenterCardListController"],function(require,exports,mod){var NotificationCenterCardListDirective=function(){function NotificationCenterCardListDirective(){return{restrict:"E",scope:{adNotifications:"="},template:'<div vs-repeat="136" style="overflow-x:hidden; height:100%;"><div ng-repeat="notification in adNotifications | SortBy : \'notificationData.time\' : false"><ad-notification-center-card ad-notification="notification"></ad-notification-center-card></div></div>',controller:mod.NotificationCenterCardListController,link:function(){}}}return NotificationCenterCardListDirective}();return appdynamicsModule.directive(StringUtils.toCamelCase("ad-notification-center-list"),NotificationCenterCardListDirective),NotificationCenterCardListDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/notificationcenter/card/NotificationCenterCardController",["require","exports","./NotificationCenterCardListDirective"],function(require,exports,NotificationCenterCardListDirective){var NotificationCenterCardController=function(_super){function NotificationCenterCardController($scope,resourceManager,notificationService,injectorService,applicationViewService,nodeViewService,componentViewService,notificationCenterService,businessTransactionViewService,backendDashboardViewService,serviceEndpointListViewService,flashService,navigationHistoryService,masterService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.applicationViewService=applicationViewService,this.nodeViewService=nodeViewService,this.componentViewService=componentViewService,this.notificationCenterService=notificationCenterService,this.businessTransactionViewService=businessTransactionViewService,this.backendDashboardViewService=backendDashboardViewService,this.serviceEndpointListViewService=serviceEndpointListViewService,this.flashService=flashService,this.navigationHistoryService=navigationHistoryService,this.masterService=masterService,this.actions=[],$scope.controller=this,this.initDirective()}return __extends(NotificationCenterCardController,_super),NotificationCenterCardController.prototype.initDirective=function(){var _this=this,data=this.$scope.adNotification.notificationData;switch(this.$scope.adNotification.notificationType){case SystemNotificationType.SYSTEM_EVENT:this.displayTitle="Account Event",this.actions=[{name:this.getString("ms_viewEventDetails"),onClick:function(){_this.markAsRead().then(function(){_this.notificationCenterService.hidePanel(),_this.flashService.viewEventDetailsModalByIdFromHTML(-1,data.id)})}}];break;case SystemNotificationType.EVENT:this.initEvent(data);break;default:this.displayTitle="Unknown Event",this.displayText="Unknown Event",this.actions=[]}this.displayText=this.$scope.adNotification.notificationData.summary,this.displayText=this.displayText.length>64?this.displayText.slice(0,64)+"...":this.displayText,this.displayTitle=this.displayTitle.length>30?this.displayTitle.slice(0,30)+"...":this.displayTitle,this.displayTimeStamp=DateTimeUtil.getDateTimeString(this.$scope.adNotification.notificationData.time,2)},NotificationCenterCardController.prototype.initEvent=function(data){var _this=this;switch(data.eventType){case EventType.APPLICATION_DISCOVERED:this.displayTitle=this.$scope.adNotification.notificationData.applicationName,this.actions=[{name:"View Application Dashboard",onClick:function(){_this.markAsRead().then(function(){_this.notificationCenterService.hidePanel(),_this.applicationViewService.viewApplicationDashboard(data.applicationId)})}}];break;case EventType.TIER_DISCOVERED:this.displayTitle=this.$scope.adNotification.notificationData.applicationName,this.actions=[{name:"View Tier Dashboard",onClick:function(){_this.markAsRead().then(function(){_this.notificationCenterService.hidePanel(),_this.componentViewService.viewComponent(data.applicationId,data.applicationComponentId)})}}];break;case EventType.NODE_DISCOVERED:this.displayTitle=this.$scope.adNotification.notificationData.applicationName,this.actions=[{name:"View Node Dashboard",onClick:function(){_this.markAsRead().then(function(){_this.notificationCenterService.hidePanel(),_this.nodeViewService.viewNode(data.applicationId,data.applicationComponentNodeId)})}}];break;case EventType.MACHINE_DISCOVERED:this.displayTitle=this.$scope.adNotification.notificationData.applicationName,this.actions=[];break;case EventType.BT_DISCOVERED:this.displayTitle=this.$scope.adNotification.notificationData.applicationName,this.actions=[{name:"View Business Transactions",onClick:function(){_this.markAsRead().then(function(){_this.notificationCenterService.hidePanel(),_this.businessTransactionViewService.viewBusinessTransactionList(data.applicationId)})}}];break;case EventType.BACKEND_DISCOVERED:this.displayTitle=this.$scope.adNotification.notificationData.applicationName,this.actions=[{name:"View Backend Dashboard",onClick:function(){_this.markAsRead().then(function(){_this.notificationCenterService.hidePanel(),_this.backendDashboardViewService.viewBackendDashboard(data.applicationId,data.backEndId)})}}];break;case EventType.SERVICE_ENDPOINT_DISCOVERED:this.displayTitle=this.$scope.adNotification.notificationData.applicationName,this.actions=[{name:"View Service Endpoint Dashboard",onClick:function(){_this.markAsRead().then(function(){_this.notificationCenterService.hidePanel(),_this.serviceEndpointListViewService.viewServiceEndpointList(data.applicationId,data.applicationComponentId)})}}];break;default:this.displayTitle="Unknown Event",this.displayText="Unknown Event",this.actions=[]}},NotificationCenterCardController.prototype.markAsRead=function(){return this.notificationCenterService.markAsRead(this.$scope.adNotification)},NotificationCenterCardController.prototype.markAsReadAndRemove=function(){return this.notificationCenterService.markAsReadAndRemove(this.$scope.adNotification)},NotificationCenterCardController.$inject=["$scope","resourceManager","notificationService","injectorService","applicationViewService","nodeViewService","componentViewService","notificationCenterService","businessTransactionViewService","backendDashboardViewService","serviceEndpointListViewService","flashService","navigationHistoryService","masterService"],NotificationCenterCardController}(ControllerBase);exports.NotificationCenterCardController=NotificationCenterCardController,appdynamicsModule.controller("NotificationCenterCardController",NotificationCenterCardController)}),define("app/view/common/notificationcenter/card/NotificationCenterCardDirective",["require","exports","./NotificationCenterCardController"],function(require,exports,mod){var NotificationCenterCardDirective=function(){function NotificationCenterCardDirective(){return{restrict:"E",scope:{adNotification:"="},templateUrl:"app/view/common/notificationcenter/card/NotificationCenterCard.html",controller:mod.NotificationCenterCardController,link:function(){}}}return NotificationCenterCardDirective}();return appdynamicsModule.directive(StringUtils.toCamelCase("ad-notification-center-card"),NotificationCenterCardDirective),NotificationCenterCardDirective});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/common/notificationcenter/NotificationCenterController",["require","exports","./NotificationCenterPollingService","./card/NotificationCenterCardListDirective","./card/NotificationCenterCardDirective"],function(require,exports,NotificationCenterPollingService,NotificationCenterCardListDirective,NotificationCenterCardDirective){var NotificationCenterController=function(_super){function NotificationCenterController($scope,resourceManager,notificationService,injectorService,notificationCenterService,notificationCenterPollingService,masterService){_super.call(this,$scope,resourceManager,notificationService,injectorService),this.$scope=$scope,this.resourceManager=resourceManager,this.notificationService=notificationService,this.injectorService=injectorService,this.notificationCenterService=notificationCenterService,this.notificationCenterPollingService=notificationCenterPollingService,this.masterService=masterService,this.displayView="expanded",$scope.controller=this,this.appId=this.getApplicationIdFromUrl(),this.initListeners()}return __extends(NotificationCenterController,_super),NotificationCenterController.prototype.initListeners=function(){var _this=this;$(document).on(MouseEvents.MOUSE_DOWN,function(event){0===$(event.target).closest(".adsNotificationPanel").length&&(_this.onClosePanel(),ViewUtil.safeApply(_this.$scope))}),this.$scope.$on(MasterService.UEV_LOGOUT_EVENT,function(){_this.notificationCenterPollingService.stopPolling()});var listener=this.$scope.$on(MasterService.UEV_INIT_DATA_FETCHED,function(){_this.notificationCenterPollingService.initPolling(_this.appId,function(data){_this.notificationCenterService.prepareAndInsertNotifications(data)},function(err){ADLoggerService.error("Error getting polling notification events."+err)}),listener()})},NotificationCenterController.prototype.onClosePanel=function(){this.notificationCenterService.isNotificationCenterVisible=!1},NotificationCenterController.prototype.removeAllAndClose=function(){var _this=this;this.notificationCenterService.removeAll().then(function(){_this.onClosePanel()},function(err){ADLoggerService.error("Error clearing some notification events."+err)})},NotificationCenterController.$inject=["$scope","resourceManager","notificationService","injectorService","notificationCenterService","notificationCenterPollingService","masterService"],NotificationCenterController}(ControllerBase);exports.NotificationCenterController=NotificationCenterController,appdynamicsModule.controller("NotificationCenterController",NotificationCenterController)}),define("app/view/common/notificationcenter/NotificationCenterDirective",["require","exports","./NotificationCenterController"],function(require,exports,mod){var NotificationCenterDirective=function(){function NotificationCenterDirective(){return{restrict:"E",scope:{adIsEval:"="},templateUrl:"app/view/common/notificationcenter/NotificationCenter.html",controller:mod.NotificationCenterController,link:function(scope){var panelClickHandler=function(event){var currentTarget=event.currentTarget;$(currentTarget).hasClass("adsNotificationPanel")&&event.stopImmediatePropagation()},handler=function(event){var target=event.target;$(target).hasClass("adsNotificationCount")||scope.$apply(function(){scope.controller.notificationCenterService.hidePanel()})};scope.$watch("controller.notificationCenterService.isVisible",function(nv){"expanded"==scope.controller.displayView&&1==nv?($(document).on("click",handler),$(".adsNotificationPanel").on("click",panelClickHandler)):($(document).off("click",handler),$(".adsNotificationPanel").off("click",panelClickHandler))})}}}return NotificationCenterDirective}();appdynamicsModule.directive(StringUtils.toCamelCase("ad-notification-center"),NotificationCenterDirective)});var NotificationCenterService=function(){function NotificationCenterService(systemNotificationUiService,$q){this.systemNotificationUiService=systemNotificationUiService,this.$q=$q,this.isNotificationCenterVisible=!1,this.notificationsCount=0,this.notifications={},this.rollUpsMap={}}return NotificationCenterService.prototype.reset=function(){this.isNotificationCenterVisible=!1,this.notificationsCount=0},NotificationCenterService.prototype.upSertNotifications=function(newNotifications){var _this=this;angular.forEach(newNotifications,function(value){_this.notifications[value.internalId]||(_this.notifications[value.internalId]=value)}),this.updateCount()},NotificationCenterService.prototype.removeAll=function(){var _this=this,ids=[],deferred=this.$q.defer();return angular.forEach(this.notifications,function(item){item.read||(ids=ids.concat(_this.getRolledUpEntitiesIds(item)))}),this.systemNotificationUiService.setSystemEventNotificationRead(ids).then(function(){var deleteIds=[];for(var i in _this.notifications)deleteIds.push(_this.notifications[i].internalId);for(var k=0;k<deleteIds.length;k++)delete _this.notifications[deleteIds[k]];_this.updateCount(),deferred.resolve()},function(){deferred.reject()}),deferred.promise},NotificationCenterService.prototype.markAsRead=function(readNotification){var deferred=this.$q.defer(),ids=[];return readNotification.read?deferred.resolve():(ids=ids.concat(this.getRolledUpEntitiesIds(readNotification)),this.systemNotificationUiService.setSystemEventNotificationRead(ids).then(function(){readNotification.read=!0,deferred.resolve()})),deferred.promise},NotificationCenterService.prototype.markAsReadAndRemove=function(readNotification){var _this=this,deferred=this.$q.defer(),ids=[];return readNotification.read?(delete this.notifications[readNotification.internalId],this.updateCount(),deferred.resolve()):(ids=ids.concat(this.getRolledUpEntitiesIds(readNotification)),this.systemNotificationUiService.setSystemEventNotificationRead(ids).then(function(){delete _this.notifications[readNotification.internalId],_this.updateCount(),deferred.resolve()})),deferred.promise},NotificationCenterService.prototype.prepareAndInsertNotifications=function(data){this.upSertNotifications(this.performRollup(this.filterNotifications(data)))},NotificationCenterService.prototype.filterNotifications=function(data){var _this=this,filteredNotifications=[];if(data.notifications){var map={};angular.forEach(data.entityMap,function(value,key){map[key.split(",")[0].split(":")[1]+"-"+value.id]=value}),angular.forEach(data.notifications,function(value){if(value.internalId=value.notificationData.eventType+"-"+value.id,value.notificationData.applicationName="",_this.rollUpsMap[value.internalId]||filteredNotifications.push(value),value.notificationData.applicationId){var appId=value.notificationData.applicationId;value.notificationData.applicationName=map[_this.getInternalId(EntityType.APPLICATION,appId)]?map[_this.getInternalId(EntityType.APPLICATION,appId)].name:""}})}return filteredNotifications},NotificationCenterService.prototype.performRollup=function(notifications){var _this=this,newNotifications=[],tmpMap={},uniqueId=_.uniqueId();angular.forEach(notifications,function(notification){if(notification.notificationData.eventType==EventType.BT_DISCOVERED||notification.notificationData.eventType==EventType.SERVICE_ENDPOINT_DISCOVERED){var appId=notification.notificationData.applicationId,rollUpId="";switch(notification.notificationData.eventType){case EventType.BT_DISCOVERED:rollUpId=_this.getInternalId(EntityType.APPLICATION,appId)+"-"+EventType.BT_DISCOVERED+"-"+uniqueId;break;case EventType.SERVICE_ENDPOINT_DISCOVERED:rollUpId=_this.getInternalId(EntityType.APPLICATION,appId)+"-"+EventType.SERVICE_ENDPOINT_DISCOVERED+"-"+notification.notificationData.applicationComponentId+"-"+uniqueId}null==tmpMap[rollUpId]&&(tmpMap[rollUpId]=[]),tmpMap[rollUpId].push(notification),_this.rollUpsMap[notification.internalId]=rollUpId}else newNotifications.push(notification)});for(var i in tmpMap){var tmpNotification={id:0,state:"",notificationType:"",notificationData:{time:null,eventType:null,applicationId:null,applicationName:null,summary:null},isRolledUp:!1,internalId:"",rolledUpNotifications:null};tmpNotification.isRolledUp=!0,tmpNotification.internalId=i,tmpNotification.rolledUpNotifications=tmpMap[i],tmpNotification.rolledUpCount=tmpMap[i].length;var latestNotification=_.max(tmpNotification.rolledUpNotifications,function(k){return k.notificationData.time});switch(tmpNotification.notificationType=latestNotification.notificationType,tmpNotification.notificationData.time=latestNotification.notificationData.time,tmpNotification.notificationData.eventType=latestNotification.notificationData.eventType,tmpNotification.notificationData.applicationId=latestNotification.notificationData.applicationId,tmpNotification.notificationData.applicationName=latestNotification.notificationData.applicationName,tmpNotification.notificationData.eventType){case EventType.BT_DISCOVERED:tmpNotification.notificationData.summary="New Business Transactions discovered ("+tmpNotification.rolledUpCount+").";break;case EventType.SERVICE_ENDPOINT_DISCOVERED:tmpNotification.notificationData.summary="New Service End Points discovered ("+tmpNotification.rolledUpCount+").",tmpNotification.notificationData.applicationComponentId=latestNotification.notificationData.applicationComponentId}tmpNotification.notificationData.severity=Severity.INFO,newNotifications.push(tmpNotification)}return newNotifications},NotificationCenterService.prototype.getRolledUpEntitiesIds=function(notification){var ids=[];if(notification.isRolledUp)for(var k=0;k<notification.rolledUpNotifications.length;k++)ids.push(notification.rolledUpNotifications[k].id);else ids.push(notification.id);return ids},NotificationCenterService.prototype.getInternalId=function(type,id){var internalId=type+"-"+id;return internalId},NotificationCenterService.prototype.hidePanel=function(){this.isNotificationCenterVisible=!1},NotificationCenterService.prototype.showPanel=function(){this.isNotificationCenterVisible=!0},NotificationCenterService.prototype.togglePanel=function(){this.isNotificationCenterVisible=!this.isNotificationCenterVisible},NotificationCenterService.prototype.updateCount=function(){this.notificationsCount=_.size(this.notifications),this.notificationsCount||(this.isNotificationCenterVisible=!1)},NotificationCenterService.$inject=["systemNotificationUiService","$q"],NotificationCenterService}();appdynamicsModule.service("notificationCenterService",NotificationCenterService),define("app/view/common/notificationcenter/NotificationCenterService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},NetworkMonitoringViewService=function(_super){function NetworkMonitoringViewService(){var _this=this;if(_super.call(this,InjectorService.instance().$location(),NavigationService.instance(),NotificationService.instance(),InjectorService.instance().resourceManager()),this._isNpmEnabled=!1,MasterService.instance().initData)this._isNpmEnabled=MasterService.instance().initData.mainNavConfig.showNpm;else var removeListenerFunction=InjectorService.instance().$rootScope().$on(MasterService.UEV_INIT_DATA_FETCHED,function(){removeListenerFunction&&removeListenerFunction(),_this._isNpmEnabled=MasterService.instance().initData.mainNavConfig.showNpm})}return __extends(NetworkMonitoringViewService,_super),NetworkMonitoringViewService.instance=function(){return AngularUtil.getADInjector().get(NetworkMonitoringViewService.SERVICE_NAME)},NetworkMonitoringViewService.prototype.isNetworkMonitoringEnabled=function(){return this._isNpmEnabled},NetworkMonitoringViewService.prototype.viewNodeNetworkDashboard=function(applicationId,nodeId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_NETWORK_NODE_DASH),params.setNumberParam(UrlConstants.APPLICATION_ID,applicationId),params.setNumberParam(UrlConstants.NODE_ID,nodeId),this.navigationService.navigateTo(params.toString())},NetworkMonitoringViewService.prototype.viewApplicationNetworkDashboard=function(applicationId){this.viewApplicationLocation(NavigationDataConstants.APP_NETWORK_DASHBOARD,applicationId)},NetworkMonitoringViewService.prototype.isLocationAppNetworkDashboard=function(){var params=new URLParams;return params.location()===NavigationDataConstants.APP_NETWORK_DASHBOARD||params.location()===NavigationDataConstants.APP_NETWORK_COMPONENT_DASHBOARD||params.location()===NavigationDataConstants.APP_NETWORK_NODE_DASH?!0:!1},NetworkMonitoringViewService.prototype.goToNetworkElementHealthCustomDash=function(){var _this=this;DashboardService.instance().getAllDashboards().then(function(customDashboardArray){var lbHealthDashboard=_.findWhere(customDashboardArray,{name:NetworkMonitoringViewService.LB_HEALTH});_this._navigateToCustomDash(lbHealthDashboard?lbHealthDashboard.id.toString():"")})},NetworkMonitoringViewService.prototype.viewNpmApplicationDashboard=function(applicationId){ApplicationViewService.instance().viewApplicationDashboardLocation(NavigationDataConstants.APP_NETWORK_DASHBOARD,applicationId)},NetworkMonitoringViewService.prototype.viewNpmComponentDashboard=function(applicationId,componentId){ComponentViewService.instance().viewComponentLocation(NavigationDataConstants.APP_NETWORK_COMPONENT_DASHBOARD,applicationId,componentId)},NetworkMonitoringViewService.prototype.viewNpmNodeDashboard=function(applicationId,nodeId){var location=NavigationDataConstants.APP_NETWORK_NODE_DASH;NodeViewService.instance().viewNodeLocation(location,applicationId,nodeId)},NetworkMonitoringViewService.prototype.getApplicationIdFromUrl=function(){return parseInt(this.getCurrentUrlParams().application())},NetworkMonitoringViewService.prototype._navigateToCustomDash=function(customDashId){var params=this.createUrlParamsWithCurrentTimeRange();
params.setParam(UrlConstants.LOCATION,NavigationDataConstants.CDASHBOARD_DETAIL),params.setParam(UrlConstants.CUSTOM_DASHBOARD_ID,customDashId),this.navigationService.navigateTo(params.toString())},NetworkMonitoringViewService.SERVICE_NAME="networkMonitoringViewService",NetworkMonitoringViewService.LB_HEALTH="LB Health",NetworkMonitoringViewService.TCP_HEALTH="TCP Health",NetworkMonitoringViewService.$inject=[],NetworkMonitoringViewService}(ViewServiceBase);appdynamicsModule.service(NetworkMonitoringViewService.SERVICE_NAME,NetworkMonitoringViewService),define("app/view/networkMonitoring/services/NetworkMonitoringViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ProductTourService=function(_super){function ProductTourService($rootScope,$popover){var _this=this;_super.call(this,InjectorService.instance().$location(),NavigationService.instance(),NotificationService.instance(),InjectorService.instance().resourceManager()),this.$rootScope=$rootScope,this.$popover=$popover,this.allTours={},this.currentTourName=ProductTourService.APM_TOUR,this.tourStepsMap={},this.tourPopupsMap={},this.numTourPopups=0,this.isTourInProgress=!1,this.isBootstrapComplete=!1,this.isShowingStepLater=!1,this.$timeout=InjectorService.instance().$timeout(),MasterService.instance().initData?this.createAllProductTours():InjectorService.instance().$rootScope().$on(MasterService.UEV_INIT_DATA_FETCHED,function(){_this.createAllProductTours()}),InjectorService.instance().$rootScope().$on(NavigationService.UEV_NAV_ACTION_HTML,function(){_this.on_UEV_NAV_ACTION()}),InjectorService.instance().$rootScope().$on(NavigationService.UEV_NAV_ACTION_FLASH,function(){_this.on_UEV_NAV_ACTION()})}return __extends(ProductTourService,_super),ProductTourService.instance=function(){return AngularUtil.getADInjector().get(ProductTourService.NAME)},ProductTourService.prototype.startTour=function(helpId){Util.isValidId(this.appId)?(UserService.instance().setGeneralUserPreferenceValue(GeneralUserPreferenceConstants.PRODUCT_TOUR_IN_PROGRESS_APP_ID,this.appId.toString()),UserService.instance().setGeneralUserPreferenceValue(GeneralUserPreferenceConstants.PRODUCT_TOUR_TYPE,this.currentTourName),UserService.instance().setGeneralUserPreferenceValue(GeneralUserPreferenceConstants.PRODUCT_TOUR_IN_PROGRESS_APP_ID+"_"+this.currentTourName,this.appId.toString()),this.currentTourName==ProductTourService.MOBILE_TOUR&&UserService.instance().setGeneralUserPreferenceValue(GeneralUserPreferenceConstants.PRODUCT_TOUR_IN_PROGRESS_MOBILE_APP_ID,this.mobileAppId.toString())):NotificationService.instance().displayError("Unable to start Tour because there is no Application to run it on",""),this.isTourInProgress=!0,UserService.instance().setGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.PRODUCT_TOUR_STARTED,!0),EventBusService.instance().dispatchEvent(ProductTourService.UEV_PRODUCT_TOUR_STARTED,{}),this.isPopoversReady()?this.showStep(helpId):this.helpIdToShowWhenReady=helpId},ProductTourService.prototype.pauseTour=function(){0==UserService.instance().getGeneralUserPreferenceBooleanValue("PRODUCT_TOUR_COMPLETE."+this.currentTourName)&&(this.isTourInProgress=!1,EventBusService.instance().dispatchEvent(ProductTourService.UEV_PRODUCT_TOUR_PAUSED,{}),UserService.instance().setGeneralUserPreferenceValue(GeneralUserPreferenceConstants.PRODUCT_TOUR_LAST_VIEWED_STEP+"."+this.currentTourName,this.tourLastViewedStep))},ProductTourService.prototype.resumeTour=function(){this.isTourInProgress=!0;var currentName=UserService.instance().getGeneralUserPreferenceValue(GeneralUserPreferenceConstants.PRODUCT_TOUR_LAST_VIEWED_STEP+"."+this.currentTourName);this.currentProductTourBubbleStep=this.tourStepsMap[currentName];var helpId=this.currentProductTourBubbleStep.helpId;EventBusService.instance().dispatchEvent(ProductTourService.UEV_PRODUCT_TOUR_STARTED,{}),this.isPopoversReady()?this.showStep(helpId):this.helpIdToShowWhenReady=helpId},ProductTourService.prototype.endTour=function(){switch(this.isTourInProgress=!1,UserService.instance().setGeneralUserPreferenceBooleanValue("PRODUCT_TOUR_COMPLETE."+this.currentTourName,!0),EventBusService.instance().dispatchEvent(ProductTourService.UEV_PRODUCT_TOUR_COMPLETED,{}),this.currentTourName){case ProductTourService.APM_TOUR:EventBusService.instance().dispatchEvent(ProductTourService.UEV_APM_PRODUCT_TOUR_COMPLETED,null);break;case ProductTourService.EUM_TOUR:EventBusService.instance().dispatchEvent(ProductTourService.UEV_EUM_WEB_PRODUCT_TOUR_COMPLETED,null);break;case ProductTourService.MOBILE_TOUR:EventBusService.instance().dispatchEvent(ProductTourService.UEV_EUM_MOBILE_PRODUCT_TOUR_COMPLETED,null)}},ProductTourService.prototype.selectTour=function(tour){this.currentTour=this.allTours[tour],this.currentTourName=tour},ProductTourService.prototype.registerTourStepPopover=function(tourStepController){var _this=this;this.tourPopupsMap[tourStepController.getProductTourStepId()]=tourStepController,this.numTourPopups++,this.isTourInProgress&&!this.isShowingStepLater&&(this.isShowingStepLater=!0,InjectorService.instance().$timeout()(function(){_this.helpIdToShowWhenReady&&_this.showStep(_this.helpIdToShowWhenReady)},1e3))},ProductTourService.prototype.isPopoversReady=function(){return this.numTourPopups>0},ProductTourService.prototype.getVisitedStepPreferenceName=function(){return GeneralUserPreferenceConstants.PRODUCT_TOUR_STEP_VISITED+"."+this.getCurrentStepId()},ProductTourService.prototype.checkDisabledProductTourSteps=function(){this.isNodeDashboardStepDisabled()},ProductTourService.prototype.calculatePercentComplete=function(){var percent=Math.floor(100*this.currentTour.visitedCount/this.currentTour.length);return 0>percent&&(percent=0),percent},ProductTourService.prototype.onViewProductTour=function(){HomeViewService.instance().viewProductTour()},ProductTourService.prototype.onViewAppDashBoard=function(){ApplicationViewService.instance().viewApplicationDashboard(this.appId)},ProductTourService.prototype.onViewAllAppDashboard=function(){ApplicationViewService.instance().viewAllApplicationsDashboard()},ProductTourService.prototype.onViewGettingStarted=function(){HomeViewService.instance().viewGettingStarted()},ProductTourService.prototype.onViewBTList=function(){ApplicationViewService.instance().viewAppBtHealth(this.appId)},ProductTourService.prototype.onViewHealthRuleViolations=function(){ApplicationViewService.instance().viewAppHealthRuleViolations(this.appId)},ProductTourService.prototype.onViewHealthRuleDefault=function(){ApplicationViewService.instance().viewAppHealthRules(this.appId)},ProductTourService.prototype.onViewSlowTransactions=function(){var params=URLParams.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,"APP_SLOW_RESPONSE_TIMES"),params.setNumberParam(UrlConstants.APPLICATION_ID,this.appId),NavigationService.instance().navigateTo(params.toString())},ProductTourService.prototype.onViewErrors=function(){ApplicationViewService.instance().viewAppErrors(this.appId)},ProductTourService.prototype.onViewNodeDashboard=function(){var _this=this;if(this.currentTourName==ProductTourService.APM_TOUR){var tierId,tierResultHandler=function(response){var nodes=NodeUiService.instance().getApplicationComponentNodesByComponentId_response(response);nodes&&nodes.length>0&&NodeViewService.instance().viewNodeLocation(NavigationDataConstants.APP_NODE_MEMORY,_this.appId,nodes[0].id)};this.appId<1||ApplicationUiService.instance().getAllApplicationComponents(this.appId).then(function(response){var components=ApplicationUiService.instance().getAllApplicationComponents_response(response);components&&components.length>0&&(tierId=components[0].id),NodeUiService.instance().getApplicationComponentNodesByComponentId(tierId).then(tierResultHandler)})}},ProductTourService.prototype.onViewCreatePolicy=function(){AlertRespondViewService.instance().viewPolicies(this.appId)},ProductTourService.prototype.onViewEUMDashboard=function(){EumViewService.instance().viewEumWebMainDashboard(this.appId)},ProductTourService.prototype.onViewGeoDashboard=function(){EumViewService.instance().viewWebGeo(this.appId)},ProductTourService.prototype.onViewPagesAjaxRequest=function(){EumViewService.instance().viewWebPagesList(this.appId)},ProductTourService.prototype.onViewWebAnalyze=function(){EumViewService.instance().viewWebAnalyze(this.appId)},ProductTourService.prototype.onViewEumAllWebApps=function(){EumViewService.instance().viewWebAllApps()},ProductTourService.prototype.onViewWebSessions=function(){EumViewService.instance().viewEumWebSessions(this.appId)},ProductTourService.prototype.onViewBrowserSnapshots=function(){EumViewService.instance().viewWebBrowserSnapshotList(this.appId)},ProductTourService.prototype.onViewMobileOverallHealth=function(){EumViewService.instance().viewMobileAllApps()},ProductTourService.prototype.onViewMobileOverviewDashboard=function(){EumViewService.instance().viewEumMobileMainDashboard(this.appId,this.platform,this.mobileAppId)},ProductTourService.prototype.onViewMobileGeoDashboard=function(){EumViewService.instance().viewMobileAppGeo(this.appId,this.platform,this.mobileAppId)},ProductTourService.prototype.onViewMobileSessions=function(){EumViewService.instance().viewMobileSessionAnalyze(this.appId,this.platform,this.mobileAppId)},ProductTourService.prototype.onViewMobileNetworkRequests=function(){EumViewService.instance().viewMobileNetworkRequestList(this.appId,this.platform,this.mobileAppId)},ProductTourService.prototype.onViewMobileAnalyzeCrashes=function(){EumViewService.instance().viewCrashDashboardForMobileApp(this.appId,this.platform,this.mobileAppId)},ProductTourService.prototype.onViewMobileViewCrashes=function(){EumViewService.instance().viewCrashListForMobileApp(this.appId,this.platform,this.mobileAppId)},ProductTourService.prototype.onNext=function(){this.isTourInProgress=!0,this.currentPopover.hide(),null!=this.currentProductTourBubbleStep.next&&this.goToNextStep()},ProductTourService.prototype.onBack=function(){this.isTourInProgress=!0,null!=this.currentProductTourBubbleStep.prev&&(this.currentPopover.hide(),this.currentProductTourBubbleStep=this.currentProductTourBubbleStep.prev,this.goToPopover())},ProductTourService.prototype.goToPopover=function(){this.setVisited(),this.setCurrentPopover(),this.currentProductTourBubbleStep&&(this.currentProductTourBubbleStep.onView(),this.show())},ProductTourService.prototype.on_UEV_NAV_ACTION=function(){var currentLocation=URLParams.getCurrentUrlParams().location();this.currentProductTourBubbleStep&&this.currentProductTourBubbleStep.location!=currentLocation&&this.tourPopupsMap[this.currentProductTourBubbleStep.helpId]&&(this.tourPopupsMap[this.currentProductTourBubbleStep.helpId].hide(),this.pauseTour())},ProductTourService.prototype.showStep=function(helpId){this.currentProductTourBubbleStep=this.tourStepsMap[helpId],this.goToPopover()},ProductTourService.prototype.setCurrentPopover=function(){this.currentPopover=this.tourPopupsMap[this.getCurrentStepId()]},ProductTourService.prototype.createAllProductTours=function(){var eumTourSteps=[{helpId:ProductTourService.PRODUCT_TOUR_EUM_ALL_WEB_APPS,location:NavigationDataConstants.EUM_WEB_ALL_APPS,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewEumAllWebApps.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_EUM_APP_DASHBOARD,location:NavigationDataConstants.EUM_WEB_MAIN_DASHBOARD,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewEUMDashboard.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_EUM_GEO_DASHBOARD,location:NavigationDataConstants.EUM_DASHBOARD,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewGeoDashboard.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_EUM_PAGES_AJAX_REQUESTS,location:NavigationDataConstants.EUM_PAGES_LIST,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewPagesAjaxRequest.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_EUM_SESSIONS,location:NavigationDataConstants.EUM_WEB_SESSION_ANALYTICS,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewWebSessions.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_EUM_ANALYZE,location:NavigationDataConstants.EUM_WEB_ANALYZE,featureTourType:ProductTourService.TOUR_TYPE_TROUBLESHOOT,onView:this.onViewWebAnalyze.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_EUM_BROWSER_SNAPSHOTS,location:NavigationDataConstants.EUM_BROWSER_SNAPSHOTS,featureTourType:ProductTourService.TOUR_TYPE_TROUBLESHOOT,onView:this.onViewBrowserSnapshots.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_EUM_FINISHED,location:NavigationDataConstants.EUM_WEB_MAIN_DASHBOARD,featureTourType:null,onView:this.onViewEUMDashboard.bind(this),value:0}],mobileTourSteps=[{helpId:ProductTourService.PRODUCT_TOUR_MOBILE_OVERALL_HEALTH,location:NavigationDataConstants.EUM_MOBILE_ALL_APPS,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewMobileOverallHealth.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_MOBILE_OVERVIEW_DASHBOARD,location:NavigationDataConstants.EUM_MOBILE_MAIN_DASHBOARD,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewMobileOverviewDashboard.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_MOBILE_GEO_DASHBOARD,location:NavigationDataConstants.EUM_MOBILE_APPLICATION,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewMobileGeoDashboard.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_MOBILE_SESSIONS,location:NavigationDataConstants.EUM_MOBILE_SESSION_ANALYTICS,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewMobileSessions.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_MOBILE_NETWORK_REQUESTS,location:NavigationDataConstants.EUM_REQUESTS_EPISODES,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewMobileNetworkRequests.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_MOBILE_ANALYZE_CRASHES,location:NavigationDataConstants.EUM_ANALYTICS_CRASH_DASHBOARD,featureTourType:ProductTourService.TOUR_TYPE_TROUBLESHOOT,onView:this.onViewMobileAnalyzeCrashes.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_MOBILE_VIEW_CRASHES,location:NavigationDataConstants.EUM_CRASH_LIST,featureTourType:ProductTourService.TOUR_TYPE_TROUBLESHOOT,onView:this.onViewMobileViewCrashes.bind(this),value:1},{helpId:ProductTourService.PRODUCT_TOUR_MOBILE_FINISHED,location:NavigationDataConstants.EUM_MOBILE_MAIN_DASHBOARD,featureTourType:null,onView:this.onViewMobileOverviewDashboard.bind(this),value:0}],javaTourSteps=[{helpId:ProductTourService.APM_TOUR_APP_FLOW_MAP,location:NavigationDataConstants.APP_DASHBOARD,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewAppDashBoard.bind(this),value:1},{helpId:ProductTourService.APM_TOUR_APP_DASHBOARD,location:NavigationDataConstants.APPS_ALL_DASHBOARD,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewAllAppDashboard.bind(this),value:1},{helpId:ProductTourService.APM_TOUR_BUSINESS_TRANSACTION_LIST,location:NavigationDataConstants.APP_BT_LIST,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewBTList.bind(this),value:1},{helpId:ProductTourService.APM_TOUR_NODE_DASHBOARD,location:NavigationDataConstants.APP_NODE_MEMORY,featureTourType:ProductTourService.TOUR_TYPE_MONITOR,onView:this.onViewNodeDashboard.bind(this),value:1},{helpId:ProductTourService.APM_TOUR_SLOW_TRANSACTIONS,location:NavigationDataConstants.APP_SLOW_RESPONSE_TIMES,featureTourType:ProductTourService.TOUR_TYPE_TROUBLESHOOT,onView:this.onViewSlowTransactions.bind(this),value:1},{helpId:ProductTourService.APM_TOUR_ERROR_TRANSACTIONS,location:NavigationDataConstants.APP_ERRORS,featureTourType:ProductTourService.TOUR_TYPE_TROUBLESHOOT,onView:this.onViewErrors.bind(this),value:1},{helpId:ProductTourService.APM_TOUR_HEALTH_RULE_VIOLATIONS_LIST,location:NavigationDataConstants.APP_INCIDENT_LIST,featureTourType:ProductTourService.TOUR_TYPE_ANALYZE,onView:this.onViewHealthRuleViolations.bind(this),value:1},{helpId:ProductTourService.APM_TOUR_DEFAULT_HEALTH_RULES_LIST,location:NavigationDataConstants.ALERT_RESPOND_HEALTH_RULES,featureTourType:ProductTourService.TOUR_TYPE_ANALYZE,onView:this.onViewHealthRuleDefault.bind(this),value:1},{helpId:ProductTourService.APM_TOUR_CREATE_POLICY,location:NavigationDataConstants.ALERT_RESPOND_POLICIES,featureTourType:ProductTourService.TOUR_TYPE_ANALYZE,onView:this.onViewCreatePolicy.bind(this),value:1},{helpId:ProductTourService.APM_TOUR_FINISHED,location:NavigationDataConstants.APP_DASHBOARD,featureTourType:null,onView:this.onViewAppDashBoard.bind(this),value:0}];this.createTour(ProductTourService.APM_TOUR,javaTourSteps),this.createTour(ProductTourService.EUM_TOUR,eumTourSteps),this.createTour(ProductTourService.MOBILE_TOUR,mobileTourSteps)},ProductTourService.prototype.createTour=function(name,steps){var _this=this,tour=new ProductTour;steps.forEach(function(step){var helpId=step.helpId;_this.tourStepsMap[helpId]=step,tour.insert(step)}),this.allTours[name]=tour},ProductTourService.prototype.show=function(){if(this.currentPopover&&(this.currentPopover.show(),this.currentProductTourBubbleStep.next)){var helpId=this.currentProductTourBubbleStep.next.helpId;this.tourLastViewedStep=helpId}},ProductTourService.prototype.setVisitedGeneralPreference=function(){var currentStepName=this.getVisitedStepPreferenceName();UserService.instance().setGeneralUserPreferenceBooleanValue(currentStepName,!0),this.currentTour.length<=this.currentTour.visitedCount&&this.endTour()},ProductTourService.prototype.setVisited=function(){this.setVisitedGeneralPreference(),this.currentProductTourBubbleStep.visited=!0,this.currentTour.updateVisitedCount(),EventBusService.instance().dispatchEvent(ProductTourService.UEV_PRODUCT_TOUR_POPOVER_ON_VISITED,null),this.trackVisitedTourStep()},ProductTourService.prototype.trackVisitedTourStep=function(){if(this.currentProductTourBubbleStep){var actionName=ProductTourService.USER_TRACKING_ACTION_PREFIX+":"+this.currentProductTourBubbleStep.helpId;UserService.instance().trackAction(actionName,"Product tour step visited")}},ProductTourService.prototype.getCurrentStepId=function(){var helpId;return helpId=this.currentProductTourBubbleStep?this.currentProductTourBubbleStep.helpId:null},ProductTourService.prototype.goToNextStep=function(){this.currentProductTourBubbleStep=this.currentProductTourBubbleStep.next,this.currentProductTourBubbleStep.isDisabled?this.goToNextStep():this.goToPopover()},ProductTourService.prototype.isNodeDashboardStepDisabled=function(){var tierId,_this=this,tierResultHandler=function(response){var nodes=NodeUiService.instance().getApplicationComponentNodesByComponentId_response(response);_this.tourStepsMap[ProductTourService.APM_TOUR_NODE_DASHBOARD].isDisabled=nodes&&nodes.length>0?!1:!0};this.appId<1||ApplicationUiService.instance().getAllApplicationComponents(this.appId).then(function(response){var components=ApplicationUiService.instance().getAllApplicationComponents_response(response);components&&components.length>0?(tierId=components[0].id,NodeUiService.instance().getApplicationComponentNodesByComponentId(tierId).then(tierResultHandler)):_this.tourStepsMap[ProductTourService.APM_TOUR_NODE_DASHBOARD].isDisabled=!0})},ProductTourService.NAME="productTourService",ProductTourService.UEV_PRODUCT_TOUR_STARTED="UEV_PRODUCT_TOUR_STARTED",ProductTourService.UEV_PRODUCT_TOUR_POPOVER_ON_VISITED="UEV_PRODUCT_TOUR_POPOVER_ON_VISITED",ProductTourService.UEV_PRODUCT_TOUR_COMPLETED="UEV_PRODUCT_TOUR_COMPLETED",ProductTourService.UEV_APM_PRODUCT_TOUR_COMPLETED="UEV_APM_PRODUCT_TOUR_COMPLETED",ProductTourService.UEV_EUM_WEB_PRODUCT_TOUR_COMPLETED="UEV_EUM_WEB_PRODUCT_TOUR_COMPLETED",ProductTourService.UEV_EUM_MOBILE_PRODUCT_TOUR_COMPLETED="UEV_EUM_MOBILE_PRODUCT_TOUR_COMPLETED",ProductTourService.UEV_PRODUCT_TOUR_PAUSED="UEV_PRODUCT_TOUR_PAUSED",ProductTourService.TOUR_TYPE_MONITOR="TOUR_TYPE_MONITOR",ProductTourService.TOUR_TYPE_INSTALL="TOUR_TYPE_INSTALL",ProductTourService.TOUR_TYPE_TROUBLESHOOT="TOUR_TYPE_TROUBLESHOOT",ProductTourService.TOUR_TYPE_ANALYZE="TOUR_TYPE_ANALYZE",ProductTourService.APM_TOUR="APM_TOUR",ProductTourService.EUM_TOUR="EUM_TOUR",ProductTourService.MOBILE_TOUR="MOBILE_TOUR",ProductTourService.APM_TOUR_APP_FLOW_MAP="APM_TOUR_APP_FLOW_MAP",ProductTourService.APM_TOUR_APP_DASHBOARD="APM_TOUR_APP_DASHBOARD",ProductTourService.APM_TOUR_BUSINESS_TRANSACTION_LIST="APM_TOUR_BUSINESS_TRANSACTION_LIST",ProductTourService.APM_TOUR_NODE_DASHBOARD="APM_TOUR_NODE_DASHBOARD",ProductTourService.APM_TOUR_SLOW_TRANSACTIONS="APM_TOUR_SLOW_TRANSACTIONS",ProductTourService.APM_TOUR_ERROR_TRANSACTIONS="APM_TOUR_ERROR_TRANSACTIONS",ProductTourService.APM_TOUR_DEFAULT_HEALTH_RULES_LIST="APM_TOUR_DEFAULT_HEALTH_RULES_LIST",ProductTourService.APM_TOUR_HEALTH_RULE_VIOLATIONS_LIST="APM_TOUR_HEALTH_RULE_VIOLATIONS_LIST",ProductTourService.APM_TOUR_CREATE_POLICY="APM_TOUR_CREATE_POLICY",ProductTourService.APM_TOUR_FINISHED="APM_TOUR_FINISHED",ProductTourService.PRODUCT_TOUR_EUM_APP_DASHBOARD="PRODUCT_TOUR_EUM_APP_DASHBOARD",ProductTourService.PRODUCT_TOUR_EUM_ALL_WEB_APPS="PRODUCT_TOUR_EUM_ALL_WEB_APPS",ProductTourService.PRODUCT_TOUR_EUM_GEO_DASHBOARD="PRODUCT_TOUR_EUM_GEO_DASHBOARD",ProductTourService.PRODUCT_TOUR_EUM_PAGES_AJAX_REQUESTS="PRODUCT_TOUR_EUM_PAGES_AJAX_REQUESTS",ProductTourService.PRODUCT_TOUR_EUM_SESSIONS="PRODUCT_TOUR_EUM_SESSIONS",ProductTourService.PRODUCT_TOUR_EUM_ANALYZE="PRODUCT_TOUR_EUM_ANALYZE",ProductTourService.PRODUCT_TOUR_EUM_BROWSER_SNAPSHOTS="PRODUCT_TOUR_EUM_BROWSER_SNAPSHOTS",ProductTourService.PRODUCT_TOUR_EUM_FINISHED="PRODUCT_TOUR_EUM_FINISHED",ProductTourService.PRODUCT_TOUR_MOBILE_OVERALL_HEALTH="PRODUCT_TOUR_MOBILE_OVERALL_HEALTH",ProductTourService.PRODUCT_TOUR_MOBILE_OVERVIEW_DASHBOARD="PRODUCT_TOUR_MOBILE_OVERVIEW_DASHBOARD",ProductTourService.PRODUCT_TOUR_MOBILE_GEO_DASHBOARD="PRODUCT_TOUR_MOBILE_GEO_DASHBOARD",ProductTourService.PRODUCT_TOUR_MOBILE_SESSIONS="PRODUCT_TOUR_MOBILE_SESSIONS",ProductTourService.PRODUCT_TOUR_MOBILE_NETWORK_REQUESTS="PRODUCT_TOUR_MOBILE_NETWORK_REQUESTS",ProductTourService.PRODUCT_TOUR_MOBILE_ANALYZE_CRASHES="PRODUCT_TOUR_MOBILE_ANALYZE_CRASHES",ProductTourService.PRODUCT_TOUR_MOBILE_VIEW_CRASHES="PRODUCT_TOUR_MOBILE_VIEW_CRASHES",ProductTourService.PRODUCT_TOUR_MOBILE_FINISHED="PRODUCT_TOUR_MOBILE_FINISHED",ProductTourService.PRODUCT_TOUR_STATE_COMPLETE="COMPLETE",ProductTourService.PRODUCT_TOUR_STATE_IN_PROGRESS="IN_PROGRESS",ProductTourService.PRODUCT_TOUR_STATE_NOT_STARTED="NOT_STARTED",ProductTourService.PRODUCT_TOUR_STATE_PAUSED="PAUSED",ProductTourService.USER_TRACKING_ACTION_PREFIX="PRODUCT_TOUR",ProductTourService.$inject=["$rootScope","$popover"],ProductTourService}(ViewServiceBase);adComponentsModule.service(ProductTourService.NAME,ProductTourService);var ProductTourBubbleStep=function(){function ProductTourBubbleStep(config){for(var item in config)this[item]=config[item]}return ProductTourBubbleStep}(),ProductTour=function(){function ProductTour(){this.firstStep=null,this.lastStep=null,this.length=0,this.totalCount=0,this.visitedCount=0}return ProductTour.prototype.insert=function(step){if(null==this.firstStep)step.prev=null,step.next=null,this.firstStep=step,this.lastStep=step;else{var last=this.lastStep;step.prev=last,step.next=null,this.lastStep.next=step,this.lastStep=step}this.markVisited(step),this.length+=step.value,step.position=0===step.value?0:this.length,this.totalCount++},ProductTour.prototype.getFirstIncompleteStep=function(){for(var step=this.firstStep;step.next&&step.visited;)step=step.next;return step},ProductTour.prototype.updateVisitedCount=function(){this.visitedCount=0;for(var step=this.firstStep;step;)step.visited&&(this.visitedCount+=step.value),step=step.next},ProductTour.prototype.markVisited=function(step){var visited=UserService.instance().getGeneralUserPreferenceBooleanValue(GeneralUserPreferenceConstants.PRODUCT_TOUR_STEP_VISITED+"."+step.helpId)||!1;step.visited=visited,visited&&(this.visitedCount+=step.value)},ProductTour}();define("app/view/home/productTour/ProductTourService",function(){});var ExitPointUtil=function(){function ExitPointUtil(){}return ExitPointUtil.getExitPointTypeFromD3Node=function(node){return Util.isUndefOrNull(node)?null:ExitPointUtil.getFirstDefinedOption(node.backendType,Util.isDefAndNotNull(node.exitPointCall)?node.exitPointCall.exitPointType:null)},ExitPointUtil.getExitPointTypeLabelFromD3Node=function(node,defaultVal){return ExitPointUtil.getLabelForType(ExitPointUtil.getExitPointTypeFromD3Node(node),defaultVal)},ExitPointUtil.getExitPointTypeFromSnapshotExitCall=function(exitCall){return Util.isUndefOrNull(exitCall)?null:exitCall.type===TransactionExitPointType.CUSTOM?ExitPointUtil.getFirstDefinedOption(exitCall.exitPointName,exitCall.type):ExitPointUtil.getFirstDefinedOption(exitCall.type,exitCall.exitPointName)},ExitPointUtil.getExitPointTypeLabelFromSnapshotExitCall=function(exitCall,defaultVal){return ExitPointUtil.getLabelForType(ExitPointUtil.getExitPointTypeFromSnapshotExitCall(exitCall),defaultVal)},ExitPointUtil.getExitPointTypeFromEdgeCall=function(edge){return Util.isUndefOrNull(edge)?null:ExitPointUtil.getFirstDefinedOption(Util.isDefAndNotNull(edge.exitPointCall)?edge.exitPointCall.exitPointType:null,Util.isDefAndNotNull(edge.target)?ExitPointUtil.getExitPointTypeFromD3Node(edge.target):null)},ExitPointUtil.getExitPointTypeLabelFromEdgeCall=function(edge,defaultVal){return ExitPointUtil.getLabelForType(ExitPointUtil.getExitPointTypeFromEdgeCall(edge),defaultVal)},ExitPointUtil.getExitPointTypeFromBackend=function(backend){return Util.isUndefOrNull(backend)?null:ExitPointUtil.getFirstDefinedOption(CollectionUtils.getValueFromNameValuePairs("exit-point-type",backend.metaInfo),Util.isDefAndNotNull(backend.resolutionInfo)?backend.resolutionInfo.exitPointSubtype:null,Util.isDefAndNotNull(backend.resolutionInfo)?backend.resolutionInfo.exitPointType:null)},ExitPointUtil.getExitPointTypeLabelFromBackend=function(backend,defaultVal){return ExitPointUtil.getLabelForType(ExitPointUtil.getExitPointTypeFromBackend(backend),defaultVal)},ExitPointUtil.getLabelForType=function(transactionExitPointType,defaultVal){var label=ResourceManager.instance().getString("ui","ms_transactionExitPointType_"+(transactionExitPointType&&transactionExitPointType.replace(" ","_")));return StringUtils.isNullOrEmptyString(label)?StringUtils.isNullOrEmptyString(transactionExitPointType)?void 0!==defaultVal?defaultVal:ResourceManager.instance().getString("ui","ms_transactionExitPointType_UNKNOWN"):transactionExitPointType:label},ExitPointUtil.getFirstDefinedOption=function(){for(var options=[],_i=0;_i<arguments.length;_i++)options[_i-0]=arguments[_i];for(var index=0;index<options.length;index++)if(options[index])return options[index];return null},ExitPointUtil}();define("app/utils/ExitPointUtil",function(){}),define("app/view/home/UsageStatisticsConstants",["require","exports"],function(){var UsageStatisticsConstants=function(){function UsageStatisticsConstants(){}return UsageStatisticsConstants.DB="DB",UsageStatisticsConstants.WEB="WEB",UsageStatisticsConstants.ANDROID="ANDROID",UsageStatisticsConstants.IOS="IOS",UsageStatisticsConstants.JAVA="JAVA",UsageStatisticsConstants.NODEJS="NODEJS",UsageStatisticsConstants.DOTNET="DOTNET",UsageStatisticsConstants.PYTHON="PYTHON",UsageStatisticsConstants.PHP="PHP",UsageStatisticsConstants.SERVER="SERVER",UsageStatisticsConstants.SYNTHETIC="SYNTHETIC",UsageStatisticsConstants.AD_GETTING_STARTED_SELECTED="AD_GETTING_STARTED_SELECTED",UsageStatisticsConstants.DOWNLOAD="DOWNLOAD",UsageStatisticsConstants.CONNECTION_SUCCESS="CONNECTION_SUCCESS",UsageStatisticsConstants.CONNECTION_FAILURE="CONNECTION_FAILURE",UsageStatisticsConstants.APPLICATION_SET="APPLICATION_SET",UsageStatisticsConstants.INSTALL_DOCS_VISITED="INSTALL_DOCS_VISITED",UsageStatisticsConstants.INSTALL_VIDEO_VISITED="INSTALL_VIDEO_VISITED",UsageStatisticsConstants.SELECT_AGENT_TYPE="SELECT_AGENT_TYPE",UsageStatisticsConstants.MOBILE_APP_NAME_ENTERED="MOBILE_APP_NAME_ENTERED",UsageStatisticsConstants.LINK_MOBILE_APP_TO_SERVER_SIDE_APP="LINK_MOBILE_APP_TO_SERVER_SIDE_APP",UsageStatisticsConstants.NAME_APPLICATION_CLICKED_CONTINUE="NAME_APPLICATION_CLICKED_CONTINUE",UsageStatisticsConstants.MOBILE_APP_CONNECTED_SUCCESS="MOBILE_APP_CONNECTED_SUCCESS",UsageStatisticsConstants.INSTALL_DOCS_VISITED_MANUAL="INSTALL_DOCS_VISITED",UsageStatisticsConstants.BITCODE_DOCS_VISITED="BITCODE_DOCS_VISITED",UsageStatisticsConstants.ANT_DOCS_VISITED="ANT_DOCS_VISITED",UsageStatisticsConstants.MAVEN_DOCS_VISITED="MAVEN_DOCS_VISITED",UsageStatisticsConstants.SELECTED_DB="SELECTED_DB",UsageStatisticsConstants.CLICKED_PREREQUISITE_DOCS="CLICKED_PREREQUISITE_DOCS",UsageStatisticsConstants.CONFIGURE_CONTROLLER_CLICKED_CONTINUE="CONFIGURE_CONTROLLER_CLICKED_CONTINUE",UsageStatisticsConstants.CONNECTION_FIELDS_ENTERED="CONNECTION_FIELDS_ENTERED",UsageStatisticsConstants.AGENT_VERIFY_SUCCESS="AGENT_VERIFY_SUCCESS",UsageStatisticsConstants.SELECTED_PLATFORM_BUNDLE="SELECTED_PLATFORM_BUNDLE",UsageStatisticsConstants}();return UsageStatisticsConstants}),define("app/view/home/HomeUtil",["require","exports","app/view/home/UsageStatisticsConstants"],function(require,exports,UsageStatisticsConstants){var HomeUtil=function(){function HomeUtil(){}return HomeUtil.downloadAgent=function(parameters,agentType){NotificationService.instance().displayResourceMessage("ms_preparingAgentForDownload");var queryUrl=ExternalUrls.PRODUCTION_URL;if(BrowserUtils.isBrowserInternetExplorer9orLess()&&"undefined"!=typeof XDomainRequest){var parameterQueryString=decodeURIComponent($.param(parameters));queryUrl=queryUrl+"?"+parameterQueryString;var xdr=new XDomainRequest;try{xdr.open("get",queryUrl),xdr.onload=function(){HomeUtil.downloadFileAtURL(xdr.responseText),UserService.instance().sendGettingStartedUsageStatistics(UsageStatisticsConstants.DOWNLOAD,agentType)}.bind(this),xdr.onerror=function(){NotificationService.instance().displayError(resourceManager.getString("ui","ms_errorWhileRetrievingTheAgentIE9"),"")}.bind(this),xdr.timeout=10*DateTimeUtil.MILLISEC_PER_SEC,xdr.onprogress=function(){},xdr.ontimeout=function(){},setTimeout(function(){xdr.send()},0)}catch(e){NotificationService.instance().displayError(resourceManager.getString("ui","ms_errorWhileRetrievingTheAgentIE9"),"")}}else $.ajax({type:"GET",contentType:"text/plain",dataType:"text",url:queryUrl,data:parameters,crossDomain:!0,success:function(responseData){HomeUtil.downloadFileAtURL(responseData),UserService.instance().sendGettingStartedUsageStatistics(UsageStatisticsConstants.DOWNLOAD,agentType)}.bind(this),error:function(){NotificationService.instance().displayError(resourceManager.getString("ui","ms_errorWhileRetrievingTheAgent"),"")}.bind(this)})},HomeUtil.downloadFileAtURL=function(url){window.location.href=url,NotificationService.instance().displayResourceMessage("ms_startingFileDownload")},HomeUtil.getHomeNavigationTabs=function(){return[{name:ResourceManager.instance().getString("ui","ms_overview"),clickFn:function(){HomeViewService.instance().viewHomeOverview()}},{name:ResourceManager.instance().getString("ui","ms_unifiedMonitoring"),clickFn:function(){HomeViewService.instance().viewPlatformHome()}},{name:ResourceManager.instance().getString("ui","ms_gettingStarted"),clickFn:function(){HomeViewService.instance().viewGettingStartedHome()}}]},HomeUtil.HOME_TAB=0,HomeUtil.PLATFORM_HOME_TAB=1,HomeUtil.GETTING_STARTED_HOME_TAB=2,HomeUtil}();return HomeUtil});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},DbMonitoringUiService=function(_super){function DbMonitoringUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService
}return __extends(DbMonitoringUiService,_super),DbMonitoringUiService.instance=function(){return AngularUtil.getADInjector().get("dbMonitoringUiService")},DbMonitoringUiService.prototype.getDatabasesPerformanceStats=function(timeRange){var path="restui/dbMonitoring/getDatabasesPerformanceStats?timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getDatabasesPerformanceStats",path,[timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["numQueriesPerMin.dataTimeslices.startTime","timeSpentInDb.dataTimeslices.startTime","cpuUsage.dataTimeslices.startTime","config.createdOn","config.modifiedOn","eventSummary.eventTime"]),response})},DbMonitoringUiService.prototype.getDatabasesPerformanceStats_response=function(response){return response},DbMonitoringUiService.prototype.getDBServers=function(timeRange,includeRegularMetricData){var path="restui/dbMonitoring/allDbs?timeRange="+timeRange+"&includeRegularMetricData="+includeRegularMetricData,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getDBServers",path,[timeRange,includeRegularMetricData]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["numQueriesPerMin.dataTimeslices.startTime","timeSpentInDb.dataTimeslices.startTime","cpuUsage.dataTimeslices.startTime","config.createdOn","config.modifiedOn","eventSummary.eventTime"]),response})},DbMonitoringUiService.prototype.getDBServers_useCache=function(timeRange,includeRegularMetricData,forceReload){var _this=this;return void 0===forceReload&&(forceReload=!1),DbMonitoringUiService.getDBServers_Cache||(DbMonitoringUiService.getDBServers_Cache=new TimeBaseDataCache,DbMonitoringUiService.getDBServers_Cache.fetchDataCallbackFn=function(params){return _this.getDBServers(params[0],params[1])}),DbMonitoringUiService.getDBServers_Cache.get([timeRange,includeRegularMetricData],forceReload)},DbMonitoringUiService.prototype.getDBServers_response=function(response){return response},DbMonitoringUiService.prototype.getServerDashboardKPIData=function(dbServerId,includeBaseline,baselineId,timeRange){var path="restui/dbMonitoring/serverDashboardKPIData?dbServerId="+dbServerId+"&includeBaseline="+includeBaseline+"&baselineId="+baselineId+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getServerDashboardKPIData",path,[dbServerId,includeBaseline,baselineId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["numberOfHits.dataTimeslices.startTime","timeSpentInDB.dataTimeslices.startTime","numberOfConnections.dataTimeslices.startTime","cpuUser.dataTimeslices.startTime","cpuSystem.dataTimeslices.startTime","memoryLoad.dataTimeslices.startTime","callsPerMinuteBaseline.dataTimeslices.startTime","numberOfHitsBaseline.dataTimeslices.startTime","timeSpentInDBBaseline.dataTimeslices.startTime","numberOfConnectionsBaseline.dataTimeslices.startTime","cpuUserBaselineLoad.dataTimeslices.startTime","cpuSystemBaselineLoad.dataTimeslices.startTime","memoryBaselineLoad.dataTimeslices.startTime","rolledUpCallsPerMinute.dataTimeslices.startTime","rolledUpNumberOfHits.dataTimeslices.startTime","rolledUpTimeSpentInDB.dataTimeslices.startTime","rolledUpNumberOfConnections.dataTimeslices.startTime","rolledUpCpuSystem.dataTimeslices.startTime","rolledUpCpuUser.dataTimeslices.startTime","rolledUpMemoryLoad.dataTimeslices.startTime","rolledUpTotalExecutions.dataTimeslices.startTime","diskInputLoad.dataTimeslices.startTime","diskOutputLoad.dataTimeslices.startTime","networkInputLoad.dataTimeslices.startTime","networkOutputLoad.dataTimeslices.startTime","rolledUpIOLoad.dataTimeslices.startTime","diskInputLoadBaseline.dataTimeslices.startTime","diskOutputLoadBaseline.dataTimeslices.startTime","networkInputLoadBaseline.dataTimeslices.startTime","networkOutputLoadBaseline.dataTimeslices.startTime","rolledupDiskInputLoad.dataTimeslices.startTime","rolledupDiskOutputLoad.dataTimeslices.startTime","rolledupNetworkInputLoad.dataTimeslices.startTime","rolledupNetworkOutputLoad.dataTimeslices.startTime","callsPerMinute.dataTimeslices.startTime","eventSummary.eventTime"]),response})},DbMonitoringUiService.prototype.getServerDashboardKPIData_response=function(response){return response},DbMonitoringUiService.prototype.getCachedExecutionPlanList=function(arg0){var path="restui/dbMonitoring/getCachedExecutionPlanList",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getCachedExecutionPlanList",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getCachedExecutionPlanList_response=function(response){return response},DbMonitoringUiService.prototype.getAllObservedSchemasForDBServer=function(dbServerId){var path="restui/dbMonitoring/getAllObservedSchemasForDBServer?dbServerId="+dbServerId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getAllObservedSchemasForDBServer",path,[dbServerId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getAllObservedSchemasForDBServer_response=function(response){return response},DbMonitoringUiService.prototype.getClusterTopologyData=function(dbId,timeRange){var path="restui/dbMonitoring/getClusterTopologyData?dbId="+dbId+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getClusterTopologyData",path,[dbId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["numQueriesPerMin.dataTimeslices.startTime","timeSpentInDb.dataTimeslices.startTime"]),response})},DbMonitoringUiService.prototype.getClusterTopologyData_response=function(response){return response},DbMonitoringUiService.prototype.getServerDashboardHardwareData=function(dbServerId,includeBaseline,baselineId,timeRange){var path="restui/dbMonitoring/serverDashboardHardwareData?dbServerId="+dbServerId+"&includeBaseline="+includeBaseline+"&baselineId="+baselineId+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getServerDashboardHardwareData",path,[dbServerId,includeBaseline,baselineId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["numberOfHits.dataTimeslices.startTime","timeSpentInDB.dataTimeslices.startTime","numberOfConnections.dataTimeslices.startTime","cpuUser.dataTimeslices.startTime","cpuSystem.dataTimeslices.startTime","memoryLoad.dataTimeslices.startTime","callsPerMinuteBaseline.dataTimeslices.startTime","numberOfHitsBaseline.dataTimeslices.startTime","timeSpentInDBBaseline.dataTimeslices.startTime","numberOfConnectionsBaseline.dataTimeslices.startTime","cpuUserBaselineLoad.dataTimeslices.startTime","cpuSystemBaselineLoad.dataTimeslices.startTime","memoryBaselineLoad.dataTimeslices.startTime","rolledUpCallsPerMinute.dataTimeslices.startTime","rolledUpNumberOfHits.dataTimeslices.startTime","rolledUpTimeSpentInDB.dataTimeslices.startTime","rolledUpNumberOfConnections.dataTimeslices.startTime","rolledUpCpuSystem.dataTimeslices.startTime","rolledUpCpuUser.dataTimeslices.startTime","rolledUpMemoryLoad.dataTimeslices.startTime","rolledUpTotalExecutions.dataTimeslices.startTime","diskInputLoad.dataTimeslices.startTime","diskOutputLoad.dataTimeslices.startTime","networkInputLoad.dataTimeslices.startTime","networkOutputLoad.dataTimeslices.startTime","rolledUpIOLoad.dataTimeslices.startTime","diskInputLoadBaseline.dataTimeslices.startTime","diskOutputLoadBaseline.dataTimeslices.startTime","networkInputLoadBaseline.dataTimeslices.startTime","networkOutputLoadBaseline.dataTimeslices.startTime","rolledupDiskInputLoad.dataTimeslices.startTime","rolledupDiskOutputLoad.dataTimeslices.startTime","rolledupNetworkInputLoad.dataTimeslices.startTime","rolledupNetworkOutputLoad.dataTimeslices.startTime","callsPerMinute.dataTimeslices.startTime","eventSummary.eventTime"]),response})},DbMonitoringUiService.prototype.getServerDashboardHardwareData_response=function(response){return response},DbMonitoringUiService.prototype.getClusterDashboardKPIData=function(dbConfigId,includeBaseline,baselineId,timeRange){var path="restui/dbMonitoring/clusterDashboardKPIData?dbConfigId="+dbConfigId+"&includeBaseline="+includeBaseline+"&baselineId="+baselineId+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getClusterDashboardKPIData",path,[dbConfigId,includeBaseline,baselineId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["numberOfHits.dataTimeslices.startTime","timeSpentInDB.dataTimeslices.startTime","numberOfConnections.dataTimeslices.startTime","cpuUser.dataTimeslices.startTime","cpuSystem.dataTimeslices.startTime","memoryLoad.dataTimeslices.startTime","callsPerMinuteBaseline.dataTimeslices.startTime","numberOfHitsBaseline.dataTimeslices.startTime","timeSpentInDBBaseline.dataTimeslices.startTime","numberOfConnectionsBaseline.dataTimeslices.startTime","cpuUserBaselineLoad.dataTimeslices.startTime","cpuSystemBaselineLoad.dataTimeslices.startTime","memoryBaselineLoad.dataTimeslices.startTime","rolledUpCallsPerMinute.dataTimeslices.startTime","rolledUpNumberOfHits.dataTimeslices.startTime","rolledUpTimeSpentInDB.dataTimeslices.startTime","rolledUpNumberOfConnections.dataTimeslices.startTime","rolledUpCpuSystem.dataTimeslices.startTime","rolledUpCpuUser.dataTimeslices.startTime","rolledUpMemoryLoad.dataTimeslices.startTime","rolledUpTotalExecutions.dataTimeslices.startTime","diskInputLoad.dataTimeslices.startTime","diskOutputLoad.dataTimeslices.startTime","networkInputLoad.dataTimeslices.startTime","networkOutputLoad.dataTimeslices.startTime","rolledUpIOLoad.dataTimeslices.startTime","diskInputLoadBaseline.dataTimeslices.startTime","diskOutputLoadBaseline.dataTimeslices.startTime","networkInputLoadBaseline.dataTimeslices.startTime","networkOutputLoadBaseline.dataTimeslices.startTime","rolledupDiskInputLoad.dataTimeslices.startTime","rolledupDiskOutputLoad.dataTimeslices.startTime","rolledupNetworkInputLoad.dataTimeslices.startTime","rolledupNetworkOutputLoad.dataTimeslices.startTime","callsPerMinute.dataTimeslices.startTime","eventSummary.eventTime"]),response})},DbMonitoringUiService.prototype.getClusterDashboardKPIData_response=function(response){return response},DbMonitoringUiService.prototype.getClusterDashboardHardwareData=function(dbConfigId,includeBaseline,baselineId,timeRange){var path="restui/dbMonitoring/clusterDashboardHardwareData?dbConfigId="+dbConfigId+"&includeBaseline="+includeBaseline+"&baselineId="+baselineId+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getClusterDashboardHardwareData",path,[dbConfigId,includeBaseline,baselineId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["numberOfHits.dataTimeslices.startTime","timeSpentInDB.dataTimeslices.startTime","numberOfConnections.dataTimeslices.startTime","cpuUser.dataTimeslices.startTime","cpuSystem.dataTimeslices.startTime","memoryLoad.dataTimeslices.startTime","callsPerMinuteBaseline.dataTimeslices.startTime","numberOfHitsBaseline.dataTimeslices.startTime","timeSpentInDBBaseline.dataTimeslices.startTime","numberOfConnectionsBaseline.dataTimeslices.startTime","cpuUserBaselineLoad.dataTimeslices.startTime","cpuSystemBaselineLoad.dataTimeslices.startTime","memoryBaselineLoad.dataTimeslices.startTime","rolledUpCallsPerMinute.dataTimeslices.startTime","rolledUpNumberOfHits.dataTimeslices.startTime","rolledUpTimeSpentInDB.dataTimeslices.startTime","rolledUpNumberOfConnections.dataTimeslices.startTime","rolledUpCpuSystem.dataTimeslices.startTime","rolledUpCpuUser.dataTimeslices.startTime","rolledUpMemoryLoad.dataTimeslices.startTime","rolledUpTotalExecutions.dataTimeslices.startTime","diskInputLoad.dataTimeslices.startTime","diskOutputLoad.dataTimeslices.startTime","networkInputLoad.dataTimeslices.startTime","networkOutputLoad.dataTimeslices.startTime","rolledUpIOLoad.dataTimeslices.startTime","diskInputLoadBaseline.dataTimeslices.startTime","diskOutputLoadBaseline.dataTimeslices.startTime","networkInputLoadBaseline.dataTimeslices.startTime","networkOutputLoadBaseline.dataTimeslices.startTime","rolledupDiskInputLoad.dataTimeslices.startTime","rolledupDiskOutputLoad.dataTimeslices.startTime","rolledupNetworkInputLoad.dataTimeslices.startTime","rolledupNetworkOutputLoad.dataTimeslices.startTime","callsPerMinute.dataTimeslices.startTime","eventSummary.eventTime"]),response})},DbMonitoringUiService.prototype.getClusterDashboardHardwareData_response=function(response){return response},DbMonitoringUiService.prototype.getServerDashboardWaitStateData=function(dbServerId,timeRange){var path="restui/dbMonitoring/serverWaitStateDataForDashboard?dbServerId="+dbServerId+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getServerDashboardWaitStateData",path,[dbServerId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getServerDashboardWaitStateData_response=function(response){return response},DbMonitoringUiService.prototype.getClusterDashboardWaitStateData=function(dbConfigId,timeRange){var path="restui/dbMonitoring/clusterWaitStateDataForDashboard?dbConfigId="+dbConfigId+"&timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getClusterDashboardWaitStateData",path,[dbConfigId,timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getClusterDashboardWaitStateData_response=function(response){return response},DbMonitoringUiService.prototype.getQueryStatViewData=function(id){var path="restui/dbMonitoring/queryStatViewData?id="+id,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getQueryStatViewData",path,[id]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getQueryStatViewData_response=function(response){return response},DbMonitoringUiService.prototype.getQueryListViewData=function(id,isCluster){var path="restui/dbMonitoring/queryListViewData?id="+id+"&isCluster="+isCluster,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getQueryListViewData",path,[id,isCluster]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getQueryListViewData_response=function(response){return response},DbMonitoringUiService.prototype.getQueryListData=function(arg0){var path="restui/dbMonitoring/queryListData",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getQueryListData",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getQueryListData_response=function(response){return response},DbMonitoringUiService.prototype.getAllDBServersHealth=function(timeRange){var path="restui/dbMonitoring/getAllDBServerHealth?timeRange="+timeRange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getAllDBServersHealth",path,[timeRange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getAllDBServersHealth_response=function(response){return response},DbMonitoringUiService.prototype.getDBMonApplicationId=function(){var path="restui/dbMonitoring/dbmonAppId",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getDBMonApplicationId",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getDBMonApplicationId_response=function(response){return response},DbMonitoringUiService.prototype.hasDBAgentLicense=function(){var path="restui/dbMonitoring/hasDBAgentLicense",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","hasDBAgentLicense",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.hasDBAgentLicense_response=function(response){return response},DbMonitoringUiService.prototype.getAllDatabases=function(){var path="restui/dbMonitoring/getAllDatabases",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getAllDatabases",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getAllDatabases_response=function(response){return response},DbMonitoringUiService.prototype.getAllConsolidatedDatabases=function(){var path="restui/dbMonitoring/getAllConsolidatedDatabases",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getAllConsolidatedDatabases",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getAllConsolidatedDatabases_response=function(response){return response},DbMonitoringUiService.prototype.getDBServersByConfig=function(configId){var path="restui/dbMonitoring/getDBServersByConfig?configId="+configId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getDBServersByConfig",path,[configId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getDBServersByConfig_response=function(response){return response},DbMonitoringUiService.prototype.getDBServerById=function(dbServerId){var path="restui/dbMonitoring/getDBServerById?dbServerId="+dbServerId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","getDBServerById",path,[dbServerId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.getDBServerById_response=function(response){return response},DbMonitoringUiService.prototype.describe=function(){var path="restui/dbMonitoring/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("DbMonitoringUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},DbMonitoringUiService.prototype.describe_response=function(response){return response},DbMonitoringUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],DbMonitoringUiService.getDBServers_Cache=null,DbMonitoringUiService}(ControllerUiServiceBase);adComponentsModule.service("dbMonitoringUiService",DbMonitoringUiService),define("lib/controller/services/dbMonitoring/DbMonitoringUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},WaitStateFilteringUiService=function(_super){function WaitStateFilteringUiService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(WaitStateFilteringUiService,_super),WaitStateFilteringUiService.instance=function(){return AngularUtil.getADInjector().get("waitStateFilteringUiService")},WaitStateFilteringUiService.prototype.getAllWaitStates=function(){var path="restui/dbMonitoring/waitStateFiltering/getAllWaitStates",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WaitStateFilteringUiService","getAllWaitStates",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WaitStateFilteringUiService.prototype.getAllWaitStates_response=function(response){return response},WaitStateFilteringUiService.prototype.getAllWaitStatesForDBServer=function(dbServerId){var path="restui/dbMonitoring/waitStateFiltering/getAllWaitStatesForDBServer/"+dbServerId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WaitStateFilteringUiService","getAllWaitStatesForDBServer",path,[dbServerId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WaitStateFilteringUiService.prototype.getAllWaitStatesForDBServer_response=function(response){return response},WaitStateFilteringUiService.prototype.getAllWaitStatesForDBCluster=function(dbConfigId){var path="restui/dbMonitoring/waitStateFiltering/getAllWaitStatesForDBCluster/"+dbConfigId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WaitStateFilteringUiService","getAllWaitStatesForDBCluster",path,[dbConfigId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WaitStateFilteringUiService.prototype.getAllWaitStatesForDBCluster_response=function(response){return response},WaitStateFilteringUiService.prototype.updateWaitStateExclude=function(arg0){var path="restui/dbMonitoring/waitStateFiltering/updateWaitStateFiltering",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WaitStateFilteringUiService","updateWaitStateExclude",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WaitStateFilteringUiService.prototype.excludeWaitStatesByName=function(arg0,dbServerId){var path="restui/dbMonitoring/waitStateFiltering/excludeWaitStates/"+dbServerId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WaitStateFilteringUiService","excludeWaitStatesByName",path,[arg0,dbServerId]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WaitStateFilteringUiService.prototype.describe=function(){var path="restui/dbMonitoring/waitStateFiltering/describe",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("WaitStateFilteringUiService","describe",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},WaitStateFilteringUiService.prototype.describe_response=function(response){return response},WaitStateFilteringUiService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],WaitStateFilteringUiService}(ControllerUiServiceBase);adComponentsModule.service("waitStateFilteringUiService",WaitStateFilteringUiService),define("lib/controller/services/dbMonitoring/waitStateFiltering/WaitStateFilteringUiService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},DBMonitoringViewService=function(_super){function DBMonitoringViewService($rootScope,$location,navigationService,notificationService,resourceManager,dialogService){var _this=this;if(_super.call(this,$location,navigationService,notificationService,resourceManager),this.$rootScope=$rootScope,this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.dialogService=dialogService,this.dbMonAppId=0,this.isAllDatabaseCacheStale=!1,this.lastViewedLocation="",MasterService.instance().initData)this.fetchDBMonSpecificData();else var removeListenerFunction=this.$rootScope.$on(MasterService.UEV_INIT_DATA_FETCHED,function(){removeListenerFunction&&removeListenerFunction(),_this.fetchDBMonSpecificData()})}return __extends(DBMonitoringViewService,_super),DBMonitoringViewService.instance=function(){return AngularUtil.getADInjector().get(DBMonitoringViewService.SERVICE_NAME)},DBMonitoringViewService.prototype.viewDBServer=function(dbServerId,isCluster){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,this.getLastSavedTabLocation()),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),isCluster&&params.setParam(UrlConstants.DB_CLUSTER,"true"),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbMonHome=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_SERVER_LIST),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbServersList=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_SERVER_LIST),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbServerHome=function(dbServerId,isCluster){this.saveLastTabLocation(NavigationDataConstants.DB_MONITORING_SERVER_DASHBOARD);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_SERVER_DASHBOARD),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),isCluster&&params.setParam(UrlConstants.DB_CLUSTER,"true"),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewClusterNodeHome=function(dbServerId,dbClusterId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_SERVER_DASHBOARD),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),Util.isValidId(dbClusterId)&&params.setNumberParam(UrlConstants.DB_CLUSTER_ID,dbClusterId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbQueriesList=function(dbServerId,isCluster,dbClusterId){this.saveLastTabLocation(NavigationDataConstants.DB_MONITORING_QUERY_LIST);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_QUERY_LIST),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),isCluster&&params.setParam(UrlConstants.DB_CLUSTER,"true"),Util.isValidId(dbClusterId)&&params.setNumberParam(UrlConstants.DB_CLUSTER_ID,dbClusterId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbQueriesListForSnapshot=function(dbServerId,snapshotGuid){this.saveLastTabLocation(NavigationDataConstants.DB_MONITORING_QUERY_LIST);
var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_QUERY_LIST),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),params.setParam(UrlConstants.DB_SNAPSHOT_GUID,snapshotGuid),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbSessionsList=function(dbServerId,isCluster,dbClusterId){this.saveLastTabLocation(NavigationDataConstants.DB_MONITORING_SESSION_LIST);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_SESSION_LIST),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),isCluster&&params.setParam(UrlConstants.DB_CLUSTER,"true"),Util.isValidId(dbClusterId)&&params.setNumberParam(UrlConstants.DB_CLUSTER_ID,dbClusterId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbClientsList=function(dbServerId,isCluster,dbClusterId){this.saveLastTabLocation(NavigationDataConstants.DB_MONITORING_CLIENT_LIST);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_CLIENT_LIST),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),isCluster&&params.setParam(UrlConstants.DB_CLUSTER,"true"),Util.isValidId(dbClusterId)&&params.setNumberParam(UrlConstants.DB_CLUSTER_ID,dbClusterId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbNamespacesList=function(dbServerId,isCluster,dbClusterId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_NAMESPACE_LIST),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),isCluster&&params.setParam(UrlConstants.DB_CLUSTER,"true"),Util.isValidId(dbClusterId)&&params.setNumberParam(UrlConstants.DB_CLUSTER_ID,dbClusterId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbDatabasesList=function(dbServerId,isCluster,dbClusterId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_DATABASES_LIST),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),isCluster&&params.setParam(UrlConstants.DB_CLUSTER,"true"),Util.isValidId(dbClusterId)&&params.setNumberParam(UrlConstants.DB_CLUSTER_ID,dbClusterId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbSchemasList=function(dbServerId,isCluster,dbClusterId){this.saveLastTabLocation(NavigationDataConstants.DB_MONITORING_SCHEMA_LIST);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_SCHEMA_LIST),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),isCluster&&params.setParam(UrlConstants.DB_CLUSTER,"true"),Util.isValidId(dbClusterId)&&params.setNumberParam(UrlConstants.DB_CLUSTER_ID,dbClusterId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbModulesList=function(dbServerId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_MODULE_LIST),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbProgramsList=function(dbServerId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_PROGRAM_LIST),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbDataFilesList=function(dbServerId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_DATA_FILE_LIST),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbCollectorConfiguration=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_COLLECTOR_LIST),params.setParam(UrlConstants.DB_CREATE_NEW_CONFIG,"true"),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbAppLocation=function(location,dbAppId){var _this=this,doViewLocationFunction=function(){_this.viewApplicationLocation(location,dbAppId)};Util.isValidId(dbAppId)?doViewLocationFunction():DbMonitoringUiService.instance().getDBMonApplicationId().then(function(response){response&&(dbAppId=DbMonitoringUiService.instance().getDBMonApplicationId_response(response),doViewLocationFunction())})},DBMonitoringViewService.prototype.viewDbConfiguration=function(){this.viewDbAppLocation(NavigationDataConstants.DB_MONITORING_CONFIGURATION_HOME,this.dbMonAppId)},DBMonitoringViewService.prototype.createNewDbCollectorConfig=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_COLLECTOR_LIST),params.setParam(UrlConstants.DB_CREATE_NEW_CONFIG,"true"),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.createNewDbCollectorConfigWithParams=function(dbType,dbHost,dbPort){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_COLLECTOR_LIST),params.setParam(UrlConstants.DB_CREATE_NEW_CONFIG,"true"),params.setParam(UrlConstants.DB_TYPE,dbType),params.setParam(UrlConstants.DB_HOST,dbHost),params.setParam(UrlConstants.DB_PORT,dbPort),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.editDbCollectorConfiguration=function(dbServerId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_COLLECTOR_LIST),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewQueryDetails=function(dbServerId,queryHashCode,isCluster,dbClusterId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_QUERY_DETAILS),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),params.setParam(UrlConstants.DB_QUERY_HASHCODE,queryHashCode),isCluster&&params.setParam(UrlConstants.DB_CLUSTER,"true"),Util.isValidId(dbClusterId)&&params.setNumberParam(UrlConstants.DB_CLUSTER_ID,dbClusterId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDbReport=function(location,dbServerId,isCluster,dbClusterId){this.saveLastTabLocation(NavigationDataConstants.DB_MONITORING_WAIT_REPORT);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,location),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),isCluster&&params.setParam(UrlConstants.DB_CLUSTER,"true"),Util.isValidId(dbClusterId)&&params.setNumberParam(UrlConstants.DB_CLUSTER_ID,dbClusterId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewObjectBrowser=function(dbServerId,isCluster,dbClusterId){this.saveLastTabLocation(NavigationDataConstants.DB_MONITORING_OBJECT_BROWSER);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_OBJECT_BROWSER),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),isCluster&&params.setParam(UrlConstants.DB_CLUSTER,"true"),Util.isValidId(dbClusterId)&&params.setNumberParam(UrlConstants.DB_CLUSTER_ID,dbClusterId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewLiveView=function(dbServerId,isCluster,dbClusterId){this.saveLastTabLocation(NavigationDataConstants.DB_MONITORING_LIVE_VIEW);var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_LIVE_VIEW),params.setNumberParam(UrlConstants.DATABASE_ID,dbServerId),isCluster&&params.setParam(UrlConstants.DB_CLUSTER,"true"),Util.isValidId(dbClusterId)&&params.setNumberParam(UrlConstants.DB_CLUSTER_ID,dbClusterId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewClusterTopology=function(dbId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.DB_MONITORING_CLUSTER_TOPOLOGY),params.setNumberParam(UrlConstants.DATABASE_ID,dbId),params.setParam(UrlConstants.DB_CLUSTER,"true"),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDBEventsPage=function(){this.viewDbAppLocation(NavigationDataConstants.DB_MONITORING_EVENTS,this.dbMonAppId)},DBMonitoringViewService.prototype.viewDBMetricBrowser=function(){this.viewDbAppLocation(NavigationDataConstants.METRIC_BROWSER,this.dbMonAppId)},DBMonitoringViewService.prototype.viewDBMonPageByLocation=function(location){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,location),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.viewDBMonPageByLocationAndDBAppId=function(location){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,location),params.setNumberParam(UrlConstants.APPLICATION_ID,this.dbMonAppId),this.navigationService.navigateTo(params.toString())},DBMonitoringViewService.prototype.getDBListLocationBarEntryConfig=function(){var _this=this,config={};return config.clickFn=function(){_this.viewDbServersList()},config.label=this.resourceManager.getString("ui","ms_navItemDatabaseList"),config},DBMonitoringViewService.prototype.getDBLocationBarEntryConfig=function(dbId,dbName){var _this=this,config={};return config.clickFn=function(){_this.viewDbServerHome(dbId)},config.label=dbName,config},DBMonitoringViewService.prototype.getDBClusterLocationBarEntryConfig=function(clusterId,dbName){var _this=this,config={};return config.clickFn=function(){_this.viewDbServerHome(clusterId,!0)},config.label=dbName,config},DBMonitoringViewService.prototype.getDBConfigLocationBarEntryConfig=function(){var _this=this,config={};return config.clickFn=function(){_this.viewDbConfiguration()},config.label=this.resourceManager.getString("ui","ms_configureNavItem"),config},DBMonitoringViewService.prototype.viewAlertRespondHome=function(){AlertRespondViewService.instance().viewAlertRespondHome(this.dbMonAppId)},DBMonitoringViewService.prototype.viewPolicies=function(){AlertRespondViewService.instance().viewPolicies(this.dbMonAppId)},DBMonitoringViewService.prototype.viewHealthRules=function(){AlertRespondViewService.instance().viewHealthRules(this.dbMonAppId)},DBMonitoringViewService.prototype.viewActions=function(){AlertRespondViewService.instance().viewActions(this.dbMonAppId)},DBMonitoringViewService.prototype.viewEmailDigests=function(){AlertRespondViewService.instance().viewEmailDigests(this.dbMonAppId)},DBMonitoringViewService.prototype.saveLastTabLocation=function(location){location||(location=NavigationDataConstants.DB_MONITORING_SERVER_DASHBOARD),this.lastViewedLocation=location},DBMonitoringViewService.prototype.getLastSavedTabLocation=function(){var lastLocation=this.lastViewedLocation;return lastLocation||(lastLocation=NavigationDataConstants.DB_MONITORING_SERVER_DASHBOARD),lastLocation},DBMonitoringViewService.prototype.fetchDBMonSpecificData=function(){this.getDBMonAppId()},DBMonitoringViewService.prototype.getDBMonAppId=function(){DbMonitoringUiService.instance().getDBMonApplicationId().then(this.onGetDBMonAppId.bind(this),this.onGetDBMonAppIdError.bind(this))},DBMonitoringViewService.prototype.onGetDBMonAppId=function(response){var returnedId=DbMonitoringUiService.instance().getDBMonApplicationId_response(response);returnedId&&returnedId>0?this.dbMonAppId=returnedId:this.onGetDBMonAppIdError()},DBMonitoringViewService.prototype.onGetDBMonAppIdError=function(){ADLoggerService.error("Failed to get DBMon app id.")},DBMonitoringViewService.SERVICE_NAME="dbMonitoringViewService",DBMonitoringViewService.$inject=["$rootScope","$location","navigationService","notificationService","resourceManager","dialogService"],DBMonitoringViewService}(ViewServiceBase);adComponentsModule.service(DBMonitoringViewService.SERVICE_NAME,DBMonitoringViewService),define("app/view/dbMonitoring/DBMonitoringViewService",function(){}),define("app/view/dbMonitoring/utils/DBGridColumnsUtil",["require","exports"],function(require,exports){var DBGridColumnsUtil=function(){function DBGridColumnsUtil(){}return DBGridColumnsUtil.initGridColumnsTypeForLiveView=function(){for(var index in DBGridColumnsUtil.numericColumnsForLiveView){var column=DBGridColumnsUtil.numericColumnsForLiveView[index];this.gridColumnsType[column]=DBGridColumnsUtil.NUMERIC_TYPE}},DBGridColumnsUtil.initGridColumnsTypeForObjectBrowser=function(){for(var index in DBGridColumnsUtil.numericColumnsForObjectBrowser){var column=DBGridColumnsUtil.numericColumnsForObjectBrowser[index];this.gridColumnsType[column]=DBGridColumnsUtil.NUMERIC_TYPE}},DBGridColumnsUtil.getGridColumnType=function(columnName){var columnType=this.gridColumnsType[columnName];return columnType?columnType:"string"},DBGridColumnsUtil.gridColumnsType={},DBGridColumnsUtil.numericColumnsForLiveView=["SID","SERIAL#","SPID","SECONDS_IN_WAIT","Id","Time","CLIENT_PID","AGENT_ID","cpu","physical_io","blocked","datid","pid","usesysid","client_port","fid","spid","blk_spid","block_xloid","TransactionID"],DBGridColumnsUtil.numericColumnsForObjectBrowser=["USER_ID","TYPE","STATISTIC#","CLASS","TOTAL_WAITS","TIME_WAITED","TOTAL_TIMEOUTS","AVERAGE_WAIT","cntr_value","dbid","compatibility_level","value","user_id","connections","failed_logins","locked","suid","totcpu","totio","usesysid","datid","numbackends","xact_commit","xact_rollback","blks_read","blks_hit","tup_returned","tup_fetched","tup_inserted","tup_updated","tup_deleted","conflicts","temp_files","temp_bytes","deadlocks","blk_read_time","blk_write_time","stats_reset","relid","seq_scan","seq_tup_read","idx_scan","idx_tup_fetch","n_tup_ins","n_tup_upd","n_tup_del","n_tup_hot_upd","n_live_tup","n_dead_tup","count"],DBGridColumnsUtil.NUMERIC_TYPE="number",DBGridColumnsUtil}();exports.DBGridColumnsUtil=DBGridColumnsUtil}),define("app/view/dbMonitoring/utils/DBObjectBrowserUtils",["require","exports","app/view/dbMonitoring/utils/DBServerTypeUtils","app/view/dbMonitoring/utils/DbMonitoringUtils"],function(require,exports,DBServerTypeUtils,DbMonitoringUtils){var DBObjectBrowserUtils=function(){function DBObjectBrowserUtils(){}return DBObjectBrowserUtils.getTypeDisplayName=function(type){switch(type){case DBObjectBrowserUtils.TABLE_ABBREV:return DBObjectType.TABLE;case DBObjectBrowserUtils.VIEW_ABBREV:return DBObjectType.VIEW;case DBObjectBrowserUtils.ALIAS_ABBREV:return DBObjectType.ALIAS;case DBObjectBrowserUtils.CREATED_TEMPORARY_TABLE_ABBREV:return DBObjectType.CREATED_TEMPORARY_TABLE;case DBObjectBrowserUtils.HIERARCHY_TABLE_ABBREV:return DBObjectType.HIERARCHY_TABLE;case DBObjectBrowserUtils.DETACHED_TABLE_ABBREV:return DBObjectType.DETACHED_TABLE;case DBObjectBrowserUtils.NICKNAME_ABBREV:return DBObjectType.NICKNAME;case DBObjectBrowserUtils.MATERIALIZED_QUERY_TABLE_ABBREV:return DBObjectType.MATERIALIZED_QUERY_TABLE;case DBObjectBrowserUtils.TYPED_TABLE_ABBREV:return DBObjectType.TYPED_TABLE;case DBObjectBrowserUtils.TYPED_VIEW_ABBREV:return DBObjectType.TYPED_VIEW;default:return type}},DBObjectBrowserUtils.isTransientDataInJson=function(dbType){return DBServerTypeUtils.isMongo(dbType)},DBObjectBrowserUtils.TABLE_ABBREV="T",DBObjectBrowserUtils.VIEW_ABBREV="V",DBObjectBrowserUtils.ALIAS_ABBREV="A",DBObjectBrowserUtils.CREATED_TEMPORARY_TABLE_ABBREV="G",DBObjectBrowserUtils.HIERARCHY_TABLE_ABBREV="H",DBObjectBrowserUtils.DETACHED_TABLE_ABBREV="L",DBObjectBrowserUtils.NICKNAME_ABBREV="N",DBObjectBrowserUtils.MATERIALIZED_QUERY_TABLE_ABBREV="S",DBObjectBrowserUtils.TYPED_TABLE_ABBREV="U",DBObjectBrowserUtils.TYPED_VIEW_ABBREV="W",DBObjectBrowserUtils.OBJECT_BROWSER_GRID_COLUMN_HEADERS={id:"ID",db:"Database",indexSize:"Index Size",dataSize:"Data Size","repl.setName":"Replica Set Name","repl.ismaster":"Primary","repl.hosts":"Hosts in Replica Set",mongoVersion:"Mongo Version","_id.ns":"Namespace","_id.shard":"Shard",count:"Count",ns:"Namespace",size:"Size Used",storageSize:"Pre-Allocated Size",avgObjSize:"Avg Object Size",numExtents:"# Extents",totalIndexSize:"Total Index Size"},DBObjectBrowserUtils}();return adComponentsModule.filter("adDbObjectBrowserTableHeader",function(){return function(input){var header=DBObjectBrowserUtils.OBJECT_BROWSER_GRID_COLUMN_HEADERS[input];return header?header:DbMonitoringUtils.removeUnderscoreAndCapitalize(input)}}),DBObjectBrowserUtils}),define("app/view/dbMonitoring/objectBrowser/DBObjectBrowserService",["require","exports"],function(){var DBObjectBrowserService=function(){function DBObjectBrowserService(){}return DBObjectBrowserService.instance=function(){return AngularUtil.getADInjector().get("dbObjectBrowserService")},DBObjectBrowserService.prototype.reset=function(){this.dbServer=null,this.gridDataVariable=null,this.gridPageHeader=null,this.gridData=null},DBObjectBrowserService}();return adComponentsModule.service("dbObjectBrowserService",DBObjectBrowserService),DBObjectBrowserService}),define("app/view/dbMonitoring/common/DBTransientChannel/DBTransientChannelService",["require","exports"],function(require,exports){var DBTransientChannelService=function(){function DBTransientChannelService($interval,$timeout,transientEventManagerService){this.$interval=$interval,this.$timeout=$timeout,this.transientEventManagerService=transientEventManagerService}return DBTransientChannelService.instance=function(){return DBTransientChannelService._instance||(DBTransientChannelService._instance=new DBTransientChannelService(AngularUtil.getNgInjector().get("$interval"),AngularUtil.getNgInjector().get("$timeout"),new TransientEventManagerService(TransientEventManagerUiService.instance()))),DBTransientChannelService._instance},DBTransientChannelService.prototype.createSessionAndGetData=function(nodeId,sessionType,operation,dbServerType,nameValuePair,callBackObj,onDataCallback,onErrorCallback,statusViewObject){var transientRequest=new DBTransientRequest(this.$interval,this.$timeout,this.transientEventManagerService,nodeId,sessionType,operation,dbServerType,nameValuePair,callBackObj,onDataCallback,onErrorCallback,statusViewObject);return transientRequest.start(),transientRequest},DBTransientChannelService.getTransientStatusObject=function(){return{message:ResourceManager.instance().getString("dbmon","ms_dbTransientChannelSendingDataToAgent")}},DBTransientChannelService.getTransientChannelTimeoutMessage=function(){var timeoutInSeconds=DBTransientChannelService.RETRY_INTERVAL_IN_MS*DBTransientChannelService.RETRY_COUNT/DateTimeUtil.MILLISEC_PER_SEC;return ResourceManager.instance().getString("dbmon","ms_dbTransientChannelTimeoutError",[timeoutInSeconds])},DBTransientChannelService.$inject=["$interval","$timeout","transientEventManagerService"],DBTransientChannelService.RETRY_INTERVAL_IN_MS=2*DateTimeUtil.MILLISEC_PER_SEC,DBTransientChannelService.RETRY_COUNT=35,DBTransientChannelService.TIMEOUT_IN_MSEC=DBTransientChannelService.RETRY_INTERVAL_IN_MS*DBTransientChannelService.RETRY_COUNT,DBTransientChannelService}();exports.DBTransientChannelService=DBTransientChannelService;var DBTransientRequest=function(){function DBTransientRequest($interval,$timeout,transientEventManagerService,nodeId,sessionType,operation,dbServerType,nameValuePair,callBackObj,onDataCallback,onErrorCallback,statusViewObject){this.$interval=$interval,this.$timeout=$timeout,this.transientEventManagerService=transientEventManagerService,this.nodeId=nodeId,this.sessionType=sessionType,this.operation=operation,this.dbServerType=dbServerType,this.nameValuePair=nameValuePair,this.callBackObj=callBackObj,this.onDataCallback=onDataCallback,this.onErrorCallback=onErrorCallback,this.statusViewObject=statusViewObject,this.callbackContext={onDataCallback:onDataCallback,onErrorCallBack:onErrorCallback,statusViewObject:statusViewObject}}return DBTransientRequest.prototype.start=function(){var _this=this,onSessionCreated=function(session){_this.startOp(session,!0)};this.transientEventManagerService.startSession(this.nodeId,this.sessionType,onSessionCreated)},DBTransientRequest.prototype.cancel=function(){this.stopPollingAndTimeout()},DBTransientRequest.prototype.startOp=function(session,retry){var _this=this;void 0===retry&&(retry=!1);var onOperationStarted=function(operationId){var onSessionCreated=function(session){_this.startOp(session,!1)};if(!operationId){if(retry)return void _this.transientEventManagerService.startSession(_this.nodeId,_this.sessionType,onSessionCreated,null,!0);_this.handleError(session)}_this.retrieveData(operationId,session)},startOpData={session:session,operation:this.operation,nameValuePair:this.nameValuePair};this.transientEventManagerService.startDBMonOperation(startOpData,onOperationStarted)},DBTransientRequest.prototype.retrieveData=function(operationId,session){var _this=this,thisObj=this;this.interval=this.$interval(function(){thisObj.transientEventManagerService.getData(session,thisObj.operation,operationId,onGetData)},DBTransientChannelService.RETRY_INTERVAL_IN_MS,DBTransientChannelService.RETRY_COUNT),this.callTimeout=this.$timeout(function(){thisObj.handleTimeout(session)},DBTransientChannelService.TIMEOUT_IN_MSEC);var onGetData=function(data){data&&((1==data.errorOccured||data.exceptionMessage)&&thisObj.handleError(session,data.exceptionMessage),data.data&&data.data.length>0?(thisObj.stopPollingAndTimeout(),thisObj.onDataCallback.call(thisObj.callBackObj,data)):data.sentToAgent&&_this.statusViewObject&&(thisObj.statusViewObject.message=ResourceManager.instance().getString("dbmon","ms_dbTransientChannelLoading")))}},DBTransientRequest.prototype.handleError=function(session,exceptionMessage){if(this.stopPollingAndTimeout(),ADLoggerService.error("Error encountered during session: "+session.sessionId+". Not closing the session though."),ADLoggerService.error("Exception message: "+exceptionMessage),this.callbackContext.onErrorCallBack){var prefixExceptionMessage=ResourceManager.instance().getString("dbmon","ms_dbTransientChannelErrorPrefix");exceptionMessage&&(exceptionMessage=prefixExceptionMessage+" "+exceptionMessage),this.callbackContext.onErrorCallBack.call(this.callBackObj,exceptionMessage)}},DBTransientRequest.prototype.handleTimeout=function(session,exceptionMessage){this.stopPollingAndTimeout(),ADLoggerService.error("Request timed out for session: "+session.sessionId+". Closing the session."),this.transientEventManagerService.closeSession(this.nodeId,session.sessionId,this.sessionType),this.callbackContext.onErrorCallBack&&(exceptionMessage||(exceptionMessage=DBTransientChannelService.getTransientChannelTimeoutMessage()),this.callbackContext.onErrorCallBack.call(this.callBackObj,exceptionMessage))},DBTransientRequest.prototype.stopPollingAndTimeout=function(){this.$interval.cancel(this.interval),this.$timeout.cancel(this.callTimeout)},DBTransientRequest}();exports.DBTransientRequest=DBTransientRequest,adComponentsModule.service("dbTransientEventManagerService",DBTransientChannelService)}),define("app/view/dbMonitoring/objectBrowser/pages/DBObjectBrowserPagesControllerBase",["require","exports","../../utils/DBGridColumnsUtil","app/view/dbMonitoring/utils/DBServerTypeUtils","app/view/dbMonitoring/utils/DbMonitoringUtils","app/view/dbMonitoring/utils/DBObjectBrowserUtils","../DBObjectBrowserService","app/view/dbMonitoring/common/DBTransientChannel/DBTransientChannelService"],function(require,exports,dbGridColumnsUtil,DBServerTypeUtils,DbMonitoringUtils,DBObjectBrowserUtils,DBObjectBrowserService,DBTransientChannelService){var DBObjectBrowserPagesControllerBase=function(){function DBObjectBrowserPagesControllerBase(dbObjectBrowserService,resourceManager){this.dbObjectBrowserService=dbObjectBrowserService,this.resourceManager=resourceManager,this.exception=DBTransientChannelService.DBTransientChannelService.getTransientChannelTimeoutMessage(),this.pageTitle="",this.transientChannelStatus=DBTransientChannelService.DBTransientChannelService.getTransientStatusObject(),this.dbTransientRequest=null,this.dbTransientEventManagerService=DBTransientChannelService.DBTransientChannelService.instance(),this.isDebugMode=!1,this.quickViewLink="",this.injectorService=AngularUtil.getADInjector().get("injectorService")}return DBObjectBrowserPagesControllerBase.prototype.init=function(){this.isDebugMode=this.injectorService.appConfig().debugMode,dbGridColumnsUtil.DBGridColumnsUtil.initGridColumnsTypeForObjectBrowser(),this.setupEventListeners(),this.fetchData()},DBObjectBrowserPagesControllerBase.prototype.fetchData=function(){!this.dbObjectBrowserService.gridDataVariable},DBObjectBrowserPagesControllerBase.prototype.onDataFetch=function(transientData){if(transientData&&transientData.data){if(this.isLoading=!1,this.isError=!1,this.dbObjectBrowserService.gridData=transientData,DBObjectBrowserUtils.isTransientDataInJson(this.dbObjectBrowserService.dbType))return void this.processJsonResponse(transientData,null);var data=transientData.data;if(data){var objectResult=data[0];if(!objectResult)return void(this.noData=!0);var resultMap=objectResult.queryResultMap;if(!resultMap)return void(this.noData=!0);var usersData=resultMap[this.dbObjectBrowserService.gridDataVariable];if(!usersData)return void(this.noData=!0);var columnNames=usersData[DBObjectBrowserPagesControllerBase.COLUMN_NAME],rowData=usersData[DBObjectBrowserPagesControllerBase.TABLE];return columnNames&&rowData?void this.render(columnNames,rowData):void(this.noData=!0)}}},DBObjectBrowserPagesControllerBase.prototype.processJsonResponse=function(transientData,rowNames){var results=transientData.data;if(!results||0==results.length)return void(this.noData=!0);var rowData,result=results[0],jsonResult=result.jsonResult;try{rowData=JSON.parse(jsonResult)}catch(e){}return rowNames&&rowData?void this.render(rowNames,[rowData]):void(this.noData=!0)},DBObjectBrowserPagesControllerBase.prototype.render=function(){ADLoggerService.error("Render function should be overridden by sub classes.")},DBObjectBrowserPagesControllerBase.prototype.onError=function(error){this.isLoading=!1,this.isError=!0,error&&(this.exception=error)},DBObjectBrowserPagesControllerBase.prototype.getString=function(key){return this.resourceManager.getString("dbmon",key)},DBObjectBrowserPagesControllerBase.prototype.formatValue=function(dbType,propName,propValue,numericColumns){if(!dbType||!propName||Util.isUndefOrNull(propValue))return propValue;if(numericColumns&&numericColumns[propName])return propValue=parseInt(propValue);if(DBServerTypeUtils.isMSSql(dbType))switch(propName){case DBObjectBrowserPagesControllerBase.PHYSICAL_MEMORY:var strVal=propValue.substr(0,propValue.indexOf("(")-1).trim();return(parseInt(strVal)/DBObjectBrowserPagesControllerBase.MB_PER_GB).toFixed(2)+" GB";default:return propValue}if(DBServerTypeUtils.isPostGreSql(dbType))switch(propName){case DBObjectBrowserPagesControllerBase.PG_DATABASE_SIZE:return(parseInt(propValue)/DBObjectBrowserPagesControllerBase.BYTES_PER_MB).toFixed(2)+" MB";default:return propValue}if(DBServerTypeUtils.isSybase(dbType))switch(propName){case DBObjectBrowserPagesControllerBase.VERSION:var retVal=propValue.replace(/\//g,"<br/>");return retVal;default:return propValue}if(DBServerTypeUtils.isMySql(dbType)||DBServerTypeUtils.isMongo(dbType))switch(propName){case DBObjectBrowserPagesControllerBase.INDEX_LENGTH:case DBObjectBrowserPagesControllerBase.DATA_LENGTH:case DBObjectBrowserPagesControllerBase.INDEX_SIZE:case DBObjectBrowserPagesControllerBase.DATA_SIZE:case DBObjectBrowserPagesControllerBase.SIZE:case DBObjectBrowserPagesControllerBase.STORAGE_SIZE:case DBObjectBrowserPagesControllerBase.AVG_OBJ_SIZE:case DBObjectBrowserPagesControllerBase.TOTAL_INDEX_SIZE:return(parseInt(propValue)/DBObjectBrowserPagesControllerBase.BYTES_PER_MB).toFixed(2)+" MB";case DBObjectBrowserPagesControllerBase.UPTIME:case DBObjectBrowserPagesControllerBase.UP:return DbMonitoringUtils.secondsToLongDateString(parseInt(propValue));case DBObjectBrowserPagesControllerBase.DB_STARTED:var startDate=new Date;return startDate.setTime(propValue*DateTimeUtil.MILLISEC_PER_SEC),startDate;case DBObjectBrowserPagesControllerBase.PID:var pid=propValue.$numberLong;return pid;default:return propValue}if(DBServerTypeUtils.isDB2(dbType))switch(propName){case DBObjectBrowserPagesControllerBase.INDEX_COLUMN_DB2:return"<a ng-click='controller.onDB2IndexNameClick(\""+propValue+"\")'>"+propValue+"</a>";default:return propValue}return propValue},DBObjectBrowserPagesControllerBase.prototype.setupEventListeners=function(){ADLoggerService.error("setupEventListeners function should be overridden by sub classes.")},DBObjectBrowserPagesControllerBase.COLUMN_NAME="columnNames",DBObjectBrowserPagesControllerBase.TABLE="table",DBObjectBrowserPagesControllerBase.UPTIME="Uptime",DBObjectBrowserPagesControllerBase.UP="up",DBObjectBrowserPagesControllerBase.DB_STARTED="Database started",DBObjectBrowserPagesControllerBase.PID="pid",DBObjectBrowserPagesControllerBase.SIZE="size",DBObjectBrowserPagesControllerBase.STORAGE_SIZE="storageSize",DBObjectBrowserPagesControllerBase.AVG_OBJ_SIZE="avgObjSize",DBObjectBrowserPagesControllerBase.TOTAL_INDEX_SIZE="totalIndexSize",DBObjectBrowserPagesControllerBase.PHYSICAL_MEMORY="PhysicalMemory",DBObjectBrowserPagesControllerBase.PG_DATABASE_SIZE="pg_database_size",DBObjectBrowserPagesControllerBase.VERSION="Version",DBObjectBrowserPagesControllerBase.DATA_LENGTH="Data_Length",DBObjectBrowserPagesControllerBase.INDEX_LENGTH="Index_Length",DBObjectBrowserPagesControllerBase.INDEX_SIZE="indexSize",DBObjectBrowserPagesControllerBase.DATA_SIZE="dataSize",DBObjectBrowserPagesControllerBase.INDEX_COLUMN_DB2="INDNAME",DBObjectBrowserPagesControllerBase.MB_PER_GB=1024,DBObjectBrowserPagesControllerBase.BYTES_PER_MB=1048576,DBObjectBrowserPagesControllerBase}();exports.DBObjectBrowserPagesControllerBase=DBObjectBrowserPagesControllerBase}),define("app/view/dbMonitoring/objectBrowser/DBObjectBrowserConstants",["require","exports"],function(require,exports){var DBObjectBrowserConstants=function(){function DBObjectBrowserConstants(){}return DBObjectBrowserConstants.GRID_PAGE="grid",DBObjectBrowserConstants.LANDING="landing",DBObjectBrowserConstants.OBJECT_DETAIL="objectDetails",DBObjectBrowserConstants.DB_OBJECT_BROWSER_PAGE_CHANGE_EVENT="pageChanged",DBObjectBrowserConstants.DB_OBJECT_CHANGE_EVENT="objectChanged",DBObjectBrowserConstants.ORACLE_OBJECT_SEARCH="oracleObjectSearch",DBObjectBrowserConstants.DB2_OBJECT_SEARCH="db2ObjectSearch",DBObjectBrowserConstants.DEFAULT_SERVER_PAGE="server_specs",DBObjectBrowserConstants.ERROR_LOG="ERROR_LOG",DBObjectBrowserConstants.DBMON_GET_OBJECTS="DBMON_GET_OBJECTS",DBObjectBrowserConstants.DBMON_SEARCH_OBJECTS="DBMON_SEARCH_OBJECTS",DBObjectBrowserConstants.DB_OBJECT_BROWSER_OBJECT_TYPE="dbObjectType",DBObjectBrowserConstants.DB_OBJECT_BROWSER_OBJECT_NAME="dbObjectName",DBObjectBrowserConstants.DB_OBJECT_BROWSER_OBJECT_DATABASE="dbObjectDatabase",DBObjectBrowserConstants.DB_MONGO_OBJECT_CLUSTER="cluster",DBObjectBrowserConstants.DB_MONGO_OBJECT_SHARDS="shards",DBObjectBrowserConstants.DB_MONGO_OBJECT_STORAGE="storage",DBObjectBrowserConstants}();exports.DBObjectBrowserConstants=DBObjectBrowserConstants});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/dbMonitoring/objectBrowser/pages/objectDetails/DBObjectBrowserObjectDetailsController",["require","exports","../DBObjectBrowserPagesControllerBase","app/view/dbMonitoring/objectBrowser/DBObjectBrowserConstants","../../DBObjectBrowserService","app/view/dbMonitoring/utils/DBServerTypeUtils","app/view/dbMonitoring/utils/DbMonitoringUtils","app/view/dbMonitoring/utils/DBObjectBrowserUtils"],function(require,exports,DBObjectBrowserPagesControllerBase,DBObjectBrowserConstants,DBObjectBrowserService,DBServerTypeUtils,DbMonitoringUtils,DBObjectBrowserUtils){var DBObjectBrowserObjectDetailsController=function(_super){function DBObjectBrowserObjectDetailsController($scope,resourceManager){_super.call(this,DBObjectBrowserService.instance(),resourceManager),this.$scope=$scope,this.resourceManager=resourceManager,this.dbGetObjectDetailsTransientRequest=null,this.$scope.controller=this,this.init()
}return __extends(DBObjectBrowserObjectDetailsController,_super),DBObjectBrowserObjectDetailsController.prototype.fetchData=function(){var _this=this,selectedNode=this.dbObjectBrowserService.selectedNode;if(selectedNode){var selectedNodeData=selectedNode.raw,name=selectedNodeData.qtip?selectedNodeData.qtip:selectedNodeData.text,type=selectedNodeData.type;this.objectType=type;var databaseName="";if(this.isTableObject()||this.isViewObject()){var parentNode=selectedNode.parentNode,parentNodeData=parentNode.raw;databaseName=parentNodeData.text}else databaseName=name;var objectDetailsParams={objectName:name,objectType:type.toUpperCase(),databaseName:databaseName};if($(".ads-db-object-details-tableView").empty(),type==DBObjectType.DATABASE){if(DBServerTypeUtils.isOracle(this.dbObjectBrowserService.dbType)||DBServerTypeUtils.isDB2(this.dbObjectBrowserService.dbType))return;if(DBServerTypeUtils.isMySql(this.dbObjectBrowserService.dbType)||DBServerTypeUtils.isMongo(this.dbObjectBrowserService.dbType)){var timeout=AngularUtil.getADInjector().get("$timeout");return void timeout(function(){_this.title=name;var tableObjectNames={},viewObjectNames={};tableObjectNames.name=DBObjectBrowserObjectDetailsController.TABLES,tableObjectNames.queryResult={},tableObjectNames.queryResult.columnNames=[DBObjectBrowserObjectDetailsController.TABLES],tableObjectNames.queryResult.table=[],viewObjectNames.name=DBObjectBrowserObjectDetailsController.VIEWS,viewObjectNames.queryResult={},viewObjectNames.queryResult.columnNames=[DBObjectBrowserObjectDetailsController.VIEWS],viewObjectNames.queryResult.table=[];var allChildNodes=selectedNode.childNodes;if(allChildNodes){for(var i=0;i<allChildNodes.length;++i){var nodeData=allChildNodes[i].raw,nodeName=nodeData.qtip?nodeData.qtip:nodeData.text,nodeType=nodeData.type;nodeType.toLowerCase()==DBObjectType.TABLE.toLowerCase()&&tableObjectNames.queryResult.table.push({Tables:nodeName}),nodeType.toLowerCase()==DBObjectType.VIEW.toLowerCase()&&viewObjectNames.queryResult.table.push({Views:nodeName})}_this.renderTableObjectView(tableObjectNames),_this.renderTableObjectView(viewObjectNames)}},100)}}if(this.isLoading=!0,this.isError=!1,this.title=name,this.dbGetObjectDetailsTransientRequest=this.dbTransientEventManagerService.createSessionAndGetData(this.dbObjectBrowserService.dbServer.nodeId,TransientEventManagerService.SESSION_TYPE_DBMON,DBObjectBrowserObjectDetailsController.DBMON_OBJECT_DETAILS,null,objectDetailsParams,this,this.onObjectDataFetch,this.onError),this.isDebugMode){var timeRangeSpecifierFixedTimeRange=DateTimeUtil.convertToBetweenTimes(TimeRangeService.instance().currentTimeRange),urlParamsWithFixedTimeRange=(TimeRangeService.instance().convertToPreferenceString(timeRangeSpecifierFixedTimeRange,"."),URLParams.getCurrentUrlParams());urlParamsWithFixedTimeRange.setParam(DBObjectBrowserConstants.DBObjectBrowserConstants.DB_OBJECT_BROWSER_OBJECT_NAME,objectDetailsParams.objectName),urlParamsWithFixedTimeRange.setParam(DBObjectBrowserConstants.DBObjectBrowserConstants.DB_OBJECT_BROWSER_OBJECT_TYPE,objectDetailsParams.objectType),urlParamsWithFixedTimeRange.setParam(DBObjectBrowserConstants.DBObjectBrowserConstants.DB_OBJECT_BROWSER_OBJECT_DATABASE,objectDetailsParams.databaseName);var newPath="/"+urlParamsWithFixedTimeRange.toStringNoForwardSlash(),currentPath=InjectorService.instance().$location().path(),currentAbsUrl=InjectorService.instance().$location().absUrl(),absUrlWithFixedTime=currentAbsUrl.replace(currentPath,newPath);this.quickViewLink=absUrlWithFixedTime}}},DBObjectBrowserObjectDetailsController.prototype.onObjectDataFetch=function(transientData){var _this=this;if(transientData&&transientData.data){this.isLoading=!1,this.isError=!1;var resultSet=transientData.data[0];if(resultSet||(this.isError=!0),DBObjectBrowserUtils.isTransientDataInJson(this.dbObjectBrowserService.dbType)){var columns=[];return DBServerTypeUtils.isMongo(this.dbObjectBrowserService.dbType)&&(columns=DBObjectBrowserObjectDetailsController.MONGO_OBJECT_DETAIL_TABLE_COLUMN_NAMES),void this.processJsonResponse(transientData,columns)}var data=resultSet.data;if(data){DBServerTypeUtils.isSybase(this.dbObjectBrowserService.dbType)&&data[0]&&data[0].renderAsObjectType==DBObjectType.TABLE&&(this.objectType=DBObjectType.TABLE);var timeout=AngularUtil.getADInjector().get("$timeout");timeout(function(){if(_this.isTableObject()||_this.isDatabaseObject()){$(".ads-db-object-details-tableView").empty();for(var i=0;i<data.length;++i)_this.renderTableObjectView(data[i])}else _this.isViewObject()&&(_this.viewObjectRendererProps={text:""},_this.renderViewObject(data[0]))},10)}}},DBObjectBrowserObjectDetailsController.prototype.render=function(rowNames,rowData){var _this=this;if(!rowNames||!rowData||0==rowData.length)return void(this.isError=!0);if(this.isTableObject()){var data=rowData[0];$(".ads-db-object-details-tableView").empty();var table="<table class='table ads-table'>";_.each(rowNames,function(rowName){if(table+="<tr>",Util.isDefAndNotNull(data[rowName])){var formattedName=DBObjectBrowserUtils.OBJECT_BROWSER_GRID_COLUMN_HEADERS[rowName];formattedName||(formattedName=rowName),table+="<td>"+formattedName+"</td>",table+="<td>"+_this.formatValue(_this.dbObjectBrowserService.dbType,rowName,data[rowName])+"</td>"}table+="</tr>"})}var tableHeaderHtml="<h1 class='ads-table-title'>"+DBObjectBrowserObjectDetailsController.TABLE_PROPERTIES+"</h1>";$(".ads-db-object-details-tableView").append(tableHeaderHtml);var $compile=SharedInjectorService.instance().$compile(),jqueryElem=$compile(table)(this.$scope);$(".ads-db-object-details-tableView").append(jqueryElem)},DBObjectBrowserObjectDetailsController.prototype.renderTableObjectView=function(data){if(!data)return void(this.isError=!0);var tableHeader=data.name,queryResult=data.queryResult;if(!queryResult)return void(this.isError=!0);var columnNames=queryResult.columnNames,tableData=queryResult.table;if(columnNames&&tableData&&0!=tableData.length){var table="";if(tableHeader.toLowerCase()==DBObjectBrowserObjectDetailsController.TABLE_PROPERTIES.toLowerCase()){var obj=tableData[0];if(!obj)return;var table="<table class='table ads-table'>";for(var prop in obj)table+="<tr>",obj.hasOwnProperty(prop)&&(table+="<td>"+DbMonitoringUtils.removeUnderscoreAndCapitalize(prop)+"</td>",table+="<td>"+obj[prop]+"</td>"),table+="</tr>"}else{for(var table="<table class='table ads-table'><thead class='ads-table-header-row'><tr>",i=0;i<columnNames.length;++i)table+="<th>"+DbMonitoringUtils.removeUnderscoreAndCapitalize(columnNames[i])+"</th>";if(table+="</tr></thead>",0==tableData.length)table+="</table>",table+="<div class='ads-table-no-data'>"+this.getString("ms_noDataAvailable")+"</div>";else{for(var rowIndex=0;rowIndex<tableData.length;++rowIndex){var rowData=tableData[rowIndex];table+="<tr>";for(var colIndex=0;colIndex<columnNames.length;++colIndex){var colValue="";rowData[columnNames[colIndex]]&&(colValue=rowData[columnNames[colIndex]]),colValue=this.formatValue(this.dbObjectBrowserService.dbType,columnNames[colIndex],this.preserveNewLineAndSpace(colValue)),table+="<td style='word-break: break-all;'>"+colValue+"</td>"}table+="</tr>"}table+="</table>"}}var tableHeaderHtml="<h1 class='ads-table-title'>"+tableHeader+"</h1>";$(".ads-db-object-details-tableView").append(tableHeaderHtml);var $compile=AngularUtil.getADInjector().get("$compile"),jqueryElem=$compile(table)(this.$scope);$(".ads-db-object-details-tableView").append(jqueryElem)}},DBObjectBrowserObjectDetailsController.prototype.isTableObject=function(){return this.objectType.toLowerCase()==DBObjectType.TABLE.toLowerCase()},DBObjectBrowserObjectDetailsController.prototype.isViewObject=function(){return this.objectType.toLowerCase()==DBObjectType.VIEW.toLowerCase()},DBObjectBrowserObjectDetailsController.prototype.isDatabaseObject=function(){return this.objectType.toLowerCase()==DBObjectType.DATABASE.toLowerCase()},DBObjectBrowserObjectDetailsController.prototype.setupEventListeners=function(){var _this=this;this.$scope.$on(DBObjectBrowserConstants.DBObjectBrowserConstants.DB_OBJECT_CHANGE_EVENT,this.onObjectChanged.bind(this)),this.$scope.$on("$destroy",function(){_this.dbGetObjectDetailsTransientRequest&&_this.dbGetObjectDetailsTransientRequest.cancel()})},DBObjectBrowserObjectDetailsController.prototype.clearView=function(){$(".ads-db-object-details-tableView").empty()},DBObjectBrowserObjectDetailsController.prototype.onObjectChanged=function(){this.fetchData()},DBObjectBrowserObjectDetailsController.prototype.onCopyToClipBoard=function(){WebUtil.copyToClipboard(this.quickViewLink)},DBObjectBrowserObjectDetailsController.prototype.renderViewObject=function(data){if(!data)return void(this.isError=!0);var queryResult=(data.name,data.queryResult),title=queryResult.columnNames[0];if(title){for(var tableData=queryResult.table,concatentatedText="",rowIndex=0;rowIndex<tableData.length;++rowIndex){var rowData=tableData[rowIndex];rowData[title]&&(concatentatedText+=rowData[title],concatentatedText=this.preserveNewLineAndSpace(concatentatedText))}concatentatedText=concatentatedText.trim(),this.viewObjectRendererProps={text:concatentatedText}}},DBObjectBrowserObjectDetailsController.prototype.preserveNewLineAndSpace=function(text){var retText=text;return retText=retText.replace(/\n/g,"<br/>"),retText=retText.replace(/ /g,"&nbsp;")},DBObjectBrowserObjectDetailsController.TABLE_PROPERTIES="Table Properties",DBObjectBrowserObjectDetailsController.DBMON_OBJECT_DETAILS="DBMON_OBJECT_DETAILS",DBObjectBrowserObjectDetailsController.TABLES="Tables",DBObjectBrowserObjectDetailsController.VIEWS="Views",DBObjectBrowserObjectDetailsController.MONGO_OBJECT_DETAIL_TABLE_COLUMN_NAMES=["ns","size","storageSize","avgObjSize","numExtents","totalIndexSize"],DBObjectBrowserObjectDetailsController.$inject=["$scope","resourceManager"],DBObjectBrowserObjectDetailsController}(DBObjectBrowserPagesControllerBase.DBObjectBrowserPagesControllerBase);exports.DBObjectBrowserObjectDetailsController=DBObjectBrowserObjectDetailsController,adComponentsModule.controller("dbObjectBrowserObjectDetailsController",DBObjectBrowserObjectDetailsController)});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __};define("app/view/dbMonitoring/objectBrowser/pages/objectDetails/DBObjBrwOracleDB2ObjectDetailsController",["require","exports","./DBObjectBrowserObjectDetailsController","../../DBObjectBrowserService"],function(require,exports,base,DBObjectBrowserService){var DBObjBrwOracleDB2ObjectDetailsController=function(_super){function DBObjBrwOracleDB2ObjectDetailsController($scope,resourceManager){_super.call(this,$scope,resourceManager),this.$scope=$scope,this.resourceManager=resourceManager,this.$scope.controller=this}return __extends(DBObjBrwOracleDB2ObjectDetailsController,_super),DBObjBrwOracleDB2ObjectDetailsController.prototype.fetchData=function(){this.clearView(),this.dbObjectBrowserService.oracleDB2RequestParams&&(this.isLoading=!0,this.isError=!1,this.title=this.dbObjectBrowserService.oracleDB2RequestParams.objectName,this.dbGetObjectDetailsTransientRequest=this.dbTransientEventManagerService.createSessionAndGetData(this.dbObjectBrowserService.dbServer.nodeId,TransientEventManagerService.SESSION_TYPE_DBMON,base.DBObjectBrowserObjectDetailsController.DBMON_OBJECT_DETAILS,null,this.dbObjectBrowserService.oracleDB2RequestParams,this,this.onObjectDataFetch,this.onError))},DBObjBrwOracleDB2ObjectDetailsController.prototype.onObjectDataFetch=function(transientData){if(transientData&&transientData.data){this.isLoading=!1,this.isError=!1;var resultSet=transientData.data[0];resultSet||(this.isError=!0);var data=resultSet.data;if(data){$(".ads-db-object-details-tableView").empty();for(var i=0;i<data.length;++i)this.renderTableObjectView(data[i])}}},DBObjBrwOracleDB2ObjectDetailsController.prototype.onDB2IndexNameClick=function(indexName){indexName&&(this.dbObjectBrowserService.oracleDB2RequestParams.objectType=DBObjectType.INDEX,this.dbObjectBrowserService.oracleDB2RequestParams.objectName=indexName,this.fetchData())},DBObjBrwOracleDB2ObjectDetailsController.prototype.setupEventListeners=function(){var _this=this;this.$scope.$on("$destroy",function(){_this.dbGetObjectDetailsTransientRequest&&_this.dbGetObjectDetailsTransientRequest.cancel()})},DBObjBrwOracleDB2ObjectDetailsController.$inject=["$scope","resourceManager"],DBObjBrwOracleDB2ObjectDetailsController}(base.DBObjectBrowserObjectDetailsController);adComponentsModule.controller("db2ObjBrwOracleDB2ObjectDetailsController",DBObjBrwOracleDB2ObjectDetailsController)});var QueryFilterService=function(){function QueryFilterService(){this.queryFilter=this.getEmptyFilterMap(),this.clientFilter=this.getEmptyFilterMap(),this.sessionFilter=this.getEmptyFilterMap(),this.namespaceFilter=this.getEmptyFilterMap(),this.databaseFilter=this.getEmptyFilterMap(),this.schemaFilter=this.getEmptyFilterMap(),this.moduleFilter=this.getEmptyFilterMap(),this.programFilter=this.getEmptyFilterMap()}return QueryFilterService.instance=function(){return AngularUtil.getADInjector().get("queryFilterService")},QueryFilterService.prototype.getEmptyFilterMap=function(){return{}},QueryFilterService.prototype.getQueryFilter=function(dbServerId){var queryFilterForDB=this.queryFilter[dbServerId];if(queryFilterForDB)return queryFilterForDB;var newQueryFilterForDB=this.getEmptyFilter();return this.queryFilter[dbServerId]=newQueryFilterForDB,newQueryFilterForDB},QueryFilterService.prototype.getClientFilter=function(dbServerId){var clientFilterForDB=this.clientFilter[dbServerId];if(clientFilterForDB)return clientFilterForDB;var newClientFilterForDB=this.getEmptyFilter();return this.clientFilter[dbServerId]=newClientFilterForDB,newClientFilterForDB},QueryFilterService.prototype.getSessionFilter=function(dbServerId){var sessionFilterForDB=this.sessionFilter[dbServerId];if(sessionFilterForDB)return sessionFilterForDB;var newSessionFilterForDB=this.getEmptyFilter();return this.sessionFilter[dbServerId]=newSessionFilterForDB,newSessionFilterForDB},QueryFilterService.prototype.getNamespaceFilter=function(dbServerId){var namespaceFilterForDB=this.namespaceFilter[dbServerId];if(namespaceFilterForDB)return namespaceFilterForDB;var newNamespaceFilterForDB=this.getEmptyFilter();return this.namespaceFilter[dbServerId]=newNamespaceFilterForDB,newNamespaceFilterForDB},QueryFilterService.prototype.getDatabaseFilter=function(dbServerId){var databaseFilterForDB=this.databaseFilter[dbServerId];if(databaseFilterForDB)return databaseFilterForDB;var newDatabaseFilterForDB=this.getEmptyFilter();return this.databaseFilter[dbServerId]=newDatabaseFilterForDB,newDatabaseFilterForDB},QueryFilterService.prototype.getSchemaFilter=function(dbServerId){var schemaFilterForDB=this.schemaFilter[dbServerId];if(schemaFilterForDB)return schemaFilterForDB;var newSchemaFilterForDB=this.getEmptyFilter();return this.schemaFilter[dbServerId]=newSchemaFilterForDB,newSchemaFilterForDB},QueryFilterService.prototype.getModuleFilter=function(dbServerId){var moduleFilterForDB=this.moduleFilter[dbServerId];if(moduleFilterForDB)return moduleFilterForDB;var newModuleFilterForDB=this.getEmptyFilter();return this.moduleFilter[dbServerId]=newModuleFilterForDB,newModuleFilterForDB},QueryFilterService.prototype.getProgramFilter=function(dbServerId){var programFilterForDB=this.programFilter[dbServerId];if(programFilterForDB)return programFilterForDB;var newProgramFilterForDB=this.getEmptyFilter();return this.programFilter[dbServerId]=newProgramFilterForDB,newProgramFilterForDB},QueryFilterService.prototype.getEmptyFilter=function(){var emptyFilter={size:QueryFilterService.DEFAULT_SIZE,filterBy:QueryFilterService.DEFAULT_FILTER_TYPE,visibleCount:0,filterString:"",waitStatesIds:[]};return emptyFilter},QueryFilterService.QUERY_BY_NEW_FILTER="QUERY_BY_NEW_FILTER",QueryFilterService.DEFAULT_SIZE={name:"100",value:100},QueryFilterService.DEFAULT_FILTER_TYPE="time",QueryFilterService.QUERY_FILTER_WAIT_STATES_FILTER_CHANGE="onWaitStatesFilterChange",QueryFilterService}();appdynamicsModule.service("queryFilterService",QueryFilterService),define("app/view/dbMonitoring/infoGrid/filter/QueryFilterService",function(){});var DatabaseField=function(){function DatabaseField(fieldDefinition,displayName){this.fieldDefinition=fieldDefinition,this.displayName=displayName;var baseIconSource=FieldDefinitionRendererController.getIconSourceBase(fieldDefinition);this.fieldIconSource="images/dataTypes/"+baseIconSource+"_gray.svg",this.fieldIconSourceInGrid="images/dataTypes/"+baseIconSource+"_blue.svg",this.fieldColumnWidth=DatabaseField.DEFAULT_COLUMN_WIDTH}return DatabaseField.getFieldName=function(databaseField){return Util.getProperty("fieldDefinition.fieldName",databaseField)},DatabaseField.isFieldDefinitionFieldTypeDouble=function(fieldDef){return fieldDef?fieldDef.fieldType===FieldType.DOUBLE:!1},DatabaseField.DEFAULT_COLUMN_WIDTH=10,DatabaseField.numQueries="numQueries",DatabaseField.dbType="dbType",DatabaseField.timeSpentInDb="timeSpentInDb",DatabaseField.health="health",DatabaseField}();define("app/view/dbMonitoring/allDatabases/filter/DatabaseField",function(){}),require(["lib/controller/services/dbMonitoring/DbMonitoringUiService","lib/controller/services/dbMonitoring/CollectorsUiService","lib/controller/services/dbMonitoring/waitStateFiltering/WaitStateFilteringUiService","app/view/dbMonitoring/DBMonitoringViewService","app/view/dbMonitoring/objectBrowser/pages/objectDetails/DBObjectBrowserObjectDetailsController","app/view/dbMonitoring/objectBrowser/pages/objectDetails/DBObjBrwOracleDB2ObjectDetailsController","app/view/dbMonitoring/infoGrid/filter/QueryFilterService","app/view/dbMonitoring/allDatabases/filter/DatabaseField"]),define("app/view/dbMonitoring/DBMonModuleCode",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SimGroupsService=function(_super){function SimGroupsService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(SimGroupsService,_super),SimGroupsService.instance=function(){return AngularUtil.getADInjector().get("simGroupsService")},SimGroupsService.prototype.getRoots=function(appId){var path="sim/v2/user/groups?appId="+appId,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimGroupsService","getRoots",path,[appId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SimGroupsService.prototype.getRoots_response=function(response){return response},SimGroupsService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],SimGroupsService}(ControllerUiServiceBase);adComponentsModule.service("simGroupsService",SimGroupsService),define("lib/controller/services/sim/groups/SimGroupsService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SimMetricDataService=function(_super){function SimMetricDataService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(SimMetricDataService,_super),SimMetricDataService.instance=function(){return AngularUtil.getADInjector().get("simMetricDataService")},SimMetricDataService.prototype.queryMachineMetrics=function(arg0){var path="sim/v2/user/metrics/query/machines",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimMetricDataService","queryMachineMetrics",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SimMetricDataService.prototype.queryMachineMetrics_response=function(response){return response},SimMetricDataService.prototype.queryNodeMetrics=function(arg0){var path="sim/v2/user/metrics/query/nodes",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimMetricDataService","queryNodeMetrics",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SimMetricDataService.prototype.queryNodeMetrics_response=function(response){return response},SimMetricDataService.prototype.writeMachineMetrics=function(machineId,timeMillis,arg2){var path="sim/v2/user/metrics/machines"+machineId+"/"+timeMillis,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimMetricDataService","writeMachineMetrics",path,[machineId,timeMillis,arg2]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg2),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg2,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SimMetricDataService.prototype.registerMetric=function(arg0){var path="sim/v2/user/metrics",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimMetricDataService","registerMetric",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SimMetricDataService.prototype.registerMetric_response=function(response){return response},SimMetricDataService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],SimMetricDataService}(ControllerUiServiceBase);adComponentsModule.service("simMetricDataService",SimMetricDataService),define("lib/controller/services/sim/metrics/SimMetricDataService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SimProcessesService=function(_super){function SimProcessesService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(SimProcessesService,_super),SimProcessesService.instance=function(){return AngularUtil.getADInjector().get("simProcessesService")},SimProcessesService.prototype.getProcesses=function(machineId,timeRange,limit,sortBy){var path="sim/v2/user/machines/"+machineId+"/processes?timeRange="+timeRange+"&limit="+limit+"&sortBy="+sortBy,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimProcessesService","getProcesses",path,[machineId,timeRange,limit,sortBy]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SimProcessesService.prototype.getProcesses_response=function(response){return response},SimProcessesService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],SimProcessesService}(ControllerUiServiceBase);adComponentsModule.service("simProcessesService",SimProcessesService),define("lib/controller/services/sim/processes/SimProcessesService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SimHealthService=function(_super){function SimHealthService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(SimHealthService,_super),SimHealthService.instance=function(){return AngularUtil.getADInjector().get("simHealthService")},SimHealthService.prototype.queryHealth=function(arg0){var path="sim/v2/user/health",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimHealthService","queryHealth",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SimHealthService.prototype.queryHealth_response=function(response){return response},SimHealthService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],SimHealthService}(ControllerUiServiceBase);adComponentsModule.service("simHealthService",SimHealthService),define("lib/controller/services/sim/health/SimHealthService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SimMachinesService=function(_super){function SimMachinesService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(SimMachinesService,_super),SimMachinesService.instance=function(){return AngularUtil.getADInjector().get("simMachinesService")},SimMachinesService.prototype.getMachine=function(id){var path="sim/v2/user/machines/"+id,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimMachinesService","getMachine",path,[id]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["controllerConfig.objectMapper.serializationConfig.dateFormat.calendar.time","controllerConfig.objectMapper.deserializationConfig.dateFormat.calendar.time","controllerConfig.objectMapper.deserializationContext.config.dateFormat.calendar.time","controllerConfig.objectMapper.deserializationContext.config.dateFormat.calendar.time","controllerConfig.objectMapper.serializerProvider.config.dateFormat.calendar.time","controllerConfig.objectMapper.serializerProvider.config.dateFormat.calendar.time","controllerConfig.objectMapper.dateFormat.calendar.time","agentConfig.objectMapper.serializationConfig.dateFormat.calendar.time","agentConfig.objectMapper.deserializationConfig.dateFormat.calendar.time","agentConfig.objectMapper.deserializationContext.config.dateFormat.calendar.time","agentConfig.objectMapper.deserializationContext.config.dateFormat.calendar.time","agentConfig.objectMapper.serializerProvider.config.dateFormat.calendar.time","agentConfig.objectMapper.serializerProvider.config.dateFormat.calendar.time","agentConfig.objectMapper.dateFormat.calendar.time"]),response})},SimMachinesService.prototype.getMachine_response=function(response){return response},SimMachinesService.prototype.getMachines=function(appIds,tierIds,nodeIds){void 0===appIds&&(appIds=""),void 0===tierIds&&(tierIds=""),void 0===nodeIds&&(nodeIds="");var path="sim/v2/user/machines?appIds="+appIds+"&tierIds="+tierIds+"&nodeIds="+nodeIds,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimMachinesService","getMachines",path,[appIds,tierIds,nodeIds]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SimMachinesService.prototype.getMachines_response=function(response){return response},SimMachinesService.prototype.getExtendedMachine=function(id){var path="sim/v2/user/machines/"+id+"/extended",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimMachinesService","getExtendedMachine",path,[id]),apiCall.httpMethod="GET");var deferred=this.$q.defer();this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred));var promise=deferred.promise;return promise=promise.then(function(response){return DateTimeUtil.fixDates(response,["controllerConfig.objectMapper.serializationConfig.dateFormat.calendar.time","controllerConfig.objectMapper.deserializationConfig.dateFormat.calendar.time","controllerConfig.objectMapper.deserializationContext.config.dateFormat.calendar.time","controllerConfig.objectMapper.deserializationContext.config.dateFormat.calendar.time","controllerConfig.objectMapper.serializerProvider.config.dateFormat.calendar.time","controllerConfig.objectMapper.serializerProvider.config.dateFormat.calendar.time","controllerConfig.objectMapper.dateFormat.calendar.time","agentConfig.objectMapper.serializationConfig.dateFormat.calendar.time","agentConfig.objectMapper.deserializationConfig.dateFormat.calendar.time","agentConfig.objectMapper.deserializationContext.config.dateFormat.calendar.time","agentConfig.objectMapper.deserializationContext.config.dateFormat.calendar.time","agentConfig.objectMapper.serializerProvider.config.dateFormat.calendar.time","agentConfig.objectMapper.serializerProvider.config.dateFormat.calendar.time","agentConfig.objectMapper.dateFormat.calendar.time"]),response})},SimMachinesService.prototype.getExtendedMachine_response=function(response){return response},SimMachinesService.prototype.deleteMachine=function(id){var path="sim/v2/user/machines/"+id,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimMachinesService","deleteMachine",path,[id]),apiCall.httpMethod="DELETE");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"DELETE"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SimMachinesService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],SimMachinesService}(ControllerUiServiceBase);adComponentsModule.service("simMachinesService",SimMachinesService),define("lib/controller/services/sim/machines/SimMachinesService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d
}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SamTargetsHttpUserService=function(_super){function SamTargetsHttpUserService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(SamTargetsHttpUserService,_super),SamTargetsHttpUserService.instance=function(){return AngularUtil.getADInjector().get("samTargetsHttpUserService")},SamTargetsHttpUserService.prototype.getSamTarget=function(id){var path="sim/v2/user/sam/targets/http/"+id,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SamTargetsHttpUserService","getSamTarget",path,[id]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SamTargetsHttpUserService.prototype.getSamTarget_response=function(response){return response},SamTargetsHttpUserService.prototype.registerSamTarget=function(arg0){var path="sim/v2/user/sam/targets/http",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SamTargetsHttpUserService","registerSamTarget",path,[arg0]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg0),apiCall.httpMethod="POST");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg0,method:"POST"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SamTargetsHttpUserService.prototype.registerSamTarget_response=function(response){return response},SamTargetsHttpUserService.prototype.updateSamTarget=function(id,arg1){var path="sim/v2/user/sam/targets/http/"+id,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SamTargetsHttpUserService","updateSamTarget",path,[id,arg1]),this.apiLoggerService.captureRequests&&(apiCall.postData=arg1),apiCall.httpMethod="PUT");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",data:arg1,method:"PUT"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SamTargetsHttpUserService.prototype.getSamTargets=function(){var path="sim/v2/user/sam/targets/http",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SamTargetsHttpUserService","getSamTargets",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SamTargetsHttpUserService.prototype.getSamTargets_response=function(response){return response},SamTargetsHttpUserService.prototype.deleteSamTarget=function(id){var path="sim/v2/user/sam/targets/http/"+id,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SamTargetsHttpUserService","deleteSamTarget",path,[id]),apiCall.httpMethod="DELETE");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"DELETE"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SamTargetsHttpUserService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],SamTargetsHttpUserService}(ControllerUiServiceBase);adComponentsModule.service("samTargetsHttpUserService",SamTargetsHttpUserService),define("lib/controller/services/sim/sam/SamTargetsHttpUserService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SamEventsUserService=function(_super){function SamEventsUserService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(SamEventsUserService,_super),SamEventsUserService.instance=function(){return AngularUtil.getADInjector().get("samEventsUserService")},SamEventsUserService.prototype.getTargetEventDetails=function(targetId,eventId){var path="sim/v2/user/sam/target/"+targetId+"/events/"+eventId+"/details",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SamEventsUserService","getTargetEventDetails",path,[targetId,eventId]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SamEventsUserService.prototype.getTargetEventDetails_response=function(response){return response},SamEventsUserService.prototype.getTargetEvents=function(targetId,maxCount,timerange){void 0===maxCount&&(maxCount=600),void 0===timerange&&(timerange="last_5_minutes.BEFORE_NOW.-1.-1.5");var path="sim/v2/user/sam/target/"+targetId+"/events?maxCount="+maxCount+"&timerange="+timerange,apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SamEventsUserService","getTargetEvents",path,[targetId,maxCount,timerange]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SamEventsUserService.prototype.getTargetEvents_response=function(response){return response},SamEventsUserService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],SamEventsUserService}(ControllerUiServiceBase);adComponentsModule.service("samEventsUserService",SamEventsUserService),define("lib/controller/services/sim/sam/events/SamEventsUserService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},ServerMonitoringViewService=function(_super){function ServerMonitoringViewService($location,navigationService,notificationService,resourceManager,$rootScope,$q,simApplicationService){var _this=this;if(_super.call(this,$location,navigationService,notificationService,resourceManager),this.$location=$location,this.navigationService=navigationService,this.notificationService=notificationService,this.resourceManager=resourceManager,this.$rootScope=$rootScope,this.$q=$q,this.simApplicationService=simApplicationService,this.simAppId=0,this._isSimEnabled=!1,MasterService.instance().initData)this._isSimEnabled=MasterService.instance().initData.mainNavConfig.showSim,this.fetchSIMSpecificData();else var removeListenerFunction=this.$rootScope.$on(MasterService.UEV_INIT_DATA_FETCHED,function(){removeListenerFunction&&removeListenerFunction(),_this._isSimEnabled=MasterService.instance().initData.mainNavConfig.showSim,_this.fetchSIMSpecificData()})}return __extends(ServerMonitoringViewService,_super),ServerMonitoringViewService.instance=function(){return AngularUtil.getADInjector().get(ServerMonitoringViewService.SERVICE_NAME)},ServerMonitoringViewService.prototype.viewHome=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.SERVER_MONITORING_HOME),this.navigationService.navigateTo(params.toString())},ServerMonitoringViewService.prototype.viewMachineList=function(){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.SERVER_MONITORING_MACHINE_LIST),this.navigationService.navigateTo(params.toString())},ServerMonitoringViewService.prototype.viewAppMachineList=function(appId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_MACHINE_LIST),params.setParam(UrlConstants.APPLICATION_ID,appId.toString()),this.navigationService.navigateTo(params.toString())},ServerMonitoringViewService.prototype.viewAppComponentMachinesList=function(appId,componentId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_COMPONENT_MACHINE_LIST),params.setParam(UrlConstants.APPLICATION_ID,appId.toString()),params.setParam(UrlConstants.COMPONENT_ID,componentId.toString()),this.navigationService.navigateTo(params.toString())},ServerMonitoringViewService.prototype.viewMachine=function(machine){machine.simEnabled?this.viewMachineOverview(machine.id):DialogService.instance().openDialogAsync({controllerPath:"app/view/serverMonitoring/machines/list/summaryDialog/SIMMachineSummaryDialogController",templateUrl:"app/view/serverMonitoring/machines/list/summaryDialog/SIMMachineSummaryDialogView.html",data:machine})},ServerMonitoringViewService.prototype.viewMachineOverview=function(machineId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.SERVER_MONITORING_MACHINE_OVERVIEW),params.setParam(UrlConstants.SERVER_MONITORING_MACHINE_ID,machineId.toString()),this.navigationService.navigateTo(params.toString())},ServerMonitoringViewService.prototype.viewMachineMemory=function(machineId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.SERVER_MONITORING_MACHINE_MEMORY),params.setParam(UrlConstants.SERVER_MONITORING_MACHINE_ID,machineId.toString()),this.navigationService.navigateTo(params.toString())},ServerMonitoringViewService.prototype.viewMachineCPU=function(machineId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.SERVER_MONITORING_MACHINE_CPU),params.setParam(UrlConstants.SERVER_MONITORING_MACHINE_ID,machineId.toString()),this.navigationService.navigateTo(params.toString())},ServerMonitoringViewService.prototype.viewMachineDisks=function(machineId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.SERVER_MONITORING_MACHINE_DISKS),params.setParam(UrlConstants.SERVER_MONITORING_MACHINE_ID,machineId.toString()),this.navigationService.navigateTo(params.toString())},ServerMonitoringViewService.prototype.viewMachineNetwork=function(machineId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.SERVER_MONITORING_MACHINE_NETWORK),params.setParam(UrlConstants.SERVER_MONITORING_MACHINE_ID,machineId.toString()),this.navigationService.navigateTo(params.toString())},ServerMonitoringViewService.prototype.viewMachineProcesses=function(machineId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.SERVER_MONITORING_MACHINE_PROCESSES),params.setParam(UrlConstants.SERVER_MONITORING_MACHINE_ID,machineId.toString()),this.navigationService.navigateTo(params.toString())},ServerMonitoringViewService.prototype.viewAlertRespondHome=function(){AlertRespondViewService.instance().viewAlertRespondHome(this.simAppId)},ServerMonitoringViewService.prototype.viewEventsPage=function(){this.fetchIdAndGotoLocation(NavigationDataConstants.SERVER_MONITORING_EVENTS)},ServerMonitoringViewService.prototype.viewMetricBrowser=function(){this.fetchIdAndGotoLocation(NavigationDataConstants.METRIC_BROWSER)},ServerMonitoringViewService.prototype.viewSIMConfiguration=function(){this.fetchIdAndGotoLocation(NavigationDataConstants.SERVER_MONITORING_CONFIGURATION_HOME)},ServerMonitoringViewService.prototype.viewSAMTargetDetails=function(machineId,targetId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.SERVER_MONITORING_SAM_TARGET_DETAILS),params.setParam(UrlConstants.SERVER_MONITORING_SAM_TARGET_ID,targetId.toString()),params.setParam(UrlConstants.SERVER_MONITORING_MACHINE_ID,machineId.toString()),this.navigationService.navigateTo(params.toString())},ServerMonitoringViewService.prototype.viewServiceMonitoringList=function(){this.fetchIdAndGotoLocation(NavigationDataConstants.SERVER_MONITORING_SERVICE_LIST)},ServerMonitoringViewService.prototype.fetchSIMSpecificData=function(){var _this=this,deferred=this.$q.defer();return this._isSimEnabled||(this.simAppId=-1),this.simAppId?deferred.resolve(this.simAppId):this.simApplicationService.get().then(function(response){var app=_this.simApplicationService.get_response(response);_this.simAppId=app.id,deferred.resolve(app.id)},function(){deferred.reject()}),deferred.promise},ServerMonitoringViewService.prototype.getSIMHomeLocationBarEntryConfig=function(){var _this=this,config={};return config={label:this.resourceManager.getString("ui","ms_serverMonTopLevelNavLabel"),clickFn:function(){_this.viewMachineList()}}},ServerMonitoringViewService.prototype.isSIMEnabled=function(){return this._isSimEnabled},ServerMonitoringViewService.prototype.fetchIdAndGotoLocation=function(location){var _this=this;this.simAppId?this.goToLocation(location):this.fetchSIMSpecificData().then(function(){_this.goToLocation(location)})},ServerMonitoringViewService.prototype.goToLocation=function(location){this.viewApplicationLocation(location,this.simAppId)},ServerMonitoringViewService.SERVICE_NAME="serverMonitoringViewService",ServerMonitoringViewService.$inject=["$location","navigationService","notificationService","resourceManager","$rootScope","$q","simApplicationService"],ServerMonitoringViewService}(ViewServiceBase);appdynamicsModule.service(ServerMonitoringViewService.SERVICE_NAME,ServerMonitoringViewService),define("app/view/serverMonitoring/ServerMonitoringViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},NodeMachineViewService=function(_super){function NodeMachineViewService(){_super.call(this,InjectorService.instance().$location(),NavigationService.instance(),NotificationService.instance(),ResourceManager.instance())}return __extends(NodeMachineViewService,_super),NodeMachineViewService.instance=function(){return AngularUtil.getADInjector().get(NodeMachineViewService.SERVICE_NAME)},NodeMachineViewService.prototype.viewMachineOverview=function(machineId,appId,nodeId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_NODE_MACHINE_OVERVIEW),params.setNumberParam(UrlConstants.APPLICATION_ID,appId),params.setNumberParam(UrlConstants.NODE_ID,nodeId),params.setNumberParam(UrlConstants.SERVER_MONITORING_MACHINE_ID,machineId),this.navigationService.navigateTo(params.toString())},NodeMachineViewService.prototype.viewMachineDisks=function(machineId,appId,nodeId){var params=this.createUrlParamsWithCurrentTimeRange();params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_NODE_MACHINE_DISKS),params.setNumberParam(UrlConstants.APPLICATION_ID,appId),params.setNumberParam(UrlConstants.NODE_ID,nodeId),params.setNumberParam(UrlConstants.SERVER_MONITORING_MACHINE_ID,machineId),this.navigationService.navigateTo(params.toString())},NodeMachineViewService.prototype.viewMachineNetwork=function(machineId,appId,nodeId){var params=this.createUrlParamsWithCurrentTimeRange();params.setNumberParam(UrlConstants.APPLICATION_ID,appId),params.setNumberParam(UrlConstants.NODE_ID,nodeId),params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_NODE_MACHINE_NETWORK),params.setNumberParam(UrlConstants.SERVER_MONITORING_MACHINE_ID,machineId),this.navigationService.navigateTo(params.toString())},NodeMachineViewService.prototype.viewMachineProcesses=function(machineId,appId,nodeId){var params=this.createUrlParamsWithCurrentTimeRange();params.setNumberParam(UrlConstants.APPLICATION_ID,appId),params.setNumberParam(UrlConstants.NODE_ID,nodeId),params.setParam(UrlConstants.LOCATION,NavigationDataConstants.APP_NODE_MACHINE_PROCESSES),params.setNumberParam(UrlConstants.SERVER_MONITORING_MACHINE_ID,machineId),this.navigationService.navigateTo(params.toString())},NodeMachineViewService.SERVICE_NAME="nodeMachineViewService",NodeMachineViewService.$inject=[],NodeMachineViewService}(ViewServiceBase);appdynamicsModule.service(NodeMachineViewService.SERVICE_NAME,NodeMachineViewService),define("app/view/serverMonitoring/NodeMachineViewService",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},SimApplicationService=function(_super){function SimApplicationService($location,$http,$q,notificationService,resourceManager,apiLoggerService){_super.call(this,$location,$http,$q,notificationService,resourceManager,apiLoggerService),this.$location=$location,this.$http=$http,this.$q=$q,this.notificationService=notificationService,this.resourceManager=resourceManager,this.apiLoggerService=apiLoggerService}return __extends(SimApplicationService,_super),SimApplicationService.instance=function(){return AngularUtil.getADInjector().get("simApplicationService")},SimApplicationService.prototype.getNodes=function(){var path="sim/v2/user/app/nodes",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimApplicationService","getNodes",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SimApplicationService.prototype.getNodes_response=function(response){return response},SimApplicationService.prototype.getTiers=function(){var path="sim/v2/user/app/tiers",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimApplicationService","getTiers",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SimApplicationService.prototype.getTiers_response=function(response){return response},SimApplicationService.prototype.get=function(){var path="sim/v2/user/app",apiCall=null;this.apiLoggerService.logCalls&&(apiCall=this.apiLoggerService.logServiceCall("SimApplicationService","get",path,[]),apiCall.httpMethod="GET");var deferred=this.$q.defer();return this.$http({url:path,dataType:"json",method:"GET"}).success(this.getSuccessHandler(deferred,apiCall)).error(this.getErrorHandler(deferred)),deferred.promise},SimApplicationService.prototype.get_response=function(response){return response},SimApplicationService.$inject=["$location","$http","$q","notificationService","resourceManager","apiLoggerService"],SimApplicationService}(ControllerUiServiceBase);adComponentsModule.service("simApplicationService",SimApplicationService),define("lib/controller/services/sim/app/SimApplicationService",function(){}),require(["lib/controller/services/sim/groups/SimGroupsService","lib/controller/services/sim/metrics/SimMetricDataService","lib/controller/services/sim/processes/SimProcessesService","lib/controller/services/sim/health/SimHealthService","lib/controller/services/sim/machines/SimMachinesService","lib/controller/services/sim/sam/SamTargetsHttpUserService","lib/controller/services/sim/sam/events/SamEventsUserService","app/view/serverMonitoring/ServerMonitoringViewService","app/view/serverMonitoring/NodeMachineViewService","lib/controller/services/sim/app/SimApplicationService"]),define("app/view/serverMonitoring/SIMModuleCode",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},FilterSet=function(_super){function FilterSet(filters){void 0===filters&&(filters=[]),_super.call(this,filters),this.filters=filters,this.textSearchInput=null,this.filters=filters}return __extends(FilterSet,_super),FilterSet.getPageFilter=function(analyticsField,pageName,ajaxName,iframeName,virtualPageName,pageType,autoFetchOptions){var pageFilter=new EjsPageFilter(analyticsField,pageType,pageName,iframeName,ajaxName,virtualPageName,autoFetchOptions);return pageFilter},FilterSet.getPerformanceFilter=function(facetLowerBound,facetUpperBound,histogramFacet){var performanceFilter=new EjsPerformanceFilter;return performanceFilter.facetLowerBound=facetLowerBound,performanceFilter.facetUpperBound=facetUpperBound,performanceFilter.histogramFacet=histogramFacet,performanceFilter},FilterSet.prototype.addFilter=function(filter){var ejsFilter=filter;if(ejsFilter.type!==FilterType.TEXT&&ejsFilter.type!==FilterType.NUMERIC&&ejsFilter.type!==FilterType.NAME_VALUE_PAIR&&ejsFilter.type!==FilterType.SEARCH_INPUT_TEXT)for(var i=0;i<this.filters.length;i++)if(this.filters[i].type===filter.type&&(!filter.fieldCategory||filter.fieldCategory===this.filters[i].fieldCategory)&&(filter.type!==FilterType.SUPER_SELECT||filter.type===FilterType.SUPER_SELECT&&filter.analyticsField.fullPath===this.filters[i].analyticsField.fullPath)&&(filter.type!==FilterType.BOOLEAN||filter.type===FilterType.BOOLEAN&&filter.analyticsField.fullPath===this.filters[i].analyticsField.fullPath))return;this.filters.push(ejsFilter)},FilterSet.prototype.getSuperSelectFilter=function(analyticsField,selectList,autoFetchOptions){void 0===selectList&&(selectList=null),void 0===autoFetchOptions&&(autoFetchOptions=!0);var superSelectFilter;for(var i in this.filters){var filter=this.filters[i];if(filter.type==FilterType.SUPER_SELECT&&filter.analyticsField.fullPath===analyticsField.fullPath){superSelectFilter=filter;break}}return superSelectFilter?selectList&&(superSelectFilter.selectList=selectList):superSelectFilter=new EjsSuperSelectFilter(analyticsField,selectList,autoFetchOptions),superSelectFilter},FilterSet.prototype.getPageFilter=function(analyticsField,pageType,pageName,iframeName,ajaxName,virtualPageName,autoFetchOptions){void 0===pageType&&(pageType=null),void 0===pageName&&(pageName=null),void 0===iframeName&&(iframeName=null),void 0===ajaxName&&(ajaxName=null),void 0===virtualPageName&&(virtualPageName=null),void 0===autoFetchOptions&&(autoFetchOptions=!0);var pageFilter=_.findWhere(this.filters,{type:FilterType.PAGE,fieldCategory:analyticsField.fieldDefinition.category});return pageFilter?(pageType&&(pageFilter.pageType=pageType),pageName&&(pageFilter.pageName=pageName),iframeName&&(pageFilter.iframeName=iframeName),ajaxName&&(pageFilter.ajaxName=ajaxName),virtualPageName&&(pageFilter.virtualPageName=virtualPageName)):pageFilter=new EjsPageFilter(analyticsField,pageType,pageName,iframeName,ajaxName,virtualPageName,autoFetchOptions),pageFilter},FilterSet.prototype.getDeviceTypeFilter=function(fieldCategory,device,deviceOS,autoFetchOptions){void 0===device&&(device=null),void 0===deviceOS&&(deviceOS=null),void 0===autoFetchOptions&&(autoFetchOptions=!0);var deviceTypeFilter=_.findWhere(this.filters,{type:FilterType.DEVICE_TYPE,fieldCategory:fieldCategory});return deviceTypeFilter?(device&&(deviceTypeFilter.device=device),deviceOS&&(deviceTypeFilter.deviceOS=deviceOS)):deviceTypeFilter=new EjsDeviceTypeFilter(fieldCategory,device,deviceOS,autoFetchOptions),deviceTypeFilter},FilterSet.prototype.getLocationFilter=function(fieldCategory,geoCountryFilter,geoRegionFilter,geoCityFilter,autoFetchOptions){void 0===geoCountryFilter&&(geoCountryFilter=null),void 0===geoRegionFilter&&(geoRegionFilter=null),void 0===geoCityFilter&&(geoCityFilter=null),void 0===autoFetchOptions&&(autoFetchOptions=!0);var locationFilter=_.findWhere(this.filters,{type:FilterType.LOCATION,fieldCategory:fieldCategory});return locationFilter?(geoCountryFilter&&(locationFilter.geoCountry=geoCountryFilter),geoRegionFilter&&(locationFilter.geoRegion=geoRegionFilter),geoCityFilter&&(locationFilter.geoCity=geoCityFilter)):locationFilter=new EjsLocationFilter(fieldCategory,geoCountryFilter,geoRegionFilter,geoCityFilter,autoFetchOptions),locationFilter},FilterSet.prototype.getSyntheticJobFilter=function(fieldCategory,syntheticJob,autoFetchOptions){void 0===syntheticJob&&(syntheticJob=null),void 0===autoFetchOptions&&(autoFetchOptions=!0);var syntheticJobFilter=_.findWhere(this.filters,{type:FilterType.SYNTHETIC_JOB,fieldCategory:fieldCategory});return syntheticJobFilter?syntheticJob&&(syntheticJobFilter.syntheticJob=syntheticJob):syntheticJobFilter=new EjsSyntheticJobFilter(fieldCategory,syntheticJob,autoFetchOptions),syntheticJobFilter},FilterSet.prototype.getBooleanFilter=function(analyticsField,showTrueValues,showFalseValues){var booleanFilter;for(var i in this.filters){var filter=this.filters[i];if(filter.type===FilterType.BOOLEAN&&filter.analyticsField.fullPath===analyticsField.fullPath){booleanFilter=filter;break}}return booleanFilter?(Util.isDefAndNotNull(showTrueValues)&&(booleanFilter.showTrueValues=showTrueValues),Util.isDefAndNotNull(showFalseValues)&&(booleanFilter.showFalseValues=showFalseValues)):booleanFilter=new EjsBooleanFilter(analyticsField,showTrueValues,showFalseValues),booleanFilter},FilterSet.prototype.getInfrastructureFilter=function(entityType,selectedEntities){void 0===entityType&&(entityType=""),void 0===selectedEntities&&(selectedEntities=[]);var infrastructureFilter=_.findWhere(this.filters,{type:FilterType.INFRASTRUCTURE});return infrastructureFilter||(infrastructureFilter=new EjsInfrastructureFilter(entityType,selectedEntities)),infrastructureFilter},FilterSet.prototype.removeFilterFromContext=function(filterType,analyticsField){var filter={fieldCategory:analyticsField.fieldDefinition.category,type:filterType};return Util.removeWhere(this.filters,filter),Util.getInstantPromise()},FilterSet.prototype.removeFirstMatchingFilterFromContext=function(analyticsField){var filter=this.retrieveFirstMatchingAppliedFilter(analyticsField);return filter&&(this.filters=_.without(this.filters,filter)),Util.getInstantPromise()},FilterSet.prototype.replaceFilterInContext=function(filterType,analyticsField,value){var _this=this;return this.removeFirstMatchingFilterFromContext(analyticsField).then(function(){return _this.addFilterToContext(filterType,analyticsField,value)})},FilterSet.prototype.addFilterToContext=function(filterType,analyticsField,value,wrapQueryInQuotes){switch(void 0===wrapQueryInQuotes&&(wrapQueryInQuotes=!0),filterType){case FilterType.APPLICATION:return this.handleApplicationCase(filterType,analyticsField,value);case FilterType.BUSINESS_TRANSCATION:return this.handleBusinessTransactionCase(filterType,analyticsField,value);case FilterType.INFRASTRUCTURE:return this.handleInfrastructureCase(filterType,analyticsField,value);case FilterType.ERROR:case FilterType.TEXT:return this.handleTextCase(filterType,analyticsField,value,wrapQueryInQuotes);case FilterType.USER_EXPERIENCE:return this.handleUserExperienceCase(filterType,analyticsField,value);case FilterType.NUMERIC:return this.handleNumericCase(filterType,analyticsField,value);case FilterType.SUPER_SELECT:return this.handleSuperSelectCase(analyticsField,value);case FilterType.LOCATION:return this.handleLocationCase(analyticsField,value);case FilterType.PAGE:return this.handlePageCase(analyticsField,value);case FilterType.DEVICE_TYPE:return this.handleDeviceTypeCase(analyticsField,value);case FilterType.SYNTHETIC_JOB:return this.handleSyntheticJobCase(analyticsField,value);case FilterType.BOOLEAN:return this.handleBooleanCase(analyticsField,value);case FilterType.ERROR_TYPE:return this.handleTextCase(filterType,analyticsField,value,!1);case FilterType.SEARCH_INPUT_TEXT:default:return this.handleSearchInputTextCase(analyticsField,value)}},FilterSet.prototype.clearFilters=function(){this.filters=[]},FilterSet.prototype.handleSuperSelectCase=function(analyticsField,value){var superSelectFilter=this.getSuperSelectFilter(analyticsField);if(value){superSelectFilter.selectList.values||(superSelectFilter.selectList.values=[]);for(var found=!1,i=0;i<superSelectFilter.selectList.values.length;i++)if(superSelectFilter.selectList.values[i].value===value){found=!0;break}found||superSelectFilter.selectList.values.push({name:value,value:value})}return this.addFilter(superSelectFilter),Util.getInstantPromise()},FilterSet.prototype.handlePageCase=function(analyticsField,value){var pageFilter=this.getPageFilter(analyticsField);if(value)if(analyticsField.fieldDefinition.fieldName===AnalyticsField.pageName){var addValueToNameFilter=function(filter){filter&&(filter.values||(filter.values=[]),_.findWhere(filter.values,{value:value})||filter.values.push({name:value,value:value}),FilterService.instance().reselectSelectValuesAndMapToOptions(filter,!0))};if(pageFilter.pageType.value)addValueToNameFilter(pageFilter.getNameFilterForSelectedPageType());else{var namesFilters=pageFilter.getAllNameFilters();_.each(namesFilters,addValueToNameFilter)}pageFilter.pageType.value=null}else analyticsField.fieldDefinition.fieldName===AnalyticsField.pageType&&(pageFilter.pageType.value={name:value,value:value},FilterService.instance().reselectSelectValuesAndMapToOptions(pageFilter.pageType,!0));return this.addFilter(pageFilter),Util.getInstantPromise()},FilterSet.prototype.handleLocationCase=function(analyticsField,value){var locationFilter=this.getLocationFilter(analyticsField.fieldDefinition.category);return value&&(analyticsField.fieldDefinition.fieldName==AnalyticsField.geoCountry?locationFilter.geoCountry.value={name:value,value:value}:analyticsField.fieldDefinition.fieldName==AnalyticsField.geoRegion?locationFilter.geoCountry.value&&locationFilter.geoCountry.value.name==value||(locationFilter.geoRegion.value={name:value,value:value}):analyticsField.fieldDefinition.fieldName==AnalyticsField.geoCity&&(locationFilter.geoCity.value={name:value,value:value})),this.addFilter(locationFilter),Util.getInstantPromise()},FilterSet.prototype.handleDeviceTypeCase=function(analyticsField,value){var deviceFilter=this.getDeviceTypeFilter(analyticsField.fieldDefinition.category);if(value)if(analyticsField.fieldDefinition.fieldName==AnalyticsField.device){deviceFilter.device.values||(deviceFilter.device.values=[]);for(var found=!1,i=0;i<deviceFilter.device.values.length;i++)if(deviceFilter.device.values[i].value===value){found=!0;break}found||deviceFilter.device.values.push({name:value,value:value})}else if(analyticsField.fieldDefinition.fieldName==AnalyticsField.deviceOs){deviceFilter.deviceOS.values||(deviceFilter.deviceOS.values=[]);for(var found=!1,i=0;i<deviceFilter.deviceOS.values.length;i++)if(deviceFilter.deviceOS.values[i].value===value){found=!0;break}found||deviceFilter.deviceOS.values.push({name:value,value:value})}return this.addFilter(deviceFilter),Util.getInstantPromise()},FilterSet.prototype.handleSyntheticJobCase=function(analyticsField,value){var syntheticJobFilter=this.getSyntheticJobFilter(analyticsField.fieldDefinition.category);if(value){syntheticJobFilter.syntheticJob.values||(syntheticJobFilter.syntheticJob.values=[]);for(var found=!1,i=0;i<syntheticJobFilter.syntheticJob.values.length;i++)if(syntheticJobFilter.syntheticJob.values[i].value===value){found=!0;break}found||syntheticJobFilter.syntheticJob.values.push({name:value,value:value})}return this.addFilter(syntheticJobFilter),Util.getInstantPromise()},FilterSet.prototype.handleBooleanCase=function(analyticsField,value){var showTrueValues=value===AnalyticsUtils.BOOLEAN_TRUE_STRING,showFalseValues=value===AnalyticsUtils.BOOLEAN_FALSE_STRING,booleanFilter=this.getBooleanFilter(analyticsField,showTrueValues,showFalseValues);
return this.addFilter(booleanFilter),Util.getInstantPromise()},FilterSet.prototype.handleApplicationCase=function(filterType,analyticsField,value){var _this=this;if(value){var successHandler=function(response){var selectedApp=ApplicationUiService.instance().getApplicationByName_response(response);selectedApp&&_this.filters.push(FilterSet.getApplicationFilterForGivenApp(selectedApp))},promise=ApplicationUiService.instance().getApplicationByName(value);return promise.then(successHandler)}return this.filters.push(FilterSet.getApplicationFilter()),Util.getInstantPromise()},FilterSet.prototype.handleBusinessTransactionCase=function(filterType,analyticsField,value){if(FilterSet.validateStringQuery(value)){var appFilter=this.getApplicationFilterFromFilterContext();if(appFilter){var fetchData=!1;return this.addBusinessTransactionFilterToContext(appFilter,analyticsField,value,fetchData)}return this.addTextFilterToContext(analyticsField,value),Util.getInstantPromise()}},FilterSet.prototype.addBusinessTransactionFilterToContext=function(appFilter,analyticsField,value){var _this=this;if(value){var selectedAppId=appFilter.selectedEntities[0]?appFilter.selectedEntities[0].id:void 0,successHandler=function(response){var btList=BusinessTransactionUiService.instance().getBusinessTransactions_response(response),selectedBt=_.findWhere(btList,{internalName:value});selectedBt&&_this.filters.push(FilterSet.getBTFilter([selectedBt.id]))};if(Util.isValidId(selectedAppId)){var promise=BusinessTransactionUiService.instance().getBusinessTransactions(selectedAppId);return promise.then(successHandler)}return this.addTextFilterToContext(analyticsField,value),Util.getInstantPromise()}return this.filters.push(FilterSet.getBTFilter()),Util.getInstantPromise()},FilterSet.prototype.handleInfrastructureCase=function(filterType,analyticsField,value){var appFilter=this.getApplicationFilterFromFilterContext();if(appFilter){var fetchData=!0;return this.addInfraFilterToContext(appFilter,analyticsField,value,fetchData)}return this.addTextFilterToContext(analyticsField,value),Util.getInstantPromise()},FilterSet.prototype.addInfraFilterToContext=function(appFilter,analyticsField,value){var _this=this,selectedAppId=appFilter.selectedEntities[0]?appFilter.selectedEntities[0].id:void 0,infrastructureFilter=this.getInfrastructureFilter(),tierSuccessHandler=function(response){var tiers=UserUiService.instance().getAllApplicationComponents_response(response),selectedTier=_.findWhere(tiers,{name:value});selectedTier&&(infrastructureFilter.pushInfrastructureEntity(selectedTier.id,selectedTier.name,FilterType.APPLICATION_COMPONENT),_this.addFilter(infrastructureFilter))},nodeSuccessHandler=function(response){var nodes=UserUiService.instance().getApplicationComponentNodesByApplicationId_response(response),selectedNode=_.findWhere(nodes,{name:value});selectedNode&&(infrastructureFilter.pushInfrastructureEntity(selectedNode.id,selectedNode.name,FilterType.APPLICATION_COMPONENT_NODE),_this.addFilter(infrastructureFilter))};if(analyticsField.fieldDefinition.fieldName==AnalyticsField.tier){if(value){if(Util.isValidId(selectedAppId)){var promise=UserUiService.instance().getAllApplicationComponents(selectedAppId);return promise.then(tierSuccessHandler)}return this.addTextFilterToContext(analyticsField,value),Util.getInstantPromise()}return infrastructureFilter.componentType=FilterType.APPLICATION_COMPONENT,this.addFilter(infrastructureFilter),Util.getInstantPromise()}if(analyticsField.fieldDefinition.fieldName==AnalyticsField.node){if(value){if(Util.isValidId(selectedAppId)){var promise=UserUiService.instance().getApplicationComponentNodesByApplicationId(selectedAppId);return promise.then(nodeSuccessHandler)}return this.addTextFilterToContext(analyticsField,value),Util.getInstantPromise()}return infrastructureFilter.componentType=FilterType.APPLICATION_COMPONENT_NODE,this.addFilter(infrastructureFilter),Util.getInstantPromise()}},FilterSet.prototype.handleUserExperienceCase=function(filterType,analyticsField,value){return this.filters.push(StringUtils.isNullOrEmptyString(value)?FilterSet.getUserExperienceFilter(analyticsField.displayName):FilterSet.getUserExperienceFilter(analyticsField.displayName,[value])),Util.getInstantPromise()},FilterSet.prototype.filterMatchesAnalyticsField=function(filter,analyticsField){for(var filterType=FilterSet.getFilterTypeForFieldDefinition(analyticsField.fieldDefinition),field=filter.getAffVoFromIFilter(),i=0;i<field.length;i++)if(filter.type===filterType&&field[i].fieldName===analyticsField.fullPath)return!0;return!1},FilterSet.prototype.retrieveMatchingAppliedFilters=function(analyticsField){var _this=this;return _.filter(this.filters,function(filter){return _this.filterMatchesAnalyticsField(filter,analyticsField)})},FilterSet.prototype.retrieveFirstMatchingAppliedFilter=function(analyticsField){var _this=this;return _.find(this.filters,function(filter){return _this.filterMatchesAnalyticsField(filter,analyticsField)})},FilterSet.prototype.handleNumericCase=function(filterType,analyticsField,value){if(isNaN(Number(value))){var rangeValues=AnalyticsUtils.getThresholdValuesFromLabel(value);this.filters.push(FilterSet.getNumericFilter(analyticsField,rangeValues[0],rangeValues[1]))}else{var numericFilter=new EjsNumericFilter;numericFilter.analyticsField=analyticsField,numericFilter.selectedOperator=AnalyticsUtils.getNumericOperator(AnalyticsUtils.EQUALS),numericFilter.equalityValue=value,this.filters.push(numericFilter)}return Util.getInstantPromise()},FilterSet.prototype.handleTextCase=function(filterType,analyticsField,value,wrapQueryInQuotes){return void 0===wrapQueryInQuotes&&(wrapQueryInQuotes=!0),this.addTextFilterToContext(analyticsField,value,wrapQueryInQuotes),Util.getInstantPromise()},FilterSet.prototype.addTextFilterToContext=function(analyticsField,value,wrapQueryInQuotes){if(void 0===wrapQueryInQuotes&&(wrapQueryInQuotes=!0),FilterSet.validateStringQuery(value)){var wrappedValue=value;wrapQueryInQuotes&&(wrappedValue=AnalyticsUtils.wrapStringInQuotes(value)),this.filters.push(FilterSet.getTextFilter(analyticsField,wrappedValue))}},FilterSet.prototype.handleSearchInputTextCase=function(analyticsField,value){return FilterSet.validateStringQuery(value)&&this.filters.push(FilterSet.getSearchInputTextFilter(analyticsField,value)),Util.getInstantPromise()},FilterSet.prototype.getApplicationFilterFromFilterContext=function(){return _.findWhere(this.filters,{type:FilterType.APPLICATION})},FilterSet.getFilterTypeForFieldDefinition=function(fieldDefinition){return fieldDefinition?fieldDefinition.fieldName==AnalyticsField.application?FilterType.APPLICATION:fieldDefinition.fieldName==AnalyticsField.transactionName?FilterType.BUSINESS_TRANSCATION:fieldDefinition.fieldName==AnalyticsField.requestExperience?FilterType.USER_EXPERIENCE:fieldDefinition.fieldName==AnalyticsField.tier?FilterType.INFRASTRUCTURE:fieldDefinition.fieldName==AnalyticsField.node?FilterType.INFRASTRUCTURE:fieldDefinition.fieldName==AnalyticsField.errors?FilterType.ERROR:AnalyticsFields.isFieldUsableForSuperSelect(fieldDefinition)?FilterType.SUPER_SELECT:fieldDefinition.fieldName==AnalyticsField.pageName||fieldDefinition.fieldName==AnalyticsField.pageType?FilterType.PAGE:fieldDefinition.fieldName==AnalyticsField.geoCountry||fieldDefinition.fieldName==AnalyticsField.geoRegion||fieldDefinition.category==FieldCategory.SYNTH_SESSION_RECORD&&fieldDefinition.fieldName==AnalyticsField.geoCity?FilterType.LOCATION:fieldDefinition.fieldName==AnalyticsField.device||fieldDefinition.fieldName==AnalyticsField.deviceOs?FilterType.DEVICE_TYPE:fieldDefinition.fieldName==AnalyticsField.scheduleId?FilterType.SYNTHETIC_JOB:fieldDefinition.fieldName==AnalyticsField.failureType?FilterType.ERROR_TYPE:AnalyticsFields.isFieldDefinitionFieldTypeNumeric(fieldDefinition)?FilterType.NUMERIC:AnalyticsFields.isFieldDefinitionFieldTypeBoolean(fieldDefinition)?FilterType.BOOLEAN:FilterType.TEXT:void 0},FilterSet.getFilterClassForType=function(filterType){switch(filterType){case FilterType.APPLICATION:return EjsApplicationFilter;case FilterType.BUSINESS_TRANSCATION:return EjsBusinessTransactionFilter;case FilterType.INFRASTRUCTURE:return EjsInfrastructureFilter;case FilterType.ERROR:return EjsErrorFilter;case FilterType.TEXT:return EjsTextFilter;case FilterType.USER_EXPERIENCE:return EjsUserExperienceFilter;case FilterType.NUMERIC:return EjsNumericFilter;case FilterType.SUPER_SELECT:return EjsSuperSelectFilter;case FilterType.PAGE:return EjsPageFilter;case FilterType.DEVICE_TYPE:return EjsDeviceTypeFilter;case FilterType.LOCATION:return EjsLocationFilter;case FilterType.BOOLEAN:return EjsBooleanFilter;case FilterType.SYNTHETIC_JOB:return EjsSyntheticJobFilter;case FilterType.SEARCH_INPUT_TEXT:default:return EjsSearchInputTextFilter}},FilterSet.unmarshallFilterSetFromJSON=function(filterSetData){for(var filterSet=new FilterSet,i=0;i<filterSetData.filters.length;i++){var filterData=filterSetData.filters[i],FilterClass=FilterSet.getFilterClassForType(filterData.type),filterObject=new FilterClass;filterObject.unmarshallFilterFromJson(filterData),filterSet.filters.push(filterObject)}return filterSet.textSearchInput=filterSetData.textSearchInput,filterSet},FilterSet.getApplicationFilter=function(applicationId){void 0===applicationId&&(applicationId=-1);var applicationFilter=new EjsApplicationFilter;return-1!=applicationId&&applicationFilter.selectedEntities.push({id:applicationId}),applicationFilter},FilterSet.getApplicationFilterForGivenApp=function(application){var applicationFilter=new EjsApplicationFilter;return application&&applicationFilter.selectedEntities.push(EntityUtils.getApplicationEntity(application)),applicationFilter},FilterSet.getBTFilter=function(selectedBtIds){void 0===selectedBtIds&&(selectedBtIds=[]);var btFilter=new EjsBusinessTransactionFilter;return Util.isDefAndNotEmptyArray(selectedBtIds)&&selectedBtIds.forEach(function(btId){btFilter.selectedEntities.push(FilterSet.buildEntityObjectForGivenType(btId,"",EntityType.BUSINESS_TRANSACTION))}),btFilter},FilterSet.getErrorFilter=function(selectedErrorIds){void 0===selectedErrorIds&&(selectedErrorIds=[]);var errorFilter=new EjsErrorFilter;return Util.isDefAndNotEmptyArray(selectedErrorIds)&&selectedErrorIds.forEach(function(errorId){errorFilter.selectedEntities.push(FilterSet.buildEntityObjectForGivenType(errorId,"",EntityType.APPLICATION_DIAGNOSTIC_DATA))}),errorFilter},FilterSet.getUserExperienceFilter=function(displayName,selectedUserExperiences){var userExperienceFilter=new EjsUserExperienceFilter;return userExperienceFilter.displayName=displayName,userExperienceFilter.selectedHealthLabels=Util.isDefAndNotEmptyArray(selectedUserExperiences)?selectedUserExperiences:[],userExperienceFilter},FilterSet.getDiagSessionTypeFilter=function(){var diagSessionTypeFilter=new EjsDiagSessionTypeFilter;return diagSessionTypeFilter},FilterSet.getNumericFilter=function(analyticsField,lowValue,highValue,visibleOperators){var numericFilter=new EjsNumericFilter(visibleOperators);return numericFilter.analyticsField=analyticsField,_.isFinite(lowValue)&&_.isFinite(highValue)?(numericFilter.lowerThreshold=lowValue,numericFilter.higherThreshold=highValue,numericFilter.selectedOperator=AnalyticsUtils.getNumericOperator(AnalyticsUtils.RANGE)):_.isFinite(lowValue)?(numericFilter.lowerThreshold=lowValue,numericFilter.selectedOperator=AnalyticsUtils.getNumericOperator(AnalyticsUtils.GREATER_THAN_OR_EQUAL)):_.isFinite(highValue)&&(numericFilter.higherThreshold=highValue,numericFilter.selectedOperator=AnalyticsUtils.getNumericOperator(AnalyticsUtils.LESS_THAN_OR_EQUAL)),numericFilter},FilterSet.getTextFilter=function(analyticsField,selectedValue,userInputPromptText,hideHelpPopover){var textDataFilter=new EjsTextFilter;return textDataFilter.analyticsField=analyticsField,textDataFilter.selectedAnalyticsField=analyticsField,selectedValue&&(textDataFilter.selectedValue=selectedValue),userInputPromptText&&(textDataFilter.userInputPromptText=userInputPromptText),hideHelpPopover&&(textDataFilter.hideHelpPopover=!0),textDataFilter},FilterSet.getSearchInputTextFilter=function(analyticsField,searchInputTextValue){var searchInputTextFilter=new EjsSearchInputTextFilter;return searchInputTextFilter.selectedAnalyticsField=analyticsField,searchInputTextFilter.searchInputText=searchInputTextValue,searchInputTextFilter},FilterSet.getNameValuePairFilter=function(displayName,inputNameValuePair,selectedOption,selectionOptions){var nvpFilter=new EjsNameValuePairFilter;return nvpFilter.displayName=displayName,nvpFilter.inputNameValuePair=inputNameValuePair,nvpFilter.selectedOption=selectedOption,nvpFilter.selectionOptions=selectionOptions,nvpFilter},FilterSet.buildEntityObjectForGivenType=function(btId,btName,entityType){var entityDefObj=EntityUtils.getEntityDefinition(entityType,btId),entityObject=EntityUtils.getEntityByIdAndName(btId,btName);return entityObject.entityDefinition=entityDefObj,entityObject},FilterSet.validateStringQuery=function(searchInputText){var limitNoWildCardsToNChars=3,escapeCharacter="\\",limitCharsRegex=[".","?","+","*","|","{","}","[","]","(",")",'"',"\\"],limitCharsWildCard=["*","?"],limitChars=[],invalidInput=!1,isRegexQuery=!1;if(searchInputText){searchInputText=""+searchInputText,StringUtils.startsWith(searchInputText,FilterSet.REGEX_TOKEN)?(searchInputText=StringUtils.getEverythingAfterToken(searchInputText,FilterSet.REGEX_TOKEN).trim(),limitChars=limitCharsRegex,isRegexQuery=!0):limitChars=limitCharsWildCard,limitNoWildCardsToNChars>searchInputText.length&&(limitNoWildCardsToNChars=searchInputText.length);for(var iPos=0;limitNoWildCardsToNChars>iPos;iPos++){var reservedCharFound=limitChars.indexOf(searchInputText.charAt(iPos))>=0;searchInputText.charAt(iPos)===escapeCharacter&&iPos+1<searchInputText.length&&limitChars.indexOf(searchInputText.charAt(iPos+1))>=0?(limitNoWildCardsToNChars++,iPos++):reservedCharFound&&(invalidInput=!0)}if(invalidInput){var displayText=ResourceManager.instance().getString("ui","ms_invalidInput");return displayText+=isRegexQuery?" - "+ResourceManager.instance().getString("ui","ms_regexInvalidInput"):" - "+ResourceManager.instance().getString("ui","ms_SearchInvalidInput"),NotificationService.instance().displayError(displayText,""),!1}}return!0},FilterSet.REGEX_TOKEN="regex:",FilterSet}(FilterSetBase);define("app/view/components/filterBar/filters/Ejs/FilterSet",function(){});var __extends=this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __},EjsFilter=function(_super){function EjsFilter(autoFetchOptions){void 0===autoFetchOptions&&(autoFetchOptions=!0),_super.call(this,autoFetchOptions),this.autoFetchOptions=autoFetchOptions}return __extends(EjsFilter,_super),EjsFilter.prototype.getAffVoFromIFilter=function(){return[]},EjsFilter.prototype.unmarshallFilterFromJson=function(filterData){for(var attr in filterData)filterData.hasOwnProperty(attr)&&(this[attr]=filterData[attr])},EjsFilter}(FilterBase),EjsInfrastructureFilter=function(){function EjsInfrastructureFilter(entityType,selectedEntities){void 0===entityType&&(entityType=""),void 0===selectedEntities&&(selectedEntities=[]),this.selectedEntities=[],this.setFields(entityType,selectedEntities)}return EjsInfrastructureFilter.prototype.getAffVoFromIFilter=function(){var affVo={};return affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_NESTED,affVo.fieldValues=EntityUtils.getEntityNames(this.selectedEntities),this.componentType==FilterType.APPLICATION_COMPONENT?affVo.fieldName="segments.tier":this.componentType==FilterType.APPLICATION_COMPONENT_NODE&&(affVo.fieldName="segments.node"),[affVo]},EjsInfrastructureFilter}();MultipleInheritanceUtil.applyMixins(EjsInfrastructureFilter,[InfrastructureFilter,EjsFilter]);var EjsErrorFilter=function(){function EjsErrorFilter(){this.selectedEntities=[],this.setFields()}return EjsErrorFilter.prototype.getAffVoFromIFilter=function(){var affVo={};return affVo.fieldValues=EntityUtils.getEntityNames(this.selectedEntities),affVo.fieldName="segments.errors",affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_NESTED,[affVo]},EjsErrorFilter}();MultipleInheritanceUtil.applyMixins(EjsErrorFilter,[ErrorFilter,EjsFilter]);var EjsApplicationFilter=function(){function EjsApplicationFilter(){this.selectedEntities=[],this.setFields(),this.parameters.push({name:"ad-fetch-analytics-applications",value:"false"})}return EjsApplicationFilter.prototype.getAffVoFromIFilter=function(){var affVo={};return affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS,affVo.fieldValues=EntityUtils.getEntityNames(this.selectedEntities),affVo.fieldName="application",[affVo]},EjsApplicationFilter}();MultipleInheritanceUtil.applyMixins(EjsApplicationFilter,[ApplicationFilter,EjsFilter]);var EjsBusinessTransactionFilter=function(){function EjsBusinessTransactionFilter(){this.selectedEntities=[],this.setFields()}return EjsBusinessTransactionFilter.prototype.getAffVoFromIFilter=function(){var affVo={};return affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS,affVo.fieldName=AnalyticsField.transactionId,affVo.fieldValues=this.getBtIDSearchCriterias(this.selectedEntities),[affVo]},EjsBusinessTransactionFilter}();MultipleInheritanceUtil.applyMixins(EjsBusinessTransactionFilter,[BusinessTransactionFilter,EjsFilter]);var EjsHealthFilter=function(){function EjsHealthFilter(){this.selectedEntities=[],this.setFields()}return EjsHealthFilter.prototype.getAffVoFromIFilter=function(){var affVo={};return[affVo]},EjsHealthFilter}();MultipleInheritanceUtil.applyMixins(EjsHealthFilter,[HealthFilter,EjsFilter]);var EjsUserExperienceFilter=function(){function EjsUserExperienceFilter(){this.selectedEntities=[],this.setFields()}return EjsUserExperienceFilter.prototype.getAffVoFromIFilter=function(){var affVo={};return affVo.fieldName="segments.requestExperience",affVo.fieldValues=this.selectedHealthLabels,affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_NESTED,[affVo]},EjsUserExperienceFilter}();MultipleInheritanceUtil.applyMixins(EjsUserExperienceFilter,[UserExperienceFilter,EjsFilter]);var EjsHttpFilter=function(){function EjsHttpFilter(){this.setFields()}return EjsHttpFilter.prototype.getAffVoFromIFilter=function(){var affVo={};return this.selectedName==AnalyticsSearchFacade.URL&&(affVo.fieldName="segments.httpData.url"),this.selectedName==AnalyticsSearchFacade.PRINCIPAL&&(affVo.fieldName="segments.httpData.principal"),this.selectedName==AnalyticsSearchFacade.SESSION_ID&&(affVo.fieldName="segments.httpData.sessionId"),affVo.fieldValues=[this.selectedValue],affVo.esFilterType=AnalyticsSearchFacade.ES_QUERY_STRING_QUERY,[affVo]},EjsHttpFilter}();MultipleInheritanceUtil.applyMixins(EjsHttpFilter,[HttpFilter,EjsFilter]);var EjsNumericFilter=function(){function EjsNumericFilter(viewOpts){void 0===viewOpts&&(viewOpts=[]),this.viewOpts=viewOpts,this.setFields(viewOpts)}return EjsNumericFilter.prototype.getAffVoFromIFilter=function(){var affVo={};return affVo.fieldName=this.analyticsField.fullPath,this.selectedOperator&&(this.selectedOperator.value===AnalyticsUtils.EQUALS?(Util.isUndefOrNull(this.equalityValue)||(affVo.equalityValue=StringUtils.parseStringAsNumber(this.equalityValue)),affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_EQUALITY):this.selectedOperator.value===AnalyticsUtils.NOT_EQUALS?(Util.isUndefOrNull(this.equalityValue)||(affVo.equalityValue=StringUtils.parseStringAsNumber(this.equalityValue)),affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_NON_EQUALITY):(Util.isUndefOrNull(this.lowerThreshold)||this.selectedOperator.value!==AnalyticsUtils.RANGE&&this.selectedOperator.value!==AnalyticsUtils.GREATER_THAN_OR_EQUAL||(affVo.rangeStart=StringUtils.parseStringAsNumber(this.lowerThreshold)),Util.isUndefOrNull(this.higherThreshold)||this.selectedOperator.value!==AnalyticsUtils.RANGE&&this.selectedOperator.value!==AnalyticsUtils.LESS_THAN_OR_EQUAL||(affVo.rangeEnd=StringUtils.parseStringAsNumber(this.higherThreshold)),affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_RANGE)),[affVo]},EjsNumericFilter}();MultipleInheritanceUtil.applyMixins(EjsNumericFilter,[NumericFilter,EjsFilter]);var EjsTextFilter=function(){function EjsTextFilter(){this.setFields()}return EjsTextFilter.prototype.getAffVoFromIFilter=function(){var affVo={};if(this.selectedValue)if(AnalyticsUtils.isWrappedInQuotes(this.selectedValue)){affVo={},affVo.fieldName=AnalyticsFields.getFullPathForFieldDefinition(this.selectedAnalyticsField.fieldDefinition);var selectedValueStrippedOfQuotes=AnalyticsUtils.unwrapStringInQuotes(this.selectedValue);affVo.fieldValues=[selectedValueStrippedOfQuotes],affVo.esFilterType=AnalyticsSearchFacade.ES_MATCH_QUERY}else affVo={},affVo.fieldName=AnalyticsFields.getFullPathForFieldDefinition(this.selectedAnalyticsField.fieldDefinition),affVo.fieldValues=[this.selectedValue],affVo.esFilterType=AnalyticsSearchFacade.ES_QUERY_STRING_QUERY;return[affVo]},EjsTextFilter}();MultipleInheritanceUtil.applyMixins(EjsTextFilter,[TextFilter,EjsFilter]);var EjsSearchInputTextFilter=function(){function EjsSearchInputTextFilter(){this.setFields()}return EjsSearchInputTextFilter.prototype.getAffVoFromIFilter=function(){var affVo={};return this.searchInputText&&(affVo={},this.selectedAnalyticsField&&this.selectedAnalyticsField.fieldDefinition&&AnalyticsUtils.isFieldDefinitionAnalyzed(this.selectedAnalyticsField.fieldDefinition)?(affVo.fieldName=AnalyticsFields.getFullPathForFieldDefinition(this.selectedAnalyticsField.fieldDefinition),affVo.esFilterType=AnalyticsSearchFacade.ES_QUERY_STRING_QUERY):affVo.esFilterType=AnalyticsSearchFacade.ES_QUERY_STRING_QUERY,affVo.fieldValues=[this.searchInputText]),[affVo]},EjsSearchInputTextFilter}();MultipleInheritanceUtil.applyMixins(EjsSearchInputTextFilter,[SearchInputTextFilter,EjsFilter]);var EjsNameValuePairFilter=function(){function EjsNameValuePairFilter(){this.setFields()}return EjsNameValuePairFilter}();MultipleInheritanceUtil.applyMixins(EjsNameValuePairFilter,[NameValuePairFilter,EjsFilter]);var EjsDiagSessionTypeFilter=function(){function EjsDiagSessionTypeFilter(){this.setFields()}return EjsDiagSessionTypeFilter}();MultipleInheritanceUtil.applyMixins(EjsDiagSessionTypeFilter,[DiagSessionTypeFilter,EjsFilter]);var EjsSuperSelectFilter=function(){function EjsSuperSelectFilter(analyticsField,selectList,autoFetchOptions){void 0===selectList&&(selectList=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),this.setFields(analyticsField,selectList,autoFetchOptions)}return EjsSuperSelectFilter.prototype.getAffVoFromIFilter=function(){var affVo={};if(this.selectList&&this.selectList.values&&this.selectList.values.length>0){var fieldDef=this.analyticsField.fieldDefinition;affVo={},affVo.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),affVo.fieldValues=_.pluck(this.selectList.values,"value"),affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS}return[affVo]},EjsSuperSelectFilter.prototype.fetchTerms=function(context){for(var _this=this,contextCopy=angular.copy(context),i=0;i<contextCopy.filter.filters.length;i++){var filter=contextCopy.filter.filters[i];filter.type==FilterType.SUPER_SELECT&&filter.analyticsField.fullPath===this.analyticsField.fullPath&&(filter.selectList.values=[])}Util.removeWhere(contextCopy.filter.filters,{type:FilterType.SUPER_SELECT,analyticsField:this.analyticsField}),AnalyticsSearchFacade.getSelectOptionsForFieldAndCategory(this.analyticsField.fieldDefinition.fieldName,this.analyticsField.fieldDefinition.category,contextCopy).then(function(options){_this.selectList.options=options;for(var i=0;i<_this.selectList.options.length;i++){var displayFieldValue=new AnalyticsFieldValue(_this.selectList.options[i].value,_this.analyticsField);_this.selectList.options[i].name=displayFieldValue.valueDisplayString}_this.selectList.values?FilterService.instance().reselectSelectValuesAndMapToOptions(_this.selectList,!0):_this.selectList.values=[]})},EjsSuperSelectFilter}();MultipleInheritanceUtil.applyMixins(EjsSuperSelectFilter,[SuperSelectFilter,EjsFilter]);var EjsDeviceTypeFilter=function(){function EjsDeviceTypeFilter(fieldCategory,device,deviceOS,autoFetchOptions){void 0===device&&(device=null),void 0===deviceOS&&(deviceOS=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),this.setFields(fieldCategory,device,deviceOS,autoFetchOptions)}return EjsDeviceTypeFilter.prototype.getAffVoFromIFilter=function(){var affVo={},affVoArr=[];if(this.device&&this.device.values&&this.device.values.length>0){var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.device,this.fieldCategory);fieldDef&&(affVo={},affVo.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),affVo.fieldValues=_.pluck(this.device.values,"name"),affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS,affVoArr.push(affVo))}if(this.deviceOS&&this.deviceOS.values&&this.deviceOS.values.length>0){var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.deviceOs,this.fieldCategory);fieldDef&&(affVo={},affVo.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),affVo.fieldValues=_.pluck(this.deviceOS.values,"name"),affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS,affVoArr.push(affVo))}return affVoArr},EjsDeviceTypeFilter}();MultipleInheritanceUtil.applyMixins(EjsDeviceTypeFilter,[DeviceTypeFilter,EjsFilter]);var EjsLocationFilter=function(){function EjsLocationFilter(fieldCategory,geoCountry,geoRegion,geoCity,autoFetchOptions){void 0===geoCountry&&(geoCountry=null),void 0===geoRegion&&(geoRegion=null),void 0===geoCity&&(geoCity=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),this.setFields(fieldCategory,geoCountry,geoRegion,geoCity,autoFetchOptions)}return EjsLocationFilter.prototype.getAffVoFromIFilter=function(){var affVo,affVoArr=[];if(this.geoCountry&&this.geoCountry.value){var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.geoCountry,this.fieldCategory);fieldDef&&(affVo={},affVo.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),affVo.fieldValues=[this.geoCountry.value.name],affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS,affVoArr.push(affVo))}if(this.geoRegion&&this.geoRegion.value){var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.geoRegion,this.fieldCategory);fieldDef&&(affVo={},affVo.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),affVo.fieldValues=[this.geoRegion.value.name],affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS,affVoArr.push(affVo))}if(this.geoCity&&this.geoCity.value){var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.geoCity,this.fieldCategory);fieldDef&&(affVo={},affVo.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),affVo.fieldValues=[this.geoCity.value.name],affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS,affVoArr.push(affVo))}return affVoArr},EjsLocationFilter}();MultipleInheritanceUtil.applyMixins(EjsLocationFilter,[LocationFilter,EjsFilter]);var EjsBooleanFilter=function(){function EjsBooleanFilter(analyticsField,showTrueValues,showFalseValues){void 0===showTrueValues&&(showTrueValues=!1),void 0===showFalseValues&&(showFalseValues=!1),this.setFields(analyticsField,showTrueValues,showFalseValues)}return EjsBooleanFilter.prototype.getAffVoFromIFilter=function(){if(!this.showFalseValues&&this.showTrueValues||this.showFalseValues&&!this.showTrueValues){var fieldDef=this.analyticsField.fieldDefinition,affVo={};return affVo={},affVo.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),affVo.fieldValues=this.showTrueValues?["T"]:["F"],affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS,[affVo]}return[]},EjsBooleanFilter}();MultipleInheritanceUtil.applyMixins(EjsBooleanFilter,[BooleanFilter,EjsFilter]);var EjsSyntheticJobFilter=function(){function EjsSyntheticJobFilter(fieldCategory,syntheticJob,autoFetchOptions){void 0===syntheticJob&&(syntheticJob=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),this.setFields(fieldCategory,syntheticJob,autoFetchOptions)}return EjsSyntheticJobFilter.prototype.getAffVoFromIFilter=function(){var affVo={};if(this.syntheticJob&&this.syntheticJob.values&&this.syntheticJob.values.length>0){var fieldDef=MetaDataService.instance().currentFields.getFieldDefForNameAndCategory(AnalyticsField.scheduleId,this.fieldCategory);affVo={},affVo.fieldName=AnalyticsFields.getFullPathForFieldDefinition(fieldDef),affVo.fieldValues=_.pluck(this.syntheticJob.values,"value"),affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS}return[affVo]},EjsSyntheticJobFilter}();MultipleInheritanceUtil.applyMixins(EjsSyntheticJobFilter,[SyntheticJobFilter,EjsFilter]);var EjsPageFilter=function(){function EjsPageFilter(analyticsField,pageType,pageName,iframeName,ajaxName,virtualPageName,autoFetchOptions){void 0===pageType&&(pageType=null),void 0===pageName&&(pageName=null),void 0===iframeName&&(iframeName=null),void 0===ajaxName&&(ajaxName=null),void 0===virtualPageName&&(virtualPageName=null),void 0===autoFetchOptions&&(autoFetchOptions=!0),this.setFields(analyticsField,pageType,pageName,iframeName,ajaxName,virtualPageName,autoFetchOptions)}return EjsPageFilter.prototype.getAffVoFromIFilter=function(context){return this.pageType&&this.pageType.value?this.getAffVoForPageTypeFiltering():this.isFilteringByPageName()?context&&3===context.analyticsMode?this.getAffVoForSyntheticPageNameFiltering():this.getAffVoForRumPageNameFiltering():[]},EjsPageFilter.prototype.isFilteringByPageName=function(){return _.some(this.getAllNameFilters(),function(nameFilter){return nameFilter&&nameFilter.values&&nameFilter.values.length>0})},EjsPageFilter.prototype.getAffVoForPageTypeFiltering=function(){var parentFullPath,affVo={};return this.analyticsField&&(parentFullPath=AnalyticsFields.getParentPathForFieldDefinition(this.analyticsField.fieldDefinition)),parentFullPath?(affVo.fieldName=parentFullPath+"."+AnalyticsField.pageType,affVo.esFilterType=AnalyticsSearchFacade.ES_MATCH_QUERY):(affVo.fieldName=AnalyticsField.pageType,affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS),affVo.fieldValues=_.pluck([this.pageType.value],"name"),[affVo]},EjsPageFilter.prototype.getAffVoForSyntheticPageNameFiltering=function(){var parentFullPath,affVo={};return this.analyticsField&&(parentFullPath=AnalyticsFields.getParentPathForFieldDefinition(this.analyticsField.fieldDefinition)),parentFullPath?(affVo.fieldName=parentFullPath+"."+AnalyticsField.pageName,affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_NESTED):(affVo.fieldName=AnalyticsField.pageName,affVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS),affVo.fieldValues=this.pageName&&this.pageName.values&&this.pageName.values.length>0?_.pluck(this.pageName.values,"name"):[],[affVo]},EjsPageFilter.prototype.getAffVoForRumPageNameFiltering=function(){var fullPageNameFieldPath,pageNameFilterVO={};if(this.analyticsField){var parentFullPath=AnalyticsFields.getParentPathForFieldDefinition(this.analyticsField.fieldDefinition);fullPageNameFieldPath=parentFullPath?parentFullPath+"."+AnalyticsField.pageName:AnalyticsField.pageName}else fullPageNameFieldPath=AnalyticsField.pageName;pageNameFilterVO.andFilterPairs=[],pageNameFilterVO.fieldName=fullPageNameFieldPath;var nameAffVo={};nameAffVo.fieldName=AnalyticsField.pageName,nameAffVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS;var typeAffVo={};return typeAffVo.fieldName=AnalyticsField.pageType,typeAffVo.esFilterType=AnalyticsSearchFacade.ES_FILTER_TERMS,this.pageName&&this.pageName.values&&this.pageName.values.length>0&&(nameAffVo.fieldValues=_.pluck(this.pageName.values,"name"),typeAffVo.fieldValues=["BASE_PAGE"],pageNameFilterVO.andFilterPairs.push({pageTypeAffVo:_.clone(typeAffVo),pageNameAffVo:_.clone(nameAffVo)})),this.ajaxName&&this.ajaxName.values&&this.ajaxName.values.length>0&&(nameAffVo.fieldValues=_.pluck(this.ajaxName.values,"name"),typeAffVo.fieldValues=["AJAX"],pageNameFilterVO.andFilterPairs.push({pageTypeAffVo:_.clone(typeAffVo),pageNameAffVo:_.clone(nameAffVo)})),this.iframeName&&this.iframeName.values&&this.iframeName.values.length>0&&(nameAffVo.fieldValues=_.pluck(this.iframeName.values,"name"),typeAffVo.fieldValues=["IFRAME"],pageNameFilterVO.andFilterPairs.push({pageTypeAffVo:_.clone(typeAffVo),pageNameAffVo:_.clone(nameAffVo)})),this.virtualPageName&&this.virtualPageName.values&&this.virtualPageName.values.length>0&&(nameAffVo.fieldValues=_.pluck(this.virtualPageName.values,"name"),typeAffVo.fieldValues=["VIRTUAL_PAGE"],pageNameFilterVO.andFilterPairs.push({pageTypeAffVo:_.clone(typeAffVo),pageNameAffVo:_.clone(nameAffVo)})),[pageNameFilterVO]
},EjsPageFilter}();MultipleInheritanceUtil.applyMixins(EjsPageFilter,[PageFilter,EjsFilter]);var EjsPerformanceFilter=function(){function EjsPerformanceFilter(){this.setFields()}return EjsPerformanceFilter.prototype.getAffVoFromIFilter=function(){var affVo={};return[affVo]},EjsPerformanceFilter}();MultipleInheritanceUtil.applyMixins(EjsPerformanceFilter,[PerformanceFilter,EjsFilter]),define("app/view/components/filterBar/filters/Ejs/FilterDomainModel",function(){}),require(["app/pages/RouteControllerBase","app/view/services/ViewServiceBase","app/controller/MainViewControllerBase","app/model/EntityCache","app/config/UiConfig","app/events/EventConstants","app/view/components/filterBar/filters/FilterBase","app/view/common/multipleInheritance/MultipleInheritanceUtil","app/view/components/filterBar/filters/FilterSetBase","app/view/components/popover/PopoverDirective","app/view/components/popover/PopoverController","app/view/common/progressIndicator/ProgressIndicatorDirective","app/view/common/progressIndicator/ProgressIndicatorController"],function(){require(["app/pages/main/RouteController","app/services/MasterService","app/services/InactivityTimeoutService","app/services/InterstitialMessageService","app/services/EntityService","app/view/customDashboard2/CustomDashboardsModuleCode","app/services/DBTunaService","app/services/DBCamService","app/services/UserService","app/services/QuestStateService","app/services/SampleAppDownloadService","app/view/components/flowmap/FlowMapZoomLevels","app/controller/MainDashboardControllerBase","app/controller/MainAppViewControllerBase","app/config/App","app/config/AppConfig","app/model/ApplicationsCache","app/model/BusinessTransactionCache","app/model/ComponentCache","app/model/ComponentNodeCache","app/model/DatabaseCache","app/model/EUMPageCache","app/model/TimeBasedDataCache","app/config/GlobalConstants","app/services/InjectorService","app/services/EventStreamManagerService","app/services/NotificationConfigService","app/services/RESTService","app/view/apm/APMModuleCode","app/services/FlashService","app/view/home/HomeViewService","app/view/alertRespond/AlertRespondModuleCode","app/view/LoginView/LoginController","app/view/LoginView/LogoutController","app/view/leftMenuBar/LeftMenuBarModuleCode","app/view/common/dialogs/ExportDialog/ViewExportedTextController","app/view/eum/EUMModuleCode","app/view/components/treegrid/TreeGrid","app/view/components/treegrid/TreeGridController","app/view/components/metrics/performanceValue/PerformanceValueDirective","app/view/components/metrics/performanceValue/PerformanceValueController","app/view/components/flyoutSelector/FlyoutSelectorDirective","app/view/components/flyoutSelector/FlyoutSelectorController","app/view/components/eventFilters/EventFiltersDirective","app/view/components/eventFilters/EventFiltersController","app/view/components/eventFilters/EventFilterCacheService","app/view/components/flyoutSelector/FlyoutDirective","app/view/components/tree/AdExtTree","app/view/components/mainContainer/MainContainerDirective","app/view/components/checkbox/Checkbox","app/view/components/filterBar/FilterBar","app/view/components/filterBar/webAnalyze/WebAnalyzeFilterBar","app/view/components/dialog/Dialog","app/view/components/filterParameter/FilterParameterDirective","app/view/components/filterParameter/FilterParameterController","app/view/components/filterContainer/FilterContainerDirective","app/view/components/filterContainer/FilterContainerController","app/view/components/filterBar/filters/EntityFilter","app/view/components/filterBar/filters/UserExperienceFilter","app/view/components/filterBar/filters/HttpFilter","app/view/components/filterBar/filters/NumericFilter","app/view/components/filterBar/filters/TextFilter","app/view/components/filterBar/filters/SearchInputTextFilter","app/view/components/filterBar/filters/NameValuePairFilter","app/view/components/filterBar/filters/DiagSessionTypeFilter","app/view/components/filterBar/filters/SuperSelectFilter","app/view/components/filterBar/filters/DeviceTypeFilter","app/view/components/filterBar/filters/LocationFilter","app/view/components/filterBar/filters/BooleanFilter","app/view/components/filterBar/filters/SyntheticJobFilter","app/view/components/filterBar/filters/PageFilter","app/view/components/filterBar/filters/PerformanceFilter","app/view/components/filterBar/filters/ApplicationFilter","app/view/components/filterBar/filters/InfrastructureFilter","app/view/components/filterBar/filters/ErrorFilter","app/view/components/filterBar/filters/BusinessTransactionFilter","app/view/components/gridViewOptions/GridViewOptionsDirective","app/view/components/gridViewOptions/GridViewOptionsController","app/view/components/timeRangeSelector/TimeRangeSelectorDirective","app/view/components/timeRangeSelector/TimeRangeSelectorController","app/view/components/timeRangeSelector/CustomTimeRangePropertiesController","app/view/components/timeRangeSelector/SaveCustomTimeRangeDialogController","app/view/components/timeRangeSelector/ManageCustomTimeRangeDialogController","app/view/components/applicationSelector/ApplicationSelectorDirective","app/view/components/applicationSelector/ApplicationSelectorController","app/view/components/entityDropDownSelector/EntityDropDownSelectorDirective","app/view/components/entityDropDownSelector/EntityDropDownSelectorController","app/view/components/entityGrid/EntityGridDirective","app/view/components/entityGrid/EntityGridController","app/view/components/timeZoneSelector/TimeZoneSelectorDirective","app/view/components/timeZoneSelector/TimeZoneSelectorController","app/view/components/dropdown/dropdown","app/view/components/dropdown/DropDownController","app/view/components/dropdown/DropDownDirective","app/view/components/splitter/SplitterComp","app/view/components/accordion/Accordion","app/view/components/accordion/AccordionHeader","app/view/components/accordion/AccordionBody","app/view/components/accordion/AccordionHeadingPatched","app/view/components/autoscroll/Autoscroll","app/view/components/scrollTo/ScrollToDirective","app/view/components/locationBar/AppLocationBar","app/view/components/locationBar/AppLocationBarController","app/view/components/locationBar/LocationBarEntry","app/view/components/locationBar/LocationBarSeparator","app/view/components/locationBar/LocationBarEntryApplicationsList","app/view/components/locationBar/LocationBarEllipsis","app/view/components/dashListView/DashboardListBase","app/view/components/dashMainContent/DashMainContent","app/view/components/flowmap/FlowMap","app/view/components/flowmap/BackendGrouper","app/view/components/flowmap/renderers/FlowRendererUtils","app/view/components/flowmap/nodePopupList/NodePopupController","app/view/components/flowmap/nodePopupList/NodePopupList","app/view/components/flowmap/legend/FlowMapLegend","app/view/components/flowmap/legend/FlowMapLegendController","app/view/components/slowestRemoteCalls/SlowestRemoteCallsDirective","app/view/components/flowmap/hoverCards/btBreakdown/BTBreakdownController","app/view/components/flowmap/configure/flowMapConfigurator/FlowMapConfiguratorDirective","app/view/components/chordDiagram/ChordDiagramDirective","app/view/components/geoMap/GeoMap","app/view/components/geoMap/Globe","app/view/components/geoMap/GeoMapAnalyticsDirective","app/view/components/geoMap/GeoMapController","app/view/components/ammap/AmMapDirective","app/view/components/ammap/AmMapController","app/view/components/verticalAlign/VerticalAlign","app/view/components/baselineSelector/ADBaselineSelector","app/view/components/waterfallChart/AdWaterfallChart","app/view/components/waterfallChart/AdWaterfallEvent","app/view/components/waterfallChart/AdWaterfallMarkers","app/view/components/autoFillFix/AdAutoFillFix","app/view/components/chartCard/ChartCardDirective","app/view/components/emailConfigWarning/EmailConfigWarningDirective","app/view/LoginView/Login","app/view/mainNav/MainNavModuleCode","app/view/reports/create/ReportsCreateController","app/view/reports/schedulingWidget/SchedulingWidgetDirective","app/view/reports/schedulingWidget/SchedulingWidgetController","app/view/reports/schedulingWidget/SchedulingService","app/services/PreferencesService","app/view/components/svgIcon/SvgIconDirective","app/view/components/svgIcon/SvgIconController","app/view/components/toolbarButton/ToolbarButton","app/view/components/toolbar/ToolbarModuleCode","app/view/components/flyoutListItem/FlyoutListItem","app/utils/ExitStatUtils","app/utils/TransactionStatUtils","app/view/components/chart/ChartUtil","app/view/components/chart/ChartTimeSeriesData","app/view/components/chart/Chart","app/view/components/chart/MetricChartData","app/view/components/TabRow/TabRowDirective","app/view/components/popover/HelpBubblePopoverDirective","app/view/components/popover/HelpBubblePopoverController","app/view/components/popover/ScreenInfoBoxDirective","app/view/components/popover/ProductTourPopoverDirective","app/view/components/popover/ProductTourPopoverController","app/view/home/productTour/productTourProgressBar/ProductTourProgressBarDirective","app/view/home/productTour/productTourProgressBar/ProductTourProgressBarController","app/view/common/Events/EventsModuleCode","app/view/common/metricBrowser/MetricBrowserModuleCode","app/view/services/FloatingDialogService","app/view/services/EntityViewService","app/view/settings/AgentSettingsViewService","lib/controller/services/admin/AccountUiService","lib/controller/services/common/ApplicationUiService","lib/controller/services/freemium/ApplicationAdoptionUiService","lib/controller/services/common/metrics/MetricBrowserUiService","lib/controller/services/common/IncidentsUiService","lib/controller/services/common/BaselineUiService","lib/controller/services/common/events/EventsUiService","lib/controller/services/reports/ReportsUiService","lib/controller/services/common/events/TransientEventManagerUiService","lib/controller/services/common/metrics/MetricUiService","app/view/home/agentInstallWizard/AgentInstallWizardCode","lib/controller/services/common/HomeUiService","app/utils/Point2D","app/utils/Transform2D","app/view/analytics/AnalyticsModuleCode","app/view/common/notificationcenter/NotificationCenterDirective","app/view/common/notificationcenter/NotificationCenterService","app/view/networkMonitoring/services/NetworkMonitoringViewService","app/view/home/productTour/ProductTourService","app/utils/ExitPointUtil","app/view/home/HomeUtil","app/view/dbMonitoring/DBMonModuleCode","app/view/serverMonitoring/SIMModuleCode"],function(){require(["app/view/components/filterBar/filters/Ejs/FilterSet","app/view/components/filterBar/filters/Ejs/FilterDomainModel"],function(){angular.element(document).ready(function(){document.body.className=document.body.className+" ng-app",AngularUtil.configureModule(appdynamicsModule,0,1,2),AngularUtil.configureNgStats(),appdynamicsModule.run(["$http",function($http){var parseResponse=function(response,headerGetterFn){var result=response;if("application/json"==headerGetterFn("Content-Type"))try{result=angular.fromJson(response)}catch(e){result=response}return result};$http.defaults.transformResponse=[parseResponse]}]),angular.bootstrap(document,["appdynamics"]),window.__ad_bootstrap_jasmine__&&window.__ad_bootstrap_jasmine__(),top!==window&&top.parent.postMessage({type:"loadamd"},"*")})})})}),define("app/pages/main/MainAppModuleCode",function(){});